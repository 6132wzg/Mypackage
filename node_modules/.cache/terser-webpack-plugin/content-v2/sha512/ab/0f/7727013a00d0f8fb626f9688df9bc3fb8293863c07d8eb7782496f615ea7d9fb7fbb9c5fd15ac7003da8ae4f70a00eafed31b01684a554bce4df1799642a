{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"shop-sold-course-info-personal\"],{\"097d7\":function(o,e,t){\"use strict\";t.r(e);var n=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t(\"st-panel-layout\",{class:o.basic()},[t(\"st-panel\",{attrs:{title:\"私教课详情\"}},[t(\"div\",{attrs:{slot:\"actions\"},slot:\"actions\"},[t(\"st-btn-actions\",{attrs:{options:o.btnOptions}})],1),t(\"a-row\",{attrs:{gutter:24}},[t(\"a-col\",{attrs:{span:9}},[t(\"st-info\",[t(\"st-info-item\",{attrs:{label:\"课程名称\"}},[o._v(\"\\n            \"+o._s(o.personalInfo.course_name)+\"\\n          \")]),t(\"st-info-item\",{attrs:{label:\"类型\"}},[o._v(o._s(o.personalInfo.type))]),t(\"st-info-item\",{attrs:{label:\"剩余课时\"}},[o._v(\"\\n            \"+o._s(o.personalInfo.remain_course_num)+\"节\\n          \")]),t(\"st-info-item\",{attrs:{label:\"购买课时\"}},[o._v(\"\\n            \"+o._s(o.personalInfo.init_course_num)+\"节\\n          \")]),t(\"st-info-item\",{attrs:{label:\"有效期\"}},[o._v(\"\\n            \"+o._s(o.personalInfo.buy_time)+\" 至 \"+o._s(o.personalInfo.end_time)+\"\\n          \")]),t(\"st-info-item\",{attrs:{label:\"合同编号\"}},[o._v(\"\\n            \"+o._s(o.personalInfo.contract_number)+\"\\n          \")])],1)],1),t(\"a-col\",{attrs:{span:9}},[t(\"st-info\",[t(\"st-info-item\",{attrs:{label:\"所属会员\"}},[o._v(\"\\n            \"+o._s(o.personalInfo.member_name)+\"\\n          \")]),t(\"st-info-item\",{attrs:{label:\"手机号\"}},[o._v(\"\\n            \"+o._s(o.personalInfo.mobile)+\"\\n          \")]),t(\"st-info-item\",{attrs:{label:\"上课\"+o.$c(\"coach\")}},[t(\"coaches\",{attrs:{list:o.personalInfo.coach_name}})],1),t(\"st-info-item\",{attrs:{label:o.$c(\"coach\")+\"等级\"}},[o._v(\"\\n            \"+o._s(o.personalInfo.coach_level)+\"\\n          \")]),t(\"st-info-item\",{attrs:{label:\"订单号\"}},[o._v(\"\\n            \"+o._s(o.personalInfo.order_id)+\"\\n          \")])],1)],1),t(\"a-col\",{attrs:{span:6}},[t(\"st-info\",[t(\"st-info-item\",{attrs:{label:\"允许转让\"}},[o._v(\"\\n            \"+o._s(o._f(\"enumFilter\")(o.personalInfo.is_transferable,\"sold_common.is_transferable\"))+\"\\n          \")]),t(\"st-info-item\",{attrs:{label:\"转让手续费\"}},[o._v(\"\\n            \"+o._s(o.personalInfo.transfer_num)+o._s(o._f(\"enumFilter\")(o.personalInfo.transfer_unit,\"package_course.transfer_unit\"))+\"\\n          \")]),t(\"st-info-item\",{attrs:{label:\"当前状态\"}},[o._v(\"\\n            \"+o._s(o._f(\"enumFilter\")(o.personalInfo.course_status,\"sold_common.course_status\"))+\"\\n          \")]),t(\"st-info-item\",{attrs:{label:\"订单状态\"}},[o._v(\"\\n            \"+o._s(o._f(\"enumFilter\")(o.personalInfo.order_status,\"sold_common.order_status\"))+\"\\n          \")]),t(\"st-info-item\",{attrs:{label:\"时长\"}},[o._v(\"\\n            \"+o._s(o.personalInfo.duration)+\"分钟\\n          \")])],1)],1),t(\"a-col\",{attrs:{span:24}},[t(\"st-info\",[t(\"st-info-item\",{staticClass:\"mg-b0\",attrs:{label:\"备注\"}},[o._v(\"\\n            \"+o._s(o.personalInfo.description||\"无\")+\"\\n          \")])],1)],1)],1)],1),t(\"st-panel\",{staticClass:\"mg-t12\",attrs:{app:\"\",tabs:o.authTabs}},[t(\"router-view\")],1)],1)},s=[],r=t(\"aa4b\"),a=function(o){return[{if:o.auth[\"shop:sold:sold_personal_course|export_contract\"],text:\"查看合同\",click:o.toContract},{if:o.auth[\"shop:sold:sold_personal_course|reduce_times\"],text:\"扣次\",click:function(){return o.soldPersonalCourseActions.onDeduct(o.infoService.id)}},{if:o.auth[\"shop:sold:sold_personal_course|reactive\"],text:\"重新激活\",click:o.onActivated},{if:o.auth[\"shop:sold:sold_personal_course|expire\"],text:\"延长有效期\",click:o.onLease},{if:o.auth[\"shop:sold:sold_personal_course|frozen\"],text:\"冻结\",click:o.onFreeze},{if:o.auth[\"shop:sold:sold_personal_course|unfrozen\"],text:\"取消冻结\",click:o.onUnfreeze},{if:o.auth[\"shop:sold:sold_personal_course|change_coach\"],text:\"修改\".concat(o.$c(\"coach\")),click:o.onEditCoach},{if:o.auth[\"shop:sold:sold_personal_course|course_num\"],text:\"修改剩余课时\",click:o.onTransfer},{if:o.auth[\"shop:sold:sold_personal_course|transfer\"],text:\"转让\",click:o.onTransfer},{if:o.auth[\"brand_shop:order:order|refund\"],text:\"退款\",click:o.onRefund},{text:\"修改合同备注\",click:o.onEditContractDescription,if:o.auth[\"shop:sold:sold_personal_course|edit_contract_remark\"]},{text:\"对内备注\",click:o.onInternalNote,if:o.auth[\"shop:sold:sold_personal_course|internal_description\"]},{if:o.auth[\"shop:sold:sold_personal_course|rights_edit\"],text:\"修改权益\",click:function(){return o.soldPersonalCourseActions.onUpdateRights(o.infoService.id)}}]},i=t(\"c32d\"),c=t.n(i),l=t(\"0376\"),u=t(\"1ed9\"),f=t(\"ac94\"),d=t(\"aa62\"),p=t(\"cf81\"),h=t(\"9f90\"),_=t(\"7cbb\"),m=t(\"55e0\"),b=t(\"c262\"),v=t(\"1687\"),I=t(\"ec87\"),$={name:\"PageShopSoldCoursePersonalInfo\",bem:{basic:\"page-shop-sold-info\"},modals:{SoldCourseCoach:l[\"a\"],SoldCourseFreeze:u[\"a\"],SoldCourseRefund:f[\"a\"],SoldCourseSurplusPersonal:d[\"a\"],SoldCourseTransfer:p[\"a\"],SoldCourseActivated:h[\"a\"],SoldCourseLease:_[\"a\"]},components:{Coaches:m[\"a\"]},serviceInject:function(){return{infoService:r[\"InfoService\"]}},hooks:function(){return{internalNoteActions:Object(b[\"a\"])(),contractActions:Object(v[\"a\"])(this),soldPersonalCourseActions:Object(I[\"a\"])(this)}},rxState:function(){return{personalInfo:this.infoService.personalInfo$,authTabs:this.infoService.authTabs$,auth:this.infoService.auth$}},computed:{btnOptions:a},methods:{moment:c.a,onSurplus:function(){var o=this;this.$modalRouter.push({name:\"sold-course-surplus-personal\",props:{courseData:this.personalInfo},on:{success:function(){o.$router.reload()}}})},toContract:function(){var o=this.personalInfo,e=\"\".concat(window.location.origin,\"/common/contract-preview?id=\").concat(o.order_id);window.open(e)},onFreeze:function(){var o=this;this.$modalRouter.push({name:\"sold-course-freeze\",props:{type:\"personal\",id:this.personalInfo.id,courseName:this.personalInfo.course_name,courseNum:this.personalInfo.remain_course_num,courseEndTime:c()(1e3*this.personalInfo.end_time),time:\"\".concat(c()(1e3*this.personalInfo.buy_time).format(\"YYYY-MM-DD HH:mm\"),\" 至 \").concat(c()(1e3*this.personalInfo.end_time).format(\"YYYY-MM-DD HH:mm\"))},on:{success:function(){o.$router.reload()}}})},onUnfreeze:function(){var o=this;this.$confirm({title:\"提示\",content:\"是否取消冻结？\",maskClosable:!0,onOk:function(){return o.infoService.unFreeze(o.infoService.id).toPromise().then((function(){o.$router.reload()}))}})},onTransfer:function(){var o=this;this.$modalRouter.push({name:\"sold-course-transfer\",props:{type:\"personal\",id:this.personalInfo.id},on:{success:function(){o.$router.reload()}}})},onRefund:function(){var o=this;this.$modalRouter.push({name:\"sold-course-refund\",props:{type:\"personal\",id:this.personalInfo.id},on:{success:function(){o.$router.reload()}}})},onEditCoach:function(){var o=this;this.$modalRouter.push({name:\"sold-course-coach\",props:{record:this.personalInfo},on:{success:function(){o.$router.reload()}}})},onActivated:function(){var o=this;this.$modalRouter.push({name:\"sold-course-activated\",props:{type:\"personal\",id:this.personalInfo.id},on:{success:function(){o.$router.reload()}}})},onLease:function(o){var e=this;this.$modalRouter.push({name:\"sold-course-lease\",props:{type:\"personal\",id:this.personalInfo.id},on:{success:function(){e.$router.reload()}}})},onInternalNote:function(){this.internalNoteActions.onOpenModal({id:this.infoService.id})},onEditContractDescription:function(){var o=this.personalInfo,e=o.order_id,t=o.description;this.contractActions.editDescription({order_id:e,description:t})}}},k=$,S=t(\"2877\"),C=Object(S[\"a\"])(k,n,s,!1,null,null,null);e[\"default\"]=C.exports},aa4b:function(o,e,t){\"use strict\";t.r(e),t.d(e,\"InfoService\",(function(){return p}));var n,s,r=t(\"d225\"),a=t(\"b0b4\"),i=t(\"9ab4\"),c=t(\"0cd5\"),l=t(\"df29\"),u=t(\"287e\"),f=t(\"c4cc\"),d=t(\"2cbb\"),p=function(){function o(e,t){Object(r[\"a\"])(this,o),this.courseApi=e,this.authService=t,this.personalInfo$=new l[\"d\"]({}),this.id=\"\",this.loading$=new l[\"d\"]({}),this.auth$=new l[\"d\"]({}),this.authTabs$=this.authService.getAuthTabs$(\"shop-sold-course-info-personal-info\",{withQuery:[\"id\"]})}return Object(a[\"a\"])(o,[{key:\"getPackageInfo\",value:function(o,e){var t=this;return this.courseApi.getCourseInfo(o,e).pipe(Object(f[\"a\"])((function(o){t.personalInfo$.commit((function(){return o.info})),t.auth$.commit((function(){return o.auth}))})))}},{key:\"unFreeze\",value:function(o){return this.courseApi.unFreezeCourse(o,\"personal\")}},{key:\"beforeEach\",value:function(o){return this.id=o.meta.query.id,this.getPackageInfo(o.meta.query.id,\"personal\")}}]),o}();p=Object(i[\"b\"])([Object(c[\"b\"])(),Object(i[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(n=\"undefined\"!==typeof u[\"a\"]&&u[\"a\"])?n:Object,\"function\"===typeof(s=\"undefined\"!==typeof d[\"a\"]&&d[\"a\"])?s:Object])],p)}}]);","extractedComments":[]}