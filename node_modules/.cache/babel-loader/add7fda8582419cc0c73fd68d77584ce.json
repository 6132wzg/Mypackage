{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/shop/reception/entrance.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/shop/reception/entrance.vue","mtime":1600926555929},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport infoEdit from '@/views/components/info-edit#/info-edit';\nimport faceUpload from '@/views/biz-components/face-upload/face-upload';\nimport ShopAddLable from '@/views/biz-modals/shop/add-lable';\nimport { MessageService } from '@/services/message.service';\nimport { EntranceService } from \"./entrance.service\";\nimport { cloneDeep, get, debounce } from 'lodash-es';\nexport default {\n  name: 'modal-shop-reception-entrance',\n  props: {\n    member_id: {\n      type: [String, Number]\n    }\n  },\n  components: {\n    faceUpload: faceUpload,\n    infoEdit: infoEdit\n  },\n  modals: {\n    ShopAddLable: ShopAddLable\n  },\n  serviceInject: function serviceInject() {\n    return {\n      messageService: MessageService,\n      entranceService: EntranceService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      cabinetList: this.entranceService.cabinetList$,\n      loading: this.entranceService.loading$,\n      page: this.entranceService.page$,\n      sellerList: this.entranceService.sellerList$,\n      coachList: this.entranceService.coachList$,\n      cardList: this.entranceService.cardList$,\n      courseList: this.entranceService.courseList$,\n      entranceList: this.entranceService.entranceList$,\n      parent_types: this.entranceService.parent_types$,\n      auth: this.entranceService.auth$\n    };\n  },\n  data: function data() {\n    return {\n      show: false,\n      isAnyEdit: false,\n      // 是否处于编辑状态\n      memberInfo: {},\n      // 会员详细信息\n      memberAuth: {},\n      photoList: [],\n      // 会员头像\n      cabinets: [],\n      // 柜子\n      tags: [],\n      // 标签列表\n      proof: '',\n      // 入场凭证\n      courseProof: [],\n      // 课类入场凭证\n      cardProof: '',\n      // 卡类入场凭证\n      temporary_cabinet: '',\n      // 临时租赁柜\n      seller: '',\n      // 销售\n      coach: '',\n      // 教练\n      entranceOptionType: {\n        '1': 'reception-period-card',\n        '2': 'reception-number-card',\n        '3': 'reception-visit-appointment',\n        '4': 'reception-personal-course',\n        '5': 'reception-personal-team-course',\n        '6': 'reception-team-course',\n        '7': 'reception-small-course',\n        '8': 'reception-site-appointment'\n      },\n      isCheckinCourse: 1,\n      // 凭课入场\n      cabinetSearchOpen: false,\n      // 储物柜下拉列表开启\n      cabintSearchText: '',\n      // 储物柜搜索词\n      isCabinetAllocation: false,\n      // 是否在分配柜子的状态下\n      isCabinetFocus: false,\n      // 是否为临时柜聚焦状态\n      timer: null\n    };\n  },\n  computed: {\n    // 是否已入场\n    isEntry: function isEntry() {\n      return this.memberInfo.entry_status && +this.memberInfo.entry_status.value === 1;\n    },\n    canEntry: function canEntry() {\n      if (!this.auth.checkin) return false;\n\n      if (this.courseProof.length) {\n        return true;\n      }\n\n      return this.cardProof && this.cardProof !== -1 || this.cardProof === 0;\n    },\n    memberIsBirthday: function memberIsBirthday() {\n      return get(this.memberInfo, 'is_birthday', false);\n    },\n    memberType: function memberType() {\n      return get(this.memberInfo, 'member_type', {});\n    },\n    memberProof: function memberProof() {\n      return get(this.memberInfo, 'proof', {});\n    },\n    temporaryCabinet: function temporaryCabinet() {\n      var temporary_cabinet = get(this.memberInfo, 'temporary_cabinet', []);\n      var cabinet = temporary_cabinet.length ? temporary_cabinet[0] : {}; // 临时\n\n      return cabinet;\n    },\n    leasingCabinets: function leasingCabinets() {\n      // 长期\n      return get(this.memberInfo, 'leasing_cabinet', []);\n    },\n    leasingCabinetText: function leasingCabinetText() {\n      if (!this.leasingCabinets.length) return '暂无';\n      return this.leasingCabinets.reduce(function (str, cur) {\n        var prefix = str ? ' / ' : '';\n        str += prefix + cur.name;\n        return str;\n      }, '');\n    },\n    coachName: function coachName() {\n      return get(this.memberInfo.coach, 'name', '');\n    },\n    sellerName: function sellerName() {\n      return get(this.memberInfo.seller, 'name', '');\n    },\n    cardNum: function cardNum() {\n      return get(this.memberInfo, 'card_num', '');\n    },\n    rfid: function rfid() {\n      return get(this.memberInfo, 'rfid', '');\n    }\n  },\n  mounted: function mounted() {\n    this.entranceService.init().subscribe(); // 获取会员详情\n\n    this.init();\n    document.addEventListener('keydown', this.onInputKeyPress);\n  },\n  destroyed: function destroyed() {\n    document.removeEventListener('keydown', this.onInputKeyPress);\n  },\n  methods: {\n    handleJudgeRemarkAuth: function handleJudgeRemarkAuth(product_type, authList) {\n      if (Array.isArray(authList)) return false; // 不存在产品类型\n\n      if (!product_type) return false; // 场地预约\n\n      if (product_type === 8) return false;\n      var mapOption = {\n        1: 'shop:sold:sold_personal_course|internal_description',\n        2: 'shop:sold:sold_small_class_course|internal_description',\n        3: 'shop:sold:sold_package_course|internal_description',\n        4: 'shop:sold:sold_deposit_card|internal_description',\n        5: 'shop:sold:sold_member_card|internal_description'\n      };\n      var auth = mapOption[product_type];\n      return !!authList[auth];\n    },\n    handleEntranceRemarkChange: function handleEntranceRemarkChange(description, remarkData) {\n      this.entranceService.addDescription({\n        description: description,\n        order_id: remarkData.order_id\n      }).subscribe(function (res) {\n        remarkData.description = description;\n      });\n    },\n    handleCourseProofChange: function handleCourseProofChange(proof) {\n      if (proof.length) {\n        // 卡课不能一起选择\n        this.cardProof = '';\n      }\n    },\n    // 分配柜子\n    handleAllocationCabint: function handleAllocationCabint() {\n      var _this = this;\n\n      if (!this.isCabinetAllocation) {\n        this.isCabinetAllocation = true;\n        setTimeout(function () {\n          _this.$refs.cabinet.$el.click();\n        }, 200);\n      } else {\n        if (!this.isCabinetFocus) {\n          if (!this.temporary_cabinet) {\n            this.messageService.error({\n              content: '请选择一个临时柜'\n            });\n            setTimeout(function () {\n              _this.$refs.cabinet.$el.click();\n            }, 200);\n          } else {\n            this.handleChangeUserCabint();\n          }\n        } else {\n          if (this.temporary_cabinet) {\n            this.handleChangeUserCabint();\n          }\n        }\n      }\n    },\n    handleCabinetBlur: function handleCabinetBlur() {\n      this.cabinetSearchOpen = false;\n      this.isCabinetFocus = false;\n      this.cabintSearchText = '';\n    },\n    handleCabinetFocus: function handleCabinetFocus() {\n      this.isCabinetFocus = true;\n\n      if (!this.cabintSearchText) {\n        this.cabinetSearchOpen = false;\n        return;\n      }\n\n      if (!this.cabinetSearchOpen) this.cabinetSearchOpen = true;\n    },\n    handleCabinetSearch: debounce(function (keyword) {\n      this.cabinetSearchOpen = true;\n      this.cabintSearchText = keyword.trim();\n      if (!keyword.trim()) return false;\n      console.log('keyword', keyword);\n      this.entranceService.getCabinetList(this.member_id, {\n        keyword: this.cabintSearchText\n      }).subscribe();\n    }, 100),\n    handleCabinetEnter: function handleCabinetEnter(e) {\n      var _this2 = this;\n\n      var keyCode = e.keyCode;\n      var keyword = e.target.value;\n      console.log('handleCabinetEnter', keyword);\n      if (this.loading.getCabinetList) return false;\n      if (keyCode !== 13) return false;\n\n      if (!this.isEntry) {\n        // 未入场并可以入场时\n        if (keyword) {\n          this.handleSearchCabintAndChange(keyword);\n        } else {\n          if (this.isCabinetFocus) this.onEntry();\n        }\n      } else {\n        // 已入场,在分配柜子状态下\n        if (keyword) {\n          this.handleSearchCabintAndChange(keyword);\n        } else {\n          if (!this.temporary_cabinet) {\n            this.messageService.error({\n              content: '请选择一个临时柜'\n            });\n            setTimeout(function () {\n              _this2.$refs.cabinet.$el.click();\n            }, 200);\n          } else {\n            this.handleChangeUserCabint();\n          }\n        }\n      }\n    },\n    handleSearchCabintAndChange: function handleSearchCabintAndChange(keyword) {\n      var _this3 = this;\n\n      this.entranceService.getCabinetList(this.member_id, {\n        keyword: keyword\n      }).subscribe(function (res) {\n        var list = res.list;\n        var id = list.length ? list[0]['id'] : undefined;\n\n        if (id) {\n          _this3.temporary_cabinet = id;\n          console.log('id', id);\n\n          if (_this3.isEntry) {\n            _this3.handleChangeUserCabint();\n          } else {\n            _this3.onEntry();\n          }\n        } else {\n          _this3.messageService.error({\n            content: '未搜索到储物柜'\n          });\n\n          clearTimeout(_this3.timer);\n          _this3.timer = setTimeout(function () {\n            _this3.$refs.cabinet.$children[0]['setInputValue']('');\n\n            _this3.$refs.cabinet.$el.click();\n          }, 200);\n        }\n      });\n    },\n    // 分配柜子\n    handleChangeUserCabint: function handleChangeUserCabint() {\n      var _this4 = this;\n\n      this.entranceService.editEntranceCabinet({\n        member_id: +this.member_id,\n        cabinet_id: this.temporary_cabinet\n      }).subscribe(function (res) {\n        _this4.show = false;\n\n        _this4.$emit('done'); // if (this.isCabinetAllocation) this.isCabinetAllocation = false\n        // this.cabintSearchText = ''\n        // this.handleGetMemberInfo()\n\n      });\n    },\n    onInputKeyPress: function onInputKeyPress(e) {\n      var _this5 = this;\n\n      var keyCode = e.keyCode; // 判断是否在编辑状态,编辑状态下不可入离场\n\n      if (this.isAnyEdit) {\n        return false;\n      }\n\n      if (keyCode === 13) {\n        if (this.isEntry) {\n          if (!this.isCabinetAllocation) {\n            this.onLeaveConfirm();\n          } else {\n            if (this.isCabinetFocus) return false;\n\n            if (!this.temporary_cabinet) {\n              setTimeout(function () {\n                _this5.$refs.cabinet.$el.click();\n\n                _this5.messageService.error({\n                  content: '请选择一个临时柜'\n                });\n              }, 200);\n            } else {\n              this.handleChangeUserCabint();\n            }\n          }\n        } else {\n          // 在选择柜子\n          if (!this.isCabinetFocus) {\n            this.onEntry();\n          }\n        }\n      } // 分配柜子\n\n\n      if (keyCode === 120) {\n        if (this.isEntry) this.handleAllocationCabint();\n      }\n    },\n    init: function init() {\n      var _this6 = this;\n\n      this.entranceService.getMemberInfo(this.member_id).subscribe(function (res) {\n        _this6.memberInfo = cloneDeep(res.info);\n        _this6.memberAuth = cloneDeep(res.auth);\n        _this6.seller = get(res.info.seller, 'id', -1);\n        _this6.coach = get(res.info.coach, 'id', -1);\n        _this6.temporary_cabinet = get(_this6.temporaryCabinet, 'id', undefined);\n        _this6.tags = res.info.member_tag;\n        _this6.photoList = !Array.isArray(res.info.face_url) ? [res.info.face_url] : [];\n        _this6.isCheckinCourse = res.info.is_checkin_course;\n        _this6.proof = get(res.info.proof, 'proof_type'); // 获取会员入场凭证列表\n\n        if (!_this6.isEntry) {\n          _this6.entranceService.getEntranceOptionList(_this6.member_id).subscribe(function (res) {\n            _this6.handleInitProof();\n\n            setTimeout(function () {\n              _this6.$refs.cabinet.$el.click();\n            }, 300);\n          });\n        } else {\n          if (_this6.isCabinetAllocation) {\n            setTimeout(function () {\n              _this6.$refs.cabinet.$el.click();\n            }, 300);\n          }\n        }\n\n        _this6.entranceService.setCabinetList(res.info.temporary_cabinet); // 获取会员储物柜列表\n\n      });\n    },\n    handleProofChange: function handleProofChange(e) {\n      if (e.target.value) this.courseProof = [];\n      this.cardProof = e.target.value;\n    },\n    // 删除标签\n    handleRemoveTag: function handleRemoveTag(tag) {\n      var _this7 = this;\n\n      this.entranceService.getMemberLabelDelete({\n        user_id: this.member_id,\n        tag_id: tag.id\n      }).subscribe(function (res) {\n        _this7.handleGetMemberInfo();\n      });\n    },\n    // 获取会员详情\n    handleGetMemberInfo: function handleGetMemberInfo() {\n      var _this8 = this;\n\n      this.entranceService.getMemberInfo(this.member_id).subscribe(function (res) {\n        _this8.memberInfo = cloneDeep(res.info);\n        _this8.memberAuth = cloneDeep(res.auth);\n        _this8.seller = get(res.info.seller, 'id', -1);\n        _this8.coach = get(res.info.coach, 'id', -1);\n        _this8.tags = res.info.member_tag;\n        _this8.photoList = !Array.isArray(res.info.face_url) ? [res.info.face_url] : [];\n\n        if (!_this8.isEntry) {\n          _this8.handleInitProof();\n        }\n      });\n    },\n    handleInitProof: function handleInitProof() {\n      if (this.courseList.length && !this.courseProof.length) {\n        var proofs = this.courseList.filter(function (option) {\n          return option.is_able;\n        });\n        this.courseProof = proofs.length ? [proofs[0]['id']] : [];\n      } else if (!this.proof) {\n        var _proofs = this.cardList.filter(function (option) {\n          return option.is_able;\n        });\n\n        if (_proofs.length === 1 && _proofs[0]['id'] === 0) {\n          this.cardProof = '';\n        } else {\n          this.cardProof = _proofs.length ? _proofs[0]['id'] : this.cardList[0]['id'];\n        }\n      }\n    },\n    // 头像变更\n    handlePhotoChange: function handlePhotoChange(list) {\n      var _this9 = this;\n\n      this.entranceService.editFace(this.member_id, {\n        image_face: list[0]\n      }).subscribe(function (res) {\n        _this9.handleGetMemberInfo();\n      });\n    },\n    // 物理卡号变更\n    handleRfidChange: function handleRfidChange(rfid) {\n      var _this10 = this;\n\n      this.entranceService.getMemberPhysicalBind(+this.member_id, {\n        card_num: typeof this.memberInfo.card_num === 'string' ? this.memberInfo.card_num.trim() : this.memberInfo.card_num,\n        rfid: typeof rfid === 'string' ? rfid.trim() : rfid // 物理ID\n\n      }).subscribe(function (res) {\n        _this10.handleGetMemberInfo();\n      });\n    },\n    // 实体卡号变更\n    handleCardNumChange: function handleCardNumChange(card_num) {\n      var _this11 = this;\n\n      this.entranceService.getMemberPhysicalBind(+this.member_id, {\n        card_num: typeof card_num === 'string' ? card_num.trim() : card_num,\n        rfid: typeof this.memberInfo.rfid === 'string' ? this.memberInfo.rfid.trim() : this.memberInfo.rfid // 实体卡号\n\n      }).subscribe(function (res) {\n        _this11.handleGetMemberInfo();\n      });\n    },\n    // 销售变更\n    handleEditSeller: function handleEditSeller(seller_id) {\n      var _this12 = this;\n\n      this.entranceService.editSeller({\n        member_id: +this.member_id,\n        seller_id: seller_id === -1 ? 0 : seller_id\n      }).subscribe(function (res) {\n        _this12.handleGetMemberInfo();\n      });\n    },\n    // 教练变更\n    handleEditCoach: function handleEditCoach(coach_id) {\n      var _this13 = this;\n\n      this.entranceService.editCoach({\n        member_id: +this.member_id,\n        coach_id: coach_id === -1 ? 0 : coach_id\n      }).subscribe(function (res) {\n        _this13.handleGetMemberInfo();\n      });\n    },\n    // 备注变更\n    handleRemarkChange: function handleRemarkChange(remark) {\n      var _this14 = this;\n\n      this.entranceService.updateMemberEdit(+this.member_id, {\n        remark: remark\n      }).subscribe(function (res) {\n        _this14.handleGetMemberInfo();\n      });\n    },\n    // 修改编辑状态\n    handleChangeEditStatus: function handleChangeEditStatus(val) {\n      this.isAnyEdit = val;\n    },\n    // 入场\n    onEntry: function onEntry() {\n      var _this15 = this;\n\n      // 编辑状态下不可入场\n      if (this.isAnyEdit) return false; // 未选择凭证不可入场\n\n      if (!this.canEntry) return false;\n      var cabinet_id = this.temporary_cabinet ? +this.temporary_cabinet : undefined;\n      var seller_id = this.seller === -1 ? undefined : +this.seller;\n      var coach_id = this.coach === -1 ? undefined : +this.coach;\n      var member_id = +this.member_id;\n      var is_checkin_course = this.isCheckinCourse;\n      var deduct_num;\n      var proof = [];\n\n      if (this.cardProof || this.cardProof === 0) {\n        console.log('this.cardProof', this.cardProof);\n        var currentProof = this.cardList.length > 0 && this.cardList.filter(function (i) {\n          return i.id === _this15.cardProof;\n        })[0];\n        proof = [{\n          proof_value: +this.cardProof,\n          proof_type: currentProof.proof_type\n        }];\n        deduct_num = currentProof.deduct_num;\n      } else {\n        proof = this.courseProof.map(function (i) {\n          var obj = _this15.courseList.filter(function (course) {\n            return course.id === i;\n          })[0];\n\n          console.log('obj', obj);\n          return {\n            proof_value: obj.id,\n            proof_type: obj.proof_type\n          };\n        });\n      }\n\n      var reqParams = {\n        member_id: member_id,\n        seller_id: seller_id,\n        coach_id: coach_id,\n        cabinet_id: cabinet_id,\n        proof: proof,\n        is_checkin_course: is_checkin_course,\n        deduct_num: deduct_num\n      };\n\n      if (cabinet_id) {\n        reqParams = Object.assign(reqParams, {\n          cabinet_id: cabinet_id\n        });\n      }\n\n      this.entranceService.setEntrance(reqParams).subscribe(function (res) {\n        _this15.show = false;\n\n        _this15.messageService.success({\n          content: '入场成功'\n        });\n\n        _this15.$emit('done');\n      });\n    },\n    // 离场之前的确认\n    onLeaveConfirm: function onLeaveConfirm() {\n      var _this16 = this;\n\n      if (!this.auth.checkout) return false;\n      this.entranceService.getCabinetInfo(this.member_id).subscribe(function (res) {\n        if (res.info.is_smart) {\n          _this16.$error({\n            title: \"\\u5F53\\u524D\\u4F1A\\u5458\\u6709\\u50A8\\u7269\\u67DC\\u300C\".concat(res.info.cabinet_area_name, \"\\u300D\\u300C\").concat(res.info.serial_num, \"\\u300D\\u5C1A\\u672A\\u5F52\\u8FD8\\uFF0C\\u8BF7\\u5148\\u5F52\\u8FD8\\uFF01\"),\n            okText: '知道了'\n          });\n        } else {\n          _this16.onLeave();\n        }\n      });\n    },\n    // 离场\n    onLeave: function onLeave() {\n      var _this17 = this;\n\n      this.entranceService.setEntranceLeave(this.member_id).subscribe(function (res) {\n        _this17.show = false;\n\n        _this17.messageService.success({\n          content: '离场成功'\n        });\n\n        _this17.$emit('done');\n      });\n    },\n    handleClose: function handleClose() {\n      this.show = false;\n      this.$emit('done');\n    }\n  }\n};",{"version":3,"sources":["entrance.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <st-modal\n    :title=\"`${isEntry ? '离场' : '入场'}`\"\n    v-model=\"show\"\n    width=\"800px\"\n    wrapClassName=\"modal-shop-reception-entrance\"\n    @cancel=\"handleClose\"\n  >\n    <div class=\"member\">\n      <!-- 会员信息 -->\n      <div class=\"member-info\">\n        <div class=\"member-info-base\">\n          <!-- 头像 -->\n          <div class=\"member-info-base__avatar\">\n            <face-upload\n              width=\"146px\"\n              height=\"146px\"\n              placeholder=\"上传人脸\"\n              @change=\"handlePhotoChange\"\n              :list=\"photoList\"\n              :faceEditAuth=\"auth.editFace\"\n              :actionAuth=\"auth.delFace\"\n            >\n              <div\n                class=\"avatar-tip\"\n                v-if=\"memberType.name\"\n                slot=\"actionContent\"\n              >\n                {{ memberType.name }}\n              </div>\n            </face-upload>\n            <div class=\"avatar-tag\" v-if=\"memberIsBirthday\">\n              <img src=\"~@/assets/img/icon_face_birthday.png\" alt=\"\" />\n            </div>\n          </div>\n          <!-- 基本信息 -->\n          <div class=\"member-info-base__info\">\n            <!-- 姓名,手机号  -->\n            <div class=\"info-bar mg-b8\">\n              <div class=\"name\">\n                {{ memberInfo.member_name }}\n              </div>\n              <div class=\"sex\">\n                <st-icon\n                  :type=\"memberInfo.sex === 1 ? 'female' : 'male'\"\n                  :style=\"\n                    memberInfo.sex === 1 ? 'color:#FF5E41' : 'color:#3F66F6'\n                  \"\n                />\n              </div>\n\n              <div class=\"phone\">\n                {{ memberInfo.mobile }}\n              </div>\n            </div>\n            <!-- 标签 -->\n            <div class=\"info-bar mg-b4\">\n              <div class=\"tag\">\n                <div v-for=\"tag in tags\" :key=\"tag.id\">\n                  <a-tooltip :key=\"tag.id\" :title=\"tag.name\">\n                    <a-tag\n                      class=\"tag-item\"\n                      :key=\"tag.name\"\n                      :closable=\"auth.editMember\"\n                      @close=\"handleRemoveTag(tag)\"\n                    >\n                      {{ tag.name }}\n                    </a-tag>\n                  </a-tooltip>\n                </div>\n                <a\n                  v-modal-link=\"{\n                    name: 'shop-add-lable',\n                    props: {\n                      memberIds: [member_id]\n                    },\n                    on: { success: handleGetMemberInfo }\n                  }\"\n                >\n                  <a-tag style=\"background: #fff; borderStyle: dashed;\">\n                    <a-icon type=\"plus\" style=\"margin-right: 8px;\" />\n                    标签\n                  </a-tag>\n                </a>\n              </div>\n            </div>\n            <div class=\"info-bar\">\n              <!-- 卡号 -->\n              <info-edit\n                label=\"实体卡号：\"\n                :value=\"memberInfo.card_num\"\n                :canEdit=\"auth.editCardNum\"\n                :invisibleEdit=\"isAnyEdit\"\n                @confirm=\"handleCardNumChange\"\n                @changeEditStatus=\"handleChangeEditStatus\"\n              >\n                <st-overflow-text\n                  max-width=\"170px\"\n                  :value=\"cardNum\"\n                ></st-overflow-text>\n              </info-edit>\n              <!-- 物理卡号 -->\n              <info-edit\n                label=\"物理ID：\"\n                :value=\"memberInfo.rfid\"\n                :canEdit=\"auth.editCardNum\"\n                :invisibleEdit=\"isAnyEdit\"\n                @confirm=\"handleRfidChange\"\n                @changeEditStatus=\"handleChangeEditStatus\"\n              >\n                <st-overflow-text\n                  max-width=\"170px\"\n                  :value=\"rfid\"\n                ></st-overflow-text>\n              </info-edit>\n            </div>\n            <div class=\"info-bar\">\n              <!-- 跟进销售 -->\n              <info-edit\n                type=\"select\"\n                label=\"跟进销售：\"\n                :invisibleEdit=\"isAnyEdit\"\n                :canEdit=\"auth.bindSalesman\"\n                :value=\"seller\"\n                :options=\"sellerList\"\n                @confirm=\"handleEditSeller\"\n                @changeEditStatus=\"handleChangeEditStatus\"\n              >\n                <st-overflow-text\n                  max-width=\"170px\"\n                  :value=\"sellerName\"\n                ></st-overflow-text>\n              </info-edit>\n              <!-- 跟进教练 -->\n              <info-edit\n                type=\"select\"\n                :label=\"`跟进${$c('coach')}：`\"\n                :invisibleEdit=\"isAnyEdit\"\n                :canEdit=\"auth.bindCoach\"\n                :value=\"coach\"\n                :options=\"coachList\"\n                @confirm=\"handleEditCoach\"\n                @changeEditStatus=\"handleChangeEditStatus\"\n              >\n                <st-overflow-text\n                  max-width=\"170px\"\n                  :value=\"coachName\"\n                ></st-overflow-text>\n              </info-edit>\n            </div>\n          </div>\n        </div>\n        <div class=\"member-info-detail\">\n          <!-- 备注 -->\n          <div class=\"member-info-detail__remark\">\n            <info-edit\n              label=\"备注：\"\n              labelWidth=\"42\"\n              type=\"textarea\"\n              placeholder=\"添加备注信息\"\n              :canEdit=\"auth.editMember\"\n              :value=\"memberInfo.remark\"\n              :invisibleEdit=\"isAnyEdit\"\n              @confirm=\"handleRemarkChange\"\n              @changeEditStatus=\"handleChangeEditStatus\"\n              editBgColor=\"#f7f9fc\"\n              class=\"remark\"\n            >\n              <st-overflow-text\n                max-width=\"630px\"\n                needMaxContainerWidth\n                :defaultNoValueContent=\"auth.editMember ? '点击添加备注' : '--'\"\n                :value=\"memberInfo.remark\"\n              ></st-overflow-text>\n            </info-edit>\n          </div>\n        </div>\n      </div>\n      <!-- 入场凭证 -->\n      <div class=\"member-entrance\">\n        <div class=\"member-entrance-title\">\n          <div class=\"tip\">入场凭证</div>\n          <div v-if=\"!isEntry\">\n            <st-checkbox v-model=\"isCheckinCourse\" v-if=\"auth.entranceCheckin\">\n              凭课入场后直接签到课程\n            </st-checkbox>\n          </div>\n          <div v-else class=\"info\">\n            <div class=\"label\">入场时间：</div>\n            <div class=\"content\">{{ memberInfo.entry_time }}</div>\n          </div>\n        </div>\n        <!-- 入场 -->\n        <div v-if=\"!isEntry\">\n          <!-- 课类凭证 -->\n          <a-checkbox-group\n            v-model=\"courseProof\"\n            class=\"member-entrance-tickets mg-b16\"\n            @change=\"handleCourseProofChange\"\n            v-if=\"courseList.length\"\n          >\n            <div\n              class=\"member-entrance-ticket\"\n              v-for=\"entranceOption in courseList\"\n              :key=\"entranceOption.id\"\n            >\n              <a-checkbox\n                :value=\"entranceOption.id\"\n                :disabled=\"!entranceOption.is_able\"\n              />\n              <div\n                class=\"ticket-info\"\n                :class=\"{ disabled: !entranceOption.is_able }\"\n              >\n                <div class=\"ticket-info__base\">\n                  <div class=\"tag\">\n                    <st-tag\n                      :type=\"entranceOptionType[entranceOption.proof_type]\"\n                    ></st-tag>\n                  </div>\n                  <div class=\"name\">{{ entranceOption.proof_name }}</div>\n                  <div class=\"reason\">{{ entranceOption.reason }}</div>\n                  <div v-if=\"entranceOption.reason_hover.length\">\n                    <a-tooltip>\n                      <template slot=\"title\">\n                        <div\n                          v-for=\"(reson, index) in entranceOption.reason_hover\"\n                          :key=\"index\"\n                        >\n                          {{ reson }}\n                        </div>\n                      </template>\n                      <span class=\"st-help-tooltip-img tip\">\n                        <img\n                          height=\"14\"\n                          width=\"14\"\n                          src=\"~@/assets/img/tooltip-help.png\"\n                        />\n                      </span>\n                    </a-tooltip>\n                  </div>\n                </div>\n                <div\n                  class=\"ticket-info__detail\"\n                  v-if=\"\n                    entranceOption.proof_info &&\n                      entranceOption.proof_info.length\n                  \"\n                >\n                  <div\n                    class=\"info\"\n                    v-for=\"(info, index) in entranceOption.proof_info\"\n                    :key=\"index\"\n                  >\n                    <span class=\"label\">{{ info.key }}：</span>\n                    <span class=\"content\">{{ info.value }}</span>\n                  </div>\n                </div>\n                <!-- 备注 -->\n                <div\n                  class=\"ticket-info__remark\"\n                  v-if=\"entranceOption.description\"\n                >\n                  <info-edit\n                    label=\"备注：\"\n                    labelWidth=\"42\"\n                    type=\"textarea\"\n                    placeholder=\"添加备注信息\"\n                    :canEdit=\"\n                      handleJudgeRemarkAuth(\n                        entranceOption.description.product_type,\n                        entranceOption.auth\n                      )\n                    \"\n                    :value=\"entranceOption.description.description\"\n                    :invisibleEdit=\"isAnyEdit\"\n                    @confirm=\"\n                      e =>\n                        handleEntranceRemarkChange(\n                          e,\n                          entranceOption.description\n                        )\n                    \"\n                    @changeEditStatus=\"handleChangeEditStatus\"\n                    class=\"remark\"\n                    editBgColor=\"rgba(0,0,0,0.04)\"\n                  >\n                    <span\n                      v-if=\"!entranceOption.description.description\"\n                      class=\"ticket-info__remark-value\"\n                    >\n                      {{\n                        handleJudgeRemarkAuth(\n                          entranceOption.description.product_type,\n                          entranceOption.auth\n                        )\n                          ? '点击添加备注'\n                          : '--'\n                      }}\n                    </span>\n                    <span v-else class=\"ticket-info__remark-value\">\n                      {{ entranceOption.description.description }}\n                    </span>\n                  </info-edit>\n                </div>\n              </div>\n            </div>\n          </a-checkbox-group>\n          <!-- 卡类凭证 -->\n          <div class=\"member-entrance-tickets\" v-if=\"cardList.length\">\n            <div\n              class=\"member-entrance-ticket\"\n              v-for=\"entranceOption in cardList\"\n              :key=\"entranceOption.id\"\n              :class=\"{ temporary: entranceOption.id === 0 }\"\n            >\n              <a-radio\n                :value=\"entranceOption.id\"\n                :checked=\"entranceOption.id === cardProof\"\n                :disabled=\"!entranceOption.is_able\"\n                @change=\"handleProofChange\"\n              ></a-radio>\n              <div\n                class=\"ticket-info\"\n                :class=\"{ disabled: !entranceOption.is_able }\"\n              >\n                <div class=\"ticket-info__base\">\n                  <div class=\"tag\">\n                    <st-tag\n                      :type=\"entranceOptionType[entranceOption.proof_type]\"\n                    ></st-tag>\n                  </div>\n                  <div class=\"name\">{{ entranceOption.proof_name }}</div>\n                  <div class=\"reason\">{{ entranceOption.reason }}</div>\n                  <div v-if=\"entranceOption.reason_hover.length\">\n                    <a-tooltip>\n                      <template slot=\"title\">\n                        <div\n                          v-for=\"(reson, index) in entranceOption.reason_hover\"\n                          :key=\"index\"\n                        >\n                          {{ reson }}\n                        </div>\n                      </template>\n                      <span class=\"st-help-tooltip-img tip\">\n                        <img\n                          height=\"14\"\n                          width=\"14\"\n                          src=\"~@/assets/img/tooltip-help.png\"\n                        />\n                      </span>\n                    </a-tooltip>\n                  </div>\n                </div>\n                <div\n                  class=\"ticket-info__detail\"\n                  v-if=\"\n                    entranceOption.proof_info &&\n                      entranceOption.proof_info.length\n                  \"\n                >\n                  <div\n                    class=\"info\"\n                    v-for=\"(info, index) in entranceOption.proof_info\"\n                    :key=\"index\"\n                  >\n                    <span class=\"label\">{{ info.key }}：</span>\n                    <span class=\"content\">{{ info.value }}</span>\n                  </div>\n                </div>\n                <!-- 扣次 -->\n                <div\n                  class=\"ticket-info__deductNum\"\n                  v-if=\"\n                    entranceOption.proof_type === 2 && entranceOption.is_able\n                  \"\n                >\n                  本次入场扣次:\n                  <st-input-number\n                    :min=\"1\"\n                    :step=\"1\"\n                    :precision=\"0\"\n                    :disabled=\"!entranceOption.is_able\"\n                    v-model=\"entranceOption.deduct_num\"\n                    style=\"width: 65px\"\n                    class=\"ticket-info__deductNum-input\"\n                  ></st-input-number>\n                  次\n                </div>\n                <!-- 备注 -->\n                <div\n                  class=\"ticket-info__remark\"\n                  v-if=\"entranceOption.description\"\n                >\n                  <info-edit\n                    label=\"备注：\"\n                    labelWidth=\"42\"\n                    type=\"textarea\"\n                    placeholder=\"添加备注信息\"\n                    :canEdit=\"\n                      handleJudgeRemarkAuth(\n                        entranceOption.description.product_type,\n                        entranceOption.auth\n                      )\n                    \"\n                    :value=\"entranceOption.description.description\"\n                    :invisibleEdit=\"isAnyEdit\"\n                    @confirm=\"\n                      e =>\n                        handleEntranceRemarkChange(\n                          e,\n                          entranceOption.description\n                        )\n                    \"\n                    @changeEditStatus=\"handleChangeEditStatus\"\n                    class=\"remark\"\n                    editBgColor=\"rgba(0,0,0,0.04)\"\n                  >\n                    <span\n                      v-if=\"!entranceOption.description.description\"\n                      class=\"ticket-info__remark-value\"\n                    >\n                      {{\n                        handleJudgeRemarkAuth(\n                          entranceOption.description.product_type,\n                          entranceOption.auth\n                        )\n                          ? '点击添加备注'\n                          : '--'\n                      }}\n                    </span>\n                    <span v-else class=\"ticket-info__remark-value\">\n                      {{ entranceOption.description.description }}\n                    </span>\n                  </info-edit>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- 离场 -->\n        <div class=\"member-entrance-ticket\" v-else>\n          <div class=\"ticket-info\">\n            <div class=\"ticket-info__base\">\n              <div class=\"tag\">\n                <st-tag\n                  :type=\"entranceOptionType[memberProof.proof_type]\"\n                ></st-tag>\n              </div>\n              <div class=\"name\">{{ memberProof.proof_name }}</div>\n            </div>\n            <div\n              class=\"ticket-info__detail\"\n              v-if=\"memberProof.proof_info.length\"\n            >\n              <div\n                class=\"info\"\n                v-for=\"(info, index) in memberProof.proof_info\"\n                :key=\"index\"\n              >\n                <span class=\"label\">{{ info.key }}：</span>\n                <span class=\"content\">{{ info.value }}</span>\n              </div>\n            </div>\n            <div class=\"ticket-info__remark\" v-if=\"memberProof.description\">\n              <info-edit\n                label=\"备注：\"\n                labelWidth=\"42\"\n                type=\"textarea\"\n                placeholder=\"添加备注信息\"\n                :canEdit=\"\n                  handleJudgeRemarkAuth(\n                    memberProof.description.product_type,\n                    memberAuth\n                  )\n                \"\n                :value=\"memberProof.description.description\"\n                :invisibleEdit=\"isAnyEdit\"\n                @confirm=\"\n                  e => handleEntranceRemarkChange(e, memberProof.description)\n                \"\n                @changeEditStatus=\"handleChangeEditStatus\"\n                class=\"remark\"\n                editBgColor=\"rgba(0,0,0,0.04)\"\n              >\n                <span\n                  v-if=\"!memberProof.description.description\"\n                  class=\"ticket-info__remark-value\"\n                >\n                  {{\n                    handleJudgeRemarkAuth(\n                      memberProof.description.product_type,\n                      memberAuth\n                    )\n                      ? '点击添加备注'\n                      : '--'\n                  }}\n                </span>\n                <span v-else class=\"ticket-info__remark-value\">\n                  {{ memberProof.description.description }}\n                </span>\n              </info-edit>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <template slot=\"footer\">\n      <div class=\"member-footer\">\n        <div class=\"member-footer-left\">\n          <div class=\"info\">\n            <div class=\"label\">租柜：</div>\n            <div class=\"content\">\n              <st-overflow-text\n                max-width=\"170px\"\n                :value=\"leasingCabinetText\"\n              ></st-overflow-text>\n            </div>\n          </div>\n          <div class=\"info\">\n            <div class=\"label\">临时柜：</div>\n            <div class=\"content\" v-if=\"!isEntry || isCabinetAllocation\">\n              <a-select\n                v-model=\"temporary_cabinet\"\n                placeholder=\"请选择\"\n                showSearch\n                allowClear\n                :open=\"cabinetSearchOpen\"\n                :filterOption=\"false\"\n                :defaultActiveFirstOption=\"true\"\n                @search=\"handleCabinetSearch\"\n                @blur=\"handleCabinetBlur\"\n                @focus=\"handleCabinetFocus\"\n                @inputKeydown=\"handleCabinetEnter\"\n                style=\"width: 156px\"\n                ref=\"cabinet\"\n              >\n                <a-select-option\n                  v-for=\"(item, index) in cabinetList\"\n                  :key=\"index\"\n                  :value=\"item.id\"\n                >\n                  {{ item.name }}\n                </a-select-option>\n              </a-select>\n            </div>\n            <div class=\"content\" v-else>\n              {{ temporaryCabinet.name || '暂无' }}\n            </div>\n          </div>\n        </div>\n        <div class=\"member-footer-button\">\n          <st-button\n            class=\"entryButton\"\n            type=\"primary\"\n            v-if=\"!isEntry\"\n            :disabled=\"!canEntry\"\n            :loading=\"loading.setEntrance\"\n            @click=\"onEntry\"\n          >\n            入场\n            <img src=\"~@/assets/img/icon_enter@2x.png\" alt=\"\" />\n          </st-button>\n          <st-button\n            class=\"entryButton\"\n            type=\"primary\"\n            v-if=\"isEntry\"\n            @click=\"handleAllocationCabint\"\n          >\n            分配柜子&nbsp;\n            <img\n              src=\"~@/assets/img/icon_enter@2x.png\"\n              alt=\"\"\n              v-if=\"isCabinetAllocation\"\n            />\n            <span v-else>F9</span>\n          </st-button>\n          <st-button\n            class=\"leaveButton\"\n            v-if=\"isEntry && !isCabinetAllocation\"\n            :disabled=\"!auth.checkout\"\n            @click=\"onLeaveConfirm\"\n          >\n            离场\n            <img src=\"~@/assets/img/icon_enter@2x.png\" alt=\"\" />\n          </st-button>\n        </div>\n      </div>\n    </template>\n  </st-modal>\n</template>\n<script>\nimport infoEdit from '@/views/components/info-edit#/info-edit'\nimport faceUpload from '@/views/biz-components/face-upload/face-upload'\nimport ShopAddLable from '@/views/biz-modals/shop/add-lable'\nimport { MessageService } from '@/services/message.service'\n\nimport { EntranceService } from './entrance.service'\nimport { cloneDeep, get, debounce } from 'lodash-es'\nexport default {\n  name: 'modal-shop-reception-entrance',\n  props: {\n    member_id: {\n      type: [String, Number]\n    }\n  },\n  components: { faceUpload, infoEdit },\n  modals: { ShopAddLable },\n  serviceInject() {\n    return {\n      messageService: MessageService,\n      entranceService: EntranceService\n    }\n  },\n  rxState() {\n    return {\n      cabinetList: this.entranceService.cabinetList$,\n      loading: this.entranceService.loading$,\n      page: this.entranceService.page$,\n      sellerList: this.entranceService.sellerList$,\n      coachList: this.entranceService.coachList$,\n      cardList: this.entranceService.cardList$,\n      courseList: this.entranceService.courseList$,\n      entranceList: this.entranceService.entranceList$,\n      parent_types: this.entranceService.parent_types$,\n      auth: this.entranceService.auth$\n    }\n  },\n  data() {\n    return {\n      show: false,\n      isAnyEdit: false, // 是否处于编辑状态\n      memberInfo: {}, // 会员详细信息\n      memberAuth: {},\n      photoList: [], // 会员头像\n      cabinets: [], // 柜子\n      tags: [], // 标签列表\n      proof: '', // 入场凭证\n      courseProof: [], // 课类入场凭证\n      cardProof: '', // 卡类入场凭证\n      temporary_cabinet: '', // 临时租赁柜\n      seller: '', // 销售\n      coach: '', // 教练\n      entranceOptionType: {\n        '1': 'reception-period-card',\n        '2': 'reception-number-card',\n        '3': 'reception-visit-appointment',\n        '4': 'reception-personal-course',\n        '5': 'reception-personal-team-course',\n        '6': 'reception-team-course',\n        '7': 'reception-small-course',\n        '8': 'reception-site-appointment'\n      },\n      isCheckinCourse: 1, // 凭课入场\n      cabinetSearchOpen: false, // 储物柜下拉列表开启\n      cabintSearchText: '', // 储物柜搜索词\n      isCabinetAllocation: false, // 是否在分配柜子的状态下\n      isCabinetFocus: false, // 是否为临时柜聚焦状态\n      timer: null\n    }\n  },\n  computed: {\n    // 是否已入场\n    isEntry() {\n      return (\n        this.memberInfo.entry_status &&\n        +this.memberInfo.entry_status.value === 1\n      )\n    },\n    canEntry() {\n      if (!this.auth.checkin) return false\n      if (this.courseProof.length) {\n        return true\n      }\n      return (this.cardProof && this.cardProof !== -1) || this.cardProof === 0\n    },\n    memberIsBirthday() {\n      return get(this.memberInfo, 'is_birthday', false)\n    },\n    memberType() {\n      return get(this.memberInfo, 'member_type', {})\n    },\n    memberProof() {\n      return get(this.memberInfo, 'proof', {})\n    },\n    temporaryCabinet() {\n      let temporary_cabinet = get(this.memberInfo, 'temporary_cabinet', [])\n      let cabinet = temporary_cabinet.length ? temporary_cabinet[0] : {}\n      // 临时\n      return cabinet\n    },\n    leasingCabinets() {\n      // 长期\n      return get(this.memberInfo, 'leasing_cabinet', [])\n    },\n    leasingCabinetText() {\n      if (!this.leasingCabinets.length) return '暂无'\n      return this.leasingCabinets.reduce((str, cur) => {\n        let prefix = str ? ' / ' : ''\n        str += prefix + cur.name\n        return str\n      }, '')\n    },\n    coachName() {\n      return get(this.memberInfo.coach, 'name', '')\n    },\n    sellerName() {\n      return get(this.memberInfo.seller, 'name', '')\n    },\n    cardNum() {\n      return get(this.memberInfo, 'card_num', '')\n    },\n    rfid() {\n      return get(this.memberInfo, 'rfid', '')\n    }\n  },\n  mounted() {\n    this.entranceService.init().subscribe()\n    // 获取会员详情\n    this.init()\n    document.addEventListener('keydown', this.onInputKeyPress)\n  },\n  destroyed() {\n    document.removeEventListener('keydown', this.onInputKeyPress)\n  },\n  methods: {\n    handleJudgeRemarkAuth(product_type, authList) {\n      if (Array.isArray(authList)) return false\n      // 不存在产品类型\n      if (!product_type) return false\n      // 场地预约\n      if (product_type === 8) return false\n      let mapOption = {\n        1: 'shop:sold:sold_personal_course|internal_description',\n        2: 'shop:sold:sold_small_class_course|internal_description',\n        3: 'shop:sold:sold_package_course|internal_description',\n        4: 'shop:sold:sold_deposit_card|internal_description',\n        5: 'shop:sold:sold_member_card|internal_description'\n      }\n      let auth = mapOption[product_type]\n      return !!authList[auth]\n    },\n    handleEntranceRemarkChange(description, remarkData) {\n      this.entranceService\n        .addDescription({\n          description,\n          order_id: remarkData.order_id\n        })\n        .subscribe(res => {\n          remarkData.description = description\n        })\n    },\n    handleCourseProofChange(proof) {\n      if (proof.length) {\n        // 卡课不能一起选择\n        this.cardProof = ''\n      }\n    },\n    // 分配柜子\n    handleAllocationCabint() {\n      if (!this.isCabinetAllocation) {\n        this.isCabinetAllocation = true\n        setTimeout(() => {\n          this.$refs.cabinet.$el.click()\n        }, 200)\n      } else {\n        if (!this.isCabinetFocus) {\n          if (!this.temporary_cabinet) {\n            this.messageService.error({ content: '请选择一个临时柜' })\n            setTimeout(() => {\n              this.$refs.cabinet.$el.click()\n            }, 200)\n          } else {\n            this.handleChangeUserCabint()\n          }\n        } else {\n          if (this.temporary_cabinet) {\n            this.handleChangeUserCabint()\n          }\n        }\n      }\n    },\n    handleCabinetBlur() {\n      this.cabinetSearchOpen = false\n      this.isCabinetFocus = false\n      this.cabintSearchText = ''\n    },\n    handleCabinetFocus() {\n      this.isCabinetFocus = true\n      if (!this.cabintSearchText) {\n        this.cabinetSearchOpen = false\n        return\n      }\n      if (!this.cabinetSearchOpen) this.cabinetSearchOpen = true\n    },\n    handleCabinetSearch: debounce(function(keyword) {\n      this.cabinetSearchOpen = true\n      this.cabintSearchText = keyword.trim()\n      if (!keyword.trim()) return false\n      console.log('keyword', keyword)\n      this.entranceService\n        .getCabinetList(this.member_id, {\n          keyword: this.cabintSearchText\n        })\n        .subscribe()\n    }, 100),\n    handleCabinetEnter(e) {\n      let keyCode = e.keyCode\n      let keyword = e.target.value\n      console.log('handleCabinetEnter', keyword)\n\n      if (this.loading.getCabinetList) return false\n      if (keyCode !== 13) return false\n      if (!this.isEntry) {\n        // 未入场并可以入场时\n        if (keyword) {\n          this.handleSearchCabintAndChange(keyword)\n        } else {\n          if (this.isCabinetFocus) this.onEntry()\n        }\n      } else {\n        // 已入场,在分配柜子状态下\n        if (keyword) {\n          this.handleSearchCabintAndChange(keyword)\n        } else {\n          if (!this.temporary_cabinet) {\n            this.messageService.error({ content: '请选择一个临时柜' })\n            setTimeout(() => {\n              this.$refs.cabinet.$el.click()\n            }, 200)\n          } else {\n            this.handleChangeUserCabint()\n          }\n        }\n      }\n    },\n    handleSearchCabintAndChange(keyword) {\n      this.entranceService\n        .getCabinetList(this.member_id, {\n          keyword\n        })\n        .subscribe(res => {\n          let list = res.list\n          let id = list.length ? list[0]['id'] : undefined\n          if (id) {\n            this.temporary_cabinet = id\n            console.log('id', id)\n            if (this.isEntry) {\n              this.handleChangeUserCabint()\n            } else {\n              this.onEntry()\n            }\n          } else {\n            this.messageService.error({ content: '未搜索到储物柜' })\n            clearTimeout(this.timer)\n            this.timer = setTimeout(() => {\n              this.$refs.cabinet.$children[0]['setInputValue']('')\n              this.$refs.cabinet.$el.click()\n            }, 200)\n          }\n        })\n    },\n    // 分配柜子\n    handleChangeUserCabint() {\n      this.entranceService\n        .editEntranceCabinet({\n          member_id: +this.member_id,\n          cabinet_id: this.temporary_cabinet\n        })\n        .subscribe(res => {\n          this.show = false\n          this.$emit('done')\n          // if (this.isCabinetAllocation) this.isCabinetAllocation = false\n          // this.cabintSearchText = ''\n          // this.handleGetMemberInfo()\n        })\n    },\n    onInputKeyPress(e) {\n      let keyCode = e.keyCode\n      // 判断是否在编辑状态,编辑状态下不可入离场\n      if (this.isAnyEdit) {\n        return false\n      }\n      if (keyCode === 13) {\n        if (this.isEntry) {\n          if (!this.isCabinetAllocation) {\n            this.onLeaveConfirm()\n          } else {\n            if (this.isCabinetFocus) return false\n            if (!this.temporary_cabinet) {\n              setTimeout(() => {\n                this.$refs.cabinet.$el.click()\n                this.messageService.error({ content: '请选择一个临时柜' })\n              }, 200)\n            } else {\n              this.handleChangeUserCabint()\n            }\n          }\n        } else {\n          // 在选择柜子\n          if (!this.isCabinetFocus) {\n            this.onEntry()\n          }\n        }\n      }\n      // 分配柜子\n      if (keyCode === 120) {\n        if (this.isEntry) this.handleAllocationCabint()\n      }\n    },\n    init() {\n      this.entranceService.getMemberInfo(this.member_id).subscribe(res => {\n        this.memberInfo = cloneDeep(res.info)\n        this.memberAuth = cloneDeep(res.auth)\n        this.seller = get(res.info.seller, 'id', -1)\n        this.coach = get(res.info.coach, 'id', -1)\n        this.temporary_cabinet = get(this.temporaryCabinet, 'id', undefined)\n        this.tags = res.info.member_tag\n        this.photoList = !Array.isArray(res.info.face_url)\n          ? [res.info.face_url]\n          : []\n        this.isCheckinCourse = res.info.is_checkin_course\n        this.proof = get(res.info.proof, 'proof_type')\n        // 获取会员入场凭证列表\n        if (!this.isEntry) {\n          this.entranceService\n            .getEntranceOptionList(this.member_id)\n            .subscribe(res => {\n              this.handleInitProof()\n              setTimeout(() => {\n                this.$refs.cabinet.$el.click()\n              }, 300)\n            })\n        } else {\n          if (this.isCabinetAllocation) {\n            setTimeout(() => {\n              this.$refs.cabinet.$el.click()\n            }, 300)\n          }\n        }\n        this.entranceService.setCabinetList(res.info.temporary_cabinet)\n        // 获取会员储物柜列表\n      })\n    },\n    handleProofChange(e) {\n      if (e.target.value) this.courseProof = []\n      this.cardProof = e.target.value\n    },\n    // 删除标签\n    handleRemoveTag(tag) {\n      this.entranceService\n        .getMemberLabelDelete({ user_id: this.member_id, tag_id: tag.id })\n        .subscribe(res => {\n          this.handleGetMemberInfo()\n        })\n    },\n    // 获取会员详情\n    handleGetMemberInfo() {\n      this.entranceService.getMemberInfo(this.member_id).subscribe(res => {\n        this.memberInfo = cloneDeep(res.info)\n        this.memberAuth = cloneDeep(res.auth)\n        this.seller = get(res.info.seller, 'id', -1)\n        this.coach = get(res.info.coach, 'id', -1)\n        this.tags = res.info.member_tag\n        this.photoList = !Array.isArray(res.info.face_url)\n          ? [res.info.face_url]\n          : []\n\n        if (!this.isEntry) {\n          this.handleInitProof()\n        }\n      })\n    },\n    handleInitProof() {\n      if (this.courseList.length && !this.courseProof.length) {\n        let proofs = this.courseList.filter(option => option.is_able)\n        this.courseProof = proofs.length ? [proofs[0]['id']] : []\n      } else if (!this.proof) {\n        let proofs = this.cardList.filter(option => option.is_able)\n        if (proofs.length === 1 && proofs[0]['id'] === 0) {\n          this.cardProof = ''\n        } else {\n          this.cardProof = proofs.length\n            ? proofs[0]['id']\n            : this.cardList[0]['id']\n        }\n      }\n    },\n    // 头像变更\n    handlePhotoChange(list) {\n      this.entranceService\n        .editFace(this.member_id, {\n          image_face: list[0]\n        })\n        .subscribe(res => {\n          this.handleGetMemberInfo()\n        })\n    },\n    // 物理卡号变更\n    handleRfidChange(rfid) {\n      this.entranceService\n        .getMemberPhysicalBind(+this.member_id, {\n          card_num:\n            typeof this.memberInfo.card_num === 'string'\n              ? this.memberInfo.card_num.trim()\n              : this.memberInfo.card_num,\n          rfid: typeof rfid === 'string' ? rfid.trim() : rfid // 物理ID\n        })\n        .subscribe(res => {\n          this.handleGetMemberInfo()\n        })\n    },\n    // 实体卡号变更\n    handleCardNumChange(card_num) {\n      this.entranceService\n        .getMemberPhysicalBind(+this.member_id, {\n          card_num: typeof card_num === 'string' ? card_num.trim() : card_num,\n          rfid:\n            typeof this.memberInfo.rfid === 'string'\n              ? this.memberInfo.rfid.trim()\n              : this.memberInfo.rfid // 实体卡号\n        })\n        .subscribe(res => {\n          this.handleGetMemberInfo()\n        })\n    },\n    // 销售变更\n    handleEditSeller(seller_id) {\n      this.entranceService\n        .editSeller({\n          member_id: +this.member_id,\n          seller_id: seller_id === -1 ? 0 : seller_id\n        })\n        .subscribe(res => {\n          this.handleGetMemberInfo()\n        })\n    },\n    // 教练变更\n    handleEditCoach(coach_id) {\n      this.entranceService\n        .editCoach({\n          member_id: +this.member_id,\n          coach_id: coach_id === -1 ? 0 : coach_id\n        })\n        .subscribe(res => {\n          this.handleGetMemberInfo()\n        })\n    },\n    // 备注变更\n    handleRemarkChange(remark) {\n      this.entranceService\n        .updateMemberEdit(+this.member_id, {\n          remark\n        })\n        .subscribe(res => {\n          this.handleGetMemberInfo()\n        })\n    },\n    // 修改编辑状态\n    handleChangeEditStatus(val) {\n      this.isAnyEdit = val\n    },\n    // 入场\n    onEntry() {\n      // 编辑状态下不可入场\n      if (this.isAnyEdit) return false\n      // 未选择凭证不可入场\n      if (!this.canEntry) return false\n      let cabinet_id = this.temporary_cabinet\n        ? +this.temporary_cabinet\n        : undefined\n      let seller_id = this.seller === -1 ? undefined : +this.seller\n      let coach_id = this.coach === -1 ? undefined : +this.coach\n      let member_id = +this.member_id\n      let is_checkin_course = this.isCheckinCourse\n      let deduct_num\n      let proof = []\n      if (this.cardProof || this.cardProof === 0) {\n        console.log('this.cardProof', this.cardProof)\n        let currentProof =\n          this.cardList.length > 0 &&\n          this.cardList.filter(i => i.id === this.cardProof)[0]\n        proof = [\n          {\n            proof_value: +this.cardProof,\n            proof_type: currentProof.proof_type\n          }\n        ]\n        deduct_num = currentProof.deduct_num\n      } else {\n        proof = this.courseProof.map(i => {\n          let obj = this.courseList.filter(course => course.id === i)[0]\n          console.log('obj', obj)\n          return {\n            proof_value: obj.id,\n            proof_type: obj.proof_type\n          }\n        })\n      }\n      let reqParams = {\n        member_id,\n        seller_id,\n        coach_id,\n        cabinet_id,\n        proof,\n        is_checkin_course,\n        deduct_num\n      }\n      if (cabinet_id) {\n        reqParams = Object.assign(reqParams, {\n          cabinet_id\n        })\n      }\n      this.entranceService.setEntrance(reqParams).subscribe(res => {\n        this.show = false\n        this.messageService.success({ content: '入场成功' })\n        this.$emit('done')\n      })\n    },\n    // 离场之前的确认\n    onLeaveConfirm() {\n      if (!this.auth.checkout) return false\n      this.entranceService.getCabinetInfo(this.member_id).subscribe(res => {\n        if (res.info.is_smart) {\n          this.$error({\n            title: `当前会员有储物柜「${res.info.cabinet_area_name}」「${res.info.serial_num}」尚未归还，请先归还！`,\n            okText: '知道了'\n          })\n        } else {\n          this.onLeave()\n        }\n      })\n    },\n    // 离场\n    onLeave() {\n      this.entranceService.setEntranceLeave(this.member_id).subscribe(res => {\n        this.show = false\n        this.messageService.success({ content: '离场成功' })\n        this.$emit('done')\n      })\n    },\n    handleClose() {\n      this.show = false\n      this.$emit('done')\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/biz-modals/shop/reception"}]}