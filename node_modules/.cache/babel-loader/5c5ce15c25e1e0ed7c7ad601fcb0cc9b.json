{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/member/info.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/member/info.vue","mtime":1600926556357},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { InfoService } from \"./info.service\";\nimport FaceRecognition from '@/views/biz-modals/face/recognition';\nimport ShopAddLable from '@/views/biz-modals/shop/add-lable';\nimport ShopBindingEntityCard from '@/views/biz-modals/shop/binding-entity-card';\nimport ShopDistributionCoach from '@/views/biz-modals/shop/distribution-coach';\nimport ShopDistributionSale from '@/views/biz-modals/shop/distribution-sale';\nimport ShopFrozen from '@/views/biz-modals/shop/frozen';\nimport ShopMissingCard from '@/views/biz-modals/shop/missing-card';\nimport PointsAddOrMinus from '@/views/biz-modals/brand/marketing/points/add-or-minus';\nexport default {\n  serviceInject: function serviceInject() {\n    return {\n      infoService: InfoService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      info: this.infoService.info$,\n      basicInfo: this.infoService.basicInfo$,\n      auth: this.infoService.auth$,\n      authCommon: this.infoService.authCommon$\n    };\n  },\n  modals: {\n    FaceRecognition: FaceRecognition,\n    ShopAddLable: ShopAddLable,\n    ShopBindingEntityCard: ShopBindingEntityCard,\n    ShopDistributionCoach: ShopDistributionCoach,\n    ShopDistributionSale: ShopDistributionSale,\n    ShopFrozen: ShopFrozen,\n    ShopMissingCard: ShopMissingCard,\n    PointsAddOrMinus: PointsAddOrMinus\n  },\n  name: 'list',\n  data: function data() {\n    return {\n      id: ''\n    };\n  },\n  computed: {\n    btnOptions: function btnOptions() {\n      var _this = this;\n\n      return [{\n        text: '编辑资料',\n        click: this.editMember,\n        if: this.auth['shop:member:member|edit']\n      }, {\n        text: '绑定实体卡',\n        click: this.openBindingEntityCardModal,\n        if: this.auth['shop:member:member|bind_card']\n      }, {\n        text: \"\\u7ED1\\u5B9A\\u8DDF\\u8FDB\".concat(this.$c('coach')),\n        click: this.onDistributionCoach,\n        if: this.auth['shop:member:member|bind_coach']\n      }, {\n        text: \"\\u66F4\\u6539\\u8DDF\\u8FDB\".concat(this.$c('coach')),\n        click: this.onDistributionCoach,\n        if: this.auth['shop:member:member|change_coach']\n      }, {\n        text: '更改跟进销售',\n        click: this.onDistributionSale,\n        if: this.auth['shop:member:member|change_salesman']\n      }, {\n        text: '绑定跟进销售',\n        click: this.onDistributionSale,\n        if: this.auth['shop:member:member|bind_salesman']\n      }, {\n        text: '解除微信绑定',\n        click: this.onRemoveBind,\n        if: this.auth['shop:member:member|unbind_wechat']\n      }, {\n        text: '冻结用户',\n        click: this.openFrozenModal,\n        if: this.auth['shop:member:member|frozen']\n      }, {\n        text: '重绑实体卡',\n        click: this.openMissingCardModal,\n        if: this.auth['shop:member:member|rebind_card']\n      }, {\n        text: '清空指纹信息',\n        click: this.onClearFingerprintInfo,\n        if: this.auth['shop:member:member|finger_del']\n      }, {\n        text: '清空硬件密码',\n        click: this.onClearHardwarePassword,\n        if: this.auth['shop:member:member|cabinet_pwd_del']\n      }, {\n        text: '增加积分',\n        click: function click() {\n          return _this.onAddOrDelIntegral('shop-add');\n        },\n        if: this.auth['shop:member:member|add_point']\n      }, {\n        text: '扣减积分',\n        click: function click() {\n          return _this.onAddOrDelIntegral('shop-minus');\n        },\n        if: this.auth['shop:member:member|reduce_point']\n      }];\n    }\n  },\n  methods: {\n    submitSuccess: function submitSuccess() {\n      this.$router.reload();\n      this.$message.success({\n        content: '提交成功'\n      });\n    },\n    // 删除用户人脸\n    handleDeleteMemberFace: function handleDeleteMemberFace() {\n      var _this2 = this;\n\n      this.infoService.deleteMemberFace(this.$searchQuery.id).subscribe(function (res) {\n        _this2.$router.reload();\n      });\n    },\n    getRecord: function getRecord() {\n      var _this$info = this.info,\n          is_minors = _this$info.is_minors,\n          parent_info = _this$info.parent_info;\n      return {\n        member_id: this.$searchQuery.id,\n        member_name: this.info.member_name,\n        mobile: this.info.mobile,\n        is_minors: is_minors,\n        parent_info: parent_info\n      };\n    },\n    openFrozenModal: function openFrozenModal() {\n      var _this3 = this;\n\n      this.$modalRouter.push({\n        name: 'shop-frozen',\n        props: {\n          record: this.getRecord()\n        },\n        on: {\n          success: function success() {\n            _this3.submitSuccess();\n          }\n        }\n      });\n    },\n    openMissingCardModal: function openMissingCardModal() {\n      var _this4 = this;\n\n      this.$modalRouter.push({\n        name: 'shop-missing-card',\n        props: {\n          record: this.getRecord()\n        },\n        on: {\n          success: function success() {\n            _this4.submitSuccess();\n          }\n        }\n      });\n    },\n    openBindingEntityCardModal: function openBindingEntityCardModal() {\n      var _this5 = this;\n\n      this.$modalRouter.push({\n        name: 'shop-binding-entity-card',\n        props: {\n          record: this.getRecord()\n        },\n        on: {\n          success: function success() {\n            _this5.submitSuccess();\n          }\n        }\n      });\n    },\n    openFaceUpload: function openFaceUpload() {\n      var _this6 = this;\n\n      this.$modalRouter.push({\n        name: 'face-recognition',\n        on: {\n          change: function change(res) {\n            var result = res[0];\n\n            _this6.infoService.editFace(_this6.$searchQuery.id, {\n              image_face: result\n            }).subscribe(function () {\n              _this6.infoService.getHeaderInfo(_this6.$searchQuery.id).subscribe();\n            });\n          }\n        }\n      });\n    },\n    onRemoveBind: function onRemoveBind() {\n      var that = this;\n      this.$confirm({\n        title: '提示信息',\n        content: '确认解绑选中的会员关系？',\n        onOk: function onOk() {\n          that.infoService.removeWechatBind(that.id).subscribe(function () {\n            console.log('ok');\n          });\n        },\n        onCancel: function onCancel() {}\n      });\n    },\n    handleClose: function handleClose(tag) {\n      var self = this;\n      this.infoService.getMemberLabelDelete({\n        user_id: self.$searchQuery.id,\n        tag_id: tag.id\n      }).subscribe(function (state) {});\n    },\n    editMember: function editMember() {\n      this.$router.push({\n        name: 'shop-member-edit',\n        query: {\n          id: this.$searchQuery.id\n        }\n      });\n    },\n    onModalTest: function onModalTest() {\n      var self = this;\n      this.infoService.getHeaderInfo(self.$searchQuery.id).subscribe();\n    },\n    // 分配教练\n    onDistributionCoach: function onDistributionCoach() {\n      var _this7 = this;\n\n      this.$modalRouter.push({\n        name: 'shop-distribution-coach',\n        props: {\n          memberIds: [this.$searchQuery.id],\n          coachId: this.info.follow_coach_id\n        },\n        on: {\n          success: function success() {\n            _this7.$router.reload();\n          }\n        }\n      });\n    },\n    // 分配销售\n    onDistributionSale: function onDistributionSale() {\n      var _this8 = this;\n\n      this.$modalRouter.push({\n        name: 'shop-distribution-sale',\n        props: {\n          memberIds: [this.$searchQuery.id],\n          saleId: this.info.follow_salesman_id\n        },\n        on: {\n          success: function success() {\n            _this8.$router.reload();\n          }\n        }\n      });\n    },\n    // 增加、扣减积分\n    onAddOrDelIntegral: function onAddOrDelIntegral(type) {\n      var _this9 = this;\n\n      this.$modalRouter.push({\n        name: 'points-add-or-minus',\n        props: {\n          type: type,\n          query: {\n            memberName: this.info.member_name,\n            memberId: this.$searchQuery.id\n          }\n        },\n        on: {\n          done: function done() {\n            _this9.$router.reload();\n          }\n        }\n      });\n    },\n    // 清空指纹信息\n    onClearFingerprintInfo: function onClearFingerprintInfo() {\n      var _this10 = this;\n\n      this.$confirm({\n        title: '提示信息',\n        content: '确认清空指纹信息？',\n        onOk: function onOk() {\n          _this10.infoService.deleteMemberFinger(_this10.$searchQuery.id).subscribe();\n        }\n      });\n    },\n    // 清空硬件密码\n    onClearHardwarePassword: function onClearHardwarePassword() {\n      var _this11 = this;\n\n      this.$confirm({\n        title: '提示信息',\n        content: '确认清空硬件密码吗？',\n        onOk: function onOk() {\n          _this11.infoService.deleteMemberCabinetPassword(_this11.$searchQuery.id).subscribe();\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.id = this.$searchQuery.id;\n  }\n};",{"version":3,"sources":["info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuOA,SAAA,WAAA;AACA,OAAA,eAAA,MAAA,qCAAA;AACA,OAAA,YAAA,MAAA,mCAAA;AACA,OAAA,qBAAA,MAAA,6CAAA;AACA,OAAA,qBAAA,MAAA,4CAAA;AACA,OAAA,oBAAA,MAAA,2CAAA;AACA,OAAA,UAAA,MAAA,gCAAA;AACA,OAAA,eAAA,MAAA,sCAAA;AACA,OAAA,gBAAA,MAAA,wDAAA;AACA,eAAA;AACA,EAAA,aADA,2BACA;AACA,WAAA;AACA,MAAA,WAAA,EAAA;AADA,KAAA;AAGA,GALA;AAMA,EAAA,OANA,qBAMA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,KAAA,WAAA,CAAA,KADA;AAEA,MAAA,SAAA,EAAA,KAAA,WAAA,CAAA,UAFA;AAGA,MAAA,IAAA,EAAA,KAAA,WAAA,CAAA,KAHA;AAIA,MAAA,UAAA,EAAA,KAAA,WAAA,CAAA;AAJA,KAAA;AAMA,GAbA;AAcA,EAAA,MAAA,EAAA;AACA,IAAA,eAAA,EAAA,eADA;AAEA,IAAA,YAAA,EAAA,YAFA;AAGA,IAAA,qBAAA,EAAA,qBAHA;AAIA,IAAA,qBAAA,EAAA,qBAJA;AAKA,IAAA,oBAAA,EAAA,oBALA;AAMA,IAAA,UAAA,EAAA,UANA;AAOA,IAAA,eAAA,EAAA,eAPA;AAQA,IAAA,gBAAA,EAAA;AARA,GAdA;AAwBA,EAAA,IAAA,EAAA,MAxBA;AAyBA,EAAA,IAzBA,kBAyBA;AACA,WAAA;AACA,MAAA,EAAA,EAAA;AADA,KAAA;AAGA,GA7BA;AA8BA,EAAA,QAAA,EAAA;AACA,IAAA,UADA,wBACA;AAAA;;AACA,aAAA,CACA;AACA,QAAA,IAAA,EAAA,MADA;AAEA,QAAA,KAAA,EAAA,KAAA,UAFA;AAGA,QAAA,EAAA,EAAA,KAAA,IAAA,CAAA,yBAAA;AAHA,OADA,EAMA;AACA,QAAA,IAAA,EAAA,OADA;AAEA,QAAA,KAAA,EAAA,KAAA,0BAFA;AAGA,QAAA,EAAA,EAAA,KAAA,IAAA,CAAA,8BAAA;AAHA,OANA,EAWA;AACA,QAAA,IAAA,oCAAA,KAAA,EAAA,CAAA,OAAA,CAAA,CADA;AAEA,QAAA,KAAA,EAAA,KAAA,mBAFA;AAGA,QAAA,EAAA,EAAA,KAAA,IAAA,CAAA,+BAAA;AAHA,OAXA,EAgBA;AACA,QAAA,IAAA,oCAAA,KAAA,EAAA,CAAA,OAAA,CAAA,CADA;AAEA,QAAA,KAAA,EAAA,KAAA,mBAFA;AAGA,QAAA,EAAA,EAAA,KAAA,IAAA,CAAA,iCAAA;AAHA,OAhBA,EAqBA;AACA,QAAA,IAAA,EAAA,QADA;AAEA,QAAA,KAAA,EAAA,KAAA,kBAFA;AAGA,QAAA,EAAA,EAAA,KAAA,IAAA,CAAA,oCAAA;AAHA,OArBA,EA0BA;AACA,QAAA,IAAA,EAAA,QADA;AAEA,QAAA,KAAA,EAAA,KAAA,kBAFA;AAGA,QAAA,EAAA,EAAA,KAAA,IAAA,CAAA,kCAAA;AAHA,OA1BA,EA+BA;AACA,QAAA,IAAA,EAAA,QADA;AAEA,QAAA,KAAA,EAAA,KAAA,YAFA;AAGA,QAAA,EAAA,EAAA,KAAA,IAAA,CAAA,kCAAA;AAHA,OA/BA,EAoCA;AACA,QAAA,IAAA,EAAA,MADA;AAEA,QAAA,KAAA,EAAA,KAAA,eAFA;AAGA,QAAA,EAAA,EAAA,KAAA,IAAA,CAAA,2BAAA;AAHA,OApCA,EAyCA;AACA,QAAA,IAAA,EAAA,OADA;AAEA,QAAA,KAAA,EAAA,KAAA,oBAFA;AAGA,QAAA,EAAA,EAAA,KAAA,IAAA,CAAA,gCAAA;AAHA,OAzCA,EA8CA;AACA,QAAA,IAAA,EAAA,QADA;AAEA,QAAA,KAAA,EAAA,KAAA,sBAFA;AAGA,QAAA,EAAA,EAAA,KAAA,IAAA,CAAA,+BAAA;AAHA,OA9CA,EAmDA;AACA,QAAA,IAAA,EAAA,QADA;AAEA,QAAA,KAAA,EAAA,KAAA,uBAFA;AAGA,QAAA,EAAA,EAAA,KAAA,IAAA,CAAA,oCAAA;AAHA,OAnDA,EAwDA;AACA,QAAA,IAAA,EAAA,MADA;AAEA,QAAA,KAAA,EAAA;AAAA,iBAAA,KAAA,CAAA,kBAAA,CAAA,UAAA,CAAA;AAAA,SAFA;AAGA,QAAA,EAAA,EAAA,KAAA,IAAA,CAAA,8BAAA;AAHA,OAxDA,EA6DA;AACA,QAAA,IAAA,EAAA,MADA;AAEA,QAAA,KAAA,EAAA;AAAA,iBAAA,KAAA,CAAA,kBAAA,CAAA,YAAA,CAAA;AAAA,SAFA;AAGA,QAAA,EAAA,EAAA,KAAA,IAAA,CAAA,iCAAA;AAHA,OA7DA,CAAA;AAmEA;AArEA,GA9BA;AAqGA,EAAA,OAAA,EAAA;AACA,IAAA,aADA,2BACA;AACA,WAAA,OAAA,CAAA,MAAA;AACA,WAAA,QAAA,CAAA,OAAA,CAAA;AAAA,QAAA,OAAA,EAAA;AAAA,OAAA;AACA,KAJA;AAKA;AACA,IAAA,sBANA,oCAMA;AAAA;;AACA,WAAA,WAAA,CAAA,gBAAA,CAAA,KAAA,YAAA,CAAA,EAAA,EAAA,SAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,OAAA,CAAA,MAAA;AACA,OAFA;AAGA,KAVA;AAWA,IAAA,SAXA,uBAWA;AAAA,uBACA,KAAA,IADA;AAAA,UACA,SADA,cACA,SADA;AAAA,UACA,WADA,cACA,WADA;AAEA,aAAA;AACA,QAAA,SAAA,EAAA,KAAA,YAAA,CAAA,EADA;AAEA,QAAA,WAAA,EAAA,KAAA,IAAA,CAAA,WAFA;AAGA,QAAA,MAAA,EAAA,KAAA,IAAA,CAAA,MAHA;AAIA,QAAA,SAAA,EAAA,SAJA;AAKA,QAAA,WAAA,EAAA;AALA,OAAA;AAOA,KApBA;AAqBA,IAAA,eArBA,6BAqBA;AAAA;;AACA,WAAA,YAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,aADA;AAEA,QAAA,KAAA,EAAA;AACA,UAAA,MAAA,EAAA,KAAA,SAAA;AADA,SAFA;AAKA,QAAA,EAAA,EAAA;AACA,UAAA,OAAA,EAAA,mBAAA;AACA,YAAA,MAAA,CAAA,aAAA;AACA;AAHA;AALA,OAAA;AAWA,KAjCA;AAkCA,IAAA,oBAlCA,kCAkCA;AAAA;;AACA,WAAA,YAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,mBADA;AAEA,QAAA,KAAA,EAAA;AACA,UAAA,MAAA,EAAA,KAAA,SAAA;AADA,SAFA;AAKA,QAAA,EAAA,EAAA;AACA,UAAA,OAAA,EAAA,mBAAA;AACA,YAAA,MAAA,CAAA,aAAA;AACA;AAHA;AALA,OAAA;AAWA,KA9CA;AA+CA,IAAA,0BA/CA,wCA+CA;AAAA;;AACA,WAAA,YAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,0BADA;AAEA,QAAA,KAAA,EAAA;AACA,UAAA,MAAA,EAAA,KAAA,SAAA;AADA,SAFA;AAKA,QAAA,EAAA,EAAA;AACA,UAAA,OAAA,EAAA,mBAAA;AACA,YAAA,MAAA,CAAA,aAAA;AACA;AAHA;AALA,OAAA;AAWA,KA3DA;AA6DA,IAAA,cA7DA,4BA6DA;AAAA;;AACA,WAAA,YAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,kBADA;AAEA,QAAA,EAAA,EAAA;AACA,UAAA,MAAA,EAAA,gBAAA,GAAA,EAAA;AACA,gBAAA,MAAA,GAAA,GAAA,CAAA,CAAA,CAAA;;AACA,YAAA,MAAA,CAAA,WAAA,CACA,QADA,CACA,MAAA,CAAA,YAAA,CAAA,EADA,EACA;AACA,cAAA,UAAA,EAAA;AADA,aADA,EAIA,SAJA,CAIA,YAAA;AACA,cAAA,MAAA,CAAA,WAAA,CAAA,aAAA,CAAA,MAAA,CAAA,YAAA,CAAA,EAAA,EAAA,SAAA;AACA,aANA;AAOA;AAVA;AAFA,OAAA;AAeA,KA7EA;AA8EA,IAAA,YA9EA,0BA8EA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,WAAA,QAAA,CAAA;AACA,QAAA,KAAA,EAAA,MADA;AAEA,QAAA,OAAA,EAAA,cAFA;AAGA,QAAA,IAHA,kBAGA;AACA,UAAA,IAAA,CAAA,WAAA,CAAA,gBAAA,CAAA,IAAA,CAAA,EAAA,EAAA,SAAA,CAAA,YAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,WAFA;AAGA,SAPA;AAQA,QAAA,QARA,sBAQA,CAAA;AARA,OAAA;AAUA,KA1FA;AA2FA,IAAA,WA3FA,uBA2FA,GA3FA,EA2FA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,WAAA,WAAA,CACA,oBADA,CACA;AAAA,QAAA,OAAA,EAAA,IAAA,CAAA,YAAA,CAAA,EAAA;AAAA,QAAA,MAAA,EAAA,GAAA,CAAA;AAAA,OADA,EAEA,SAFA,CAEA,UAAA,KAAA,EAAA,CAAA,CAFA;AAGA,KAhGA;AAiGA,IAAA,UAjGA,wBAiGA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,kBADA;AAEA,QAAA,KAAA,EAAA;AAAA,UAAA,EAAA,EAAA,KAAA,YAAA,CAAA;AAAA;AAFA,OAAA;AAIA,KAtGA;AAuGA,IAAA,WAvGA,yBAuGA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,WAAA,WAAA,CAAA,aAAA,CAAA,IAAA,CAAA,YAAA,CAAA,EAAA,EAAA,SAAA;AACA,KA1GA;AA2GA;AACA,IAAA,mBA5GA,iCA4GA;AAAA;;AACA,WAAA,YAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,yBADA;AAEA,QAAA,KAAA,EAAA;AACA,UAAA,SAAA,EAAA,CAAA,KAAA,YAAA,CAAA,EAAA,CADA;AAEA,UAAA,OAAA,EAAA,KAAA,IAAA,CAAA;AAFA,SAFA;AAMA,QAAA,EAAA,EAAA;AACA,UAAA,OAAA,EAAA,mBAAA;AACA,YAAA,MAAA,CAAA,OAAA,CAAA,MAAA;AACA;AAHA;AANA,OAAA;AAYA,KAzHA;AA0HA;AACA,IAAA,kBA3HA,gCA2HA;AAAA;;AACA,WAAA,YAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,wBADA;AAEA,QAAA,KAAA,EAAA;AACA,UAAA,SAAA,EAAA,CAAA,KAAA,YAAA,CAAA,EAAA,CADA;AAEA,UAAA,MAAA,EAAA,KAAA,IAAA,CAAA;AAFA,SAFA;AAMA,QAAA,EAAA,EAAA;AACA,UAAA,OAAA,EAAA,mBAAA;AACA,YAAA,MAAA,CAAA,OAAA,CAAA,MAAA;AACA;AAHA;AANA,OAAA;AAYA,KAxIA;AAyIA;AACA,IAAA,kBA1IA,8BA0IA,IA1IA,EA0IA;AAAA;;AACA,WAAA,YAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,qBADA;AAEA,QAAA,KAAA,EAAA;AACA,UAAA,IAAA,EAAA,IADA;AAEA,UAAA,KAAA,EAAA;AACA,YAAA,UAAA,EAAA,KAAA,IAAA,CAAA,WADA;AAEA,YAAA,QAAA,EAAA,KAAA,YAAA,CAAA;AAFA;AAFA,SAFA;AASA,QAAA,EAAA,EAAA;AACA,UAAA,IAAA,EAAA,gBAAA;AACA,YAAA,MAAA,CAAA,OAAA,CAAA,MAAA;AACA;AAHA;AATA,OAAA;AAeA,KA1JA;AA2JA;AACA,IAAA,sBA5JA,oCA4JA;AAAA;;AACA,WAAA,QAAA,CAAA;AACA,QAAA,KAAA,EAAA,MADA;AAEA,QAAA,OAAA,EAAA,WAFA;AAGA,QAAA,IAAA,EAAA,gBAAA;AACA,UAAA,OAAA,CAAA,WAAA,CAAA,kBAAA,CAAA,OAAA,CAAA,YAAA,CAAA,EAAA,EAAA,SAAA;AACA;AALA,OAAA;AAOA,KApKA;AAqKA;AACA,IAAA,uBAtKA,qCAsKA;AAAA;;AACA,WAAA,QAAA,CAAA;AACA,QAAA,KAAA,EAAA,MADA;AAEA,QAAA,OAAA,EAAA,YAFA;AAGA,QAAA,IAAA,EAAA,gBAAA;AACA,UAAA,OAAA,CAAA,WAAA,CACA,2BADA,CACA,OAAA,CAAA,YAAA,CAAA,EADA,EAEA,SAFA;AAGA;AAPA,OAAA;AASA;AAhLA,GArGA;AAuRA,EAAA,OAvRA,qBAuRA;AACA,SAAA,EAAA,GAAA,KAAA,YAAA,CAAA,EAAA;AACA;AAzRA,CAAA","sourcesContent":["<template>\n  <st-panel-layout class=\"shop-member-info\">\n    <a-row class=\"shop-member-info-title\">\n      <a-col :span=\"14\">\n        <div class=\"shop-member-info-title-pannel-left\">\n          <div class=\"shop-member-info-title-pannel__img\">\n            <div\n              class=\"img-box st-preview-item st-preview-item--cover\"\n              v-viewer=\"{ url: 'data-src', toolbar: false }\"\n            >\n              <img\n                class=\"img-url\"\n                :src=\"info.image_face.image_url\"\n                :data-src=\"info.image_face.image_url\"\n              />\n              <span class=\"img-describe\">{{ info.member_level.name }}</span>\n              <span\n                class=\"img-remove\"\n                @click=\"handleDeleteMemberFace\"\n                v-if=\"authCommon.delFace\"\n              ></span>\n            </div>\n            <div class=\"input-face\" v-if=\"authCommon.face\">\n              <a href=\"#\" @click=\"openFaceUpload\">\n                <a-icon type=\"plus\" />\n                录入人脸\n              </a>\n            </div>\n          </div>\n\n          <div class=\"shop-member-info-title-pannel__info\">\n            <st-t2>\n              {{ info.member_name }}\n              <st-icon\n                v-if=\"basicInfo.sex === 1 && !basicInfo.is_minors\"\n                :type=\"'female'\"\n                :style=\"'color:#FF5E41'\"\n              />\n              <st-icon\n                v-if=\"basicInfo.sex === 2 && !basicInfo.is_minors\"\n                :type=\"'male'\"\n                :style=\"'color:#3F66F6'\"\n              />\n              <st-icon\n                v-if=\"basicInfo.is_minors\"\n                type=\"user-type\"\n                :color=\"basicInfo.sex.id === 1 ? '#FF5E41' : '#3F66F6'\"\n              />\n            </st-t2>\n            <div class=\"shop-member-info-title-pannel__info__phone\">\n              <div v-if=\"basicInfo.is_minors\">\n                <span class=\"mg-r8\">\n                  家长：\n                  <span>{{ basicInfo.parent_info.username }}</span>\n                </span>\n                <span class=\"line\"></span>\n                <span>\n                  家长手机号：\n                  <span>{{ basicInfo.parent_info.mobile }}</span>\n                </span>\n              </div>\n              <div v-else>\n                手机号：\n                <span>{{ info.mobile }}</span>\n              </div>\n              <div class=\"line\" v-if=\"info.member_level.id !== 1\"></div>\n              <div v-if=\"info.member_level.id !== 1\">\n                首次成为会员时间：\n                <span>{{ info.be_member_time }}</span>\n              </div>\n            </div>\n            <div class=\"label-list\">\n              <template v-for=\"(tag, index) in info.member_tag\">\n                <a-tooltip :key=\"index\" :title=\"tag.name\">\n                  <a-tag\n                    class=\"tag-item\"\n                    :key=\"tag.name\"\n                    :closable=\"true\"\n                    @close=\"handleClose(tag)\"\n                  >\n                    {{ tag.name }}\n                  </a-tag>\n                </a-tooltip>\n              </template>\n              <a\n                v-modal-link=\"{\n                  name: 'shop-add-lable',\n                  props: {\n                    memberIds: [$searchQuery.id]\n                  },\n                  on: { done: onModalTest }\n                }\"\n              >\n                <a-tag\n                  v-if=\"authCommon.add\"\n                  style=\"background: #fff; borderStyle: dashed;\"\n                >\n                  <a-icon type=\"plus\" style=\"margin-right: 8px;\" />\n                  标签\n                </a-tag>\n              </a>\n            </div>\n          </div>\n        </div>\n      </a-col>\n      <a-col :span=\"10\">\n        <div class=\"shop-member-info-title-pannel-right\">\n          <div class=\"pannel-right__operation\">\n            <st-btn-actions :options=\"btnOptions\" />\n          </div>\n          <div class=\"pannel-right__operation\">\n            <div class=\"pannel-right__num__box\">\n              <span class=\"pannel-right__num font-number\">\n                {{ info.valid_card }}\n              </span>\n              <span class=\"pannel-right__num__margin\">/</span>\n              <span>张</span>\n              <p>\n                有效{{ $c('member_card') }}\n                <st-help-tooltip id=\"TSXQ001\" />\n              </p>\n            </div>\n            <div class=\"pannel-right__num__box\">\n              <span class=\"pannel-right__num font-number\">\n                {{ info.valid_personal_class }}\n              </span>\n              <span class=\"pannel-right__num__margin\">/</span>\n              <span>节</span>\n              <p>\n                有效私教课\n                <st-help-tooltip id=\"TSXQ002\" />\n              </p>\n            </div>\n            <div class=\"pannel-right__num__box\">\n              <span class=\"pannel-right__num font-number\">\n                {{ info.valid_package_course }}\n              </span>\n              <span class=\"pannel-right__num__margin\">/</span>\n              <span>个</span>\n              <p>\n                有效课程包\n                <st-help-tooltip id=\"TSXQ004\" />\n              </p>\n            </div>\n            <div class=\"pannel-right__num__box\">\n              <span class=\"pannel-right__num font-number\">\n                {{ info.deposit_balance }}\n              </span>\n              <span class=\"pannel-right__num__margin\">/</span>\n              <span>元</span>\n              <p>\n                储值卡余额\n                <st-help-tooltip id=\"TSXQ003\" />\n              </p>\n            </div>\n          </div>\n        </div>\n      </a-col>\n    </a-row>\n\n    <st-panel\n      app\n      :tabs=\"[\n        {\n          label: '用户资料',\n          route: {\n            name: 'shop-member-info-basic',\n            query: { id: $searchQuery.id }\n          }\n        },\n        {\n          label: '员工跟进',\n          route: {\n            name: 'shop-member-info-follow-history',\n            query: { id: $searchQuery.id }\n          }\n        },\n        {\n          label: '预约记录',\n          route: {\n            name: 'shop-member-info-sold',\n            query: { id: $searchQuery.id }\n          }\n        },\n        {\n          label: '入场记录',\n          route: {\n            name: 'shop-member-info-entry-log',\n            query: { id: $searchQuery.id }\n          }\n        },\n        {\n          label: '已购卡课',\n          route: {\n            name: 'shop-member-info-reserve',\n            query: { id: $searchQuery.id }\n          }\n        },\n        {\n          label: '营销权益',\n          route: {\n            name: 'shop-member-info-sales-interests',\n            query: { id: $searchQuery.id }\n          }\n        },\n        {\n          label: '跟进日志',\n          route: {\n            name: 'shop-member-info-follow-record',\n            query: { id: $route.query.id }\n          }\n        },\n        {\n          label: '会员积分',\n          route: {\n            name: 'shop-member-info-integral',\n            query: { id: $route.query.id }\n          }\n        }\n      ]\"\n    >\n      <!-- 这个版本去掉 -->\n      <!-- { label: '用户体测', route: { name: 'shop-member-info-user-experience',query:{id:$searchQuery.id} } }, -->\n\n      <div slot=\"actions\"></div>\n      <router-view></router-view>\n    </st-panel>\n  </st-panel-layout>\n</template>\n\n<script>\nimport { InfoService } from './info.service'\nimport FaceRecognition from '@/views/biz-modals/face/recognition'\nimport ShopAddLable from '@/views/biz-modals/shop/add-lable'\nimport ShopBindingEntityCard from '@/views/biz-modals/shop/binding-entity-card'\nimport ShopDistributionCoach from '@/views/biz-modals/shop/distribution-coach'\nimport ShopDistributionSale from '@/views/biz-modals/shop/distribution-sale'\nimport ShopFrozen from '@/views/biz-modals/shop/frozen'\nimport ShopMissingCard from '@/views/biz-modals/shop/missing-card'\nimport PointsAddOrMinus from '@/views/biz-modals/brand/marketing/points/add-or-minus'\nexport default {\n  serviceInject() {\n    return {\n      infoService: InfoService\n    }\n  },\n  rxState() {\n    return {\n      info: this.infoService.info$,\n      basicInfo: this.infoService.basicInfo$,\n      auth: this.infoService.auth$,\n      authCommon: this.infoService.authCommon$\n    }\n  },\n  modals: {\n    FaceRecognition,\n    ShopAddLable,\n    ShopBindingEntityCard,\n    ShopDistributionCoach,\n    ShopDistributionSale,\n    ShopFrozen,\n    ShopMissingCard,\n    PointsAddOrMinus\n  },\n  name: 'list',\n  data() {\n    return {\n      id: ''\n    }\n  },\n  computed: {\n    btnOptions() {\n      return [\n        {\n          text: '编辑资料',\n          click: this.editMember,\n          if: this.auth['shop:member:member|edit']\n        },\n        {\n          text: '绑定实体卡',\n          click: this.openBindingEntityCardModal,\n          if: this.auth['shop:member:member|bind_card']\n        },\n        {\n          text: `绑定跟进${this.$c('coach')}`,\n          click: this.onDistributionCoach,\n          if: this.auth['shop:member:member|bind_coach']\n        },\n        {\n          text: `更改跟进${this.$c('coach')}`,\n          click: this.onDistributionCoach,\n          if: this.auth['shop:member:member|change_coach']\n        },\n        {\n          text: '更改跟进销售',\n          click: this.onDistributionSale,\n          if: this.auth['shop:member:member|change_salesman']\n        },\n        {\n          text: '绑定跟进销售',\n          click: this.onDistributionSale,\n          if: this.auth['shop:member:member|bind_salesman']\n        },\n        {\n          text: '解除微信绑定',\n          click: this.onRemoveBind,\n          if: this.auth['shop:member:member|unbind_wechat']\n        },\n        {\n          text: '冻结用户',\n          click: this.openFrozenModal,\n          if: this.auth['shop:member:member|frozen']\n        },\n        {\n          text: '重绑实体卡',\n          click: this.openMissingCardModal,\n          if: this.auth['shop:member:member|rebind_card']\n        },\n        {\n          text: '清空指纹信息',\n          click: this.onClearFingerprintInfo,\n          if: this.auth['shop:member:member|finger_del']\n        },\n        {\n          text: '清空硬件密码',\n          click: this.onClearHardwarePassword,\n          if: this.auth['shop:member:member|cabinet_pwd_del']\n        },\n        {\n          text: '增加积分',\n          click: () => this.onAddOrDelIntegral('shop-add'),\n          if: this.auth['shop:member:member|add_point']\n        },\n        {\n          text: '扣减积分',\n          click: () => this.onAddOrDelIntegral('shop-minus'),\n          if: this.auth['shop:member:member|reduce_point']\n        }\n      ]\n    }\n  },\n  methods: {\n    submitSuccess() {\n      this.$router.reload()\n      this.$message.success({ content: '提交成功' })\n    },\n    // 删除用户人脸\n    handleDeleteMemberFace() {\n      this.infoService.deleteMemberFace(this.$searchQuery.id).subscribe(res => {\n        this.$router.reload()\n      })\n    },\n    getRecord() {\n      let { is_minors, parent_info } = this.info\n      return {\n        member_id: this.$searchQuery.id,\n        member_name: this.info.member_name,\n        mobile: this.info.mobile,\n        is_minors,\n        parent_info\n      }\n    },\n    openFrozenModal() {\n      this.$modalRouter.push({\n        name: 'shop-frozen',\n        props: {\n          record: this.getRecord()\n        },\n        on: {\n          success: () => {\n            this.submitSuccess()\n          }\n        }\n      })\n    },\n    openMissingCardModal() {\n      this.$modalRouter.push({\n        name: 'shop-missing-card',\n        props: {\n          record: this.getRecord()\n        },\n        on: {\n          success: () => {\n            this.submitSuccess()\n          }\n        }\n      })\n    },\n    openBindingEntityCardModal() {\n      this.$modalRouter.push({\n        name: 'shop-binding-entity-card',\n        props: {\n          record: this.getRecord()\n        },\n        on: {\n          success: () => {\n            this.submitSuccess()\n          }\n        }\n      })\n    },\n\n    openFaceUpload() {\n      this.$modalRouter.push({\n        name: 'face-recognition',\n        on: {\n          change: res => {\n            let result = res[0]\n            this.infoService\n              .editFace(this.$searchQuery.id, {\n                image_face: result\n              })\n              .subscribe(() => {\n                this.infoService.getHeaderInfo(this.$searchQuery.id).subscribe()\n              })\n          }\n        }\n      })\n    },\n    onRemoveBind() {\n      let that = this\n      this.$confirm({\n        title: '提示信息',\n        content: '确认解绑选中的会员关系？',\n        onOk() {\n          that.infoService.removeWechatBind(that.id).subscribe(() => {\n            console.log('ok')\n          })\n        },\n        onCancel() {}\n      })\n    },\n    handleClose(tag) {\n      let self = this\n      this.infoService\n        .getMemberLabelDelete({ user_id: self.$searchQuery.id, tag_id: tag.id })\n        .subscribe(state => {})\n    },\n    editMember() {\n      this.$router.push({\n        name: 'shop-member-edit',\n        query: { id: this.$searchQuery.id }\n      })\n    },\n    onModalTest() {\n      let self = this\n      this.infoService.getHeaderInfo(self.$searchQuery.id).subscribe()\n    },\n    // 分配教练\n    onDistributionCoach() {\n      this.$modalRouter.push({\n        name: 'shop-distribution-coach',\n        props: {\n          memberIds: [this.$searchQuery.id],\n          coachId: this.info.follow_coach_id\n        },\n        on: {\n          success: () => {\n            this.$router.reload()\n          }\n        }\n      })\n    },\n    // 分配销售\n    onDistributionSale() {\n      this.$modalRouter.push({\n        name: 'shop-distribution-sale',\n        props: {\n          memberIds: [this.$searchQuery.id],\n          saleId: this.info.follow_salesman_id\n        },\n        on: {\n          success: () => {\n            this.$router.reload()\n          }\n        }\n      })\n    },\n    // 增加、扣减积分\n    onAddOrDelIntegral(type) {\n      this.$modalRouter.push({\n        name: 'points-add-or-minus',\n        props: {\n          type,\n          query: {\n            memberName: this.info.member_name,\n            memberId: this.$searchQuery.id\n          }\n        },\n        on: {\n          done: () => {\n            this.$router.reload()\n          }\n        }\n      })\n    },\n    // 清空指纹信息\n    onClearFingerprintInfo() {\n      this.$confirm({\n        title: '提示信息',\n        content: '确认清空指纹信息？',\n        onOk: () => {\n          this.infoService.deleteMemberFinger(this.$searchQuery.id).subscribe()\n        }\n      })\n    },\n    // 清空硬件密码\n    onClearHardwarePassword() {\n      this.$confirm({\n        title: '提示信息',\n        content: '确认清空硬件密码吗？',\n        onOk: () => {\n          this.infoService\n            .deleteMemberCabinetPassword(this.$searchQuery.id)\n            .subscribe()\n        }\n      })\n    }\n  },\n  mounted() {\n    this.id = this.$searchQuery.id\n  }\n}\n</script>\n"],"sourceRoot":"src/views/pages/shop/member"}]}