{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/reception/components#/shortcut-nav.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/reception/components#/shortcut-nav.vue","mtime":1600926556425},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import _toConsumableArray from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { shortcutNavList } from \"./shortcut.config\";\nimport { ShortcutNavService } from \"./shortcut-nav.service\";\nimport { cloneDeep, throttle } from 'lodash-es';\nexport default {\n  name: '',\n  bem: {},\n  components: {},\n  serviceInject: function serviceInject() {\n    return {\n      shortcutNavService: ShortcutNavService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      auth: this.shortcutNavService.auth$\n    };\n  },\n  props: {},\n  data: function data() {\n    return {\n      // 根据权限处理后的快捷操作列表\n      dropdownList: [],\n      nodropdownList: [],\n      visible: false,\n      needResize: false,\n      safeWidth: 142,\n      resizeSmall: false\n    };\n  },\n  computed: {\n    shortcutNavList: shortcutNavList,\n    showDropDown: function showDropDown() {\n      return !!this.dropdownList.length;\n    }\n  },\n  async: {},\n  mounted: function mounted() {\n    this.formatShortcutList();\n    window.addEventListener('resize', this.judgeIfNeedResizeShortNav);\n  },\n  methods: {\n    judgeIfNeedResizeShortNav: function judgeIfNeedResizeShortNav() {\n      var shortcutNav = this.$refs.shortcutNav;\n      var shortcuts = this.$refs.shortcuts;\n\n      if (shortcuts && shortcutNav) {\n        var nWidth = shortcutNav.offsetWidth;\n        var sWidth = shortcuts.offsetWidth;\n        var offsetWidth = nWidth - sWidth;\n        console.log('offsetWidth', offsetWidth);\n\n        if (offsetWidth > 290) {\n          this.needResize = false;\n          this.resizeShortcutList();\n        }\n\n        if (offsetWidth < 200) {\n          this.needResize = true;\n          this.resizeShortcutList();\n        }\n      }\n    },\n    // 快捷操作\n    onShortcut: function onShortcut(data) {\n      switch (data) {\n        case 'checkInoutRecord':\n          window.open('/shop/reception/entrance');\n          break;\n\n        case 'scheduleAgency':\n          window.open('/shop/product/course/schedule/team');\n          break;\n\n        case 'courseSign':\n          window.open('/shop/reception/reserve');\n          break;\n\n        case 'receptionCabinet':\n          window.open('/shop/reception/cabinet');\n          break;\n\n        case 'earnestManage':\n          window.open('/shop/finance/gathering/earnest');\n          break;\n\n        case 'store':\n          window.open('/shop/sold/transaction/store');\n          break;\n\n        case 'soldCard':\n          window.open('/shop/sold/card/list');\n          break;\n\n        case 'soldCourse':\n          window.open('/shop/sold/course/list');\n          break;\n\n        case 'receptionRecord':\n          window.open('/shop/store/order/list/verification');\n          break;\n      }\n    },\n    openNewTab: function openNewTab(path) {\n      var a = document.createElement('a');\n      var url = location.origin + path;\n      a.setAttribute('href', url);\n      a.setAttribute('target', '_blank');\n      a.setAttribute('id', 'camnpr');\n      document.body.appendChild(a);\n      a.click();\n    },\n    handleMenuClick: function handleMenuClick(e) {\n      var key = e.key;\n      this.onShortcut(key);\n    },\n    formatShortcutList: function formatShortcutList() {\n      var _this = this;\n\n      var trueArray = this.shortcutNavList.map(function (i) {\n        i.auth = _this.auth[i.id] || false;\n        return i;\n      }).filter(function (i) {\n        return i.auth;\n      });\n      this.nodropdownList = cloneDeep(trueArray);\n      this.$nextTick(function () {\n        _this.initShortcutList();\n      });\n    },\n    initShortcutList: function initShortcutList(val) {\n      var shortcutNav = this.$refs.shortcutNav;\n      var shortcuts = this.$refs.shortcuts;\n\n      if (shortcuts && shortcutNav) {\n        var nWidth = shortcutNav.offsetWidth;\n        var sWidth = shortcuts.offsetWidth;\n        var offsetWidth = nWidth - sWidth;\n        console.log('initShortcutList offsetWidth', offsetWidth);\n\n        if (offsetWidth > 290) {\n          this.needResize = false;\n          return false;\n        } else if (offsetWidth < 180) {\n          this.deleteDropDownList();\n        }\n      }\n    },\n    computedOffsetWidth: function computedOffsetWidth() {\n      var shortcutNav = this.$refs.shortcutNav;\n      var shortcuts = this.$refs.shortcuts;\n      var nWidth = shortcutNav.offsetWidth;\n      var sWidth = shortcuts.offsetWidth;\n      var offsetWidth = nWidth - sWidth;\n      return offsetWidth < 180;\n    },\n    deleteDropDownList: function deleteDropDownList() {\n      var _this2 = this;\n\n      var len = this.nodropdownList.length;\n      console.log('deleteDropDownList', len);\n\n      if (len) {\n        var list = this.nodropdownList.splice(len - 1);\n        this.dropdownList = [].concat(_toConsumableArray(this.dropdownList), _toConsumableArray(list));\n        this.$nextTick(function () {\n          if (_this2.computedOffsetWidth()) {\n            return _this2.deleteDropDownList();\n          } else {\n            return false;\n          }\n        });\n      } else {\n        return false;\n      }\n    },\n    resizeShortcutList: function resizeShortcutList() {\n      if (this.needResize) {\n        var len = this.nodropdownList.length;\n\n        if (len) {\n          var list = this.nodropdownList.splice(len - 1);\n          this.dropdownList = [].concat(_toConsumableArray(this.dropdownList), _toConsumableArray(list));\n        }\n      } else {\n        var _len = this.dropdownList.length;\n\n        if (_len) {\n          var _list = this.dropdownList.splice(_len - 1);\n\n          this.nodropdownList = [].concat(_toConsumableArray(this.nodropdownList), _toConsumableArray(_list));\n        }\n      }\n    }\n  }\n};",{"version":3,"sources":["shortcut-nav.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"shortcut-jump\" :class=\"{ showDropDown }\" ref=\"shortcutNav\">\n    <div class=\"label\">快捷跳转：</div>\n    <div class=\"nav\" ref=\"shortcuts\">\n      <div\n        class=\"nav-item\"\n        v-for=\"(item, index) in nodropdownList\"\n        :disabled=\"!item.auth\"\n        :key=\"index\"\n        @click=\"onShortcut(item.id)\"\n      >\n        {{ item.label }}\n      </div>\n      <template v-if=\"showDropDown\">\n        <a-dropdown v-model=\"visible\" placement=\"bottomRight\">\n          <a class=\"dropdown\" @click=\"visible = !visible\">\n            <div class=\"dropdown-icon\">\n              <img src=\"~@/assets/img/icon_dropdown.png\" alt=\"\" />\n            </div>\n          </a>\n          <a-menu slot=\"overlay\" @click=\"handleMenuClick\">\n            <a-menu-item v-for=\"shortcut in dropdownList\" :key=\"shortcut.id\">\n              {{ shortcut.label }}\n            </a-menu-item>\n          </a-menu>\n        </a-dropdown>\n      </template>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { shortcutNavList } from './shortcut.config'\nimport { ShortcutNavService } from './shortcut-nav.service'\n\nimport { cloneDeep, throttle } from 'lodash-es'\n\nexport default {\n  name: '',\n\n  bem: {},\n\n  components: {},\n\n  serviceInject() {\n    return {\n      shortcutNavService: ShortcutNavService\n    }\n  },\n  rxState() {\n    return {\n      auth: this.shortcutNavService.auth$\n    }\n  },\n\n  props: {},\n\n  data() {\n    return {\n      // 根据权限处理后的快捷操作列表\n      dropdownList: [],\n      nodropdownList: [],\n      visible: false,\n      needResize: false,\n      safeWidth: 142,\n      resizeSmall: false\n    }\n  },\n\n  computed: {\n    shortcutNavList,\n    showDropDown() {\n      return !!this.dropdownList.length\n    }\n  },\n\n  async: {},\n\n  mounted() {\n    this.formatShortcutList()\n    window.addEventListener('resize', this.judgeIfNeedResizeShortNav)\n  },\n\n  methods: {\n    judgeIfNeedResizeShortNav() {\n      let shortcutNav = this.$refs.shortcutNav\n      let shortcuts = this.$refs.shortcuts\n      if (shortcuts && shortcutNav) {\n        let nWidth = shortcutNav.offsetWidth\n        let sWidth = shortcuts.offsetWidth\n        let offsetWidth = nWidth - sWidth\n        console.log('offsetWidth', offsetWidth)\n        if (offsetWidth > 290) {\n          this.needResize = false\n          this.resizeShortcutList()\n        }\n        if (offsetWidth < 200) {\n          this.needResize = true\n          this.resizeShortcutList()\n        }\n      }\n    },\n    // 快捷操作\n    onShortcut(data) {\n      switch (data) {\n        case 'checkInoutRecord':\n          window.open('/shop/reception/entrance')\n          break\n        case 'scheduleAgency':\n          window.open('/shop/product/course/schedule/team')\n          break\n        case 'courseSign':\n          window.open('/shop/reception/reserve')\n          break\n        case 'receptionCabinet':\n          window.open('/shop/reception/cabinet')\n          break\n        case 'earnestManage':\n          window.open('/shop/finance/gathering/earnest')\n          break\n        case 'store':\n          window.open('/shop/sold/transaction/store')\n          break\n        case 'soldCard':\n          window.open('/shop/sold/card/list')\n          break\n        case 'soldCourse':\n          window.open('/shop/sold/course/list')\n          break\n        case 'receptionRecord':\n          window.open('/shop/store/order/list/verification')\n          break\n      }\n    },\n    openNewTab(path) {\n      let a = document.createElement('a')\n      let url = location.origin + path\n      a.setAttribute('href', url)\n      a.setAttribute('target', '_blank')\n      a.setAttribute('id', 'camnpr')\n      document.body.appendChild(a)\n      a.click()\n    },\n    handleMenuClick(e) {\n      let key = e.key\n      this.onShortcut(key)\n    },\n    formatShortcutList() {\n      let trueArray = this.shortcutNavList\n        .map(i => {\n          i.auth = this.auth[i.id] || false\n          return i\n        })\n        .filter(i => i.auth)\n      this.nodropdownList = cloneDeep(trueArray)\n      this.$nextTick(() => {\n        this.initShortcutList()\n      })\n    },\n    initShortcutList(val) {\n      let shortcutNav = this.$refs.shortcutNav\n      let shortcuts = this.$refs.shortcuts\n      if (shortcuts && shortcutNav) {\n        let nWidth = shortcutNav.offsetWidth\n        let sWidth = shortcuts.offsetWidth\n        let offsetWidth = nWidth - sWidth\n        console.log('initShortcutList offsetWidth', offsetWidth)\n        if (offsetWidth > 290) {\n          this.needResize = false\n          return false\n        } else if (offsetWidth < 180) {\n          this.deleteDropDownList()\n        }\n      }\n    },\n    computedOffsetWidth() {\n      let shortcutNav = this.$refs.shortcutNav\n      let shortcuts = this.$refs.shortcuts\n      let nWidth = shortcutNav.offsetWidth\n      let sWidth = shortcuts.offsetWidth\n      let offsetWidth = nWidth - sWidth\n      return offsetWidth < 180\n    },\n    deleteDropDownList() {\n      let len = this.nodropdownList.length\n      console.log('deleteDropDownList', len)\n      if (len) {\n        let list = this.nodropdownList.splice(len - 1)\n        this.dropdownList = [...this.dropdownList, ...list]\n        this.$nextTick(() => {\n          if (this.computedOffsetWidth()) {\n            return this.deleteDropDownList()\n          } else {\n            return false\n          }\n        })\n      } else {\n        return false\n      }\n    },\n    resizeShortcutList() {\n      if (this.needResize) {\n        let len = this.nodropdownList.length\n        if (len) {\n          let list = this.nodropdownList.splice(len - 1)\n          this.dropdownList = [...this.dropdownList, ...list]\n        }\n      } else {\n        let len = this.dropdownList.length\n        if (len) {\n          let list = this.dropdownList.splice(len - 1)\n          this.nodropdownList = [...this.nodropdownList, ...list]\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped></style>\n"],"sourceRoot":"src/views/pages/shop/reception/components#"}]}