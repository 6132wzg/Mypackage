{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/sold/card/batch-area.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/sold/card/batch-area.vue","mtime":1591147717227},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { BatchAreaService } from \"./batch-area.service\";\nimport { BATCH_TYPE, BATCH_INFO } from '@/constants/common/batch-operation';\nimport { cloneDeep } from 'lodash-es';\nexport default {\n  name: 'ModalSoldCardArea',\n  bem: {\n    batch: 'sold-card-batch-area'\n  },\n  props: {\n    ids: {\n      type: Array,\n      required: true\n    },\n    searchQuery: Object\n  },\n  serviceProviders: function serviceProviders() {\n    return [BatchAreaService];\n  },\n  serviceInject: function serviceInject() {\n    return {\n      batchAreaService: BatchAreaService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      vips: this.batchAreaService.vips$,\n      loading: this.batchAreaService.loading$,\n      count: this.batchAreaService.count$\n    };\n  },\n  data: function data() {\n    return {\n      BATCH_TYPE: BATCH_TYPE,\n      BATCH_INFO: BATCH_INFO,\n      show: false,\n      cardVip: [],\n      batch_type: BATCH_TYPE.SELECTED,\n      btnDisabled: false\n    };\n  },\n  watch: {\n    vips: function vips(newVal) {\n      newVal.length === 0 ? this.btnDisabled = true : this.btnDisabled = false;\n    }\n  },\n  mounted: function mounted() {\n    this.batchAreaService.init(this.searchQuery).subscribe();\n  },\n  computed: {\n    helpText: function helpText() {\n      return this.count > this.BATCH_INFO.LIMIT_NUM ? this.BATCH_INFO.ERROR_TIP : '';\n    },\n    helpShow: function helpShow() {\n      return this.count > this.BATCH_INFO.LIMIT_NUM;\n    },\n    operateDataNum: function operateDataNum() {\n      return this.batch_type === this.BATCH_TYPE.SELECTED ? this.ids.length : this.count;\n    }\n  },\n  methods: {\n    onSubmit: function onSubmit() {\n      var _this = this;\n\n      this.batchAreaService.setCardVip({\n        batch_type: this.batch_type,\n        sold_ids: this.ids,\n        vip_ids: this.cardVip,\n        conditions: this.searchQuery\n      }).subscribe(function (res) {\n        _this.show = false;\n\n        _this.$emit('success');\n      });\n    }\n  }\n};",{"version":3,"sources":["batch-area.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA,SAAA,gBAAA;AACA,SAAA,UAAA,EAAA,UAAA,QAAA,oCAAA;AACA,SAAA,SAAA,QAAA,WAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,mBADA;AAEA,EAAA,GAAA,EAAA;AACA,IAAA,KAAA,EAAA;AADA,GAFA;AAKA,EAAA,KAAA,EAAA;AACA,IAAA,GAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,QAAA,EAAA;AAFA,KADA;AAKA,IAAA,WAAA,EAAA;AALA,GALA;AAYA,EAAA,gBAZA,8BAYA;AACA,WAAA,CAAA,gBAAA,CAAA;AACA,GAdA;AAeA,EAAA,aAfA,2BAeA;AACA,WAAA;AACA,MAAA,gBAAA,EAAA;AADA,KAAA;AAGA,GAnBA;AAoBA,EAAA,OApBA,qBAoBA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,KAAA,gBAAA,CAAA,KADA;AAEA,MAAA,OAAA,EAAA,KAAA,gBAAA,CAAA,QAFA;AAGA,MAAA,KAAA,EAAA,KAAA,gBAAA,CAAA;AAHA,KAAA;AAKA,GA1BA;AA2BA,EAAA,IA3BA,kBA2BA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,UADA;AAEA,MAAA,UAAA,EAAA,UAFA;AAGA,MAAA,IAAA,EAAA,KAHA;AAIA,MAAA,OAAA,EAAA,EAJA;AAKA,MAAA,UAAA,EAAA,UAAA,CAAA,QALA;AAMA,MAAA,WAAA,EAAA;AANA,KAAA;AAQA,GApCA;AAqCA,EAAA,KAAA,EAAA;AACA,IAAA,IADA,gBACA,MADA,EACA;AACA,MAAA,MAAA,CAAA,MAAA,KAAA,CAAA,GACA,KAAA,WAAA,GAAA,IADA,GAEA,KAAA,WAAA,GAAA,KAFA;AAGA;AALA,GArCA;AA4CA,EAAA,OA5CA,qBA4CA;AACA,SAAA,gBAAA,CAAA,IAAA,CAAA,KAAA,WAAA,EAAA,SAAA;AACA,GA9CA;AA+CA,EAAA,QAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,aAAA,KAAA,KAAA,GAAA,KAAA,UAAA,CAAA,SAAA,GACA,KAAA,UAAA,CAAA,SADA,GAEA,EAFA;AAGA,KALA;AAMA,IAAA,QANA,sBAMA;AACA,aAAA,KAAA,KAAA,GAAA,KAAA,UAAA,CAAA,SAAA;AACA,KARA;AASA,IAAA,cATA,4BASA;AACA,aAAA,KAAA,UAAA,KAAA,KAAA,UAAA,CAAA,QAAA,GACA,KAAA,GAAA,CAAA,MADA,GAEA,KAAA,KAFA;AAGA;AAbA,GA/CA;AA8DA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA,WAAA,gBAAA,CACA,UADA,CACA;AACA,QAAA,UAAA,EAAA,KAAA,UADA;AAEA,QAAA,QAAA,EAAA,KAAA,GAFA;AAGA,QAAA,OAAA,EAAA,KAAA,OAHA;AAIA,QAAA,UAAA,EAAA,KAAA;AAJA,OADA,EAOA,SAPA,CAOA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,KAAA;;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,SAAA;AACA,OAVA;AAWA;AAbA;AA9DA,CAAA","sourcesContent":["<template>\n  <st-modal\n    title=\"批量入场vip区域设置\"\n    size=\"small\"\n    v-model=\"show\"\n    :class=\"batch()\"\n  >\n    <st-form labelWidth=\"75px\">\n      <st-form-item\n        label=\"选择\"\n        required\n        :help=\"helpText\"\n        :validateStatus=\"helpShow ? 'error' : ''\"\n      >\n        <st-batch-select-radio\n          :ids=\"this.ids\"\n          v-model=\"batch_type\"\n          :total=\"count\"\n        ></st-batch-select-radio>\n      </st-form-item>\n      <st-form-item label=\"入场vip区域\" :class=\"batch('entry')\">\n        <a-checkbox-group v-model=\"cardVip\" v-if=\"vips.length\">\n          <a-checkbox\n            v-for=\"(item, index) in vips\"\n            :key=\"index\"\n            :value=\"+item.id\"\n          >\n            {{ item.area_name }}\n          </a-checkbox>\n        </a-checkbox-group>\n        <span v-else>未设置vip区域场地</span>\n      </st-form-item>\n    </st-form>\n    <template slot=\"footer\">\n      <st-button @click=\"show = false\">\n        取消\n      </st-button>\n      <st-popconfirm class=\"mg-l8\" @confirm=\"onSubmit\">\n        <div slot=\"title\" class=\"sold-popup-tip\">\n          <div class=\"sold-popup-tip__title\">\n            本次共选择{{ operateDataNum }}条记录，请再次确认是否提交！\n          </div>\n          <div class=\"sold-popup-tip__content\">\n            此操作将\n            <span class=\"color-danger\">覆盖</span>\n            当前选择项已有数据，将会有2-5s无法正常使用。\n          </div>\n        </div>\n        <st-button\n          type=\"primary\"\n          :loading=\"loading.setCardVip\"\n          :disabled=\"btnDisabled\"\n        >\n          确认提交\n        </st-button>\n      </st-popconfirm>\n    </template>\n  </st-modal>\n</template>\n\n<script>\nimport { BatchAreaService } from './batch-area.service'\nimport { BATCH_TYPE, BATCH_INFO } from '@/constants/common/batch-operation'\nimport { cloneDeep } from 'lodash-es'\nexport default {\n  name: 'ModalSoldCardArea',\n  bem: {\n    batch: 'sold-card-batch-area'\n  },\n  props: {\n    ids: {\n      type: Array,\n      required: true\n    },\n    searchQuery: Object\n  },\n  serviceProviders() {\n    return [BatchAreaService]\n  },\n  serviceInject() {\n    return {\n      batchAreaService: BatchAreaService\n    }\n  },\n  rxState() {\n    return {\n      vips: this.batchAreaService.vips$,\n      loading: this.batchAreaService.loading$,\n      count: this.batchAreaService.count$\n    }\n  },\n  data() {\n    return {\n      BATCH_TYPE,\n      BATCH_INFO,\n      show: false,\n      cardVip: [],\n      batch_type: BATCH_TYPE.SELECTED,\n      btnDisabled: false\n    }\n  },\n  watch: {\n    vips(newVal) {\n      newVal.length === 0\n        ? (this.btnDisabled = true)\n        : (this.btnDisabled = false)\n    }\n  },\n  mounted() {\n    this.batchAreaService.init(this.searchQuery).subscribe()\n  },\n  computed: {\n    helpText() {\n      return this.count > this.BATCH_INFO.LIMIT_NUM\n        ? this.BATCH_INFO.ERROR_TIP\n        : ''\n    },\n    helpShow() {\n      return this.count > this.BATCH_INFO.LIMIT_NUM\n    },\n    operateDataNum() {\n      return this.batch_type === this.BATCH_TYPE.SELECTED\n        ? this.ids.length\n        : this.count\n    }\n  },\n  methods: {\n    onSubmit() {\n      this.batchAreaService\n        .setCardVip({\n          batch_type: this.batch_type,\n          sold_ids: this.ids,\n          vip_ids: this.cardVip,\n          conditions: this.searchQuery\n        })\n        .subscribe(res => {\n          this.show = false\n          this.$emit('success')\n        })\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/biz-modals/sold/card"}]}