{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/sold/deal/member-card-transaction.vue?vue&type=template&id=c4427a52&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/sold/deal/member-card-transaction.vue","mtime":1600926555970},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":1591062572376},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["\n<st-modal\n  :title=\"title\"\n  v-model=\"show\"\n  @cancel=\"onCancel\"\n  wrapClassName=\"modal-sold-deal-sale\"\n>\n  <div :class=\"sale('content')\">\n    <st-form :form=\"form\" labelWidth=\"88px\">\n      <member-search\n        v-if=\"!isRenewal\"\n        :class=\"sale('member')\"\n        :form=\"form\"\n        :memberInfo=\"memberInfo\"\n        :saleRangeType=\"saleRangeType\"\n        isSoldDeal\n        @select=\"onMemberChange\"\n        @change=\"onMemberChange\"\n      ></member-search>\n      <st-form-item label=\"续卡会员\" class=\"mg-b0\">\n        {{ renewalInfo.member_name }}\n      </st-form-item>\n      <div :class=\"sale('sale')\">\n        <st-form-item label=\"选择卡\" required>\n          <select-scroll\n            v-decorator=\"decorators.productId\"\n            placeholder=\"请选择卡\"\n            notFoundContent=\"无搜索结果\"\n            :list=\"cardList\"\n            :loading=\"loading.getMemberCardList\"\n            :disabled=\"!isRenewal && !!id\"\n            @load=\"handleGetList\"\n            @select=\"handleSelect\"\n            @search=\"handleSearch\"\n          ></select-scroll>\n          <a-row\n            :class=\"sale('info')\"\n            v-if=\"hasProductInfo\"\n            type=\"flex\"\n            justify=\"space-between\"\n          >\n            <a-col :span=\"12\">\n              <st-info>\n                <st-info-item label=\"类型\" v-if=\"info.product_type\">\n                  {{ info.product_type.name }}\n                </st-info-item>\n                <st-info-item label=\"允许转让\">\n                  {{ info.is_transfer }}\n                </st-info-item>\n                <st-info-item label=\"转让手续费\">\n                  {{ info.transfer_fee }}\n                </st-info-item>\n                <st-info-item label=\"赠送上限\">\n                  {{ selectedNorm.gift_max_name }}\n                </st-info-item>\n                <st-info-item label=\"支持约课权益\">\n                  {{ info.course_interests }}\n                </st-info-item>\n              </st-info>\n            </a-col>\n            <a-col :span=\"11\">\n              <st-info>\n                <st-info-item\n                  label=\"支持入场人数\"\n                  v-if=\"info.card_number_type === 2\"\n                >\n                  {{ info.support_member_num }}\n                </st-info-item>\n                <st-info-item label=\"售卖群体\" v-if=\"info.sale_range\">\n                  {{ info.sale_range.name }}\n                </st-info-item>\n                <st-info-item label=\"冻结上限\">\n                  {{ selectedNorm.frozen_max_name }}\n                </st-info-item>\n              </st-info>\n            </a-col>\n          </a-row>\n        </st-form-item>\n        <assign-shop\n          v-if=\"info.admission_range_info\"\n          label=\"入场场馆\"\n          :form=\"form\"\n          :type=\"info.admission_range_info.admission_range\"\n          :shopIds=\"info.admission_range_info.product_support_shops\"\n          required\n          :disabled=\"\n            info.auth && !info.auth['shop:sold:transaction|right_price_edit']\n          \"\n          @change=\"onShopChange\"\n        />\n        <template v-if=\"hasProductInfo\">\n          <st-form-item label=\"卡成员\" v-if=\"info.card_number_type === 2\">\n            <add-card-member\n              v-model=\"memberChildrenlist\"\n              :max=\"info.support_member_num - 1\"\n              :type=\"info.sale_range.type\"\n            ></add-card-member>\n          </st-form-item>\n          <st-form-item label=\"规格\" required>\n            <a-radio-group\n              @change=\"onChangeSpecs\"\n              v-decorator=\"decorators.specs\"\n            >\n              <a-radio\n                v-for=\"(item, index) in info.specs\"\n                :value=\"item\"\n                :key=\"index\"\n              >\n                {{ item.specs_name }}/{{ item.price }}\n              </a-radio>\n            </a-radio-group>\n          </st-form-item>\n          <st-form-item label=\"开卡方式\" required>\n            <a-radio-group\n              @change=\"onChangePayment\"\n              v-decorator=\"decorators.open_type\"\n            >\n              <a-radio\n                v-for=\"(item, index) in info.open_type\"\n                :value=\"item\"\n                :key=\"index\"\n              >\n                {{ item.open_type }}\n              </a-radio>\n            </a-radio-group>\n          </st-form-item>\n          <st-form-item label=\"有效时间\">\n            <div v-if=\"selectedPayment.id == 1\">\n              {{\n                moment(validStartTime).format('YYYY-MM-DD HH:mm')\n              }}&nbsp;至&nbsp;{{ validEndTime }}\n            </div>\n            <div v-if=\"selectedPayment.id == 2\">\n              {{ selectedPayment.automatic_num }}天内未开卡，则{{\n                selectedPayment.automatic_num + 1\n              }}天0：00自动开卡\n            </div>\n            <div v-if=\"selectedPayment.id == 3\">\n              <a-date-picker\n                showTime\n                v-model=\"validStartTime\"\n                format=\"YYYY-MM-DD HH:mm\"\n                placeholder=\"请选择开始时间\"\n                :disabledDate=\"disabledDate\"\n                @change=\"onChangeTime\"\n              />\n              至 {{ validEndTime }}\n            </div>\n          </st-form-item>\n        </template>\n\n        <st-form-item label=\"购买赠送\">\n          <st-input-number\n            :min=\"0\"\n            :max=\"selectedNorm.gift_max\"\n            placeholder=\"请输入赠送的天数/次数\"\n            style=\"width: 100%\"\n            v-model=\"gift_amount\"\n          >\n            <span slot=\"addonAfter\">{{ giftUnit }}</span>\n          </st-input-number>\n        </st-form-item>\n        <!-- 合同编号 -->\n        <editable-contract-number\n          v-model=\"info.contract_number\"\n          :form=\"form\"\n        />\n        <st-form-item class=\"mg-b12\" label=\"商品价格\">\n          <editable-number\n            v-model=\"selectedNorm.price\"\n            unit=\"元\"\n            :disabled=\"\n              info.auth &&\n                !info.auth['shop:sold:transaction|right_price_edit']\n            \"\n            :form=\"form\"\n            @ok=\"onPriceChange\"\n          />\n        </st-form-item>\n        <st-form-item :class=\"sale('discounts')\" label=\"优惠券\">\n          <div>\n            <div :class=\"sale('discounts-total')\">\n              <span>{{ couponText }}</span>\n              <a-dropdown\n                v-model=\"couponDropdownVisible\"\n                :disabled=\"!canChoseCoupon\"\n                :class=\"sale({ disabled: !canChoseCoupon })\"\n                placement=\"bottomRight\"\n                :getPopupContainer=\"trigger => trigger.parentNode\"\n                :trigger=\"['click']\"\n              >\n                <div :class=\"sale('discounts-promotion')\">\n                  <span>{{ couponList.length }}张可用优惠券</span>\n                  <a-icon type=\"right\" />\n                </div>\n                <a-radio-group\n                  v-model=\"selectCoupon\"\n                  @change=\"onSelectCouponChange\"\n                  :class=\"sale('dropdown')\"\n                  slot=\"overlay\"\n                >\n                  <a-menu>\n                    <a-menu-item @click=\"onSelectCoupon\">\n                      <a-radio :value=\"undefined\">不使用</a-radio>\n                    </a-menu-item>\n                    <a-menu-item\n                      @click=\"onSelectCoupon\"\n                      :key=\"index\"\n                      v-for=\"(item, index) in couponList\"\n                    >\n                      <a-radio :value=\"item\">\n                        {{ item.name }}{{ item.price }}\n                      </a-radio>\n                    </a-menu-item>\n                  </a-menu>\n                </a-radio-group>\n              </a-dropdown>\n            </div>\n          </div>\n        </st-form-item>\n        <st-form-item :class=\"sale('discounts')\" label=\"定金抵扣\">\n          <div>\n            <div :class=\"sale('discounts-total')\">\n              <span>{{ advanceText }}</span>\n              <a-dropdown\n                v-model=\"advanceDropdownVisible\"\n                :disabled=\"!canChoseAdvance\"\n                :class=\"\n                  sale({\n                    disabled: !canChoseAdvance\n                  })\n                \"\n                placement=\"bottomRight\"\n                :getPopupContainer=\"trigger => trigger.parentNode\"\n                :trigger=\"['click']\"\n              >\n                <div :class=\"sale('discounts-promotion')\">\n                  <span>定金选择</span>\n                  <a-icon type=\"right\" />\n                </div>\n                <a-radio-group\n                  v-model=\"selectAdvance\"\n                  @change=\"onSelectAdvanceChange\"\n                  :class=\"sale('dropdown')\"\n                  slot=\"overlay\"\n                >\n                  <a-menu>\n                    <a-menu-item @click=\"onSelectAdvance\">\n                      <a-radio :value=\"undefined\">不使用</a-radio>\n                    </a-menu-item>\n                    <a-menu-item\n                      @click=\"onSelectAdvance\"\n                      :key=\"index\"\n                      v-for=\"(item, index) in advanceList\"\n                    >\n                      <a-radio :value=\"item.id\">\n                        定金 {{ item.price }}\n                      </a-radio>\n                    </a-menu-item>\n                  </a-menu>\n                </a-radio-group>\n              </a-dropdown>\n            </div>\n          </div>\n        </st-form-item>\n        <st-form-item label=\"减免金额\">\n          <st-input-number\n            v-model=\"reduceAmount\"\n            :float=\"true\"\n            placeholder=\"请输入\"\n          >\n            <span slot=\"addonAfter\">元</span>\n          </st-input-number>\n        </st-form-item>\n        <st-form-item\n          validateStatus=\"error\"\n          :help=\"orderAmountText\"\n          class=\"mg-b0\"\n          label=\"小计\"\n        >\n          <span class=\"total\">{{ currentPrice }}元</span>\n        </st-form-item>\n      </div>\n      <div :class=\"sale('remarks')\">\n        <st-form-item label=\"销售人员\" required>\n          <a-select\n            v-decorator=\"decorators.saleName\"\n            placeholder=\"选择签单的工作人员\"\n          >\n            <a-select-option\n              v-for=\"(item, index) in saleList\"\n              :key=\"index\"\n              :value=\"item.id\"\n            >\n              {{ item.staff_name }}\n            </a-select-option>\n          </a-select>\n          <div>\n            <st-checkbox v-model=\"isFollowSalesman\">\n              作为用户跟进销售\n            </st-checkbox>\n          </div>\n        </st-form-item>\n        <st-form-item label=\"备注\" class=\"mg-b0\">\n          <st-textarea\n            v-model=\"description\"\n            :autosize=\"{ minRows: 4, maxRows: 6 }\"\n            :maxlength=\"200\"\n          />\n        </st-form-item>\n      </div>\n    </st-form>\n  </div>\n  <template slot=\"footer\">\n    <div :class=\"sale('footer')\">\n      <div class=\"price\">\n        <span>{{ currentPrice }}元</span>\n        <span>订单总额：{{ selectedNorm.price }}元</span>\n      </div>\n      <div class=\"button\">\n        <st-button @click=\"onCreateOrder\" :loading=\"loading.createOrder\">\n          创建订单\n        </st-button>\n        <st-button @click=\"onPay\" :loading=\"loading.pay\" type=\"primary\">\n          立即支付\n        </st-button>\n      </div>\n    </div>\n  </template>\n</st-modal>\n",null]}