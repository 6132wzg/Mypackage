{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"shop-product-course-manage-package\"],{\"0236\":function(e,t,a){\"use strict\";a.r(t),a.d(t,\"InfoFixPackageService\",(function(){return d}));var s,i=a(\"d225\"),r=a(\"b0b4\"),o=a(\"9ab4\"),n=a(\"0cd5\"),c=a(\"df29\"),l=a(\"bf02\"),u=a(\"c4cc\"),p=a(\"a305\"),d=function(){function e(t){Object(i[\"a\"])(this,e),this.packageApi=t,this.packageInfo$=new c[\"d\"]({})}return Object(r[\"a\"])(e,[{key:\"info\",value:function(e){var t=this;return this.packageApi.getCoursePackageInfo(\"fixation\",e).pipe(Object(u[\"a\"])((function(e){e.info.team_times_total=Object(p[\"a\"])(e.info.team_range,(function(e,t){return e+ +t.team_times}),0),e.info.team_unit_price_total=Object(p[\"a\"])(e.info.team_range,(function(e,t){return e+t.team_times*t.team_unit_price}),0),e.info.personal_times_total=Object(p[\"a\"])(e.info.personal_range,(function(e,t){return e+ +t.personal_times}),0),e.info.personal_unit_price_total=Object(p[\"a\"])(e.info.personal_range,(function(e,t){return e+t.personal_times*t.personal_unit_price}),0),t.packageInfo$.commit((function(){return e.info}))})))}},{key:\"beforeRouteEnter\",value:function(e,t,a){this.info(e.meta.query.id).subscribe((function(){a()}))}}]),e}();d=Object(o[\"b\"])([Object(n[\"b\"])(),Object(o[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof l[\"d\"]&&l[\"d\"])?s:Object])],d)},\"08fa\":function(e,t,a){\"use strict\";a.r(t),a.d(t,\"EditUnlimitPackageService\",(function(){return h}));var s,i,r=a(\"d225\"),o=a(\"b0b4\"),n=a(\"9ab4\"),c=a(\"0cd5\"),l=a(\"df29\"),u=a(\"bf02\"),p=a(\"ebb6\"),d=a(\"c4cc\"),m=a(\"2138\"),_=a(\"3a59\"),h=function(){function e(t,a){var s=this;Object(r[\"a\"])(this,e),this.userService=t,this.packageApi=a,this.appConfig=!0,this.unitList$=this.userService.getOptions$(\"package_course.valid_time_unit\"),this.transferUnitList$=this.userService.getOptions$(\"package_course.transfer_unit\"),this.sellTypeList$=this.userService.getOptions$(\"package_course.sale_mode\").pipe(Object(p[\"a\"])((function(e){return s.appConfig||Object(_[\"a\"])(e,(function(e){return 1===e.value})),e}))),this.loading$=new l[\"d\"]({}),this.packageInfo$=new l[\"d\"]({}),this.id=\"\"}return Object(o[\"a\"])(e,[{key:\"getPackageInfo\",value:function(e){var t=this;return this.packageApi.editCoursePackageInfo(\"unlimited\",e).pipe(Object(d[\"a\"])((function(e){t.packageInfo$.commit((function(){return e.info}))})))}},{key:\"editPackage\",value:function(e){return this.packageApi.editCoursePackage(e,\"unlimited\",this.id)}},{key:\"beforeEach\",value:function(e){return this.id=e.meta.query.id,this.getPackageInfo(e.meta.query.id)}}]),e}();Object(n[\"b\"])([Object(l[\"c\"])(),Object(n[\"d\"])(\"design:type\",Function),Object(n[\"d\"])(\"design:paramtypes\",[Object]),Object(n[\"d\"])(\"design:returntype\",void 0)],h.prototype,\"editPackage\",null),h=Object(n[\"b\"])([Object(c[\"b\"])(),Object(n[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof m[\"a\"]&&m[\"a\"])?s:Object,\"function\"===typeof(i=\"undefined\"!==typeof u[\"d\"]&&u[\"d\"])?i:Object])],h)},\"09fc\":function(e,t,a){\"use strict\";a.r(t),a.d(t,\"ListService\",(function(){return C}));a(\"ac6a\");var s,i,r,o,n,c,l,u=a(\"d225\"),p=a(\"b0b4\"),d=a(\"9ab4\"),m=a(\"2138\"),_=a(\"0cd5\"),h=a(\"df29\"),g=a(\"bf02\"),f=a(\"e69b\"),v=a(\"ecc1\"),k=a(\"c4cc\"),b=a(\"2cbb\"),C=function(){function e(t,a,s,i,r){Object(u[\"a\"])(this,e),this.packageApi=t,this.authService=a,this.userService=s,this.msg=i,this.brandPackageApi=r,this.list$=new h[\"d\"]({}),this.page$=new h[\"d\"]({}),this.loading$=new h[\"d\"]({}),this.auth$=this.authService.authMap$({add:\"shop:product:package_course|add\"}),this.supportNum$=this.userService.getOptions$(\"package_course.support_num\",{addAll:!0}),this.publicChannel$=this.userService.getOptions$(\"package_course.publish_channel\",{addAll:!0})}return Object(p[\"a\"])(e,[{key:\"SET_PACKAGE_LIST\",value:function(e){var t=this.publicChannel$.snapshot(),a={};t.forEach((function(e){a[e.value]=e.label})),this.list$.commit((function(){return e.map((function(e){return e.channelName=a[e.publish_channel],e}))}))}},{key:\"getList\",value:function(e){var t=this;return this.packageApi.getList(e).pipe(Object(k[\"a\"])((function(e){t.SET_PACKAGE_LIST(e.list),t.page$.commit((function(){return e.page}))})))}},{key:\"offsalePackage\",value:function(e){return this.packageApi.offsaleCoursePackage(e)}},{key:\"setSyncSold\",value:function(e){var t=this;return this.brandPackageApi.setSyncSold(e).pipe(Object(k[\"a\"])((function(){t.msg.success({content:\"同步至售出成功\"})})))}},{key:\"deletePackage\",value:function(e){return this.packageApi.deleteCoursePackage(e)}},{key:\"onsalePackage\",value:function(e){return this.packageApi.onsaleCoursePackage(e)}},{key:\"init\",value:function(e){return this.getList(e)}},{key:\"beforeEach\",value:function(e,t){return this.init(e.meta.query)}}]),e}();Object(d[\"b\"])([Object(h[\"c\"])(),Object(d[\"d\"])(\"design:type\",Function),Object(d[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof g[\"GetPackageListInput\"]&&g[\"GetPackageListInput\"])?s:Object]),Object(d[\"d\"])(\"design:returntype\",void 0)],C.prototype,\"getList\",null),Object(d[\"b\"])([Object(h[\"c\"])(),Object(d[\"d\"])(\"design:type\",Function),Object(d[\"d\"])(\"design:paramtypes\",[Object]),Object(d[\"d\"])(\"design:returntype\",void 0)],C.prototype,\"offsalePackage\",null),Object(d[\"b\"])([Object(h[\"c\"])(),Object(d[\"d\"])(\"design:type\",Function),Object(d[\"d\"])(\"design:paramtypes\",[String]),Object(d[\"d\"])(\"design:returntype\",void 0)],C.prototype,\"deletePackage\",null),Object(d[\"b\"])([Object(h[\"c\"])(),Object(d[\"d\"])(\"design:type\",Function),Object(d[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(i=\"undefined\"!==typeof g[\"OnsalePackageInput\"]&&g[\"OnsalePackageInput\"])?i:Object]),Object(d[\"d\"])(\"design:returntype\",void 0)],C.prototype,\"onsalePackage\",null),C=Object(d[\"b\"])([Object(_[\"b\"])(),Object(d[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(r=\"undefined\"!==typeof g[\"d\"]&&g[\"d\"])?r:Object,\"function\"===typeof(o=\"undefined\"!==typeof b[\"a\"]&&b[\"a\"])?o:Object,\"function\"===typeof(n=\"undefined\"!==typeof m[\"a\"]&&m[\"a\"])?n:Object,\"function\"===typeof(c=\"undefined\"!==typeof f[\"a\"]&&f[\"a\"])?c:Object,\"function\"===typeof(l=\"undefined\"!==typeof v[\"a\"]&&v[\"a\"])?l:Object])],C)},\"13e6\":function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"st-panel\",{staticClass:\"page-shop-add-fix-package\",class:e.basic(),attrs:{app:\"\"}},[a(\"st-form\",{attrs:{form:e.form,labelWidth:\"96px\"}},[a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{staticClass:\"mg-t40\",attrs:{label:\"课程包名称\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"course_name\",{rules:[{required:!0,message:\"请输入课程包名称\"},{min:2,message:\"最少2个字符\"},{max:30,message:\"最多30个字符\"}]}],expression:\"[\\n              'course_name',\\n              {\\n                rules: [\\n                  { required: true, message: '请输入课程包名称' },\\n                  { min: 2, message: '最少2个字符' },\\n                  { max: 30, message: '最多30个字符' }\\n                ]\\n              }\\n            ]\"}],attrs:{placeholder:\"请输入课程包名称\"}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:8,xs:11,offset:1}},[a(\"div\",{class:e.basic(\"user-num\")},[a(\"st-form-item\",{attrs:{label:\"支持使用人数\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"support_num\",{rules:[{required:!0,message:\"请输入支持使用人数\"}]}],expression:\"[\\n                'support_num',\\n                {\\n                  rules: [{ required: true, message: '请输入支持使用人数' }]\\n                }\\n              ]\"}],staticStyle:{width:\"110px\"},attrs:{min:1,max:20,placeholder:\"请输入支持使用人数\"}})],1),a(\"span\",{staticClass:\"mg-l8\"},[e._v(\"限定20人\")])],1)])],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:23,xs:22,offset:1}},[a(\"st-form-item\",{class:{\"st-has-error\":!e.courseIsFirstInput&&e.courseIsNone},attrs:{help:e.courseErrorText,required:\"\"}},[a(\"template\",{slot:\"label\"},[e._v(\"\\n            上课范围\\n            \"),a(\"st-help-tooltip\",{attrs:{id:\"TSCPCF003\"}})],1),a(\"div\",{class:e.add(\"course\")},[a(\"st-form-table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"10%\"}}),a(\"col\",{staticStyle:{width:\"24%\"}}),a(\"col\",{staticStyle:{width:\"18%\"}}),a(\"col\",{staticStyle:{width:\"18%\"}}),a(\"col\",{staticStyle:{width:\"25%\"}})]),a(\"tr\",{staticClass:\"bg-thead table-header\"},[a(\"th\"),a(\"th\",{staticClass:\"rightline pd-x16\"},[e._v(\"课程类型\")]),a(\"th\"),a(\"th\",{staticClass:\"pd-x16\"},[e._v(\"节数\")]),a(\"th\",{staticClass:\"pd-x16\"},[e._v(\"小计\")]),a(\"th\")]),a(\"tbody\",[a(\"tr\",{staticClass:\"bg-row-odd checkbox\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{on:{change:e.teamCheckboxChange}})],1),a(\"td\",{staticClass:\"rightline white-nowrap\"},[e._v(\"\\n                    团体课程\\n                  \")]),a(\"td\"),a(\"td\",[e._v(e._s(e.teamCourseTotalObject.team_times)+\"节\")]),a(\"td\",[e._v(e._s(e.teamCourseTotalObject.total)+\"元\")]),a(\"td\",{staticClass:\"overflow-hidden\"},[a(\"a\",{staticClass:\"set-course-button\",class:{hide:!(e.teamCourseListIsShow&&e.packageData.is_team)},attrs:{disabled:!e.packageData.is_team,href:\"javascript:void(0)\"},on:{click:e.teamCourseListShow}},[e._v(\"\\n                      配置上课范围  \\n                      \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1)])]),e.teamCourseListIsShow&&e.packageData.is_team?a(\"tr\",{staticClass:\"bg-row-odd team-course-list-content\"},[a(\"td\",{staticClass:\"rightline\",staticStyle:{\"background-color\":\"#fff\"},attrs:{colspan:\"2\"}}),a(\"td\",{staticClass:\"team-course-table\",attrs:{colspan:\"4\"}},[a(\"div\",{class:e.add(\"team-course-table\")},[a(\"st-form-table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"20%\"}}),a(\"col\",{staticStyle:{width:\"28%\"}}),a(\"col\",{staticStyle:{width:\"28%\"}}),a(\"col\",{staticStyle:{width:\"10%\"}}),a(\"col\",{staticStyle:{width:\"9%\"}})]),a(\"tr\",{staticClass:\"bg-thead th\"},[a(\"th\"),a(\"th\",[e._v(\"课程名称\")]),a(\"th\",[e._v(\"节数\")]),a(\"th\",[e._v(\"课时费\")]),a(\"th\",[e._v(\"总价\")]),a(\"th\",[e._v(\"操作\")])]),a(\"tbody\",[a(\"tr\",{staticClass:\"checkbox border-bottom\"},[a(\"td\",{staticClass:\"team-course-add-buton\",attrs:{colspan:\"6\"}},[a(\"st-button\",{attrs:{block:\"\",type:\"dashed\",icon:\"add\"},on:{click:function(t){return e.addCourse(\"team\")}}},[e._v(\"\\n                                新增团体课程\\n                              \")])],1)]),a(\"tr\",[a(\"td\",{attrs:{colspan:\"6\"}},[e.teamCourseList.length?e._e():a(\"p\",{staticClass:\"bg-row-even\",staticStyle:{margin:\"0\",\"text-align\":\"center\"}},[e._v(\"\\n                                无数据\\n                              \")]),e.teamCourseList.length?a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{ stopPropagation: true }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"teamCourseList2\"],expression:\"['teamCourseList2']\"}],staticClass:\"team-course-content-table\"},e._l(e.teamCourseList,(function(t,s){return a(\"li\",{key:t.course_id,staticClass:\"checkbox border-bottom\",class:{\"bg-row-odd\":s%2!==0,\"bg-row-even\":s%2===0}},[a(\"div\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{checked:t.courseChecked},on:{change:function(t){return e.courseItemCheckedChange(t,\"team\",s)}}})],1),a(\"div\",[e._v(e._s(t.course_name))]),a(\"div\",[a(\"st-input-number\",{attrs:{min:1,max:99999},on:{change:function(a){return e.teamInputChange(a,\"team_times\",t.course_id)}},model:{value:t.team_times,callback:function(a){e.$set(t,\"team_times\",a)},expression:\"i.team_times\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                                        节\\n                                      \")])],2)],1),a(\"div\",[a(\"st-input-number\",{attrs:{min:0,max:999999.9,float:!0},on:{change:function(a){return e.teamInputChange(a,\"team_unit_price\",t.course_id)}},model:{value:t.team_unit_price,callback:function(a){e.$set(t,\"team_unit_price\",a)},expression:\"i.team_unit_price\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                                        元\\n                                      \")])],2)],1),a(\"div\",[e._v(\"\\n                                    \"+e._s(e._f(\"course_item_total\")(t.team_times,t.team_unit_price))+\"\\n                                  \")]),a(\"div\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(a){return e.removeCourseItem(\"team\",t.course_id)}}},[e._v(\"\\n                                      删除\\n                                    \")])])])})),0):e._e()])]),a(\"tr\",{staticClass:\"bg-thead checkbox topline\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{indeterminate:e.teamIndeterminate,checked:e.teamCheckAll},on:{change:function(t){return e.checkAllChange(\"team\")}}})],1),a(\"td\",[e._v(\"批量操作\")]),a(\"td\",{staticClass:\"pr-24\"},[a(\"st-input-number\",{attrs:{min:1,max:99999},model:{value:e.teamOperationObject.team_times,callback:function(t){e.$set(e.teamOperationObject,\"team_times\",t)},expression:\"teamOperationObject.team_times\"}},[a(\"a\",{attrs:{slot:\"addonAfter\",disabled:!+e.teamOperationObject.team_times,href:\"javascript:void(0)\"},on:{click:function(t){return e.times_operation_ok(\"team\")}},slot:\"addonAfter\"},[e._v(\"\\n                                  确定\\n                                \")])])],1),a(\"td\",{staticClass:\"pr-24\"},[a(\"st-input-number\",{attrs:{min:0,max:999999.9,float:!0},model:{value:e.teamOperationObject.team_unit_price,callback:function(t){e.$set(e.teamOperationObject,\"team_unit_price\",t)},expression:\"teamOperationObject.team_unit_price\"}},[a(\"a\",{attrs:{slot:\"addonAfter\",disabled:!+e.teamOperationObject.team_unit_price,href:\"javascript:void(0)\"},on:{click:function(t){return e.unit_price_operation_ok(\"team\")}},slot:\"addonAfter\"},[e._v(\"\\n                                  确定\\n                                \")])])],1),a(\"td\",[e._v(\"\\n                              \"+e._s(e._f(\"course_item_total\")(e.teamOperationObject.team_times,e.teamOperationObject.team_unit_price))+\"\\n                            \")]),a(\"td\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(t){return e.removeCourseItems(\"team\")}}},[e._v(\"\\n                                删除\\n                              \")])])])])])],1)])]):e._e(),a(\"tr\",{staticClass:\"bg-row-top checkbox topline\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{on:{change:e.personalCheckboxChange}})],1),a(\"td\",{staticClass:\"rightline\"},[e._v(\"私教课程\")]),a(\"td\"),a(\"td\",[e._v(e._s(e.personalCourseTotalObject.personal_times)+\"节\")]),a(\"td\",[e._v(e._s(e.personalCourseTotalObject.total)+\"元\")]),a(\"td\",{staticClass:\"overflow-hidden\"},[a(\"a\",{staticClass:\"set-course-button\",class:{hide:!(e.personalCourseListIsShow&&e.packageData.is_personal)},attrs:{disabled:!e.packageData.is_personal,href:\"javascript:void(0)\"},on:{click:e.personalCourseListShow}},[e._v(\"\\n                      配置上课范围  \\n                      \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1)])]),e.personalCourseListIsShow&&e.packageData.is_personal?a(\"tr\",{staticClass:\"bg-row-even personal-course-list-content\"},[a(\"td\",{staticClass:\"rightline\",attrs:{colspan:\"2\"}}),a(\"td\",{staticClass:\"personal-course-table\",attrs:{colspan:\"4\"}},[a(\"div\",{class:e.add(\"personal-course-table\")},[a(\"table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"20%\"}}),a(\"col\",{staticStyle:{width:\"18%\"}}),a(\"col\",{staticStyle:{width:\"18%\"}}),a(\"col\",{staticStyle:{width:\"23%\"}}),a(\"col\",{staticStyle:{width:\"8%\"}}),a(\"col\",{staticStyle:{width:\"8%\"}})]),a(\"tr\",{staticClass:\"bg-thead th\"},[a(\"th\"),a(\"th\",[e._v(\"课程名称\")]),a(\"th\",[e._v(\"节数\")]),a(\"th\",[e._v(\"课时费\")]),a(\"th\",{staticClass:\"tg-c\"},[e._v(\"\\n                            支持预约的\"+e._s(e.$c(\"coach\"))+\"等级\\n                          \")]),a(\"th\",[e._v(\"总价\")]),a(\"th\",[e._v(\"操作\")])]),a(\"tbody\",[a(\"tr\",{staticClass:\"checkbox border-bottom\"},[a(\"td\",{staticClass:\"personal-course-add-buton\",attrs:{colspan:\"7\"}},[a(\"st-button\",{attrs:{block:\"\",type:\"dashed\",icon:\"add\"},on:{click:function(t){return e.addCourse(\"personal\")}}},[e._v(\"\\n                                新增私教课程\\n                              \")])],1)]),a(\"tr\",[a(\"td\",{attrs:{colspan:\"7\"}},[e.personalCourseList.length?e._e():a(\"p\",{staticClass:\"bg-row-even\",staticStyle:{margin:\"0\",\"text-align\":\"center\"}},[e._v(\"\\n                                无数据\\n                              \")]),e.personalCourseList.length?a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{ stopPropagation: true }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseList1\"],expression:\"['personalCourseList1']\"}],staticClass:\"personal-course-content-table\"},e._l(e.personalCourseList,(function(t,s){return a(\"li\",{key:t.course_id,staticClass:\"checkbox border-bottom\",class:{\"bg-row-odd\":s%2!==0,\"bg-row-even\":s%2===0}},[a(\"div\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{checked:t.courseChecked},on:{change:function(t){return e.courseItemCheckedChange(t,\"personal\",s)}}})],1),a(\"div\",[e._v(e._s(t.course_name))]),a(\"div\",[a(\"st-input-number\",{attrs:{min:1,max:99999},on:{change:function(a){return e.personalInputChange(a,\"personal_times\",t.course_id)}},model:{value:t.personal_times,callback:function(a){e.$set(t,\"personal_times\",a)},expression:\"item.personal_times\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                                        节\\n                                      \")])],2)],1),a(\"div\",[a(\"st-input-number\",{attrs:{min:0,max:999999.9,float:!0},on:{change:function(a){return e.personalInputChange(a,\"personal_unit_price\",t.course_id)}},model:{value:t.personal_unit_price,callback:function(a){e.$set(t,\"personal_unit_price\",a)},expression:\"item.personal_unit_price\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                                        元\\n                                      \")])],2)],1),a(\"div\",[a(\"a-dropdown\",{attrs:{placement:\"bottomRight\",trigger:[\"click\"]}},[a(\"a\",{attrs:{href:\"javascript:void(0)\"}},[e._v(\"\\n                                        \"+e._s(t.coachGradeList.length===e.coachList.length?\"全部\":t.coachGradeList.length+\"个\")+\"等级  \\n                                        \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1),a(\"a-checkbox-group\",{class:e.basic(\"personal-dropdown\"),attrs:{slot:\"overlay\"},on:{change:function(a){return e.coachItemChange(a,t.course_id,s)}},slot:\"overlay\",model:{value:t.coachGradeList,callback:function(a){e.$set(t,\"coachGradeList\",a)},expression:\"item.coachGradeList\"}},[a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{\\n                                            stopPropagation: true\\n                                          }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseListCoachGrade\"+s],expression:\"[\\n                                            `personalCourseListCoachGrade${index}`\\n                                          ]\"}],staticClass:\"personal-course-coach-grade-dropdown\"},e._l(e.coachList,(function(t,s){return a(\"li\",{key:s},[a(\"a-checkbox\",{attrs:{value:t.id}},[e._v(\"\\n                                              \"+e._s(t.setting_name)+\"\\n                                            \")])],1)})),0)])],1)],1),a(\"div\",[e._v(\"\\n                                    \"+e._s(e._f(\"course_item_total\")(t.personal_times,t.personal_unit_price))+\"\\n                                  \")]),a(\"div\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(a){return e.removeCourseItem(\"personal\",t.course_id)}}},[e._v(\"\\n                                      删除\\n                                    \")])])])})),0):e._e()])]),a(\"tr\",{staticClass:\"bg-thead checkbox topline\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{indeterminate:e.personalIndeterminate,checked:e.personalCheckAll},on:{change:function(t){return e.checkAllChange(\"personal\")}}})],1),a(\"td\",[e._v(\"批量操作\")]),a(\"td\",{staticClass:\"pr-24\"},[a(\"st-input-number\",{attrs:{min:1,max:99999},model:{value:e.personalOperationObject.personal_times,callback:function(t){e.$set(e.personalOperationObject,\"personal_times\",t)},expression:\"\\n                                  personalOperationObject.personal_times\\n                                \"}},[a(\"a\",{attrs:{slot:\"addonAfter\",disabled:!+e.personalOperationObject.personal_times,href:\"javascript:void(0)\"},on:{click:function(t){return e.times_operation_ok(\"personal\")}},slot:\"addonAfter\"},[e._v(\"\\n                                  确定\\n                                \")])])],1),a(\"td\",{staticClass:\"pr-24\"},[a(\"st-input-number\",{attrs:{min:0,max:999999.9,float:!0},model:{value:e.personalOperationObject.personal_unit_price,callback:function(t){e.$set(e.personalOperationObject,\"personal_unit_price\",t)},expression:\"\\n                                  personalOperationObject.personal_unit_price\\n                                \"}},[a(\"a\",{attrs:{slot:\"addonAfter\",disabled:!+e.personalOperationObject.personal_unit_price,href:\"javascript:void(0)\"},on:{click:function(t){return e.unit_price_operation_ok(\"personal\")}},slot:\"addonAfter\"},[e._v(\"\\n                                  确定\\n                                \")])])],1),a(\"td\",{staticClass:\"tg-c\"},[a(\"a-dropdown\",{attrs:{placement:\"bottomRight\",trigger:[\"click\"]},model:{value:e.coachAllOperationDropdownIsShow,callback:function(t){e.coachAllOperationDropdownIsShow=t},expression:\"coachAllOperationDropdownIsShow\"}},[a(\"a\",{attrs:{href:\"javascript:void(0)\"}},[e._v(\"\\n                                  批量设置等级  \\n                                  \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1),a(\"a-checkbox-group\",{staticClass:\"all\",class:e.basic(\"personal-dropdown\"),attrs:{slot:\"overlay\"},slot:\"overlay\",model:{value:e.personalAllOperationCoachList,callback:function(t){e.personalAllOperationCoachList=t},expression:\"personalAllOperationCoachList\"}},[a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{ stopPropagation: true }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseListCoachGradeAll\"],expression:\"[\\n                                      'personalCourseListCoachGradeAll'\\n                                    ]\"}],staticClass:\"personal-course-coach-grade-dropdown\"},e._l(e.coachList,(function(t,s){return a(\"li\",{key:s},[a(\"a-checkbox\",{attrs:{value:t.id}},[e._v(\"\\n                                        \"+e._s(t.setting_name)+\"\\n                                      \")])],1)})),0),a(\"div\",{staticClass:\"personal-course-coach-grade-dropdown-button\"},[a(\"a\",{attrs:{href:\"javascript:void(0)\",disabled:!e.personalAllOperationCoachList.length},on:{click:e.coachAllOperationOk}},[e._v(\"\\n                                      确定\\n                                    \")])])])],1)],1),a(\"td\",[e._v(\"\\n                              \"+e._s(e._f(\"course_item_total\")(e.personalOperationObject.personal_times,e.personalOperationObject.personal_unit_price))+\"\\n                            \")]),a(\"td\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(t){return e.removeCourseItems(\"personal\")}}},[e._v(\"\\n                                删除\\n                              \")])])])])])])])]):e._e()])])],1)],2)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"总价\"}},[e._v(e._s(e.all_total)+\"元\")])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"售卖价格\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"price\",{rules:[{required:!0,message:\"请输入售卖价格\"}]}],expression:\"[\\n              'price',\\n              { rules: [{ required: true, message: '请输入售卖价格' }] }\\n            ]\"}],attrs:{min:0,placeholder:\"请输入售卖价格\",max:999999.9,float:!0}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n              元\\n            \")])],2)],1)],1)],1),a(\"reserve-is-limit\"),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{staticClass:\"mg-b0\",attrs:{label:\"支持售卖时间\",required:\"\"}},[a(\"div\",{class:e.basic(\"saletime\")},[a(\"a-form-item\",{staticClass:\"page-a-form\"},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"start_time\",{rules:[{validator:e.start_time_validator}]}],expression:\"[\\n                  'start_time',\\n                  { rules: [{ validator: start_time_validator }] }\\n                ]\"}],staticStyle:{width:\"100%\"},attrs:{disabledDate:e.disabledStartDate,format:\"YYYY-MM-DD\",placeholder:\"开始时间\",showToday:!1},on:{openChange:e.handleStartOpenChange,change:e.start_time_change}})],1),a(\"span\",[e._v(\"~\")]),a(\"a-form-item\",{staticClass:\"page-a-form\"},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"end_time\",{rules:[{validator:e.end_time_validator}]}],expression:\"[\\n                  'end_time',\\n                  { rules: [{ validator: end_time_validator }] }\\n                ]\"}],attrs:{disabledDate:e.disabledEndDate,format:\"YYYY-MM-DD\",placeholder:\"结束时间\",showToday:!1,open:e.endOpen},on:{openChange:e.handleEndOpenChange,change:e.end_time_change}})],1)],1)])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"有效时间\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"valid_time\",{initialValue:null,rules:[{required:!0,message:\"请输入有效时间\"}]}],expression:\"[\\n              'valid_time',\\n              {\\n                initialValue: null,\\n                rules: [{ required: true, message: '请输入有效时间' }]\\n              }\\n            ]\"}],attrs:{placeholder:\"请输入有效时间\",min:1,max:99999}},[a(\"a-select\",{staticStyle:{width:\"60px\"},attrs:{slot:\"addonAfter\"},slot:\"addonAfter\",model:{value:e.packageData.valid_time_unit,callback:function(t){e.$set(e.packageData,\"valid_time_unit\",t)},expression:\"packageData.valid_time_unit\"}},e._l(e.unitList,(function(t,s){return a(\"a-select-option\",{key:s,attrs:{value:t.value}},[e._v(\"\\n                \"+e._s(t.label)+\"\\n              \")])})),1)],1)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"允许冻结天数\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"frozen_days\",{rules:[{required:!0,message:\"请输入允许冻结天数\"}]}],expression:\"[\\n              'frozen_days',\\n              { rules: [{ required: true, message: '请输入允许冻结天数' }] }\\n            ]\"}],attrs:{placeholder:\"请输入允许冻结天数\",min:1,max:99999}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n              天\\n            \")])],2)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"转让设置\"}},[a(\"div\",{class:e.basic(\"transfer\")},[a(\"a-checkbox\",{class:e.basic(\"transfer-checkbox\"),on:{change:e.transfer}},[e._v(\"\\n              支持转让\\n            \")]),a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"transfer_rate\",{rules:[{required:0!==e.packageData.is_allow_transfer,message:\"请输入转让值数值\"}]}],expression:\"[\\n                'transfer_rate',\\n                {\\n                  rules: [\\n                    {\\n                      required: packageData.is_allow_transfer !== 0,\\n                      message: '请输入转让值数值'\\n                    }\\n                  ]\\n                }\\n              ]\"}],class:e.basic(\"transfer-input\"),staticStyle:{\"padding-right\":\"0\"},attrs:{min:0,max:1===e.packageData.transfer_unit?100:999999.9,disabled:0===e.packageData.is_allow_transfer,float:2===e.packageData.transfer_unit}},[a(\"a-select\",{staticStyle:{width:\"60px\"},attrs:{slot:\"addonAfter\",disabled:0===e.packageData.is_allow_transfer},on:{change:e.transferUnitChange},slot:\"addonAfter\",model:{value:e.packageData.transfer_unit,callback:function(t){e.$set(e.packageData,\"transfer_unit\",t)},expression:\"packageData.transfer_unit\"}},e._l(e.transferUnitList,(function(t){return a(\"a-select-option\",{key:t.value,attrs:{value:+t.value}},[e._v(\"\\n                  \"+e._s(t.label)+\"\\n                \")])})),1)],1)],1)])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"售卖方式\",required:\"\"}},[a(\"a-checkbox-group\",{model:{value:e.packageData.sale_mode,callback:function(t){e.$set(e.packageData,\"sale_mode\",t)},expression:\"packageData.sale_mode\"}},e._l(e.sellTypeList,(function(t){return a(\"a-checkbox\",{key:t.value,attrs:{disabled:2===t.value,value:t.value}},[e._v(\"\\n              \"+e._s(t.label)+\"\\n            \")])})),1)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:22,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{\"validate-status\":\"error\",help:e.imageErrorText,label:\"封面\",required:\"\"}},[a(\"div\",{class:e.basic(\"upload\")},[a(\"st-image-upload\",{class:e.basic(\"st-upload\"),attrs:{cropperModal:e.cropperModal,sizeLimit:5,list:e.fileList},on:{change:e.fileChange}},[a(\"i\",{class:e.basic(\"st-upload-icon\")}),a(\"div\",{class:e.basic(\"st-upload-text\")},[e._v(\"上传封面\")])]),a(\"div\",{class:e.basic(\"upload-describe\")},[a(\"p\",[e._v(\"\\n                图片格式必须为:png,bmp,jpeg,jpg,gif,建议使用png格式图片,以保存最佳效果\\n              \")]),a(\"p\",[e._v(\"建议尺寸为750像素X422像素,不可大于2m\")])])],1)])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"课程包介绍\"}},[a(\"st-textarea\",{staticClass:\"page-content-card-textarea\",attrs:{maxlength:\"500\",placeholder:\"请输入课程包介绍\"},model:{value:e.packageData.intro,callback:function(t){e.$set(e.packageData,\"intro\",t)},expression:\"packageData.intro\"}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"备注\"}},[a(\"st-textarea\",{staticClass:\"page-content-card-textarea\",attrs:{maxlength:\"500\",placeholder:\"请输入备注\"},model:{value:e.packageData.remarks,callback:function(t){e.$set(e.packageData,\"remarks\",t)},expression:\"packageData.remarks\"}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\" \"}},[a(\"st-button\",{staticClass:\"mr-8\",attrs:{type:\"primary\",loading:e.addLoading.add},on:{click:e.save}},[e._v(\"\\n            保存\\n          \")]),a(\"st-button\",{attrs:{loading:e.addLoading.addAndOnsale},on:{click:e.onsale}},[e._v(\"\\n            保存并上架\\n          \")])],1)],1)],1)],1)],1)},i=[],r=(a(\"ac6a\"),a(\"c32d\")),o=a.n(r),n=a(\"97ed\"),c=a(\"5c8a\"),l=a(\"3997\"),u=a(\"3a59\"),p=a(\"73c0\"),d=a(\"a305\"),m=a(\"61dc\"),_=a(\"e98c\"),h=a(\"7ce1\"),g={name:\"ShopFixPackageAdd\",serviceInject:function(){return{addPackageService:m[\"AddFixPackageService\"]}},components:{StImageUpload:h[\"a\"],ReserveIsLimit:n[\"a\"]},rxState:function(){return{transferUnitList:this.addPackageService.transferUnitList$,sellTypeList:this.addPackageService.sellTypeList$,unitList:this.addPackageService.unitList$,addLoading:this.addPackageService.loading$,coachList:this.addPackageService.coachList$}},modals:{CourseSelectCourse:_[\"a\"]},bem:{add:\"page-shop-add-fix-package\",basic:\"page-shop-add-basic-package\"},data:function(){return{packageData:{course_name:\"\",price:void 0,is_team:0,team_range:[],is_personal:0,personal_range:[],start_time:\"\",end_time:\"\",valid_time:void 0,valid_time_unit:1,frozen_days:void 0,sale_mode:[2],is_allow_transfer:0,transfer_rate:void 0,transfer_unit:1,image:{image_id:null,image_key:\"\"},intro:\"\",remarks:\"\"},courseIsFirstInput:!0,teamCourseList:[],teamCourseTotalList:{},teamCourseListIsShow:!1,teamCourseTotalObject:{team_times:0,total:0},teamOperationObject:{team_times:void 0,team_unit_price:void 0},teamIndeterminate:!1,teamCheckAll:!1,personalCourseList:[],personalCourseTotalList:{},personalCoachListHistory:[],personalAllOperationCoachList:[],personalCourseTotalObject:{personal_times:0,total:0},personalOperationObject:{personal_times:void 0,personal_unit_price:void 0},personalCourseListIsShow:!1,personalIndeterminate:!1,personalCheckAll:!1,coachAllOperationDropdownIsShow:!1,courseIsNone:!1,courseErrorText:\"\",form:this.$form.createForm(this),start_time:null,end_time:null,endOpen:!1,imageIsNone:!1,imageErrorText:\"\",fileList:[],cropperModal:{},reserveIsLimitOptions:[{label:\"不限制\",value:0},{label:\"限制\",value:1}]}},methods:{save:function(){var e=this;this.course_validator(),this.image_validator(),this.form.validateFieldsAndScroll((function(t,a){t||e.courseIsNone||e.imageIsNone||(e.packageData.course_name=a.course_name,e.packageData.price=a.price,e.packageData.support_num=a.support_num,e.packageData.valid_time=a.valid_time,e.packageData.frozen_days=a.frozen_days,e.packageData.transfer_rate=e.packageData.is_allow_transfer?+a.transfer_rate:void 0,e.packageData.start_time=\"string\"===typeof e.start_time?e.start_time:\"\".concat(e.start_time.format(\"YYYY-MM-DD\")),e.packageData.reserve_is_limit=a.reserve_is_limit,e.packageData.reserve_limit_day=a.reserve_limit_day,e.packageData.reserve_limit_times=+a.reserve_limit_times,e.packageData.end_time=\"string\"===typeof e.end_time?e.end_time:\"\".concat(e.end_time.format(\"YYYY-MM-DD\")),e.packageData.team_range=[],e.teamCourseList.forEach((function(t){e.packageData.team_range.push({course_id:t.course_id,team_times:t.team_times,team_unit_price:t.team_unit_price})})),e.packageData.personal_range=[],e.personalCourseList.forEach((function(t){e.packageData.personal_range.push({course_id:t.course_id,personal_times:t.personal_times,personal_unit_price:t.personal_unit_price,coach_level:Object(c[\"a\"])(t.coachGradeList)})})),e.addPackageService.add(e.packageData).subscribe((function(t){e.$router.push({path:\"/shop/product/course/manage/package/list\"})})))}))},onsale:function(){var e=this;this.course_validator(),this.image_validator(),this.form.validateFieldsAndScroll((function(t,a){t||e.courseIsNone||e.imageIsNone||(e.packageData.course_name=a.course_name,e.packageData.price=a.price,e.packageData.support_num=a.support_num,e.packageData.valid_time=a.valid_time,e.packageData.frozen_days=a.frozen_days,e.packageData.transfer_rate=e.packageData.is_allow_transfer?+a.transfer_rate:void 0,e.packageData.start_time=\"\".concat(e.start_time.format(\"YYYY-MM-DD\")),e.packageData.end_time=\"\".concat(e.end_time.format(\"YYYY-MM-DD\")),e.teamCourseList.forEach((function(t){e.packageData.team_range.push({course_id:t.course_id,team_times:t.team_times,team_unit_price:t.team_unit_price})})),e.packageData.reserve_is_limit=a.reserve_is_limit,e.packageData.reserve_limit_day=a.reserve_limit_day,e.packageData.reserve_limit_times=+a.reserve_limit_times,e.personalCourseList.forEach((function(t){e.packageData.personal_range.push({course_id:t.course_id,personal_times:t.personal_times,personal_unit_price:t.personal_unit_price,coach_level:Object(c[\"a\"])(t.coachGradeList)})})),e.addPackageService.addAndOnsale(e.packageData).subscribe((function(t){e.$router.push({path:\"/shop/product/course/manage/package/list\"})})))}))},teamCheckboxChange:function(e){this.packageData.is_team=+e.target.checked,this.courseIsFirstInput=!1,this.teamCourseListIsShow=+e.target.checked},personalCheckboxChange:function(e){this.packageData.is_personal=+e.target.checked,this.courseIsFirstInput=!1,this.personalCourseListIsShow=+e.target.checked},teamCourseListShow:function(){this.teamCourseListIsShow=!this.teamCourseListIsShow},personalCourseListShow:function(){this.personalCourseListIsShow=!this.personalCourseListIsShow},times_operation_ok:function(e){var t=this;\"team\"===e?Object(l[\"a\"])(this.teamCourseList,(function(e){e.courseChecked&&(e.team_times=+t.teamOperationObject.team_times,t.teamCourseTotalList[e.course_id]=t.teamCourseTotalList[e.course_id]?t.teamCourseTotalList[e.course_id]:{},t.teamCourseTotalList[e.course_id].team_times=+t.teamOperationObject.team_times)})):\"personal\"===e&&Object(l[\"a\"])(this.personalCourseList,(function(e){e.courseChecked&&(e.personal_times=+t.personalOperationObject.personal_times,t.personalCourseTotalList[e.course_id]=t.personalCourseTotalList[e.course_id]?t.personalCourseTotalList[e.course_id]:{},t.personalCourseTotalList[e.course_id].personal_times=+t.personalOperationObject.personal_times)}))},unit_price_operation_ok:function(e){var t=this;\"team\"===e?Object(l[\"a\"])(this.teamCourseList,(function(e){e.courseChecked&&(e.team_unit_price=+t.teamOperationObject.team_unit_price,t.teamCourseTotalList[e.course_id]=t.teamCourseTotalList[e.course_id]?t.teamCourseTotalList[e.course_id]:{},t.teamCourseTotalList[e.course_id].team_unit_price=+t.teamOperationObject.team_unit_price)})):\"personal\"===e&&Object(l[\"a\"])(this.personalCourseList,(function(e){e.courseChecked&&(e.personal_unit_price=+t.personalOperationObject.personal_unit_price,t.personalCourseTotalList[e.course_id]=t.personalCourseTotalList[e.course_id]?t.personalCourseTotalList[e.course_id]:{},t.personalCourseTotalList[e.course_id].personal_unit_price=+t.personalOperationObject.personal_unit_price)}))},teamInputChange:function(e,t,a){this.teamCourseTotalList[a]=this.teamCourseTotalList[a]?this.teamCourseTotalList[a]:{},this.teamCourseTotalList[a][t]=e},personalInputChange:function(e,t,a){this.personalCourseTotalList[a]=this.personalCourseTotalList[a]?this.personalCourseTotalList[a]:{},this.personalCourseTotalList[a][t]=e},addCourse:function(e){var t=this;\"team\"===e?this.$modalRouter.push({name:\"course-select-course\",props:{type:e,courses:this.teamCourseList,use_range:1,isLimit:!0},on:{ok:function(e){e.list.forEach((function(e){e.courseChecked=!1,e.team_times=null,e.team_unit_price=null})),Object(l[\"a\"])(t.teamCourseTotalList,(function(a,s){Object(l[\"a\"])(e.list,(function(e){+e.course_id===+s&&(e.team_times=a.team_times,e.team_unit_price=a.team_unit_price)})),e.list.some((function(e){return+e.course_id===+s}))||delete t.teamCourseTotalList[s]})),t.teamCourseList=Object(c[\"a\"])(e.list)}}}):\"personal\"===e&&this.$modalRouter.push({name:\"course-select-course\",props:{type:e,courses:this.personalCourseList,use_range:1,isLimit:!0},on:{ok:function(e){var a=[];Object(l[\"a\"])(t.coachList,(function(e){a.push(e.id)})),e.list.forEach((function(e){e.courseChecked=!1,e.coachGradeList=a,e.personal_times=null,e.personal_unit_price=null})),Object(l[\"a\"])(t.personalCourseTotalList,(function(s,i){Object(l[\"a\"])(e.list,(function(e){+e.course_id===+i&&(e.coachGradeList=Object(c[\"a\"])(s.list?s.list:a),e.personal_times=s.personal_times,e.personal_unit_price=s.personal_unit_price)})),e.list.some((function(e){return+e.course_id===+i}))||delete t.personalCourseTotalList[i]})),t.personalCoachListHistory=[],e.list.forEach((function(e){t.personalCoachListHistory.push(e.coachGradeList)})),t.personalCourseList=Object(c[\"a\"])(e.list)}}})},removeCourseItem:function(e,t){if(\"team\"===e){var a=Object(c[\"a\"])(this.teamCourseList);Object(u[\"a\"])(a,(function(e){return e.course_id===t})),this.teamCourseList=a;var s=Object(c[\"a\"])(this.teamCourseTotalList);delete s[t],this.teamCourseTotalList=s}else if(\"personal\"===e){var i=Object(c[\"a\"])(this.personalCourseList);Object(u[\"a\"])(i,(function(e){return e.course_id===t})),this.personalCourseList=i;var r=Object(c[\"a\"])(this.personalCourseTotalList);delete r[t],this.personalCourseTotalList=r}},removeCourseItems:function(e){if(\"team\"===e){var t=Object(c[\"a\"])(this.teamCourseList),a=Object(u[\"a\"])(t,(function(e){return e.courseChecked}));this.teamCourseList=t;var s=Object(c[\"a\"])(this.teamCourseTotalList);a.forEach((function(e){delete s[e.course_id]})),this.teamCourseTotalList=s}else if(\"personal\"===e){var i=Object(c[\"a\"])(this.personalCourseList),r=Object(u[\"a\"])(i,(function(e){return e.courseChecked}));this.personalCourseList=i;var o=Object(c[\"a\"])(this.personalCourseTotalList);r.forEach((function(e){delete o[e.course_id]})),this.personalCourseTotalList=o}},courseItemCheckedChange:function(e,t,a){\"team\"===t?this.teamCourseList[a].courseChecked=e.target.checked:\"personal\"===t&&(this.personalCourseList[a].courseChecked=e.target.checked)},checkAllChange:function(e){var t=this;\"team\"===e?this.teamCourseList.forEach((function(e){e.courseChecked=!t.teamCheckAll})):\"personal\"===e&&this.personalCourseList.forEach((function(e){e.courseChecked=!t.personalCheckAll}))},coachItemChange:function(e,t,a){e.length?(this.personalCoachListHistory[a]=Object(c[\"a\"])(e),this.personalCourseTotalList[t]=this.personalCourseTotalList[t]?this.personalCourseTotalList[t]:{},this.personalCourseTotalList[t].list=Object(c[\"a\"])(e)):this.personalCourseList[a].coachGradeList=this.personalCoachListHistory[a]},coachAllOperationOk:function(){var e=this;Object(l[\"a\"])(this.personalCourseList,(function(t){t.courseChecked&&(t.coachGradeList=Object(c[\"a\"])(e.personalAllOperationCoachList),e.personalCourseTotalList[t.course_id]=e.personalCourseTotalList[t.course_id]?e.personalCourseTotalList[t.course_id]:{},e.personalCourseTotalList[t.course_id].list=Object(c[\"a\"])(e.personalAllOperationCoachList))})),this.personalCoachListHistory=[],Object(l[\"a\"])(this.personalCourseList,(function(t){e.personalCoachListHistory.push(t.coachGradeList)})),this.personalAllOperationCoachList=[],this.coachAllOperationDropdownIsShow=!1},course_validator:function(){this.courseIsFirstInput=!1;var e=!1,t=!1;if(this.packageData.is_team){var a=!1;a=this.teamCourseList.every((function(e){var t=isNaN(+e.team_times)?0:+e.team_times,a=isNaN(+e.team_unit_price)?0:+e.team_unit_price;return t*a!==0})),e=a&&this.teamCourseList.length}else e=!0;if(this.packageData.is_personal){var s=!1;s=this.personalCourseList.every((function(e){var t=isNaN(+e.personal_times)?0:+e.personal_times,a=isNaN(+e.personal_unit_price)?0:+e.personal_unit_price;return t*a!==0})),t=s&&this.personalCourseList.length}else t=!0;e&&t&&(this.packageData.is_team||this.packageData.is_personal)?(this.courseIsNone=!1,this.courseErrorText=\"\"):(this.courseIsNone=!0,this.courseErrorText=\"请输入上课范围\")},image_validator:function(){\"\"!==this.packageData.image.image_key?(this.imageIsNone=!1,this.imageErrorText=\"\"):(this.imageIsNone=!0,this.imageErrorText=\"请上传封面\")},transfer:function(e){this.packageData.is_allow_transfer=+e.target.checked,this.packageData.transfer_rate=void 0,this.form.resetFields([\"transfer_rate\"])},fileChange:function(e){e.length?(this.packageData.image.image_id=e[0].image_id,this.packageData.image.image_key=e[0].image_key,this.imageIsNone=!1,this.imageErrorText=\"\"):(this.packageData.image.image_id=null,this.packageData.image.image_key=\"\",this.imageIsNone=!0,this.imageErrorText=\"请上传封面\")},transferUnitChange:function(){this.packageData.transfer_rate=void 0,this.form.setFieldsValue({transfer_rate:void 0})},start_time_validator:function(e,t,a){t?a():a(\"请选择开始售卖时间\")},end_time_validator:function(e,t,a){t?a():a(\"请选择结束售卖时间\")},start_time_change:function(e){this.start_time=Object(c[\"a\"])(e)},handleStartOpenChange:function(e){e||(this.endOpen=!0)},disabledStartDate:function(e){var t=this.end_time;if(!t)return e.valueOf()<o()().startOf(\"day\").valueOf();var a=t.valueOf()>o()().add(30,\"y\").valueOf()?o()(t).subtract(30,\"y\").valueOf():o()().startOf(\"day\").valueOf();return e.valueOf()<a||e.valueOf()>o()(t).valueOf()},end_time_change:function(e){this.end_time=Object(c[\"a\"])(e)},handleEndOpenChange:function(e){this.endOpen=e},disabledEndDate:function(e){var t=this.start_time;return t&&(e.valueOf()>=o()(t).add(30,\"y\").valueOf()||e.valueOf()<o()(t).valueOf())||e.valueOf()<o()().startOf(\"day\").valueOf()},moment:o.a},watch:{teamCourseList:{deep:!0,handler:function(e){var t=!1,a=!1;t=Object(p[\"a\"])(e,(function(e){return e.courseChecked})),a=Object(p[\"a\"])(e,(function(e){return!e.courseChecked})),this.teamIndeterminate=!t&&!a,this.teamCheckAll=!!e.length&&t,this.teamCourseTotalObject.team_times=Object(d[\"a\"])(e,(function(e,t){var a=isNaN(+t.team_times)?0:+t.team_times;return e+a}),0),this.teamCourseTotalObject.total=Object(d[\"a\"])(e,(function(e,t){var a=isNaN(+t.team_times)?0:+t.team_times,s=isNaN(+t.team_unit_price)?0:+t.team_unit_price;return e+a*(10*s)/10}),0)}},personalCourseList:{deep:!0,handler:function(e){var t=!1,a=!1;t=Object(p[\"a\"])(e,(function(e){return e.courseChecked})),a=Object(p[\"a\"])(e,(function(e){return!e.courseChecked})),this.personalIndeterminate=!t&&!a,this.personalCheckAll=!!e.length&&t,this.personalCourseTotalObject.personal_times=Object(d[\"a\"])(e,(function(e,t){var a=isNaN(+t.personal_times)?0:+t.personal_times;return e+a}),0),this.personalCourseTotalObject.total=Object(d[\"a\"])(e,(function(e,t){var a=isNaN(+t.personal_times)?0:+t.personal_times,s=isNaN(+t.personal_unit_price)?0:+t.personal_unit_price;return e+a*(10*s)/10}),0)}}},filters:{course_item_total:function(e,t){return+e&&+t?10*+t*+e/10:0}},computed:{all_total:function(){var e=this.packageData.is_team?this.teamCourseTotalObject.total:0,t=this.packageData.is_personal?this.personalCourseTotalObject.total:0;return e+t}}},f=g,v=a(\"2877\"),k=Object(v[\"a\"])(f,s,i,!1,null,null,null);t[\"default\"]=k.exports},\"222a\":function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"st-panel-layout\",{staticClass:\"page-shop-info-range-package\",class:e.basic()},[a(\"st-panel\",[a(\"div\",{class:e.basic(\"package-info\")},[a(\"div\",[a(\"h2\",{staticClass:\"title\"},[e._v(e._s(e.packageInfo.course_name))]),a(\"p\",{class:e.basic(\"price-date\")},[a(\"span\",{class:e.basic(\"price\")},[a(\"st-icon\",{staticClass:\"mg-r8\",attrs:{type:\"money\",color:\"#FFA900\"}}),a(\"span\",{staticClass:\"label\"},[e._v(\"售价：\")]),e._v(\"\\n            \"+e._s(e.packageInfo.price)+\"元\\n          \")],1),a(\"span\",{class:e.basic(\"date\")},[a(\"st-icon\",{staticClass:\"mg-r8\",attrs:{type:\"time\",color:\"#1EC7DD\"}}),a(\"span\",{staticClass:\"label\"},[e._v(\"售卖时间：\")]),e._v(\"\\n            \"+e._s(e.packageInfo.start_time)+\"~\"+e._s(e.packageInfo.end_time)+\"\\n          \")],1)]),a(\"st-info\",[a(\"st-info-item\",{attrs:{label:\"支持使用人数\"}},[e._v(\"\\n            \"+e._s(e.packageInfo.support_num)+\"\\n          \")])],1)],1),a(\"div\",{class:e.basic(\"image\")},[a(\"img\",{attrs:{src:e._f(\"imgFilter\")(e.packageInfo.image_url,{w:280,h:158}),width:\"280\",height:\"158\",alt:\"封面\"}})])])]),a(\"st-panel\",{staticClass:\"mg-t16\",attrs:{app:\"\"}},[a(\"st-info\",[a(\"st-info-item\",{staticClass:\"mg-b8\",attrs:{label:\"上课范围\"}}),a(\"div\",{staticClass:\"mg-b24\",class:e.info(\"course\")},[a(\"st-form-table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"10%\"}}),a(\"col\",{staticStyle:{width:\"21%\"}}),a(\"col\",{staticStyle:{width:\"27%\"}}),a(\"col\",{staticStyle:{width:\"20%\"}}),a(\"col\",{staticStyle:{width:\"17%\"}})]),a(\"tr\",{staticClass:\"bg-thead table-header\"},[a(\"th\"),a(\"th\",{staticClass:\"rightline\"},[e._v(\"课程类型\")]),e.packageInfo.is_limit?a(\"th\",{staticClass:\"pl-56\"},[e._v(\"节数（节）\")]):e._e(),a(\"th\",[e._v(\"课时费(元)\")]),e.packageInfo.is_limit?a(\"th\",{attrs:{colspan:\"2\"}},[e._v(\"总价(元)\")]):e._e(),a(\"th\")]),a(\"tbody\",[e.packageInfo.is_team?a(\"tr\",{staticClass:\"bg-row-odd checkbox\"},[a(\"td\",{staticClass:\"tg-c\"}),a(\"td\",{staticClass:\"rightline\"},[e._v(\"团体课程\")]),e.packageInfo.is_limit?a(\"td\",{staticClass:\"pr-32 pl-56\"},[e._v(\"\\n                \"+e._s(e.packageInfo.team_times)+\"\\n              \")]):e._e(),a(\"td\",{staticClass:\"pr-148\"},[e._v(e._s(e.packageInfo.team_unit_price))]),e.packageInfo.is_limit?a(\"td\",[e._v(\"\\n                \"+e._s(e.packageInfo.team_times*e.packageInfo.team_unit_price)+\"\\n              \")]):e._e(),a(\"td\",{staticClass:\"overflow-hidden set-course-button\"},[e._v(\"\\n                可预约\"+e._s(e.packageInfo.team_range.length)+\"种课程\\n              \")])]):e._e(),e.packageInfo.is_team?a(\"tr\",{staticClass:\"bg-row-odd team-course-list-content\"},[a(\"td\",{staticClass:\"rightline\",attrs:{colspan:\"2\"}}),a(\"td\",{staticClass:\"team-course-table\",attrs:{colspan:\"4\"}},[a(\"div\",{class:e.info(\"team-course-table\")},[a(\"table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"41%\"}}),a(\"col\",{staticStyle:{width:\"54%\"}})]),a(\"tr\",{staticClass:\"bg-thead th border-bottom\"},[a(\"th\"),a(\"th\",[e._v(\"课程名称\")]),a(\"th\",[e._v(\"上课门店\")])]),a(\"tbody\",[a(\"tr\",[a(\"td\",{attrs:{colspan:\"3\"}},[a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"teamCourseList2\"],expression:\"['teamCourseList2']\"}],staticClass:\"team-course-content-table\"},e._l(e.packageInfo.team_range,(function(t,s){return a(\"li\",{key:t.course_id,staticClass:\"checkbox\",class:{\"border-bottom\":s+1!==e.packageInfo.team_range.length,\"bg-row-odd\":s%2===0,\"bg-row-even\":s%2!==0}},[a(\"div\",{staticClass:\"tg-c\"}),a(\"div\",[e._v(e._s(t.course_name))]),a(\"div\",[a(\"st-overflow-text\",{attrs:{\"max-width\":\"260px\",value:t.shop_name}})],1)])})),0)])])])])])])]):e._e(),e.packageInfo.is_personal?a(\"tr\",{staticClass:\"bg-row-even checkbox topline\"},[a(\"td\",{staticClass:\"tg-c\"}),a(\"td\",{staticClass:\"rightline\"},[e._v(\"私教课程\")]),e.packageInfo.is_limit?a(\"td\",{staticClass:\"pr-32 pl-56\"},[e._v(\"\\n                \"+e._s(e.packageInfo.personal_times)+\"\\n              \")]):e._e(),a(\"td\",{staticClass:\"pr-148\"},[e._v(e._s(e.packageInfo.personal_unit_price))]),e.packageInfo.is_limit?a(\"td\",[e._v(\"\\n                \"+e._s(e.packageInfo.personal_times*e.packageInfo.personal_unit_price)+\"\\n              \")]):e._e(),a(\"td\",{staticClass:\"overflow-hidden set-course-button\"},[e._v(\"\\n                可预约\"+e._s(e.packageInfo.personal_range.length)+\"种课程\\n              \")])]):e._e(),e.packageInfo.is_personal?a(\"tr\",{staticClass:\"bg-row-even personal-course-list-content\"},[a(\"td\",{staticClass:\"rightline\",attrs:{colspan:\"2\"}}),a(\"td\",{staticClass:\"personal-course-table\",attrs:{colspan:\"4\"}},[a(\"div\",{class:e.info(\"personal-course-table\")},[a(\"table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"30%\"}}),a(\"col\",{staticStyle:{width:\"30%\"}}),a(\"col\",{staticStyle:{width:\"35%\"}})]),a(\"tr\",{staticClass:\"bg-thead th border-bottom\"},[a(\"th\"),a(\"th\",[e._v(\"课程名称\")]),a(\"th\",[e._v(\"上课门店\")]),a(\"th\",[e._v(\"支持预约的\"+e._s(e.$c(\"coach\"))+\"等级\")])]),a(\"tbody\",[a(\"tr\",[a(\"td\",{attrs:{colspan:\"5\"}},[a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseList1\"],expression:\"['personalCourseList1']\"}],staticClass:\"personal-course-content-table\"},e._l(e.packageInfo.personal_range,(function(t,s){return a(\"li\",{key:t.course_id,staticClass:\"checkbox\",class:{\"border-bottom\":s+1!==e.packageInfo.personal_range.length,\"bg-row-odd\":s%2===0,\"bg-row-even\":s%2!==0}},[a(\"div\",{staticClass:\"tg-c\"}),a(\"div\",[a(\"st-overflow-text\",{attrs:{\"max-width\":\"160px\",value:t.course_name}})],1),a(\"div\",[a(\"st-overflow-text\",{attrs:{\"max-width\":\"260px\",value:t.shop_name}})],1),a(\"div\",[a(\"st-overflow-text\",{attrs:{\"max-width\":\"260px\",value:t.coach_level_text}})],1)])})),0)])])])])])])]):e._e()])])],1),a(\"st-info-item\",{staticClass:\"mg-b24\",attrs:{label:\"有效时间\"}},[e._v(\"\\n        购买后\"+e._s(e.packageInfo.valid_time)+e._s(e._f(\"enumFilter\")(e.packageInfo.valid_time_unit,\"package_course.valid_time_unit\"))+\"有效\\n      \")]),a(\"st-info-item\",{staticClass:\"mg-b24\",attrs:{label:\"允许冻结天数\"}},[e._v(\"\\n        \"+e._s(e.packageInfo.frozen_days)+\"天\\n      \")]),a(\"st-info-item\",{staticClass:\"mg-b24\",attrs:{label:\"转让设置\"}},[e._v(\"\\n        \"+e._s(e.transferText)+\"\\n      \")]),a(\"st-info-item\",{staticClass:\"mg-b24\",attrs:{label:\"售卖方式\"}},e._l(e.packageInfo.sale_mode,(function(t,s){return a(\"span\",{key:s},[s>0?a(\"i\",[e._v(\"/\")]):e._e(),e._v(\"\\n          \"+e._s(e._f(\"enumFilter\")(t,\"package_course.sale_mode\"))+\"\\n        \")])})),0),a(\"st-info-item\",{staticClass:\"mg-b8\",attrs:{label:\"课程介绍\"}},[a(\"p\",{domProps:{innerHTML:e._s(e.packageInfo.intro)}})]),a(\"st-info-item\",{staticClass:\"mg-b8\",attrs:{label:\"备注\"}},[a(\"p\",{class:e.basic(\"remarks\")},[e._v(e._s(e.packageInfo.remarks||\"无\"))])])],1)],1)],1)},i=[],r=a(\"e81a\"),o={name:\"ShopRangePackageInfo\",serviceInject:function(){return{infoRangePackageService:r[\"InfoRangePackageService\"]}},rxState:function(){return{packageInfo:this.infoRangePackageService.packageInfo$}},bem:{basic:\"page-shop-info-basic-package\",info:\"page-shop-info-range-package\"},computed:{transferText:function(){return this.packageInfo.is_allow_transfer?\"支持转让\":\"不支持转让\"}}},n=o,c=a(\"2877\"),l=Object(c[\"a\"])(n,s,i,!1,null,null,null);t[\"default\"]=l.exports},\"2f18\":function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"st-panel\",{class:e.listClass(),attrs:{app:\"\"}},[a(\"div\",{attrs:{slot:\"title\"},slot:\"title\"},[a(\"st-input-search\",{attrs:{placeholder:\"课程包名称\"},on:{search:function(t){return e.onSingleSearch(\"course_name\",t,!0)}},model:{value:e.$searchQuery.course_name,callback:function(t){e.$set(e.$searchQuery,\"course_name\",t)},expression:\"$searchQuery.course_name\"}})],1),a(\"div\",{class:e.listClass(\"operation\")},[a(\"router-link\",{attrs:{to:\"./add-select\"}},[e.auth.add?a(\"st-button\",{attrs:{type:\"primary\",icon:\"add\"},on:{click:e.onAddPackage}},[e._v(\"\\n        新增门店课程包\\n      \")]):e._e()],1),a(\"div\",{class:e.listClass(\"select-group\")},[a(\"a-select\",{staticClass:\"mg-r16\",staticStyle:{width:\"160px\"},attrs:{options:e.supportNum$},on:{change:function(t){return e.onSingleSearch(\"support_num\",t)}},model:{value:e.$searchQuery.support_num,callback:function(t){e.$set(e.$searchQuery,\"support_num\",t)},expression:\"$searchQuery.support_num\"}}),a(\"a-select\",{class:e.listClass(\"select\"),staticStyle:{width:\"160px\"},on:{change:function(t){return e.onSingleSearch(\"package_type\",t)}},model:{value:e.$searchQuery.package_type,callback:function(t){e.$set(e.$searchQuery,\"package_type\",t)},expression:\"$searchQuery.package_type\"}},[a(\"a-select-option\",{attrs:{value:-1}},[e._v(\"全部分类\")]),e._l(e.package_types,(function(t,s){return a(\"a-select-option\",{key:s,attrs:{value:+t.value}},[e._v(\"\\n          \"+e._s(t.label)+\"\\n        \")])}))],2),a(\"a-select\",{staticClass:\"mg-l16\",class:e.listClass(\"select\"),staticStyle:{width:\"160px\"},attrs:{options:e.publicChannel$},on:{change:function(t){return e.onSingleSearch(\"publish_channel\",t)}},model:{value:e.$searchQuery.publish_channel,callback:function(t){e.$set(e.$searchQuery,\"publish_channel\",t)},expression:\"$searchQuery.publish_channel\"}}),a(\"a-select\",{class:e.listClass(\"select\"),staticStyle:{width:\"160px\"},on:{change:function(t){return e.onSingleSearch(\"shelf_status\",t)}},model:{value:e.$searchQuery.shelf_status,callback:function(t){e.$set(e.$searchQuery,\"shelf_status\",t)},expression:\"$searchQuery.shelf_status\"}},[a(\"a-select-option\",{attrs:{value:-1}},[e._v(\"全部状态\")]),e._l(e.shelf_status,(function(t,s){return a(\"a-select-option\",{key:s,attrs:{value:+t.value}},[e._v(\"\\n          \"+e._s(t.label)+\"\\n        \")])}))],2)],1)],1),a(\"st-table\",{attrs:{page:e.page,columns:e.columns,rowKey:\"package_course_id\",dataSource:e.list,loading:e.loading.getList},on:{change:e.onTableChange},scopedSlots:e._u([{key:\"package_type\",fn:function(t){return[e._v(\"\\n      \"+e._s(e._f(\"enumFilter\")(t,\"package_course.package_type\"))+\"\\n    \")]}},{key:\"valid_time\",fn:function(t,a){return[e._v(\"\\n      \"+e._s(t)+\"\\n      \"+e._s(e._f(\"enumFilter\")(a.valid_time_unit,\"package_course.valid_time_unit\"))+\"\\n    \")]}},{key:\"shelf_status\",fn:function(t,s){return[a(\"st-text\",{attrs:{status:{success:1===s.shelf_status,error:2===s.shelf_status,warning:0===s.shelf_status}}},[e._v(\"\\n        \"+e._s(e._f(\"enumFilter\")(t,\"package_course.shelf_status\"))+\"\\n      \")]),2===s.shelf_status?[a(\"st-help-popover\",[a(\"span\",{attrs:{slot:\"content\"},slot:\"content\"},[e._v(e._s(s.reason))])])]:e._e()]}},{key:\"action\",fn:function(t,s){return a(\"div\",{},[a(\"st-table-actions\",[s.auth[\"shop:product:package_course|edit\"]?a(\"a\",{on:{click:function(t){return e.onEdit(s.package_course_id,s.package_type)}}},[e._v(\"\\n          编辑\\n        \")]):e._e(),s.auth[\"shop:product:package_course|get\"]?a(\"a\",{on:{click:function(t){return e.onDetail(s.package_course_id,s.package_type)}}},[e._v(\"\\n          详情\\n        \")]):e._e(),s.auth[\"shop:product:package_course|batch_operate\"]?a(\"a\",{on:{click:function(t){return e.batchOperate(s.package_course_id,s.course_name)}}},[e._v(\"\\n          应用至售出\\n        \")]):e._e(),s.auth[\"shop:product:package_course|up\"]?a(\"a\",{on:{click:function(t){return e.onsalePackage(s.package_course_id,s.course_name,s.start_time,s.end_time)}}},[e._v(\"\\n          上架\\n        \")]):e._e(),s.auth[\"shop:product:package_course|down\"]?a(\"a\",{on:{click:function(t){return e.offsalePackage(s.package_course_id,s.course_name)}}},[e._v(\"\\n          下架\\n        \")]):e._e(),s.auth[\"shop:product:package_course|del\"]?a(\"a\",{on:{click:function(t){return e.deletePackage(s.package_course_id,s.course_name)}}},[e._v(\"\\n          删除\\n        \")]):e._e(),s.auth[\"shop:product:package_course|delllls\"]?a(\"a\",{on:{click:function(t){return e.deletePackage(s.package_course_id,s.course_name)}}},[e._v(\"\\n          批量操作\\n        \")]):e._e()])],1)}}])}),a(\"st-modal\",{attrs:{title:\"上架课程包\",okText:\"确认上架\",confirmLoading:e.loading.onsalePackage,wrapClassName:\"modal-shop-product-course-package\"},on:{ok:e.onOnsale},model:{value:e.onsaleIsShow,callback:function(t){e.onsaleIsShow=t},expression:\"onsaleIsShow\"}},[a(\"st-form\",{attrs:{form:e.form,labelWidth:\"96px\"}},[a(\"st-form-item\",{attrs:{label:\"课程包名称\"}},[e._v(e._s(e.packageName))]),a(\"st-form-item\",{staticClass:\"mg-b0\",attrs:{label:\"支持售卖时间\",required:\"\"}},[a(\"div\",{class:e.listClass(\"saletime\")},[a(\"a-form-item\",{staticClass:\"page-a-form\"},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.start_time,expression:\"decorators.start_time\"}],staticStyle:{width:\"100%\"},attrs:{disabledDate:e.disabledStartDate,format:\"YYYY-MM-DD\",placeholder:\"开始时间\",showToday:!1},on:{openChange:e.handleStartOpenChange,change:e.start_time_change}})],1),a(\"span\",[e._v(\"~\")]),a(\"a-form-item\",{staticClass:\"page-a-form\"},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.end_time,expression:\"decorators.end_time\"}],attrs:{disabledDate:e.disabledEndDate,format:\"YYYY-MM-DD\",placeholder:\"结束时间\",showToday:!1,open:e.endOpen},on:{openChange:e.handleEndOpenChange,change:e.end_time_change}})],1)],1)])],1)],1),a(\"st-modal\",{attrs:{title:\"下架课程包\",size:\"small\",okText:\"确认下架\",wrapClassName:\"modal-shop-product-course-package\",confirmLoading:e.loading.offsalePackage},on:{ok:e.onOffsale},model:{value:e.offsaleIsShow,callback:function(t){e.offsaleIsShow=t},expression:\"offsaleIsShow\"}},[a(\"st-form\",{attrs:{form:e.form,labelWidth:\"96px\"}},[a(\"st-form-item\",{attrs:{label:\"课程包名称\"}},[e._v(e._s(e.packageName))]),a(\"st-form-item\",{attrs:{label:\"下架原因\",required:\"\"}},[a(\"st-textarea\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.reason,expression:\"decorators.reason\"}]})],1)],1)],1),a(\"st-modal\",{attrs:{title:\"删除课程包\",size:\"small\",okText:\"确认删除\",wrapClassName:\"modal-shop-product-course-package\",confirmLoading:e.loading.deletePackage},on:{ok:e.onDelete},model:{value:e.deleteIsShow,callback:function(t){e.deleteIsShow=t},expression:\"deleteIsShow\"}},[e._v(\"\\n    删除后不影响已购买的用户，一旦删除则无法恢复，确认删除\"+e._s(e.packageName)+\"？\\n  \")])],1)},i=[],r=(a(\"8e6e\"),a(\"ac6a\"),a(\"456d\"),a(\"bd86\")),o=(a(\"a481\"),a(\"c32d\")),n=a.n(o),c=a(\"5c8a\"),l=a(\"09fc\"),u=a(\"2138\"),p=a(\"ea3e\"),d=function(){return[{title:\"课程包名称\",dataIndex:\"course_name\"},{title:\"课程包分类\",dataIndex:\"package_type\",scopedSlots:{customRender:\"package_type\"}},{title:\"节数\",dataIndex:\"total_times\",sorter:!0,scopedSlots:{customRender:\"total_times\"}},{title:\"有效期\",dataIndex:\"valid_time\",scopedSlots:{customRender:\"valid_time\"}},{title:\"支持人数\",dataIndex:\"support_num\"},{title:\"发布渠道\",dataIndex:\"channelName\",align:\"center\",scopedSlots:{customRender:\"channelName\"}},{title:\"支持售卖时间\",dataIndex:\"sale_time\",scopedSlots:{customRender:\"sale_time\"}},{title:\"售卖价格(元)\",dataIndex:\"price\",sorter:!0,scopedSlots:{customRender:\"price\"}},{title:\"状态\",dataIndex:\"shelf_status\",width:100,scopedSlots:{customRender:\"shelf_status\"}},{title:\"操作\",dataIndex:\"action\",width:140,scopedSlots:{customRender:\"action\"}}]},m=function(e){return{reason:{rules:[{validator:function(e,t,a){if(!t)return\"请输入下架原因\"}}]},start_time:{rules:[{validator:function(t,a,s){return a?a.valueOf()<e.moment(e.moment().format().replace(/\\d{2}:\\d{2}:\\d{2}/,\"00:00:00\")).valueOf()?\"支持售卖时间已过，请重新设置\":void 0:\"请选择开始售卖时间\"}}]},end_time:{rules:[{validator:function(t,a,s){return a?a.valueOf()<e.moment(e.moment().format().replace(/\\d{2}:\\d{2}:\\d{2}/,\"23:59:59\")).valueOf()?\"支持售卖时间已过，请重新设置\":void 0:\"请选择结束售卖时间\"}}]}}},_=a(\"c871\"),h=a(\"e69b\");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){Object(r[\"a\"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={name:\"ShopPackageList\",mixins:[p[\"a\"]],serviceInject:function(){return{userService:u[\"a\"],messageService:h[\"a\"],listService:l[\"ListService\"]}},modals:{Synchronize:_[\"a\"]},rxState:function(){return{publicChannel$:this.listService.publicChannel$,supportNum$:this.listService.supportNum$,list:this.listService.list$,page:this.listService.page$,loading:this.listService.loading$,package_types:this.userService.getOptions$(\"package_course.package_type\"),shelf_status:this.userService.getOptions$(\"package_course.shelf_status\"),auth:this.listService.auth$}},bem:{listClass:\"page-shop-package-list\"},data:function(){var e=this.$stForm.create(),t=e.decorators(m);return{form:e,decorators:t,offsaleIsShow:!1,deleteIsShow:!1,onsaleIsShow:!1,packageId:\"\",packageName:\"\",start_time:null,end_time:null,endOpen:!1,offSaleText:\"\",type:[\"\",\"unlimit\",\"range\",\"fix\"]}},computed:{columns:d},methods:{start_time_change:function(e){this.start_time=Object(c[\"a\"])(e)},handleStartOpenChange:function(e){e||(this.endOpen=!0)},disabledStartDate:function(e){var t=this.end_time;if(!t)return e.valueOf()<n()().subtract(1,\"d\").valueOf();var a=t.valueOf()>n()().add(30,\"y\").valueOf()?n()(t).subtract(30,\"y\").valueOf():n()().subtract(1,\"d\").add(1,\"ms\").valueOf();return e.valueOf()<a||e.valueOf()>n()(t).subtract(1,\"d\").valueOf()},end_time_change:function(e){this.end_time=Object(c[\"a\"])(e)},handleEndOpenChange:function(e){this.endOpen=e},disabledEndDate:function(e){var t=this.start_time;return t?e.valueOf()>=n()(t).add(30,\"y\").valueOf()||e.valueOf()<n()(t).add(1,\"d\").valueOf():e.valueOf()>=n()().add(30,\"y\").valueOf()||e.valueOf()<=n()().valueOf()},moment:n.a,onAddPackage:function(){},onEdit:function(e,t){this.$router.push({path:\"/shop/product/course/manage/package/edit-\".concat(this.type[t],\"-package\"),query:{id:e}})},onDetail:function(e,t){this.$router.push({path:\"/shop/product/course/manage/package/info-\".concat(this.type[t],\"-package\"),query:{id:e}})},batchOperate:function(e){var t=this;this.$modalRouter.push({name:\"Synchronize\",on:{success:function(){t.$confirm({title:\"提示\",content:\"请再次确认是否同步，同步后会覆盖售出课程包，将会有2～5s无法正常使用\",onOk:function(){t.listService.setSyncSold(e).subscribe((function(e){t.$modalRouter.push({name:\"success-tip\"}),t.$router.reload()}))},onCancel:function(){}})}}})},onsalePackage:function(e,t,a,s){var i=this;1e3*s>=n()(n()().format().replace(/\\d{2}:\\d{2}:\\d{2}/,\"23:59:59\")).valueOf()?this.listService.onsalePackage({id:e,start_time:\"\".concat(this.moment(1e3*a).format(\"YYYY-MM-DD\"),\" 00:00:00\"),end_time:\"\".concat(this.moment(1e3*s).format(\"YYYY-MM-DD\"),\" 23:59:59\")}).subscribe((function(e){i.messageService.success({content:\"上架成功\"}),i.$router.push({query:f({},i.$searchQuery,{page:1})})})):(this.onsaleIsShow=!0,this.packageId=e,this.packageName=t,this.$nextTick().then((function(e){i.form.setFieldsValue({start_time:n()(1e3*a),end_time:n()(1e3*s)}),i.form.validate([\"start_time\",\"end_time\"])})))},onOnsale:function(){var e=this;this.form.validate([\"start_time\",\"end_time\"]).then((function(t){e.listService.onsalePackage({id:e.packageId,start_time:\"\".concat(t.start_time.format(\"YYYY-MM-DD\"),\" 00:00:00\"),end_time:\"\".concat(t.end_time.format(\"YYYY-MM-DD\"),\" 23:59:59\")}).subscribe((function(t){e.onsaleIsShow=!1,e.packageId=\"\",e.packageName=\"\",e.messageService.success({content:\"上架成功\"}),e.$router.push({query:f({},e.$searchQuery,{page:1})})}))}))},offsalePackage:function(e,t){this.offsaleIsShow=!0,this.packageId=e,this.packageName=t},onOffsale:function(){var e=this;this.form.validate().then((function(t){e.listService.offsalePackage(f({id:\"\".concat(e.packageId)},t)).subscribe((function(){e.offsaleIsShow=!1,e.packageId=\"\",e.packageName=\"\",e.form.setFieldsValue({reason:\"\"}),e.messageService.success({content:\"下架成功\"}),e.$router.push({query:f({},e.$searchQuery,{page:1})})}))}))},deletePackage:function(e,t){this.deleteIsShow=!0,this.packageId=e,this.packageName=t},onDelete:function(){var e=this;this.listService.deletePackage(\"\".concat(this.packageId)).subscribe((function(){e.deleteIsShow=!1,e.packageId=\"\",e.packageName=\"\",e.onSearch()}))}}},k=v,b=a(\"2877\"),C=Object(b[\"a\"])(k,s,i,!1,null,null,null);t[\"default\"]=C.exports},3457:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"st-panel\",{staticClass:\"page-shop-add-unlimit-package\",class:e.basic(),attrs:{app:\"\"}},[a(\"st-form\",{attrs:{form:e.form,labelWidth:\"96px\"}},[a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"课程包名称\",required:\"\"}},[e._v(\"\\n          \"+e._s(e.packageInfo.course_name)+\"\\n        \")])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:8,xs:11,offset:1}},[a(\"div\",{class:e.basic(\"user-num\")},[a(\"st-form-item\",{attrs:{label:\"支持使用人数\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"support_num\",{rules:[{required:!0,message:\"请输入支持使用人数\"}]}],expression:\"[\\n                'support_num',\\n                {\\n                  rules: [{ required: true, message: '请输入支持使用人数' }]\\n                }\\n              ]\"}],staticStyle:{width:\"110px\"},attrs:{min:1,max:20,placeholder:\"请输入支持使用人数\"}})],1),a(\"span\",{staticClass:\"mg-l8\"},[e._v(\"限定20人\")])],1)])],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:18,xs:22,offset:1}},[a(\"st-form-item\",{class:{\"st-has-error\":!e.courseIsFirstInput&&e.courseIsNone},attrs:{help:e.courseErrorText,required:\"\"}},[a(\"template\",{slot:\"label\"},[e._v(\"\\n            上课范围\\n            \"),a(\"st-help-tooltip\",{attrs:{id:\"TSCPCF001\"}})],1),a(\"div\",{class:e.add(\"course\")},[a(\"st-form-table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"8%\"}}),a(\"col\",{staticStyle:{width:\"16%\"}}),a(\"col\",{staticStyle:{width:\"27%\"}}),a(\"col\",{staticStyle:{width:\"28%\"}}),a(\"col\",{staticStyle:{width:\"21%\"}})]),a(\"tr\",{staticClass:\"bg-thead table-header\"},[a(\"th\"),a(\"th\",[e._v(\"课程类型\")]),a(\"th\",[e._v(\"节数\")]),a(\"th\",[e._v(\"课时费\")]),a(\"th\",[e._v(\"小计\")])]),a(\"tbody\",[a(\"tr\",{staticClass:\"bg-row-team\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{defaultChecked:!!e.packageInfo.is_team},on:{change:e.teamCheckboxChange}})],1),a(\"td\",[e._v(\"团体课程\")]),a(\"td\",{staticClass:\"pr-32\"},[a(\"st-input-number\",{attrs:{min:1,max:99999,disabled:0===e.packageData.is_team},on:{change:function(t){e.courseIsFirstInput=!1}},model:{value:e.packageData.team_times,callback:function(t){e.$set(e.packageData,\"team_times\",t)},expression:\"packageData.team_times\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                        节\\n                      \")])],2)],1),a(\"td\",{staticClass:\"pr-32\"},[a(\"st-input-number\",{attrs:{min:0,max:99999.9,float:!0,disabled:0===e.packageData.is_team},on:{change:function(t){e.courseIsFirstInput=!1}},model:{value:e.packageData.team_unit_price,callback:function(t){e.$set(e.packageData,\"team_unit_price\",t)},expression:\"packageData.team_unit_price\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                        元\\n                      \")])],2)],1),a(\"td\",[e._v(e._s(e.team_total))])]),a(\"tr\",{staticClass:\"bg-row-personal\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{defaultChecked:!!e.packageInfo.is_personal},on:{change:e.personalCheckboxChange}})],1),a(\"td\",[e._v(\"私教课程\")]),a(\"td\",{staticClass:\"pr-32\"},[a(\"st-input-number\",{attrs:{min:1,max:99999,disabled:0===e.packageData.is_personal},on:{change:function(t){e.courseIsFirstInput=!1}},model:{value:e.packageData.personal_times,callback:function(t){e.$set(e.packageData,\"personal_times\",t)},expression:\"packageData.personal_times\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                        节\\n                      \")])],2)],1),a(\"td\",{staticClass:\"pr-32\"},[a(\"st-input-number\",{attrs:{min:0,max:99999.9,float:!0,disabled:0===e.packageData.is_personal},on:{change:function(t){e.courseIsFirstInput=!1}},model:{value:e.packageData.personal_unit_price,callback:function(t){e.$set(e.packageData,\"personal_unit_price\",t)},expression:\"packageData.personal_unit_price\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                        元\\n                      \")])],2)],1),a(\"td\",[e._v(e._s(e.personal_total))])])])])],1)],2)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"总价\"}},[e._v(e._s(e.all_total)+\"元\")])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"售卖价格\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"price\",{rules:[{required:!0,message:\"请输入售卖价格\"}]}],expression:\"[\\n              'price',\\n              { rules: [{ required: true, message: '请输入售卖价格' }] }\\n            ]\"}],attrs:{placeholder:\"请输入售卖价格\",min:0,max:99999.9,float:!0}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n              元\\n            \")])],2)],1)],1)],1),a(\"reserve-is-limit\",{attrs:{form:e.form,reserveIsLimitInfo:e.reserveIsLimitInfo}}),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{staticClass:\"mg-b0\",attrs:{label:\"支持售卖时间\",required:\"\"}},[a(\"div\",{class:e.basic(\"saletime\")},[a(\"a-form-item\",{staticClass:\"page-a-form\"},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"start_time\",{rules:[{validator:e.start_time_validator}]}],expression:\"[\\n                  'start_time',\\n                  { rules: [{ validator: start_time_validator }] }\\n                ]\"}],staticStyle:{width:\"100%\"},attrs:{disabledDate:e.disabledStartDate,format:\"YYYY-MM-DD\",placeholder:\"开始时间\",showToday:!1},on:{openChange:e.handleStartOpenChange,change:e.start_time_change}})],1),a(\"span\",[e._v(\"~\")]),a(\"a-form-item\",{staticClass:\"page-a-form\"},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"end_time\",{rules:[{validator:e.end_time_validator}]}],expression:\"[\\n                  'end_time',\\n                  { rules: [{ validator: end_time_validator }] }\\n                ]\"}],attrs:{disabledDate:e.disabledEndDate,format:\"YYYY-MM-DD\",placeholder:\"结束时间\",showToday:!1,open:e.endOpen},on:{openChange:e.handleEndOpenChange,change:e.end_time_change}})],1)],1)])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"有效时间\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"valid_time\",{initialValue:null,rules:[{required:!0,message:\"请输入有效时间\"}]}],expression:\"[\\n              'valid_time',\\n              {\\n                initialValue: null,\\n                rules: [{ required: true, message: '请输入有效时间' }]\\n              }\\n            ]\"}],attrs:{placeholder:\"请输入有效时间\",min:1,max:99999}},[a(\"a-select\",{staticStyle:{width:\"60px\"},attrs:{slot:\"addonAfter\"},slot:\"addonAfter\",model:{value:e.packageData.valid_time_unit,callback:function(t){e.$set(e.packageData,\"valid_time_unit\",t)},expression:\"packageData.valid_time_unit\"}},e._l(e.unitList,(function(t,s){return a(\"a-select-option\",{key:s,attrs:{value:t.value}},[e._v(\"\\n                \"+e._s(t.label)+\"\\n              \")])})),1)],1)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"允许冻结天数\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"frozen_days\",{initialValue:null,rules:[{required:!0,message:\"请输入允许冻结天数\"}]}],expression:\"[\\n              'frozen_days',\\n              {\\n                initialValue: null,\\n                rules: [{ required: true, message: '请输入允许冻结天数' }]\\n              }\\n            ]\"}],attrs:{placeholder:\"请输入允许冻结天数\",min:1,max:99999}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n              天\\n            \")])],2)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"转让设置\"}},[a(\"div\",{class:e.basic(\"transfer\")},[a(\"a-checkbox\",{class:e.basic(\"transfer-checkbox\"),attrs:{defaultChecked:!!e.packageInfo.is_allow_transfer},on:{change:e.transfer}},[e._v(\"\\n              支持转让\\n            \")]),a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"transfer_rate\",{rules:[{initialValue:null,required:0!==e.packageData.is_allow_transfer,message:\"请输入转让值数值\"}]}],expression:\"[\\n                'transfer_rate',\\n                {\\n                  rules: [\\n                    {\\n                      initialValue: null,\\n                      required: packageData.is_allow_transfer !== 0,\\n                      message: '请输入转让值数值'\\n                    }\\n                  ]\\n                }\\n              ]\"}],class:e.basic(\"transfer-input\"),staticStyle:{\"padding-right\":\"0\"},attrs:{min:0,max:1===e.packageData.transfer_unit?100:99999.9,disabled:0===e.packageData.is_allow_transfer,float:2===e.packageData.transfer_unit}},[a(\"a-select\",{staticStyle:{width:\"60px\"},attrs:{slot:\"addonAfter\",disabled:0===e.packageData.is_allow_transfer},on:{change:e.transferUnitChange},slot:\"addonAfter\",model:{value:e.packageData.transfer_unit,callback:function(t){e.$set(e.packageData,\"transfer_unit\",t)},expression:\"packageData.transfer_unit\"}},e._l(e.transferUnitList,(function(t){return a(\"a-select-option\",{key:t.value,attrs:{value:+t.value}},[e._v(\"\\n                  \"+e._s(t.label)+\"\\n                \")])})),1)],1)],1)])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"售卖方式\",required:\"\"}},[a(\"a-checkbox-group\",{model:{value:e.packageData.sale_mode,callback:function(t){e.$set(e.packageData,\"sale_mode\",t)},expression:\"packageData.sale_mode\"}},e._l(e.sellTypeList,(function(t){return a(\"a-checkbox\",{key:t.value,attrs:{disabled:2===t.value,value:t.value}},[e._v(\"\\n              \"+e._s(t.label)+\"\\n            \")])})),1)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:22,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{\"validate-status\":\"error\",help:e.imageErrorText,label:\"封面\",required:\"\"}},[a(\"div\",{class:e.basic(\"upload\")},[a(\"st-image-upload\",{class:e.basic(\"st-upload\"),attrs:{cropperModal:e.cropperModal,sizeLimit:5,list:e.fileList},on:{change:e.fileChange}},[a(\"i\",{class:e.basic(\"st-upload-icon\")}),a(\"div\",{class:e.basic(\"st-upload-text\")},[e._v(\"上传封面\")])]),a(\"div\",{class:e.basic(\"upload-describe\")},[a(\"p\",[e._v(\"\\n                图片格式必须为:png,bmp,jpeg,jpg,gif,建议使用png格式图片,以保存最佳效果\\n              \")]),a(\"p\",[e._v(\"建议尺寸为750像素X422像素,不可大于2m\")])])],1)])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"课程包介绍\"}},[a(\"st-textarea\",{staticClass:\"page-content-card-textarea\",attrs:{maxlength:500,placeholder:\"请输入课程包介绍\"},model:{value:e.packageData.intro,callback:function(t){e.$set(e.packageData,\"intro\",t)},expression:\"packageData.intro\"}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"备注\"}},[a(\"st-textarea\",{staticClass:\"page-content-card-textarea\",attrs:{maxlength:500,placeholder:\"请输入备注\"},model:{value:e.packageData.remarks,callback:function(t){e.$set(e.packageData,\"remarks\",t)},expression:\"packageData.remarks\"}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\" \"}},[a(\"st-button\",{staticClass:\"mr-8\",attrs:{type:\"primary\",loading:e.editLoading.editPackage},on:{click:e.save}},[e._v(\"\\n            保存\\n          \")])],1)],1)],1)],1)],1)},i=[],r=a(\"c32d\"),o=a.n(r),n=a(\"5c8a\"),c=a(\"08fa\"),l=a(\"7ce1\"),u=a(\"97ed\"),p={name:\"ShopUnlimitPackageEdit\",serviceInject:function(){return{editPackageService:c[\"EditUnlimitPackageService\"]}},rxState:function(){return{transferUnitList:this.editPackageService.transferUnitList$,sellTypeList:this.editPackageService.sellTypeList$,unitList:this.editPackageService.unitList$,editLoading:this.editPackageService.loading$,packageInfo:this.editPackageService.packageInfo$}},components:{StImageUpload:l[\"a\"],ReserveIsLimit:u[\"a\"]},bem:{add:\"page-shop-add-unlimit-package\",basic:\"page-shop-add-basic-package\"},data:function(){return{packageData:{is_team:0,team_times:void 0,team_unit_price:void 0,is_personal:0,personal_times:void 0,personal_unit_price:void 0,price:void 0,start_time:\"\",end_time:\"\",valid_time:void 0,valid_time_unit:1,frozen_days:void 0,is_allow_transfer:0,transfer_rate:void 0,transfer_unit:1,sale_mode:[2],image:{image_id:null,image_key:\"\"},intro:\"\",remarks:\"\"},form:this.$form.createForm(this),start_time:null,end_time:null,endOpen:!1,courseIsFirstInput:!0,courseIsNone:!1,courseErrorText:\"\",imageIsNone:!1,imageErrorText:\"\",fileList:[],cropperModal:{},reserveIsLimitInfo:{}}},mounted:function(){this.init()},methods:{onChangeReserveIsliimt:function(e){this.reserveIsLimit=e.target.value},init:function(){this.packageInfo.is_allow_transfer||(this.packageInfo.transfer_rate=void 0),this.packageInfo.is_team||(this.packageInfo.team_times=void 0,this.packageInfo.team_unit_price=void 0),this.packageInfo.is_personal||(this.packageInfo.personal_times=void 0,this.packageInfo.personal_unit_price=void 0);var e=this.packageInfo,t=e.reserve_is_limit,a=e.reserve_limit_day,s=e.reserve_limit_times;this.reserveIsLimitInfo={reserve_is_limit:t,reserve_limit_day:a,reserve_limit_times:s},this.form.setFieldsValue({support_num:this.packageInfo.support_num,price:this.packageInfo.price,start_time:o()(this.packageInfo.start_time),end_time:o()(this.packageInfo.end_time),valid_time:this.packageInfo.valid_time,frozen_days:this.packageInfo.frozen_days,transfer_rate:this.packageInfo.transfer_rate}),this.packageData.is_team=this.packageInfo.is_team,this.packageData.team_times=this.packageInfo.team_times,this.packageData.team_unit_price=this.packageInfo.team_unit_price,this.packageData.is_personal=this.packageInfo.is_personal,this.packageData.personal_times=this.packageInfo.personal_times,this.packageData.personal_unit_price=this.packageInfo.personal_unit_price,this.start_time=o()(this.packageInfo.start_time),this.end_time=o()(this.packageInfo.end_time),this.packageData.valid_time_unit=this.packageInfo.valid_time_unit,this.packageData.is_allow_transfer=this.packageInfo.is_allow_transfer,this.packageData.transfer_unit=this.packageInfo.transfer_unit,this.packageData.sale_mode=this.packageInfo.sale_mode,this.fileList=[this.packageInfo.image],this.packageData.image.image_id=this.fileList[0].image_id,this.packageData.image.image_key=this.fileList[0].image_key,this.imageIsNone=!1,this.imageErrorText=\"\",this.packageData.intro=this.packageInfo.intro,this.packageData.remarks=this.packageInfo.remarks},save:function(){var e=this;this.course_validator(),this.image_validator(),this.form.validateFieldsAndScroll((function(t,a){t||e.courseIsNone||e.imageIsNone||(e.packageData.price=a.price,e.packageData.valid_time=a.valid_time,e.packageData.frozen_days=a.frozen_days,e.packageData.support_num=a.support_num,e.packageData.reserve_is_limit=a.reserve_is_limit,e.packageData.reserve_limit_day=a.reserve_limit_day,e.packageData.reserve_limit_times=+a.reserve_limit_times,e.packageData.transfer_rate=e.packageData.is_allow_transfer?+a.transfer_rate:void 0,e.packageData.start_time=\"string\"===typeof e.start_time?e.start_time:\"\".concat(e.start_time.format(\"YYYY-MM-DD\")),e.packageData.end_time=\"string\"===typeof e.end_time?e.end_time:\"\".concat(e.end_time.format(\"YYYY-MM-DD\")),e.packageData.album_id=e.packageInfo.album_id,e.packageData.team_unit_price=+e.packageData.team_unit_price,e.packageData.personal_unit_price=+e.packageData.personal_unit_price,e.editPackageService.editPackage(e.packageData).subscribe((function(t){e.$router.push({path:\"/shop/product/course/manage/package/list\"})})))}))},course_validator:function(){this.courseIsFirstInput=!1;var e=!this.packageData.is_team||!!this.team_total,t=!this.packageData.is_personal||!!this.personal_total;e&&t&&(this.packageData.is_team||this.packageData.is_personal)?(this.courseIsNone=!1,this.courseErrorText=\"\"):(this.courseIsNone=!0,this.courseErrorText=\"请输入上课范围\")},image_validator:function(){\"\"!==this.packageData.image.image_key?(this.imageIsNone=!1,this.imageErrorText=\"\"):(this.imageIsNone=!0,this.imageErrorText=\"请上传封面\")},teamCheckboxChange:function(e){this.packageData.is_team=+e.target.checked,this.courseIsFirstInput=!1},personalCheckboxChange:function(e){this.packageData.is_personal=+e.target.checked,this.courseIsFirstInput=!1},transfer:function(e){this.packageData.is_allow_transfer=+e.target.checked,this.packageData.transfer_rate=void 0,this.form.resetFields([\"transfer_rate\"])},fileChange:function(e){e.length?(this.packageData.image.image_id=e[0].image_id,this.packageData.image.image_key=e[0].image_key,this.imageIsNone=!1,this.imageErrorText=\"\"):(this.packageData.image.image_id=null,this.packageData.image.image_key=\"\",this.imageIsNone=!0,this.imageErrorText=\"请上传封面\")},transferUnitChange:function(){this.packageData.transfer_rate=void 0,this.form.setFieldsValue({transfer_rate:void 0})},start_time_validator:function(e,t,a){t?a():a(\"请选择开始售卖时间\")},end_time_validator:function(e,t,a){t?a():a(\"请选择结束售卖时间\")},start_time_change:function(e){this.start_time=Object(n[\"a\"])(e)},handleStartOpenChange:function(e){e||(this.endOpen=!0)},disabledStartDate:function(e){var t=this.end_time;if(!t)return e.valueOf()<o()().startOf(\"day\").valueOf();var a=t.valueOf()>o()().add(30,\"y\").valueOf()?o()(t).subtract(30,\"y\").valueOf():o()().startOf(\"day\").valueOf();return e.valueOf()<a||e.valueOf()>o()(t).valueOf()},end_time_change:function(e){this.end_time=Object(n[\"a\"])(e)},handleEndOpenChange:function(e){this.endOpen=e},disabledEndDate:function(e){var t=this.start_time;return t&&(e.valueOf()>=o()(t).add(30,\"y\").valueOf()||e.valueOf()<o()(t).valueOf())||e.valueOf()<o()().startOf(\"day\").valueOf()},moment:o.a},computed:{team_total:function(){return+this.packageData.team_times&&+this.packageData.team_unit_price?this.packageData.team_times*(10*this.packageData.team_unit_price)/10:0},personal_total:function(){return+this.packageData.personal_times&&+this.packageData.personal_unit_price?this.packageData.personal_times*(10*this.packageData.personal_unit_price)/10:0},all_total:function(){var e=this.packageData.is_team?this.team_total:0,t=this.packageData.is_personal?this.personal_total:0;return e+t}}},d=p,m=a(\"2877\"),_=Object(m[\"a\"])(d,s,i,!1,null,null,null);t[\"default\"]=_.exports},\"3e77\":function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"section\",{staticClass:\"page-shop-info-unlimit-package\",class:e.basic()},[a(\"st-panel\",[a(\"div\",{class:e.basic(\"package-info\")},[a(\"div\",[a(\"h2\",{staticClass:\"title\"},[e._v(e._s(e.packageInfo.course_name))]),a(\"p\",{class:e.basic(\"price-date\")},[a(\"span\",{class:e.basic(\"price\")},[a(\"st-icon\",{staticClass:\"mg-r8\",attrs:{type:\"money\",color:\"#FFA900\"}}),a(\"span\",{staticClass:\"label\"},[e._v(\"售价：\")]),e._v(\"\\n            \"+e._s(e.packageInfo.price)+\"元\\n          \")],1),a(\"span\",{class:e.basic(\"date\")},[a(\"st-icon\",{staticClass:\"mg-r8\",attrs:{type:\"time\",color:\"#1EC7DD\"}}),a(\"span\",{staticClass:\"label\"},[e._v(\"售卖时间：\")]),e._v(\"\\n            \"+e._s(e.packageInfo.start_time)+\"~\"+e._s(e.packageInfo.end_time)+\"\\n          \")],1)]),a(\"st-info\",[a(\"st-info-item\",{attrs:{label:\"支持使用人数\"}},[e._v(\"\\n            \"+e._s(e.packageInfo.support_num)+\"\\n          \")])],1)],1),a(\"div\",{class:e.basic(\"image\")},[a(\"img\",{attrs:{src:e._f(\"imgFilter\")(e.packageInfo.image_url,{w:280,h:158}),width:\"280\",height:\"158\",alt:\"封面\"}})])])]),a(\"st-panel\",{staticClass:\"mg-t16\"},[a(\"st-info\",[a(\"st-info-item\",{staticClass:\"mg-b8\",attrs:{label:\"上课范围\"}}),a(\"div\",{staticClass:\"mg-b24\",class:e.info(\"course\")},[a(\"st-form-table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"8%\"}}),a(\"col\",{staticStyle:{width:\"16%\"}}),a(\"col\",{staticStyle:{width:\"27%\"}}),a(\"col\",{staticStyle:{width:\"28%\"}}),a(\"col\",{staticStyle:{width:\"21%\"}})]),a(\"tr\",{staticClass:\"bg-thead br-b\"},[a(\"th\"),a(\"th\",{staticClass:\"pd-x16\"},[e._v(\"课程类型\")]),a(\"th\",{staticClass:\"pd-x16\"},[e._v(\"节数（节）\")]),a(\"th\",{staticClass:\"pd-x16\"},[e._v(\"课时费(元)\")]),a(\"th\",{staticClass:\"pd-x16\"},[e._v(\"合计(元)\")])]),a(\"tbody\",[e.packageInfo.is_team?a(\"tr\",{staticClass:\"bg-row-team br-b\"},[a(\"td\",{staticClass:\"tg-c\"}),a(\"td\",[e._v(\"团体课程\")]),a(\"td\",{staticClass:\"pr-32\"},[e._v(e._s(e.packageInfo.team_times))]),a(\"td\",{staticClass:\"pr-32\"},[e._v(e._s(e.packageInfo.team_unit_price))]),a(\"td\",[e._v(\"\\n                \"+e._s(e.packageInfo.team_times*e.packageInfo.team_unit_price)+\"\\n              \")])]):e._e(),e.packageInfo.is_personal?a(\"tr\",{staticClass:\"bg-row-personal br-b\"},[a(\"td\",{staticClass:\"tg-c\"}),a(\"td\",[e._v(\"私教课程\")]),a(\"td\",{staticClass:\"pr-32\"},[e._v(e._s(e.packageInfo.personal_times))]),a(\"td\",{staticClass:\"pr-32\"},[e._v(e._s(e.packageInfo.personal_unit_price))]),a(\"td\",[e._v(\"\\n                \"+e._s(e.packageInfo.personal_times*e.packageInfo.personal_unit_price)+\"\\n              \")])]):e._e()])])],1),a(\"st-info-item\",{staticClass:\"mg-b24\",attrs:{label:\"有效时间\"}},[e._v(\"\\n        购买后\"+e._s(e.packageInfo.valid_time)+e._s(e._f(\"enumFilter\")(e.packageInfo.valid_time_unit,\"package_course.valid_time_unit\"))+\"有效\\n      \")]),a(\"st-info-item\",{staticClass:\"mg-b24\",attrs:{label:\"允许冻结天数\"}},[e._v(\"\\n        \"+e._s(e.packageInfo.frozen_days)+\"天\\n      \")]),a(\"st-info-item\",{staticClass:\"mg-b24\",attrs:{label:\"转让设置\"}},[e._v(\"\\n        \"+e._s(e.transferText)+\"\\n      \")]),a(\"st-info-item\",{staticClass:\"mg-b24\",attrs:{label:\"售卖方式\"}},e._l(e.packageInfo.sale_mode,(function(t,s){return a(\"span\",{key:s},[s>0?a(\"i\",[e._v(\"/\")]):e._e(),e._v(\"\\n          \"+e._s(e._f(\"enumFilter\")(t,\"package_course.sale_mode\"))+\"\\n        \")])})),0),a(\"st-info-item\",{staticClass:\"mg-b8\",attrs:{label:\"课程介绍\"}},[a(\"p\",{domProps:{innerHTML:e._s(e.packageInfo.intro)}})]),a(\"st-info-item\",{staticClass:\"mg-b8\",attrs:{label:\"备注\"}}),a(\"p\",{class:e.basic(\"remarks\")},[e._v(e._s(e.packageInfo.remarks||\"无\"))])],1)],1)],1)},i=[],r=a(\"e8ac\"),o={name:\"ShopUnlimitPackageInfo\",serviceInject:function(){return{infoUnlimitPackageService:r[\"InfoUnlimitPackageService\"]}},rxState:function(){return{packageInfo:this.infoUnlimitPackageService.packageInfo$}},bem:{basic:\"page-shop-info-basic-package\",info:\"page-shop-info-unlimit-package\"},computed:{transferText:function(){return this.packageInfo.is_allow_transfer?\"支持转让\":\"不支持转让\"}}},n=o,c=a(\"2877\"),l=Object(c[\"a\"])(n,s,i,!1,null,null,null);t[\"default\"]=l.exports},\"48de\":function(e,t,a){\"use strict\";a.r(t),a.d(t,\"EditRangePackageService\",(function(){return g}));var s,i,r=a(\"d225\"),o=a(\"b0b4\"),n=a(\"9ab4\"),c=a(\"0cd5\"),l=a(\"df29\"),u=a(\"bf02\"),p=a(\"ebb6\"),d=a(\"c4cc\"),m=a(\"54da\"),_=a(\"2138\"),h=a(\"3a59\"),g=function(){function e(t,a){var s=this;Object(r[\"a\"])(this,e),this.userService=t,this.packageApi=a,this.appConfig=!0,this.limitType$=this.userService.getOptions$(\"package_course.is_limit\"),this.unitList$=this.userService.getOptions$(\"package_course.valid_time_unit\"),this.transferUnitList$=this.userService.getOptions$(\"package_course.transfer_unit\"),this.sellTypeList$=this.userService.getOptions$(\"package_course.sale_mode\").pipe(Object(p[\"a\"])((function(e){return s.appConfig||Object(h[\"a\"])(e,(function(e){return 1===e.value})),e}))),this.loading$=new l[\"d\"]({}),this.coachList$=new l[\"d\"]({}),this.packageInfo$=new l[\"d\"]({}),this.id=\"\"}return Object(o[\"a\"])(e,[{key:\"getPackageInfo\",value:function(e){var t=this;return this.packageApi.editCoursePackageInfo(\"range\",e).pipe(Object(d[\"a\"])((function(e){t.packageInfo$.commit((function(){return e.info}))})))}},{key:\"getCoachList\",value:function(){var e=this;return this.packageApi.getCoachList().pipe(Object(d[\"a\"])((function(t){e.coachList$.commit((function(){return t.list}))})))}},{key:\"initData\",value:function(e){return Object(m[\"a\"])(this.getPackageInfo(e),this.getCoachList())}},{key:\"editPackage\",value:function(e){return this.packageApi.editCoursePackage(e,\"range\",this.id)}},{key:\"beforeRouteEnter\",value:function(e){return this.id=e.meta.query.id,this.initData(e.meta.query.id)}}]),e}();Object(n[\"b\"])([Object(l[\"c\"])(),Object(n[\"d\"])(\"design:type\",Function),Object(n[\"d\"])(\"design:paramtypes\",[Object]),Object(n[\"d\"])(\"design:returntype\",void 0)],g.prototype,\"editPackage\",null),g=Object(n[\"b\"])([Object(c[\"b\"])(),Object(n[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof _[\"a\"]&&_[\"a\"])?s:Object,\"function\"===typeof(i=\"undefined\"!==typeof u[\"d\"]&&u[\"d\"])?i:Object])],g)},\"61dc\":function(e,t,a){\"use strict\";a.r(t),a.d(t,\"AddFixPackageService\",(function(){return f}));var s,i,r,o=a(\"d225\"),n=a(\"b0b4\"),c=a(\"9ab4\"),l=a(\"0cd5\"),u=a(\"df29\"),p=a(\"bf02\"),d=a(\"ebb6\"),m=a(\"c4cc\"),_=a(\"2138\"),h=a(\"3a59\"),g=a(\"e69b\"),f=function(){function e(t,a,s){var i=this;Object(o[\"a\"])(this,e),this.userService=t,this.msg=a,this.packageApi=s,this.appConfig=!0,this.unitList$=this.userService.getOptions$(\"package_course.valid_time_unit\"),this.transferUnitList$=this.userService.getOptions$(\"package_course.transfer_unit\"),this.sellTypeList$=this.userService.getOptions$(\"package_course.sale_mode\").pipe(Object(d[\"a\"])((function(e){return i.appConfig||Object(h[\"a\"])(e,(function(e){return 1===e.value})),e}))),this.loading$=new u[\"d\"]({}),this.coachList$=new u[\"d\"]({})}return Object(n[\"a\"])(e,[{key:\"addPackage\",value:function(e){return this.packageApi.addCoursePackage(e,\"fixation\")}},{key:\"addAndOnsale\",value:function(e){var t=this;return this.packageApi.addAndOnSale(e,\"fixation\").pipe(Object(m[\"a\"])((function(e){t.msg.success({content:\"课程包新增成功\"})})))}},{key:\"onsalePackage\",value:function(e){return this.packageApi.onsaleCoursePackage(e)}},{key:\"add\",value:function(e){return this.addPackage(e)}},{key:\"getCoachList\",value:function(){var e=this;return this.packageApi.getCoachList().pipe(Object(m[\"a\"])((function(t){e.coachList$.commit((function(){return t.list}))})))}},{key:\"beforeEach\",value:function(){return this.getCoachList()}}]),e}();Object(c[\"b\"])([Object(u[\"c\"])(),Object(c[\"d\"])(\"design:type\",Function),Object(c[\"d\"])(\"design:paramtypes\",[Object]),Object(c[\"d\"])(\"design:returntype\",void 0)],f.prototype,\"addAndOnsale\",null),Object(c[\"b\"])([Object(u[\"c\"])(),Object(c[\"d\"])(\"design:type\",Function),Object(c[\"d\"])(\"design:paramtypes\",[Object]),Object(c[\"d\"])(\"design:returntype\",void 0)],f.prototype,\"add\",null),f=Object(c[\"b\"])([Object(l[\"b\"])(),Object(c[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof _[\"a\"]&&_[\"a\"])?s:Object,\"function\"===typeof(i=\"undefined\"!==typeof g[\"a\"]&&g[\"a\"])?i:Object,\"function\"===typeof(r=\"undefined\"!==typeof p[\"d\"]&&p[\"d\"])?r:Object])],f)},6773:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"st-panel\",{staticClass:\"page-shop-add-range-package\",class:e.basic(),attrs:{app:\"\"}},[a(\"st-form\",{attrs:{form:e.form,labelWidth:\"96px\"}},[a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{staticClass:\"mg-t40\",attrs:{label:\"课程包名称\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"course_name\",{rules:[{required:!0,message:\"请输入课程包名称\"},{min:2,message:\"最少2个字符\"},{max:30,message:\"最多30个字符\"}]}],expression:\"[\\n              'course_name',\\n              {\\n                rules: [\\n                  { required: true, message: '请输入课程包名称' },\\n                  { min: 2, message: '最少2个字符' },\\n                  { max: 30, message: '最多30个字符' }\\n                ]\\n              }\\n            ]\"}],attrs:{placeholder:\"请输入课程包名称\"}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:8,xs:11,offset:1}},[a(\"div\",{class:e.basic(\"user-num\")},[a(\"st-form-item\",{attrs:{label:\"支持使用人数\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"support_num\",{rules:[{required:!0,message:\"请输入支持使用人数\"}]}],expression:\"[\\n                'support_num',\\n                {\\n                  rules: [{ required: true, message: '请输入支持使用人数' }]\\n                }\\n              ]\"}],staticStyle:{width:\"110px\"},attrs:{min:1,max:20,placeholder:\"请输入支持使用人数\"}})],1),a(\"span\",{staticClass:\"mg-l8\"},[e._v(\"限定20人\")])],1)])],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"总节数\",required:\"\"}},[a(\"a-radio-group\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"is_limit\",{rules:[{required:!0,message:\"请选择总节数\"}]}],expression:\"[\\n              'is_limit',\\n              {\\n                rules: [{ required: true, message: '请选择总节数' }]\\n              }\\n            ]\"}],on:{change:e.limitChange}},e._l(e.limitType,(function(t,s){return a(\"a-radio\",{key:s,attrs:{value:t.value}},[e._v(\"\\n              \"+e._s(t.label)+\"\\n            \")])})),1)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:23,xs:22,offset:1}},[a(\"st-form-item\",{class:{\"st-has-error\":!e.courseIsFirstInput&&e.courseIsNone},attrs:{help:e.courseErrorText,required:\"\"}},[a(\"template\",{slot:\"label\"},[e._v(\"\\n            上课范围\\n            \"),a(\"st-help-tooltip\",{attrs:{id:\"TSCPCF002\"}})],1),a(\"div\",{class:e.add(\"course\")},[a(\"st-form-table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"10%\"}}),a(\"col\",{staticStyle:{width:\"21%\"}}),a(\"col\",{staticStyle:{width:\"27%\"}}),a(\"col\",{staticStyle:{width:\"20%\"}}),a(\"col\",{staticStyle:{width:\"17%\"}})]),a(\"tr\",{staticClass:\"bg-thead table-header\"},[a(\"th\"),a(\"th\",{staticClass:\"rightline\"},[e._v(\"课程类型\")]),a(\"th\",{staticClass:\"pl-56\"},[e.packageData.is_limit?[e._v(\"节数\")]:e._e()],2),a(\"th\",{staticClass:\"pd-x16\"},[e._v(\"课时费\")]),a(\"th\",{attrs:{colspan:\"2\"}},[e.packageData.is_limit?[e._v(\"小计\")]:e._e()],2),a(\"th\")]),a(\"tbody\",[a(\"tr\",{staticClass:\"bg-row-odd checkbox\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{on:{change:e.teamCheckboxChange}})],1),a(\"td\",{staticClass:\"rightline white-nowrap\"},[e._v(\"团体课程\")]),e.packageData.is_limit?a(\"td\",{staticClass:\"pr-32 pl-56\"},[a(\"st-input-number\",{staticStyle:{\"min-width\":\"100px\"},attrs:{min:1,max:99999,disabled:0===e.packageData.is_team},model:{value:e.packageData.team_times,callback:function(t){e.$set(e.packageData,\"team_times\",t)},expression:\"packageData.team_times\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                        节\\n                      \")])],2)],1):e._e(),a(\"td\",{staticClass:\"pr-32\"},[a(\"st-input-number\",{staticStyle:{\"min-width\":\"100px\"},attrs:{min:0,max:999999.9,float:!0,disabled:0===e.packageData.is_team},model:{value:e.packageData.team_unit_price,callback:function(t){e.$set(e.packageData,\"team_unit_price\",t)},expression:\"packageData.team_unit_price\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                        元\\n                      \")])],2)],1),e.packageData.is_limit?a(\"td\",[e._v(e._s(e.team_total))]):e._e(),a(\"td\",{staticClass:\"overflow-hidden\"},[a(\"a\",{staticClass:\"set-course-button white-nowrap\",class:{hide:!(e.teamCourseListIsShow&&e.packageData.is_team)},attrs:{disabled:!e.packageData.is_team,href:\"javascript:void(0)\"},on:{click:e.teamCourseListShow}},[e._v(\"\\n                      配置上课范围  \\n                      \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1)])]),e.teamCourseListIsShow&&e.packageData.is_team?a(\"tr\",{staticClass:\"bg-row-odd team-course-list-content\"},[a(\"td\",{staticClass:\"rightline\",staticStyle:{\"background-color\":\"#fff\"},attrs:{colspan:\"2\"}}),a(\"td\",{staticClass:\"team-course-table\",attrs:{colspan:\"4\"}},[a(\"div\",{class:e.add(\"team-course-table\")},[a(\"st-form-table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"81%\"}}),a(\"col\",{staticStyle:{width:\"14%\"}})]),a(\"tr\",{staticClass:\"bg-thead th\"},[a(\"th\"),a(\"th\",[e._v(\"课程名称\")]),a(\"th\",[e._v(\"操作\")])]),a(\"tbody\",[a(\"tr\",{staticClass:\"checkbox border-bottom\"},[a(\"td\",{staticClass:\"team-course-add-buton\",attrs:{colspan:\"3\"}},[a(\"st-button\",{attrs:{block:\"\",type:\"dashed\",icon:\"add\"},on:{click:function(t){return e.addCourse(\"team\")}}},[e._v(\"\\n                                新增团体课程\\n                              \")])],1)]),a(\"tr\",[a(\"td\",{attrs:{colspan:\"3\"}},[e.teamCourseList.length?e._e():a(\"p\",{staticStyle:{margin:\"0\",\"text-align\":\"center\"}},[e._v(\"\\n                                无数据\\n                              \")]),e.teamCourseList.length?a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{ stopPropagation: true }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"teamCourseList2\"],expression:\"['teamCourseList2']\"}],staticClass:\"team-course-content-table\"},e._l(e.teamCourseList,(function(t,s){return a(\"li\",{key:t.course_id,staticClass:\"checkbox border-bottom\",class:{\"bg-row-odd\":s%2!==0,\"bg-row-even\":s%2===0}},[a(\"div\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{checked:t.courseChecked},on:{change:function(t){return e.courseItemCheckedChange(t,\"team\",s)}}})],1),a(\"div\",[e._v(e._s(t.course_name))]),a(\"div\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(a){return e.removeCourseItem(\"team\",t.course_id)}}},[e._v(\"\\n                                      删除\\n                                    \")])])])})),0):e._e()])]),a(\"tr\",{staticClass:\"bg-thead checkbox topline\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{indeterminate:e.teamIndeterminate,checked:e.teamCheckAll},on:{change:function(t){return e.checkAllChange(\"team\")}}})],1),a(\"td\",[e._v(\"批量操作\")]),a(\"td\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(t){return e.removeCourseItems(\"team\")}}},[e._v(\"\\n                                删除\\n                              \")])])])])])],1)])]):e._e(),a(\"tr\",{staticClass:\"bg-row-top checkbox\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{on:{change:e.personalCheckboxChange}})],1),a(\"td\",{staticClass:\"rightline\"},[e._v(\"私教课程\")]),e.packageData.is_limit?a(\"td\",{staticClass:\"pr-32 pl-56\"},[a(\"st-input-number\",{staticStyle:{\"min-width\":\"100px\"},attrs:{min:1,max:99999,disabled:0===e.packageData.is_personal},model:{value:e.packageData.personal_times,callback:function(t){e.$set(e.packageData,\"personal_times\",t)},expression:\"packageData.personal_times\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                        节\\n                      \")])],2)],1):e._e(),a(\"td\",{staticClass:\"pr-32\"},[a(\"st-input-number\",{staticStyle:{\"min-width\":\"100px\"},attrs:{min:0,max:999999.9,float:!0,disabled:0===e.packageData.is_personal},model:{value:e.packageData.personal_unit_price,callback:function(t){e.$set(e.packageData,\"personal_unit_price\",t)},expression:\"packageData.personal_unit_price\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                        元\\n                      \")])],2)],1),e.packageData.is_limit?a(\"td\",[e._v(e._s(e.personal_total))]):e._e(),a(\"td\",{staticClass:\"overflow-hidden\"},[a(\"a\",{staticClass:\"set-course-button\",class:{hide:!(e.personalCourseListIsShow&&e.packageData.is_personal)},attrs:{disabled:!e.packageData.is_personal,href:\"javascript:void(0)\"},on:{click:e.personalCourseListShow}},[e._v(\"\\n                      配置上课范围  \\n                      \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1)])]),e.personalCourseListIsShow&&e.packageData.is_personal?a(\"tr\",{staticClass:\"bg-row-even personal-course-list-content\"},[a(\"td\",{staticClass:\"rightline\",staticStyle:{\"background-color\":\"#fafafa\"},attrs:{colspan:\"2\"}}),a(\"td\",{staticClass:\"personal-course-table\",attrs:{colspan:\"4\"}},[a(\"div\",{class:e.add(\"personal-course-table\")},[a(\"st-form-table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"29%\"}}),a(\"col\",{staticStyle:{width:\"34%\"}}),a(\"col\",{staticStyle:{width:\"16%\"}}),a(\"col\",{staticStyle:{width:\"16%\"}})]),a(\"tr\",{staticClass:\"bg-thead th\"},[a(\"th\"),a(\"th\",[e._v(\"课程名称\")]),a(\"th\",[e._v(\"支持预约的\"+e._s(e.$c(\"coach\"))+\"等级\")]),a(\"th\",[e._v(\"授课\"+e._s(e.$c(\"coach\"))+\"数\")]),a(\"th\",[e._v(\"操作\")])]),a(\"tbody\",[a(\"tr\",{staticClass:\"checkbox border-bottom\"},[a(\"td\",{staticClass:\"personal-course-add-buton\",attrs:{colspan:\"5\"}},[a(\"st-button\",{attrs:{block:\"\",type:\"dashed\",icon:\"add\"},on:{click:function(t){return e.addCourse(\"personal\")}}},[e._v(\"\\n                                新增私教课程\\n                              \")])],1)]),a(\"tr\",[a(\"td\",{attrs:{colspan:\"5\"}},[e.personalCourseList.length?e._e():a(\"p\",{staticStyle:{margin:\"0\",\"text-align\":\"center\"}},[e._v(\"\\n                                无数据\\n                              \")]),e.personalCourseList.length?a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{ stopPropagation: true }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseList1\"],expression:\"['personalCourseList1']\"}],staticClass:\"personal-course-content-table\"},e._l(e.personalCourseList,(function(t,s){return a(\"li\",{key:t.course_id,staticClass:\"checkbox border-bottom\",class:{\"bg-row-odd\":s%2!==0,\"bg-row-even\":s%2===0}},[a(\"div\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{checked:t.courseChecked},on:{change:function(t){return e.courseItemCheckedChange(t,\"personal\",s)}}})],1),a(\"div\",[e._v(e._s(t.course_name))]),a(\"div\",[a(\"a-dropdown\",{attrs:{placement:\"bottomRight\",trigger:[\"click\"]}},[a(\"a\",{attrs:{href:\"javascript:void(0)\"}},[e._v(\"\\n                                        \"+e._s(t.coachGradeList.length===e.coachList.length?\"全部\":t.coachGradeList.length+\"个\")+\"等级  \\n                                        \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1),a(\"a-checkbox-group\",{class:e.basic(\"personal-dropdown\"),attrs:{slot:\"overlay\"},on:{change:function(a){return e.coachItemChange(a,t.course_id,s)}},slot:\"overlay\",model:{value:t.coachGradeList,callback:function(a){e.$set(t,\"coachGradeList\",a)},expression:\"item.coachGradeList\"}},[a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{\\n                                            stopPropagation: true\\n                                          }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseListCoachGrade\"+s],expression:\"[\\n                                            `personalCourseListCoachGrade${index}`\\n                                          ]\"}],staticClass:\"personal-course-coach-grade-dropdown\"},e._l(e.coachList,(function(t,s){return a(\"li\",{key:s},[a(\"a-checkbox\",{attrs:{value:t.id}},[e._v(\"\\n                                              \"+e._s(t.setting_name)+\"\\n                                            \")])],1)})),0)])],1)],1),a(\"div\",[e._v(e._s(t.coach))]),a(\"div\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(a){return e.removeCourseItem(\"personal\",t.course_id)}}},[e._v(\"\\n                                      删除\\n                                    \")])])])})),0):e._e()])]),a(\"tr\",{staticClass:\"bg-thead checkbox topline\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{indeterminate:e.personalIndeterminate,checked:e.personalCheckAll},on:{change:function(t){return e.checkAllChange(\"personal\")}}})],1),a(\"td\",[e._v(\"批量操作\")]),a(\"td\",[a(\"a-dropdown\",{attrs:{placement:\"bottomRight\",trigger:[\"click\"]},model:{value:e.coachAllOperationDropdownIsShow,callback:function(t){e.coachAllOperationDropdownIsShow=t},expression:\"coachAllOperationDropdownIsShow\"}},[a(\"a\",{attrs:{href:\"javascript:void(0)\"}},[e._v(\"\\n                                  批量设置等级  \\n                                  \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1),a(\"a-checkbox-group\",{staticClass:\"all\",class:e.basic(\"personal-dropdown\"),attrs:{slot:\"overlay\"},on:{change:e.coachAllChange},slot:\"overlay\",model:{value:e.personalAllOperationCoachList,callback:function(t){e.personalAllOperationCoachList=t},expression:\"personalAllOperationCoachList\"}},[a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{ stopPropagation: true }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseListCoachGradeAll\"],expression:\"[\\n                                      'personalCourseListCoachGradeAll'\\n                                    ]\"}],staticClass:\"personal-course-coach-grade-dropdown\"},e._l(e.coachList,(function(t,s){return a(\"li\",{key:s},[a(\"a-checkbox\",{attrs:{value:t.id}},[e._v(\"\\n                                        \"+e._s(t.setting_name)+\"\\n                                      \")])],1)})),0),a(\"div\",{staticClass:\"personal-course-coach-grade-dropdown-button\"},[a(\"a\",{attrs:{href:\"javascript:void(0)\",disabled:!e.personalAllOperationCoachList.length},on:{click:e.coachAllOperationOk}},[e._v(\"\\n                                      确定\\n                                    \")])])])],1)],1),a(\"td\",[e._v(e._s(e.personalAllOperationCoachTotal))]),a(\"td\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(t){return e.removeCourseItems(\"personal\")}}},[e._v(\"\\n                                删除\\n                              \")])])])])])],1)])]):e._e()])])],1)],2)],1)],1),e.packageData.is_limit?a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"总价\"}},[e._v(e._s(e.all_total)+\"元\")])],1)],1):e._e(),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"售卖价格\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"price\",{rules:[{required:!0,message:\"请输入售卖价格\"}]}],expression:\"[\\n              'price',\\n              { rules: [{ required: true, message: '请输入售卖价格' }] }\\n            ]\"}],attrs:{placeholder:\"请输入售卖价格\",min:0,max:999999.9,float:!0}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n              元\\n            \")])],2)],1)],1)],1),a(\"reserve-is-limit\"),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{staticClass:\"mg-b0\",attrs:{label:\"支持售卖时间\",required:\"\"}},[a(\"div\",{class:e.basic(\"saletime\")},[a(\"a-form-item\",{staticClass:\"page-a-form\"},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"start_time\",{rules:[{validator:e.start_time_validator}]}],expression:\"[\\n                  'start_time',\\n                  { rules: [{ validator: start_time_validator }] }\\n                ]\"}],staticStyle:{width:\"100%\"},attrs:{disabledDate:e.disabledStartDate,format:\"YYYY-MM-DD\",placeholder:\"开始时间\",showToday:!1},on:{openChange:e.handleStartOpenChange,change:e.start_time_change}})],1),a(\"span\",[e._v(\"~\")]),a(\"a-form-item\",{staticClass:\"page-a-form\"},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"end_time\",{rules:[{validator:e.end_time_validator}]}],expression:\"[\\n                  'end_time',\\n                  { rules: [{ validator: end_time_validator }] }\\n                ]\"}],attrs:{disabledDate:e.disabledEndDate,format:\"YYYY-MM-DD\",placeholder:\"结束时间\",showToday:!1,open:e.endOpen},on:{openChange:e.handleEndOpenChange,change:e.end_time_change}})],1)],1)])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"有效时间\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"valid_time\",{initialValue:null,rules:[{required:!0,message:\"请输入有效时间\"}]}],expression:\"[\\n              'valid_time',\\n              {\\n                initialValue: null,\\n                rules: [{ required: true, message: '请输入有效时间' }]\\n              }\\n            ]\"}],attrs:{placeholder:\"请输入有效时间\",min:1,max:99999}},[a(\"a-select\",{staticStyle:{width:\"60px\"},attrs:{slot:\"addonAfter\"},slot:\"addonAfter\",model:{value:e.packageData.valid_time_unit,callback:function(t){e.$set(e.packageData,\"valid_time_unit\",t)},expression:\"packageData.valid_time_unit\"}},e._l(e.unitList,(function(t,s){return a(\"a-select-option\",{key:s,attrs:{value:t.value}},[e._v(\"\\n                \"+e._s(t.label)+\"\\n              \")])})),1)],1)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"允许冻结天数\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"frozen_days\",{initialValue:null,rules:[{required:!0,message:\"请输入允许冻结天数\"}]}],expression:\"[\\n              'frozen_days',\\n              {\\n                initialValue: null,\\n                rules: [{ required: true, message: '请输入允许冻结天数' }]\\n              }\\n            ]\"}],attrs:{placeholder:\"请输入允许冻结天数\",min:1,max:99999}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n              天\\n            \")])],2)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"转让设置\"}},[a(\"div\",{class:e.basic(\"transfer\")},[a(\"a-checkbox\",{class:e.basic(\"transfer-checkbox\"),on:{change:e.transfer}},[e._v(\"\\n              支持转让\\n            \")]),a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"transfer_rate\",{rules:[{initialValue:null,required:0!==e.packageData.is_allow_transfer,message:\"请输入转让值数值\"}]}],expression:\"[\\n                'transfer_rate',\\n                {\\n                  rules: [\\n                    {\\n                      initialValue: null,\\n                      required: packageData.is_allow_transfer !== 0,\\n                      message: '请输入转让值数值'\\n                    }\\n                  ]\\n                }\\n              ]\"}],class:e.basic(\"transfer-input\"),staticStyle:{\"padding-right\":\"0\"},attrs:{min:0,max:1===e.packageData.transfer_unit?100:999999.9,disabled:0===e.packageData.is_allow_transfer,float:2===e.packageData.transfer_unit}},[a(\"a-select\",{staticStyle:{width:\"60px\"},attrs:{slot:\"addonAfter\",disabled:0===e.packageData.is_allow_transfer},on:{change:e.transferUnitChange},slot:\"addonAfter\",model:{value:e.packageData.transfer_unit,callback:function(t){e.$set(e.packageData,\"transfer_unit\",t)},expression:\"packageData.transfer_unit\"}},e._l(e.transferUnitList,(function(t){return a(\"a-select-option\",{key:t.value,attrs:{value:+t.value}},[e._v(\"\\n                  \"+e._s(t.label)+\"\\n                \")])})),1)],1)],1)])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"售卖方式\",required:\"\"}},[a(\"a-checkbox-group\",{model:{value:e.packageData.sale_mode,callback:function(t){e.$set(e.packageData,\"sale_mode\",t)},expression:\"packageData.sale_mode\"}},e._l(e.sellTypeList,(function(t){return a(\"a-checkbox\",{key:t.value,attrs:{disabled:2===t.value,value:t.value}},[e._v(\"\\n              \"+e._s(t.label)+\"\\n            \")])})),1)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:22,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{\"validate-status\":\"error\",help:e.imageErrorText,label:\"封面\",required:\"\"}},[a(\"div\",{class:e.basic(\"upload\")},[a(\"st-image-upload\",{class:e.basic(\"st-upload\"),attrs:{cropperModal:e.cropperModal,sizeLimit:5,list:e.fileList},on:{change:e.fileChange}},[a(\"i\",{class:e.basic(\"st-upload-icon\")}),a(\"div\",{class:e.basic(\"st-upload-text\")},[e._v(\"上传封面\")])]),a(\"div\",{class:e.basic(\"upload-describe\")},[a(\"p\",[e._v(\"\\n                图片格式必须为:png,bmp,jpeg,jpg,gif,建议使用png格式图片,以保存最佳效果\\n              \")]),a(\"p\",[e._v(\"建议尺寸为750像素X422像素,不可大于2m\")])])],1)])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"课程包介绍\"}},[a(\"st-textarea\",{staticClass:\"page-content-card-textarea\",attrs:{maxlength:500,placeholder:\"请输入课程包介绍\"},model:{value:e.packageData.intro,callback:function(t){e.$set(e.packageData,\"intro\",t)},expression:\"packageData.intro\"}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"备注\"}},[a(\"st-textarea\",{staticClass:\"page-content-card-textarea\",attrs:{maxlength:500,placeholder:\"请输入备注\"},model:{value:e.packageData.remarks,callback:function(t){e.$set(e.packageData,\"remarks\",t)},expression:\"packageData.remarks\"}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\" \"}},[a(\"st-button\",{staticClass:\"mr-8\",attrs:{type:\"primary\",loading:e.addLoading.add},on:{click:e.save}},[e._v(\"\\n            保存\\n          \")]),a(\"st-button\",{attrs:{loading:e.addLoading.addAndOnsale},on:{click:e.onsale}},[e._v(\"\\n            保存并上架\\n          \")])],1)],1)],1)],1)],1)},i=[],r=(a(\"6762\"),a(\"2fdb\"),a(\"ac6a\"),a(\"c32d\")),o=a.n(r),n=a(\"97ed\"),c=a(\"7ce1\"),l=a(\"5c8a\"),u=a(\"3997\"),p=a(\"a305\"),d=a(\"3a59\"),m=a(\"6740\"),_=a(\"73c0\"),h=a(\"b985\"),g=a(\"e98c\"),f={name:\"ShopRangePackageAdd\",serviceInject:function(){return{addPackageService:h[\"AddRangePackageService\"]}},rxState:function(){return{transferUnitList:this.addPackageService.transferUnitList$,sellTypeList:this.addPackageService.sellTypeList$,unitList:this.addPackageService.unitList$,addLoading:this.addPackageService.loading$,coachList:this.addPackageService.coachList$,limitType:this.addPackageService.limitType$}},components:{StImageUpload:c[\"a\"],ReserveIsLimit:n[\"a\"]},modals:{CourseSelectCourse:g[\"a\"]},bem:{add:\"page-shop-add-range-package\",basic:\"page-shop-add-basic-package\"},data:function(){return{packageData:{course_name:\"\",price:void 0,is_limit:1,is_team:0,team_times:void 0,team_unit_price:void 0,team_range:[],is_personal:0,personal_times:void 0,personal_unit_price:void 0,personal_range:[],start_time:\"\",end_time:\"\",valid_time:void 0,valid_time_unit:1,frozen_days:void 0,sale_mode:[2],is_allow_transfer:0,transfer_rate:void 0,transfer_unit:1,image:{image_id:null,image_key:\"\"},intro:\"\",remarks:\"\"},courseIsFirstInput:!0,teamCourseList:[],teamCourseListIsShow:!1,teamIndeterminate:!1,teamCheckAll:!1,personalCourseList:[],personalCoachTotalList:{},personalCoachListHistory:[],personalAllOperationCoachList:[],personalAllOperationCoachTotal:0,personalCourseListIsShow:!1,personalIndeterminate:!1,personalCheckAll:!1,coachAllOperationDropdownIsShow:!1,courseIsNone:!1,courseErrorText:\"\",form:this.$form.createForm(this),start_time:null,end_time:null,endOpen:!1,appConfig:!0,imageIsNone:!1,imageErrorText:\"\",fileList:[],cropperModal:{},reserveIsLimitOptions:[{label:\"不限制\",value:0},{label:\"限制\",value:1}]}},methods:{limitChange:function(e){var t=e.target.value;this.packageData.is_limit=+t,t?(this.packageData.team_times=void 0,this.packageData.personal_times=void 0,this.form.setFieldsValue({team_times:void 0,personal_times:void 0})):(this.packageData.team_times=1,this.packageData.personal_times=1,this.form.setFieldsValue({team_times:1,personal_times:1}))},save:function(){var e=this;this.course_validator(),this.image_validator(),this.form.validateFieldsAndScroll({scroll:{offsetTop:80}},(function(t,a){t||e.courseIsNone||e.imageIsNone||(e.packageData.course_name=a.course_name,e.packageData.price=a.price,e.packageData.valid_time=a.valid_time,e.packageData.support_num=a.support_num,e.packageData.frozen_days=a.frozen_days,e.packageData.transfer_rate=e.packageData.is_allow_transfer?+a.transfer_rate:void 0,e.packageData.start_time=\"\".concat(e.start_time.format(\"YYYY-MM-DD\")),e.packageData.reserve_is_limit=a.reserve_is_limit,e.packageData.reserve_limit_day=a.reserve_limit_day,e.packageData.reserve_limit_times=+a.reserve_limit_times,e.packageData.end_time=\"\".concat(e.end_time.format(\"YYYY-MM-DD\")),e.packageData.team_range=[],e.teamCourseList.forEach((function(t){e.packageData.team_range.push(t.course_id)})),e.packageData.personal_range=[],e.personalCourseList.forEach((function(t){e.packageData.personal_range.push({course_id:t.course_id,coach_level:Object(l[\"a\"])(t.coachGradeList)})})),e.addPackageService.add(e.packageData).subscribe((function(t){e.$router.push({path:\"/shop/product/course/manage/package/list\"})})))}))},onsale:function(){var e=this;this.course_validator(),this.image_validator(),this.form.validateFieldsAndScroll((function(t,a){t||e.courseIsNone||e.imageIsNone||(e.packageData.course_name=a.course_name,e.packageData.price=a.price,e.packageData.valid_time=a.valid_time,e.packageData.support_num=a.support_num,e.packageData.frozen_days=a.frozen_days,e.packageData.transfer_rate=e.packageData.is_allow_transfer?+a.transfer_rate:void 0,e.packageData.start_time=\"\".concat(e.start_time.format(\"YYYY-MM-DD\")),e.packageData.end_time=\"\".concat(e.end_time.format(\"YYYY-MM-DD\")),e.packageData.reserve_is_limit=a.reserve_is_limit,e.packageData.reserve_limit_day=a.reserve_limit_day,e.packageData.reserve_limit_times=+a.reserve_limit_times,e.packageData.team_range=[],e.teamCourseList.forEach((function(t){e.packageData.team_range.push(t.course_id)})),e.packageData.personal_range=[],e.personalCourseList.forEach((function(t){e.packageData.personal_range.push({course_id:t.course_id,coach_level:Object(l[\"a\"])(t.coachGradeList)})})),e.addPackageService.addAndOnsale(e.packageData).subscribe((function(t){e.$router.push({path:\"/shop/product/course/manage/package/list\"})})))}))},teamCheckboxChange:function(e){this.packageData.is_team=+e.target.checked,this.courseIsFirstInput=!1,this.teamCourseListIsShow=+e.target.checked},personalCheckboxChange:function(e){this.packageData.is_personal=+e.target.checked,this.courseIsFirstInput=!1,this.personalCourseListIsShow=+e.target.checked},teamCourseListShow:function(){this.teamCourseListIsShow=!this.teamCourseListIsShow},personalCourseListShow:function(){this.personalCourseListIsShow=!this.personalCourseListIsShow},addCourse:function(e){var t=this;\"team\"===e?this.$modalRouter.push({name:\"course-select-course\",props:{type:e,use_range:1,courses:this.teamCourseList},on:{ok:function(e){e.list.forEach((function(e){e.courseChecked=!1})),t.teamCourseList=Object(l[\"a\"])(e.list)}}}):\"personal\"===e&&this.$modalRouter.push({name:\"course-select-course\",props:{type:e,courses:this.personalCourseList},on:{ok:function(e){var a=[];Object(u[\"a\"])(t.coachList,(function(e){a.push(e.id)}));var s=Object(p[\"a\"])(t.coachList,(function(e,t){return e+t.coach_number}),0);e.list.forEach((function(e){e.courseChecked=!1,e.coachGradeList=a,e.coach=s})),Object(u[\"a\"])(t.personalCoachTotalList,(function(a,s){Object(u[\"a\"])(e.list,(function(e){+e.course_id===+s&&(e.coachGradeList=Object(l[\"a\"])(a.list),e.coach=Object(l[\"a\"])(a.total))})),e.list.some((function(e){return+e.course_id===+s}))||delete t.personalCoachTotalList[s]})),t.personalCoachListHistory=[],e.list.forEach((function(e){t.personalCoachListHistory.push(e.coachGradeList)})),t.personalCourseList=Object(l[\"a\"])(e.list)}}})},removeCourseItem:function(e,t){if(\"team\"===e){var a=Object(l[\"a\"])(this.teamCourseList);Object(d[\"a\"])(a,(function(e){return e.course_id===t})),this.teamCourseList=a}else if(\"personal\"===e){var s=Object(l[\"a\"])(this.personalCourseList);Object(d[\"a\"])(s,(function(e){return e.course_id===t})),this.personalCourseList=s;var i=Object(l[\"a\"])(this.personalCoachTotalList);delete i[t],this.personalCoachTotalList=i}},removeCourseItems:function(e){if(\"team\"===e){var t=Object(l[\"a\"])(this.teamCourseList);Object(d[\"a\"])(t,(function(e){return e.courseChecked})),this.teamCourseList=t}else if(\"personal\"===e){var a=Object(l[\"a\"])(this.personalCourseList),s=Object(d[\"a\"])(a,(function(e){return e.courseChecked}));this.personalCourseList=a;var i=Object(l[\"a\"])(this.personalCoachTotalList);s.forEach((function(e){delete i[e.course_id]})),this.personalCoachTotalList=i}},courseItemCheckedChange:function(e,t,a){\"team\"===t?this.teamCourseList[a].courseChecked=e.target.checked:\"personal\"===t&&(this.personalCourseList[a].courseChecked=e.target.checked)},checkAllChange:function(e){var t=this;\"team\"===e?this.teamCourseList.forEach((function(e){e.courseChecked=!t.teamCheckAll})):\"personal\"===e&&this.personalCourseList.forEach((function(e){e.courseChecked=!t.personalCheckAll}))},coachItemChange:function(e,t,a){if(e.length){this.personalCoachListHistory[a]=Object(l[\"a\"])(e),this.personalCoachTotalList[t]={},this.personalCoachTotalList[t].list=Object(l[\"a\"])(e);var s=Object(m[\"a\"])(this.coachList,(function(t){return e.includes(t.id)})),i=Object(p[\"a\"])(s,(function(e,t){return e+t.coach_number}),0);this.personalCoachTotalList[t].total=i,this.personalCourseList.forEach((function(e){e.course_id===t&&(e.coach=i)}))}else this.personalCourseList[a].coachGradeList=this.personalCoachListHistory[a]},coachAllChange:function(e){var t=Object(m[\"a\"])(this.coachList,(function(t){return e.includes(t.id)}));this.personalAllOperationCoachTotal=Object(p[\"a\"])(t,(function(e,t){return e+t.coach_number}),0)},coachAllOperationOk:function(){var e=this;Object(u[\"a\"])(this.personalCourseList,(function(t){t.courseChecked&&(t.coachGradeList=Object(l[\"a\"])(e.personalAllOperationCoachList),t.coach=e.personalAllOperationCoachTotal,e.personalCoachTotalList[t.course_id]={},e.personalCoachTotalList[t.course_id].list=Object(l[\"a\"])(e.personalAllOperationCoachList),e.personalCoachTotalList[t.course_id].total=e.personalAllOperationCoachTotal)})),this.personalCoachListHistory=[],Object(u[\"a\"])(this.personalCourseList,(function(t){e.personalCoachListHistory.push(t.coachGradeList)})),this.personalAllOperationCoachList=[],this.personalAllOperationCoachTotal=0,this.coachAllOperationDropdownIsShow=!1},course_validator:function(){this.courseIsFirstInput=!1;var e=!1,t=!1;e=!this.packageData.is_team||this.team_total&&this.teamCourseList.length,t=!this.packageData.is_personal||this.personal_total&&this.personalCourseList.length,e&&t&&(this.packageData.is_team||this.packageData.is_personal)?(this.courseIsNone=!1,this.courseErrorText=\"\"):(this.courseIsNone=!0,this.courseErrorText=\"请输入上课范围\")},image_validator:function(){\"\"!==this.packageData.image.image_key?(this.imageIsNone=!1,this.imageErrorText=\"\"):(this.imageIsNone=!0,this.imageErrorText=\"请上传封面\")},transfer:function(e){this.packageData.is_allow_transfer=+e.target.checked,this.packageData.transfer_rate=void 0,this.form.resetFields([\"transfer_rate\"])},fileChange:function(e){e.length?(this.packageData.image.image_id=e[0].image_id,this.packageData.image.image_key=e[0].image_key,this.imageIsNone=!1,this.imageErrorText=\"\"):(this.packageData.image.image_id=null,this.packageData.image.image_key=\"\",this.imageIsNone=!0,this.imageErrorText=\"请上传封面\")},transferUnitChange:function(){this.packageData.transfer_rate=void 0,this.form.setFieldsValue({transfer_rate:void 0})},start_time_validator:function(e,t,a){t?a():a(\"请选择开始售卖时间\")},end_time_validator:function(e,t,a){t?a():a(\"请选择结束售卖时间\")},start_time_change:function(e){this.start_time=Object(l[\"a\"])(e)},handleStartOpenChange:function(e){e||(this.endOpen=!0)},disabledStartDate:function(e){var t=this.end_time;if(!t)return e.valueOf()<o()().startOf(\"day\").valueOf();var a=t.valueOf()>o()().add(30,\"y\").valueOf()?o()(t).subtract(30,\"y\").valueOf():o()().startOf(\"day\").valueOf();return e.valueOf()<a||e.valueOf()>o()(t).valueOf()},end_time_change:function(e){this.end_time=Object(l[\"a\"])(e)},handleEndOpenChange:function(e){this.endOpen=e},disabledEndDate:function(e){var t=this.start_time;return t&&(e.valueOf()>=o()(t).add(30,\"y\").valueOf()||e.valueOf()<o()(t).valueOf())||e.valueOf()<o()().startOf(\"day\").valueOf()},moment:o.a},watch:{teamCourseList:{deep:!0,handler:function(e){var t=!1,a=!1;t=Object(_[\"a\"])(e,(function(e){return e.courseChecked})),a=Object(_[\"a\"])(e,(function(e){return!e.courseChecked})),this.teamIndeterminate=!t&&!a,this.teamCheckAll=!!e.length&&t}},personalCourseList:{deep:!0,handler:function(e){var t=!1,a=!1;t=Object(_[\"a\"])(e,(function(e){return e.courseChecked})),a=Object(_[\"a\"])(e,(function(e){return!e.courseChecked})),this.personalIndeterminate=!t&&!a,this.personalCheckAll=!!e.length&&t}}},computed:{team_total:function(){return+this.packageData.team_times&&+this.packageData.team_unit_price?this.packageData.team_times*(10*this.packageData.team_unit_price)/10:0},personal_total:function(){return+this.packageData.personal_times&&+this.packageData.personal_unit_price?this.packageData.personal_times*(10*this.packageData.personal_unit_price)/10:0},all_total:function(){var e=this.packageData.is_team?this.team_total:0,t=this.packageData.is_personal?this.personal_total:0;return e+t}}},v=f,k=a(\"2877\"),b=Object(k[\"a\"])(v,s,i,!1,null,null,null);t[\"default\"]=b.exports},\"6d0a\":function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"st-panel\",{staticClass:\"page-shop-add-unlimit-package\",class:e.basic(),attrs:{app:\"\"}},[a(\"st-form\",{attrs:{form:e.form,labelWidth:\"96px\"}},[a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{staticClass:\"mg-t40\",attrs:{label:\"课程包名称\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"course_name\",{rules:[{required:!0,message:\"请输入课程包名称\"},{min:2,message:\"最少2个字符\"},{max:30,message:\"最多30个字符\"}]}],expression:\"[\\n              'course_name',\\n              {\\n                rules: [\\n                  { required: true, message: '请输入课程包名称' },\\n                  { min: 2, message: '最少2个字符' },\\n                  { max: 30, message: '最多30个字符' }\\n                ]\\n              }\\n            ]\"}],attrs:{placeholder:\"请输入课程包名称\"}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:8,xs:11,offset:1}},[a(\"div\",{class:e.basic(\"user-num\")},[a(\"st-form-item\",{attrs:{label:\"支持使用人数\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"support_num\",{rules:[{required:!0,message:\"请输入支持使用人数\"}]}],expression:\"[\\n                'support_num',\\n                {\\n                  rules: [{ required: true, message: '请输入支持使用人数' }]\\n                }\\n              ]\"}],staticStyle:{width:\"110px\"},attrs:{min:1,max:20,placeholder:\"请输入支持使用人数\"}})],1),a(\"span\",{staticClass:\"mg-l8\"},[e._v(\"限定20人\")])],1)])],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:18,xs:22,offset:1}},[a(\"st-form-item\",{class:{\"st-has-error\":!e.courseIsFirstInput&&e.courseIsNone},attrs:{help:e.courseErrorText,required:\"\"}},[a(\"template\",{slot:\"label\"},[e._v(\"\\n            上课范围\\n            \"),a(\"st-help-tooltip\",{attrs:{id:\"TSCPCF001\"}})],1),a(\"div\",{class:e.add(\"course\")},[a(\"st-form-table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"8%\"}}),a(\"col\",{staticStyle:{width:\"16%\"}}),a(\"col\",{staticStyle:{width:\"27%\"}}),a(\"col\",{staticStyle:{width:\"28%\"}}),a(\"col\",{staticStyle:{width:\"21%\"}})]),a(\"tr\",{staticClass:\"bg-thead table-header\"},[a(\"th\"),a(\"th\",[e._v(\"课程类型\")]),a(\"th\",[e._v(\"节数\")]),a(\"th\",[e._v(\"课时费\")]),a(\"th\",[e._v(\"小计\")])]),a(\"tbody\",[a(\"tr\",{staticClass:\"bg-row-team\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{on:{change:e.teamCheckboxChange}})],1),a(\"td\",[e._v(\"团体课程\")]),a(\"td\",{staticClass:\"pr-32\"},[a(\"st-input-number\",{attrs:{min:1,max:99999,disabled:0===e.packageData.is_team},on:{change:function(t){e.courseIsFirstInput=!1}},model:{value:e.packageData.team_times,callback:function(t){e.$set(e.packageData,\"team_times\",t)},expression:\"packageData.team_times\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                        节\\n                      \")])],2)],1),a(\"td\",{staticClass:\"pr-32\"},[a(\"st-input-number\",{attrs:{min:0,max:999999.9,float:!0,disabled:0===e.packageData.is_team},on:{change:function(t){e.courseIsFirstInput=!1}},model:{value:e.packageData.team_unit_price,callback:function(t){e.$set(e.packageData,\"team_unit_price\",t)},expression:\"packageData.team_unit_price\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                        元\\n                      \")])],2)],1),a(\"td\",[e._v(e._s(e.team_total))])]),a(\"tr\",{staticClass:\"bg-row-personal\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{on:{change:e.personalCheckboxChange}})],1),a(\"td\",[e._v(\"私教课程\")]),a(\"td\",{staticClass:\"pr-32\"},[a(\"st-input-number\",{attrs:{min:1,max:99999,disabled:0===e.packageData.is_personal},on:{change:function(t){e.courseIsFirstInput=!1}},model:{value:e.packageData.personal_times,callback:function(t){e.$set(e.packageData,\"personal_times\",t)},expression:\"packageData.personal_times\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                        节\\n                      \")])],2)],1),a(\"td\",{staticClass:\"pr-32\"},[a(\"st-input-number\",{attrs:{min:0,max:999999.9,float:!0,disabled:0===e.packageData.is_personal},on:{change:function(t){e.courseIsFirstInput=!1}},model:{value:e.packageData.personal_unit_price,callback:function(t){e.$set(e.packageData,\"personal_unit_price\",t)},expression:\"packageData.personal_unit_price\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                        元\\n                      \")])],2)],1),a(\"td\",[e._v(e._s(e.personal_total))])])])])],1)],2)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"总价\"}},[e._v(e._s(e.all_total)+\"元\")])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"售卖价格\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"price\",{rules:[{required:!0,message:\"请输入售卖价格\"}]}],expression:\"[\\n              'price',\\n              { rules: [{ required: true, message: '请输入售卖价格' }] }\\n            ]\"}],attrs:{placeholder:\"请输入售卖价格\",min:0,max:999999.9,float:!0}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n              元\\n            \")])],2)],1)],1)],1),a(\"reserve-is-limit\"),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{staticClass:\"mg-b0\",attrs:{label:\"支持售卖时间\",required:\"\"}},[a(\"div\",{class:e.basic(\"saletime\")},[a(\"a-form-item\",{staticClass:\"page-a-form\"},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"start_time\",{rules:[{validator:e.start_time_validator}]}],expression:\"[\\n                  'start_time',\\n                  { rules: [{ validator: start_time_validator }] }\\n                ]\"}],staticStyle:{width:\"100%\"},attrs:{disabledDate:e.disabledStartDate,format:\"YYYY-MM-DD\",placeholder:\"开始时间\",showToday:!1},on:{openChange:e.handleStartOpenChange,change:e.start_time_change}})],1),a(\"span\",[e._v(\"~\")]),a(\"a-form-item\",{staticClass:\"page-a-form\"},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"end_time\",{rules:[{validator:e.end_time_validator}]}],expression:\"[\\n                  'end_time',\\n                  { rules: [{ validator: end_time_validator }] }\\n                ]\"}],attrs:{disabledDate:e.disabledEndDate,format:\"YYYY-MM-DD\",placeholder:\"结束时间\",showToday:!1,open:e.endOpen},on:{openChange:e.handleEndOpenChange,change:e.end_time_change}})],1)],1)])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"有效时间\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"valid_time\",{initialValue:null,rules:[{required:!0,message:\"请输入有效时间\"}]}],expression:\"[\\n              'valid_time',\\n              {\\n                initialValue: null,\\n                rules: [{ required: true, message: '请输入有效时间' }]\\n              }\\n            ]\"}],attrs:{placeholder:\"请输入有效时间\",min:1,max:99999}},[a(\"a-select\",{staticStyle:{width:\"60px\"},attrs:{slot:\"addonAfter\"},slot:\"addonAfter\",model:{value:e.packageData.valid_time_unit,callback:function(t){e.$set(e.packageData,\"valid_time_unit\",t)},expression:\"packageData.valid_time_unit\"}},e._l(e.unitList,(function(t,s){return a(\"a-select-option\",{key:s,attrs:{value:t.value}},[e._v(\"\\n                \"+e._s(t.label)+\"\\n              \")])})),1)],1)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"允许冻结天数\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"frozen_days\",{initialValue:null,rules:[{required:!0,message:\"请输入允许冻结天数\"}]}],expression:\"[\\n              'frozen_days',\\n              {\\n                initialValue: null,\\n                rules: [{ required: true, message: '请输入允许冻结天数' }]\\n              }\\n            ]\"}],attrs:{placeholder:\"请输入允许冻结天数\",min:1,max:99999}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n              天\\n            \")])],2)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"转让设置\"}},[a(\"div\",{class:e.basic(\"transfer\")},[a(\"a-checkbox\",{class:e.basic(\"transfer-checkbox\"),on:{change:e.transfer}},[e._v(\"\\n              支持转让\\n            \")]),a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"transfer_rate\",{rules:[{initialValue:null,required:0!==e.packageData.is_allow_transfer,message:\"请输入转让值数值\"}]}],expression:\"[\\n                'transfer_rate',\\n                {\\n                  rules: [\\n                    {\\n                      initialValue: null,\\n                      required: packageData.is_allow_transfer !== 0,\\n                      message: '请输入转让值数值'\\n                    }\\n                  ]\\n                }\\n              ]\"}],class:e.basic(\"transfer-input\"),staticStyle:{\"padding-right\":\"0\"},attrs:{min:0,max:1===e.packageData.transfer_unit?100:999999.9,disabled:0===e.packageData.is_allow_transfer,float:2===e.packageData.transfer_unit}},[a(\"a-select\",{staticStyle:{width:\"60px\"},attrs:{slot:\"addonAfter\",disabled:0===e.packageData.is_allow_transfer},on:{change:e.transferUnitChange},slot:\"addonAfter\",model:{value:e.packageData.transfer_unit,callback:function(t){e.$set(e.packageData,\"transfer_unit\",t)},expression:\"packageData.transfer_unit\"}},e._l(e.transferUnitList,(function(t){return a(\"a-select-option\",{key:t.value,attrs:{value:+t.value}},[e._v(\"\\n                  \"+e._s(t.label)+\"\\n                \")])})),1)],1)],1)])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"售卖方式\",required:\"\"}},[a(\"a-checkbox-group\",{model:{value:e.packageData.sale_mode,callback:function(t){e.$set(e.packageData,\"sale_mode\",t)},expression:\"packageData.sale_mode\"}},e._l(e.sellTypeList,(function(t){return a(\"a-checkbox\",{key:t.value,attrs:{disabled:2===t.value,value:t.value}},[e._v(\"\\n              \"+e._s(t.label)+\"\\n            \")])})),1)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:22,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{\"validate-status\":\"error\",help:e.imageErrorText,label:\"封面\",required:\"\"}},[a(\"div\",{class:e.basic(\"upload\")},[a(\"st-image-upload\",{class:e.basic(\"st-upload\"),attrs:{cropperModal:e.cropperModal,sizeLimit:5,list:e.fileList},on:{change:e.fileChange}},[a(\"i\",{class:e.basic(\"st-upload-icon\")}),a(\"div\",{class:e.basic(\"st-upload-text\")},[e._v(\"上传封面\")])]),a(\"div\",{class:e.basic(\"upload-describe\")},[a(\"p\",[e._v(\"\\n                图片格式必须为:png,bmp,jpeg,jpg,gif,建议使用png格式图片,以保存最佳效果\\n              \")]),a(\"p\",[e._v(\"建议尺寸为750像素X422像素,不可大于2m\")])])],1)])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"课程包介绍\"}},[a(\"st-textarea\",{staticClass:\"page-content-card-textarea\",attrs:{maxlength:500,placeholder:\"请输入课程包介绍\"},model:{value:e.packageData.intro,callback:function(t){e.$set(e.packageData,\"intro\",t)},expression:\"packageData.intro\"}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"备注\"}},[a(\"st-textarea\",{staticClass:\"page-content-card-textarea\",attrs:{maxlength:500,placeholder:\"请输入备注\"},model:{value:e.packageData.remarks,callback:function(t){e.$set(e.packageData,\"remarks\",t)},expression:\"packageData.remarks\"}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\" \"}},[a(\"st-button\",{staticClass:\"mr-8\",attrs:{type:\"primary\",loading:e.addLoading.add},on:{click:e.save}},[e._v(\"\\n            保存\\n          \")]),a(\"st-button\",{attrs:{loading:e.addLoading.addAndOnsale},on:{click:e.onsale}},[e._v(\"\\n            保存并上架\\n          \")])],1)],1)],1)],1)],1)},i=[],r=a(\"c32d\"),o=a.n(r),n=a(\"97ed\"),c=a(\"5c8a\"),l=a(\"bc08\"),u=a(\"7ce1\"),p={name:\"ShopUnlimitPackageAdd\",serviceInject:function(){return{addPackageService:l[\"AddUnlimitPackageService\"]}},rxState:function(){return{transferUnitList:this.addPackageService.transferUnitList$,sellTypeList:this.addPackageService.sellTypeList$,unitList:this.addPackageService.unitList$,addLoading:this.addPackageService.loading$}},components:{StImageUpload:u[\"a\"],ReserveIsLimit:n[\"a\"]},bem:{add:\"page-shop-add-unlimit-package\",basic:\"page-shop-add-basic-package\"},data:function(){return{packageData:{course_name:\"\",is_team:0,team_times:void 0,team_unit_price:void 0,is_personal:0,personal_times:void 0,personal_unit_price:void 0,price:void 0,start_time:\"\",end_time:\"\",valid_time:void 0,valid_time_unit:1,frozen_days:void 0,is_allow_transfer:0,transfer_rate:void 0,transfer_unit:1,sale_mode:[2],image:{image_id:void 0,image_key:\"\"},intro:\"\",remarks:\"\"},form:this.$form.createForm(this),start_time:null,end_time:null,endOpen:!1,courseIsFirstInput:!0,courseIsNone:!1,courseErrorText:\"\",imageIsNone:!1,imageErrorText:\"\",fileList:[],cropperModal:{}}},methods:{save:function(){var e=this;this.course_validator(),this.image_validator(),this.form.validateFieldsAndScroll((function(t,a){t||e.courseIsNone||e.imageIsNone||(e.packageData.course_name=a.course_name,e.packageData.price=a.price,e.packageData.valid_time=a.valid_time,e.packageData.support_num=a.support_num,e.packageData.frozen_days=a.frozen_days,e.packageData.transfer_rate=e.packageData.is_allow_transfer?+a.transfer_rate:void 0,e.packageData.start_time=\"string\"===typeof e.start_time?e.start_time:\"\".concat(e.start_time.format(\"YYYY-MM-DD\")),e.packageData.end_time=\"string\"===typeof e.end_time?e.end_time:\"\".concat(e.end_time.format(\"YYYY-MM-DD\")),e.packageData.reserve_is_limit=a.reserve_is_limit,e.packageData.reserve_limit_day=a.reserve_limit_day,e.packageData.reserve_limit_times=+a.reserve_limit_times,e.addPackageService.add(e.packageData).subscribe((function(t){e.$router.push({path:\"/shop/product/course/manage/package/list\"})})))}))},onsale:function(){var e=this;this.course_validator(),this.image_validator(),this.form.validateFieldsAndScroll((function(t,a){t||e.courseIsNone||e.imageIsNone||(e.packageData.course_name=a.course_name,e.packageData.price=a.price,e.packageData.valid_time=a.valid_time,e.packageData.support_num=a.support_num,e.packageData.frozen_days=a.frozen_days,e.packageData.transfer_rate=e.packageData.is_allow_transfer?+a.transfer_rate:void 0,e.packageData.reserve_is_limit=a.reserve_is_limit,e.packageData.reserve_limit_day=a.reserve_limit_day,e.packageData.reserve_limit_times=+a.reserve_limit_times,e.packageData.start_time=\"\".concat(e.start_time.format(\"YYYY-MM-DD\")),e.packageData.end_time=\"\".concat(e.end_time.format(\"YYYY-MM-DD\")),e.addPackageService.addAndOnsale(e.packageData).subscribe((function(t){e.$router.push({path:\"/shop/product/course/manage/package/list\"})})))}))},course_validator:function(){this.courseIsFirstInput=!1;var e=!this.packageData.is_team||!!this.team_total,t=!this.packageData.is_personal||!!this.personal_total;e&&t&&(this.packageData.is_team||this.packageData.is_personal)?(this.courseIsNone=!1,this.courseErrorText=\"\"):(this.courseIsNone=!0,this.courseErrorText=\"请输入上课范围\")},image_validator:function(){\"\"!==this.packageData.image.image_key?(this.imageIsNone=!1,this.imageErrorText=\"\"):(this.imageIsNone=!0,this.imageErrorText=\"请上传封面\")},teamCheckboxChange:function(e){this.packageData.is_team=+e.target.checked,this.courseIsFirstInput=!1},personalCheckboxChange:function(e){this.packageData.is_personal=+e.target.checked,this.courseIsFirstInput=!1},transfer:function(e){this.packageData.is_allow_transfer=+e.target.checked,this.packageData.transfer_rate=void 0,this.form.resetFields([\"transfer_rate\"])},fileChange:function(e){e.length?(this.packageData.image.image_id=e[0].image_id,this.packageData.image.image_key=e[0].image_key,this.imageIsNone=!1,this.imageErrorText=\"\"):(this.packageData.image.image_id=null,this.packageData.image.image_key=\"\",this.imageIsNone=!0,this.imageErrorText=\"请上传封面\")},transferUnitChange:function(){this.packageData.transfer_rate=void 0,this.form.setFieldsValue({transfer_rate:void 0})},start_time_validator:function(e,t,a){t?a():a(\"请选择开始售卖时间\")},end_time_validator:function(e,t,a){t?a():a(\"请选择结束售卖时间\")},start_time_change:function(e){this.start_time=Object(c[\"a\"])(e)},handleStartOpenChange:function(e){e||(this.endOpen=!0)},disabledStartDate:function(e){var t=this.end_time;if(!t)return e.valueOf()<o()().startOf(\"day\").valueOf();var a=t.valueOf()>o()().add(30,\"y\").valueOf()?o()(t).subtract(30,\"y\").valueOf():o()().startOf(\"day\").valueOf();return e.valueOf()<a||e.valueOf()>o()(t).valueOf()},end_time_change:function(e){this.end_time=Object(c[\"a\"])(e)},handleEndOpenChange:function(e){this.endOpen=e},disabledEndDate:function(e){var t=this.start_time;return t&&(e.valueOf()>=o()(t).add(30,\"y\").valueOf()||e.valueOf()<o()(t).valueOf())||e.valueOf()<o()().startOf(\"day\").valueOf()},moment:o.a},computed:{team_total:function(){return+this.packageData.team_times&&+this.packageData.team_unit_price?this.packageData.team_times*(10*this.packageData.team_unit_price)/10:0},personal_total:function(){return+this.packageData.personal_times&&+this.packageData.personal_unit_price?this.packageData.personal_times*(10*this.packageData.personal_unit_price)/10:0},all_total:function(){var e=this.packageData.is_team?this.team_total:0,t=this.packageData.is_personal?this.personal_total:0;return e+t}}},d=p,m=a(\"2877\"),_=Object(m[\"a\"])(d,s,i,!1,null,null,null);t[\"default\"]=_.exports},7178:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"st-panel\",{staticClass:\"page-shop-add-range-package\",class:e.basic(),attrs:{app:\"\"}},[a(\"st-form\",{attrs:{form:e.form,labelWidth:\"96px\"}},[a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"课程包名称\",required:\"\"}},[e._v(\"\\n          \"+e._s(e.packageInfo.course_name)+\"\\n        \")])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:8,xs:11,offset:1}},[a(\"div\",{class:e.basic(\"user-num\")},[a(\"st-form-item\",{attrs:{label:\"支持使用人数\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"support_num\",{rules:[{required:!0,message:\"请输入支持使用人数\"}]}],expression:\"[\\n                'support_num',\\n                {\\n                  rules: [{ required: true, message: '请输入支持使用人数' }]\\n                }\\n              ]\"}],staticStyle:{width:\"110px\"},attrs:{min:1,max:20,placeholder:\"请输入支持使用人数\"}})],1),a(\"span\",{staticClass:\"mg-l8\"},[e._v(\"限定20人\")])],1)])],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"总节数\",required:\"\"}},[a(\"a-radio-group\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"is_limit\",{rules:[{required:!0,message:\"请选择总节数\"}]}],expression:\"[\\n              'is_limit',\\n              {\\n                rules: [{ required: true, message: '请选择总节数' }]\\n              }\\n            ]\"}],on:{change:e.limitChange}},e._l(e.limitType,(function(t,s){return a(\"a-radio\",{key:s,attrs:{value:t.value}},[e._v(\"\\n              \"+e._s(t.label)+\"\\n            \")])})),1)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:23,xs:22,offset:1}},[a(\"st-form-item\",{class:{\"st-has-error\":!e.courseIsFirstInput&&e.courseIsNone},attrs:{help:e.courseErrorText,required:\"\"}},[a(\"template\",{slot:\"label\"},[e._v(\"\\n            上课范围\\n            \"),a(\"st-help-tooltip\",{attrs:{id:\"TSCPCF002\"}})],1),a(\"div\",{class:e.add(\"course\")},[a(\"st-form-table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"10%\"}}),a(\"col\",{staticStyle:{width:\"21%\"}}),a(\"col\",{staticStyle:{width:\"27%\"}}),a(\"col\",{staticStyle:{width:\"20%\"}}),a(\"col\",{staticStyle:{width:\"17%\"}})]),a(\"tr\",{staticClass:\"bg-thead table-header\"},[a(\"th\"),a(\"th\",{staticClass:\"rightline\"},[e._v(\"课程类型\")]),e.packageData.is_limit?a(\"th\",{staticClass:\"pl-56\"},[e._v(\"节数\")]):e._e(),a(\"th\",{staticClass:\"pd-x16\"},[e._v(\"课时费\")]),e.packageData.is_limit?a(\"th\",{staticClass:\"pd-x16\",attrs:{colspan:\"2\"}},[e._v(\"\\n                  小计\\n                \")]):e._e(),a(\"th\")]),a(\"tbody\",[a(\"tr\",{staticClass:\"bg-row-odd checkbox\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{defaultChecked:!!e.packageInfo.is_team},on:{change:e.teamCheckboxChange}})],1),a(\"td\",{staticClass:\"rightline white-nowrap\"},[e._v(\"团体课程\")]),e.packageData.is_limit?a(\"td\",{staticClass:\"pr-32 pl-56\"},[a(\"st-input-number\",{staticStyle:{\"min-width\":\"100px\"},attrs:{min:1,max:99999,disabled:0===e.packageData.is_team},model:{value:e.packageData.team_times,callback:function(t){e.$set(e.packageData,\"team_times\",t)},expression:\"packageData.team_times\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                        节\\n                      \")])],2)],1):e._e(),a(\"td\",{staticClass:\"pr-32\"},[a(\"st-input-number\",{staticStyle:{\"min-width\":\"100px\"},attrs:{min:0,max:999999.9,float:!0,disabled:0===e.packageData.is_team},model:{value:e.packageData.team_unit_price,callback:function(t){e.$set(e.packageData,\"team_unit_price\",t)},expression:\"packageData.team_unit_price\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                        元\\n                      \")])],2)],1),e.packageData.is_limit?a(\"td\",[e._v(e._s(e.team_total))]):e._e(),a(\"td\",{staticClass:\"overflow-hidden\"},[a(\"a\",{staticClass:\"set-course-button white-nowrap\",class:{hide:!(e.teamCourseListIsShow&&e.packageData.is_team)},attrs:{disabled:!e.packageData.is_team,href:\"javascript:void(0)\"},on:{click:e.teamCourseListShow}},[e._v(\"\\n                      配置上课范围  \\n                      \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1)])]),e.teamCourseListIsShow&&e.packageData.is_team?a(\"tr\",{staticClass:\"bg-row-odd team-course-list-content\"},[a(\"td\",{staticClass:\"rightline\",attrs:{colspan:\"2\"}}),a(\"td\",{staticClass:\"team-course-table\",attrs:{colspan:\"4\"}},[a(\"div\",{class:e.add(\"team-course-table\")},[a(\"table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"81%\"}}),a(\"col\",{staticStyle:{width:\"14%\"}})]),a(\"tr\",{staticClass:\"bg-thead th\"},[a(\"th\"),a(\"th\",[e._v(\"课程名称\")]),a(\"th\",[e._v(\"操作\")])]),a(\"tbody\",[a(\"tr\",{staticClass:\"checkbox border-bottom\"},[a(\"td\",{staticClass:\"team-course-add-buton\",attrs:{colspan:\"3\"}},[a(\"st-button\",{attrs:{block:\"\",type:\"dashed\",icon:\"add\"},on:{click:function(t){return e.addCourse(\"team\")}}},[e._v(\"\\n                                新增团体课程\\n                              \")])],1)]),a(\"tr\",[a(\"td\",{attrs:{colspan:\"3\"}},[e.teamCourseList.length?e._e():a(\"p\",{staticClass:\"bg-row-even\",staticStyle:{margin:\"0\",\"text-align\":\"center\",padding:\"8px 0\"}},[e._v(\"\\n                                无数据\\n                              \")]),e.teamCourseList.length?a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{ stopPropagation: true }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"teamCourseList2\"],expression:\"['teamCourseList2']\"}],staticClass:\"team-course-content-table\"},e._l(e.teamCourseList,(function(t,s){return a(\"li\",{key:t.course_id,staticClass:\"checkbox border-bottom\",class:{\"bg-row-odd\":s%2!==0,\"bg-row-even\":s%2===0}},[a(\"div\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{checked:t.courseChecked},on:{change:function(t){return e.courseItemCheckedChange(t,\"team\",s)}}})],1),a(\"div\",[e._v(e._s(t.course_name))]),a(\"div\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(a){return e.removeCourseItem(\"team\",t.course_id)}}},[e._v(\"\\n                                      删除\\n                                    \")])])])})),0):e._e()])]),a(\"tr\",{staticClass:\"bg-thead checkbox topline\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{indeterminate:e.teamIndeterminate,checked:e.teamCheckAll},on:{change:function(t){return e.checkAllChange(\"team\")}}})],1),a(\"td\",[e._v(\"批量操作\")]),a(\"td\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(t){return e.removeCourseItems(\"team\")}}},[e._v(\"\\n                                删除\\n                              \")])])])])])])])]):e._e(),a(\"tr\",{staticClass:\"bg-row-even checkbox topline\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{defaultChecked:!!e.packageInfo.is_personal},on:{change:e.personalCheckboxChange}})],1),a(\"td\",{staticClass:\"rightline\"},[e._v(\"私教课程\")]),e.packageData.is_limit?a(\"td\",{staticClass:\"pr-32 pl-56\"},[a(\"st-input-number\",{attrs:{min:1,max:99999,disabled:0===e.packageData.is_personal},model:{value:e.packageData.personal_times,callback:function(t){e.$set(e.packageData,\"personal_times\",t)},expression:\"packageData.personal_times\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                        节\\n                      \")])],2)],1):e._e(),a(\"td\",{staticClass:\"pr-32\"},[a(\"st-input-number\",{attrs:{min:0,max:999999.9,float:!0,disabled:0===e.packageData.is_personal},model:{value:e.packageData.personal_unit_price,callback:function(t){e.$set(e.packageData,\"personal_unit_price\",t)},expression:\"packageData.personal_unit_price\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                        元\\n                      \")])],2)],1),e.packageData.is_limit?a(\"td\",[e._v(e._s(e.personal_total))]):e._e(),a(\"td\",{staticClass:\"overflow-hidden\"},[a(\"a\",{staticClass:\"set-course-button\",class:{hide:!(e.personalCourseListIsShow&&e.packageData.is_personal)},attrs:{disabled:!e.packageData.is_personal,href:\"javascript:void(0)\"},on:{click:e.personalCourseListShow}},[e._v(\"\\n                      配置上课范围  \\n                      \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1)])]),e.personalCourseListIsShow&&e.packageData.is_personal?a(\"tr\",{staticClass:\"bg-row-even personal-course-list-content\"},[a(\"td\",{staticClass:\"rightline\",attrs:{colspan:\"2\"}}),a(\"td\",{staticClass:\"personal-course-table\",attrs:{colspan:\"4\"}},[a(\"div\",{class:e.add(\"personal-course-table\")},[a(\"table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"29%\"}}),a(\"col\",{staticStyle:{width:\"34%\"}}),a(\"col\",{staticStyle:{width:\"16%\"}}),a(\"col\",{staticStyle:{width:\"16%\"}})]),a(\"tr\",{staticClass:\"bg-thead th\"},[a(\"th\"),a(\"th\",[e._v(\"课程名称\")]),a(\"th\",[e._v(\"支持预约的\"+e._s(e.$c(\"coach\"))+\"等级\")]),a(\"th\",[e._v(\"授课\"+e._s(e.$c(\"coach\"))+\"数\")]),a(\"th\",[e._v(\"操作\")])]),a(\"tbody\",[a(\"tr\",{staticClass:\"checkbox border-bottom\"},[a(\"td\",{staticClass:\"personal-course-add-buton\",attrs:{colspan:\"5\"}},[a(\"st-button\",{attrs:{block:\"\",type:\"dashed\",icon:\"add\"},on:{click:function(t){return e.addCourse(\"personal\")}}},[e._v(\"\\n                                新增私教课程\\n                              \")])],1)]),a(\"tr\",[a(\"td\",{attrs:{colspan:\"5\"}},[e.personalCourseList.length?e._e():a(\"p\",{staticClass:\"bg-row-even\",staticStyle:{margin:\"0\",\"text-align\":\"center\",padding:\"8px 0\"}},[e._v(\"\\n                                无数据\\n                              \")]),e.personalCourseList.length?a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{ stopPropagation: true }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseList1\"],expression:\"['personalCourseList1']\"}],staticClass:\"personal-course-content-table\"},e._l(e.personalCourseList,(function(t,s){return a(\"li\",{key:t.course_id,staticClass:\"checkbox border-bottom\",class:{\"bg-row-odd\":s%2!==0,\"bg-row-even\":s%2===0}},[a(\"div\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{checked:t.courseChecked},on:{change:function(t){return e.courseItemCheckedChange(t,\"personal\",s)}}})],1),a(\"div\",[e._v(e._s(t.course_name))]),a(\"div\",[a(\"a-dropdown\",{attrs:{placement:\"bottomRight\",trigger:[\"click\"]}},[a(\"a\",{attrs:{href:\"javascript:void(0)\"}},[e._v(\"\\n                                        \"+e._s(t.coachGradeList.length===e.coachList.length?\"全部\":t.coachGradeList.length+\"个\")+\"等级  \\n                                        \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1),a(\"a-checkbox-group\",{class:e.basic(\"personal-dropdown\"),attrs:{slot:\"overlay\"},on:{change:function(a){return e.coachItemChange(a,t.course_id,s)}},slot:\"overlay\",model:{value:t.coachGradeList,callback:function(a){e.$set(t,\"coachGradeList\",a)},expression:\"item.coachGradeList\"}},[a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{\\n                                            stopPropagation: true\\n                                          }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseListCoachGrade\"+s],expression:\"[\\n                                            `personalCourseListCoachGrade${index}`\\n                                          ]\"}],staticClass:\"personal-course-coach-grade-dropdown\"},e._l(e.coachList,(function(t,s){return a(\"li\",{key:s},[a(\"a-checkbox\",{attrs:{value:t.id}},[e._v(\"\\n                                              \"+e._s(t.setting_name)+\"\\n                                            \")])],1)})),0)])],1)],1),a(\"div\",[e._v(e._s(t.coach))]),a(\"div\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(a){return e.removeCourseItem(\"personal\",t.course_id)}}},[e._v(\"\\n                                      删除\\n                                    \")])])])})),0):e._e()])]),a(\"tr\",{staticClass:\"bg-thead checkbox topline\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{indeterminate:e.personalIndeterminate,checked:e.personalCheckAll},on:{change:function(t){return e.checkAllChange(\"personal\")}}})],1),a(\"td\",[e._v(\"批量操作\")]),a(\"td\",[a(\"a-dropdown\",{attrs:{placement:\"bottomRight\",trigger:[\"click\"]},model:{value:e.coachAllOperationDropdownIsShow,callback:function(t){e.coachAllOperationDropdownIsShow=t},expression:\"coachAllOperationDropdownIsShow\"}},[a(\"a\",{attrs:{href:\"javascript:void(0)\"}},[e._v(\"\\n                                  批量设置等级  \\n                                  \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1),a(\"a-checkbox-group\",{staticClass:\"all\",class:e.basic(\"personal-dropdown\"),attrs:{slot:\"overlay\"},on:{change:e.coachAllChange},slot:\"overlay\",model:{value:e.personalAllOperationCoachList,callback:function(t){e.personalAllOperationCoachList=t},expression:\"personalAllOperationCoachList\"}},[a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{ stopPropagation: true }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseListCoachGradeAll\"],expression:\"[\\n                                      'personalCourseListCoachGradeAll'\\n                                    ]\"}],staticClass:\"personal-course-coach-grade-dropdown\"},e._l(e.coachList,(function(t,s){return a(\"li\",{key:s},[a(\"a-checkbox\",{attrs:{value:t.id}},[e._v(\"\\n                                        \"+e._s(t.setting_name)+\"\\n                                      \")])],1)})),0),a(\"div\",{staticClass:\"personal-course-coach-grade-dropdown-button\"},[a(\"a\",{attrs:{href:\"javascript:void(0)\",disabled:!e.personalAllOperationCoachList.length},on:{click:e.coachAllOperationOk}},[e._v(\"\\n                                      确定\\n                                    \")])])])],1)],1),a(\"td\",[e._v(e._s(e.personalAllOperationCoachTotal))]),a(\"td\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(t){return e.removeCourseItems(\"personal\")}}},[e._v(\"\\n                                删除\\n                              \")])])])])])])])]):e._e()])])],1)],2)],1)],1),e.packageData.is_limit?a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"总价\"}},[e._v(e._s(e.all_total)+\"元\")])],1)],1):e._e(),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"售卖价格\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"price\",{rules:[{required:!0,message:\"请输入售卖价格\"}]}],expression:\"[\\n              'price',\\n              { rules: [{ required: true, message: '请输入售卖价格' }] }\\n            ]\"}],attrs:{placeholder:\"请输入售卖价格\",min:0,max:99999.9,float:!0}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n              元\\n            \")])],2)],1)],1)],1),a(\"reserve-is-limit\",{attrs:{form:e.form,reserveIsLimitInfo:e.reserveIsLimitInfo}}),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{staticClass:\"mg-b0\",attrs:{label:\"支持售卖时间\",required:\"\"}},[a(\"div\",{class:e.basic(\"saletime\")},[a(\"a-form-item\",{staticClass:\"page-a-form\"},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"start_time\",{rules:[{validator:e.start_time_validator}]}],expression:\"[\\n                  'start_time',\\n                  { rules: [{ validator: start_time_validator }] }\\n                ]\"}],staticStyle:{width:\"100%\"},attrs:{disabledDate:e.disabledStartDate,format:\"YYYY-MM-DD\",placeholder:\"开始时间\",showToday:!1},on:{openChange:e.handleStartOpenChange,change:e.start_time_change}})],1),a(\"span\",[e._v(\"~\")]),a(\"a-form-item\",{staticClass:\"page-a-form\"},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"end_time\",{rules:[{validator:e.end_time_validator}]}],expression:\"[\\n                  'end_time',\\n                  { rules: [{ validator: end_time_validator }] }\\n                ]\"}],attrs:{disabledDate:e.disabledEndDate,format:\"YYYY-MM-DD\",placeholder:\"结束时间\",showToday:!1,open:e.endOpen},on:{openChange:e.handleEndOpenChange,change:e.end_time_change}})],1)],1)])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"有效时间\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"valid_time\",{initialValue:null,rules:[{required:!0,message:\"请输入有效时间\"}]}],expression:\"[\\n              'valid_time',\\n              {\\n                initialValue: null,\\n                rules: [{ required: true, message: '请输入有效时间' }]\\n              }\\n            ]\"}],attrs:{placeholder:\"请输入有效时间\",min:1,max:99999}},[a(\"a-select\",{staticStyle:{width:\"60px\"},attrs:{slot:\"addonAfter\"},slot:\"addonAfter\",model:{value:e.packageData.valid_time_unit,callback:function(t){e.$set(e.packageData,\"valid_time_unit\",t)},expression:\"packageData.valid_time_unit\"}},e._l(e.unitList,(function(t,s){return a(\"a-select-option\",{key:s,attrs:{value:t.value}},[e._v(\"\\n                \"+e._s(t.label)+\"\\n              \")])})),1)],1)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"允许冻结天数\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"frozen_days\",{initialValue:null,rules:[{required:!0,message:\"请输入允许冻结天数\"}]}],expression:\"[\\n              'frozen_days',\\n              {\\n                initialValue: null,\\n                rules: [{ required: true, message: '请输入允许冻结天数' }]\\n              }\\n            ]\"}],attrs:{placeholder:\"请输入允许冻结天数\",min:1,max:99999}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n              天\\n            \")])],2)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"转让设置\"}},[a(\"div\",{class:e.basic(\"transfer\")},[a(\"a-checkbox\",{class:e.basic(\"transfer-checkbox\"),attrs:{defaultChecked:!!e.packageInfo.is_allow_transfer},on:{change:e.transfer}},[e._v(\"\\n              支持转让\\n            \")]),a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"transfer_rate\",{rules:[{required:0!==e.packageData.is_allow_transfer,message:\"请输入转让值数值\"}]}],expression:\"[\\n                'transfer_rate',\\n                {\\n                  rules: [\\n                    {\\n                      required: packageData.is_allow_transfer !== 0,\\n                      message: '请输入转让值数值'\\n                    }\\n                  ]\\n                }\\n              ]\"}],class:e.basic(\"transfer-input\"),staticStyle:{\"padding-right\":\"0\"},attrs:{min:0,max:1===e.packageData.transfer_unit?100:99999.9,disabled:0===e.packageData.is_allow_transfer,float:2===e.packageData.transfer_unit}},[a(\"a-select\",{staticStyle:{width:\"60px\"},attrs:{slot:\"addonAfter\",disabled:0===e.packageData.is_allow_transfer},on:{change:e.transferUnitChange},slot:\"addonAfter\",model:{value:e.packageData.transfer_unit,callback:function(t){e.$set(e.packageData,\"transfer_unit\",t)},expression:\"packageData.transfer_unit\"}},e._l(e.transferUnitList,(function(t){return a(\"a-select-option\",{key:t.value,attrs:{value:+t.value}},[e._v(\"\\n                  \"+e._s(t.label)+\"\\n                \")])})),1)],1)],1)])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"售卖方式\",required:\"\"}},[a(\"a-checkbox-group\",{model:{value:e.packageData.sale_mode,callback:function(t){e.$set(e.packageData,\"sale_mode\",t)},expression:\"packageData.sale_mode\"}},e._l(e.sellTypeList,(function(t){return a(\"a-checkbox\",{key:t.value,attrs:{disabled:2===t.value,value:t.value}},[e._v(\"\\n              \"+e._s(t.label)+\"\\n            \")])})),1)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:22,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{\"validate-status\":\"error\",help:e.imageErrorText,label:\"封面\",required:\"\"}},[a(\"div\",{class:e.basic(\"upload\")},[a(\"st-image-upload\",{class:e.basic(\"st-upload\"),attrs:{cropperModal:e.cropperModal,sizeLimit:5,list:e.fileList},on:{change:e.fileChange}},[a(\"i\",{class:e.basic(\"st-upload-icon\")}),a(\"div\",{class:e.basic(\"st-upload-text\")},[e._v(\"上传封面\")])]),a(\"div\",{class:e.basic(\"upload-describe\")},[a(\"p\",[e._v(\"\\n                图片格式必须为:png,bmp,jpeg,jpg,gif,建议使用png格式图片,以保存最佳效果\\n              \")]),a(\"p\",[e._v(\"建议尺寸为750像素X422像素,不可大于2m\")])])],1)])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"课程包介绍\"}},[a(\"st-textarea\",{staticClass:\"page-content-card-textarea\",attrs:{maxlength:500,placeholder:\"请输入课程包介绍\"},model:{value:e.packageData.intro,callback:function(t){e.$set(e.packageData,\"intro\",t)},expression:\"packageData.intro\"}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"备注\"}},[a(\"st-textarea\",{staticClass:\"page-content-card-textarea\",attrs:{maxlength:500,placeholder:\"请输入备注\"},model:{value:e.packageData.remarks,callback:function(t){e.$set(e.packageData,\"remarks\",t)},expression:\"packageData.remarks\"}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\" \"}},[a(\"st-button\",{staticClass:\"mr-8\",attrs:{type:\"primary\",loading:e.editLoading.editPackage},on:{click:e.save}},[e._v(\"\\n            保存\\n          \")])],1)],1)],1)],1)],1)},i=[],r=(a(\"2fdb\"),a(\"6762\"),a(\"ac6a\"),a(\"c32d\")),o=a.n(r),n=a(\"97ed\"),c=a(\"3997\"),l=a(\"6740\"),u=a(\"a305\"),p=a(\"5c8a\"),d=a(\"3a59\"),m=a(\"73c0\"),_=a(\"48de\"),h=a(\"e98c\"),g=a(\"7ce1\"),f={name:\"ShopRangePackageEdit\",serviceInject:function(){return{editPackageService:_[\"EditRangePackageService\"]}},rxState:function(){return{transferUnitList:this.editPackageService.transferUnitList$,sellTypeList:this.editPackageService.sellTypeList$,unitList:this.editPackageService.unitList$,editLoading:this.editPackageService.loading$,coachList:this.editPackageService.coachList$,packageInfo:this.editPackageService.packageInfo$,limitType:this.editPackageService.limitType$}},components:{StImageUpload:g[\"a\"],ReserveIsLimit:n[\"a\"]},modals:{CourseSelectCourse:h[\"a\"]},bem:{add:\"page-shop-add-range-package\",basic:\"page-shop-add-basic-package\"},data:function(){return{packageData:{price:void 0,is_limit:0,is_team:0,team_times:void 0,team_unit_price:void 0,team_range:[],is_personal:0,personal_times:void 0,personal_unit_price:void 0,personal_range:[],start_time:\"\",end_time:\"\",valid_time:void 0,valid_time_unit:1,frozen_days:void 0,sale_mode:[2],is_allow_transfer:0,transfer_rate:void 0,transfer_unit:1,image:{image_id:null,image_key:\"\"},intro:\"\",remarks:\"\"},courseIsFirstInput:!0,teamCourseList:[],teamCourseListIsShow:!1,teamIndeterminate:!1,teamCheckAll:!1,personalCourseList:[],personalCoachTotalList:{},personalCoachListHistory:[],personalAllOperationCoachList:[],personalAllOperationCoachTotal:0,personalCourseListIsShow:!1,personalIndeterminate:!1,personalCheckAll:!1,coachAllOperationDropdownIsShow:!1,courseIsNone:!1,courseErrorText:\"\",form:this.$form.createForm(this),start_time:null,end_time:null,reserveIsLimitInfo:{},endOpen:!1,appConfig:!0,imageIsNone:!1,imageErrorText:\"\",fileList:[],cropperModal:{}}},mounted:function(){this.init()},methods:{limitChange:function(e){var t=e.target.value;this.packageData.is_limit=+t,t?(this.packageData.team_times=void 0,this.packageData.personal_times=void 0,this.form.setFieldsValue({team_times:void 0,personal_times:void 0})):(this.packageData.team_times=1,this.packageData.personal_times=1,this.form.setFieldsValue({team_times:1,personal_times:1}))},init:function(){var e=this;this.packageInfo.is_team||(this.packageInfo.team_times=void 0,this.packageInfo.team_unit_price=void 0,this.packageInfo.team_range=[]),this.packageInfo.is_personal||(this.packageInfo.personal_times=void 0,this.packageInfo.personal_unit_price=void 0,this.packageInfo.personal_range=[]);var t=this.packageInfo,a=t.reserve_is_limit,s=t.reserve_limit_day,i=t.reserve_limit_times;this.reserveIsLimitInfo={reserve_is_limit:a,reserve_limit_day:s,reserve_limit_times:i},this.packageInfo.is_allow_transfer||(this.packageInfo.transfer_rate=void 0),this.form.setFieldsValue({support_num:this.packageInfo.support_num,is_limit:this.packageInfo.is_limit,price:this.packageInfo.price,start_time:o()(this.packageInfo.start_time),end_time:o()(this.packageInfo.end_time),valid_time:this.packageInfo.valid_time,frozen_days:this.packageInfo.frozen_days,transfer_rate:this.packageInfo.transfer_rate}),this.packageData.is_limit=this.packageInfo.is_limit,this.packageData.is_team=this.packageInfo.is_team,this.packageData.team_times=this.packageInfo.team_times,this.packageData.team_unit_price=this.packageInfo.team_unit_price,Object(c[\"a\"])(this.packageInfo.team_range,(function(t){e.teamCourseList.push({courseChecked:!1,course_category:t.course_category,course_id:t.course_id,course_name:t.course_name,course_type:t.course_type})})),this.packageData.is_personal=this.packageInfo.is_personal,this.packageData.personal_times=this.packageInfo.personal_times,this.packageData.personal_unit_price=this.packageInfo.personal_unit_price,Object(c[\"a\"])(this.packageInfo.personal_range,(function(t){var a=[];t.coach_level.forEach((function(e){a.push(e.id)}));var s=Object(l[\"a\"])(e.coachList,(function(e){return a.includes(e.id)})),i=Object(u[\"a\"])(s,(function(e,t){return e+t.coach_number}),0);e.personalCourseList.push({courseChecked:!1,course_category:t.course_category,course_id:t.course_id,course_name:t.course_name,course_type:t.course_type,coachGradeList:a,coach:i}),e.personalCoachTotalList[t.course_id]=e.personalCoachTotalList[t.course_id]||{},e.personalCoachTotalList[t.course_id].list=Object(p[\"a\"])(t.coach_level),e.personalCoachTotalList[t.course_id].total=i,e.personalCoachListHistory.push(Object(p[\"a\"])(t.coach_level.map((function(e){return e.id}))))})),this.start_time=this.packageInfo.start_time,this.end_time=this.packageInfo.end_time,this.packageData.valid_time_unit=this.packageInfo.valid_time_unit,this.packageData.is_allow_transfer=this.packageInfo.is_allow_transfer,this.packageData.transfer_unit=this.packageInfo.transfer_unit,this.packageData.sale_mode=this.packageInfo.sale_mode,this.fileList=[this.packageInfo.image],this.packageData.image.image_id=this.fileList[0].image_id,this.packageData.image.image_key=this.fileList[0].image_key,this.imageIsNone=!1,this.imageErrorText=\"\",this.packageData.intro=this.packageInfo.intro,this.packageData.remarks=this.packageInfo.remarks},save:function(){var e=this;this.course_validator(),this.image_validator(),this.form.validateFieldsAndScroll((function(t,a){t||e.courseIsNone||e.imageIsNone||(e.packageData.price=a.price,e.packageData.valid_time=a.valid_time,e.packageData.frozen_days=a.frozen_days,e.packageData.support_num=a.support_num,e.packageData.reserve_is_limit=a.reserve_is_limit,e.packageData.reserve_limit_day=a.reserve_limit_day,e.packageData.reserve_limit_times=+a.reserve_limit_times,e.packageData.transfer_rate=e.packageData.is_allow_transfer?+a.transfer_rate:void 0,e.packageData.start_time=\"string\"===typeof e.start_time?e.start_time:\"\".concat(e.start_time.format(\"YYYY-MM-DD\")),e.packageData.end_time=\"string\"===typeof e.end_time?e.end_time:\"\".concat(e.end_time.format(\"YYYY-MM-DD\")),e.packageData.team_range=[],e.teamCourseList.forEach((function(t){e.packageData.team_range.push(t.course_id)})),e.packageData.personal_range=[],e.personalCourseList.forEach((function(t){e.packageData.personal_range.push({course_id:t.course_id,coach_level:Object(p[\"a\"])(t.coachGradeList)})})),e.packageData.is_team&&(e.packageData.team_unit_price=+e.packageData.team_unit_price),e.packageData.is_personal&&(e.packageData.personal_unit_price=+e.packageData.personal_unit_price),e.packageData.album_id=e.packageInfo.album_id,e.editPackageService.editPackage(e.packageData).subscribe((function(t){e.$router.push({path:\"/shop/product/course/manage/package/list\"})})))}))},teamCheckboxChange:function(e){this.packageData.is_team=+e.target.checked,this.courseIsFirstInput=!1,this.teamCourseListIsShow=+e.target.checked},personalCheckboxChange:function(e){this.packageData.is_personal=+e.target.checked,this.courseIsFirstInput=!1,this.personalCourseListIsShow=+e.target.checked},teamCourseListShow:function(){this.teamCourseListIsShow=!this.teamCourseListIsShow},personalCourseListShow:function(){this.personalCourseListIsShow=!this.personalCourseListIsShow},addCourse:function(e){var t=this;\"team\"===e?this.$modalRouter.push({name:\"course-select-course\",props:{type:e,courses:this.teamCourseList},on:{ok:function(e){e.list.forEach((function(e){e.courseChecked=!1})),t.teamCourseList=Object(p[\"a\"])(e.list)}}}):\"personal\"===e&&this.$modalRouter.push({name:\"course-select-course\",props:{type:e,courses:this.personalCourseList},on:{ok:function(e){var a=[];Object(c[\"a\"])(t.coachList,(function(e){a.push(e.id)}));var s=Object(u[\"a\"])(t.coachList,(function(e,t){return e+t.coach_number}),0);e.list.forEach((function(e){e.courseChecked=!1,e.coachGradeList=a,e.coach=s})),Object(c[\"a\"])(t.personalCoachTotalList,(function(a,s){Object(c[\"a\"])(e.list,(function(e){+e.course_id===+s&&(e.coachGradeList=Object(p[\"a\"])(a.list),e.coach=Object(p[\"a\"])(a.total))})),e.list.some((function(e){return+e.course_id===+s}))||delete t.personalCoachTotalList[s]})),t.personalCoachListHistory=[],e.list.forEach((function(e){t.personalCoachListHistory.push(e.coachGradeList)})),t.personalCourseList=Object(p[\"a\"])(e.list),t.personalCourseList.forEach((function(e){e.coachGradeList&&e.coachGradeList.length>0&&(e.coachGradeList=e.coachGradeList.map((function(e){return e.id||e})))}))}}})},removeCourseItem:function(e,t){if(\"team\"===e){var a=Object(p[\"a\"])(this.teamCourseList);Object(d[\"a\"])(a,(function(e){return e.course_id===t})),this.teamCourseList=a}else if(\"personal\"===e){var s=Object(p[\"a\"])(this.personalCourseList);Object(d[\"a\"])(s,(function(e){return e.course_id===t})),this.personalCourseList=s;var i=Object(p[\"a\"])(this.personalCoachTotalList);delete i[t],this.personalCoachTotalList=i}},removeCourseItems:function(e){if(\"team\"===e){var t=Object(p[\"a\"])(this.teamCourseList);Object(d[\"a\"])(t,(function(e){return e.courseChecked})),this.teamCourseList=t}else if(\"personal\"===e){var a=Object(p[\"a\"])(this.personalCourseList),s=Object(d[\"a\"])(a,(function(e){return e.courseChecked}));this.personalCourseList=a;var i=Object(p[\"a\"])(this.personalCoachTotalList);s.forEach((function(e){delete i[e.course_id]})),this.personalCoachTotalList=i}},courseItemCheckedChange:function(e,t,a){\"team\"===t?this.teamCourseList[a].courseChecked=e.target.checked:\"personal\"===t&&(this.personalCourseList[a].courseChecked=e.target.checked)},checkAllChange:function(e){var t=this;\"team\"===e?this.teamCourseList.forEach((function(e){e.courseChecked=!t.teamCheckAll})):\"personal\"===e&&this.personalCourseList.forEach((function(e){e.courseChecked=!t.personalCheckAll}))},coachItemChange:function(e,t,a){if(e.length){this.personalCoachListHistory[a]=Object(p[\"a\"])(e),this.personalCoachTotalList[t]={},this.personalCoachTotalList[t].list=Object(p[\"a\"])(e);var s=Object(l[\"a\"])(this.coachList,(function(t){return e.includes(t.id)})),i=Object(u[\"a\"])(s,(function(e,t){return e+t.coach_number}),0);this.personalCoachTotalList[t].total=i,this.personalCourseList.forEach((function(e){e.course_id===t&&(e.coach=i)}))}else this.personalCourseList[a].coachGradeList=this.personalCoachListHistory[a]},coachAllChange:function(e){var t=Object(l[\"a\"])(this.coachList,(function(t){return e.includes(t.id)}));this.personalAllOperationCoachTotal=Object(u[\"a\"])(t,(function(e,t){return e+t.coach_number}),0)},coachAllOperationOk:function(){var e=this;Object(c[\"a\"])(this.personalCourseList,(function(t){t.courseChecked&&(t.coachGradeList=Object(p[\"a\"])(e.personalAllOperationCoachList),t.coach=e.personalAllOperationCoachTotal,e.personalCoachTotalList[t.course_id]={},e.personalCoachTotalList[t.course_id].list=Object(p[\"a\"])(e.personalAllOperationCoachList),e.personalCoachTotalList[t.course_id].total=e.personalAllOperationCoachTotal)})),this.personalCoachListHistory=[],Object(c[\"a\"])(this.personalCourseList,(function(t){e.personalCoachListHistory.push(t.coachGradeList)})),this.personalAllOperationCoachList=[],this.personalAllOperationCoachTotal=0,this.coachAllOperationDropdownIsShow=!1},course_validator:function(){this.courseIsFirstInput=!1;var e=!1,t=!1;e=!this.packageData.is_team||this.team_total&&this.teamCourseList.length,t=!this.packageData.is_personal||this.personal_total&&this.personalCourseList.length,e&&t&&(this.packageData.is_team||this.packageData.is_personal)?(this.courseIsNone=!1,this.courseErrorText=\"\"):(this.courseIsNone=!0,this.courseErrorText=\"请输入上课范围\")},image_validator:function(){\"\"!==this.packageData.image.image_key?(this.imageIsNone=!1,this.imageErrorText=\"\"):(this.imageIsNone=!0,this.imageErrorText=\"请上传封面\")},transfer:function(e){this.packageData.is_allow_transfer=+e.target.checked,this.packageData.transfer_rate=void 0,this.form.resetFields([\"transfer_rate\"])},fileChange:function(e){e.length?(this.packageData.image.image_id=e[0].image_id,this.packageData.image.image_key=e[0].image_key,this.imageIsNone=!1,this.imageErrorText=\"\"):(this.packageData.image.image_id=null,this.packageData.image.image_key=\"\",this.imageIsNone=!0,this.imageErrorText=\"请上传封面\")},transferUnitChange:function(){this.packageData.transfer_rate=void 0,this.form.setFieldsValue({transfer_rate:void 0})},start_time_validator:function(e,t,a){t?a():a(\"请选择开始售卖时间\")},end_time_validator:function(e,t,a){t?a():a(\"请选择结束售卖时间\")},start_time_change:function(e){this.start_time=Object(p[\"a\"])(e)},handleStartOpenChange:function(e){e||(this.endOpen=!0)},disabledStartDate:function(e){var t=this.end_time;if(!t)return e.valueOf()<o()().startOf(\"day\").valueOf();var a=t.valueOf()>o()().add(30,\"y\").valueOf()?o()(t).subtract(30,\"y\").valueOf():o()().startOf(\"day\").valueOf();return e.valueOf()<a||e.valueOf()>o()(t).valueOf()},end_time_change:function(e){this.end_time=Object(p[\"a\"])(e)},handleEndOpenChange:function(e){this.endOpen=e},disabledEndDate:function(e){var t=this.start_time;return t&&(e.valueOf()>=o()(t).add(30,\"y\").valueOf()||e.valueOf()<o()(t).valueOf())||e.valueOf()<o()().startOf(\"day\").valueOf()},moment:o.a},watch:{teamCourseList:{deep:!0,handler:function(e){var t=!1,a=!1;t=Object(m[\"a\"])(e,(function(e){return e.courseChecked})),a=Object(m[\"a\"])(e,(function(e){return!e.courseChecked})),this.teamIndeterminate=!t&&!a,this.teamCheckAll=!!e.length&&t}},personalCourseList:{deep:!0,handler:function(e){var t=!1,a=!1;t=Object(m[\"a\"])(e,(function(e){return e.courseChecked})),a=Object(m[\"a\"])(e,(function(e){return!e.courseChecked})),this.personalIndeterminate=!t&&!a,this.personalCheckAll=!!e.length&&t}}},computed:{team_total:function(){return 0===this.packageData.is_limit?1e8:+this.packageData.team_times&&+this.packageData.team_unit_price?this.packageData.team_times*(10*this.packageData.team_unit_price)/10:0},personal_total:function(){if(0===this.packageData.is_limit)return 1e8;this.packageData.personal_unit_price;return+this.packageData.personal_times&&+this.packageData.personal_unit_price?this.packageData.personal_times*(10*this.packageData.personal_unit_price)/10:0},all_total:function(){var e=this.packageData.is_team?this.team_total:0,t=this.packageData.is_personal?this.personal_total:0;return e+t}}},v=f,k=a(\"2877\"),b=Object(k[\"a\"])(v,s,i,!1,null,null,null);t[\"default\"]=b.exports},\"73c0\":function(e,t,a){\"use strict\";function s(e,t){var a=-1,s=null==e?0:e.length;while(++a<s)if(!t(e[a],a,e))return!1;return!0}var i=s,r=a(\"dba9\");function o(e,t){var a=!0;return Object(r[\"a\"])(e,(function(e,s,i){return a=!!t(e,s,i),a})),a}var n=o,c=a(\"7f2c\"),l=a(\"ff51\"),u=a(\"5c59\");function p(e,t,a){var s=Object(l[\"a\"])(e)?i:n;return a&&Object(u[\"a\"])(e,t,a)&&(t=void 0),s(e,Object(c[\"a\"])(t,3))}t[\"a\"]=p},\"97ed\":function(e,t,a){\"use strict\";var s,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:12,xs:22,offset:1}},[a(\"div\",{staticClass:\"page-package__reserve-limit\"},[a(\"st-form-item\",{attrs:{label:\"约课限制\",required:\"\"}},[a(\"a-radio-group\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"reserve_is_limit\",{initialValue:this.reserveIsLimitInfo.reserve_is_limit}],expression:\"[\\n            'reserve_is_limit',\\n            {\\n              initialValue: this.reserveIsLimitInfo.reserve_is_limit\\n            }\\n          ]\"}],attrs:{options:e.reserveIsLimit$},on:{change:e.onChangeReserveIsliimt}})],1),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.reserveIsLimit,expression:\"reserveIsLimit\"}],staticClass:\"page-package__reserve-limit-true\"},[a(\"st-form-item\",{attrs:{label:\"\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"reserve_limit_times\",{initialValue:this.reserveIsLimitInfo.reserve_limit_times}],expression:\"[\\n              'reserve_limit_times',\\n              {\\n                initialValue: this.reserveIsLimitInfo.reserve_limit_times\\n              }\\n            ]\"}],staticStyle:{width:\"180px\"},attrs:{min:0,max:999999}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"reserve_limit_day\",{initialValue:this.reserveIsLimitInfo.reserve_limit_day||1}],expression:\"[\\n                'reserve_limit_day',\\n                {\\n                  initialValue: this.reserveIsLimitInfo.reserve_limit_day || 1\\n                }\\n              ]\"}],attrs:{slot:\"addonBefore\",options:e.reserveLimitDay$},slot:\"addonBefore\"}),a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n              节\\n            \")])],2)],1)],1)],1)])],1)},r=[],o=(a(\"6762\"),a(\"2fdb\"),a(\"d225\")),n=a(\"9ab4\"),c=a(\"0cd5\"),l=a(\"2138\"),u=a(\"ebb6\"),p=function e(t){Object(o[\"a\"])(this,e),this.userService=t,this.reserveLimitDay$=this.userService.getOptions$(\"package_course.reserve_limit_day\").pipe(Object(u[\"a\"])((function(e){return e.map((function(e){return e.label=e.label.includes(\"每\")?e.label:\"每\".concat(e.label),e}))}))),this.reserveIsLimit$=this.userService.getOptions$(\"package_course.reserve_is_limit\")};p=Object(n[\"b\"])([Object(c[\"b\"])(),Object(n[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof l[\"a\"]&&l[\"a\"])?s:Object])],p);var d={name:\"ReserveIsLimitFormItem\",serviceInject:function(){return{reserveIsLimitService:p}},rxState:function(){var e=this.reserveIsLimitService,t=e.reserveLimitDay$,a=e.reserveIsLimit$;return{reserveLimitDay$:t,reserveIsLimit$:a}},data:function(){return{reserveIsLimit:0}},props:{reserveIsLimitInfo:{type:Object,default:function(){return{reserve_is_limit:0,reserve_limit_day:1,reserve_limit_times:3}}}},watch:{\"reserveIsLimitInfo.reserve_is_limit\":function(e,t){this.reserveIsLimit=e}},methods:{onChangeReserveIsliimt:function(e){this.reserveIsLimit=e.target.value}}},m=d,_=a(\"2877\"),h=Object(_[\"a\"])(m,i,r,!1,null,null,null);t[\"a\"]=h.exports},acb4:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"biz-add-select\")},i=[],r=a(\"a09f\"),o={name:\"ShopAddPackageType\",components:{BizAddSelect:r[\"a\"]}},n=o,c=a(\"2877\"),l=Object(c[\"a\"])(n,s,i,!1,null,null,null);t[\"default\"]=l.exports},b985:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"AddRangePackageService\",(function(){return f}));var s,i,r,o=a(\"d225\"),n=a(\"b0b4\"),c=a(\"9ab4\"),l=a(\"0cd5\"),u=a(\"df29\"),p=a(\"bf02\"),d=a(\"ebb6\"),m=a(\"c4cc\"),_=a(\"2138\"),h=a(\"3a59\"),g=a(\"e69b\"),f=function(){function e(t,a,s){var i=this;Object(o[\"a\"])(this,e),this.userService=t,this.msg=a,this.packageApi=s,this.appConfig=!0,this.limitType$=this.userService.getOptions$(\"package_course.is_limit\"),this.unitList$=this.userService.getOptions$(\"package_course.valid_time_unit\"),this.transferUnitList$=this.userService.getOptions$(\"package_course.transfer_unit\"),this.sellTypeList$=this.userService.getOptions$(\"package_course.sale_mode\").pipe(Object(d[\"a\"])((function(e){return i.appConfig||Object(h[\"a\"])(e,(function(e){return 1===e.value})),e}))),this.loading$=new u[\"d\"]({}),this.coachList$=new u[\"d\"]({})}return Object(n[\"a\"])(e,[{key:\"addPackage\",value:function(e){return this.packageApi.addCoursePackage(e,\"range\")}},{key:\"onsalePackage\",value:function(e){return this.packageApi.onsaleCoursePackage(e)}},{key:\"add\",value:function(e){return this.addPackage(e)}},{key:\"addAndOnsale\",value:function(e){var t=this;return this.packageApi.addAndOnSale(e,\"range\").pipe(Object(m[\"a\"])((function(e){t.msg.success({content:\"课程包新增成功\"})})))}},{key:\"getCoachList\",value:function(){var e=this;return this.packageApi.getCoachList().pipe(Object(m[\"a\"])((function(t){e.coachList$.commit((function(){return t.list}))})))}},{key:\"beforeEach\",value:function(){return this.getCoachList()}}]),e}();Object(c[\"b\"])([Object(u[\"c\"])(),Object(c[\"d\"])(\"design:type\",Function),Object(c[\"d\"])(\"design:paramtypes\",[Object]),Object(c[\"d\"])(\"design:returntype\",void 0)],f.prototype,\"add\",null),Object(c[\"b\"])([Object(u[\"c\"])(),Object(c[\"d\"])(\"design:type\",Function),Object(c[\"d\"])(\"design:paramtypes\",[Object]),Object(c[\"d\"])(\"design:returntype\",void 0)],f.prototype,\"addAndOnsale\",null),f=Object(c[\"b\"])([Object(l[\"b\"])(),Object(c[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof _[\"a\"]&&_[\"a\"])?s:Object,\"function\"===typeof(i=\"undefined\"!==typeof g[\"a\"]&&g[\"a\"])?i:Object,\"function\"===typeof(r=\"undefined\"!==typeof p[\"d\"]&&p[\"d\"])?r:Object])],f)},bc08:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"AddUnlimitPackageService\",(function(){return f}));var s,i,r,o=a(\"d225\"),n=a(\"b0b4\"),c=a(\"9ab4\"),l=a(\"0cd5\"),u=a(\"df29\"),p=a(\"bf02\"),d=a(\"ebb6\"),m=a(\"c4cc\"),_=a(\"2138\"),h=a(\"3a59\"),g=a(\"e69b\"),f=function(){function e(t,a,s){var i=this;Object(o[\"a\"])(this,e),this.userService=t,this.msg=a,this.packageApi=s,this.appConfig=!0,this.loading$=new u[\"d\"]({}),this.unitList$=this.userService.getOptions$(\"package_course.valid_time_unit\"),this.transferUnitList$=this.userService.getOptions$(\"package_course.transfer_unit\"),this.sellTypeList$=this.userService.getOptions$(\"package_course.sale_mode\").pipe(Object(d[\"a\"])((function(e){return i.appConfig||Object(h[\"a\"])(e,(function(e){return 1===e.value})),e})))}return Object(n[\"a\"])(e,[{key:\"addPackage\",value:function(e){return this.packageApi.addCoursePackage(e,\"unlimited\")}},{key:\"onsalePackage\",value:function(e){return this.packageApi.onsaleCoursePackage(e)}},{key:\"add\",value:function(e){return this.addPackage(e)}},{key:\"addAndOnsale\",value:function(e){var t=this;return this.packageApi.addAndOnSale(e,\"unlimited\").pipe(Object(m[\"a\"])((function(e){t.msg.success({content:\"课程包新增成功\"})})))}}]),e}();Object(c[\"b\"])([Object(u[\"c\"])(),Object(c[\"d\"])(\"design:type\",Function),Object(c[\"d\"])(\"design:paramtypes\",[Object]),Object(c[\"d\"])(\"design:returntype\",void 0)],f.prototype,\"add\",null),Object(c[\"b\"])([Object(u[\"c\"])(),Object(c[\"d\"])(\"design:type\",Function),Object(c[\"d\"])(\"design:paramtypes\",[Object]),Object(c[\"d\"])(\"design:returntype\",void 0)],f.prototype,\"addAndOnsale\",null),f=Object(c[\"b\"])([Object(l[\"b\"])(),Object(c[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof _[\"a\"]&&_[\"a\"])?s:Object,\"function\"===typeof(i=\"undefined\"!==typeof g[\"a\"]&&g[\"a\"])?i:Object,\"function\"===typeof(r=\"undefined\"!==typeof p[\"d\"]&&p[\"d\"])?r:Object])],f)},e0cd:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"section\",{staticClass:\"page-shop-info-fix-package\",class:e.basic()},[a(\"st-panel\",[a(\"div\",{class:e.basic(\"package-info\")},[a(\"div\",[a(\"h2\",{staticClass:\"title\"},[e._v(e._s(e.packageInfo.course_name))]),a(\"p\",{class:e.basic(\"price-date\")},[a(\"span\",{class:e.basic(\"price\")},[a(\"st-icon\",{staticClass:\"mg-r8\",attrs:{type:\"money\",color:\"#FFA900\"}}),a(\"span\",{staticClass:\"label\"},[e._v(\"售价：\")]),e._v(\"\\n            \"+e._s(e.packageInfo.price)+\"元\\n          \")],1),a(\"span\",{class:e.basic(\"date\")},[a(\"st-icon\",{staticClass:\"mg-r8\",attrs:{type:\"time\",color:\"#1EC7DD\"}}),a(\"span\",{staticClass:\"label\"},[e._v(\"售卖时间：\")]),e._v(\"\\n            \"+e._s(e.packageInfo.start_time)+\"~\"+e._s(e.packageInfo.end_time)+\"\\n          \")],1)]),a(\"st-info\",[a(\"st-info-item\",{attrs:{label:\"支持使用人数\"}},[e._v(\"\\n            \"+e._s(e.packageInfo.support_num)+\"\\n          \")])],1)],1),a(\"div\",{class:e.basic(\"image\")},[a(\"img\",{attrs:{src:e._f(\"imgFilter\")(e.packageInfo.image_url,{w:280,h:158}),width:\"280\",height:\"158\",alt:\"封面\"}})])])]),a(\"st-panel\",{staticClass:\"mg-t16\"},[a(\"st-info\",[a(\"st-info-item\",{staticClass:\"mg-b8\",attrs:{label:\"上课范围\"}}),a(\"div\",{staticClass:\"mg-b24\",class:e.info(\"course\")},[a(\"st-form-table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"12%\"}}),a(\"col\",{staticStyle:{width:\"7%\"}}),a(\"col\",{staticStyle:{width:\"53%\"}}),a(\"col\",{staticStyle:{width:\"10%\"}}),a(\"col\",{staticStyle:{width:\"18%\"}})]),a(\"tr\",{staticClass:\"bg-thead table-header\"},[a(\"th\",{staticClass:\"rightline tg-c\"},[e._v(\"课程类型\")]),a(\"th\"),a(\"th\",[e._v(\"节数（节）\")]),a(\"th\",[e._v(\"总价(元)\")]),a(\"th\")]),a(\"tbody\",[e.packageInfo.is_team?a(\"tr\",{staticClass:\"bg-row-odd checkbox\"},[a(\"td\",{staticClass:\"rightline tg-c\"},[e._v(\"团体课程\")]),a(\"td\"),a(\"td\",[e._v(e._s(e.packageInfo.team_times_total))]),a(\"td\",[e._v(e._s(e.packageInfo.team_unit_price_total))]),a(\"td\",{staticClass:\"overflow-hidden set-course-button\"},[e._v(\"\\n                可预约\"+e._s(e.packageInfo.team_range.length)+\"种课程\\n              \")])]):e._e(),e.packageInfo.is_team?a(\"tr\",{staticClass:\"bg-row-odd team-course-list-content\"},[a(\"td\",{staticClass:\"rightline tg-c\"}),a(\"td\",{staticClass:\"team-course-table\",attrs:{colspan:\"4\"}},[a(\"div\",{class:e.info(\"team-course-table\")},[a(\"table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"6.1%\"}}),a(\"col\",{staticStyle:{width:\"21.1%\"}}),a(\"col\",{staticStyle:{width:\"22.5%\"}}),a(\"col\",{staticStyle:{width:\"19.3%\"}}),a(\"col\",{staticStyle:{width:\"20%\"}}),a(\"col\",{staticStyle:{width:\"11%\"}})]),a(\"tr\",{staticClass:\"bg-thead th border-bottom\"},[a(\"th\"),a(\"th\",[e._v(\"课程名称\")]),a(\"th\",[e._v(\"上课门店\")]),a(\"th\",[e._v(\"节数（节）\")]),a(\"th\",[e._v(\"课时费(元)\")]),a(\"th\",[e._v(\"总价(元)\")])]),a(\"tbody\",[a(\"tr\",[a(\"td\",{attrs:{colspan:\"6\"}},[a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"teamCourseList2\"],expression:\"['teamCourseList2']\"}],staticClass:\"team-course-content-table\"},e._l(e.packageInfo.team_range,(function(t,s){return a(\"li\",{key:t.course_id,staticClass:\"checkbox\",class:{\"border-bottom\":s+1!==e.packageInfo.team_range.length,\"bg-row-odd\":s%2===0,\"bg-row-even\":s%2!==0}},[a(\"div\",{staticClass:\"tg-c\"}),a(\"div\",[a(\"st-overflow-text\",{attrs:{\"max-width\":\"120px\",value:t.course_name}})],1),a(\"div\",[a(\"st-overflow-text\",{attrs:{\"max-width\":\"120px\",value:t.shop_name}})],1),a(\"div\",[e._v(e._s(t.team_times))]),a(\"div\",[e._v(e._s(t.team_unit_price))]),a(\"div\",[e._v(\"\\n                                \"+e._s(t.team_times*t.team_unit_price)+\"\\n                              \")])])})),0)])])])])])])]):e._e(),e.packageInfo.is_personal?a(\"tr\",{staticClass:\"bg-row-even checkbox topline\"},[a(\"td\",{staticClass:\"rightline tg-c\"},[e._v(\"私教课程\")]),a(\"td\"),a(\"td\",[e._v(e._s(e.packageInfo.personal_times_total))]),a(\"td\",[e._v(e._s(e.packageInfo.personal_unit_price_total))]),a(\"td\",{staticClass:\"overflow-hidden set-course-button\"},[e._v(\"\\n                可预约\"+e._s(e.packageInfo.personal_range.length)+\"种课程\\n              \")])]):e._e(),e.packageInfo.is_personal?a(\"tr\",{staticClass:\"bg-row-even personal-course-list-content\"},[a(\"td\",{staticClass:\"rightline tg-c\"}),a(\"td\",{staticClass:\"personal-course-table\",attrs:{colspan:\"4\"}},[a(\"div\",{class:e.info(\"personal-course-table\")},[a(\"table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"6.1%\"}}),a(\"col\",{staticStyle:{width:\"16.2%\"}}),a(\"col\",{staticStyle:{width:\"13.7%\"}}),a(\"col\",{staticStyle:{width:\"13.7%\"}}),a(\"col\",{staticStyle:{width:\"18.8%\"}}),a(\"col\",{staticStyle:{width:\"20%\"}}),a(\"col\",{staticStyle:{width:\"11.5%\"}})]),a(\"tr\",{staticClass:\"bg-thead th border-bottom\"},[a(\"th\"),a(\"th\",[e._v(\"课程名称\")]),a(\"th\",[e._v(\"上课门店\")]),a(\"th\",[e._v(\"节数（节）\")]),a(\"th\",[e._v(\"课时费(元)\")]),a(\"th\",[e._v(\"支持预约的\"+e._s(e.$c(\"coach\"))+\"等级\")]),a(\"th\",[e._v(\"总价(元)\")])]),a(\"tbody\",[a(\"tr\",[a(\"td\",{attrs:{colspan:\"7\"}},[a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseList1\"],expression:\"['personalCourseList1']\"}],staticClass:\"personal-course-content-table\"},e._l(e.packageInfo.personal_range,(function(t,s){return a(\"li\",{key:t.course_id,staticClass:\"checkbox\",class:{\"border-bottom\":s+1!==e.packageInfo.personal_range.length,\"bg-row-odd\":s%2===0,\"bg-row-even\":s%2!==0}},[a(\"div\"),a(\"div\",[e._v(e._s(t.course_name))]),a(\"div\",[a(\"st-overflow-text\",{attrs:{\"max-width\":\"120px\",value:t.shop_name}})],1),a(\"div\",[e._v(e._s(t.personal_times))]),a(\"div\",[e._v(e._s(t.personal_unit_price))]),a(\"div\",[a(\"a-dropdown\",{attrs:{placement:\"bottomRight\"}},[a(\"a\",{attrs:{href:\"javascript:void(0)\"}},[e._v(\"\\n                                    \"+e._s(e.$c(\"coach\"))+\"等级范围  \\n                                    \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1),a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{ stopPropagation: true }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseListCoachGrade\"+s],expression:\"[\\n                                      `personalCourseListCoachGrade${index}`\\n                                    ]\"}],staticClass:\"personal-course-coach-grade-dropdown\",class:e.basic(\"personal-dropdown\"),attrs:{slot:\"overlay\"},slot:\"overlay\"},e._l(t.coach_level,(function(t,s){return a(\"li\",{key:s},[e._v(\"\\n                                      \"+e._s(t.setting_name)+\"\\n                                    \")])})),0)])],1),a(\"div\",[e._v(\"\\n                                \"+e._s(t.personal_times*t.personal_unit_price)+\"\\n                              \")])])})),0)])])])])])])]):e._e()])])],1),a(\"st-info-item\",{staticClass:\"mg-b24\",attrs:{label:\"有效时间\"}},[e._v(\"\\n        购买后\"+e._s(e.packageInfo.valid_time)+e._s(e._f(\"enumFilter\")(e.packageInfo.valid_time_unit,\"package_course.valid_time_unit\"))+\"有效\\n      \")]),a(\"st-info-item\",{staticClass:\"mg-b24\",attrs:{label:\"允许冻结天数\"}},[e._v(\"\\n        \"+e._s(e.packageInfo.frozen_days)+\"天\\n      \")]),a(\"st-info-item\",{staticClass:\"mg-b24\",attrs:{label:\"转让设置\"}},[e._v(\"\\n        \"+e._s(e.transferText)+\"\\n      \")]),a(\"st-info-item\",{staticClass:\"mg-b24\",attrs:{label:\"售卖方式\"}},e._l(e.packageInfo.sale_mode,(function(t,s){return a(\"span\",{key:s},[s>0?a(\"i\",[e._v(\"/\")]):e._e(),e._v(\"\\n          \"+e._s(e._f(\"enumFilter\")(t,\"package_course.sale_mode\"))+\"\\n        \")])})),0),a(\"st-info-item\",{staticClass:\"mg-b8\",attrs:{label:\"课程介绍\"}},[a(\"p\",{domProps:{innerHTML:e._s(e.packageInfo.intro)}})]),a(\"st-info-item\",{staticClass:\"mg-b8\",attrs:{label:\"备注\"}},[a(\"p\",{class:e.basic(\"remarks\")},[e._v(e._s(e.packageInfo.remarks||\"无\"))])])],1)],1)],1)},i=[],r=a(\"0236\"),o={name:\"ShopRangePackageInfo\",serviceInject:function(){return{infoFixPackageService:r[\"InfoFixPackageService\"]}},rxState:function(){return{packageInfo:this.infoFixPackageService.packageInfo$}},bem:{basic:\"page-shop-info-basic-package\",info:\"page-shop-info-fix-package\"},computed:{transferText:function(){return this.packageInfo.is_allow_transfer?\"支持转让\":\"不支持转让\"}}},n=o,c=a(\"2877\"),l=Object(c[\"a\"])(n,s,i,!1,null,null,null);t[\"default\"]=l.exports},e81a:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"InfoRangePackageService\",(function(){return p}));a(\"ac6a\");var s,i=a(\"d225\"),r=a(\"b0b4\"),o=a(\"9ab4\"),n=a(\"0cd5\"),c=a(\"df29\"),l=a(\"bf02\"),u=a(\"c4cc\"),p=function(){function e(t){Object(i[\"a\"])(this,e),this.packageApi=t,this.packageInfo$=new c[\"d\"]({})}return Object(r[\"a\"])(e,[{key:\"info\",value:function(e){var t=this;return this.packageApi.getCoursePackageInfo(\"range\",e).pipe(Object(u[\"a\"])((function(e){e.info.personal_range.forEach((function(e){var t=[];e.coach_level.forEach((function(e){t.push(e.setting_name)})),e.coach_level_text=t.join(\"/\")})),t.packageInfo$.commit((function(){return e.info}))})))}},{key:\"beforeRouteEnter\",value:function(e){return this.info(e.meta.query.id)}}]),e}();p=Object(o[\"b\"])([Object(n[\"b\"])(),Object(o[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof l[\"d\"]&&l[\"d\"])?s:Object])],p)},e8ac:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"InfoUnlimitPackageService\",(function(){return p}));var s,i=a(\"d225\"),r=a(\"b0b4\"),o=a(\"9ab4\"),n=a(\"0cd5\"),c=a(\"df29\"),l=a(\"bf02\"),u=a(\"c4cc\"),p=function(){function e(t){Object(i[\"a\"])(this,e),this.packageApi=t,this.packageInfo$=new c[\"d\"]({})}return Object(r[\"a\"])(e,[{key:\"info\",value:function(e){var t=this;return this.packageApi.getCoursePackageInfo(\"unlimited\",e).pipe(Object(u[\"a\"])((function(e){t.packageInfo$.commit((function(){return e.info}))})))}},{key:\"beforeRouteEnter\",value:function(e,t,a){this.info(e.meta.query.id).subscribe((function(){a()}))}}]),e}();p=Object(o[\"b\"])([Object(n[\"b\"])(),Object(o[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof l[\"d\"]&&l[\"d\"])?s:Object])],p)},ea53:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"EditFixPackageService\",(function(){return g}));var s,i,r=a(\"d225\"),o=a(\"b0b4\"),n=a(\"9ab4\"),c=a(\"0cd5\"),l=a(\"df29\"),u=a(\"bf02\"),p=a(\"ebb6\"),d=a(\"c4cc\"),m=a(\"54da\"),_=a(\"2138\"),h=a(\"3a59\"),g=function(){function e(t,a){var s=this;Object(r[\"a\"])(this,e),this.userService=t,this.packageApi=a,this.appConfig=!0,this.unitList$=this.userService.getOptions$(\"package_course.valid_time_unit\"),this.transferUnitList$=this.userService.getOptions$(\"package_course.transfer_unit\"),this.sellTypeList$=this.userService.getOptions$(\"package_course.sale_mode\").pipe(Object(p[\"a\"])((function(e){return s.appConfig||Object(h[\"a\"])(e,(function(e){return 1===e.value})),e}))),this.loading$=new l[\"d\"]({}),this.coachList$=new l[\"d\"]({}),this.packageInfo$=new l[\"d\"]({}),this.id=\"\"}return Object(o[\"a\"])(e,[{key:\"getPackageInfo\",value:function(e){var t=this;return this.packageApi.editCoursePackageInfo(\"fixation\",e).pipe(Object(d[\"a\"])((function(e){t.packageInfo$.commit((function(){return e.info}))})))}},{key:\"getCoachList\",value:function(){var e=this;return this.packageApi.getCoachList().pipe(Object(d[\"a\"])((function(t){e.coachList$.commit((function(){return t.list}))})))}},{key:\"initData\",value:function(e){return Object(m[\"a\"])(this.getPackageInfo(e),this.getCoachList())}},{key:\"editPackage\",value:function(e){return this.packageApi.editCoursePackage(e,\"fixation\",this.id)}},{key:\"beforeEach\",value:function(e){return this.id=e.meta.query.id,this.initData(e.meta.query.id)}}]),e}();Object(n[\"b\"])([Object(l[\"c\"])(),Object(n[\"d\"])(\"design:type\",Function),Object(n[\"d\"])(\"design:paramtypes\",[Object]),Object(n[\"d\"])(\"design:returntype\",void 0)],g.prototype,\"editPackage\",null),g=Object(n[\"b\"])([Object(c[\"b\"])(),Object(n[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof _[\"a\"]&&_[\"a\"])?s:Object,\"function\"===typeof(i=\"undefined\"!==typeof u[\"d\"]&&u[\"d\"])?i:Object])],g)},ffac:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"st-panel\",{staticClass:\"page-shop-add-fix-package\",class:e.basic(),attrs:{app:\"\"}},[a(\"st-form\",{attrs:{form:e.form,labelWidth:\"96px\"}},[a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"课程包名称\",required:\"\"}},[e._v(\"\\n          \"+e._s(e.packageInfo.course_name)+\"\\n        \")])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:8,xs:11,offset:1}},[a(\"div\",{class:e.basic(\"user-num\")},[a(\"st-form-item\",{attrs:{label:\"支持使用人数\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"support_num\",{rules:[{required:!0,message:\"请输入支持使用人数\"}]}],expression:\"[\\n                'support_num',\\n                {\\n                  rules: [{ required: true, message: '请输入支持使用人数' }]\\n                }\\n              ]\"}],staticStyle:{width:\"110px\"},attrs:{min:1,max:20,placeholder:\"请输入支持使用人数\"}})],1),a(\"span\",{staticClass:\"mg-l8\"},[e._v(\"限定20人\")])],1)])],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:23,xs:22,offset:1}},[a(\"st-form-item\",{class:{\"st-has-error\":!e.courseIsFirstInput&&e.courseIsNone},attrs:{help:e.courseErrorText,required:\"\"}},[a(\"template\",{slot:\"label\"},[e._v(\"\\n            上课范围\\n            \"),a(\"st-help-tooltip\",{attrs:{id:\"TSCPCF003\"}})],1),a(\"div\",{class:e.add(\"course\")},[a(\"st-form-table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"10%\"}}),a(\"col\",{staticStyle:{width:\"24%\"}}),a(\"col\",{staticStyle:{width:\"18%\"}}),a(\"col\",{staticStyle:{width:\"18%\"}}),a(\"col\",{staticStyle:{width:\"25%\"}})]),a(\"tr\",{staticClass:\"bg-thead table-header\"},[a(\"th\"),a(\"th\",{staticClass:\"rightline\"},[e._v(\"课程类型\")]),a(\"th\"),a(\"th\",[e._v(\"节数\")]),a(\"th\",[e._v(\"小计\")]),a(\"th\")]),a(\"tbody\",[a(\"tr\",{staticClass:\"bg-row-odd checkbox\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{defaultChecked:!!e.packageInfo.is_team},on:{change:e.teamCheckboxChange}})],1),a(\"td\",{staticClass:\"rightline white-nowrap\"},[e._v(\"团体课程\")]),a(\"td\"),a(\"td\",[e._v(e._s(e.teamCourseTotalObject.team_times)+\"节\")]),a(\"td\",[e._v(e._s(e.teamCourseTotalObject.total)+\"元\")]),a(\"td\",{staticClass:\"overflow-hidden\"},[a(\"a\",{staticClass:\"set-course-button\",class:{hide:!(e.teamCourseListIsShow&&e.packageData.is_team)},attrs:{disabled:!e.packageData.is_team},on:{click:e.teamCourseListShow}},[e._v(\"\\n                      配置上课范围  \\n                      \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1)])]),e.teamCourseListIsShow&&e.packageData.is_team?a(\"tr\",{staticClass:\"bg-row-odd team-course-list-content\"},[a(\"td\",{staticClass:\"rightline\",attrs:{colspan:\"2\"}}),a(\"td\",{staticClass:\"team-course-table\",attrs:{colspan:\"4\"}},[a(\"div\",{class:e.add(\"team-course-table\")},[a(\"table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"20%\"}}),a(\"col\",{staticStyle:{width:\"28%\"}}),a(\"col\",{staticStyle:{width:\"28%\"}}),a(\"col\",{staticStyle:{width:\"10%\"}}),a(\"col\",{staticStyle:{width:\"9%\"}})]),a(\"tr\",{staticClass:\"bg-thead th\"},[a(\"th\"),a(\"th\",[e._v(\"课程名称\")]),a(\"th\",[e._v(\"节数\")]),a(\"th\",[e._v(\"课时费\")]),a(\"th\",[e._v(\"总价\")]),a(\"th\",[e._v(\"操作\")])]),a(\"tbody\",[a(\"tr\",{staticClass:\"checkbox border-bottom\"},[a(\"td\",{staticClass:\"team-course-add-buton\",attrs:{colspan:\"6\"}},[a(\"st-button\",{attrs:{block:\"\",type:\"dashed\",icon:\"add\"},on:{click:function(t){return e.addCourse(\"team\")}}},[e._v(\"\\n                                新增团体课程\\n                              \")])],1)]),a(\"tr\",[a(\"td\",{attrs:{colspan:\"6\"}},[e.teamCourseList.length?e._e():a(\"p\",{staticClass:\"bg-row-even\",staticStyle:{margin:\"0\",\"text-align\":\"center\",padding:\"8px 0\"}},[e._v(\"\\n                                无数据\\n                              \")]),e.teamCourseList.length?a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{ stopPropagation: true }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"teamCourseList2\"],expression:\"['teamCourseList2']\"}],staticClass:\"team-course-content-table\"},e._l(e.teamCourseList,(function(t,s){return a(\"li\",{key:t.course_id,staticClass:\"checkbox border-bottom\",class:{\"bg-row-odd\":s%2!==0,\"bg-row-even\":s%2===0}},[a(\"div\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{checked:t.courseChecked},on:{change:function(t){return e.courseItemCheckedChange(t,\"team\",s)}}})],1),a(\"div\",[e._v(e._s(t.course_name))]),a(\"div\",[a(\"st-input-number\",{attrs:{min:1,max:99999},on:{change:function(a){return e.teamInputChange(a,\"team_times\",t.course_id)}},model:{value:t.team_times,callback:function(a){e.$set(t,\"team_times\",a)},expression:\"i.team_times\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                                        节\\n                                      \")])],2)],1),a(\"div\",[a(\"st-input-number\",{attrs:{min:0,max:999999.9,float:!0},on:{change:function(a){return e.teamInputChange(a,\"team_unit_price\",t.course_id)}},model:{value:t.team_unit_price,callback:function(a){e.$set(t,\"team_unit_price\",a)},expression:\"i.team_unit_price\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                                        元\\n                                      \")])],2)],1),a(\"div\",[e._v(\"\\n                                    \"+e._s(e._f(\"course_item_total\")(t.team_times,t.team_unit_price))+\"\\n                                  \")]),a(\"div\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(a){return e.removeCourseItem(\"team\",t.course_id)}}},[e._v(\"\\n                                      删除\\n                                    \")])])])})),0):e._e()])]),a(\"tr\",{staticClass:\"bg-thead checkbox topline\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{indeterminate:e.teamIndeterminate,checked:e.teamCheckAll},on:{change:function(t){return e.checkAllChange(\"team\")}}})],1),a(\"td\",[e._v(\"批量操作\")]),a(\"td\",{staticClass:\"pr-24\"},[a(\"st-input-number\",{attrs:{min:1,max:99999},model:{value:e.teamOperationObject.team_times,callback:function(t){e.$set(e.teamOperationObject,\"team_times\",t)},expression:\"teamOperationObject.team_times\"}},[a(\"a\",{attrs:{slot:\"addonAfter\",disabled:!+e.teamOperationObject.team_times,href:\"javascript:void(0)\"},on:{click:function(t){return e.times_operation_ok(\"team\")}},slot:\"addonAfter\"},[e._v(\"\\n                                  确定\\n                                \")])])],1),a(\"td\",{staticClass:\"pr-24\"},[a(\"st-input-number\",{attrs:{min:0,max:999999.9,float:!0},model:{value:e.teamOperationObject.team_unit_price,callback:function(t){e.$set(e.teamOperationObject,\"team_unit_price\",t)},expression:\"teamOperationObject.team_unit_price\"}},[a(\"a\",{attrs:{slot:\"addonAfter\",disabled:!+e.teamOperationObject.team_unit_price,href:\"javascript:void(0)\"},on:{click:function(t){return e.unit_price_operation_ok(\"team\")}},slot:\"addonAfter\"},[e._v(\"\\n                                  确定\\n                                \")])])],1),a(\"td\",[e._v(\"\\n                              \"+e._s(e._f(\"course_item_total\")(e.teamOperationObject.team_times,e.teamOperationObject.team_unit_price))+\"\\n                            \")]),a(\"td\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(t){return e.removeCourseItems(\"team\")}}},[e._v(\"\\n                                删除\\n                              \")])])])])])])])]):e._e(),a(\"tr\",{staticClass:\"bg-row-even checkbox topline\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{defaultChecked:!!e.packageInfo.is_personal},on:{change:e.personalCheckboxChange}})],1),a(\"td\",{staticClass:\"rightline\"},[e._v(\"私教课程\")]),a(\"td\"),a(\"td\",[e._v(e._s(e.personalCourseTotalObject.personal_times)+\"节\")]),a(\"td\",[e._v(e._s(e.personalCourseTotalObject.total)+\"元\")]),a(\"td\",{staticClass:\"overflow-hidden\"},[a(\"a\",{staticClass:\"set-course-button\",class:{hide:!(e.personalCourseListIsShow&&e.packageData.is_personal)},attrs:{disabled:!e.packageData.is_personal,href:\"javascript:void(0)\"},on:{click:e.personalCourseListShow}},[e._v(\"\\n                      配置上课范围  \\n                      \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1)])]),e.personalCourseListIsShow&&e.packageData.is_personal?a(\"tr\",{staticClass:\"bg-row-even personal-course-list-content\"},[a(\"td\",{staticClass:\"rightline\",attrs:{colspan:\"2\"}}),a(\"td\",{staticClass:\"personal-course-table\",attrs:{colspan:\"4\"}},[a(\"div\",{class:e.add(\"personal-course-table\")},[a(\"table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"20%\"}}),a(\"col\",{staticStyle:{width:\"18%\"}}),a(\"col\",{staticStyle:{width:\"18%\"}}),a(\"col\",{staticStyle:{width:\"23%\"}}),a(\"col\",{staticStyle:{width:\"8%\"}}),a(\"col\",{staticStyle:{width:\"8%\"}})]),a(\"tr\",{staticClass:\"bg-thead th\"},[a(\"th\"),a(\"th\",[e._v(\"课程名称\")]),a(\"th\",[e._v(\"节数\")]),a(\"th\",[e._v(\"课时费\")]),a(\"th\",{staticClass:\"tg-c\"},[e._v(\"\\n                            支持预约的\"+e._s(e.$c(\"coach\"))+\"等级\\n                          \")]),a(\"th\",[e._v(\"总价\")]),a(\"th\",[e._v(\"操作\")])]),a(\"tbody\",[a(\"tr\",{staticClass:\"checkbox border-bottom\"},[a(\"td\",{staticClass:\"personal-course-add-buton\",attrs:{colspan:\"7\"}},[a(\"st-button\",{attrs:{block:\"\",type:\"dashed\",icon:\"add\"},on:{click:function(t){return e.addCourse(\"personal\")}}},[e._v(\"\\n                                新增私教课程\\n                              \")])],1)]),a(\"tr\",[a(\"td\",{attrs:{colspan:\"7\"}},[e.personalCourseList.length?e._e():a(\"p\",{staticClass:\"bg-row-even\",staticStyle:{margin:\"0\",\"text-align\":\"center\",padding:\"8px 0\"}},[e._v(\"\\n                                无数据\\n                              \")]),e.personalCourseList.length?a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{ stopPropagation: true }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseList1\"],expression:\"['personalCourseList1']\"}],staticClass:\"personal-course-content-table\"},e._l(e.personalCourseList,(function(t,s){return a(\"li\",{key:t.course_id,staticClass:\"checkbox border-bottom\",class:{\"bg-row-odd\":s%2!==0,\"bg-row-even\":s%2===0}},[a(\"div\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{checked:t.courseChecked},on:{change:function(t){return e.courseItemCheckedChange(t,\"personal\",s)}}})],1),a(\"div\",[e._v(e._s(t.course_name))]),a(\"div\",[a(\"st-input-number\",{attrs:{min:1,max:99999},on:{change:function(a){return e.personalInputChange(a,\"personal_times\",t.course_id)}},model:{value:t.personal_times,callback:function(a){e.$set(t,\"personal_times\",a)},expression:\"item.personal_times\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                                        节\\n                                      \")])],2)],1),a(\"div\",[a(\"st-input-number\",{attrs:{min:0,max:999999.9,float:!0},on:{change:function(a){return e.personalInputChange(a,\"personal_unit_price\",t.course_id)}},model:{value:t.personal_unit_price,callback:function(a){e.$set(t,\"personal_unit_price\",a)},expression:\"item.personal_unit_price\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                                        元\\n                                      \")])],2)],1),a(\"div\",[a(\"a-dropdown\",{attrs:{placement:\"bottomRight\",trigger:[\"click\"]}},[a(\"a\",{attrs:{href:\"javascript:void(0)\"}},[e._v(\"\\n                                        \"+e._s(t.coachGradeList.length===e.coachList.length?\"全部\":t.coachGradeList.length+\"个\")+\"等级  \\n                                        \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1),a(\"a-checkbox-group\",{class:e.basic(\"personal-dropdown\"),attrs:{slot:\"overlay\"},on:{change:function(a){return e.coachItemChange(a,t.course_id,s)}},slot:\"overlay\",model:{value:t.coachGradeList,callback:function(a){e.$set(t,\"coachGradeList\",a)},expression:\"item.coachGradeList\"}},[a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{\\n                                            stopPropagation: true\\n                                          }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseListCoachGrade\"+s],expression:\"[\\n                                            `personalCourseListCoachGrade${index}`\\n                                          ]\"}],staticClass:\"personal-course-coach-grade-dropdown\"},e._l(e.coachList,(function(t,s){return a(\"li\",{key:s},[a(\"a-checkbox\",{attrs:{value:t.id}},[e._v(\"\\n                                              \"+e._s(t.setting_name)+\"\\n                                            \")])],1)})),0)])],1)],1),a(\"div\",[e._v(\"\\n                                    \"+e._s(e._f(\"course_item_total\")(t.personal_times,t.personal_unit_price))+\"\\n                                  \")]),a(\"div\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(a){return e.removeCourseItem(\"personal\",t.course_id)}}},[e._v(\"\\n                                      删除\\n                                    \")])])])})),0):e._e()])]),a(\"tr\",{staticClass:\"bg-thead checkbox topline\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{indeterminate:e.personalIndeterminate,checked:e.personalCheckAll},on:{change:function(t){return e.checkAllChange(\"personal\")}}})],1),a(\"td\",[e._v(\"批量操作\")]),a(\"td\",{staticClass:\"pr-24\"},[a(\"st-input-number\",{attrs:{min:1,max:99999},model:{value:e.personalOperationObject.personal_times,callback:function(t){e.$set(e.personalOperationObject,\"personal_times\",t)},expression:\"\\n                                  personalOperationObject.personal_times\\n                                \"}},[a(\"a\",{attrs:{slot:\"addonAfter\",disabled:!+e.personalOperationObject.personal_times,href:\"javascript:void(0)\"},on:{click:function(t){return e.times_operation_ok(\"personal\")}},slot:\"addonAfter\"},[e._v(\"\\n                                  确定\\n                                \")])])],1),a(\"td\",{staticClass:\"pr-24\"},[a(\"st-input-number\",{attrs:{min:0,max:999999.9,float:!0},model:{value:e.personalOperationObject.personal_unit_price,callback:function(t){e.$set(e.personalOperationObject,\"personal_unit_price\",t)},expression:\"\\n                                  personalOperationObject.personal_unit_price\\n                                \"}},[a(\"a\",{attrs:{slot:\"addonAfter\",disabled:!+e.personalOperationObject.personal_unit_price,href:\"javascript:void(0)\"},on:{click:function(t){return e.unit_price_operation_ok(\"personal\")}},slot:\"addonAfter\"},[e._v(\"\\n                                  确定\\n                                \")])])],1),a(\"td\",{staticClass:\"tg-c\"},[a(\"a-dropdown\",{attrs:{placement:\"bottomRight\",trigger:[\"click\"]},model:{value:e.coachAllOperationDropdownIsShow,callback:function(t){e.coachAllOperationDropdownIsShow=t},expression:\"coachAllOperationDropdownIsShow\"}},[a(\"a\",{attrs:{href:\"javascript:void(0)\"}},[e._v(\"\\n                                  批量设置等级  \\n                                  \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1),a(\"a-checkbox-group\",{staticClass:\"all\",class:e.basic(\"personal-dropdown\"),attrs:{slot:\"overlay\"},slot:\"overlay\",model:{value:e.personalAllOperationCoachList,callback:function(t){e.personalAllOperationCoachList=t},expression:\"personalAllOperationCoachList\"}},[a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{ stopPropagation: true }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseListCoachGradeAll\"],expression:\"[\\n                                      'personalCourseListCoachGradeAll'\\n                                    ]\"}],staticClass:\"personal-course-coach-grade-dropdown\"},e._l(e.coachList,(function(t,s){return a(\"li\",{key:s},[a(\"a-checkbox\",{attrs:{value:t.id}},[e._v(\"\\n                                        \"+e._s(t.setting_name)+\"\\n                                      \")])],1)})),0),a(\"div\",{staticClass:\"personal-course-coach-grade-dropdown-button\"},[a(\"a\",{attrs:{href:\"javascript:void(0)\",disabled:!e.personalAllOperationCoachList.length},on:{click:e.coachAllOperationOk}},[e._v(\"\\n                                      确定\\n                                    \")])])])],1)],1),a(\"td\",[e._v(\"\\n                              \"+e._s(e._f(\"course_item_total\")(e.personalOperationObject.personal_times,e.personalOperationObject.personal_unit_price))+\"\\n                            \")]),a(\"td\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(t){return e.removeCourseItems(\"personal\")}}},[e._v(\"\\n                                删除\\n                              \")])])])])])])])]):e._e()])])],1)],2)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"总价\"}},[e._v(e._s(e.all_total)+\"元\")])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"售卖价格\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"price\",{rules:[{required:!0,message:\"请输入售卖价格\"}]}],expression:\"[\\n              'price',\\n              { rules: [{ required: true, message: '请输入售卖价格' }] }\\n            ]\"}],attrs:{placeholder:\"请输入售卖价格\",min:0,max:99999.9,float:!0}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n              元\\n            \")])],2)],1)],1)],1),a(\"reserve-is-limit\",{attrs:{form:e.form,reserveIsLimitInfo:e.reserveIsLimitInfo}}),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{staticClass:\"mg-b0\",attrs:{label:\"支持售卖时间\",required:\"\"}},[a(\"div\",{class:e.basic(\"saletime\")},[a(\"a-form-item\",{staticClass:\"page-a-form\"},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"start_time\",{rules:[{validator:e.start_time_validator}]}],expression:\"[\\n                  'start_time',\\n                  { rules: [{ validator: start_time_validator }] }\\n                ]\"}],staticStyle:{width:\"100%\"},attrs:{disabledDate:e.disabledStartDate,format:\"YYYY-MM-DD\",placeholder:\"开始时间\",showToday:!1},on:{openChange:e.handleStartOpenChange,change:e.start_time_change}})],1),a(\"span\",[e._v(\"~\")]),a(\"a-form-item\",{staticClass:\"page-a-form\"},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"end_time\",{rules:[{validator:e.end_time_validator}]}],expression:\"[\\n                  'end_time',\\n                  { rules: [{ validator: end_time_validator }] }\\n                ]\"}],attrs:{disabledDate:e.disabledEndDate,format:\"YYYY-MM-DD\",placeholder:\"结束时间\",showToday:!1,open:e.endOpen},on:{openChange:e.handleEndOpenChange,change:e.end_time_change}})],1)],1)])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"有效时间\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"valid_time\",{initialValue:null,rules:[{required:!0,message:\"请输入有效时间\"}]}],expression:\"[\\n              'valid_time',\\n              {\\n                initialValue: null,\\n                rules: [{ required: true, message: '请输入有效时间' }]\\n              }\\n            ]\"}],attrs:{placeholder:\"请输入有效时间\",min:1,max:99999}},[a(\"a-select\",{staticStyle:{width:\"60px\"},attrs:{slot:\"addonAfter\"},slot:\"addonAfter\",model:{value:e.packageData.valid_time_unit,callback:function(t){e.$set(e.packageData,\"valid_time_unit\",t)},expression:\"packageData.valid_time_unit\"}},e._l(e.unitList,(function(t,s){return a(\"a-select-option\",{key:s,attrs:{value:t.value}},[e._v(\"\\n                \"+e._s(t.label)+\"\\n              \")])})),1)],1)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"允许冻结天数\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"frozen_days\",{initialValue:null,rules:[{required:!0,message:\"请输入允许冻结天数\"}]}],expression:\"[\\n              'frozen_days',\\n              {\\n                initialValue: null,\\n                rules: [{ required: true, message: '请输入允许冻结天数' }]\\n              }\\n            ]\"}],attrs:{placeholder:\"请输入允许冻结天数\",min:1,max:99999}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n              天\\n            \")])],2)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"转让设置\"}},[a(\"div\",{class:e.basic(\"transfer\")},[a(\"a-checkbox\",{class:e.basic(\"transfer-checkbox\"),attrs:{defaultChecked:!!e.packageInfo.is_allow_transfer},on:{change:e.transfer}},[e._v(\"\\n              支持转让\\n            \")]),a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:[\"transfer_rate\",{rules:[{required:!!e.packageData.is_allow_transfer,message:\"请输入转让值数值\"}]}],expression:\"[\\n                'transfer_rate',\\n                {\\n                  rules: [\\n                    {\\n                      required: !!packageData.is_allow_transfer,\\n                      message: '请输入转让值数值'\\n                    }\\n                  ]\\n                }\\n              ]\"}],class:e.basic(\"transfer-input\"),staticStyle:{\"padding-right\":\"0\"},attrs:{min:0,max:1===e.packageData.transfer_unit?100:99999.9,disabled:0===e.packageData.is_allow_transfer,float:2===e.packageData.transfer_unit}},[a(\"a-select\",{staticStyle:{width:\"60px\"},attrs:{slot:\"addonAfter\",disabled:0===e.packageData.is_allow_transfer},on:{change:e.transferUnitChange},slot:\"addonAfter\",model:{value:e.packageData.transfer_unit,callback:function(t){e.$set(e.packageData,\"transfer_unit\",t)},expression:\"packageData.transfer_unit\"}},e._l(e.transferUnitList,(function(t){return a(\"a-select-option\",{key:t.value,attrs:{value:+t.value}},[e._v(\"\\n                  \"+e._s(t.label)+\"\\n                \")])})),1)],1)],1)])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"售卖方式\",required:\"\"}},[a(\"a-checkbox-group\",{model:{value:e.packageData.sale_mode,callback:function(t){e.$set(e.packageData,\"sale_mode\",t)},expression:\"packageData.sale_mode\"}},e._l(e.sellTypeList,(function(t){return a(\"a-checkbox\",{key:t.value,attrs:{disabled:2===t.value,value:t.value}},[e._v(\"\\n              \"+e._s(t.label)+\"\\n            \")])})),1)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:22,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{\"validate-status\":\"error\",help:e.imageErrorText,label:\"封面\",required:\"\"}},[a(\"div\",{class:e.basic(\"upload\")},[a(\"st-image-upload\",{class:e.basic(\"st-upload\"),attrs:{cropperModal:e.cropperModal,sizeLimit:5,list:e.fileList},on:{change:e.fileChange}},[a(\"i\",{class:e.basic(\"st-upload-icon\")}),a(\"div\",{class:e.basic(\"st-upload-text\")},[e._v(\"上传封面\")])]),a(\"div\",{class:e.basic(\"upload-describe\")},[a(\"p\",[e._v(\"\\n                图片格式必须为:png,bmp,jpeg,jpg,gif,建议使用png格式图片,以保存最佳效果\\n              \")]),a(\"p\",[e._v(\"建议尺寸为750像素X422像素,不可大于2m\")])])],1)])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"课程包介绍\"}},[a(\"st-textarea\",{staticClass:\"page-content-card-textarea\",attrs:{maxlength:\"500\",placeholder:\"请输入课程包介绍\"},model:{value:e.packageData.intro,callback:function(t){e.$set(e.packageData,\"intro\",t)},expression:\"packageData.intro\"}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"备注\"}},[a(\"st-textarea\",{staticClass:\"page-content-card-textarea\",attrs:{maxlength:\"500\",placeholder:\"请输入备注\"},model:{value:e.packageData.remarks,callback:function(t){e.$set(e.packageData,\"remarks\",t)},expression:\"packageData.remarks\"}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\" \"}},[a(\"st-button\",{staticClass:\"mr-8\",attrs:{type:\"primary\",loading:e.editLoading.editPackage},on:{click:e.save}},[e._v(\"\\n            保存\\n          \")])],1)],1)],1)],1)],1)},i=[],r=(a(\"ac6a\"),a(\"c32d\")),o=a.n(r),n=a(\"97ed\"),c=a(\"3997\"),l=a(\"5c8a\"),u=a(\"3a59\"),p=a(\"73c0\"),d=a(\"a305\"),m=a(\"ea53\"),_=a(\"e98c\"),h=a(\"7ce1\"),g={name:\"ShopFixPackageEdit\",serviceInject:function(){return{editPackageService:m[\"EditFixPackageService\"]}},rxState:function(){return{transferUnitList:this.editPackageService.transferUnitList$,sellTypeList:this.editPackageService.sellTypeList$,unitList:this.editPackageService.unitList$,editLoading:this.editPackageService.loading$,coachList:this.editPackageService.coachList$,packageInfo:this.editPackageService.packageInfo$}},components:{StImageUpload:h[\"a\"],ReserveIsLimit:n[\"a\"]},modals:{CourseSelectCourse:_[\"a\"]},bem:{add:\"page-shop-add-fix-package\",basic:\"page-shop-add-basic-package\"},data:function(){return{packageData:{price:void 0,is_team:0,team_range:[],is_personal:0,personal_range:[],start_time:\"\",end_time:\"\",valid_time:void 0,valid_time_unit:1,frozen_days:void 0,sale_mode:[2],is_allow_transfer:0,transfer_rate:void 0,transfer_unit:1,image:{image_id:null,image_key:\"\"},intro:\"\",remarks:\"\"},courseIsFirstInput:!0,teamCourseList:[],teamCourseTotalList:{},teamCourseListIsShow:!1,teamCourseTotalObject:{team_times:0,total:0},teamOperationObject:{team_times:void 0,team_unit_price:void 0},teamIndeterminate:!1,teamCheckAll:!1,personalCourseList:[],personalCourseTotalList:{},personalCoachListHistory:[],personalAllOperationCoachList:[],personalCourseTotalObject:{personal_times:0,total:0},personalOperationObject:{personal_times:void 0,personal_unit_price:void 0},personalCourseListIsShow:!1,personalIndeterminate:!1,personalCheckAll:!1,coachAllOperationDropdownIsShow:!1,courseIsNone:!1,courseErrorText:\"\",form:this.$form.createForm(this),start_time:null,end_time:null,endOpen:!1,imageIsNone:!1,imageErrorText:\"\",fileList:[],cropperModal:{},reserveIsLimitInfo:{}}},mounted:function(){this.init()},methods:{init:function(){var e=this;this.packageInfo.is_team||(this.packageInfo.team_times=null,this.packageInfo.team_unit_price=null,this.packageInfo.team_range=[]),this.packageInfo.is_personal||(this.packageInfo.personal_times=null,this.packageInfo.personal_unit_price=null,this.packageInfo.personal_range=[]),this.packageInfo.is_allow_transfer||(this.packageInfo.transfer_rate=void 0);var t=this.packageInfo,a=t.reserve_is_limit,s=t.reserve_limit_day,i=t.reserve_limit_times;this.reserveIsLimitInfo={reserve_is_limit:a,reserve_limit_day:s,reserve_limit_times:i},this.form.setFieldsValue({support_num:this.packageInfo.support_num,price:this.packageInfo.price,start_time:o()(this.packageInfo.start_time),end_time:o()(this.packageInfo.end_time),valid_time:this.packageInfo.valid_time,frozen_days:this.packageInfo.frozen_days,transfer_rate:this.packageInfo.transfer_rate}),this.packageData.is_team=this.packageInfo.is_team,Object(c[\"a\"])(this.packageInfo.team_range,(function(t){e.teamCourseList.push({team_times:t.team_times,team_unit_price:t.team_unit_price,courseChecked:!1,course_id:t.course_id,course_name:t.course_name,course_category:t.course_category,course_type:t.course_type}),e.teamCourseTotalList[t.course_id]=e.teamCourseTotalList[t.course_id]||{},e.teamCourseTotalList[t.course_id].team_times=t.team_times,e.teamCourseTotalList[t.course_id].team_unit_price=t.team_unit_price})),this.packageData.is_personal=this.packageInfo.is_personal,Object(c[\"a\"])(this.packageInfo.personal_range,(function(t){var a=[];t.coach_level.forEach((function(e){a.push(e.id)})),e.personalCourseList.push({personal_times:t.personal_times,personal_unit_price:t.personal_unit_price,coachGradeList:a,courseChecked:!1,course_id:t.course_id,course_name:t.course_name,course_category:t.course_category,course_type:t.course_type}),e.personalCourseTotalList[t.course_id]=e.personalCourseTotalList[t.course_id]||{},e.personalCourseTotalList[t.course_id].personal_times=t.personal_times,e.personalCourseTotalList[t.course_id].personal_unit_price=t.personal_unit_price,e.personalCourseTotalList[t.course_id].list=Object(l[\"a\"])(t.coach_level),e.personalCoachListHistory.push(Object(l[\"a\"])(t.coach_level))})),this.start_time=o()(this.packageInfo.start_time),this.end_time=o()(this.packageInfo.end_time),this.packageData.valid_time_unit=this.packageInfo.valid_time_unit,this.packageData.is_allow_transfer=this.packageInfo.is_allow_transfer,this.packageData.transfer_unit=this.packageInfo.transfer_unit,this.packageData.sale_mode=this.packageInfo.sale_mode,this.fileList=[this.packageInfo.image],this.packageData.image.image_id=this.fileList[0].image_id,this.packageData.image.image_key=this.fileList[0].image_key,this.imageIsNone=!1,this.imageErrorText=\"\",this.packageData.intro=this.packageInfo.intro,this.packageData.remarks=this.packageInfo.remarks},save:function(){var e=this;this.course_validator(),this.image_validator(),this.form.validateFieldsAndScroll((function(t,a){t||e.courseIsNone||e.imageIsNone||(e.packageData.price=a.price,e.packageData.valid_time=a.valid_time,e.packageData.support_num=a.support_num,e.packageData.frozen_days=a.frozen_days,e.packageData.transfer_rate=e.packageData.is_allow_transfer?+a.transfer_rate:void 0,e.packageData.start_time=\"string\"===typeof e.start_time?e.start_time:\"\".concat(e.start_time.format(\"YYYY-MM-DD\")),e.packageData.reserve_is_limit=a.reserve_is_limit,e.packageData.reserve_limit_day=a.reserve_limit_day,e.packageData.reserve_limit_times=+a.reserve_limit_times,e.packageData.end_time=\"string\"===typeof e.end_time?e.end_time:\"\".concat(e.end_time.format(\"YYYY-MM-DD\")),e.packageData.team_range=[],e.teamCourseList.forEach((function(t){e.packageData.team_range.push({course_id:t.course_id,team_times:t.team_times,team_unit_price:t.team_unit_price})})),e.packageData.personal_range=[],e.personalCourseList.forEach((function(t){var a=Object(l[\"a\"])(t.coachGradeList);t.coachGradeList&&t.coachGradeList.length>0&&t.coachGradeList[0].id&&(a=t.coachGradeList.map((function(e){return e.id}))),e.packageData.personal_range.push({course_id:t.course_id,personal_times:t.personal_times,personal_unit_price:t.personal_unit_price,coach_level:a})})),e.packageData.album_id=e.packageInfo.album_id,e.editPackageService.editPackage(e.packageData).subscribe((function(t){e.$router.push({path:\"/shop/product/course/manage/package/list\"})})))}))},teamCheckboxChange:function(e){this.packageData.is_team=+e.target.checked,this.courseIsFirstInput=!1,this.teamCourseListIsShow=+e.target.checked},personalCheckboxChange:function(e){this.packageData.is_personal=+e.target.checked,this.courseIsFirstInput=!1,this.personalCourseListIsShow=+e.target.checked},teamCourseListShow:function(){this.teamCourseListIsShow=!this.teamCourseListIsShow},personalCourseListShow:function(){this.personalCourseListIsShow=!this.personalCourseListIsShow},times_operation_ok:function(e){var t=this;\"team\"===e?Object(c[\"a\"])(this.teamCourseList,(function(e){e.courseChecked&&(e.team_times=+t.teamOperationObject.team_times,t.teamCourseTotalList[e.course_id]=t.teamCourseTotalList[e.course_id]?t.teamCourseTotalList[e.course_id]:{},t.teamCourseTotalList[e.course_id].team_times=+t.teamOperationObject.team_times)})):\"personal\"===e&&Object(c[\"a\"])(this.personalCourseList,(function(e){e.courseChecked&&(e.personal_times=+t.personalOperationObject.personal_times,t.personalCourseTotalList[e.course_id]=t.personalCourseTotalList[e.course_id]?t.personalCourseTotalList[e.course_id]:{},t.personalCourseTotalList[e.course_id].personal_times=+t.personalOperationObject.personal_times)}))},unit_price_operation_ok:function(e){var t=this;\"team\"===e?Object(c[\"a\"])(this.teamCourseList,(function(e){e.courseChecked&&(e.team_unit_price=+t.teamOperationObject.team_unit_price,t.teamCourseTotalList[e.course_id]=t.teamCourseTotalList[e.course_id]?t.teamCourseTotalList[e.course_id]:{},t.teamCourseTotalList[e.course_id].team_unit_price=+t.teamOperationObject.team_unit_price)})):\"personal\"===e&&Object(c[\"a\"])(this.personalCourseList,(function(e){e.courseChecked&&(e.personal_unit_price=+t.personalOperationObject.personal_unit_price,t.personalCourseTotalList[e.course_id]=t.personalCourseTotalList[e.course_id]?t.personalCourseTotalList[e.course_id]:{},t.personalCourseTotalList[e.course_id].personal_unit_price=+t.personalOperationObject.personal_unit_price)}))},teamInputChange:function(e,t,a){this.teamCourseTotalList[a]=this.teamCourseTotalList[a]?this.teamCourseTotalList[a]:{},this.teamCourseTotalList[a][t]=e},personalInputChange:function(e,t,a){this.personalCourseTotalList[a]=this.personalCourseTotalList[a]?this.personalCourseTotalList[a]:{},this.personalCourseTotalList[a][t]=e},addCourse:function(e){var t=this;\"team\"===e?this.$modalRouter.push({name:\"course-select-course\",props:{type:e,courses:this.teamCourseList,isLimit:!0},on:{ok:function(e){e.list.forEach((function(e){e.courseChecked=!1,e.team_times=null,e.team_unit_price=null})),Object(c[\"a\"])(t.teamCourseTotalList,(function(a,s){Object(c[\"a\"])(e.list,(function(e){+e.course_id===+s&&(e.team_times=a.team_times,e.team_unit_price=a.team_unit_price)})),e.list.some((function(e){return+e.course_id===+s}))||delete t.teamCourseTotalList[s]})),t.teamCourseList=Object(l[\"a\"])(e.list)}}}):\"personal\"===e&&this.$modalRouter.push({name:\"course-select-course\",props:{type:e,courses:this.personalCourseList,isLimit:!0},on:{ok:function(e){var a=[];Object(c[\"a\"])(t.coachList,(function(e){a.push(e.id)})),e.list.forEach((function(e){e.courseChecked=!1,e.coachGradeList=a,e.personal_times=null,e.personal_unit_price=null})),Object(c[\"a\"])(t.personalCourseTotalList,(function(s,i){Object(c[\"a\"])(e.list,(function(e){+e.course_id===+i&&(e.coachGradeList=Object(l[\"a\"])(s.list?s.list:a),e.personal_times=s.personal_times,e.personal_unit_price=s.personal_unit_price)})),e.list.some((function(e){return+e.course_id===+i}))||delete t.personalCourseTotalList[i]})),t.personalCoachListHistory=[],e.list.forEach((function(e){t.personalCoachListHistory.push(e.coachGradeList)})),t.personalCourseList=Object(l[\"a\"])(e.list)}}})},removeCourseItem:function(e,t){if(\"team\"===e){var a=Object(l[\"a\"])(this.teamCourseList);Object(u[\"a\"])(a,(function(e){return e.course_id===t})),this.teamCourseList=a;var s=Object(l[\"a\"])(this.teamCourseTotalList);delete s[t],this.teamCourseTotalList=s}else if(\"personal\"===e){var i=Object(l[\"a\"])(this.personalCourseList);Object(u[\"a\"])(i,(function(e){return e.course_id===t})),this.personalCourseList=i;var r=Object(l[\"a\"])(this.personalCourseTotalList);delete r[t],this.personalCourseTotalList=r}},removeCourseItems:function(e){if(\"team\"===e){var t=Object(l[\"a\"])(this.teamCourseList),a=Object(u[\"a\"])(t,(function(e){return e.courseChecked}));this.teamCourseList=t;var s=Object(l[\"a\"])(this.teamCourseTotalList);a.forEach((function(e){delete s[e.course_id]})),this.teamCourseTotalList=s}else if(\"personal\"===e){var i=Object(l[\"a\"])(this.personalCourseList),r=Object(u[\"a\"])(i,(function(e){return e.courseChecked}));this.personalCourseList=i;var o=Object(l[\"a\"])(this.personalCourseTotalList);r.forEach((function(e){delete o[e.course_id]})),this.personalCourseTotalList=o}},courseItemCheckedChange:function(e,t,a){\"team\"===t?this.teamCourseList[a].courseChecked=e.target.checked:\"personal\"===t&&(this.personalCourseList[a].courseChecked=e.target.checked)},checkAllChange:function(e){var t=this;\"team\"===e?this.teamCourseList.forEach((function(e){e.courseChecked=!t.teamCheckAll})):\"personal\"===e&&this.personalCourseList.forEach((function(e){e.courseChecked=!t.personalCheckAll}))},coachItemChange:function(e,t,a){e.length?(this.personalCoachListHistory[a]=Object(l[\"a\"])(e),this.personalCourseTotalList[t]=this.personalCourseTotalList[t]?this.personalCourseTotalList[t]:{},this.personalCourseTotalList[t].list=Object(l[\"a\"])(e)):this.personalCourseList[a].coachGradeList=this.personalCoachListHistory[a]},coachAllOperationOk:function(){var e=this;Object(c[\"a\"])(this.personalCourseList,(function(t){t.courseChecked&&(t.coachGradeList=Object(l[\"a\"])(e.personalAllOperationCoachList),e.personalCourseTotalList[t.course_id]=e.personalCourseTotalList[t.course_id]?e.personalCourseTotalList[t.course_id]:{},e.personalCourseTotalList[t.course_id].list=Object(l[\"a\"])(e.personalAllOperationCoachList))})),this.personalCoachListHistory=[],Object(c[\"a\"])(this.personalCourseList,(function(t){e.personalCoachListHistory.push(t.coachGradeList)})),this.personalAllOperationCoachList=[],this.coachAllOperationDropdownIsShow=!1},course_validator:function(){this.courseIsFirstInput=!1;var e=!1,t=!1;if(this.packageData.is_team){var a=!1;a=this.teamCourseList.every((function(e){var t=isNaN(+e.team_times)?0:+e.team_times,a=isNaN(+e.team_unit_price)?0:+e.team_unit_price;return t*a!==0})),e=a&&this.teamCourseList.length}else e=!0;if(this.packageData.is_personal){var s=!1;s=this.personalCourseList.every((function(e){var t=isNaN(+e.personal_times)?0:+e.personal_times,a=isNaN(+e.personal_unit_price)?0:+e.personal_unit_price;return t*a!==0})),t=s&&this.personalCourseList.length}else t=!0;e&&t&&(this.packageData.is_team||this.packageData.is_personal)?(this.courseIsNone=!1,this.courseErrorText=\"\"):(this.courseIsNone=!0,this.courseErrorText=\"请输入上课范围\")},image_validator:function(){\"\"!==this.packageData.image.image_key?(this.imageIsNone=!1,this.imageErrorText=\"\"):(this.imageIsNone=!0,this.imageErrorText=\"请上传封面\")},transfer:function(e){this.packageData.is_allow_transfer=+e.target.checked,this.packageData.transfer_rate=void 0,this.form.resetFields([\"transfer_rate\"])},fileChange:function(e){e.length?(this.packageData.image.image_id=e[0].image_id,this.packageData.image.image_key=e[0].image_key,this.imageIsNone=!1,this.imageErrorText=\"\"):(this.packageData.image.image_id=null,this.packageData.image.image_key=\"\",this.imageIsNone=!0,this.imageErrorText=\"请上传封面\")},transferUnitChange:function(){this.packageData.transfer_rate=void 0,this.form.setFieldsValue({transfer_rate:void 0})},start_time_validator:function(e,t,a){t?a():a(\"请选择开始售卖时间\")},end_time_validator:function(e,t,a){t?a():a(\"请选择结束售卖时间\")},start_time_change:function(e){this.start_time=Object(l[\"a\"])(e)},handleStartOpenChange:function(e){e||(this.endOpen=!0)},disabledStartDate:function(e){var t=this.end_time;if(!t)return e.valueOf()<o()().startOf(\"day\").valueOf();var a=t.valueOf()>o()().add(30,\"y\").valueOf()?o()(t).subtract(30,\"y\").valueOf():o()().startOf(\"day\").valueOf();return e.valueOf()<a||e.valueOf()>o()(t).valueOf()},end_time_change:function(e){this.end_time=Object(l[\"a\"])(e)},handleEndOpenChange:function(e){this.endOpen=e},disabledEndDate:function(e){var t=this.start_time;return t&&(e.valueOf()>=o()(t).add(30,\"y\").valueOf()||e.valueOf()<o()(t).valueOf())||e.valueOf()<o()().startOf(\"day\").valueOf()},moment:o.a},watch:{teamCourseList:{deep:!0,handler:function(e){var t=!1,a=!1;t=Object(p[\"a\"])(e,(function(e){return e.courseChecked})),a=Object(p[\"a\"])(e,(function(e){return!e.courseChecked})),this.teamIndeterminate=!t&&!a,this.teamCheckAll=!!e.length&&t,this.teamCourseTotalObject.team_times=Object(d[\"a\"])(e,(function(e,t){var a=isNaN(+t.team_times)?0:+t.team_times;return e+a}),0),this.teamCourseTotalObject.total=Object(d[\"a\"])(e,(function(e,t){var a=isNaN(+t.team_times)?0:+t.team_times,s=isNaN(+t.team_unit_price)?0:+t.team_unit_price;return e+a*(10*s)/10}),0)}},personalCourseList:{deep:!0,handler:function(e){var t=!1,a=!1;t=Object(p[\"a\"])(e,(function(e){return e.courseChecked})),a=Object(p[\"a\"])(e,(function(e){return!e.courseChecked})),this.personalIndeterminate=!t&&!a,this.personalCheckAll=!!e.length&&t,this.personalCourseTotalObject.personal_times=Object(d[\"a\"])(e,(function(e,t){var a=isNaN(+t.personal_times)?0:+t.personal_times;return e+a}),0),this.personalCourseTotalObject.total=Object(d[\"a\"])(e,(function(e,t){var a=isNaN(+t.personal_times)?0:+t.personal_times,s=isNaN(+t.personal_unit_price)?0:+t.personal_unit_price;return e+a*(10*s)/10}),0)}}},filters:{course_item_total:function(e,t){return+e&&+t?10*+t*+e/10:0}},computed:{all_total:function(){var e=this.packageData.is_team?this.teamCourseTotalObject.total:0,t=this.packageData.is_personal?this.personalCourseTotalObject.total:0;return e+t}}},f=g,v=a(\"2877\"),k=Object(v[\"a\"])(f,s,i,!1,null,null,null);t[\"default\"]=k.exports}}]);","extractedComments":[]}