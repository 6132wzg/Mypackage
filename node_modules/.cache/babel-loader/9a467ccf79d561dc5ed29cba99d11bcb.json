{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/product/package/info.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/product/package/info.vue","mtime":1601345845268},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { InfoService } from \"./info.service\";\nimport tableMixin from '@/mixins/table.mixin';\nimport ShopList from '@/views/biz-modals/package/shop-list';\nimport Synchronize from '@/views/biz-modals/package/synchronize';\nimport SuccessTip from '@/views/biz-modals/package/success-tip';\nimport userPackageActions from '@/hooks/package/package-actions.hook';\nimport BizPackageInfo from '@/views/biz-components/package/info/info.vue';\nimport SoldCoursePackageUpdateRights from '@/views/biz-modals/sold/course/package/update-rights';\nimport { ListService } from '@/views/pages/shop/product/course/manage/package/list.service.ts';\nexport default {\n  name: 'ShopPackageInfo',\n  components: {\n    BizPackageInfo: BizPackageInfo\n  },\n  mixins: [tableMixin],\n  serviceInject: function serviceInject() {\n    return {\n      service: InfoService,\n      listService: ListService\n    };\n  },\n  data: function data() {\n    return {\n      pageType: 'shop'\n    };\n  },\n  hooks: function hooks() {\n    return {\n      userPackageActions: userPackageActions(this)\n    };\n  },\n  rxState: function rxState() {\n    var _this$service = this.service,\n        info$ = _this$service.info$,\n        auth$ = _this$service.auth$;\n    return {\n      info$: info$,\n      auth$: auth$\n    };\n  },\n  modals: {\n    SoldCoursePackageUpdateRights: SoldCoursePackageUpdateRights\n  },\n  computed: {\n    btnOptions: function btnOptions() {\n      return [{\n        text: '编辑',\n        click: this.onEdit,\n        if: this.auth$['shop:product:package_course|edit']\n      }, {\n        text: '删除',\n        click: this.deletePackage,\n        if: this.auth$['shop:product:package_course|del']\n      }, {\n        text: '下架',\n        click: this.onDownShelf,\n        if: this.auth$['shop:product:package_course|down']\n      }, {\n        text: '上架',\n        click: this.onUpShelf,\n        if: this.auth$['shop:product:package_course|up']\n      }, {\n        text: '应用至售出',\n        click: this.batchOperate,\n        if: this.auth$['shop:product:package_course|batch_operate']\n      }, {\n        text: '修改售出权益',\n        click: this.updateRight,\n        if: this.auth$['shop:product:package_course|sync_rights']\n      }];\n    }\n  },\n  methods: {\n    onUpShelf: function onUpShelf() {\n      var id = this.info$.id;\n      var channel = this.info$.publish_channel;\n      this.userPackageActions.onUpShelf({\n        id: id,\n        channel: channel,\n        pageType: this.pageType\n      });\n    },\n    onDownShelf: function onDownShelf() {\n      var _this$info$ = this.info$,\n          id = _this$info$.id,\n          course_name = _this$info$.course_name;\n      this.userPackageActions.onDownShelf({\n        id: id,\n        pageType: this.pageType,\n        shopPackageName: course_name\n      });\n    },\n    batchOperate: function batchOperate() {\n      var _this = this;\n\n      var id = this.info$.package_course_id;\n      this.$modalRouter.push({\n        name: 'Synchronize',\n        on: {\n          success: function success() {\n            _this.$confirm({\n              title: '提示',\n              content: \"\\u8BF7\\u518D\\u6B21\\u786E\\u8BA4\\u662F\\u5426\\u540C\\u6B65\\uFF0C\\u540C\\u6B65\\u540E\\u4F1A\\u8986\\u76D6\\u552E\\u51FA\\u8BFE\\u7A0B\\u5305\\uFF0C\\u5C06\\u4F1A\\u67092\\uFF5E5s\\u65E0\\u6CD5\\u6B63\\u5E38\\u4F7F\\u7528\",\n              onOk: function onOk() {\n                _this.listService.setSyncSold(id).subscribe(function (res) {\n                  _this.$modalRouter.push({\n                    name: 'success-tip'\n                  });\n\n                  _this.$router.reload();\n                });\n              },\n              onCancel: function onCancel() {}\n            });\n          }\n        }\n      });\n    },\n    deletePackage: function deletePackage() {\n      var _this2 = this;\n\n      var id = this.info$.id;\n      var name = this.info$.course_name;\n      this.userPackageActions.deletePackage(id, name, this.listService.deletePackage.bind(this.listService)).then(function (res) {\n        _this2.$router.push({\n          path: 'list'\n        });\n      });\n    },\n    onEdit: function onEdit() {\n      var id = this.info$.id;\n      this.userPackageActions.onEdit({\n        pageType: this.pageType,\n        id: id\n      });\n    },\n    updateRight: function updateRight() {\n      var id = this.info$.id;\n      this.$modalRouter.push({\n        name: 'sold-course-package-update-rights',\n        props: {\n          id: id,\n          isSync: true,\n          isShowLink: true\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["info.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"page-brand-package-info\">\n    <biz-package-info :info=\"info$\" :btn-options=\"btnOptions\">\n      <div slot=\"actions\">\n        <st-btn-actions :options=\"btnOptions\"></st-btn-actions>\n      </div>\n    </biz-package-info>\n  </div>\n</template>\n\n<script>\nimport { InfoService } from './info.service'\nimport tableMixin from '@/mixins/table.mixin'\nimport ShopList from '@/views/biz-modals/package/shop-list'\nimport Synchronize from '@/views/biz-modals/package/synchronize'\nimport SuccessTip from '@/views/biz-modals/package/success-tip'\nimport userPackageActions from '@/hooks/package/package-actions.hook'\nimport BizPackageInfo from '@/views/biz-components/package/info/info.vue'\nimport SoldCoursePackageUpdateRights from '@/views/biz-modals/sold/course/package/update-rights'\nimport { ListService } from '@/views/pages/shop/product/course/manage/package/list.service.ts'\nexport default {\n  name: 'ShopPackageInfo',\n  components: { BizPackageInfo },\n  mixins: [tableMixin],\n  serviceInject() {\n    return {\n      service: InfoService,\n      listService: ListService\n    }\n  },\n  data() {\n    return {\n      pageType: 'shop'\n    }\n  },\n  hooks() {\n    return {\n      userPackageActions: userPackageActions(this)\n    }\n  },\n  rxState() {\n    const { info$, auth$ } = this.service\n    return {\n      info$,\n      auth$\n    }\n  },\n  modals: {\n    SoldCoursePackageUpdateRights\n  },\n  computed: {\n    btnOptions() {\n      return [\n        {\n          text: '编辑',\n          click: this.onEdit,\n          if: this.auth$['shop:product:package_course|edit']\n        },\n        {\n          text: '删除',\n          click: this.deletePackage,\n          if: this.auth$['shop:product:package_course|del']\n        },\n        {\n          text: '下架',\n          click: this.onDownShelf,\n          if: this.auth$['shop:product:package_course|down']\n        },\n        {\n          text: '上架',\n          click: this.onUpShelf,\n          if: this.auth$['shop:product:package_course|up']\n        },\n        {\n          text: '应用至售出',\n          click: this.batchOperate,\n          if: this.auth$['shop:product:package_course|batch_operate']\n        },\n        {\n          text: '修改售出权益',\n          click: this.updateRight,\n          if: this.auth$['shop:product:package_course|sync_rights']\n        }\n      ]\n    }\n  },\n  methods: {\n    onUpShelf() {\n      let id = this.info$.id\n      let channel = this.info$.publish_channel\n      this.userPackageActions.onUpShelf({\n        id,\n        channel,\n        pageType: this.pageType\n      })\n    },\n    onDownShelf() {\n      let { id, course_name } = this.info$\n      this.userPackageActions.onDownShelf({\n        id,\n        pageType: this.pageType,\n        shopPackageName: course_name\n      })\n    },\n    batchOperate() {\n      let id = this.info$.package_course_id\n      this.$modalRouter.push({\n        name: 'Synchronize',\n        on: {\n          success: () => {\n            this.$confirm({\n              title: '提示',\n              content: `请再次确认是否同步，同步后会覆盖售出课程包，将会有2～5s无法正常使用`,\n              onOk: () => {\n                this.listService.setSyncSold(id).subscribe(res => {\n                  this.$modalRouter.push({\n                    name: 'success-tip'\n                  })\n                  this.$router.reload()\n                })\n              },\n              onCancel() {}\n            })\n          }\n        }\n      })\n    },\n    deletePackage() {\n      let id = this.info$.id\n      let name = this.info$.course_name\n      this.userPackageActions\n        .deletePackage(\n          id,\n          name,\n          this.listService.deletePackage.bind(this.listService)\n        )\n        .then(res => {\n          this.$router.push({ path: 'list' })\n        })\n    },\n    onEdit() {\n      let id = this.info$.id\n      this.userPackageActions.onEdit({ pageType: this.pageType, id })\n    },\n    updateRight() {\n      let id = this.info$.id\n      this.$modalRouter.push({\n        name: 'sold-course-package-update-rights',\n        props: {\n          id,\n          isSync: true,\n          isShowLink: true\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style></style>\n"],"sourceRoot":"src/views/pages/shop/product/package"}]}