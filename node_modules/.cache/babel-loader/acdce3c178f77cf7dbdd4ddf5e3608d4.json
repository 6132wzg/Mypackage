{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js!/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/product/card/member/period/h5mixin.js","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/product/card/member/period/h5mixin.js","mtime":1591147717410},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js","mtime":1591062572352},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\nimport { cloneDeep } from 'lodash-es';\nvar unitEnum = {\n  2: '天',\n  3: '月',\n  4: '年'\n};\nexport default {\n  data: function data() {\n    return {\n      h5CardInfo: {\n        card_name: '',\n        special_note: '',\n        admission_range: {},\n        admission_shop_list: [],\n        card_bg: {\n          image_id: 0,\n          image_key: this.cardBgList[0].image_key,\n          image_url: this.cardBgList[0].image_url,\n          index: 1\n        },\n        card_contents: '',\n        card_introduction: '',\n        price_gradient: [],\n        price: {\n          card_price: '',\n          deadline: {}\n        },\n        can_use_shop: [],\n        consumption_range: {},\n        description: '',\n        consumerList: []\n      }\n    };\n  },\n  watch: {\n    cardIntroduction: function cardIntroduction(val) {\n      this.h5CardInfo.card_introduction = val;\n    },\n    cardContents: function cardContents(val) {\n      this.h5CardInfo.card_contents = val;\n    },\n    cardBg: function cardBg(val) {\n      this.h5CardInfo.card_bg = val;\n    },\n    'cardData.price_setting': function cardDataPrice_setting(val) {\n      this.syncPrice();\n    },\n    'cardData.unit': function cardDataUnit(val) {\n      var cardData = this.form.getFieldsValue().cardData;\n      var price = {\n        card_price: cardData.card_price || '',\n        deadline: {\n          number: cardData.num || '',\n          type: val\n        }\n      };\n      this.h5CardInfo.price = price;\n    },\n    'cardData.bg_image': function cardDataBg_image(val) {\n      this.h5CardInfo.card_bg = val;\n    },\n    rallyPriceList: {\n      deep: true,\n      handler: function handler() {\n        this.syncPrice();\n      }\n    },\n    shopPriceList: {\n      deep: true,\n      handler: function handler() {\n        this.syncPrice();\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.h5CardInfo.admission_range = {\n      id: 1,\n      name: this.shopName.name\n    };\n  },\n  methods: {\n    initH5CardInfo: function initH5CardInfo() {\n      var cardInfo = Object.assign({}, this.cardInfo);\n      this.h5CardInfo.card_name = cardInfo.card_name;\n      this.h5CardInfo.special_note = cardInfo.special_note;\n    },\n    syncName: function syncName(e) {\n      this.h5CardInfo.card_name = e.target.value;\n    },\n    syncSpecialNote: function syncSpecialNote(e) {\n      this.h5CardInfo.special_note = e.target.value;\n      console.log(this.h5CardInfo);\n    },\n    syncPrice: function syncPrice(values) {\n      // 会员卡金额\n      var p = []; // 品牌统一定价\n\n      if (this.cardType === 0) {\n        this.rallyPriceList.forEach(function (i) {\n          p.push({\n            validity_period: +i.time.num + unitEnum[i.time.unit],\n            sale_price: +i.rally_price + '元'\n          });\n        });\n      } else if (this.cardType === 1) {\n        this.rallyPriceList.forEach(function (i) {\n          p.push({\n            validity_times: \"\".concat(+i.validity_times, \"\\u6B21\"),\n            sale_price: +i.rally_price + '元'\n          });\n        });\n      }\n\n      this.h5CardInfo.price_gradient = cloneDeep(p);\n    },\n    syncConsumer: function syncConsumer(checkValue) {\n      console.log(checkValue);\n      var consumerEnum = this.consumerType;\n      this.h5CardInfo.consumerList = checkValue.map(function (item) {\n        return consumerEnum[--item].label;\n      });\n    }\n  }\n};",null]}