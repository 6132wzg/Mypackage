{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/sold/card/upgrade-member.vue?vue&type=template&id=2f91bf34&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/sold/card/upgrade-member.vue","mtime":1600926555945},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":1591062572376},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["\n<st-modal\n  v-model=\"show\"\n  @cancel=\"onCancel\"\n  wrapClassName=\"modal-sold-deal-sale\"\n>\n  <template slot=\"title\">\n    升级\n    <st-help-tooltip id=\"TSMC002\" placement=\"right\" />\n  </template>\n  <div :class=\"sale('content')\">\n    <a-row :class=\"sale('info')\">\n      <a-col :span=\"13\">\n        <st-info>\n          <st-info-item label=\"卡名\">{{ info.card_name }}</st-info-item>\n          <st-info-item label=\"当前额度\">\n            {{ info.remain_amount }}\n          </st-info-item>\n          <st-info-item label=\"初始额度\">{{ info.init_amount }}</st-info-item>\n          <st-info-item label=\"优惠赠送\">{{ info.gift_amount }}</st-info-item>\n          <st-info-item label=\"实付金额\">{{ info.pay_price }}</st-info-item>\n          <st-info-item label=\"到期日期\">{{ info.end_time }}</st-info-item>\n        </st-info>\n      </a-col>\n      <a-col :span=\"11\">\n        <st-info>\n          <st-info-item label=\"购卡人\">{{ info.member_name }}</st-info-item>\n          <st-info-item label=\"卡成员\" v-if=\"isFamilyCard\">\n            {{ info.card_member }}\n          </st-info-item>\n          <template v-if=\"info.is_minors === PERSON_TYPE.CHILD\">\n            <st-info-item label=\"家长手机号\">\n              {{ info.parent_mobile }}\n            </st-info-item>\n            <st-info-item label=\"家长姓名\">\n              {{ info.parent_name }}\n            </st-info-item>\n          </template>\n          <st-info-item label=\"手机号\" v-else>{{ info.mobile }}</st-info-item>\n          <st-info-item label=\"订单号\">{{ info.order_id }}</st-info-item>\n          <st-info-item label=\"订单状态\">\n            {{ info.order_status }}\n          </st-info-item>\n          <st-info-item label=\"销售人员\">{{ info.staff_name }}</st-info-item>\n        </st-info>\n      </a-col>\n    </a-row>\n    <st-form :form=\"form\" labelWidth=\"88px\">\n      <div :class=\"sale('sale')\">\n        <st-form-item :label=\"$c('member_card')\" required>\n          <a-select\n            showSearch\n            allowClear\n            :placeholder=\"`输入${$c('member_card')}名搜索`\"\n            :defaultActiveFirstOption=\"false\"\n            :showArrow=\"false\"\n            :filterOption=\"false\"\n            @change=\"onSelectCardChange\"\n            v-decorator=\"decorators.memberCardId\"\n            @search=\"onCardSearch\"\n            notFoundContent=\"无搜索结果\"\n          >\n            <a-select-option\n              v-for=\"(item, index) in cardList\"\n              :value=\"+item.id\"\n              :key=\"index\"\n            >\n              {{ item.card_name }}\n            </a-select-option>\n          </a-select>\n        </st-form-item>\n        <assign-shop\n          v-if=\"upgradeCardInfo.admission_range_info\"\n          label=\"入场场馆\"\n          :form=\"form\"\n          :type=\"upgradeCardInfo.admission_range_info.admission_range\"\n          :shopIds=\"\n            upgradeCardInfo.admission_range_info.product_support_shops\n          \"\n          required\n          :disabled=\"\n            info.auth && !info.auth['shop:sold:transaction|right_price_edit']\n          \"\n          @change=\"onShopChange\"\n        />\n        <st-form-item label=\"规格\" class=\"mg-b16\" required>\n          <template v-if=\"selectCardIsNone\">无</template>\n          <a-radio-group v-else v-model=\"selectSpecs\" @change=\"onSpecsChange\">\n            <a-radio\n              v-for=\"(item, index) in upgradeCardInfo.specs\"\n              :value=\"item.id\"\n              :key=\"index\"\n            >\n              <template v-if=\"item.id === selectSpecs\">\n                {{ info.card_name }}/{{ item.price }}元/\n                <editable-number\n                  :width=\"200\"\n                  v-model=\"ruleQuota\"\n                  :unit=\"item.card_type\"\n                  :form=\"form\"\n                  :float=\"false\"\n                  :max=\"9999\"\n                  :placeholder=\"`请输入${item.card_type}数`\"\n                  @ok=\"onRuleQuotaChange\"\n                />\n              </template>\n              <template v-else>\n                {{ info.card_name }}/{{ item.price }}元/{{ item.card_amount\n                }}{{ item.card_type }}\n              </template>\n            </a-radio>\n          </a-radio-group>\n        </st-form-item>\n        <st-form-item label=\"开卡方式\" required>\n          <template v-if=\"selectCardIsNone\">无</template>\n          <a-radio-group\n            v-else\n            v-model=\"selectOpenType\"\n            @change=\"onOpenTypeChange\"\n          >\n            <a-radio\n              v-for=\"(item, index) in upgradeCardInfo.open_type\"\n              :value=\"item.id\"\n              :key=\"index\"\n            >\n              {{ item.open_type }}\n            </a-radio>\n          </a-radio-group>\n        </st-form-item>\n        <st-form-item\n          label=\"有效时间\"\n          :class=\"{ 'mg-b0': !selectCardIsNone && +selectOpenType === 3 }\"\n          :required=\"!selectCardIsNone && +selectOpenType === 3\"\n        >\n          <template v-if=\"selectCardIsNone\">无</template>\n          <template\n            v-if=\"\n              !selectCardIsNone &&\n                +selectOpenType === 1 &&\n                upgradeCardInfo.server_time\n            \"\n          >\n            {{\n              moment(upgradeCardInfo.server_time * 1000).format(\n                'YYYY-MM-DD HH:mm'\n              )\n            }}&nbsp;至&nbsp;\n            {{\n              moment(upgradeCardInfo.server_time * 1000)\n                .add(getValidTime, 'd')\n                .format('YYYY-MM-DD HH:mm')\n            }}\n          </template>\n          <template v-if=\"!selectCardIsNone && +selectOpenType === 2\">\n            {{\n              upgradeCardInfo.open_type.filter(i => +i.id === 2)[0]\n                .automatic_num\n            }}天内未开卡，则{{\n              upgradeCardInfo.open_type.filter(i => +i.id === 2)[0]\n                .automatic_num + 1\n            }}天0：00自动开卡\n          </template>\n          <div\n            :class=\"sale('time')\"\n            v-if=\"!selectCardIsNone && +selectOpenType === 3\"\n          >\n            <a-form-item class=\"page-a-form\">\n              <a-date-picker\n                :disabledDate=\"disabledStartDate\"\n                v-decorator=\"decorators.startTime\"\n                @change=\"onStartTimeChange\"\n                style=\"width: 188px\"\n                format=\"YYYY-MM-DD HH:mm\"\n                :showTime=\"{ format: 'HH:mm' }\"\n                placeholder=\"开始时间\"\n                :allowClear=\"false\"\n                :showToday=\"false\"\n              />\n              <span style=\"width: 158px\">\n                &nbsp;&nbsp;至&nbsp;&nbsp;{{ endTime }}\n              </span>\n            </a-form-item>\n          </div>\n        </st-form-item>\n        <st-form-item label=\"购买赠送\">\n          <st-input-number\n            :disabled=\"selectCardIsNone\"\n            v-model=\"giftAmount\"\n            :max=\"+selectSpecsItem.gift_max\"\n            :placeholder=\"\n              `请输入赠送的${\n                selectCardItem.card_type !== 1 ? '天数' : '次数'\n              }`\n            \"\n          >\n            <span slot=\"addonAfter\">\n              {{ selectCardItem.card_type !== 1 ? '天' : '次' }}\n            </span>\n          </st-input-number>\n        </st-form-item>\n        <editable-contract-number\n          v-model=\"info.contract_number\"\n          :form=\"form\"\n        />\n        <st-form-item class=\"mg-b12\" label=\"商品价格\">\n          <editable-number\n            v-model=\"cardPrice\"\n            unit=\"元\"\n            :disabled=\"\n              info.auth &&\n                !info.auth['shop:sold:transaction|right_price_edit']\n            \"\n            :form=\"form\"\n            @ok=\"onPriceChange\"\n          />\n        </st-form-item>\n        <st-form-item required>\n          <template slot=\"label\">\n            原卡抵扣\n            <st-help-tooltip id=\"TSMC003\" />\n          </template>\n          <st-input-number\n            @change=\"onSurplusPriceChange\"\n            v-decorator=\"decorators.surplusPrice\"\n            :float=\"true\"\n            :max=\"+info.deduct_limit\"\n            placeholder=\"请输入原卡可以抵扣的剩余价值金额\"\n          >\n            <span slot=\"addonAfter\">元</span>\n          </st-input-number>\n        </st-form-item>\n        <st-form-item :class=\"sale('discounts')\" label=\"优惠金额\">\n          <div>\n            <div :class=\"sale('discounts-total')\">\n              <span>{{ couponText }}</span>\n              <a-dropdown\n                v-model=\"couponDropdownVisible\"\n                :disabled=\"couponList.length === 0\"\n                :class=\"sale({ disabled: couponList.length === 0 })\"\n                placement=\"bottomRight\"\n                :getPopupContainer=\"trigger => trigger.parentNode\"\n                :trigger=\"['click']\"\n              >\n                <div :class=\"sale('discounts-promotion')\">\n                  <span>\n                    {{ couponList.length === 0 ? '无优惠券' : '优惠券选择' }}\n                  </span>\n                  <a-icon type=\"right\" />\n                </div>\n                <a-radio-group\n                  v-model=\"selectCoupon\"\n                  @change=\"onSelectCouponChange\"\n                  :class=\"sale('dropdown')\"\n                  slot=\"overlay\"\n                >\n                  <a-menu>\n                    <a-menu-item @click=\"onSelectCoupon\">\n                      <a-radio :value=\"-1\">不使用</a-radio>\n                    </a-menu-item>\n                    <a-menu-item\n                      @click=\"onSelectCoupon\"\n                      :key=\"index\"\n                      v-for=\"(item, index) in couponList\"\n                    >\n                      <a-radio :value=\"item.id\">\n                        {{ item.name }} {{ item.price }}\n                      </a-radio>\n                    </a-menu-item>\n                  </a-menu>\n                </a-radio-group>\n              </a-dropdown>\n            </div>\n          </div>\n        </st-form-item>\n        <st-form-item :class=\"sale('discounts')\" label=\"定金抵扣\">\n          <div>\n            <div :class=\"sale('discounts-total')\">\n              <span>{{ advanceText }}</span>\n              <a-dropdown\n                v-model=\"advanceDropdownVisible\"\n                :disabled=\"advanceList.length === 0\"\n                :class=\"sale({ disabled: advanceList.length === 0 })\"\n                placement=\"bottomRight\"\n                :getPopupContainer=\"trigger => trigger.parentNode\"\n                :trigger=\"['click']\"\n              >\n                <div :class=\"sale('discounts-promotion')\">\n                  <span>\n                    {{ advanceList.length === 0 ? '无定金' : '定金选择' }}\n                  </span>\n                  <a-icon type=\"right\" />\n                </div>\n                <a-radio-group\n                  v-model=\"selectAdvance\"\n                  @change=\"onSelectAdvanceChange\"\n                  :class=\"sale('dropdown')\"\n                  slot=\"overlay\"\n                >\n                  <a-menu>\n                    <a-menu-item @click=\"onSelectAdvance\">\n                      <a-radio :value=\"-1\">不使用</a-radio>\n                    </a-menu-item>\n                    <a-menu-item\n                      @click=\"onSelectAdvance\"\n                      :key=\"index\"\n                      v-for=\"(item, index) in advanceList\"\n                    >\n                      <a-radio :value=\"item.id\">\n                        定金 {{ item.price }}\n                      </a-radio>\n                    </a-menu-item>\n                  </a-menu>\n                </a-radio-group>\n              </a-dropdown>\n            </div>\n          </div>\n        </st-form-item>\n        <st-form-item label=\"减免金额\">\n          <st-input-number\n            v-model=\"reduceAmount\"\n            :float=\"true\"\n            placeholder=\"请输入\"\n          >\n            <span slot=\"addonAfter\">元</span>\n          </st-input-number>\n        </st-form-item>\n        <st-form-item\n          validateStatus=\"error\"\n          :help=\"orderAmountText\"\n          class=\"mg-b0\"\n          label=\"小计\"\n        >\n          <span class=\"total\">{{ priceInfo }}元</span>\n        </st-form-item>\n      </div>\n      <div :class=\"sale('remarks')\">\n        <st-form-item label=\"销售人员\" required>\n          <a-select\n            v-decorator=\"decorators.saleName\"\n            placeholder=\"选择签单的工作人员\"\n          >\n            <a-select-option\n              v-for=\"(item, index) in saleList\"\n              :key=\"index\"\n              :value=\"item.id\"\n            >\n              {{ item.staff_name }}\n            </a-select-option>\n          </a-select>\n        </st-form-item>\n        <st-form-item label=\"备注\" class=\"mg-b0\">\n          <a-textarea\n            v-model=\"description\"\n            :autosize=\"{ minRows: 4, maxRows: 6 }\"\n          />\n        </st-form-item>\n      </div>\n    </st-form>\n  </div>\n  <template slot=\"footer\">\n    <div :class=\"sale('footer')\">\n      <div class=\"price\">\n        <span>{{ priceInfo }}元</span>\n        <span>订单总额：{{ cardPrice }}元</span>\n      </div>\n      <div class=\"button\">\n        <st-button @click=\"onCreateOrder\" :loading=\"loading.upgrade\">\n          创建订单\n        </st-button>\n        <st-button\n          @click=\"onPay\"\n          :loading=\"loading.upgradePay\"\n          type=\"primary\"\n        >\n          立即支付\n        </st-button>\n      </div>\n    </div>\n  </template>\n</st-modal>\n",null]}