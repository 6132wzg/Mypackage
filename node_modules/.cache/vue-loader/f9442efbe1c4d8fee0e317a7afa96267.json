{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/components/modal/modal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/components/modal/modal.vue","mtime":1600926556052},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { defaults } from 'lodash-es'\nexport default {\n  name: 'StModal',\n  model: {\n    prop: 'visible',\n    event: 'change'\n  },\n  props: {\n    size: {\n      type: String,\n      default: 'default'\n    },\n    width: {\n      type: String,\n      default: ''\n    },\n    wrapClassName: {\n      type: String\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    backgroundImgae: {\n      type: String,\n      default: ''\n    },\n    maskClosable: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data() {\n    return {\n      /**\n       * 挂在 window 对象上\n       */\n      currentModalName: window.currentModalName || ''\n    }\n  },\n  computed: {\n    bodyStyle() {\n      return this.backgroundImgae.length > 0\n        ? {\n            backgroundImage: `url(${this.backgroundImgae})`,\n            backgroundSize: '100% 100%'\n          }\n        : {}\n    },\n    isFooterNull() {\n      return this.$attrs.footer === false || this.$attrs.footer === null\n    },\n    computedWidth() {\n      let width = 0\n      if (this.width) {\n        width = this.width\n      } else if (this.size === 'default') {\n        width = 676\n      } else if (this.size === 'small') {\n        width = 484\n      }\n      return width\n    }\n  },\n  methods: {\n    close() {\n      this.$emit('change', false)\n      this.$emit('cancel')\n    },\n    clickModal() {\n      if (this.maskClosable) {\n        this.close()\n      }\n    },\n    clickModalContent(e) {\n      e.stopPropagation()\n    }\n  },\n  mounted() {\n    /**\n     * 需要modal是v-modal-link唤起的 <modal-link> 会有异步问题不要用\n     */\n    this.antModalEl = document.querySelector('.ant-modal')\n    this.antModalContentEl = document.querySelector('.ant-modal-content')\n    if (this.antModalEl && this.antModalContentEl) {\n      // 模态窗上下点击不关闭\n      // console.log(this.antModalEl, this.antModalContentEl)\n      this.antModalEl.addEventListener('click', this.clickModal, false)\n      this.antModalContentEl.addEventListener(\n        'click',\n        this.clickModalContent,\n        false\n      )\n      document.body.style = 'overflow:hidden;padding-right:8px;'\n    }\n  },\n  beforeDestroy() {\n    if (this.antModalEl && this.antModalContentEl) {\n      this.antModalEl.removeEventListener('click', this.clickModal, false)\n      this.antModalContentEl.removeEventListener(\n        'click',\n        this.clickModalContent,\n        false\n      )\n    }\n  },\n  destroyed() {\n    document.body.style = ''\n  }\n}\n",{"version":3,"sources":["modal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"modal.vue","sourceRoot":"src/views/components/modal","sourcesContent":["<template>\n  <a-modal\n    v-bind=\"$attrs\"\n    :width=\"computedWidth\"\n    :maskClosable=\"maskClosable\"\n    v-on=\"$listeners\"\n    :wrapClassName=\"\n      [\n        'st-modal',\n        isFooterNull ? 'st-modal--footer-null' : '',\n        wrapClassName\n      ].join(' ')\n    \"\n  >\n    <div class=\"st-modal__close\" @click=\"close\">\n      <st-icon type=\"modal-close\"></st-icon>\n      <div v-show=\"false\">当前弹出层：{{ currentModalName }}</div>\n    </div>\n    <slot name=\"title\" slot=\"title\"></slot>\n    <slot name=\"prepend\"></slot>\n    <div class=\"st-modal__body\" :style=\"bodyStyle\">\n      <a-spin :spinning=\"loading\">\n        <slot></slot>\n      </a-spin>\n    </div>\n\n    <slot name=\"footer\" slot=\"footer\"></slot>\n  </a-modal>\n</template>\n\n<script>\nimport { defaults } from 'lodash-es'\nexport default {\n  name: 'StModal',\n  model: {\n    prop: 'visible',\n    event: 'change'\n  },\n  props: {\n    size: {\n      type: String,\n      default: 'default'\n    },\n    width: {\n      type: String,\n      default: ''\n    },\n    wrapClassName: {\n      type: String\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    backgroundImgae: {\n      type: String,\n      default: ''\n    },\n    maskClosable: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data() {\n    return {\n      /**\n       * 挂在 window 对象上\n       */\n      currentModalName: window.currentModalName || ''\n    }\n  },\n  computed: {\n    bodyStyle() {\n      return this.backgroundImgae.length > 0\n        ? {\n            backgroundImage: `url(${this.backgroundImgae})`,\n            backgroundSize: '100% 100%'\n          }\n        : {}\n    },\n    isFooterNull() {\n      return this.$attrs.footer === false || this.$attrs.footer === null\n    },\n    computedWidth() {\n      let width = 0\n      if (this.width) {\n        width = this.width\n      } else if (this.size === 'default') {\n        width = 676\n      } else if (this.size === 'small') {\n        width = 484\n      }\n      return width\n    }\n  },\n  methods: {\n    close() {\n      this.$emit('change', false)\n      this.$emit('cancel')\n    },\n    clickModal() {\n      if (this.maskClosable) {\n        this.close()\n      }\n    },\n    clickModalContent(e) {\n      e.stopPropagation()\n    }\n  },\n  mounted() {\n    /**\n     * 需要modal是v-modal-link唤起的 <modal-link> 会有异步问题不要用\n     */\n    this.antModalEl = document.querySelector('.ant-modal')\n    this.antModalContentEl = document.querySelector('.ant-modal-content')\n    if (this.antModalEl && this.antModalContentEl) {\n      // 模态窗上下点击不关闭\n      // console.log(this.antModalEl, this.antModalContentEl)\n      this.antModalEl.addEventListener('click', this.clickModal, false)\n      this.antModalContentEl.addEventListener(\n        'click',\n        this.clickModalContent,\n        false\n      )\n      document.body.style = 'overflow:hidden;padding-right:8px;'\n    }\n  },\n  beforeDestroy() {\n    if (this.antModalEl && this.antModalContentEl) {\n      this.antModalEl.removeEventListener('click', this.clickModal, false)\n      this.antModalContentEl.removeEventListener(\n        'click',\n        this.clickModalContent,\n        false\n      )\n    }\n  },\n  destroyed() {\n    document.body.style = ''\n  }\n}\n</script>\n"]}]}