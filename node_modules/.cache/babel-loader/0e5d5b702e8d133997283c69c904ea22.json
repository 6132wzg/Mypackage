{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/package/onSales.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/package/onSales.vue","mtime":1600926555868},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.number.constructor\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { OnSalesService } from \"./on-sales.service\";\nimport { ruleOptions } from \"./onSales.config\";\nexport default {\n  name: 'ModalPackageOnSale',\n  bem: {\n    bModal: 'modal-package-on-sale'\n  },\n  serviceInject: function serviceInject() {\n    return {\n      service: OnSalesService\n    };\n  },\n  serviceProviders: function serviceProviders() {\n    return [OnSalesService];\n  },\n  rxState: function rxState() {\n    var _this$service = this.service,\n        info$ = _this$service.info$,\n        loading$ = _this$service.loading$;\n    return {\n      info$: info$,\n      loading$: loading$\n    };\n  },\n  data: function data() {\n    var form = this.$stForm.create();\n    var decorators = form.decorators(ruleOptions);\n    return {\n      form: form,\n      decorators: decorators,\n      show: false,\n      sale_start_time: '',\n      sale_end_time: ''\n    };\n  },\n  props: {\n    id: {\n      type: [String, Number]\n    },\n    channel: {\n      type: String\n    },\n    pageType: [String]\n  },\n  computed: {\n    saleDate: function saleDate() {\n      return \"\".concat(moment(this.sale_start_time).format('YYYY-MM-DD'), \" ~ \").concat(moment(this.sale_end_time).format('YYYY-MM-DD'));\n    }\n  },\n  methods: {\n    onOnsale: function onOnsale() {\n      var _this = this;\n\n      this.form.validate().then(function (values) {\n        var id = _this.id,\n            channel = _this.channel,\n            pageType = _this.pageType,\n            sale_start_time = _this.sale_start_time,\n            sale_end_time = _this.sale_end_time;\n        var form = {\n          id: id\n        };\n\n        if (channel === 'shop') {\n          form = _objectSpread({}, form, {\n            sale_start_time: sale_start_time,\n            sale_end_time: sale_end_time\n          });\n        }\n\n        _this.service.setUpShelf(_objectSpread({}, form, {\n          pageType: pageType\n        })).subscribe(function (res) {\n          _this.$emit('success');\n\n          _this.show = false;\n        });\n      });\n    },\n    onSaleDate: function onSaleDate(value) {\n      this.sale_start_time = moment(value[0]).format('YYYY-MM-DD');\n      this.sale_end_time = moment(value[1]).format('YYYY-MM-DD');\n    }\n  },\n  created: function created() {\n    var _this2 = this;\n\n    var id = this.id,\n        pageType = this.pageType;\n    this.service.getUpShelfInfo({\n      id: id,\n      pageType: pageType\n    }).subscribe(function (res) {\n      _this2.$nextTick().then(function () {\n        _this2.form.setFieldsValue({\n          sale_date: [res.info.sale_start_time, res.info.sale_end_time]\n        });\n\n        _this2.sale_start_time = moment(res.info.sale_start_time).format('YYYY-MM-DD');\n        _this2.sale_end_time = moment(res.info.sale_end_time).format('YYYY-MM-DD');\n      });\n    });\n  }\n};",{"version":3,"sources":["onSales.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <st-modal\n    title=\"上架课程包\"\n    okText=\"确认上架\"\n    @ok=\"onOnsale\"\n    :confirmLoading=\"loading$.getUpShelfInfo\"\n    wrapClassName=\"modal-shop-product-course-package\"\n    v-model=\"show\"\n  >\n    <st-form :form=\"form\">\n      <st-form-item label=\"课程包名称\" labelWidth=\"128px\">\n        {{ info$.course_name }}\n      </st-form-item>\n      <st-form-item\n        v-if=\"pageType === 'brand'\"\n        label=\"当前上架门店\"\n        labelWidth=\"128px\"\n      >\n        {{ info$.upshelf_shop_num }}\n      </st-form-item>\n      <st-form-item\n        v-if=\"pageType === 'brand'\"\n        label=\"支持售卖门店数\"\n        labelWidth=\"128px\"\n      >\n        {{ info$.support_shop_num }}\n      </st-form-item>\n      <st-form-item label=\"支持售卖时间\" labelWidth=\"128px\" required>\n        <div v-if=\"info$.is_permanent_sale\">永久售卖</div>\n        <div v-else>\n          <!-- <st-range-picker\n            v-show=\"channel === 'shop'\"\n            v-decorator=\"decorators.sale_date\"\n            :disabledDays=\"180\"\n            disabled\n            @change=\"onSaleDate\"\n          /> -->\n          <span>{{ saleDate }}</span>\n        </div>\n      </st-form-item>\n    </st-form>\n  </st-modal>\n</template>\n<script>\nimport { OnSalesService } from './on-sales.service'\nimport { ruleOptions } from './onSales.config'\nexport default {\n  name: 'ModalPackageOnSale',\n  bem: {\n    bModal: 'modal-package-on-sale'\n  },\n  serviceInject() {\n    return {\n      service: OnSalesService\n    }\n  },\n  serviceProviders() {\n    return [OnSalesService]\n  },\n  rxState() {\n    const { info$, loading$ } = this.service\n    return { info$, loading$ }\n  },\n  data() {\n    const form = this.$stForm.create()\n    const decorators = form.decorators(ruleOptions)\n    return {\n      form,\n      decorators,\n      show: false,\n      sale_start_time: '',\n      sale_end_time: ''\n    }\n  },\n  props: {\n    id: {\n      type: [String, Number]\n    },\n    channel: {\n      type: String\n    },\n    pageType: [String]\n  },\n  computed: {\n    saleDate() {\n      return `${moment(this.sale_start_time).format('YYYY-MM-DD')} ~ ${moment(\n        this.sale_end_time\n      ).format('YYYY-MM-DD')}`\n    }\n  },\n  methods: {\n    onOnsale() {\n      this.form.validate().then(values => {\n        let { id, channel, pageType, sale_start_time, sale_end_time } = this\n        let form = { id }\n        if (channel === 'shop') {\n          form = {\n            ...form,\n            sale_start_time,\n            sale_end_time\n          }\n        }\n        this.service.setUpShelf({ ...form, pageType }).subscribe(res => {\n          this.$emit('success')\n          this.show = false\n        })\n      })\n    },\n    onSaleDate(value) {\n      this.sale_start_time = moment(value[0]).format('YYYY-MM-DD')\n      this.sale_end_time = moment(value[1]).format('YYYY-MM-DD')\n    }\n  },\n  created() {\n    const { id, pageType } = this\n    this.service.getUpShelfInfo({ id, pageType }).subscribe(res => {\n      this.$nextTick().then(() => {\n        this.form.setFieldsValue({\n          sale_date: [res.info.sale_start_time, res.info.sale_end_time]\n        })\n        this.sale_start_time = moment(res.info.sale_start_time).format(\n          'YYYY-MM-DD'\n        )\n        this.sale_end_time = moment(res.info.sale_end_time).format('YYYY-MM-DD')\n      })\n    })\n  }\n}\n</script>\n"],"sourceRoot":"src/views/biz-modals/package"}]}