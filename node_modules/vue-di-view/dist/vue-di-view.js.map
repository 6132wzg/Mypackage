{"version":3,"file":"vue-di-view.js","sources":["../src/refs.js","../src/directives/di-view.js","../src/vue-di-view.js"],"sourcesContent":["export default {}\n","import refs from '../refs'\n\nexport default {\n  name: 'di-view',\n  inserted: (el, binding) => {\n    if (!binding.value) {\n      throw new Error('[v-di-child] should pass arguments')\n    }\n    if (!binding.value.name) {\n      throw new Error('[v-di-child] prop [name] required')\n    }\n\n    // 先重置为none 避免布局闪烁\n    el.style.display = 'none'\n\n    // 确保placeholder存在\n    setTimeout(() => {\n      const placeEl = refs[binding.value.name]\n      const finded = [...placeEl.children].find(c => c === el)\n      if (!finded) {\n        placeEl.appendChild(el)\n        if ('show' in binding.value && !binding.value.show) {\n          el.style.display = 'none'\n        } else {\n          el.style.display = ''\n        }\n      }\n    })\n  },\n  componentUpdated(el, binding) {\n    if ('show' in binding.value) {\n      const newVal = binding.value\n      const oldVal = binding.oldValue\n      if (newVal.show !== oldVal.show) {\n        const placeEl = refs[binding.value.name]\n        const finded = [...placeEl.children].find(c => c === el)\n        if (!finded) {\n          placeEl.appendChild(el)\n        }\n        el.style.display = newVal.show ? '' : 'none'\n      }\n    }\n  },\n  unbind(el, binding) {\n    const placeEl = refs[binding.value.name]\n    placeEl.removeChild(el)\n  }\n}\n","import DiViewDirective from './directives/di-view'\nimport refs from './refs'\nexport default {\n  install(Vue) {\n    Vue.component('di-view', {\n      props: {\n        name: {\n          type: String\n        }\n      },\n      render(h) {\n        return h('div')\n      },\n      mounted() {\n        refs[this.name] = this.$el\n      }\n    })\n    Vue.directive(DiViewDirective.name, DiViewDirective)\n  }\n}\n"],"names":["name","inserted","el","binding","value","Error","style","display","setTimeout","placeEl","refs","_toConsumableArray","children","find","c","appendChild","show","componentUpdated","newVal","oldVal","oldValue","unbind","removeChild","install","Vue","component","props","type","String","render","h","mounted","this","$el","directive","DiViewDirective"],"mappings":";;;0hBAAe,KCEA,CACbA,KAAM,UACNC,SAAU,SAACC,EAAIC,OACRA,EAAQC,YACL,IAAIC,MAAM,0CAEbF,EAAQC,MAAMJ,WACX,IAAIK,MAAM,qCAIlBH,EAAGI,MAAMC,QAAU,OAGnBC,WAAW,eACHC,EAAUC,EAAKP,EAAQC,MAAMJ,MACpBW,EAAIF,EAAQG,UAAUC,KAAK,SAAAC,UAAKA,IAAMZ,MAEnDO,EAAQM,YAAYb,GAChB,SAAUC,EAAQC,QAAUD,EAAQC,MAAMY,KAC5Cd,EAAGI,MAAMC,QAAU,OAEnBL,EAAGI,MAAMC,QAAU,OAK3BU,0BAAiBf,EAAIC,MACf,SAAUA,EAAQC,MAAO,KACrBc,EAASf,EAAQC,MACjBe,EAAShB,EAAQiB,YACnBF,EAAOF,OAASG,EAAOH,KAAM,KACzBP,EAAUC,EAAKP,EAAQC,MAAMJ,MACpBW,EAAIF,EAAQG,UAAUC,KAAK,SAAAC,UAAKA,IAAMZ,KAEnDO,EAAQM,YAAYb,GAEtBA,EAAGI,MAAMC,QAAUW,EAAOF,KAAO,GAAK,UAI5CK,gBAAOnB,EAAIC,GACOO,EAAKP,EAAQC,MAAMJ,MAC3BsB,YAAYpB,WC3CT,CACbqB,iBAAQC,GACNA,EAAIC,UAAU,UAAW,CACvBC,MAAO,CACL1B,KAAM,CACJ2B,KAAMC,SAGVC,gBAAOC,UACEA,EAAE,QAEXC,mBACErB,EAAKsB,KAAKhC,MAAQgC,KAAKC,OAG3BT,EAAIU,UAAUC,EAAgBnC,KAAMmC"}