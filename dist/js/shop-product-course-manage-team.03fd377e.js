(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shop-product-course-manage-team"],{"069a6":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("st-panel",{attrs:{app:""}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("st-input-search",{attrs:{placeholder:"团课名称"},on:{search:e.onSearchCourseName},model:{value:e.course_name,callback:function(t){e.course_name=t},expression:"course_name"}})],1),n("a-row",[n("a-col",{attrs:{span:8}},[e.auth.add?n("st-button",{attrs:{type:"primary",icon:"add"},on:{click:e.onClickAddCourse}},[e._v("\n        新增门店团体课程\n      ")]):e._e()],1),n("a-col",{staticClass:"ta-r",attrs:{span:16}},[n("a-select",{staticClass:"mg-r8",staticStyle:{width:"160px"},on:{change:e.onChange},model:{value:e.$searchQuery.category_id,callback:function(t){e.$set(e.$searchQuery,"category_id",t)},expression:"$searchQuery.category_id"}},e._l(e.categoryList,(function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v("\n          "+e._s(t.setting_name)+"\n        ")])})),1)],1)],1),n("div",[n("shop-table",{on:{"delete-course":e.deleteCourse}})],1)],1)},s=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"page-shop-product-team__table"},[n("st-table",{staticClass:"mg-t16",attrs:{rowKey:"id",columns:e.columns,page:e.page,dataSource:e.list,loading:e.loading.getList},on:{change:e.onTableChange},scopedSlots:e._u([{key:"course_name",fn:function(t,a){return[a.auth["shop:product:team_course|get"]?n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.onClickCourseInfo(a.id)}}},[e._v("\n        "+e._s(t)+"\n      ")]):n("span",[e._v(e._s(t))])]}},{key:"strength_level",fn:function(e){return n("a-rate",{attrs:{defaultValue:e,disabled:""}})}},{key:"action",fn:function(t,a){return n("div",{},[n("st-table-actions",[a.auth["shop:product:team_course|get"]?n("a",{staticClass:"mg-r8",attrs:{href:"javascript:;"},on:{click:function(t){return e.onClickCourseInfo(a.id)}}},[e._v("\n          详情\n        ")]):e._e(),a.auth["shop:product:team_course|edit"]?n("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.onClickEditCourseInfo(a.id)}}},[e._v("\n          编辑\n        ")]):e._e(),a.auth["shop:product:team_course|del"]?n("a",[n("st-popconfirm",{attrs:{title:"一旦删除则无法恢复，确认删除"+a.course_name+"？"},on:{confirm:function(t){return e.onConfirmDeleteCourse(a)}}},[e._v("\n            删除\n          ")])],1):e._e()])],1)}}])})],1)},i=[],o=n("ea3e"),c=[{title:"团课名称",dataIndex:"course_name",width:200,scopedSlots:{customRender:"course_name"}},{title:"课程类别",dataIndex:"category_name"},{title:"课程强度",dataIndex:"strength_level",width:140,scopedSlots:{customRender:"strength_level"}},{title:"时长(分钟)",sorter:!0,dataIndex:"duration"},{title:"参考课时费(元)",dataIndex:"price"},{title:"发布渠道",dataIndex:"publish_name"},{title:"操作",dataIndex:"action",width:140,scopedSlots:{customRender:"action"}}],u=n("e0f8"),l={name:"TeamTableShop",mixins:[o["a"]],data:function(){return{columns:c}},serviceInject:function(){return{service:u["ListService"]}},rxState:function(){return{list:this.service.list$,page:this.service.page$,loading:this.service.loading$}},methods:{onClickCourseInfo:function(e){this.$router.push({name:"shop-product-course-manage-team-info",query:{courseId:e}})},onClickEditCourseInfo:function(e){this.$router.push({name:"shop-product-course-manage-team-edit",query:{id:e}})},onConfirmDeleteCourse:function(e){this.$emit("delete-course",e)}}},d=l,f=n("2877"),m=Object(f["a"])(d,r,i,!1,null,null,null),p=m.exports,h={name:"TeamCourseList",serviceInject:function(){return{listService:u["ListService"]}},components:{ShopTable:p},rxState:function(){return{categoryList:this.listService.categoryList$,auth:this.listService.auth$}},data:function(){return{course_name:""}},methods:{onClickAddCourse:function(){this.$router.push({name:"shop-product-course-manage-team-add"})},onSearchCourseName:function(e){this.$router.push({query:{course_name:this.course_name}})},onChange:function(){this.$router.push({query:this.$searchQuery})},deleteCourse:function(e){var t=this;this.listService.deleteCourse(e.id).subscribe((function(){t.$router.reload()}))}},mounted:function(){this.$searchQuery.category_id=-1}},b=h,v=Object(f["a"])(b,a,s,!1,null,null,null);t["default"]=v.exports},"2ff54":function(e,t,n){"use strict";n.r(t),n.d(t,"InfoService",(function(){return d}));var a,s=n("d225"),r=n("b0b4"),i=n("9ab4"),o=n("df29"),c=n("0cd5"),u=n("c4cc"),l=n("c1e8"),d=function(){function e(t){Object(s["a"])(this,e),this.shopTeamCourseApi=t,this.teamCourseInfo$=new o["d"]({})}return Object(r["a"])(e,[{key:"getTeamCourseInfo",value:function(e){var t=this;return this.shopTeamCourseApi.getTeamCourseInfo(e).pipe(Object(u["a"])((function(e){t.teamCourseInfo$.commit((function(){return e.info}))})))}},{key:"beforeRouteEnter",value:function(e){return this.getTeamCourseInfo(e.query.courseId)}}]),e}();d=Object(i["b"])([Object(c["b"])(),Object(i["d"])("design:paramtypes",["function"===typeof(a="undefined"!==typeof l["a"]&&l["a"])?a:Object])],d)},5054:function(e,t,n){"use strict";n.r(t),n.d(t,"EditService",(function(){return d}));var a,s=n("d225"),r=n("b0b4"),i=n("9ab4"),o=n("0cd5"),c=n("df29"),u=n("c4cc"),l=n("c1e8"),d=function(){function e(t){Object(s["a"])(this,e),this.courseApi=t,this.loading$=new c["d"]({}),this.info$=new c["d"]({})}return Object(r["a"])(e,[{key:"getUpdateInfo",value:function(e){var t=this;return this.courseApi.getUpdateInfo(e).pipe(Object(u["a"])((function(e){t.info$.commit((function(){return e.info}))})))}},{key:"beforeRouteEnter",value:function(e){return this.getUpdateInfo({course_id:e.meta.query.id})}}]),e}();d=Object(i["b"])([Object(o["b"])(),Object(i["d"])("design:paramtypes",["function"===typeof(a="undefined"!==typeof l["a"]&&l["a"])?a:Object])],d)},"5bce":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("st-panel-layout",{staticClass:"page-team-info"},[n("div",{staticClass:"header mg-b24"},[n("div",{staticClass:"mg-r24",class:e.b("left")},[n("st-t3",{staticClass:"mg-b16"},[e._v("\n        "+e._s(e.teamCourseInfo.course_name)+"\n        "),e.teamCourseInfo.course_category.name?n("span",[e._v("\n          （"+e._s(e.teamCourseInfo.course_category.name)+"）\n        ")]):e._e()]),n("div",{class:e.b("tip")},[n("div",{staticClass:"item"},[n("st-icon",{staticClass:"mg-r8",attrs:{type:"time",color:"rgb(0,199,219)",size:"16px"}}),n("span",{staticClass:"label mg-r8"},[e._v("时长:")]),n("span",{staticClass:"value"},[e._v(e._s(e.teamCourseInfo.duration)+"分钟")])],1),n("div",{staticClass:"item"},[n("st-icon",{staticClass:"mg-r8",attrs:{type:"money",size:"16px",color:"rgb(255,169,45)"}}),n("span",{staticClass:"label  mg-r8"},[e._v("参考定价:")]),n("span",{staticClass:"value"},[e._v(e._s(e.teamCourseInfo.price)+"元/节")])],1),n("div",{staticClass:"item"},[n("st-icon",{staticClass:"mg-r8",attrs:{type:"strength",size:"16px",color:"rgb(255,169,45)"}}),n("span",{staticClass:"label  mg-r8"},[e._v("课程强度:")]),n("span",{staticClass:"value"},[n("a-rate",{attrs:{defaultValue:e.teamCourseInfo.strength_level,disabled:""}})],1)],1)]),e.teamCourseInfo.description?n("div",{staticClass:"mg-t16",class:e.b("description")},[e._v("\n        "+e._s(e.teamCourseInfo.description)+"\n      ")]):e._e(),n("div",{staticClass:"mg-t16",class:e.b("train-aim")},[e._v("\n        #\n        "+e._s(e._f("filterTrainAim")(e.teamCourseInfo.train_aim))+"\n      ")])],1),n("div",{directives:[{name:"viewer",rawName:"v-viewer",value:{url:"data-src",toolbar:!1},expression:"{ url: 'data-src', toolbar: false }"}],staticClass:"page-team-header__right"},[n("img",{attrs:{src:e._f("imgFilter")(e.image,{w:560,h:320,type:"course"}),"data-src":e._f("imgFilter")(e.image,{w:1e3,type:"course"}),alt:e.teamCourseInfo.course_name}})])]),n("st-panel",{class:e.bb(),attrs:{app:""}},[n("div",{staticClass:"page-team-content__item mg-b24"},[n("div",{staticClass:"title mg-b8"},[n("span",{staticClass:"label"},[e._v("上课门店:")]),n("span",{staticClass:"value"},[e._v("\n          共"+e._s(e.teamCourseInfo.support_shop_list.length)+"家门店\n        ")])]),n("st-container",[n("st-table",{attrs:{rowKey:"shop_id",dataSource:e.teamCourseInfo.support_shop_list,columns:e.shopColumns,"page-mode":"client"}})],1)],1)])],1)},s=[],r=(n("7f7f"),[{title:"省",dataIndex:"province_name",width:"20%",scopedSlots:{customRender:"name"}},{title:"市",dataIndex:"city_name",width:"20%"},{title:"区",dataIndex:"district_name"},{title:"门店名称",dataIndex:"shop_name"}]),i=function(e){return[{title:e.$c("coach"),dataIndex:"name",sorter:!0,width:"20%",scopedSlots:{customRender:"name"}},{title:"".concat(e.$c("coach"),"等级"),dataIndex:"gender",filters:[{text:"Male",value:"male"},{text:"Female",value:"female"}],width:"20%"},{title:"在职状态",dataIndex:"email"}]},o=[{title:"价格等级",dataIndex:"name",sorter:!0,width:"20%",scopedSlots:{customRender:"name"}},{title:"售卖梯度（节）",dataIndex:"gender",filters:[{text:"Male",value:"male"},{text:"Female",value:"female"}],width:"20%"},{title:"售卖价格（元/节）",dataIndex:"email"},{title:"转让手续费",dataIndex:"email"},{title:"是否在线购买",dataIndex:"email"}],c=n("2ff54"),u=n("74d8"),l={bem:{b:"header",bb:"body",bAdv:"page-dashboard-adv"},name:"TeamCourseInfo",serviceInject:function(){return{appConfig:u["a"],infoService:c["InfoService"]}},rxState:function(){return{teamCourseInfo:this.infoService.teamCourseInfo$}},computed:{coachColumns:i,image:function(){return this.teamCourseInfo.image.image_key}},filters:{filterTrainAim:function(e){return e.map((function(e){return e.name})).join(" / ")}},data:function(){return{shopColumns:r,priceConfigColumns:o}}},d=l,f=n("2877"),m=Object(f["a"])(d,a,s,!1,null,null,null);t["default"]=m.exports},"6ff5":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("st-panel",{attrs:{app:""}},[n("set-team-course",{attrs:{info:e.info}})],1)},s=[],r=n("15e0"),i=n("5054"),o={serviceInject:function(){return{editService:i["EditService"]}},rxState:function(){return{info:this.editService.info$}},components:{SetTeamCourse:r["a"]}},c=o,u=n("2877"),l=Object(u["a"])(c,a,s,!1,null,null,null);t["default"]=l.exports},a2e8:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("st-panel",{attrs:{app:""}},[n("set-team-course",{attrs:{from:"shop"}})],1)},s=[],r=n("15e0"),i={components:{SetTeamCourse:r["a"]}},o=i,c=n("2877"),u=Object(c["a"])(o,a,s,!1,null,null,null);t["default"]=u.exports},e0f8:function(e,t,n){"use strict";n.r(t),n.d(t,"ListService",(function(){return y}));n("8e6e"),n("ac6a"),n("456d"),n("7f7f");var a,s,r,i=n("bd86"),o=n("75fc"),c=n("d225"),u=n("b0b4"),l=n("9ab4"),d=n("0cd5"),f=n("df29"),m=n("c4cc"),p=n("ebb6"),h=n("54da"),b=n("c1e8"),v=n("2cbb"),g=n("b878");function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(){function e(t,n,a){Object(c["a"])(this,e),this.courseApi=t,this.shopTeamCourseApi=n,this.authService=a,this.loading$=new f["d"]({}),this.list$=new f["d"]([]),this.page$=new f["d"]({}),this.categoryList$=new f["d"]([]),this.auth$=this.authService.authMap$({add:"shop:product:team_course|add"}),this.state$=new f["d"]({teamCourseList:[]})}return Object(u["a"])(e,[{key:"getList",value:function(e){var t=this;return this.shopTeamCourseApi.getTeamCourseList(e).pipe(Object(m["a"])((function(e){t.list$.commit((function(){return e.list})),t.page$.commit((function(){return e.page}))})))}},{key:"getCategoryList",value:function(){var e=this;return this.courseApi.getCourseCategoryList({}).pipe(Object(p["a"])((function(e){var t=e.list;return[{id:-1,setting_name:"所有课程类型"}].concat(Object(o["a"])(t.map((function(e){var t=e.id,n=e.setting_name;return{id:t,setting_name:n}}))))})),Object(m["a"])((function(t){e.categoryList$.commit((function(){return t}))})))}},{key:"initOptions",value:function(){return Object(h["a"])(this.getCategoryList())}},{key:"deleteCourse",value:function(e){return this.shopTeamCourseApi.deleteTeamCourse(e)}},{key:"init",value:function(e){return Object(h["a"])(this.getList(e))}},{key:"beforeEach",value:function(e,t){return this.init(C({},e.query))}},{key:"beforeRouteEnter",value:function(e,t,n){this.initOptions().subscribe((function(){"brand-product-course-team-list"===e.name?n({name:"brand-product-course-team-list-brand"}):n()}))}}]),e}();y=Object(l["b"])([Object(d["b"])(),Object(l["d"])("design:paramtypes",["function"===typeof(a="undefined"!==typeof g["a"]&&g["a"])?a:Object,"function"===typeof(s="undefined"!==typeof b["a"]&&b["a"])?s:Object,"function"===typeof(r="undefined"!==typeof v["a"]&&v["a"])?r:Object])],y)}}]);