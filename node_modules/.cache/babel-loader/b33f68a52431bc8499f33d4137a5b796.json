{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/notice-tpl/notice-item.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/notice-tpl/notice-item.vue","mtime":1600912105291},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { UserService } from '@/services/user.service';\nimport BrandSettingSmsNotice from '@/views/biz-modals/brand/setting/sms/notice';\nvar componentName = 'components-notice-tpl-item';\nexport default {\n  name: 'NoticeItem',\n  bem: {\n    tpl: componentName\n  },\n  serviceInject: function serviceInject() {\n    return {\n      userService: UserService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      notifyRule: this.userService.getOptions$('setting.notify_rule'),\n      notifyHour: this.userService.getOptions$('setting.notify_time_hour')\n    };\n  },\n  modals: {\n    BrandSettingSmsNotice: BrandSettingSmsNotice\n  },\n  data: function data() {\n    return {\n      isShowContent: 0,\n      isShowPre: 0,\n      isShowEdit: 0,\n      isShowPhone: false,\n      // 默认不展示输入手机号\n      rule: {},\n      typeMap: {\n        mini_programs: 1,\n        app: 2\n      },\n      params: {\n        id: '',\n        msg_suffix: '',\n        msg_preffix: '',\n        custom_phone: '',\n        course_type: {\n          team_course: {\n            value: 0,\n            name: '团课'\n          },\n          personal_course: {\n            value: 0,\n            name: '私教课'\n          },\n          small_course: {\n            value: 0,\n            name: this.$c('small_course')\n          }\n        },\n        order_type: {\n          advance: {\n            value: 0,\n            name: '定金'\n          },\n          deposit: {\n            value: 0,\n            name: '押金'\n          },\n          product: {\n            value: 0,\n            name: '商品'\n          },\n          poundage: {\n            value: 0,\n            name: '手续费'\n          }\n        },\n        receiver: {\n          coach: {\n            value: 0,\n            name: this.$c('coach')\n          },\n          member: {\n            value: 0,\n            name: '会员'\n          },\n          seller: {\n            value: 0,\n            name: '销售'\n          },\n          custom: {\n            value: 0,\n            name: '自定义'\n          },\n          leader: {\n            value: 0,\n            name: '负责人'\n          }\n        },\n        notify_time: '',\n        notify_number: '',\n        notify_mode: {\n          sms: 0,\n          app: 0,\n          mini_programs: 0\n        }\n      }\n    };\n  },\n  props: {\n    info: {\n      type: Object,\n      default: function _default() {}\n    },\n    auth: {\n      type: Object,\n      default: function _default() {\n        return {\n          sms: true,\n          app: true,\n          mina: true,\n          edit: true\n        };\n      }\n    }\n  },\n  created: function created() {\n    if (Object.keys(this.info.order_type).length > 0) {\n      this.params.order_type = this.info.order_type;\n    }\n\n    if (Object.keys(this.info.course_type).length > 0) {\n      this.params.course_type = this.info.course_type;\n    }\n\n    if (Object.keys(this.info.receiver).length > 0) {\n      this.params.receiver = this.info.receiver;\n    }\n\n    this.params.notify_time = this.info.notify_time.value;\n    this.params.notify_number = this.info.notify_number;\n    this.params.msg_preffix = this.info.msg_preffix;\n    this.params.msg_suffix = this.info.msg_suffix;\n    this.params.custom_phone = this.info.custom_phone.join(' ');\n    this.params.notify_mode = {\n      sms: this.info.notify_mode.sms && this.info.notify_mode.sms.value,\n      app: this.info.notify_mode.app && this.info.notify_mode.app.value,\n      mini_programs: this.info.notify_mode.mini_programs && this.info.notify_mode.mini_programs.value\n    };\n  },\n  methods: {\n    showEdit: function showEdit() {\n      this.isShowEdit = 1;\n    },\n    cancel: function cancel() {\n      this.isShowEdit = 0;\n    },\n    save: function save() {\n      var course_type = {};\n      var order_type = {};\n      var receiver = {};\n\n      if (this.info.course_type.team_course) {\n        course_type.team_course = 0;\n      }\n\n      if (this.info.course_type.personal_course) {\n        course_type.personal_course = 0;\n      }\n\n      if (this.info.course_type.small_course) {\n        course_type.small_course = 0;\n      }\n\n      if (this.info.order_type.advance) {\n        order_type.advance = 0;\n      }\n\n      if (this.info.order_type.deposit) {\n        order_type.deposit = 0;\n      }\n\n      if (this.info.order_type.product) {\n        order_type.product = 0;\n      }\n\n      if (this.info.order_type.poundage) {\n        order_type.poundage = 0;\n      }\n\n      if (this.info.receiver.coach) {\n        receiver.coach = 0;\n      }\n\n      if (this.info.receiver.member) {\n        receiver.member = 0;\n      }\n\n      if (this.info.receiver.custom) {\n        receiver.custom = 0;\n      }\n\n      if (this.info.receiver.seller) {\n        receiver.seller = 0;\n      }\n\n      if (this.info.receiver.leader) {\n        receiver.leader = 0;\n      }\n\n      if (this.info.course_type.team_course) {\n        course_type.team_course = this.params.course_type.team_course.value ? 1 : 0;\n      }\n\n      if (this.info.course_type.personal_course) {\n        course_type.personal_course = this.params.course_type.personal_course.value ? 1 : 0;\n      }\n\n      if (this.info.course_type.small_course) {\n        course_type.small_course = this.params.course_type.small_course.value ? 1 : 0;\n      }\n\n      if (this.info.order_type.advance) {\n        order_type.advance = this.params.order_type.advance.value ? 1 : 0;\n      }\n\n      if (this.info.order_type.deposit) {\n        order_type.deposit = this.params.order_type.deposit.value ? 1 : 0;\n      }\n\n      if (this.info.order_type.product) {\n        order_type.product = this.params.order_type.product.value ? 1 : 0;\n      }\n\n      if (this.info.order_type.poundage) {\n        order_type.poundage = this.params.order_type.poundage.value ? 1 : 0;\n      }\n\n      if (this.info.receiver.coach) {\n        receiver.coach = this.params.receiver.coach.value ? 1 : 0;\n      }\n\n      if (this.info.receiver.member) {\n        receiver.member = this.params.receiver.member.value ? 1 : 0;\n      }\n\n      if (this.info.receiver.custom) {\n        receiver.custom = this.params.receiver.custom.value ? 1 : 0;\n      }\n\n      if (this.info.receiver.seller) {\n        receiver.seller = this.params.receiver.seller.value ? 1 : 0;\n      }\n\n      if (this.info.receiver.leader) {\n        receiver.leader = this.params.receiver.leader.value ? 1 : 0;\n      }\n\n      console.log(111);\n      console.log(this.params.receiver);\n      var para = Object.assign({}, this.params, {\n        id: this.info.id,\n        custom_phone: this.params.custom_phone.length > 0 ? this.params.custom_phone.split(',') : [],\n        order_type: order_type,\n        receiver: receiver,\n        course_type: course_type\n      });\n      this.$emit('editInfo', para);\n      this.isShowEdit = 0;\n    }\n  },\n  watch: {\n    'params.receiver.custom.value': function paramsReceiverCustomValue(oldVal, newVal) {\n      if (oldVal) {\n        this.isShowPhone = true;\n      } else {\n        this.isShowPhone = false;\n      }\n    }\n  }\n};",{"version":3,"sources":["notice-item.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div :class=\"tpl()\">\n    <div :class=\"tpl('title')\">{{ info.title }}</div>\n    <div :class=\"tpl('content')\">\n      <div :class=\"tpl('text')\">{{ info.notify_time.name }}</div>\n      <div :class=\"tpl('text')\">{{ info.notify_type.name }}</div>\n      <div :class=\"tpl('text')\" style=\"padding-left:0\">\n        <st-switch\n          @change=\"save\"\n          v-if=\"auth.sms\"\n          v-model=\"params.notify_mode.sms\"\n        ></st-switch>\n      </div>\n      <div :class=\"tpl('text')\" style=\"padding-left:0\">\n        <st-switch\n          v-if=\"info.notify_type.value === typeMap['app'] && auth.app\"\n          @change=\"save\"\n          v-model=\"params.notify_mode.app\"\n        ></st-switch>\n        <st-switch\n          v-if=\"\n            info.notify_type.value === typeMap['mini_programs'] &&\n              params.notify_mode.mini_programs > -1 &&\n              auth.mina\n          \"\n          @change=\"save\"\n          v-model=\"params.notify_mode.mini_programs\"\n        ></st-switch>\n        <span\n          class=\"color-primary mg-l12 cursor-pointer\"\n          v-show=\"\n            info.notify_type.value === typeMap['mini_programs'] &&\n              params.notify_mode.mini_programs &&\n              params.notify_mode.mini_programs > -1\n          \"\n          type=\"primary\"\n          v-modal-link=\"{\n            name: 'brand-setting-sms-notice',\n            props: {\n              img: info.img_url\n            }\n          }\"\n        >\n          预览\n        </span>\n        <span\n          class=\"color-text-light\"\n          v-if=\"\n            info.notify_type.value === typeMap['mini_programs'] &&\n              params.notify_mode.mini_programs < 0\n          \"\n        >\n          暂不支持\n        </span>\n      </div>\n      <div\n        v-show=\"\n          params.notify_mode.sms ||\n            params.notify_mode.app ||\n            params.notify_mode.mini_programs\n        \"\n      >\n        <div class=\"shadow\"></div>\n        <div :class=\"tpl('column')\" v-show=\"!isShowEdit\">\n          <div class=\"width75\" :class=\"tpl('text')\" v-if=\"info.preview\">\n            <span class=\"color-title mg-r8\">预览内容:</span>\n            <span :class=\"tpl('text-right')\">{{ info.preview }}</span>\n          </div>\n          <div :class=\"tpl('text')\" style=\"padding-left:0\">\n            <span\n              class=\"color-primary cursor-pointer\"\n              @click=\"showEdit\"\n              v-if=\"auth.edit\"\n            >\n              编辑\n            </span>\n          </div>\n          <div\n            class=\"width75\"\n            :class=\"tpl('text')\"\n            v-if=\"info.receiver_description\"\n          >\n            <span class=\"color-title\">接收人员:</span>\n            <span class=\"mg-l8\">{{ info.receiver_description }}</span>\n          </div>\n          <div\n            class=\"width75\"\n            :class=\"tpl('text')\"\n            v-if=\"info.course_type_description\"\n          >\n            <span class=\"color-title\">课程类型:</span>\n            <span class=\"mg-l8\">{{ info.course_type_description }}</span>\n          </div>\n          <div\n            class=\"width75\"\n            :class=\"tpl('text')\"\n            v-if=\"info.order_type_description\"\n          >\n            <span class=\"color-title\">订单类型:</span>\n            <span class=\"mg-l8\">{{ info.order_type_description }}</span>\n          </div>\n        </div>\n        <div :class=\"tpl('column')\" v-show=\"isShowEdit\">\n          <div class=\"width75\" :class=\"tpl('text')\">\n            <div class=\"mg-b16\" v-if=\"info.preview\">\n              <span class=\"mg-r8 color-title\">发送内容</span>\n              <span :class=\"tpl('text-right')\">\n                <a-input\n                  v-if=\"info.notify_type.value === 1\"\n                  :class=\"tpl('column-input')\"\n                  v-model=\"params.msg_preffix\"\n                  placeholder=\"请输入\"\n                ></a-input>\n                <span>{{ info.content }}</span>\n                <a-input\n                  v-if=\"info.notify_type.value === 1\"\n                  :class=\"tpl('column-input')\"\n                  v-model=\"params.msg_suffix\"\n                  placeholder=\"请输入\"\n                ></a-input>\n              </span>\n            </div>\n            <div class=\"mg-b16\" v-if=\"info.preview\">\n              <span class=\"mg-r8 color-title\">预览内容</span>\n              <span :class=\"tpl('text-right')\">{{ info.preview }}</span>\n            </div>\n            <div class=\"mg-b16\" v-if=\"Object.keys(info.course_type).length > 0\">\n              <span class=\"color-title\">课程类型</span>\n              <span class=\"mg-l16 inlineblock\">\n                <st-checkbox\n                  v-if=\"params.course_type.team_course\"\n                  v-model=\"params.course_type.team_course.value\"\n                >\n                  {{ params.course_type.team_course.name }}\n                </st-checkbox>\n                <st-checkbox\n                  v-if=\"params.course_type.personal_course\"\n                  v-model=\"params.course_type.personal_course.value\"\n                >\n                  {{ params.course_type.personal_course.name }}\n                </st-checkbox>\n                <st-checkbox\n                  v-if=\"params.course_type.small_course\"\n                  v-model=\"params.course_type.small_course.value\"\n                >\n                  {{ params.course_type.small_course.name }}\n                </st-checkbox>\n              </span>\n            </div>\n            <div class=\"mg-b16\" v-if=\"Object.keys(info.receiver).length > 0\">\n              <span class=\"color-title\">接收人员</span>\n              <span class=\" mg-l16 inlineblock\">\n                <st-checkbox\n                  v-if=\"params.receiver.seller\"\n                  v-model=\"params.receiver.seller.value\"\n                >\n                  {{ params.receiver.seller.name }}\n                </st-checkbox>\n                <st-checkbox\n                  v-if=\"params.receiver.coach\"\n                  v-model=\"params.receiver.coach.value\"\n                >\n                  {{ params.receiver.coach.name }}\n                </st-checkbox>\n                <st-checkbox\n                  v-if=\"params.receiver.member\"\n                  v-model=\"params.receiver.member.value\"\n                >\n                  {{ params.receiver.member.name }}\n                </st-checkbox>\n                <st-checkbox\n                  v-if=\"params.receiver.leader\"\n                  v-model=\"params.receiver.leader.value\"\n                >\n                  {{ params.receiver.leader.name }}\n                </st-checkbox>\n                <st-checkbox\n                  v-if=\"params.receiver.custom\"\n                  v-model=\"params.receiver.custom.value\"\n                >\n                  {{ params.receiver.custom.name }}\n                </st-checkbox>\n              </span>\n              <a-input\n                style=\"width:44%\"\n                v-show=\"isShowPhone\"\n                v-model=\"params.custom_phone\"\n                placeholder=\"请输入手机号码，多个用逗号分隔\"\n              />\n            </div>\n\n            <div class=\"mg-b16\" v-if=\"Object.keys(info.order_type).length > 0\">\n              <span class=\"color-title\">订单类型</span>\n              <span class=\"mg-l16 inlineblock\">\n                <st-checkbox\n                  v-if=\"params.order_type.advance\"\n                  v-model=\"params.order_type.advance.value\"\n                >\n                  {{ params.order_type.advance.name }}\n                </st-checkbox>\n                <st-checkbox\n                  v-if=\"params.order_type.deposit\"\n                  v-model=\"params.order_type.deposit.value\"\n                >\n                  {{ params.order_type.deposit.name }}\n                </st-checkbox>\n                <st-checkbox\n                  v-if=\"params.order_type.product\"\n                  v-model=\"params.order_type.product.value\"\n                >\n                  {{ params.order_type.product.name }}\n                </st-checkbox>\n                <st-checkbox\n                  v-if=\"params.order_type.poundage\"\n                  v-model=\"params.order_type.poundage.value\"\n                >\n                  {{ params.order_type.poundage.name }}\n                </st-checkbox>\n              </span>\n            </div>\n            <div>\n              <span class=\"color-title mg-r8\">发送规则</span>\n              <span\n                v-if=\"\n                  info.notify_type.value === 1 &&\n                    info.notify_sub_type.value === 4\n                \"\n              >\n                课程开始前\n                <a-select v-model=\"params.notify_time\" style=\"width:100px\">\n                  <a-select-option\n                    v-for=\"(item, index) in notifyHour\"\n                    :key=\"index\"\n                    :value=\"item.value\"\n                  >\n                    {{ item.label }}\n                  </a-select-option>\n                </a-select>\n                发送\n              </span>\n\n              <a-radio-group\n                v-if=\"\n                  info.notify_type.value === 1 &&\n                    info.notify_sub_type.value === 6\n                \"\n                v-model=\"params.notify_time\"\n                class=\"mg-b16\"\n              >\n                <a-radio\n                  v-for=\"(item, index) in notifyRule\"\n                  :key=\"index\"\n                  :value=\"item.value\"\n                >\n                  {{ item.label }}\n                </a-radio>\n              </a-radio-group>\n              <span\n                v-if=\"\n                  info.notify_sub_type.value === 10 ||\n                    info.notify_sub_type.value === 12\n                \"\n              >\n                {{\n                  info.notify_sub_type.value === 10\n                    ? '客保到期前'\n                    : '会员流失前'\n                }}\n                <a-input\n                  v-model=\"params.notify_time\"\n                  style=\"width:80px\"\n                  type=\"number\"\n                />\n                天提醒，每日早7点推送\n              </span>\n              <span v-if=\"info.notify_sub_type.value === 14\">\n                会员课程剩余\n                <a-input\n                  v-model=\"params.notify_number\"\n                  style=\"width:80px\"\n                  type=\"number\"\n                />\n                次时，或会员课程有效期剩余\n                <a-input\n                  v-model=\"params.notify_time\"\n                  style=\"width:80px\"\n                  type=\"number\"\n                />\n                天时提醒，每日早7点推送\n              </span>\n              <span\n                v-if=\"\n                  info.notify_sub_type.value !== 6 &&\n                    info.notify_sub_type.value !== 4\n                \"\n              >\n                {{ info.notify_time.name }}\n              </span>\n            </div>\n          </div>\n          <div :class=\"tpl('text')\" style=\"padding-left:0\">\n            <span class=\"btn color-primary mg-r12\" @click=\"cancel\">取消</span>\n            <span class=\"btn color-primary\" @click=\"save\">保存</span>\n          </div>\n        </div>\n        <div class=\"shadow-bottom\"></div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { UserService } from '@/services/user.service'\nimport BrandSettingSmsNotice from '@/views/biz-modals/brand/setting/sms/notice'\nconst componentName = 'components-notice-tpl-item'\nexport default {\n  name: 'NoticeItem',\n  bem: {\n    tpl: componentName\n  },\n  serviceInject() {\n    return {\n      userService: UserService\n    }\n  },\n  rxState() {\n    return {\n      notifyRule: this.userService.getOptions$('setting.notify_rule'),\n      notifyHour: this.userService.getOptions$('setting.notify_time_hour')\n    }\n  },\n  modals: {\n    BrandSettingSmsNotice\n  },\n  data() {\n    return {\n      isShowContent: 0,\n      isShowPre: 0,\n      isShowEdit: 0,\n      isShowPhone: false, // 默认不展示输入手机号\n      rule: {},\n      typeMap: {\n        mini_programs: 1,\n        app: 2\n      },\n      params: {\n        id: '',\n        msg_suffix: '',\n        msg_preffix: '',\n        custom_phone: '',\n        course_type: {\n          team_course: {\n            value: 0,\n            name: '团课'\n          },\n          personal_course: {\n            value: 0,\n            name: '私教课'\n          },\n          small_course: {\n            value: 0,\n            name: this.$c('small_course')\n          }\n        },\n        order_type: {\n          advance: {\n            value: 0,\n            name: '定金'\n          },\n          deposit: {\n            value: 0,\n            name: '押金'\n          },\n          product: {\n            value: 0,\n            name: '商品'\n          },\n          poundage: {\n            value: 0,\n            name: '手续费'\n          }\n        },\n        receiver: {\n          coach: {\n            value: 0,\n            name: this.$c('coach')\n          },\n          member: {\n            value: 0,\n            name: '会员'\n          },\n          seller: {\n            value: 0,\n            name: '销售'\n          },\n          custom: {\n            value: 0,\n            name: '自定义'\n          },\n          leader: {\n            value: 0,\n            name: '负责人'\n          }\n        },\n        notify_time: '',\n        notify_number: '',\n        notify_mode: {\n          sms: 0,\n          app: 0,\n          mini_programs: 0\n        }\n      }\n    }\n  },\n  props: {\n    info: {\n      type: Object,\n      default: () => {}\n    },\n    auth: {\n      type: Object,\n      default: () => {\n        return {\n          sms: true,\n          app: true,\n          mina: true,\n          edit: true\n        }\n      }\n    }\n  },\n  created() {\n    if (Object.keys(this.info.order_type).length > 0) {\n      this.params.order_type = this.info.order_type\n    }\n    if (Object.keys(this.info.course_type).length > 0) {\n      this.params.course_type = this.info.course_type\n    }\n    if (Object.keys(this.info.receiver).length > 0) {\n      this.params.receiver = this.info.receiver\n    }\n    this.params.notify_time = this.info.notify_time.value\n    this.params.notify_number = this.info.notify_number\n    this.params.msg_preffix = this.info.msg_preffix\n    this.params.msg_suffix = this.info.msg_suffix\n    this.params.custom_phone = this.info.custom_phone.join(' ')\n    this.params.notify_mode = {\n      sms: this.info.notify_mode.sms && this.info.notify_mode.sms.value,\n      app: this.info.notify_mode.app && this.info.notify_mode.app.value,\n      mini_programs:\n        this.info.notify_mode.mini_programs &&\n        this.info.notify_mode.mini_programs.value\n    }\n  },\n  methods: {\n    showEdit() {\n      this.isShowEdit = 1\n    },\n    cancel() {\n      this.isShowEdit = 0\n    },\n    save() {\n      let course_type = {}\n      let order_type = {}\n      let receiver = {}\n      if (this.info.course_type.team_course) {\n        course_type.team_course = 0\n      }\n      if (this.info.course_type.personal_course) {\n        course_type.personal_course = 0\n      }\n      if (this.info.course_type.small_course) {\n        course_type.small_course = 0\n      }\n      if (this.info.order_type.advance) {\n        order_type.advance = 0\n      }\n      if (this.info.order_type.deposit) {\n        order_type.deposit = 0\n      }\n      if (this.info.order_type.product) {\n        order_type.product = 0\n      }\n      if (this.info.order_type.poundage) {\n        order_type.poundage = 0\n      }\n\n      if (this.info.receiver.coach) {\n        receiver.coach = 0\n      }\n      if (this.info.receiver.member) {\n        receiver.member = 0\n      }\n      if (this.info.receiver.custom) {\n        receiver.custom = 0\n      }\n      if (this.info.receiver.seller) {\n        receiver.seller = 0\n      }\n      if (this.info.receiver.leader) {\n        receiver.leader = 0\n      }\n      if (this.info.course_type.team_course) {\n        course_type.team_course = this.params.course_type.team_course.value\n          ? 1\n          : 0\n      }\n      if (this.info.course_type.personal_course) {\n        course_type.personal_course = this.params.course_type.personal_course\n          .value\n          ? 1\n          : 0\n      }\n      if (this.info.course_type.small_course) {\n        course_type.small_course = this.params.course_type.small_course.value\n          ? 1\n          : 0\n      }\n      if (this.info.order_type.advance) {\n        order_type.advance = this.params.order_type.advance.value ? 1 : 0\n      }\n      if (this.info.order_type.deposit) {\n        order_type.deposit = this.params.order_type.deposit.value ? 1 : 0\n      }\n      if (this.info.order_type.product) {\n        order_type.product = this.params.order_type.product.value ? 1 : 0\n      }\n      if (this.info.order_type.poundage) {\n        order_type.poundage = this.params.order_type.poundage.value ? 1 : 0\n      }\n\n      if (this.info.receiver.coach) {\n        receiver.coach = this.params.receiver.coach.value ? 1 : 0\n      }\n      if (this.info.receiver.member) {\n        receiver.member = this.params.receiver.member.value ? 1 : 0\n      }\n      if (this.info.receiver.custom) {\n        receiver.custom = this.params.receiver.custom.value ? 1 : 0\n      }\n      if (this.info.receiver.seller) {\n        receiver.seller = this.params.receiver.seller.value ? 1 : 0\n      }\n      if (this.info.receiver.leader) {\n        receiver.leader = this.params.receiver.leader.value ? 1 : 0\n      }\n      console.log(111)\n      console.log(this.params.receiver)\n      const para = Object.assign({}, this.params, {\n        id: this.info.id,\n        custom_phone:\n          this.params.custom_phone.length > 0\n            ? this.params.custom_phone.split(',')\n            : [],\n        order_type,\n        receiver,\n        course_type\n      })\n      this.$emit('editInfo', para)\n      this.isShowEdit = 0\n    }\n  },\n  watch: {\n    'params.receiver.custom.value'(oldVal, newVal) {\n      if (oldVal) {\n        this.isShowPhone = true\n      } else {\n        this.isShowPhone = false\n      }\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/biz-components/notice-tpl"}]}