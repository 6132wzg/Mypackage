{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js!/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/layouts/default.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/layouts/default.vue","mtime":1594718340310},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js","mtime":1591062572352},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _toConsumableArray from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport DefaultSiderMenu from \"./default#/sider-menu.vue\";\nimport DefaultNotify from \"./default#/notify.vue\";\nimport SwitchShop from '@/views/fragments/shop/switch';\nimport { find } from 'lodash-es';\nimport { UserService } from '@/services/user.service';\nimport { TokenService } from '@/services/token.service';\nimport { TitleService } from '@/services/title.service';\nimport AccountBind from '@/views/biz-modals/account/bind';\nimport AccountUnbind from '@/views/biz-modals/account/unbind';\nimport AccountModify from '@/views/biz-modals/account/modify';\nimport { UdeskService } from '@/services/udesk.service';\nimport StUdeskBtn from '@/views/biz-components/udesk-btn/udesk-btn';\nimport { WsNotifyService } from \"./default#/ws-notify.service\";\nimport Copyright from '@/views/biz-components/copyright/copyright';\nexport default {\n  name: 'SaasLayout',\n  components: {\n    DefaultSiderMenu: DefaultSiderMenu,\n    SwitchShop: SwitchShop,\n    DefaultNotify: DefaultNotify,\n    StUdeskBtn: StUdeskBtn,\n    Copyright: Copyright\n  },\n  serviceInject: function serviceInject() {\n    return {\n      userService: UserService,\n      tokenService: TokenService,\n      titleService: TitleService,\n      udeskService: UdeskService,\n      wsNotifyService: WsNotifyService\n    };\n  },\n  rxState: function rxState() {\n    var _this$wsNotifyService = this.wsNotifyService,\n        systemList$ = _this$wsNotifyService.systemList$,\n        activityList$ = _this$wsNotifyService.activityList$;\n    return {\n      systemList$: systemList$,\n      activityList$: activityList$,\n      user: this.userService.user$,\n      brand: this.userService.brand$,\n      shop: this.userService.shop$,\n      theme: this.userService.theme$,\n      title: this.titleService.title$,\n      isThemeStudio: this.userService.isThemeStudio$,\n      isShowUdeskBtn: this.udeskService.isShowUdeskBtn$\n    };\n  },\n  data: function data() {\n    return {\n      isShowSwitchShop: false,\n      systemListLength: 0,\n      menuObj: {},\n      fastEntryComp: null\n    };\n  },\n  modals: {\n    CommonNotifyConfig: function CommonNotifyConfig() {\n      return import(\n      /* webpackChunkName: \"notify-config\" */\n      '@/views/biz-modals/common/notify/config');\n    },\n    CommonNotifyActivity: function CommonNotifyActivity() {\n      return import(\n      /* webpackChunkName: \"notify-activity\" */\n      '@/views/biz-modals/common/notify/activity');\n    },\n    CommonNotifySystem: function CommonNotifySystem() {\n      return import(\n      /* webpackChunkName: \"notify-system\" */\n      '@/views/biz-modals/common/notify/system');\n    },\n    AccountBind: AccountBind,\n    AccountUnbind: AccountUnbind,\n    AccountModify: AccountModify\n  },\n  computed: {\n    breadCrumbs: function breadCrumbs() {\n      var menuBreadCrumb = this.getSiderMenuBreadCrumb();\n      var parentBreadCrumb = this.getParentBreadCrumb();\n      return [].concat(_toConsumableArray(menuBreadCrumb), _toConsumableArray(parentBreadCrumb));\n    },\n    isInShop: function isInShop() {\n      return this.shop.id;\n    },\n    isSchedule: function isSchedule() {\n      return this.$route.path.includes('shop/product/course/schedule');\n    },\n    isReception: function isReception() {\n      return this.$route.path.includes('shop/reception/index');\n    },\n    siderMenuTip: function siderMenuTip() {\n      return this.isThemeStudio ? '工作室版' : '俱乐部版';\n    }\n  },\n  watch: {\n    systemList$: function systemList$(newValue, oldValue) {\n      var _this = this;\n\n      if (newValue.length === 0) {\n        if (this.activityList$.length > 0) {\n          this.$modalRouter.push({\n            name: 'common-notify-activity',\n            props: {\n              list: this.activityList$\n            },\n            on: {\n              success: function success(res) {\n                _this.wsNotifyService.setRead().subscribe();\n              }\n            }\n          });\n        }\n\n        return;\n      }\n\n      if (newValue.length === 0) return;\n      this.onSuccess();\n    }\n  },\n  methods: {\n    onFastEntryVisible: function onFastEntryVisible(visible) {\n      var _this2 = this;\n\n      if (visible) {\n        import(\n        /* webpackChunkName: \"fast-entry\" */\n        \"./default#/fast-entry\").then(function (C) {\n          _this2.fastEntryComp = C.default || C;\n        });\n      }\n    },\n    onSuccess: function onSuccess() {\n      var _this3 = this;\n\n      var len = this.systemList$.length;\n\n      if (this.systemListLength === len) {\n        if (this.activityList$.length > 0) {\n          this.$modalRouter.push({\n            name: 'common-notify-activity',\n            props: {\n              list: this.activityList$\n            },\n            on: {\n              success: function success(res) {\n                _this3.wsNotifyService.setRead().subscribe();\n              }\n            }\n          });\n        }\n\n        return;\n      }\n\n      this.$modalRouter.push({\n        name: 'common-notify-system',\n        props: {\n          info: this.systemList$[this.systemListLength]\n        },\n        on: {\n          // 模态窗动画400ms\n          success: function success(res) {\n            _this3.systemListLength++;\n            setTimeout(function () {\n              _this3.wsNotifyService.setRead().subscribe();\n\n              _this3.onSuccess();\n            }, 400);\n          },\n          cancel: function cancel(res) {\n            _this3.systemListLength++;\n            setTimeout(function () {\n              _this3.onSuccess();\n            }, 400);\n          }\n        }\n      });\n    },\n    onClickNotifyConfig: function onClickNotifyConfig() {\n      this.$modalRouter.push({\n        name: 'common-notify-config'\n      });\n    },\n    switchShop: function switchShop() {\n      this.isShowSwitchShop = !this.isShowSwitchShop;\n    },\n    onClickBind: function onClickBind() {\n      this.$modalRouter.push({\n        name: 'account-bind'\n      });\n    },\n    onClickUnbind: function onClickUnbind() {\n      this.$modalRouter.push({\n        name: 'account-unbind'\n      });\n    },\n    onClickModifyPass: function onClickModifyPass() {\n      this.$modalRouter.push({\n        name: 'account-modify'\n      });\n    },\n    onClickLogout: function onClickLogout() {\n      this.tokenService.REMOVE_TOKEN();\n      location.href = '/account/login';\n    },\n    getParentBreadCrumb: function getParentBreadCrumb() {\n      var parentRouteName = this.$route.meta.parentRouteName;\n      var parentRoute;\n\n      if (parentRouteName) {\n        parentRoute = this.$router.resolve({\n          name: parentRouteName\n        }).resolved;\n      }\n\n      if (parentRoute) {\n        var name = parentRoute.name;\n        var title = this.userService.interpolation(parentRoute.meta.title);\n        return [{\n          label: title,\n          route: {\n            name: name\n          }\n        }];\n      } else {\n        return [];\n      }\n    },\n    getSiderMenuBreadCrumb: function getSiderMenuBreadCrumb() {\n      var _this$menuObj = this.menuObj,\n          selectedKey = _this$menuObj.selectedKey,\n          currentSiderMenu = _this$menuObj.currentSiderMenu;\n\n      if (selectedKey) {\n        var menuBreadCrumb = [];\n        menuBreadCrumb.push({\n          label: currentSiderMenu.name,\n          route: {\n            name: currentSiderMenu.url\n          }\n        });\n\n        if (selectedKey) {\n          var currentSubMenu = find(currentSiderMenu.children, function (subMenu) {\n            return subMenu.id === selectedKey;\n          });\n\n          if (currentSubMenu) {\n            menuBreadCrumb.push({\n              label: currentSubMenu.name,\n              route: {\n                name: currentSubMenu.url\n              }\n            });\n          }\n        }\n\n        return menuBreadCrumb;\n      } else {\n        return [];\n      }\n    },\n    onSiderMenuChange: function onSiderMenuChange(menuObj) {\n      this.menuObj = menuObj;\n    },\n    onClickSiderMenu: function onClickSiderMenu() {\n      /**\n       * 切换路由时关闭切换门店 drawer\n       */\n      this.isShowSwitchShop = false;\n    }\n  }\n};",null]}