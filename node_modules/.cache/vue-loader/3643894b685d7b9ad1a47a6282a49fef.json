{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/finance/order/info.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/finance/order/info.vue","mtime":1600926556329},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { InfoService } from './info.service'\nimport ShopFinanceCancel from '@/views/biz-modals/shop/finance/cancel'\nimport ShopFinanceRefund from '@/views/biz-modals/shop/finance/refund'\nimport ShopFinanceSplit from '@/views/biz-modals/shop/finance/split'\nimport SoldDealGathering from '@/views/biz-modals/sold/deal/gathering'\nimport SoldTransaction from '@/views/biz-components/sold/transaction'\nimport FinanceSplitInfo from '@/views/biz-modals/finance/split-info'\nimport { ORDER_PRODUCT_TYPE } from '@/constants/finance/order'\nimport { PERSON_TYPE } from '@/constants/course/small-course'\nexport default {\n  name: 'PageShopFinanceOrderInfo',\n  bem: {\n    basic: 'page-shop-finance-info'\n  },\n  modals: {\n    ShopFinanceCancel,\n    ShopFinanceRefund,\n    ShopFinanceSplit,\n    SoldDealGathering,\n    FinanceSplitInfo\n  },\n  components: {\n    SoldTransaction\n  },\n  serviceInject() {\n    return {\n      infoService: InfoService\n    }\n  },\n  rxState() {\n    return {\n      info: this.infoService.info$,\n      tabs: this.infoService.tabs$,\n      auth: this.infoService.auth$\n    }\n  },\n  data() {\n    return {\n      ORDER_PRODUCT_TYPE,\n      PERSON_TYPE\n    }\n  },\n  computed: {\n    infoParents() {\n      let parentsMess = ''\n      if (typeof this.info.parents === 'object') {\n        parentsMess = `${this.info.parents.name} (${this.info.parents.mobile})`\n      } else {\n        parentsMess = this.info.parents\n      }\n      return parentsMess\n    }\n  },\n  methods: {\n    // 订单收款modal\n    createdOrderPay() {\n      this.$modalRouter.push({\n        name: 'sold-deal-gathering',\n        props: {\n          order_id: this.$searchQuery.id,\n          type: this.productType(this.info.product_type)\n        },\n        on: {\n          success: res => {\n            console.log('res', res)\n            if (res.type === 'pos') {\n              this.$refs.soldTransaction.payCallBack(\n                res.order_id,\n                '',\n                res.type,\n                res\n              )\n            } else {\n              this.$router.reload()\n            }\n          }\n        }\n      })\n    },\n    // 退款\n    onRefund() {\n      const props = {\n        id: this.$searchQuery.id,\n        product_type: this.info.product_type\n      }\n      this.$modalRouter.push({\n        name: 'shop-finance-refund',\n        props,\n        on: {\n          success: () => {\n            this.$router.reload()\n          }\n        }\n      })\n    },\n    // 业务拆分\n    onSplit() {\n      this.$modalRouter.push({\n        name: 'shop-finance-split',\n        props: {\n          id: this.$searchQuery.id\n        },\n        on: {\n          success: result => {\n            this.$router.reload()\n          }\n        }\n      })\n    },\n    // 取消\n    onCancel() {\n      this.$modalRouter.push({\n        name: 'shop-finance-cancel',\n        props: {\n          id: this.$searchQuery.id\n        },\n        on: {\n          success: result => {\n            this.$router.reload()\n          }\n        }\n      })\n    },\n    productType(type) {\n      let name = ''\n      // 1-会员卡 2-私教课 3-团体课 4-课程包 5-储值卡 6-小班课 7-手续费 8-定金 9-押金 10-储物柜 12-云店 13-场地预约\n      switch (type) {\n        case 1:\n          name = 'member'\n          break\n        case 2:\n          name = 'personal'\n          break\n        case 3:\n          name = 'member'\n          break\n        case 4:\n          name = 'package'\n          break\n        case 5:\n          name = 'deposit'\n          break\n        case 6:\n          name = 'small_course_order/detail'\n          break\n        case 7:\n          name = 'advance'\n          break\n        case 8:\n          name = 'advance'\n          break\n        case 9:\n          name = 'member'\n          break\n        case 10:\n          name = 'cabinet_order'\n          break\n        case 12:\n          name = 'cloud_store'\n          break\n        case 13:\n          name = 'venues'\n      }\n      return name\n    },\n    onShowSplitInfo() {\n      this.$modalRouter.push({\n        name: 'finance-split-info',\n        props: {\n          value: {\n            list: this.info.split_items,\n            description: this.info.split_description\n          }\n        },\n        on: {\n          success() {\n            vm.$router.reload()\n          }\n        }\n      })\n    }\n  }\n}\n",{"version":3,"sources":["info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"info.vue","sourceRoot":"src/views/pages/shop/finance/order","sourcesContent":["<template>\n  <section :class=\"basic()\">\n    <st-panel title=\"订单详情\">\n      <div slot=\"actions\">\n        <st-btn-actions\n          :options=\"[\n            {\n              if: auth['brand_shop:order:order|refund'],\n              text: '退款',\n              click: onRefund\n            },\n            {\n              if: auth['brand_shop:order:order|pay'],\n              text: '收款',\n              click: createdOrderPay\n            },\n            {\n              if: auth['brand_shop:order:order|cancel'],\n              text: '取消',\n              click: onCancel\n            },\n            {\n              if: auth['brand_shop:order:order|split'],\n              text: '业绩拆分',\n              click: onSplit\n            }\n          ]\"\n        ></st-btn-actions>\n      </div>\n      <a-row :gutter=\"24\">\n        <a-col :span=\"9\">\n          <st-info>\n            <st-info-item label=\"订单号\">{{ info.id }}</st-info-item>\n            <st-info-item label=\"商品名称\">\n              {{ info.product_name }}\n            </st-info-item>\n            <st-info-item label=\"购买会员\">\n              {{ info.member_name }}\n            </st-info-item>\n            <template v-if=\"info.is_minors === PERSON_TYPE.CHILD\">\n              <st-info-item label=\"家长手机号\">\n                {{ info.parent_mobile }}\n              </st-info-item>\n              <st-info-item :label=\"`家长姓名`\">\n                {{ info.parent_name }}({{ info.parent_user_role }})\n              </st-info-item>\n            </template>\n            <template v-else>\n              <st-info-item label=\"手机号\">\n                {{ info.member_mobile }}\n              </st-info-item>\n            </template>\n            <st-info-item label=\"下单人\">{{ info.operator_name }}</st-info-item>\n            <st-info-item label=\"下单时间\">\n              {{ info.created_time }}\n            </st-info-item>\n            <st-info-item label=\"销售\">{{ info.staff_name }}</st-info-item>\n            <st-info-item label=\"订单状态\">\n              {{ info.order_status | enumFilter('finance.order_status') }}\n            </st-info-item>\n          </st-info>\n        </a-col>\n        <a-col :span=\"9\">\n          <st-info>\n            <st-info-item label=\"赠送\">{{ info.gift_amount }}</st-info-item>\n            <st-info-item label=\"订单总额\">{{ info.total_price }}</st-info-item>\n            <st-info-item label=\"优惠金额\">\n              {{ info.order_discount }}\n            </st-info-item>\n            <st-info-item label=\"减免金额\">\n              {{ info.reduce_price }}\n            </st-info-item>\n            <st-info-item label=\"应收金额\">{{ info.pay_price }}</st-info-item>\n            <st-info-item\n              label=\"待收金额\"\n              v-if=\"info.product_type === 12 || info.product_type === 13\"\n            >\n              {{ info.remainder_price }}\n            </st-info-item>\n            <st-info-item label=\"支付状态\">\n              {{ info.pay_status | enumFilter('finance.pay_status') }}\n            </st-info-item>\n            <st-info-item label=\"业绩拆分\">\n              <a @click=\"onShowSplitInfo\">详情</a>\n            </st-info-item>\n          </st-info>\n        </a-col>\n        <a-col :span=\"6\">\n          <st-info>\n            <st-info-item label=\"备注\">{{ info.description }}</st-info-item>\n          </st-info>\n        </a-col>\n      </a-row>\n    </st-panel>\n    <st-panel\n      initial\n      class=\"mg-t12\"\n      :class=\"basic('panel-bottom')\"\n      :tabs=\"tabs\"\n    >\n      <router-view></router-view>\n    </st-panel>\n    <sold-transaction ref=\"soldTransaction\"></sold-transaction>\n  </section>\n</template>\n<script>\nimport { InfoService } from './info.service'\nimport ShopFinanceCancel from '@/views/biz-modals/shop/finance/cancel'\nimport ShopFinanceRefund from '@/views/biz-modals/shop/finance/refund'\nimport ShopFinanceSplit from '@/views/biz-modals/shop/finance/split'\nimport SoldDealGathering from '@/views/biz-modals/sold/deal/gathering'\nimport SoldTransaction from '@/views/biz-components/sold/transaction'\nimport FinanceSplitInfo from '@/views/biz-modals/finance/split-info'\nimport { ORDER_PRODUCT_TYPE } from '@/constants/finance/order'\nimport { PERSON_TYPE } from '@/constants/course/small-course'\nexport default {\n  name: 'PageShopFinanceOrderInfo',\n  bem: {\n    basic: 'page-shop-finance-info'\n  },\n  modals: {\n    ShopFinanceCancel,\n    ShopFinanceRefund,\n    ShopFinanceSplit,\n    SoldDealGathering,\n    FinanceSplitInfo\n  },\n  components: {\n    SoldTransaction\n  },\n  serviceInject() {\n    return {\n      infoService: InfoService\n    }\n  },\n  rxState() {\n    return {\n      info: this.infoService.info$,\n      tabs: this.infoService.tabs$,\n      auth: this.infoService.auth$\n    }\n  },\n  data() {\n    return {\n      ORDER_PRODUCT_TYPE,\n      PERSON_TYPE\n    }\n  },\n  computed: {\n    infoParents() {\n      let parentsMess = ''\n      if (typeof this.info.parents === 'object') {\n        parentsMess = `${this.info.parents.name} (${this.info.parents.mobile})`\n      } else {\n        parentsMess = this.info.parents\n      }\n      return parentsMess\n    }\n  },\n  methods: {\n    // 订单收款modal\n    createdOrderPay() {\n      this.$modalRouter.push({\n        name: 'sold-deal-gathering',\n        props: {\n          order_id: this.$searchQuery.id,\n          type: this.productType(this.info.product_type)\n        },\n        on: {\n          success: res => {\n            console.log('res', res)\n            if (res.type === 'pos') {\n              this.$refs.soldTransaction.payCallBack(\n                res.order_id,\n                '',\n                res.type,\n                res\n              )\n            } else {\n              this.$router.reload()\n            }\n          }\n        }\n      })\n    },\n    // 退款\n    onRefund() {\n      const props = {\n        id: this.$searchQuery.id,\n        product_type: this.info.product_type\n      }\n      this.$modalRouter.push({\n        name: 'shop-finance-refund',\n        props,\n        on: {\n          success: () => {\n            this.$router.reload()\n          }\n        }\n      })\n    },\n    // 业务拆分\n    onSplit() {\n      this.$modalRouter.push({\n        name: 'shop-finance-split',\n        props: {\n          id: this.$searchQuery.id\n        },\n        on: {\n          success: result => {\n            this.$router.reload()\n          }\n        }\n      })\n    },\n    // 取消\n    onCancel() {\n      this.$modalRouter.push({\n        name: 'shop-finance-cancel',\n        props: {\n          id: this.$searchQuery.id\n        },\n        on: {\n          success: result => {\n            this.$router.reload()\n          }\n        }\n      })\n    },\n    productType(type) {\n      let name = ''\n      // 1-会员卡 2-私教课 3-团体课 4-课程包 5-储值卡 6-小班课 7-手续费 8-定金 9-押金 10-储物柜 12-云店 13-场地预约\n      switch (type) {\n        case 1:\n          name = 'member'\n          break\n        case 2:\n          name = 'personal'\n          break\n        case 3:\n          name = 'member'\n          break\n        case 4:\n          name = 'package'\n          break\n        case 5:\n          name = 'deposit'\n          break\n        case 6:\n          name = 'small_course_order/detail'\n          break\n        case 7:\n          name = 'advance'\n          break\n        case 8:\n          name = 'advance'\n          break\n        case 9:\n          name = 'member'\n          break\n        case 10:\n          name = 'cabinet_order'\n          break\n        case 12:\n          name = 'cloud_store'\n          break\n        case 13:\n          name = 'venues'\n      }\n      return name\n    },\n    onShowSplitInfo() {\n      this.$modalRouter.push({\n        name: 'finance-split-info',\n        props: {\n          value: {\n            list: this.info.split_items,\n            description: this.info.split_description\n          }\n        },\n        on: {\n          success() {\n            vm.$router.reload()\n          }\n        }\n      })\n    }\n  }\n}\n</script>\n"]}]}