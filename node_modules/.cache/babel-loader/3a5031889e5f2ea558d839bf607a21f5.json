{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/components/editable-number#/editable-number.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/components/editable-number#/editable-number.vue","mtime":1600926556028},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import _defineProperty from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { ruleOptions } from \"./editable-number.config\";\nexport default {\n  name: 'EditableNumber',\n  props: {\n    value: {\n      type: [String, Number],\n      required: true,\n      default: ''\n    },\n    unit: {\n      type: String,\n      default: ''\n    },\n    placeholder: {\n      type: String,\n      default: '请输入价格'\n    },\n    float: {\n      type: Boolean,\n      default: true\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    form: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    width: {\n      type: Number,\n      default: 240\n    },\n    max: {\n      type: Number,\n      default: 999999.9\n    }\n  },\n  data: function data() {\n    // 增加随机key，避免同表单重复引用，导致错误提示重复\n    var r = Math.random().toString(36).substring(7);\n    return {\n      key: \"isConfirmed\".concat(r),\n      text: null,\n      isEdit: false\n    };\n  },\n  watch: {\n    value: function value(val) {\n      this.text = val;\n    }\n  },\n  created: function created() {\n    this.text = this.value;\n  },\n  computed: {\n    ruleOptions: ruleOptions,\n    decorators: function decorators() {\n      return this.form.addDecorators(this.ruleOptions);\n    }\n  },\n  methods: {\n    onEdit: function onEdit() {\n      this.isEdit = true;\n      this.form.setFieldsValue(_defineProperty({}, this.key, 0));\n    },\n    onConfirm: function onConfirm() {\n      var text = this.text || '0';\n      this.form.setFieldsValue(_defineProperty({}, this.key, 1));\n      this.$emit('input', text);\n      this.$emit('ok', text);\n      this.isEdit = false;\n    },\n    onBlur: function onBlur() {\n      var _this = this;\n\n      clearTimeout(this.timer);\n      this.timer = setTimeout(function () {\n        _this.form.validateFields([_this.key], {\n          force: true\n        });\n      }, 100);\n    }\n  }\n};",{"version":3,"sources":["editable-number.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,SAAA,WAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,gBADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,CAAA,MAAA,EAAA,MAAA,CADA;AAEA,MAAA,QAAA,EAAA,IAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KADA;AAMA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KANA;AAUA,IAAA,WAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAVA;AAcA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAdA;AAkBA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAlBA;AAsBA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA,oBAAA;AACA,eAAA,EAAA;AACA;AAJA,KAtBA;AA4BA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KA5BA;AAgCA,IAAA,GAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AAhCA,GAFA;AAuCA,EAAA,IAvCA,kBAuCA;AACA;AACA,QAAA,CAAA,GAAA,IAAA,CAAA,MAAA,GACA,QADA,CACA,EADA,EAEA,SAFA,CAEA,CAFA,CAAA;AAGA,WAAA;AACA,MAAA,GAAA,uBAAA,CAAA,CADA;AAEA,MAAA,IAAA,EAAA,IAFA;AAGA,MAAA,MAAA,EAAA;AAHA,KAAA;AAKA,GAjDA;AAkDA,EAAA,KAAA,EAAA;AACA,IAAA,KADA,iBACA,GADA,EACA;AACA,WAAA,IAAA,GAAA,GAAA;AACA;AAHA,GAlDA;AAuDA,EAAA,OAvDA,qBAuDA;AACA,SAAA,IAAA,GAAA,KAAA,KAAA;AACA,GAzDA;AA0DA,EAAA,QAAA,EAAA;AACA,IAAA,WAAA,EAAA,WADA;AAEA,IAAA,UAFA,wBAEA;AACA,aAAA,KAAA,IAAA,CAAA,aAAA,CAAA,KAAA,WAAA,CAAA;AACA;AAJA,GA1DA;AAgEA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,WAAA,MAAA,GAAA,IAAA;AACA,WAAA,IAAA,CAAA,cAAA,qBACA,KAAA,GADA,EACA,CADA;AAGA,KANA;AAOA,IAAA,SAPA,uBAOA;AACA,UAAA,IAAA,GAAA,KAAA,IAAA,IAAA,GAAA;AACA,WAAA,IAAA,CAAA,cAAA,qBACA,KAAA,GADA,EACA,CADA;AAGA,WAAA,KAAA,CAAA,OAAA,EAAA,IAAA;AACA,WAAA,KAAA,CAAA,IAAA,EAAA,IAAA;AACA,WAAA,MAAA,GAAA,KAAA;AACA,KAfA;AAgBA,IAAA,MAhBA,oBAgBA;AAAA;;AACA,MAAA,YAAA,CAAA,KAAA,KAAA,CAAA;AACA,WAAA,KAAA,GAAA,UAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,IAAA,CAAA,cAAA,CAAA,CAAA,KAAA,CAAA,GAAA,CAAA,EAAA;AACA,UAAA,KAAA,EAAA;AADA,SAAA;AAGA,OAJA,EAIA,GAJA,CAAA;AAKA;AAvBA;AAhEA,CAAA","sourcesContent":["<template>\n  <div style=\"display: inline-block\">\n    <div v-show=\"isEdit\" style=\"display: inline-block\">\n      <st-input-number\n        v-model=\"text\"\n        :style=\"{ width: `${width}px` }\"\n        :placeholder=\"placeholder\"\n        :float=\"float\"\n        :max=\"max\"\n        @blur=\"onBlur\"\n      >\n        <div v-if=\"unit\" slot=\"addonAfter\" class=\"st-form-item-unit\">\n          {{ unit }}\n        </div>\n      </st-input-number>\n      <st-button class=\"mg-l8\" @click=\"onConfirm\">确定</st-button>\n    </div>\n    <div v-show=\"!isEdit\" style=\"display: inline-block\">\n      {{ value }}{{ unit }}\n      <st-button v-if=\"!disabled\" class=\"mg-l8\" @click=\"onEdit\">编辑</st-button>\n    </div>\n    <div style=\"display: inline-block; margin-left: -24px\">\n      <a-form-item>\n        <st-input v-show=\"false\" v-decorator=\"decorators[`${key}`]\" />\n      </a-form-item>\n    </div>\n  </div>\n</template>\n<script>\nimport { ruleOptions } from './editable-number.config'\nexport default {\n  name: 'EditableNumber',\n  props: {\n    value: {\n      type: [String, Number],\n      required: true,\n      default: ''\n    },\n    unit: {\n      type: String,\n      default: ''\n    },\n    placeholder: {\n      type: String,\n      default: '请输入价格'\n    },\n    float: {\n      type: Boolean,\n      default: true\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    form: {\n      type: Object,\n      default: () => {\n        return {}\n      }\n    },\n    width: {\n      type: Number,\n      default: 240\n    },\n    max: {\n      type: Number,\n      default: 999999.9\n    }\n  },\n  data() {\n    // 增加随机key，避免同表单重复引用，导致错误提示重复\n    const r = Math.random()\n      .toString(36)\n      .substring(7)\n    return {\n      key: `isConfirmed${r}`,\n      text: null,\n      isEdit: false\n    }\n  },\n  watch: {\n    value(val) {\n      this.text = val\n    }\n  },\n  created() {\n    this.text = this.value\n  },\n  computed: {\n    ruleOptions,\n    decorators() {\n      return this.form.addDecorators(this.ruleOptions)\n    }\n  },\n  methods: {\n    onEdit() {\n      this.isEdit = true\n      this.form.setFieldsValue({\n        [this.key]: 0\n      })\n    },\n    onConfirm() {\n      const text = this.text || '0'\n      this.form.setFieldsValue({\n        [this.key]: 1\n      })\n      this.$emit('input', text)\n      this.$emit('ok', text)\n      this.isEdit = false\n    },\n    onBlur() {\n      clearTimeout(this.timer)\n      this.timer = setTimeout(() => {\n        this.form.validateFields([this.key], {\n          force: true\n        })\n      }, 100)\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/components/editable-number#"}]}