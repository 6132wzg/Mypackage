{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/product/course/manage/small-course/info.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/product/course/manage/small-course/info.vue","mtime":1596188219753},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { InfoService } from './info.service'\nimport { MessageService } from '@/services/message.service'\n\nimport { CLASS_STATUS } from '@/constants/course/small-course'\nexport default {\n  bem: {\n    b: 'page-group-course-info'\n  },\n  name: 'SmallCourseInfo',\n  serviceInject() {\n    return {\n      infoService: InfoService,\n      messageService: MessageService\n    }\n  },\n  rxState() {\n    return {\n      groupCourseHeaderInfo: this.infoService.groupCourseHeaderInfo$\n    }\n  },\n  computed: {\n    image() {\n      return (\n        this.groupCourseHeaderInfo && this.groupCourseHeaderInfo.image.image_key\n      )\n    },\n    btnOptions() {\n      return [\n        {\n          text: '编辑',\n          click: this.onGoEdit,\n          if: this.groupCourseHeaderInfo.auth[\n            'shop:product:small_class_course|edit'\n          ]\n        },\n        {\n          text: '去退款',\n          click: this.onGoOrder,\n          if: this.groupCourseHeaderInfo.auth[\n            'shop:product:small_class_course|refund'\n          ]\n        },\n        {\n          text: '立即成班',\n          click: this.onBeGroup,\n          if: this.groupCourseHeaderInfo.auth[\n            'shop:product:small_class_course|finish'\n          ]\n        },\n        {\n          text: '删除',\n          click: this.onDelGroup,\n          if: this.groupCourseHeaderInfo.auth[\n            'shop:product:small_class_course|del'\n          ]\n        },\n        {\n          text: '发布',\n          click: this.onPublish,\n          if: this.groupCourseHeaderInfo.auth[\n            'shop:product:small_class_course|publish'\n          ]\n        }\n      ]\n    }\n  },\n  data() {\n    return {\n      CLASS_STATUS,\n      tabs: [\n        {\n          label: '基础信息',\n          route: {\n            name: 'shop-product-course-manage-small-course-info-basic',\n            query: {\n              courseId: this.$searchQuery.courseId,\n              status: this.groupCourseHeaderInfo.class_status\n            }\n          }\n        },\n        {\n          label: '班级信息',\n          route: {\n            name: 'shop-product-course-manage-small-course-info-class',\n            query: {\n              courseId: this.$searchQuery.courseId,\n              status: this.groupCourseHeaderInfo.class_status\n            }\n          }\n        }\n      ]\n    }\n  },\n  methods: {\n    onGoOrder() {\n      this.$router.push({\n        path: '/shop/sold/course/list/small-course',\n        query: {\n          course_id: this.groupCourseHeaderInfo.course_id\n        }\n      })\n    },\n    onGoEdit() {\n      this.$router.push({\n        path: '/shop/product/course/manage/small-course/edit',\n        query: {\n          id: this.groupCourseHeaderInfo.course_id,\n          type: this.groupCourseHeaderInfo.small_course_type + ''\n        }\n      })\n    },\n    onBeGroup() {\n      this.infoService\n        .beGroup(this.groupCourseHeaderInfo.course_id)\n        .subscribe(() => {\n          this.messageService.success({ content: '状态已变更成功' })\n          this.$router.reload()\n        })\n    },\n    onDelGroup() {\n      const that = this\n      this.$confirm({\n        title: '提示',\n        content: '一旦删除则无法恢复，确认删除吗',\n        okText: '确定',\n        cancelText: '取消',\n        onOk() {\n          that.infoService\n            .deleteGroup(that.groupCourseHeaderInfo.course_id)\n            .subscribe(() => {\n              that.$router.push({\n                path: '/shop/product/course/manage/small-course/list'\n              })\n            })\n        },\n        onCancel() {}\n      })\n    },\n    onPublish() {\n      this.infoService\n        .publish(this.groupCourseHeaderInfo.course_id)\n        .subscribe(() => {\n          this.messageService.success({ content: '状态已变更成功' })\n          this.$router.reload()\n        })\n    }\n  }\n}\n",{"version":3,"sources":["info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"info.vue","sourceRoot":"src/views/pages/shop/product/course/manage/small-course","sourcesContent":["<template>\n  <st-panel-layout class=\"page-team-info\">\n    <div :class=\"b('title-action')\">\n      <st-t3 :class=\"b('title')\">\n        {{ groupCourseHeaderInfo.course_name }}\n        <span class=\"mg-l8\">\n          (\n          {{\n            groupCourseHeaderInfo.class_status\n              | enumFilter('small_course.class_status')\n          }})\n        </span>\n      </st-t3>\n      <st-btn-actions :options=\"btnOptions\"></st-btn-actions>\n    </div>\n    <div :class=\"b('header')\">\n      <div :class=\"b('left')\" class=\"mg-r24\">\n        <div :class=\"b('tip')\">\n          <div class=\"item\">\n            <span class=\"label\">开班时间:</span>\n            <span class=\"value\">{{ groupCourseHeaderInfo.course_time }}</span>\n          </div>\n          <div class=\"item\">\n            <span class=\"label \">报名人数:</span>\n            <span class=\"value\">{{ groupCourseHeaderInfo.apply_num }}人</span>\n          </div>\n        </div>\n        <div :class=\"b('tip')\">\n          <div class=\"item\">\n            <span class=\"label\">人数限制:</span>\n            <span class=\"value\">{{ groupCourseHeaderInfo.num_limit }}</span>\n          </div>\n          <div class=\"item\">\n            <span class=\"label \">适用范围:</span>\n            <span\n              class=\"value\"\n              :key=\"item.id\"\n              v-for=\"item in groupCourseHeaderInfo.scope_application\"\n            >\n              {{ item.setting_name }}\n            </span>\n          </div>\n        </div>\n        <div :class=\"b('tip')\">\n          <div class=\"item\">\n            <span class=\"label\">负责人:</span>\n            <span class=\"value\">{{ groupCourseHeaderInfo.charge_person }}</span>\n          </div>\n          <div class=\"item\">\n            <span class=\"label \">总课时:</span>\n            <span class=\"value\">{{ groupCourseHeaderInfo.course_times }}</span>\n          </div>\n        </div>\n      </div>\n      <div :class=\"b('right')\" v-viewer=\"{ url: 'data-src', toolbar: false }\">\n        <img\n          :src=\"image | imgFilter({ w: 560, h: 320, type: 'course' })\"\n          :data-src=\"image | imgFilter({ w: 1000, type: 'course' })\"\n          :alt=\"groupCourseHeaderInfo.course_name\"\n        />\n      </div>\n    </div>\n    <st-panel app :tabs=\"tabs\">\n      <div slot=\"actions\"></div>\n      <router-view></router-view>\n    </st-panel>\n  </st-panel-layout>\n</template>\n<script>\nimport { InfoService } from './info.service'\nimport { MessageService } from '@/services/message.service'\n\nimport { CLASS_STATUS } from '@/constants/course/small-course'\nexport default {\n  bem: {\n    b: 'page-group-course-info'\n  },\n  name: 'SmallCourseInfo',\n  serviceInject() {\n    return {\n      infoService: InfoService,\n      messageService: MessageService\n    }\n  },\n  rxState() {\n    return {\n      groupCourseHeaderInfo: this.infoService.groupCourseHeaderInfo$\n    }\n  },\n  computed: {\n    image() {\n      return (\n        this.groupCourseHeaderInfo && this.groupCourseHeaderInfo.image.image_key\n      )\n    },\n    btnOptions() {\n      return [\n        {\n          text: '编辑',\n          click: this.onGoEdit,\n          if: this.groupCourseHeaderInfo.auth[\n            'shop:product:small_class_course|edit'\n          ]\n        },\n        {\n          text: '去退款',\n          click: this.onGoOrder,\n          if: this.groupCourseHeaderInfo.auth[\n            'shop:product:small_class_course|refund'\n          ]\n        },\n        {\n          text: '立即成班',\n          click: this.onBeGroup,\n          if: this.groupCourseHeaderInfo.auth[\n            'shop:product:small_class_course|finish'\n          ]\n        },\n        {\n          text: '删除',\n          click: this.onDelGroup,\n          if: this.groupCourseHeaderInfo.auth[\n            'shop:product:small_class_course|del'\n          ]\n        },\n        {\n          text: '发布',\n          click: this.onPublish,\n          if: this.groupCourseHeaderInfo.auth[\n            'shop:product:small_class_course|publish'\n          ]\n        }\n      ]\n    }\n  },\n  data() {\n    return {\n      CLASS_STATUS,\n      tabs: [\n        {\n          label: '基础信息',\n          route: {\n            name: 'shop-product-course-manage-small-course-info-basic',\n            query: {\n              courseId: this.$searchQuery.courseId,\n              status: this.groupCourseHeaderInfo.class_status\n            }\n          }\n        },\n        {\n          label: '班级信息',\n          route: {\n            name: 'shop-product-course-manage-small-course-info-class',\n            query: {\n              courseId: this.$searchQuery.courseId,\n              status: this.groupCourseHeaderInfo.class_status\n            }\n          }\n        }\n      ]\n    }\n  },\n  methods: {\n    onGoOrder() {\n      this.$router.push({\n        path: '/shop/sold/course/list/small-course',\n        query: {\n          course_id: this.groupCourseHeaderInfo.course_id\n        }\n      })\n    },\n    onGoEdit() {\n      this.$router.push({\n        path: '/shop/product/course/manage/small-course/edit',\n        query: {\n          id: this.groupCourseHeaderInfo.course_id,\n          type: this.groupCourseHeaderInfo.small_course_type + ''\n        }\n      })\n    },\n    onBeGroup() {\n      this.infoService\n        .beGroup(this.groupCourseHeaderInfo.course_id)\n        .subscribe(() => {\n          this.messageService.success({ content: '状态已变更成功' })\n          this.$router.reload()\n        })\n    },\n    onDelGroup() {\n      const that = this\n      this.$confirm({\n        title: '提示',\n        content: '一旦删除则无法恢复，确认删除吗',\n        okText: '确定',\n        cancelText: '取消',\n        onOk() {\n          that.infoService\n            .deleteGroup(that.groupCourseHeaderInfo.course_id)\n            .subscribe(() => {\n              that.$router.push({\n                path: '/shop/product/course/manage/small-course/list'\n              })\n            })\n        },\n        onCancel() {}\n      })\n    },\n    onPublish() {\n      this.infoService\n        .publish(this.groupCourseHeaderInfo.course_id)\n        .subscribe(() => {\n          this.messageService.success({ content: '状态已变更成功' })\n          this.$router.reload()\n        })\n    }\n  }\n}\n</script>\n"]}]}