{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/setting/court/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/setting/court/list.vue","mtime":1600926556442},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.sort\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport draggable from 'vuedraggable';\nimport { MessageService } from '@/services/message.service';\nimport { ListService } from \"./list.service\";\nimport CourtAdd from '@/views/biz-modals/court/add';\nimport CourtEdit from '@/views/biz-modals/court/edit';\nimport { AREA_TYPE } from '@/constants/setting/court';\nexport default {\n  serviceInject: function serviceInject() {\n    return {\n      listService: ListService,\n      messageService: MessageService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      list: this.listService.list$,\n      auth: this.listService.auth$\n    };\n  },\n  modals: {\n    CourtAdd: CourtAdd,\n    CourtEdit: CourtEdit\n  },\n  components: {\n    draggable: draggable\n  },\n  bem: {\n    bPage: 'page-shop-setting-court-list',\n    bItem: 'court-item',\n    bAdd: 'court-add'\n  },\n  data: function data() {\n    return {\n      AREA_TYPE: AREA_TYPE\n    };\n  },\n  methods: {\n    onAddCourt: function onAddCourt() {\n      var that = this;\n      this.$modalRouter.push({\n        name: 'court-add',\n        on: {\n          change: function change() {\n            that.onListChange();\n          }\n        }\n      });\n    },\n    onUpdateCourt: function onUpdateCourt(id) {\n      var that = this;\n      this.$modalRouter.push({\n        name: 'court-edit',\n        props: {\n          id: id\n        },\n        on: {\n          change: function change() {\n            that.onListChange();\n          }\n        }\n      });\n    },\n    onListChange: function onListChange() {\n      this.$router.push({\n        query: {}\n      });\n    },\n    onDel: function onDel(id) {\n      this.listService.del(id).subscribe(this.onDelSuccessed);\n    },\n    onDelSuccessed: function onDelSuccessed() {\n      this.messageService.success({\n        content: '删除成功'\n      });\n      this.onListChange();\n    },\n    onAreaSortChange: function onAreaSortChange() {\n      this.listService.sort(this.list).subscribe();\n    }\n  }\n};",{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA,OAAA,SAAA,MAAA,cAAA;AACA,SAAA,cAAA,QAAA,4BAAA;AACA,SAAA,WAAA;AACA,OAAA,QAAA,MAAA,8BAAA;AACA,OAAA,SAAA,MAAA,+BAAA;AACA,SAAA,SAAA,QAAA,2BAAA;AACA,eAAA;AACA,EAAA,aADA,2BACA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,WADA;AAEA,MAAA,cAAA,EAAA;AAFA,KAAA;AAIA,GANA;AAOA,EAAA,OAPA,qBAOA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,KAAA,WAAA,CAAA,KADA;AAEA,MAAA,IAAA,EAAA,KAAA,WAAA,CAAA;AAFA,KAAA;AAIA,GAZA;AAaA,EAAA,MAAA,EAAA;AACA,IAAA,QAAA,EAAA,QADA;AAEA,IAAA,SAAA,EAAA;AAFA,GAbA;AAiBA,EAAA,UAAA,EAAA;AACA,IAAA,SAAA,EAAA;AADA,GAjBA;AAoBA,EAAA,GAAA,EAAA;AACA,IAAA,KAAA,EAAA,8BADA;AAEA,IAAA,KAAA,EAAA,YAFA;AAGA,IAAA,IAAA,EAAA;AAHA,GApBA;AAyBA,EAAA,IAzBA,kBAyBA;AACA,WAAA;AACA,MAAA,SAAA,EAAA;AADA,KAAA;AAGA,GA7BA;AA8BA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,WAAA,YAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,WADA;AAEA,QAAA,EAAA,EAAA;AACA,UAAA,MADA,oBACA;AACA,YAAA,IAAA,CAAA,YAAA;AACA;AAHA;AAFA,OAAA;AAQA,KAXA;AAYA,IAAA,aAZA,yBAYA,EAZA,EAYA;AACA,UAAA,IAAA,GAAA,IAAA;AACA,WAAA,YAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,YADA;AAEA,QAAA,KAAA,EAAA;AACA,UAAA,EAAA,EAAA;AADA,SAFA;AAKA,QAAA,EAAA,EAAA;AACA,UAAA,MADA,oBACA;AACA,YAAA,IAAA,CAAA,YAAA;AACA;AAHA;AALA,OAAA;AAWA,KAzBA;AA0BA,IAAA,YA1BA,0BA0BA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,KAAA,EAAA;AADA,OAAA;AAGA,KA9BA;AA+BA,IAAA,KA/BA,iBA+BA,EA/BA,EA+BA;AACA,WAAA,WAAA,CAAA,GAAA,CAAA,EAAA,EAAA,SAAA,CAAA,KAAA,cAAA;AACA,KAjCA;AAkCA,IAAA,cAlCA,4BAkCA;AACA,WAAA,cAAA,CAAA,OAAA,CAAA;AACA,QAAA,OAAA,EAAA;AADA,OAAA;AAGA,WAAA,YAAA;AACA,KAvCA;AAwCA,IAAA,gBAxCA,8BAwCA;AACA,WAAA,WAAA,CAAA,IAAA,CAAA,KAAA,IAAA,EAAA,SAAA;AACA;AA1CA;AA9BA,CAAA","sourcesContent":["<template>\n  <st-panel app :class=\"bPage()\">\n    <template slot=\"title\">\n      共{{ list.length }}个场地\n      <span class=\"st-des\">（支持拖动排序）</span>\n    </template>\n    <draggable\n      tag=\"a-row\"\n      :component-data=\"{ props: { gutter: 24 } }\"\n      v-model=\"list\"\n      :animation=\"200\"\n      @change=\"onAreaSortChange\"\n    >\n      <a-col :xl=\"8\" :xxl=\"6\" :xs=\"12\" v-for=\"item in list\" :key=\"item.id\">\n        <div :class=\"bItem()\">\n          <div v-if=\"auth.areaDel\" :class=\"bItem('del')\">\n            <a-popconfirm\n              @confirm=\"onDel(item.id)\"\n              placement=\"bottom\"\n              v-if=\"item.area_type !== 3\"\n            >\n              <template slot=\"title\">\n                删除该场地后，该门店进行排课等功能无法选择该场地，\n                <br />\n                是否继续？\n              </template>\n              <a><st-icon type=\"delete\" :class=\"bItem('del-icon')\" /></a>\n            </a-popconfirm>\n            <a-popconfirm @confirm=\"onDel(item.id)\" placement=\"bottom\" v-else>\n              <template slot=\"title\">\n                确认删除场地,\n                <br />\n                删除后无法恢复?\n              </template>\n              <a><st-icon type=\"delete\" :class=\"bItem('del-icon')\" /></a>\n            </a-popconfirm>\n          </div>\n          <div :class=\"bItem('body')\">\n            <div :class=\"bItem('body-lt')\">\n              <st-initials-tag :value=\"item.area_name[0]\" />\n            </div>\n            <div :class=\"bItem('body-rt')\">\n              <div :class=\"bItem('title-box')\">\n                <st-t3 :class=\"bItem('title')\">{{ item.area_name }}</st-t3>\n                <img\n                  v-if=\"item.area_type === AREA_TYPE.VIP\"\n                  :class=\"bItem('level-img')\"\n                  src=\"~@/assets/img/icon_vip.png\"\n                  alt=\"icon_vip\"\n                />\n                <img\n                  v-if=\"item.area_type === AREA_TYPE.GATE\"\n                  :class=\"bItem('level-img')\"\n                  src=\"~@/assets/img/icon_gate.png\"\n                  alt=\"icon_gate\"\n                />\n              </div>\n              <div :class=\"bItem('content-box')\">\n                <div\n                  :class=\"bItem('content-item')\"\n                  v-if=\"item.area_type !== AREA_TYPE.GATE\"\n                >\n                  <label :class=\"bItem('label')\">容纳人数</label>\n                  <p :class=\"bItem('text')\">\n                    {{ item.contain_number }}\n                    <span :class=\"bItem('sub-text')\">人</span>\n                  </p>\n                </div>\n                <div\n                  :class=\"bItem('content-item')\"\n                  v-if=\"item.area_type !== AREA_TYPE.GATE\"\n                >\n                  <label :class=\"bItem('label')\">座位模板</label>\n                  <p :class=\"bItem('text')\">\n                    {{ item.seat_num }}\n                    <span :class=\"bItem('sub-text')\">个</span>\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div :class=\"bItem('footer')\">\n            <router-link\n              v-if=\"item.area_type !== AREA_TYPE.GATE\"\n              :class=\"bItem('action')\"\n              :to=\"`./site?id=${item.id}`\"\n              class=\"st-link-secondary\"\n            >\n              设置座位\n            </router-link>\n            <div :class=\"bItem('divider')\"></div>\n            <a\n              v-if=\"auth.areaEdit\"\n              :class=\"bItem('action')\"\n              class=\"st-link-secondary\"\n              @click=\"onUpdateCourt(item.id)\"\n            >\n              编辑\n            </a>\n          </div>\n        </div>\n      </a-col>\n      <a-col :xl=\"8\" :xxl=\"6\" :xs=\"12\">\n        <div v-if=\"auth.areaAdd\" @click=\"onAddCourt\" class=\"court-add\">\n          <a-icon type=\"plus\"></a-icon>\n          <span class=\"mg-l8\">新增场地</span>\n        </div>\n      </a-col>\n    </draggable>\n  </st-panel>\n</template>\n\n<script>\nimport draggable from 'vuedraggable'\nimport { MessageService } from '@/services/message.service'\nimport { ListService } from './list.service'\nimport CourtAdd from '@/views/biz-modals/court/add'\nimport CourtEdit from '@/views/biz-modals/court/edit'\nimport { AREA_TYPE } from '@/constants/setting/court'\nexport default {\n  serviceInject() {\n    return {\n      listService: ListService,\n      messageService: MessageService\n    }\n  },\n  rxState() {\n    return {\n      list: this.listService.list$,\n      auth: this.listService.auth$\n    }\n  },\n  modals: {\n    CourtAdd,\n    CourtEdit\n  },\n  components: {\n    draggable\n  },\n  bem: {\n    bPage: 'page-shop-setting-court-list',\n    bItem: 'court-item',\n    bAdd: 'court-add'\n  },\n  data() {\n    return {\n      AREA_TYPE\n    }\n  },\n  methods: {\n    onAddCourt() {\n      const that = this\n      this.$modalRouter.push({\n        name: 'court-add',\n        on: {\n          change() {\n            that.onListChange()\n          }\n        }\n      })\n    },\n    onUpdateCourt(id) {\n      const that = this\n      this.$modalRouter.push({\n        name: 'court-edit',\n        props: {\n          id\n        },\n        on: {\n          change() {\n            that.onListChange()\n          }\n        }\n      })\n    },\n    onListChange() {\n      this.$router.push({\n        query: {}\n      })\n    },\n    onDel(id) {\n      this.listService.del(id).subscribe(this.onDelSuccessed)\n    },\n    onDelSuccessed() {\n      this.messageService.success({\n        content: '删除成功'\n      })\n      this.onListChange()\n    },\n    onAreaSortChange() {\n      this.listService.sort(this.list).subscribe()\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/pages/shop/setting/court"}]}