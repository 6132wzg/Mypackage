(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["brand-product-course-team"],{"231b":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("st-panel",{attrs:{app:"",tabs:e.authTabs}},[n("div",{attrs:{slot:"actions"},slot:"actions"},[n("st-input-search",{attrs:{placeholder:"输入团体课名称"},on:{search:function(t){return e.onKeywordsSearch("course_name",t)}},model:{value:e.$searchQuery.course_name,callback:function(t){e.$set(e.$searchQuery,"course_name",t)},expression:"$searchQuery.course_name"}})],1),n("router-view")],1)},s=[],a=n("3317b"),o=n("ea3e"),i={name:"TeamCourseList",mixins:[o["a"]],serviceInject:function(){return{listService:a["ListService"]}},rxState:function(){return{authTabs:this.listService.authTabs$}}},c=i,u=n("2877"),l=Object(u["a"])(c,r,s,!1,null,null,null);t["default"]=l.exports},"3317b":function(e,t,n){"use strict";n.r(t),n.d(t,"ListService",(function(){return g}));n("7f7f");var r,s,a,o=n("75fc"),i=n("d225"),c=n("b0b4"),u=n("9ab4"),l=n("5afb"),f=n("0cd5"),p=n("df29"),d=n("ebb6"),h=n("c4cc"),m=n("54da"),b=n("2cbb"),v=n("b878"),g=function(){function e(t,n,r){Object(i["a"])(this,e),this.shopApi=t,this.courseApi=n,this.authService=r,this.categoryList$=new p["d"]([]),this.shopSelectOptions$=new p["d"]([]),this.authTabs$=this.authService.getAuthTabs$("brand-product-course-team-list")}return Object(c["a"])(e,[{key:"getCategoryList",value:function(){var e=this;return this.courseApi.getCourseCategoryList({}).pipe(Object(d["a"])((function(e){var t=e.list;return[{value:-1,label:"全部课程类型"}].concat(Object(o["a"])(t.map((function(e){var t=e.id,n=e.setting_name;return{label:n,value:t}}))))})),Object(h["a"])((function(t){e.categoryList$.commit((function(){return t}))})))}},{key:"getShopList",value:function(){var e=this;return this.shopApi.getShopListForSelect().pipe(Object(d["a"])((function(e){var t=e.shops.map((function(e){return{label:e.shop_name,value:e.id}}));return[{label:"全部门店",value:-1}].concat(Object(o["a"])(t))})),Object(h["a"])((function(t){e.shopSelectOptions$.commit((function(){return t}))})))}},{key:"init",value:function(){return Object(m["a"])(this.getShopList(),this.getCategoryList())}},{key:"redirect",value:function(e,t,n){"brand-product-course-team-list"===e.name?n({name:"brand-product-course-team-list-brand"}):n()}},{key:"beforeRouteEnter",value:function(e,t,n){var r=this;this.init().subscribe((function(){r.redirect(e,t,n)}))}},{key:"beforeRouteUpdate",value:function(e,t,n){this.redirect(e,t,n)}}]),e}();g=Object(u["b"])([Object(f["b"])(),Object(u["d"])("design:paramtypes",["function"===typeof(r="undefined"!==typeof l["c"]&&l["c"])?r:Object,"function"===typeof(s="undefined"!==typeof v["a"]&&v["a"])?s:Object,"function"===typeof(a="undefined"!==typeof b["a"]&&b["a"])?a:Object])],g)},"3abd":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("st-panel",{attrs:{app:""}},[n("a-row",{staticClass:"mg-b48 mg-t48",attrs:{gutter:8}},[n("a-col",{attrs:{offset:"1",span:22}},[n("a-steps",{attrs:{current:e.currentIndex}},e._l(e.stepArr,(function(t){return n("a-step",{key:t.key,staticClass:"cursor-pointer",attrs:{title:t.title},on:{click:function(n){return e.changeStep(t.key)}}})})),1)],1)],1),n("set-team-course",{directives:[{name:"show",rawName:"v-show",value:0===e.currentIndex,expression:"currentIndex === 0"}],attrs:{from:"brand",info:e.info},on:{goNext:e.goNext,onCourseNameChange:e.onCourseNameChange}}),n("set-shop-coach",{directives:[{name:"show",rawName:"v-show",value:1===e.currentIndex,expression:"currentIndex === 1"}],attrs:{info:e.info},on:{goNext:e.goNext}})],1)},s=[],a=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),o=n("15e0"),i=n("3fc1"),c=n("5287");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={serviceInject:function(){return{editService:c["EditService"]}},rxState:function(){return{info:this.editService.info$}},data:function(){return{currentIndex:0,stepArr:[{title:"编辑团体课",key:0},{title:"设置上课门店",key:1}]}},methods:{goNext:function(e){this.setInfo({course_id:e}),this.currentIndex<1&&(this.currentIndex=this.currentIndex+1)},changeStep:function(e){this.currentIndex=e},onCourseNameChange:function(e){this.setInfo({course_name:e})},setInfo:function(e){this.info=l({},this.info,{},e)}},components:{SetTeamCourse:o["a"],SetShopCoach:i["a"]}},p=f,d=n("2877"),h=Object(d["a"])(p,r,s,!1,null,null,null);t["default"]=h.exports},"3fc1":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("st-form",{staticClass:"page-shop-container",attrs:{form:e.form}},[n("a-row",{attrs:{gutter:8}},[n("a-col",{attrs:{lg:22,xs:22,offset:1}},[n("st-form-item",{attrs:{label:"课程名称"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:e.decorators.course_name,expression:"decorators.course_name"}],attrs:{placeholder:"课程名称",disabled:""}})],1),n("st-form-item",{attrs:{required:""}},[n("template",{slot:"label"},[e._v("\n          上课门店\n          "),n("st-help-tooltip",{attrs:{id:"TBCGC002"}})],1),n("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:e.decorators.shop_setting,expression:"decorators.shop_setting"}],on:{change:e.onChange}},e._l(e.shopSetting$,(function(t,r){return n("a-radio",{key:r,attrs:{value:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])})),1),e.isShow?n("div",{staticClass:"page-shop-coach-container-shop mg-t8"},[n("select-shop",{attrs:{shopIds:e.shopIds},on:{change:e.onSelectShopChange}})],1):e._e()],2)],1)],1),n("a-row",{attrs:{gutter:8}},[n("a-col",{attrs:{lg:10,xs:22,offset:1}},[n("st-form-item",{attrs:{labelFix:""}},[n("st-button",{attrs:{type:"primary",loading:e.loading.setShop},on:{click:e.save}},[e._v("\n          完成\n        ")])],1)],1)],1)],1)},s=[],a=(n("7f7f"),n("e69b")),o=n("d2d7"),i=n("89dd"),c=n("b9ab"),u=n("c7b4"),l=function(e){return{course_name:{rules:[{required:!0,message:"请输入课程名称"},{min:1,message:"支持输入1~30个字的课程名称"}]},shop_setting:{initialValue:u["a"].ALL_STORE}}},f={name:"SetShopCoach",serviceInject:function(){var e,t=this.$route.name;return e=/^brand/.test(t)?i["a"]:c["a"],{messageService:a["a"],courseService:e}},rxState:function(){return{loading:this.courseService.loading$,shopSetting$:this.courseService.shopSetting$}},components:{SelectShop:o["a"]},props:{info:{type:Object,default:function(){return{}}}},watch:{info:{deep:!0,handler:function(){this.setFieldsValue()}}},data:function(){var e=this.$stForm.create(),t=e.decorators(l);return{form:e,decorators:t,shopIds:[],shopSetting:u["a"].ALL_STORE}},computed:{isShow:function(){return this.shopSetting===u["a"].SPECIFIED_STORE}},mounted:function(){var e=this;this.$nextTick((function(){e.setFieldsValue()}))},methods:{save:function(e){var t=this;e.preventDefault(),this.shopInputCheck()?this.form.validate().then((function(){var e=t.getData();t.courseService.setShop(e).subscribe(t.onSaveSuccess)})):this.messageService.error({content:"请选择门店"})},onSaveSuccess:function(){this.messageService.success({content:"提交成功"}),this.$router.push({name:"brand-product-course-team-list"})},onChange:function(e){this.shopSetting=e.target.value,this.shopIds=[]},onSelectShopChange:function(e){this.shopIds=e},setFieldsValue:function(){var e=this.info,t=e.shop_setting||u["a"].ALL_STORE;this.form.setFieldsValue({course_name:e.course_name,shop_setting:t,coach_ids:e.coach_ids}),this.shopSetting=t,this.shopIds=e.shop_ids,this.courseId=e.course_id},getData:function(){var e=this.form.getFieldsValue(),t=this.$searchQuery.id;return e.course_id=this.info.course_id||+t,e.shop_ids=this.shopIds,e},shopInputCheck:function(){var e=this.shopSetting;return e===u["a"].ALL_STORE||this.shopIds.length}}},p=f,d=n("2877"),h=Object(d["a"])(p,r,s,!1,null,null,null);t["a"]=h.exports},4250:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("st-panel",{attrs:{app:""}},[n("a-row",{staticClass:"mg-b48 mg-t48",attrs:{gutter:8}},[n("a-col",{attrs:{offset:"1",span:22}},[n("a-steps",{attrs:{current:e.currentIndex}},e._l(e.stepArr,(function(t){return n("a-step",{key:t.key,staticClass:"cursor-pointer",attrs:{title:t.title},on:{click:function(n){return e.changeStep(t.key)}}})})),1)],1)],1),n("set-team-course",{directives:[{name:"show",rawName:"v-show",value:0===e.currentIndex,expression:"currentIndex === 0"}],attrs:{from:"brand"},on:{goNext:e.goNext,onCourseNameChange:e.onCourseNameChange}}),n("set-shop-coach",{directives:[{name:"show",rawName:"v-show",value:1===e.currentIndex,expression:"currentIndex === 1"}],attrs:{info:e.info}})],1)},s=[],a=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),o=n("15e0"),i=n("3fc1");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={components:{SetTeamCourse:o["a"],SetShopCoach:i["a"]},data:function(){return{currentIndex:0,stepArr:[{title:"创建团体课",key:0},{title:"设置上课门店",key:1}],info:{}}},methods:{goNext:function(e){this.setInfo({course_id:e}),this.currentIndex<1&&(this.currentIndex=this.currentIndex+1)},changeStep:function(e){this.currentIndex=e},onCourseNameChange:function(e){this.setInfo({course_name:e})},setInfo:function(e){this.info=u({},this.info,{},e)}}},f=l,p=n("2877"),d=Object(p["a"])(f,r,s,!1,null,null,null);t["default"]=d.exports},5287:function(e,t,n){"use strict";n.r(t),n.d(t,"EditService",(function(){return f}));var r,s=n("d225"),a=n("b0b4"),o=n("9ab4"),i=n("0cd5"),c=n("df29"),u=n("c4cc"),l=n("3876"),f=function(){function e(t){Object(s["a"])(this,e),this.courseApi=t,this.info$=new c["d"]({})}return Object(a["a"])(e,[{key:"getUpdateInfo",value:function(e){var t=this;return this.courseApi.getUpdateInfo(e).pipe(Object(u["a"])((function(e){t.info$.commit((function(){return e.info}))})))}},{key:"init",value:function(e){return this.getUpdateInfo(e)}},{key:"beforeRouteEnter",value:function(e){var t={course_id:e.meta.query.id};return this.init(t)}}]),e}();f=Object(o["b"])([Object(i["b"])(),Object(o["d"])("design:paramtypes",["function"===typeof(r="undefined"!==typeof l["a"]&&l["a"])?r:Object])],f)},"628a":function(e,t,n){"use strict";n.r(t),n.d(t,"InfoService",(function(){return f}));var r,s=n("d225"),a=n("b0b4"),o=n("9ab4"),i=n("df29"),c=n("3876"),u=n("0cd5"),l=n("c4cc"),f=function(){function e(t){Object(s["a"])(this,e),this.brandTeamCourseApi=t,this.teamCourseInfo$=new i["d"]({})}return Object(a["a"])(e,[{key:"SET_TEAM_COURSE_INFO",value:function(e){this.teamCourseInfo$.commit((function(){return e.info}))}},{key:"getTeamCourseInfo",value:function(e){var t=this;return this.brandTeamCourseApi.getTeamCourseInfo(e).pipe(Object(l["a"])((function(e){t.SET_TEAM_COURSE_INFO(e)})))}},{key:"init",value:function(e){return this.getTeamCourseInfo(e)}},{key:"beforeRouteEnter",value:function(e){var t=e.query.courseId;return this.init(t)}}]),e}();f=Object(o["b"])([Object(u["b"])(),Object(o["d"])("design:paramtypes",["function"===typeof(r="undefined"!==typeof c["a"]&&c["a"])?r:Object])],f)},a2a7:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("st-panel-layout",{staticClass:"page-team-info"},[n("div",{staticClass:"header mg-b24"},[n("div",{staticClass:"mg-r24",class:e.b("left")},[n("st-t3",{staticClass:"mg-b16"},[e._v("\n        "+e._s(e.teamCourseInfo.course_name)+"\n        "),e.teamCourseInfo.course_category.name?n("span",[e._v("\n          （"+e._s(e.teamCourseInfo.course_category.name)+"）\n        ")]):e._e()]),n("div",{class:e.b("tip")},[n("div",{staticClass:"item"},[n("st-icon",{staticClass:"mg-r8",attrs:{type:"time",color:"rgb(0,199,219)",size:"16px"}}),n("span",{staticClass:"label mg-r8"},[e._v("时长:")]),n("span",{staticClass:"value"},[e._v(e._s(e.teamCourseInfo.duration)+"分钟")])],1),n("div",{staticClass:"item"},[n("st-icon",{staticClass:"mg-r8",attrs:{type:"money",size:"16px",color:"rgb(255,169,45)"}}),n("span",{staticClass:"label  mg-r8"},[e._v("参考定价:")]),n("span",{staticClass:"value"},[e._v(e._s(e.teamCourseInfo.price)+"元/节")])],1),n("div",{staticClass:"item"},[n("st-icon",{staticClass:"mg-r8",attrs:{type:"strength",size:"16px",color:"rgb(255,169,45)"}}),n("span",{staticClass:"label  mg-r8"},[e._v("课程强度:")]),n("span",{staticClass:"value"},[n("a-rate",{attrs:{defaultValue:e.teamCourseInfo.strength_level,disabled:""}})],1)],1)]),e.teamCourseInfo.description?n("div",{staticClass:"mg-t16",class:e.b("description")},[e._v("\n        "+e._s(e.teamCourseInfo.description)+"\n      ")]):e._e(),n("div",{staticClass:"mg-t16",class:e.b("train-aim")},[e._v("\n        #\n        "+e._s(e._f("filterTrainAim")(e.teamCourseInfo.train_aim))+"\n      ")])],1),n("div",{directives:[{name:"viewer",rawName:"v-viewer",value:{url:"data-src",toolbar:!1},expression:"{ url: 'data-src', toolbar: false }"}],staticClass:"page-team-header__right"},[n("img",{attrs:{src:e._f("imgFilter")(e.image,{w:560,h:320,type:"course"}),"data-src":e._f("imgFilter")(e.image,{w:1e3,type:"course"}),alt:e.teamCourseInfo.course_name}})])]),n("st-panel",{class:e.bb(),attrs:{app:""}},[n("div",{staticClass:"page-team-content__item mg-b24"},[n("div",{staticClass:"title mg-b8"},[n("span",{staticClass:"label"},[e._v("上课门店:")]),n("span",{staticClass:"value"},[e._v("\n          共"+e._s(e.teamCourseInfo.support_shop_list.length)+"家门店\n        ")])]),n("st-container",[n("st-table",{attrs:{rowKey:"shop_id",dataSource:e.teamCourseInfo.support_shop_list,columns:e.shopColumns,"page-mode":"client"}})],1)],1)])],1)},s=[],a=(n("7f7f"),[{title:"省",dataIndex:"province_name",width:"20%"},{title:"市",dataIndex:"city_name",width:"20%"},{title:"区",dataIndex:"district_name"},{title:"门店名称",dataIndex:"shop_name"}]),o=n("628a"),i={bem:{b:"header",bb:"body",bAdv:"page-dashboard-adv"},name:"TeamCourseInfo",serviceInject:function(){return{infoService:o["InfoService"]}},rxState:function(){return{teamCourseInfo:this.infoService.teamCourseInfo$}},computed:{image:function(){return this.teamCourseInfo.image.image_key}},filters:{filterTrainAim:function(e){return e.map((function(e){return e.name})).join(" / ")}},data:function(){return{shopColumns:a}}},c=i,u=n("2877"),l=Object(u["a"])(c,r,s,!1,null,null,null);t["default"]=l.exports},c7b4:function(e,t,n){"use strict";var r,s,a;n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a})),function(e){e[e["INVALID"]=0]="INVALID",e[e["VALID"]=1]="VALID"}(r||(r={})),function(e){e[e["ALL_STORE"]=1]="ALL_STORE",e[e["SPECIFIED_STORE"]=2]="SPECIFIED_STORE"}(s||(s={})),function(e){e[e["TIME_TODAY"]=1]="TIME_TODAY",e[e["TIME_WEEK"]=2]="TIME_WEEK",e[e["TIME_DAY"]=3]="TIME_DAY",e[e["TIME_MONTH"]=4]="TIME_MONTH"}(a||(a={}))}}]);