<template>
  <div>
    <button @click="toggle">toggle</button>
    <div v-if="modeIf">
      <h1>use v-if</h1>
      <child-1 v-if="step === 1" />
      <child-2 v-if="step === 2" />
      <child-3 v-if="step === 3" />
      hello world 1
      <button @click="onNext">下一步</button>
      <button @click="onPrev">上一步</button>
      <panel>
        <div slot="header">
          Header
        </div>
        <div slot="body">
          Body
        </div>
        <di-view name="test" slot="actions" />
      </panel>
    </div>

    <div v-else>
      <h1>use v-show</h1>
      <child-1 v-show="step === 1" :show="step === 1" />
      <child-2 v-show="step === 2" :show="step === 2" />
      <child-3 v-show="step === 3" :show="step === 3" />
      hello world show
      <button @click="onNext">下一步</button>
      <button @click="onPrev">上一步</button>
      <panel>
        <div slot="header">
          Show Header
        </div>
        <div slot="body">
          Show Body
        </div>
        <di-view name="test" slot="actions" />
      </panel>
    </div>
  </div>
</template>

<script>
import Panel from "./components/panel.vue";
import Child1 from "./child-1.vue";
import Child2 from "./child-2.vue";
import Child3 from "./child-3.vue";

import Vue from "vue";
export default {
  components: {
    Panel,
    Child1,
    Child2,
    Child3
  },
  beforeCreate() {
    Vue.util.defineReactive(this, "test", {});
  },
  data() {
    return {
      modeIf: true,
      test: {},
      step: 1
    };
  },
  methods: {
    toggle() {
      this.modeIf = !this.modeIf;
    },
    onNext() {
      this.step++;
    },
    onPrev() {
      this.step--;
    }
  },
  mounted() {
    setTimeout(() => {
      this.$set(this.test, "a", 1);
    });
  }
};
</script>