{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/schedule/team/punish-list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/schedule/team/punish-list.vue","mtime":1594718339926},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { MessageService } from '@/services/message.service'\nimport { PunishListService } from './punish-list.service'\nimport { columns } from './punish-list.config'\n\nexport default {\n  name: 'PunishList',\n  serviceInject() {\n    return {\n      messageService: MessageService,\n      punishService: PunishListService\n    }\n  },\n  rxState() {\n    const { list$, page$, loading$ } = this.punishService\n    return {\n      list: list$,\n      page: page$,\n      loading: loading$\n    }\n  },\n  data() {\n    return {\n      show: false\n    }\n  },\n  computed: {\n    columns\n  },\n  created() {\n    this.getList(this.page)\n  },\n  methods: {\n    getList(page) {\n      const { current_page, size } = page\n      this.punishService\n        .getList({\n          size,\n          current_page\n        })\n        .subscribe()\n    },\n    delPunishment(id) {\n      this.punishService.delPunishment(id).subscribe(() => {\n        this.messageService.success({\n          content: '解除惩罚成功！'\n        })\n        this.getList({\n          ...this.page,\n          current_page: 1\n        })\n      })\n    },\n    onPageChange(page) {\n      this.getList({\n        current_page: page.current,\n        size: page.pageSize\n      })\n    }\n  }\n}\n",null]}