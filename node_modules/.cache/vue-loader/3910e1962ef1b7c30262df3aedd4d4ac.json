{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/staff/role.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/staff/role.vue","mtime":1600926556251},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { RoleService } from './role.service'\nexport default {\n  name: 'RoleConfig',\n  bem: {\n    role: 'page-role',\n    roleList: 'page-role-list',\n    roleView: 'page-role-view',\n    roleContent: 'page-role-content'\n  },\n  serviceInject() {\n    return {\n      roleService: RoleService\n    }\n  },\n  rxState() {\n    return {\n      roles: this.roleService.roleList$,\n      stat: this.roleService.stat$,\n      auth: this.roleService.auth$\n    }\n  },\n  data() {\n    return {\n      isActive: false\n    }\n  },\n  methods: {\n    onClickEditRole(id) {\n      this.$router.push({\n        name: 'brand-staff-role-edit',\n        query: { roleId: id }\n      })\n    },\n    onCLickAddRole() {\n      this.$router.push({ name: 'brand-staff-role-add' })\n    },\n    onClickDelRole(role_id) {\n      this.roleService.del({ role_id }).subscribe()\n    },\n    getTreeNodeOnclick(role, e) {\n      this.$nextTick().then(() => {\n        const doms = document.querySelectorAll('.page-role-list__tree .item')\n        const roleOpreation = document.querySelectorAll(\n          '.page-role-list__tree .item .role-opreation'\n        )\n        roleOpreation.forEach(dom => {\n          dom.setAttribute('class', 'role-opreation')\n        })\n        doms.forEach(dom => {\n          dom.setAttribute('class', 'item pd-y8  pd-x16')\n        })\n        e.currentTarget\n          .querySelector('.role-opreation')\n          .setAttribute('class', 'role-opreation active')\n        e.currentTarget.setAttribute('class', 'item active pd-y8  pd-x16')\n      })\n      this.$router.push({\n        name: 'brand-staff-role-info',\n        query: { id: role.id }\n      })\n    }\n  }\n}\n",{"version":3,"sources":["role.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"role.vue","sourceRoot":"src/views/pages/brand/staff","sourcesContent":["<template>\n  <div :class=\"role()\">\n    <div :class=\"roleList()\">\n      <header :class=\"roleList('search')\">\n        <!-- <st-input-search placeholder=\"请输入部门/员工名称\" round=\"round\"></st-input-search> -->\n      </header>\n      <main :class=\"roleList('tree')\">\n        <st-t4>角色 ({{ stat.used }}/{{ stat.total }})</st-t4>\n        <ul>\n          <li\n            class=\"item\"\n            @click=\"getTreeNodeOnclick(role, $event)\"\n            v-for=\"(role, index) in roles\"\n            :id=\"role.id\"\n            :class=\"{ active: index === 0 }\"\n            :key=\"role.id\"\n          >\n            <div>\n              <span>{{ role.name }}</span>\n              <span>（{{ role.cnt }}）</span>\n            </div>\n            <div v-if=\"role.is_enabled\">\n              <st-more-dropdown\n                class=\"role-opreation\"\n                :class=\"{ active: index === 0 }\"\n                style=\"margin-left: 12px;\"\n              >\n                <a-menu-item v-if=\"auth.edit\" @click=\"onClickEditRole(role.id)\">\n                  编辑\n                </a-menu-item>\n                <a-menu-item\n                  v-if=\"auth.del && role.can_del\"\n                  @click=\"onClickDelRole(role.id)\"\n                >\n                  删除\n                </a-menu-item>\n              </st-more-dropdown>\n            </div>\n          </li>\n        </ul>\n        <!-- <a-tabs tabPosition=\"left\" defaultActiveKey=\"1\">\n          <a-tab-pane class=\"item pd-y8 pd-x16\" @click=\"getTreeNodeOnclick(role, $event)\" v-for=\"role in roles\" :id=\"role.id\" :key=\"role.id\" :tab=\"role.name\" style=\"height: 200px\"></a-tab-pane>\n          <a-tab-pane tab=\"Tab 2\" key=\"2\" forceRender>Content of Tab Pane 2</a-tab-pane>\n          <a-tab-pane tab=\"Tab 3\" key=\"3\">Content of Tab Pane 3</a-tab-pane>\n          <template slot=\"renderTabBar\" slot-scope=\"props, DefaultTabBar\">\n            <component :is=\"DefaultTabBar\" {...props} />\n          </template>\n        </a-tabs> -->\n      </main>\n      <footer v-if=\"auth.add\" :class=\"roleList('add')\" @click=\"onCLickAddRole\">\n        <a>新增角色</a>\n      </footer>\n    </div>\n    <div :class=\"roleContent()\">\n      <router-view></router-view>\n    </div>\n  </div>\n</template>\n<script>\nimport { RoleService } from './role.service'\nexport default {\n  name: 'RoleConfig',\n  bem: {\n    role: 'page-role',\n    roleList: 'page-role-list',\n    roleView: 'page-role-view',\n    roleContent: 'page-role-content'\n  },\n  serviceInject() {\n    return {\n      roleService: RoleService\n    }\n  },\n  rxState() {\n    return {\n      roles: this.roleService.roleList$,\n      stat: this.roleService.stat$,\n      auth: this.roleService.auth$\n    }\n  },\n  data() {\n    return {\n      isActive: false\n    }\n  },\n  methods: {\n    onClickEditRole(id) {\n      this.$router.push({\n        name: 'brand-staff-role-edit',\n        query: { roleId: id }\n      })\n    },\n    onCLickAddRole() {\n      this.$router.push({ name: 'brand-staff-role-add' })\n    },\n    onClickDelRole(role_id) {\n      this.roleService.del({ role_id }).subscribe()\n    },\n    getTreeNodeOnclick(role, e) {\n      this.$nextTick().then(() => {\n        const doms = document.querySelectorAll('.page-role-list__tree .item')\n        const roleOpreation = document.querySelectorAll(\n          '.page-role-list__tree .item .role-opreation'\n        )\n        roleOpreation.forEach(dom => {\n          dom.setAttribute('class', 'role-opreation')\n        })\n        doms.forEach(dom => {\n          dom.setAttribute('class', 'item pd-y8  pd-x16')\n        })\n        e.currentTarget\n          .querySelector('.role-opreation')\n          .setAttribute('class', 'role-opreation active')\n        e.currentTarget.setAttribute('class', 'item active pd-y8  pd-x16')\n      })\n      this.$router.push({\n        name: 'brand-staff-role-info',\n        query: { id: role.id }\n      })\n    }\n  }\n}\n</script>\n"]}]}