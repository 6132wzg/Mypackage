(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tier-4~brand-product-card-deposit~brand-product-card-member-number~brand-product-card-member-period~~726fadc8"],{9154:function(i,a,r){"use strict";r("ac6a");var n=r("5c8a"),e={2:"天",3:"月",4:"年"};a["a"]={data:function(){return{h5CardInfo:{card_name:"",special_note:"",admission_range:{},admission_shop_list:[],card_bg:{image_id:0,image_key:this.cardBgList[0].image_key,image_url:this.cardBgList[0].image_url,index:1},card_contents:"",card_introduction:"",price_gradient:[],price:{card_price:"",deadline:{}},can_use_shop:[],consumption_range:{},description:"",consumerList:[]}}},watch:{"cardData.card_introduction":function(i){this.h5CardInfo.card_introduction=i},"cardData.card_contents":function(i){this.h5CardInfo.card_contents=i},"cardData.description":function(i){this.h5CardInfo.description=i},"cardData.card_bg":function(i){this.h5CardInfo.card_bg=i},"cardData.price_setting":function(i){this.syncPrice()},"cardData.unit":function(i){var a=this.form.getFieldsValue().cardData,r={card_price:a.card_price||"",deadline:{number:a.num||"",type:i}};this.h5CardInfo.price=r},"cardData.bg_image":function(i){this.h5CardInfo.card_bg=i},rallyPriceList:{deep:!0,handler:function(){this.syncPrice()}},shopPriceList:{deep:!0,handler:function(){this.syncPrice()}}},methods:{initH5CardInfo:function(){var i=Object.assign({},this.cardInfo);if(this.h5CardInfo.card_name=i.card_name,this.h5CardInfo.special_note=i.special_note,this.syncAdmission(),2===this.cardType){var a={card_price:i.card_price,deadline:{number:i.num,type:i.unit}};this.h5CardInfo.price=a,i.card_consumer_id&&this.syncConsumer(i.card_consumer_id)}},syncName:function(i){this.h5CardInfo.card_name=i.target.value},syncSpecialNote:function(i){this.h5CardInfo.special_note=i.target.value},syncDeadlineNum:function(i){var a=this.form.getFieldsValue().cardData,r={card_price:a.card_price||"",deadline:{number:i,type:this.cardData.unit}};this.h5CardInfo.price=r},syncDepositPrice:function(i){var a=this.form.getFieldsValue().cardData,r={card_price:i,deadline:{number:a.num||"",type:this.cardData.unit}};this.h5CardInfo.price=r},syncPrice:function(i){var a=[];switch(this.cardData.price_setting){case 1:0===this.cardType?this.rallyPriceList.forEach((function(i){a.push({validity_period:+i.time.num+e[i.time.unit],sale_price:+i.rally_price+"元"})})):1===this.cardType&&this.rallyPriceList.forEach((function(i){a.push({validity_times:"".concat(+i.validity_times,"次"),sale_price:+i.rally_price+"元"})}));break;case 2:0===this.cardType?this.shopPriceList.forEach((function(i){a.push({validity_period:+i.time.num+e[i.time.unit],sale_price:"".concat(+i.rally_price.min_price,"元~").concat(+i.rally_price.max_price,"元")})})):1===this.cardType&&this.shopPriceList.forEach((function(i){a.push({validity_times:"".concat(+i.validity_times,"次"),sale_price:"".concat(+i.rally_price.min_price,"元~").concat(+i.rally_price.max_price,"元")})}));break}this.h5CardInfo.price_gradient=Object(n["a"])(a)},syncAdmission:function(){if(2===this.cardType){var i=this.cardData.consumption_range;switch(i){case 1:this.h5CardInfo.consumption_range={id:1,name:"仅消费门店"};break;case 2:this.h5CardInfo.consumption_range={id:2,name:"多门店"};break;case 3:this.h5CardInfo.consumption_range={id:3,name:"全门店"};break}}else{var a=this.cardData.admission_range;switch(a){case 1:this.h5CardInfo.admission_range={id:1,name:"仅消费门店"};break;case 2:this.h5CardInfo.admission_range={id:2,name:"多门店"};break;case 3:this.h5CardInfo.admission_range={id:3,name:"全门店"};break}}},syncAdmissionShop:function(){var i=this;if(2===this.cardType){var a=this.cardData.consumer_shop_list;a.length&&this.addService.getShopBasic({shop_ids:a}).subscribe((function(a){i.h5CardInfo.can_use_shop=a}))}else{var r=this.cardData.admission_shop_list;r.length&&this.addService.getShopBasic({shop_ids:r}).subscribe((function(a){i.h5CardInfo.admission_shop_list=a}))}},syncConsumer:function(i){var a=this.consumerType;this.h5CardInfo.consumerList=i.map((function(i){return a[--i].label}))}}}}}]);