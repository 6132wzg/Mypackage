{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/src/vendor/vue-rx-state.js","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/vendor/vue-rx-state.js","mtime":1591147717095},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418}],"contextDependencies":[],"result":["import _typeof from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/typeof\";\nimport { isObservable } from 'rxjs';\nimport { cloneDeep } from 'lodash-es';\n\nvar isObject = function isObject(s) {\n  return _typeof(s) === 'object' && s !== null;\n};\n\nexport default {\n  install: function install(Vue) {\n    Vue.mixin({\n      beforeCreate: function beforeCreate() {\n        var _this = this;\n\n        var rxState = this.$options.rxState;\n\n        if (rxState) {\n          this._rxObs = this._rxObs || {};\n\n          if (typeof rxState !== 'function') {\n            throw new Error(\"[vue-rx-state] rxState should pass an function but got \".concat(_typeof(rxState)));\n          }\n\n          var obsConfig = rxState.call(this);\n\n          if (!isObject(obsConfig)) {\n            throw new Error(\"[vue-rx-state] rxState function should return an object but got \".concat(_typeof(obsConfig)));\n          }\n\n          var _loop = function _loop(obName) {\n            var ob = obsConfig[obName];\n\n            if (!isObservable(ob)) {\n              throw new Error(\"[vue-rx-state] rxState [\".concat(obName, \"] should be an Observable but got \").concat(_typeof(ob)));\n            }\n\n            _this._rxObs[obName] = ob.subscribe(function (v) {\n              try {\n                if (obName in _this) {\n                  _this.$set(_this, obName, cloneDeep(v));\n\n                  return;\n                }\n\n                Vue.util.defineReactive(_this, obName, cloneDeep(v));\n              } catch (e) {\n                throw new Error(\"[vue-rx-state] uncaught error on [\".concat(obName, \"] \").concat(e.message));\n              }\n            });\n          };\n\n          for (var obName in obsConfig) {\n            _loop(obName);\n          }\n        }\n      },\n      beforeDestroy: function beforeDestroy() {\n        var rxState = this.$options.rxState;\n\n        if (rxState) {\n          for (var obName in this._rxObs) {\n            this._rxObs[obName].unsubscribe && this._rxObs[obName].unsubscribe();\n          }\n        }\n      }\n    });\n  }\n};",{"version":3,"sources":["/Users/wangzhigang/Desktop/styd/web/src/vendor/vue-rx-state.js"],"names":["isObservable","cloneDeep","isObject","s","install","Vue","mixin","beforeCreate","rxState","$options","_rxObs","Error","obsConfig","call","obName","ob","subscribe","v","$set","util","defineReactive","e","message","beforeDestroy","unsubscribe"],"mappings":";AAAA,SAASA,YAAT,QAA6B,MAA7B;AACA,SAASC,SAAT,QAA0B,WAA1B;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAAC,CAAC;AAAA,SAAI,QAAOA,CAAP,MAAa,QAAb,IAAyBA,CAAC,KAAK,IAAnC;AAAA,CAAlB;;AAEA,eAAe;AACbC,EAAAA,OADa,mBACLC,GADK,EACA;AACXA,IAAAA,GAAG,CAACC,KAAJ,CAAU;AACRC,MAAAA,YADQ,0BACO;AAAA;;AACb,YAAMC,OAAO,GAAG,KAAKC,QAAL,CAAcD,OAA9B;;AACA,YAAIA,OAAJ,EAAa;AACX,eAAKE,MAAL,GAAc,KAAKA,MAAL,IAAe,EAA7B;;AACA,cAAI,OAAOF,OAAP,KAAmB,UAAvB,EAAmC;AACjC,kBAAM,IAAIG,KAAJ,0EAC6DH,OAD7D,GAAN;AAGD;;AACD,cAAMI,SAAS,GAAGJ,OAAO,CAACK,IAAR,CAAa,IAAb,CAAlB;;AACA,cAAI,CAACX,QAAQ,CAACU,SAAD,CAAb,EAA0B;AACxB,kBAAM,IAAID,KAAJ,mFACsEC,SADtE,GAAN;AAGD;;AAZU,qCAaFE,MAbE;AAcT,gBAAMC,EAAE,GAAGH,SAAS,CAACE,MAAD,CAApB;;AACA,gBAAI,CAACd,YAAY,CAACe,EAAD,CAAjB,EAAuB;AACrB,oBAAM,IAAIJ,KAAJ,mCACuBG,MADvB,uDACyEC,EADzE,GAAN;AAGD;;AACD,YAAA,KAAI,CAACL,MAAL,CAAYI,MAAZ,IAAsBC,EAAE,CAACC,SAAH,CAAa,UAAAC,CAAC,EAAI;AACtC,kBAAI;AACF,oBAAIH,MAAM,IAAI,KAAd,EAAoB;AAClB,kBAAA,KAAI,CAACI,IAAL,CAAU,KAAV,EAAgBJ,MAAhB,EAAwBb,SAAS,CAACgB,CAAD,CAAjC;;AACA;AACD;;AACDZ,gBAAAA,GAAG,CAACc,IAAJ,CAASC,cAAT,CAAwB,KAAxB,EAA8BN,MAA9B,EAAsCb,SAAS,CAACgB,CAAD,CAA/C;AACD,eAND,CAME,OAAOI,CAAP,EAAU;AACV,sBAAM,IAAIV,KAAJ,6CACiCG,MADjC,eAC4CO,CAAC,CAACC,OAD9C,EAAN;AAGD;AACF,aAZqB,CAAtB;AApBS;;AAaX,eAAK,IAAIR,MAAT,IAAmBF,SAAnB,EAA8B;AAAA,kBAArBE,MAAqB;AAoB7B;AACF;AACF,OAtCO;AAuCRS,MAAAA,aAvCQ,2BAuCQ;AACd,YAAMf,OAAO,GAAG,KAAKC,QAAL,CAAcD,OAA9B;;AACA,YAAIA,OAAJ,EAAa;AACX,eAAK,IAAIM,MAAT,IAAmB,KAAKJ,MAAxB,EAAgC;AAC9B,iBAAKA,MAAL,CAAYI,MAAZ,EAAoBU,WAApB,IAAmC,KAAKd,MAAL,CAAYI,MAAZ,EAAoBU,WAApB,EAAnC;AACD;AACF;AACF;AA9CO,KAAV;AAgDD;AAlDY,CAAf","sourcesContent":["import { isObservable } from 'rxjs'\nimport { cloneDeep } from 'lodash-es'\n\nconst isObject = s => typeof s === 'object' && s !== null\n\nexport default {\n  install(Vue) {\n    Vue.mixin({\n      beforeCreate() {\n        const rxState = this.$options.rxState\n        if (rxState) {\n          this._rxObs = this._rxObs || {}\n          if (typeof rxState !== 'function') {\n            throw new Error(\n              `[vue-rx-state] rxState should pass an function but got ${typeof rxState}`\n            )\n          }\n          const obsConfig = rxState.call(this)\n          if (!isObject(obsConfig)) {\n            throw new Error(\n              `[vue-rx-state] rxState function should return an object but got ${typeof obsConfig}`\n            )\n          }\n          for (let obName in obsConfig) {\n            const ob = obsConfig[obName]\n            if (!isObservable(ob)) {\n              throw new Error(\n                `[vue-rx-state] rxState [${obName}] should be an Observable but got ${typeof ob}`\n              )\n            }\n            this._rxObs[obName] = ob.subscribe(v => {\n              try {\n                if (obName in this) {\n                  this.$set(this, obName, cloneDeep(v))\n                  return\n                }\n                Vue.util.defineReactive(this, obName, cloneDeep(v))\n              } catch (e) {\n                throw new Error(\n                  `[vue-rx-state] uncaught error on [${obName}] ${e.message}`\n                )\n              }\n            })\n          }\n        }\n      },\n      beforeDestroy() {\n        const rxState = this.$options.rxState\n        if (rxState) {\n          for (let obName in this._rxObs) {\n            this._rxObs[obName].unsubscribe && this._rxObs[obName].unsubscribe()\n          }\n        }\n      }\n    })\n  }\n}\n"]}]}