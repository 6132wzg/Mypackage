{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/marketing/add-coupon.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/marketing/add-coupon.vue","mtime":1600926555860},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { AddCouponService } from \"./add-coupon.service\";\nimport { columns } from \"./add-coupon.config\";\nimport { cloneDeep } from 'lodash-es';\nimport { COUPON } from '@/constants/marketing/coupon';\nexport default {\n  name: 'ModalMarketingAddCoupon',\n  bem: {\n    add: 'modal-marketing-add-coupon'\n  },\n  serviceInject: function serviceInject() {\n    return {\n      addCouponService: AddCouponService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      loading: this.addCouponService.loading$,\n      list: this.addCouponService.list$\n    };\n  },\n  props: {\n    id: {\n      type: Number\n    }\n  },\n  data: function data() {\n    return {\n      COUPON: COUPON,\n      show: false,\n      selectedRowKeys: [],\n      selectedRows: []\n    };\n  },\n  computed: {\n    columns: columns\n  },\n  mounted: function mounted() {\n    this.getList({\n      coupon_name: ''\n    });\n  },\n  methods: {\n    onGoCouponList: function onGoCouponList() {\n      this.show = false;\n      this.$router.push({\n        path: '/brand/marketing/plugin/coupon/list'\n      });\n    },\n    getList: function getList(query) {\n      var _this = this;\n\n      this.addCouponService.getList(query).subscribe(function (res) {\n        if (_this.list.some(function (i) {\n          return i.id === _this.id;\n        })) {\n          _this.selectedRowKeys = [_this.id];\n          _this.selectedRows = cloneDeep(_this.list.filter(function (i) {\n            return i.id === _this.id;\n          }));\n        } else {\n          _this.selectedRowKeys = [];\n          _this.selectedRows = [];\n        }\n      });\n    },\n    onSearch: function onSearch(data) {\n      this.getList({\n        coupon_name: data\n      });\n    },\n    onSelectChange: function onSelectChange(selectedRowKeys, selectedRows) {\n      this.selectedRowKeys = selectedRowKeys;\n      this.selectedRows = selectedRows;\n    },\n    onSubmit: function onSubmit() {\n      this.show = false;\n      this.$emit('success', {\n        coupon: this.selectedRows[0]\n      });\n    }\n  }\n};",{"version":3,"sources":["add-coupon.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA,SAAA,gBAAA;AACA,SAAA,OAAA;AACA,SAAA,SAAA,QAAA,WAAA;AACA,SAAA,MAAA,QAAA,8BAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,yBADA;AAEA,EAAA,GAAA,EAAA;AACA,IAAA,GAAA,EAAA;AADA,GAFA;AAKA,EAAA,aALA,2BAKA;AACA,WAAA;AACA,MAAA,gBAAA,EAAA;AADA,KAAA;AAGA,GATA;AAUA,EAAA,OAVA,qBAUA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KAAA,gBAAA,CAAA,QADA;AAEA,MAAA,IAAA,EAAA,KAAA,gBAAA,CAAA;AAFA,KAAA;AAIA,GAfA;AAgBA,EAAA,KAAA,EAAA;AACA,IAAA,EAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AADA,GAhBA;AAqBA,EAAA,IArBA,kBAqBA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,MADA;AAEA,MAAA,IAAA,EAAA,KAFA;AAGA,MAAA,eAAA,EAAA,EAHA;AAIA,MAAA,YAAA,EAAA;AAJA,KAAA;AAMA,GA5BA;AA6BA,EAAA,QAAA,EAAA;AACA,IAAA,OAAA,EAAA;AADA,GA7BA;AAgCA,EAAA,OAhCA,qBAgCA;AACA,SAAA,OAAA,CAAA;AAAA,MAAA,WAAA,EAAA;AAAA,KAAA;AACA,GAlCA;AAmCA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AACA,WAAA,IAAA,GAAA,KAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA;AADA,OAAA;AAGA,KANA;AAOA,IAAA,OAPA,mBAOA,KAPA,EAOA;AAAA;;AACA,WAAA,gBAAA,CAAA,OAAA,CAAA,KAAA,EAAA,SAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,KAAA,CAAA,IAAA,CAAA,IAAA,CAAA,UAAA,CAAA;AAAA,iBAAA,CAAA,CAAA,EAAA,KAAA,KAAA,CAAA,EAAA;AAAA,SAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,eAAA,GAAA,CAAA,KAAA,CAAA,EAAA,CAAA;AACA,UAAA,KAAA,CAAA,YAAA,GAAA,SAAA,CAAA,KAAA,CAAA,IAAA,CAAA,MAAA,CAAA,UAAA,CAAA;AAAA,mBAAA,CAAA,CAAA,EAAA,KAAA,KAAA,CAAA,EAAA;AAAA,WAAA,CAAA,CAAA;AACA,SAHA,MAGA;AACA,UAAA,KAAA,CAAA,eAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,YAAA,GAAA,EAAA;AACA;AACA,OARA;AASA,KAjBA;AAkBA,IAAA,QAlBA,oBAkBA,IAlBA,EAkBA;AACA,WAAA,OAAA,CAAA;AAAA,QAAA,WAAA,EAAA;AAAA,OAAA;AACA,KApBA;AAqBA,IAAA,cArBA,0BAqBA,eArBA,EAqBA,YArBA,EAqBA;AACA,WAAA,eAAA,GAAA,eAAA;AACA,WAAA,YAAA,GAAA,YAAA;AACA,KAxBA;AAyBA,IAAA,QAzBA,sBAyBA;AACA,WAAA,IAAA,GAAA,KAAA;AACA,WAAA,KAAA,CAAA,SAAA,EAAA;AAAA,QAAA,MAAA,EAAA,KAAA,YAAA,CAAA,CAAA;AAAA,OAAA;AACA;AA5BA;AAnCA,CAAA","sourcesContent":["<template>\n  <st-modal\n    title=\"选择优惠券\"\n    v-model=\"show\"\n    wrapClassName=\"modal-marketing-add-coupon\"\n  >\n    <div :class=\"add('content')\">\n      <div :class=\"add('content-search')\" class=\"mg-b24\">\n        <st-input-search\n          style=\"width: 291px\"\n          @search=\"onSearch\"\n          placeholder=\"输入优惠券名称\"\n        />\n        <st-button type=\"primary\" @click=\"onGoCouponList\">优惠券列表</st-button>\n      </div>\n      <div :class=\"add('table')\" v-scrollBar=\"{ stopPropagation: true }\">\n        <st-table\n          size=\"middle\"\n          :rowSelection=\"{\n            selectedRowKeys: selectedRowKeys,\n            type: 'radio',\n            columnTitle: ' ',\n            onChange: onSelectChange\n          }\"\n          :columns=\"columns\"\n          :dataSource=\"list\"\n          :pagination=\"false\"\n          rowKey=\"id\"\n        >\n          <!-- 可用门店 -->\n          <template slot=\"is_shop_range\" slot-scope=\"text, record\">\n            {{\n              text === COUPON.IS_SHOP_RANGE ? '全门店' : `${record.shop_num}家`\n            }}\n          </template>\n          <!-- 面额 -->\n          <template slot=\"price\" slot-scope=\"text\">{{ text }}元</template>\n          <!-- 门槛 -->\n          <template slot=\"use_type\" slot-scope=\"text, record\">\n            {{\n              text === COUPON.USE_TYPE\n                ? `无门槛`\n                : `满${record.full_price}元使用`\n            }}\n          </template>\n        </st-table>\n      </div>\n    </div>\n    <template slot=\"footer\">\n      <st-button @click=\"show = false\">取消</st-button>\n      <st-button\n        @click=\"onSubmit\"\n        :disabled=\"!selectedRows.length\"\n        type=\"primary\"\n      >\n        确定\n      </st-button>\n    </template>\n  </st-modal>\n</template>\n<script>\nimport { AddCouponService } from './add-coupon.service'\nimport { columns } from './add-coupon.config'\nimport { cloneDeep } from 'lodash-es'\nimport { COUPON } from '@/constants/marketing/coupon'\nexport default {\n  name: 'ModalMarketingAddCoupon',\n  bem: {\n    add: 'modal-marketing-add-coupon'\n  },\n  serviceInject() {\n    return {\n      addCouponService: AddCouponService\n    }\n  },\n  rxState() {\n    return {\n      loading: this.addCouponService.loading$,\n      list: this.addCouponService.list$\n    }\n  },\n  props: {\n    id: {\n      type: Number\n    }\n  },\n  data() {\n    return {\n      COUPON,\n      show: false,\n      selectedRowKeys: [],\n      selectedRows: []\n    }\n  },\n  computed: {\n    columns\n  },\n  mounted() {\n    this.getList({ coupon_name: '' })\n  },\n  methods: {\n    onGoCouponList() {\n      this.show = false\n      this.$router.push({\n        path: '/brand/marketing/plugin/coupon/list'\n      })\n    },\n    getList(query) {\n      this.addCouponService.getList(query).subscribe(res => {\n        if (this.list.some(i => i.id === this.id)) {\n          this.selectedRowKeys = [this.id]\n          this.selectedRows = cloneDeep(this.list.filter(i => i.id === this.id))\n        } else {\n          this.selectedRowKeys = []\n          this.selectedRows = []\n        }\n      })\n    },\n    onSearch(data) {\n      this.getList({ coupon_name: data })\n    },\n    onSelectChange(selectedRowKeys, selectedRows) {\n      this.selectedRowKeys = selectedRowKeys\n      this.selectedRows = selectedRows\n    },\n    onSubmit() {\n      this.show = false\n      this.$emit('success', { coupon: this.selectedRows[0] })\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/biz-modals/marketing"}]}