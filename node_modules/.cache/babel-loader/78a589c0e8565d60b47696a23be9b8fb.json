{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js!/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/staff/edit#/edit-detail-coachInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/staff/edit#/edit-detail-coachInfo.vue","mtime":1597895242229},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js","mtime":1591062572352},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.set\";\nimport _toConsumableArray from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { PatternService } from '@/services/pattern.service';\nimport { ruleOptions } from \"../staff-form.config.ts\";\nimport { cloneDeep } from 'lodash-es';\nimport StImageUpload from '@/views/biz-components/st/image-upload/image-upload.vue';\nexport default {\n  name: 'EditDetailCoachInfo',\n  serviceInject: function serviceInject() {\n    return {\n      pattern: PatternService\n    };\n  },\n  components: {\n    StImageUpload: StImageUpload\n  },\n  props: {\n    data: {\n      type: Object\n    },\n    loading: {\n      type: Boolean\n    },\n    staffSpecialty: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  data: function data() {\n    var form = this.$stForm.create();\n    var decorators = form.decorators(ruleOptions);\n    return {\n      form: form,\n      decorators: decorators,\n      coachInfoData: {\n        certification_name: []\n      },\n      fileList: [],\n      image_personal: []\n    };\n  },\n  mounted: function mounted() {\n    cloneDeep();\n    this.setData(this.data);\n  },\n  methods: {\n    onChangeGetShowImage: function onChangeGetShowImage(imageFiles) {\n      this.image_personal = cloneDeep(imageFiles);\n    },\n    onChangeSpecialtyId: function onChangeSpecialtyId(v) {\n      if (v.length > 10) {\n        v.pop();\n      }\n    },\n    checkShow: function checkShow(e) {\n      this.checked = e.target.checked;\n    },\n    handleSpecialtyIdChange: function handleSpecialtyIdChange(e) {\n      console.log(e);\n    },\n    setData: function setData(obj) {\n      this.form.setFieldsValue({\n        employment_time: obj.employment_time ? moment(obj.employment_time) : undefined,\n        introduction: obj.introduction,\n        specialty_id: obj.specialty_id\n      });\n      this.image_personal = obj.image_personal;\n      this.coachInfoData.certification_name = obj.certification_name ? obj.certification_name : [];\n    },\n    onClickBack: function onClickBack() {\n      this.$emit('back', 1);\n    },\n    save: function save(e) {\n      var _this = this;\n\n      this.form.validate().then(function (values) {\n        // 入职时间不必填 不填写不是时间对象不能格式化\n        if (values.employment_time) {\n          values.employment_time = values.employment_time.format('YYYY-MM-DD');\n        } else {\n          values.employment_time = undefined;\n        }\n\n        values.certification_name = _this.coachInfoData.certification_name;\n        values.image_personal = _this.image_personal;\n        values.album_id = _this.data.album_id;\n        console.log('Received values of form: ', values);\n\n        _this.$emit('coachInfoSave', {\n          data: values\n        });\n      });\n    },\n    // 新增证书\n    onAddProfess: function onAddProfess() {\n      var _this2 = this;\n\n      // input框里有值才新增\n      this.form.validate(['certification_name']).then(function (values) {\n        var arr = _toConsumableArray(_this2.coachInfoData.certification_name);\n\n        if (values.certification_name) {\n          arr.push(values.certification_name);\n          _this2.coachInfoData.certification_name = _toConsumableArray(new Set(arr));\n\n          _this2.form.setFieldsValue({\n            certification_name: ''\n          });\n        }\n      });\n    },\n    // 移除证书\n    onProfessRule: function onProfessRule(index) {\n      this.coachInfoData.certification_name.splice(index, 1);\n    },\n    upload: function upload(data) {\n      var _this3 = this;\n\n      this.OSS.put({\n        file: data.file\n      }).subscribe({\n        next: function next(val) {\n          _this3.key = val.fileKey;\n\n          _this3.MessageService.success({\n            content: \"success: \".concat(val)\n          });\n\n          _this3.fileList.push({\n            url: \"http://styd-saas-test.oss-cn-shanghai.aliyuncs.com/\\n            \".concat(val.fileKey)\n          });\n\n          _this3.loading = false;\n        },\n        error: function error(val) {\n          _this3.MessageService.error({\n            content: \"Error \".concat(val.message)\n          });\n\n          _this3.loading = false;\n        }\n      });\n    },\n    handleCancel: function handleCancel() {\n      this.previewVisible = false;\n    },\n    handlePreview: function handlePreview(file) {\n      this.previewImage = file.url || file.thumbUrl;\n      this.previewVisible = true;\n    },\n    handleChange: function handleChange(_ref) {\n      var fileList = _ref.fileList;\n      this.fileList = fileList;\n    }\n  }\n};",null]}