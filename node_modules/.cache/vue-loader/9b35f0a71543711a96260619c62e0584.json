{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/schedule-time-picker/schedule-time-picker.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/schedule-time-picker/schedule-time-picker.vue","mtime":1600926382177},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport item from './schedule-time-picker-item'\nimport { cloneDeep } from 'lodash-es'\nexport default {\n  name: 'StScheduleTimePicker',\n  model: {\n    prop: 'values',\n    event: 'change'\n  },\n  data() {\n    return {\n      isDrag: false,\n      isEnter: false,\n      checkArr: [],\n      views: []\n    }\n  },\n  components: {\n    item\n  },\n  props: {\n    values: {\n      type: Array,\n      default: () => []\n    }\n  },\n  watch: {\n    checkArr(n) {\n      this.views = this.rangeTime(n).views\n      this.$emit('change', this.rangeTime(n).values)\n    }\n  },\n  methods: {\n    formatTime(val) {\n      return val < 10 ? `0${val}:00` : `${val}:00`\n    },\n    rangeTime(checkArr) {\n      let values = []\n      let start = -1\n      let end = 0\n      let rangeArr = []\n      let views = []\n      let ca = cloneDeep(checkArr)\n      ca[ca.length] = false\n      for (let i = 0; i < ca.length; i++) {\n        if (ca[i] && start === -1) {\n          start = i - 1\n        }\n        if (start !== -1 && ca[i]) {\n          end = i\n        }\n        if (!ca[i] && start !== -1 && end) {\n          rangeArr.push({\n            start_time: `${this.formatTime(start)}`,\n            end_time: `${this.formatTime(end)}`\n          })\n          const view = `#${start}#start---#${end}#end`\n          views.push(view)\n          start = -1\n        }\n      }\n      return { values: rangeArr, views }\n    },\n    onMouseDown() {\n      this.isDrag = true\n    },\n    onMouseOver() {\n      this.isDrag = false\n    },\n    onDown(isEnter) {\n      this.isEnter = isEnter\n    },\n    onChange(val) {\n      this.$set(this.checkArr, val.time, val.isActive)\n    }\n  },\n  mounted() {\n    window.addEventListener('mouseup', () => {\n      this.isDrag = false\n    })\n    this.$nextTick().then(() => {\n      if (!this.values.length) return\n      this.views = this.values.map(item => {\n        const start = +item.start_time.split(':00')[0]\n        const end = +item.end_time.split(':00')[0]\n        for (let i = 0; i < 25; i++) {\n          if (i > start && i <= end) {\n            this.$set(this.checkArr, i, true)\n          }\n        }\n        return `#${start}#start---#${end}#end`\n      })\n    })\n  }\n}\n",{"version":3,"sources":["schedule-time-picker.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"schedule-time-picker.vue","sourceRoot":"src/views/biz-components/schedule-time-picker","sourcesContent":["<template>\n  <div\n    class=\"st-schedule-time-picker\"\n    @mounseover=\"onMouseOver\"\n    @mousedown=\"onMouseDown\"\n  >\n    <template v-for=\"i in 25\">\n      <item\n        @change=\"onChange\"\n        @down=\"onDown\"\n        :checkArr=\"checkArr\"\n        :views=\"views\"\n        :isDrag=\"isDrag\"\n        :isEnter=\"isEnter\"\n        :key=\"i\"\n        :time=\"i - 1\"\n      ></item>\n    </template>\n  </div>\n</template>\n\n<script>\nimport item from './schedule-time-picker-item'\nimport { cloneDeep } from 'lodash-es'\nexport default {\n  name: 'StScheduleTimePicker',\n  model: {\n    prop: 'values',\n    event: 'change'\n  },\n  data() {\n    return {\n      isDrag: false,\n      isEnter: false,\n      checkArr: [],\n      views: []\n    }\n  },\n  components: {\n    item\n  },\n  props: {\n    values: {\n      type: Array,\n      default: () => []\n    }\n  },\n  watch: {\n    checkArr(n) {\n      this.views = this.rangeTime(n).views\n      this.$emit('change', this.rangeTime(n).values)\n    }\n  },\n  methods: {\n    formatTime(val) {\n      return val < 10 ? `0${val}:00` : `${val}:00`\n    },\n    rangeTime(checkArr) {\n      let values = []\n      let start = -1\n      let end = 0\n      let rangeArr = []\n      let views = []\n      let ca = cloneDeep(checkArr)\n      ca[ca.length] = false\n      for (let i = 0; i < ca.length; i++) {\n        if (ca[i] && start === -1) {\n          start = i - 1\n        }\n        if (start !== -1 && ca[i]) {\n          end = i\n        }\n        if (!ca[i] && start !== -1 && end) {\n          rangeArr.push({\n            start_time: `${this.formatTime(start)}`,\n            end_time: `${this.formatTime(end)}`\n          })\n          const view = `#${start}#start---#${end}#end`\n          views.push(view)\n          start = -1\n        }\n      }\n      return { values: rangeArr, views }\n    },\n    onMouseDown() {\n      this.isDrag = true\n    },\n    onMouseOver() {\n      this.isDrag = false\n    },\n    onDown(isEnter) {\n      this.isEnter = isEnter\n    },\n    onChange(val) {\n      this.$set(this.checkArr, val.time, val.isActive)\n    }\n  },\n  mounted() {\n    window.addEventListener('mouseup', () => {\n      this.isDrag = false\n    })\n    this.$nextTick().then(() => {\n      if (!this.values.length) return\n      this.views = this.values.map(item => {\n        const start = +item.start_time.split(':00')[0]\n        const end = +item.end_time.split(':00')[0]\n        for (let i = 0; i < 25; i++) {\n          if (i > start && i <= end) {\n            this.$set(this.checkArr, i, true)\n          }\n        }\n        return `#${start}#start---#${end}#end`\n      })\n    })\n  }\n}\n</script>\n"]}]}