{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/card/brand-member/shelf.vue?vue&type=template&id=79997a8a&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/card/brand-member/shelf.vue","mtime":1595230476655},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":1591062572376},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["\n<st-modal\n  :title=\"title\"\n  v-model=\"show\"\n  wrapClassName=\"modal-card-batch-shelves\"\n  width=\"668px\"\n  :loading=\"firstLoading\"\n>\n  <section :class=\"shelves('content')\">\n    <div :class=\"shelves('info')\" class=\"mg-b24\">\n      <img\n        :class=\"shelves('card_bg')\"\n        v-if=\"info.bg_image\"\n        :src=\"info.bg_image | imgFilter({ w: 142, h: 80 })\"\n        width=\"142\"\n        height=\"80\"\n        alt=\"卡背景\"\n      />\n      <div :class=\"shelves('detail')\">\n        <p :class=\"shelves('detail-title')\" v-if=\"info.card_type\">\n          <st-tag\n            :type=\"cardTypeTag[info.card_type]\"\n            style=\"margin-right:8px;\"\n          />\n          {{ info.card_name }}\n        </p>\n        <p v-if=\"actionType === 'shelf'\" :class=\"shelves('detail-cards')\">\n          本次共上架{{ shopList.length }}家门店，\n          <a-popover\n            placement=\"bottom\"\n            trigger=\"click\"\n            :getPopupContainer=\"trigger => trigger.parentNode\"\n            v-model=\"visible\"\n          >\n            <span slot=\"title\" :class=\"shelves('card-list-title')\">\n              上架门店\n            </span>\n            <st-table\n              slot=\"content\"\n              rowKey=\"key\"\n              :dataSource=\"shopList\"\n              :columns=\"shopColumns\"\n              :pagination=\"false\"\n              :scroll=\"{ y: 270 }\"\n            />\n            <span>查看明细</span>\n          </a-popover>\n        </p>\n        <p :class=\"shelves('detail-saletype')\" v-if=\"info.sell_type\">\n          <span v-for=\"(item, index) in info.sell_type\" :key=\"index\">\n            {{ item | enumFilter('member_card.sell_type') }}\n          </span>\n        </p>\n      </div>\n    </div>\n    <st-form :form=\"form\" labelWidth=\"67px\" :class=\"shelves('form')\">\n      <!-- 次卡，无价格范围 -->\n      <div\n        :class=\"shelves('price')\"\n        v-if=\"\n          (info.publish_channel === BRAND_MEMBER.PUBLISH_CHANNEL_2 &&\n            info.card_type === BRAND_MEMBER.CARD_TYPE_1) ||\n            (info.price_setting === BRAND_MEMBER.PRICE_SETTING_1 &&\n              info.card_type === BRAND_MEMBER.CARD_TYPE_1)\n        \"\n        class=\"mg-b0\"\n      >\n        <st-form-table>\n          <colgroup>\n            <col style=\"width:4%;\" />\n            <col style=\"width:16%;\" />\n            <col style=\"width:22%;\" />\n            <col style=\"width:22%;\" />\n            <col style=\"width:18%;\" />\n            <col style=\"width:18%;\" />\n          </colgroup>\n          <tr>\n            <th></th>\n            <th>次数</th>\n            <th>售卖价格</th>\n            <th>有效期限</th>\n            <th>允许冻结</th>\n            <th>赠送上限</th>\n          </tr>\n          <tbody>\n            <tr v-for=\"(item, index) in info.specs\" :key=\"index\">\n              <td></td>\n              <td>{{ item.validity_times }}次</td>\n              <td>{{ item.rally_price }}元</td>\n              <td>\n                {{ item.duration_num\n                }}{{\n                  item.duration_unit | enumFilter('member_card.duration_unit')\n                }}\n              </td>\n              <td>{{ item.frozen_day }}天</td>\n              <td>{{ item.gift_unit }}次</td>\n            </tr>\n          </tbody>\n        </st-form-table>\n      </div>\n      <!-- 期卡，无价格范围 -->\n      <div\n        :class=\"shelves('price')\"\n        v-if=\"\n          (info.publish_channel === BRAND_MEMBER.PUBLISH_CHANNEL_2 &&\n            info.card_type === BRAND_MEMBER.CARD_TYPE_2) ||\n            (info.price_setting === BRAND_MEMBER.PRICE_SETTING_1 &&\n              info.card_type === BRAND_MEMBER.CARD_TYPE_2)\n        \"\n        class=\"mg-b0\"\n      >\n        <st-form-table>\n          <colgroup>\n            <col style=\"width:4%;\" />\n            <col style=\"width:26%;\" />\n            <col style=\"width:26%;\" />\n            <col style=\"width:22%;\" />\n            <col style=\"width:22%;\" />\n          </colgroup>\n          <tr>\n            <th></th>\n            <th>有效期限</th>\n            <th>售卖价格</th>\n            <th>允许冻结</th>\n            <th>赠送上限</th>\n          </tr>\n          <tbody>\n            <tr v-for=\"(item, index) in info.specs\" :key=\"index\">\n              <td></td>\n              <td>\n                {{ item.duration_num\n                }}{{\n                  item.duration_unit | enumFilter('member_card.duration_unit')\n                }}\n              </td>\n              <td>{{ item.rally_price }}元</td>\n              <td>{{ item.frozen_day }}天</td>\n              <td>{{ item.gift_unit }}天</td>\n            </tr>\n          </tbody>\n        </st-form-table>\n      </div>\n      <!-- 次卡，有价格范围 -->\n      <div\n        :class=\"{\n          'modal-card-batch-shelves__price-error': priceHelpText !== ''\n        }\"\n        v-if=\"\n          info.publish_channel === BRAND_MEMBER.PUBLISH_CHANNEL_1 &&\n            info.price_setting === BRAND_MEMBER.PRICE_SETTING_2 &&\n            info.card_type === BRAND_MEMBER.CARD_TYPE_1\n        \"\n        class=\"modal-card-batch-shelves__price mg-b0\"\n      >\n        <st-form-table>\n          <colgroup>\n            <col style=\"width:2%;\" />\n            <col style=\"width:10%;\" />\n            <col style=\"width:20%;\" />\n            <col style=\"width:17%;\" />\n            <col style=\"width:17%;\" />\n            <col style=\"width:17%;\" />\n            <col style=\"width:17%;\" />\n          </colgroup>\n          <tr>\n            <th></th>\n            <th>次数</th>\n            <th>售卖价格</th>\n            <th></th>\n            <th>有效期限</th>\n            <th>允许冻结</th>\n            <th>赠送上限</th>\n          </tr>\n          <tbody>\n            <tr v-for=\"(item, index) in priceList\" :key=\"index\">\n              <td></td>\n              <td>{{ item.validity_times }}次</td>\n              <td :class=\"shelves('price-input')\">\n                <st-input-number\n                  :float=\"true\"\n                  :max=\"+item.max_price || undefined\"\n                  :min=\"+item.min_price || undefined\"\n                  @change=\"\n                    e =>\n                      brandPriceSettingHandleChange({ value: e, key: index })\n                  \"\n                  style=\"width:140px;\"\n                >\n                  <span slot=\"addonAfter\">元</span>\n                </st-input-number>\n              </td>\n              <td>\n                &nbsp;{{ item.min_price }}&nbsp;~&nbsp;{{\n                  item.max_price\n                }}&nbsp;\n              </td>\n              <td>\n                {{ item.duration_num\n                }}{{\n                  item.duration_unit | enumFilter('member_card.duration_unit')\n                }}\n              </td>\n              <td>{{ item.frozen_day }}天</td>\n              <td>{{ item.gift_unit }}次</td>\n            </tr>\n          </tbody>\n        </st-form-table>\n      </div>\n      <!-- 期卡，有价格范围 -->\n      <div\n        :class=\"{\n          'modal-card-batch-shelves__price-error': priceHelpText !== ''\n        }\"\n        v-if=\"\n          info.publish_channel === BRAND_MEMBER.PUBLISH_CHANNEL_1 &&\n            info.price_setting === BRAND_MEMBER.PRICE_SETTING_2 &&\n            info.card_type === BRAND_MEMBER.CARD_TYPE_2\n        \"\n        class=\"modal-card-batch-shelves__price mg-b0\"\n      >\n        <st-form-table>\n          <colgroup>\n            <col style=\"width:2%;\" />\n            <col style=\"width:19%;\" />\n            <col style=\"width:22%;\" />\n            <col style=\"width:19%;\" />\n            <col style=\"width:19%;\" />\n            <col style=\"width:19%;\" />\n          </colgroup>\n          <tr>\n            <th></th>\n            <th>有效期限</th>\n            <th>售卖价格</th>\n            <th></th>\n            <th>允许冻结</th>\n            <th>赠送上限</th>\n          </tr>\n          <tbody>\n            <tr v-for=\"(item, index) in priceList\" :key=\"index\">\n              <td></td>\n              <td>\n                {{ item.duration_num\n                }}{{\n                  item.duration_unit | enumFilter('member_card.duration_unit')\n                }}\n              </td>\n              <td :class=\"shelves('price-input')\">\n                <st-input-number\n                  :float=\"true\"\n                  :max=\"+item.max_price || undefined\"\n                  :min=\"+item.min_price || undefined\"\n                  @change=\"\n                    e =>\n                      brandPriceSettingHandleChange({ value: e, key: index })\n                  \"\n                  style=\"width:140px;\"\n                >\n                  <span slot=\"addonAfter\">元</span>\n                </st-input-number>\n              </td>\n              <td>\n                &nbsp;{{ item.min_price }}&nbsp;~&nbsp;{{\n                  item.max_price\n                }}&nbsp;\n              </td>\n              <td>{{ item.frozen_day }}天</td>\n              <td>{{ item.gift_unit }}天</td>\n            </tr>\n          </tbody>\n        </st-form-table>\n      </div>\n      <p :class=\"shelves('price-valid-text')\">{{ priceHelpText }}</p>\n      <st-form-item\n        labelGutter=\"12px\"\n        class=\"mg-b0\"\n        label=\"开卡方式\"\n        required\n      >\n        <a-checkbox-group\n          v-model=\"openTypeList\"\n          :class=\"shelves('open-type')\"\n        >\n          <template\n            v-for=\"(item, index) in activateTypes\"\n            :value=\"+item.value\"\n          >\n            <span\n              :class=\"shelves('day-input')\"\n              v-if=\"+item.value === 2\"\n              :key=\"index\"\n            >\n              <a-checkbox :value=\"+item.value\">{{ item.label }}</a-checkbox>\n              <div class=\"autoplay-card-day\" v-if=\"openTypeList.includes(2)\">\n                <a-form-item class=\"page-a-form\">\n                  <st-input-number\n                    v-decorator=\"decorators.openDay\"\n                    class=\"autoplay-card-day-input\"\n                  >\n                    <span slot=\"addonAfter\">天</span>\n                  </st-input-number>\n                  <span>内未开卡，则自动开卡</span>\n                </a-form-item>\n              </div>\n            </span>\n            <a-checkbox v-else :key=\"index\" :value=\"+item.value\">\n              {{ item.label }}\n            </a-checkbox>\n          </template>\n        </a-checkbox-group>\n      </st-form-item>\n      <st-form-item labelGutter=\"12px\" label=\"约课权益\" required>\n        <a-radio-group v-model=\"courseInterests\" :class=\"shelves('course')\">\n          <a-radio\n            v-for=\"(item, index) in course_interests\"\n            :value=\"+item.value\"\n            :key=\"index\"\n          >\n            {{ item.label }}\n          </a-radio>\n        </a-radio-group>\n        <a-select\n          v-if=\"courseInterests === 3\"\n          mode=\"multiple\"\n          style=\"width: 419px;\"\n          v-decorator=\"decorators.courseList\"\n          placeholder=\"请输入课程名称搜索\"\n          :filterOption=\"false\"\n          @search=\"getCourseList\"\n          :notFoundContent=\"loading.getCourseList ? undefined : null\"\n        >\n          <a-spin\n            v-if=\"loading.getCourseList\"\n            slot=\"notFoundContent\"\n            size=\"small\"\n          />\n          <a-select-option v-for=\"d in courseData\" :key=\"d.id\">\n            {{ d.name }}\n          </a-select-option>\n        </a-select>\n      </st-form-item>\n      <div v-if=\"!moreIsShow\" :class=\"shelves('show-more')\" class=\"mg-b18\">\n        <span @click=\"moreIsShow = true\">展开更多设置</span>\n        <st-icon @click=\"moreIsShow = true\" type=\"down-small\" />\n      </div>\n      <st-form-item\n        v-if=\"moreIsShow\"\n        labelGutter=\"12px\"\n        label=\"入场时段\"\n        class=\"mg-b16\"\n        required\n      >\n        <a-radio-group v-model=\"admissionTime\">\n          <a-radio\n            v-for=\"(item, index) in admissionTimeList\"\n            :value=\"+item.value\"\n            :key=\"index\"\n          >\n            {{ item.label }}\n          </a-radio>\n        </a-radio-group>\n      </st-form-item>\n      <shop-hour-picker\n        v-if=\"admissionTime === BRAND_MEMBER.ADMISSION_TIME_2 && moreIsShow\"\n        v-model=\"timeList\"\n      ></shop-hour-picker>\n      <p\n        :class=\"shelves('admission-time-validata')\"\n        v-if=\"admissionTime === BRAND_MEMBER.ADMISSION_TIME_2 && moreIsShow\"\n      >\n        {{ admissionTimeText }}\n      </p>\n      <st-form-item\n        v-if=\"moreIsShow\"\n        labelGutter=\"12px\"\n        class=\"mg-t18 mg-b8\"\n        labelWidth=\"78px\"\n        label=\"VIP场地通行\"\n      >\n        <span v-if=\"info.areas && !info.areas.length\">无</span>\n        <div v-else>\n          <!-- 上架会员卡时展示的场地 -->\n          <div v-if=\"actionType === 'shelf'\" :class=\"shelves('tree')\">\n            <a-input-search\n              class=\"mg-b16\"\n              :class=\"shelves('tree-search')\"\n              @search=\"onTreeSearch\"\n              placeholder=\"请输入场地名称查询\"\n            />\n            <a-tree\n              checkable\n              @expand=\"onExpand\"\n              :autoExpandParent=\"autoExpandParent\"\n              :expandedKeys=\"expandedKeys\"\n              :treeData=\"vipTree\"\n              @check=\"onTreeSelect\"\n            >\n              <template slot=\"title\" slot-scope=\"{ title }\">\n                <span v-if=\"title.indexOf(searchValue) > -1\">\n                  {{ title.substr(0, title.indexOf(searchValue)) }}\n                  <span :class=\"shelves('tree-title-span')\">\n                    {{ searchValue }}\n                  </span>\n                  {{\n                    title.substr(\n                      title.indexOf(searchValue) + searchValue.length\n                    )\n                  }}\n                </span>\n                <span v-else>{{ title }}</span>\n              </template>\n            </a-tree>\n          </div>\n          <!-- 变更上架信息时展示的场地 -->\n          <a-checkbox-group\n            v-if=\"actionType === 'updateShelf'\"\n            v-model=\"shelfCardDetail.areas\"\n          >\n            <a-checkbox\n              v-for=\"(item, index) in info.areas\"\n              :key=\"index\"\n              :value=\"item.id\"\n            >\n              {{ item.name }}\n            </a-checkbox>\n          </a-checkbox-group>\n        </div>\n      </st-form-item>\n      <div :class=\"shelves('hide-more')\" v-if=\"moreIsShow\">\n        <span @click=\"moreIsShow = false\">收起</span>\n      </div>\n    </st-form>\n  </section>\n  <template slot=\"footer\">\n    <div :class=\"shelves('footer')\">\n      <st-button @click=\"show = false\">取消</st-button>\n      <!-- 上架 -->\n      <st-button\n        v-if=\"actionType === 'shelf'\"\n        @click=\"onSubmit\"\n        :loading=\"loading.shelfCard\"\n        type=\"primary\"\n      >\n        确认上架\n      </st-button>\n      <!-- 变更上架 -->\n      <st-button\n        v-if=\"actionType === 'updateShelf'\"\n        @click=\"onUpdateShelf\"\n        :loading=\"loading.updateShelf\"\n        type=\"primary\"\n      >\n        确认变更\n      </st-button>\n    </div>\n  </template>\n</st-modal>\n",null]}