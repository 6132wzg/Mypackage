{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/ts-loader/index.js??ref--13-2!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/custom-decorate/product-table-select.service.ts","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/custom-decorate/product-table-select.service.ts","mtime":1600926555853},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/ts-loader/index.js","mtime":1591062571609}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar _a, _b, _c, _d, _e, _f, _g;\n\nimport { __decorate, __metadata } from \"tslib\";\nimport { UserService } from '@/services/user.service';\nimport { Injectable } from 'vue-service-app';\nimport { PluginGroupBuyApi } from '@/api/v1/plugin/group_buy';\nimport { PluginSignUpApi } from '@/api/v1/plugin/sign_up';\nimport { PluginWheelApi } from '@/api/v1/plugin/wheel';\nimport { SettingMinaApi } from '@/api/v1/setting/mina';\nimport { DiscountApi } from '@/api/v1/app/plugin/discount';\nimport { SeckillApi } from '@/api/v1/app/plugin/seckill';\nimport { Effect, State } from 'rx-state';\nimport { then } from '@/operators';\n\nvar ProductTableSelectService = /*#__PURE__*/function () {\n  function ProductTableSelectService(settingMinaApi, pluginSignUpApi, pluginWheelApi, pluginGroupBuyApi, discountApi, seckillApi, userService) {\n    _classCallCheck(this, ProductTableSelectService);\n\n    this.settingMinaApi = settingMinaApi;\n    this.pluginSignUpApi = pluginSignUpApi;\n    this.pluginWheelApi = pluginWheelApi;\n    this.pluginGroupBuyApi = pluginGroupBuyApi;\n    this.discountApi = discountApi;\n    this.seckillApi = seckillApi;\n    this.userService = userService;\n    this.list$ = new State([]);\n    this.page$ = new State({});\n    this.loading$ = new State({});\n    this.activityStatus$ = this.userService.getOptions$('limited_time_discount.activity_status', {\n      addAll: '全部活动状态'\n    });\n    this.cocach_type$ = this.userService.getOptions$('mina_setting.coach_identity');\n    this.card_type$ = this.userService.getOptions$('mina_setting.card_type');\n    this.package_type$ = this.userService.getOptions$('package_course.package_type');\n    this.coupon_type$ = this.userService.getOptions$('coupon.coupon_status');\n  }\n\n  _createClass(ProductTableSelectService, [{\n    key: \"RESET_LIST\",\n    value: function RESET_LIST() {\n      this.list$.commit(function () {\n        return [];\n      });\n    }\n  }, {\n    key: \"getList\",\n    value: function getList(query) {\n      var module_type = query.module_type,\n          course_type = query.course_type,\n          req = _objectWithoutProperties(query, [\"module_type\", \"course_type\"]);\n\n      var ModuleTypeMapFn = {\n        3: this.getCoachList(req),\n        4: this.getCardList(req),\n        6: this.getPackageList(req),\n        12: this.getCouponList(req),\n        14: this.getWheelList(req),\n        15: this.getSignUpList(req),\n        16: this.getGroupBuyList(req)\n      };\n      var fn;\n\n      if (module_type === 5) {\n        var fns = {\n          1: this.getTeamCourseList(req),\n          2: this.getPersonalCourseList(req),\n          3: this.getSmallCourseList(req)\n        };\n        fn = fns[course_type];\n        console.log('fn', fn);\n      } else {\n        fn = ModuleTypeMapFn[module_type];\n      }\n\n      return fn;\n    }\n  }, {\n    key: \"getCardList\",\n    value: function getCardList(params) {\n      var _this = this;\n\n      return this.settingMinaApi.getCardList(params).pipe(then(function (res) {\n        _this.list$.commit(function () {\n          return res.list;\n        });\n\n        _this.page$.commit(function () {\n          return res.page;\n        });\n      }));\n    }\n  }, {\n    key: \"getPersonalCourseList\",\n    value: function getPersonalCourseList(params) {\n      var _this2 = this;\n\n      return this.settingMinaApi.getPersonalCourseList(params).pipe(then(function (res) {\n        _this2.list$.commit(function () {\n          return res.list;\n        });\n\n        _this2.page$.commit(function () {\n          return res.page;\n        });\n      }));\n    }\n  }, {\n    key: \"getSmallCourseList\",\n    value: function getSmallCourseList(params) {\n      var _this3 = this;\n\n      return this.settingMinaApi.getSmallCourseList(params).pipe(then(function (res) {\n        _this3.list$.commit(function () {\n          return res.list;\n        });\n\n        _this3.page$.commit(function () {\n          return res.page;\n        });\n      }));\n    }\n  }, {\n    key: \"getTeamCourseList\",\n    value: function getTeamCourseList(params) {\n      var _this4 = this;\n\n      return this.settingMinaApi.getTeamCourseList(params).pipe(then(function (res) {\n        _this4.list$.commit(function () {\n          return res.list;\n        });\n\n        _this4.page$.commit(function () {\n          return res.page;\n        });\n      }));\n    }\n  }, {\n    key: \"getPackageList\",\n    value: function getPackageList(params) {\n      var _this5 = this;\n\n      return this.settingMinaApi.getPackageList(params).pipe(then(function (res) {\n        var isPermanentSale = _this5.userService.getEnumValue$('package_course.sale_time_is_forever').snapshot();\n\n        _this5.list$.commit(function () {\n          return res.list.map(function (item) {\n            item.sale_time = item.is_permanent_sale === 1 ? isPermanentSale[item.is_permanent_sale] : item.sale_time;\n            return item;\n          });\n        });\n\n        _this5.page$.commit(function () {\n          return res.page;\n        });\n      }));\n    }\n  }, {\n    key: \"getCoachList\",\n    value: function getCoachList(params) {\n      var _this6 = this;\n\n      return this.settingMinaApi.getCoachList(params).pipe(then(function (res) {\n        _this6.list$.commit(function () {\n          return res.list;\n        });\n\n        _this6.page$.commit(function () {\n          return res.page;\n        });\n      }));\n    }\n  }, {\n    key: \"getGroupBuyList\",\n    value: function getGroupBuyList(params) {\n      var _this7 = this;\n\n      return this.pluginGroupBuyApi.getGroupBuyList(_objectSpread({\n        activity_status: 99\n      }, params)) // 99过滤“已结束”“草稿”“已取消”\n      .pipe(then(function (res) {\n        _this7.list$.commit(function () {\n          return res.list;\n        });\n\n        _this7.page$.commit(function () {\n          return res.page;\n        });\n      }));\n    }\n  }, {\n    key: \"getCouponList\",\n    value: function getCouponList(params) {\n      var _this8 = this;\n\n      return this.settingMinaApi.getCouponList(params).pipe(then(function (res) {\n        _this8.list$.commit(function () {\n          return res.list;\n        });\n\n        _this8.page$.commit(function () {\n          return res.page;\n        });\n      }));\n    }\n  }, {\n    key: \"getWheelList\",\n    value: function getWheelList(params) {\n      var _this9 = this;\n\n      return this.pluginWheelApi.getWheelList(_objectSpread({\n        activity_status: 99\n      }, params)) // 99过滤“已结束”“草稿”“已取消”\n      .pipe(then(function (res) {\n        _this9.list$.commit(function () {\n          return res.list;\n        });\n\n        _this9.page$.commit(function () {\n          return res.page;\n        });\n      }));\n    }\n  }, {\n    key: \"getSignUpList\",\n    value: function getSignUpList(params) {\n      var _this10 = this;\n\n      return this.pluginSignUpApi.getSignUpList(_objectSpread({\n        activity_status: 99\n      }, params)) // 99过滤“已结束”“草稿”“已取消”\n      .pipe(then(function (res) {\n        _this10.list$.commit(function () {\n          return res.list;\n        });\n\n        _this10.page$.commit(function () {\n          return res.page;\n        });\n      }));\n    } // 限时打折\n\n  }, {\n    key: \"getDiscountList\",\n    value: function getDiscountList(params) {\n      var _this11 = this;\n\n      return this.discountApi.getLimitDiscountList(_objectSpread({\n        activity_status: 99\n      }, params)).pipe(then(function (res) {\n        _this11.list$.commit(function () {\n          return res.list;\n        });\n\n        _this11.page$.commit(function () {\n          return res.page;\n        });\n      }));\n    } // 限时打折\n\n  }, {\n    key: \"getSeckillList\",\n    value: function getSeckillList(params) {\n      var _this12 = this;\n\n      return this.seckillApi.getLimitSeckillList(_objectSpread({\n        activity_status: 99\n      }, params)).pipe(then(function (res) {\n        _this12.list$.commit(function () {\n          return res.list;\n        });\n\n        _this12.page$.commit(function () {\n          return res.page;\n        });\n      }));\n    }\n  }]);\n\n  return ProductTableSelectService;\n}();\n\n__decorate([Effect(), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], ProductTableSelectService.prototype, \"getCardList\", null);\n\n__decorate([Effect(), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], ProductTableSelectService.prototype, \"getPersonalCourseList\", null);\n\n__decorate([Effect(), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], ProductTableSelectService.prototype, \"getSmallCourseList\", null);\n\n__decorate([Effect(), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], ProductTableSelectService.prototype, \"getTeamCourseList\", null);\n\n__decorate([Effect(), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], ProductTableSelectService.prototype, \"getPackageList\", null);\n\n__decorate([Effect(), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], ProductTableSelectService.prototype, \"getCoachList\", null);\n\n__decorate([Effect(), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], ProductTableSelectService.prototype, \"getGroupBuyList\", null);\n\n__decorate([Effect(), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], ProductTableSelectService.prototype, \"getCouponList\", null);\n\n__decorate([Effect(), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], ProductTableSelectService.prototype, \"getWheelList\", null);\n\n__decorate([Effect(), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], ProductTableSelectService.prototype, \"getSignUpList\", null);\n\n__decorate([Effect(), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], ProductTableSelectService.prototype, \"getDiscountList\", null);\n\n__decorate([Effect(), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", void 0)], ProductTableSelectService.prototype, \"getSeckillList\", null);\n\nProductTableSelectService = __decorate([Injectable(), __metadata(\"design:paramtypes\", [typeof (_a = typeof SettingMinaApi !== \"undefined\" && SettingMinaApi) === \"function\" ? _a : Object, typeof (_b = typeof PluginSignUpApi !== \"undefined\" && PluginSignUpApi) === \"function\" ? _b : Object, typeof (_c = typeof PluginWheelApi !== \"undefined\" && PluginWheelApi) === \"function\" ? _c : Object, typeof (_d = typeof PluginGroupBuyApi !== \"undefined\" && PluginGroupBuyApi) === \"function\" ? _d : Object, typeof (_e = typeof DiscountApi !== \"undefined\" && DiscountApi) === \"function\" ? _e : Object, typeof (_f = typeof SeckillApi !== \"undefined\" && SeckillApi) === \"function\" ? _f : Object, typeof (_g = typeof UserService !== \"undefined\" && UserService) === \"function\" ? _g : Object])], ProductTableSelectService);\nexport { ProductTableSelectService };",{"version":3,"sources":["/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/custom-decorate/product-table-select.service.ts"],"names":[],"mappings":"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,EACP,E,mCAAA,E,yCAAA,E,uCAAA,CAAA,E,mCAAA,E,gBAAA,EASC,IATD,CAAA;;AA1KW,yBAAyB,GAAA,UAAA,CAAA,CADrC,UAAU,EAC2B,E,qDAaV,c,KAAc,W,IAAd,c,MAAc,U,GAAA,E,GAAA,M,EAAA,QAAA,EAAA,GAAA,OACb,eADa,KACE,WADF,IACb,eADa,MACE,UADF,GACE,EADF,GACE,M,EAAA,QAAA,EAAA,GAAA,OAChB,cADgB,KACF,WADE,IAChB,cADgB,MACF,UADE,GACF,EADE,GACF,M,EAAA,QAAA,EAAA,GAAA,OACX,iBADW,KACM,WADN,IACX,iBADW,MACM,UADN,GACM,EADN,GACM,M,EAAA,QAAA,EAAA,GAAA,OACvB,WADuB,KACZ,WADY,IACvB,WADuB,MACZ,UADY,GACZ,EADY,GACZ,M,EAAA,QAAA,EAAA,GAAA,OACZ,UADY,KACF,WADE,IACZ,UADY,MACF,UADE,GACF,EADE,GACF,M,EAAA,QAAA,EAAA,GAAA,OACT,WADS,KACE,WADF,IACT,WADS,MACE,UADF,GACE,EADF,GACE,M,EAnBE,CAAA,EAAzB,yBAAyB,CAAzB;SAAA,yB","sourcesContent":["import { UserService } from '@/services/user.service'\nimport { Injectable, ServiceRoute } from 'vue-service-app'\nimport { PluginGroupBuyApi } from '@/api/v1/plugin/group_buy'\nimport { PluginSignUpApi } from '@/api/v1/plugin/sign_up'\nimport { PluginWheelApi } from '@/api/v1/plugin/wheel'\nimport { SettingMinaApi } from '@/api/v1/setting/mina'\nimport { DiscountApi } from '@/api/v1/app/plugin/discount'\nimport { SeckillApi } from '@/api/v1/app/plugin/seckill'\nimport { Effect, State } from 'rx-state'\nimport { then } from '@/operators'\n\n@Injectable()\nexport class ProductTableSelectService {\n  list$ = new State([])\n  page$ = new State({})\n  loading$ = new State({})\n  activityStatus$ = this.userService.getOptions$(\n    'limited_time_discount.activity_status',\n    { addAll: '全部活动状态' }\n  )\n  cocach_type$ = this.userService.getOptions$('mina_setting.coach_identity')\n  card_type$ = this.userService.getOptions$('mina_setting.card_type')\n  package_type$ = this.userService.getOptions$('package_course.package_type')\n  coupon_type$ = this.userService.getOptions$('coupon.coupon_status')\n  constructor(\n    private settingMinaApi: SettingMinaApi,\n    private pluginSignUpApi: PluginSignUpApi,\n    private pluginWheelApi: PluginWheelApi,\n    private pluginGroupBuyApi: PluginGroupBuyApi,\n    private discountApi: DiscountApi,\n    private seckillApi: SeckillApi,\n    private userService: UserService\n  ) {}\n  RESET_LIST() {\n    this.list$.commit(() => [])\n  }\n  getList(query) {\n    let { module_type, course_type, ...req } = query\n    let ModuleTypeMapFn = {\n      3: this.getCoachList(req),\n      4: this.getCardList(req),\n      6: this.getPackageList(req),\n      12: this.getCouponList(req),\n      14: this.getWheelList(req),\n      15: this.getSignUpList(req),\n      16: this.getGroupBuyList(req)\n    }\n    let fn\n    if (module_type === 5) {\n      let fns = {\n        1: this.getTeamCourseList(req),\n        2: this.getPersonalCourseList(req),\n        3: this.getSmallCourseList(req)\n      }\n      fn = fns[course_type]\n      console.log('fn', fn)\n    } else {\n      fn = ModuleTypeMapFn[module_type]\n    }\n    return fn\n  }\n  @Effect()\n  getCardList(params: any) {\n    return this.settingMinaApi.getCardList(params).pipe(\n      then((res: any) => {\n        this.list$.commit(() => res.list)\n        this.page$.commit(() => res.page)\n      })\n    )\n  }\n  @Effect()\n  getPersonalCourseList(params: any) {\n    return this.settingMinaApi.getPersonalCourseList(params).pipe(\n      then((res: any) => {\n        this.list$.commit(() => res.list)\n        this.page$.commit(() => res.page)\n      })\n    )\n  }\n  @Effect()\n  getSmallCourseList(params: any) {\n    return this.settingMinaApi.getSmallCourseList(params).pipe(\n      then((res: any) => {\n        this.list$.commit(() => res.list)\n        this.page$.commit(() => res.page)\n      })\n    )\n  }\n  @Effect()\n  getTeamCourseList(params: any) {\n    return this.settingMinaApi.getTeamCourseList(params).pipe(\n      then((res: any) => {\n        this.list$.commit(() => res.list)\n        this.page$.commit(() => res.page)\n      })\n    )\n  }\n  @Effect()\n  getPackageList(params: any) {\n    return this.settingMinaApi.getPackageList(params).pipe(\n      then((res: any) => {\n        let isPermanentSale: any = this.userService\n          .getEnumValue$('package_course.sale_time_is_forever')\n          .snapshot()\n        this.list$.commit(() =>\n          res.list.map(item => {\n            item.sale_time =\n              item.is_permanent_sale === 1\n                ? isPermanentSale[item.is_permanent_sale]\n                : item.sale_time\n            return item\n          })\n        )\n        this.page$.commit(() => res.page)\n      })\n    )\n  }\n  @Effect()\n  getCoachList(params: any) {\n    return this.settingMinaApi.getCoachList(params).pipe(\n      then((res: any) => {\n        this.list$.commit(() => res.list)\n        this.page$.commit(() => res.page)\n      })\n    )\n  }\n  @Effect()\n  getGroupBuyList(params: any) {\n    return this.pluginGroupBuyApi\n      .getGroupBuyList({ activity_status: 99, ...params }) // 99过滤“已结束”“草稿”“已取消”\n      .pipe(\n        then((res: any) => {\n          this.list$.commit(() => res.list)\n          this.page$.commit(() => res.page)\n        })\n      )\n  }\n  @Effect()\n  getCouponList(params: any) {\n    return this.settingMinaApi.getCouponList(params).pipe(\n      then((res: any) => {\n        this.list$.commit(() => res.list)\n        this.page$.commit(() => res.page)\n      })\n    )\n  }\n  @Effect()\n  getWheelList(params: any) {\n    return this.pluginWheelApi\n      .getWheelList({ activity_status: 99, ...params }) // 99过滤“已结束”“草稿”“已取消”\n      .pipe(\n        then((res: any) => {\n          this.list$.commit(() => res.list)\n          this.page$.commit(() => res.page)\n        })\n      )\n  }\n  @Effect()\n  getSignUpList(params: any) {\n    return this.pluginSignUpApi\n      .getSignUpList({ activity_status: 99, ...params }) // 99过滤“已结束”“草稿”“已取消”\n      .pipe(\n        then((res: any) => {\n          this.list$.commit(() => res.list)\n          this.page$.commit(() => res.page)\n        })\n      )\n  }\n  // 限时打折\n  @Effect()\n  getDiscountList(params: any) {\n    return this.discountApi\n      .getLimitDiscountList({ activity_status: 99, ...params })\n      .pipe(\n        then((res: any) => {\n          this.list$.commit(() => res.list)\n          this.page$.commit(() => res.page)\n        })\n      )\n  }\n  // 限时打折\n  @Effect()\n  getSeckillList(params: any) {\n    return this.seckillApi\n      .getLimitSeckillList({ activity_status: 99, ...params })\n      .pipe(\n        then((res: any) => {\n          this.list$.commit(() => res.list)\n          this.page$.commit(() => res.page)\n        })\n      )\n  }\n}\n"],"sourceRoot":""}]}