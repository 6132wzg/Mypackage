{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"tpl-plugin\"],{\"344f\":function(t,e,i){\"use strict\";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"st-mina-panel\",[i(\"div\",{attrs:{slot:\"preview\"},slot:\"preview\"}),i(\"div\",{attrs:{slot:\"actions\"},slot:\"actions\"},[i(\"st-button\",{attrs:{type:\"primary\"}},[t._v(\"保存\")])],1),t._v(\"\\n  ADD TODO\\n\")])},a=[],s=i(\"2877\"),c={},o=Object(s[\"a\"])(c,n,a,!1,null,null,null);e[\"default\"]=o.exports},3971:function(t,e,i){\"use strict\";i.r(e),i.d(e,\"IndexService\",(function(){return h}));var n,a,s,c,o=i(\"d225\"),u=i(\"b0b4\"),r=i(\"9ab4\"),d=i(\"0cd5\"),l=i(\"2cbb\"),p=i(\"df29\"),v=i(\"c170\"),_=i(\"ba07\"),f=i(\"2138\"),h=function(){function t(e,i,n){Object(o[\"a\"])(this,t),this.authService=e,this.signUpApi=i,this.userService=n,this.loading$=new p[\"d\"]({}),this.list$=new p[\"d\"]([]),this.page$=new p[\"d\"]({}),this.pluginInfo$=new p[\"d\"]({}),this.auth$=this.authService.authMap$({add:\"brand:activity:sign_up|add\",checkIn:\"brand:activity:sign_up|check_in\"}),this.activityStatusOptions$=this.userService.getOptions$(\"plugin.activity_status_sign_up_join\",{addAll:!0})}return Object(u[\"a\"])(t,[{key:\"SET_LIST\",value:function(t){this.list$.commit((function(){return t}))}},{key:\"SET_PAGE\",value:function(t){this.page$.commit((function(){return t}))}},{key:\"getList\",value:function(t){var e=this;return this.signUpApi.getSignUpList(t).pipe(Object(v[\"b\"])((function(t){e.SET_LIST(t.list),e.SET_PAGE(t.page)})))}},{key:\"beforeEach\",value:function(t){return this.getList(t.meta.query)}}]),t}();Object(r[\"b\"])([Object(p[\"c\"])(),Object(r[\"d\"])(\"design:type\",Function),Object(r[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(n=\"undefined\"!==typeof _[\"GetSignUpList\"]&&_[\"GetSignUpList\"])?n:Object]),Object(r[\"d\"])(\"design:returntype\",void 0)],h.prototype,\"getList\",null),h=Object(r[\"b\"])([Object(d[\"b\"])(),Object(r[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(a=\"undefined\"!==typeof l[\"a\"]&&l[\"a\"])?a:Object,\"function\"===typeof(s=\"undefined\"!==typeof _[\"c\"]&&_[\"c\"])?s:Object,\"function\"===typeof(c=\"undefined\"!==typeof f[\"a\"]&&f[\"a\"])?c:Object])],h)},\"9aa0\":function(t,e,i){\"use strict\";i.r(e);var n,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"st-panel-layout\",{class:t.bPage()},[i(\"marketing-title\",{attrs:{type:t.TYPE.ACTIVITY}}),i(\"st-panel\",{attrs:{app:\"\"}},[i(\"div\",{attrs:{slot:\"title\"},slot:\"title\"},[t.auth$.add?i(\"st-button\",{attrs:{type:\"primary\",icon:\"add\"},on:{click:t.onAdd}},[t._v(\"\\n        新增活动\\n      \")]):t._e(),t.auth$.checkIn?i(\"st-button\",{staticClass:\"mg-l8\"},[t._v(\"\\n        签到验票\\n      \")]):t._e()],1),i(\"div\",{attrs:{slot:\"actions\"},slot:\"actions\"},[i(\"a-select\",{staticStyle:{width:\"160px\"},attrs:{placeholder:\"选择活动报名状态\",options:t.activityStatusOptions$},on:{change:function(e){return t.onSingleSearch(\"activity_status\",e)}},model:{value:t.$searchQuery.activity_status,callback:function(e){t.$set(t.$searchQuery,\"activity_status\",e)},expression:\"$searchQuery.activity_status\"}}),i(\"st-input-search\",{staticClass:\"mg-l8\",attrs:{placeholder:\"请输入活动报名标题\"},on:{search:function(e){return t.onKeywordsSearch(\"activity_name\",e)}}})],1),i(\"st-table\",{attrs:{scroll:{x:1200},rowKey:\"id\",dataSource:t.list$,columns:t.columns,page:t.page$,loading:t.loading$.getList},on:{change:t.onTableChange},scopedSlots:t._u([{key:\"activity_status\",fn:function(e,n){return i(\"st-text\",{attrs:{status:{error:n.activity_status.id===t.ACTIVITY_STATUS.END,success:n.activity_status.id===t.ACTIVITY_STATUS.PUBLISHED||n.activity_status.id===t.ACTIVITY_STATUS.STARTED,default:n.activity_status.id===t.ACTIVITY_STATUS.DRAFT||n.activity_status.id===t.ACTIVITY_STATUS.CANCEL}}},[t._v(\"\\n        \"+t._s(e.name)+\"\\n      \")])}},{key:\"actions\",fn:function(e,n){return i(\"st-table-actions\",{},[n.auth[\"brand:activity:sign_up|edit\"]?i(\"a\",{on:{click:function(e){return t.onEdit(n)}}},[t._v(\"\\n          编辑\\n        \")]):t._e(),n.auth[\"brand:activity:sign_up|promotion\"]?i(\"a\",{on:{click:function(e){return t.onGeneralize(n)}}},[t._v(\"\\n          推广\\n        \")]):t._e(),n.auth[\"brand:activity:sign_up|end\"]?i(\"a\",{on:{click:function(e){return t.onStop(n)}}},[t._v(\"\\n          取消\\n        \")]):t._e()])}}])})],1)],1)},s=[],c=i(\"aa7d\"),o=i(\"6c94\"),u=i(\"ea3e\"),r=function(t){return[{title:\"活动标题\",dataIndex:\"activity_name\",fixed:\"left\",width:\"140px\",scopedSlots:{customRender:\"activity_name\"}},{title:\"活动开始时间\",dataIndex:\"start_time\",scopedSlots:{customRender:\"start_time\"}},{title:\"活动结束时间\",dataIndex:\"end_time\",scopedSlots:{customRender:\"end_time\"}},{title:\"包含票种\",dataIndex:\"ticket_type_num\",align:\"right\",scopedSlots:{customRender:\"ticket_type_num\"}},{title:\"发布时间\",dataIndex:\"publish_time\",scopedSlots:{customRender:\"publish_time\"}},{title:\"已报名人数\",dataIndex:\"join_people\",align:\"right\",scopedSlots:{customRender:\"join_people\"}},{title:\"活动状态\",dataIndex:\"activity_status\",scopedSlots:{customRender:\"activity_status\"}},{title:\"操作\",dataIndex:\"actions\",width:120,fixed:\"right\",scopedSlots:{customRender:\"actions\"}}]},d=i(\"3971\");(function(t){t[t[\"PUBLISHED\"]=1]=\"PUBLISHED\",t[t[\"STARTED\"]=2]=\"STARTED\",t[t[\"END\"]=3]=\"END\",t[t[\"DRAFT\"]=4]=\"DRAFT\",t[t[\"CANCEL\"]=5]=\"CANCEL\"})(n||(n={}));var l={bem:{bPage:\"page-tpl-plugin-index\"},components:{MarketingTitle:c[\"a\"]},mixins:[u[\"a\"]],serviceInject:function(){return{indexService:d[\"IndexService\"]}},rxState:function(){var t=this.indexService,e=t.activityStatusOptions$,i=t.list$,n=t.loading$,a=t.page$,s=t.auth$;return{activityStatusOptions$:e,list$:i,loading$:n,page$:a,auth$:s}},data:function(){return{TYPE:o[\"a\"],ACTIVITY_STATUS:n}},computed:{columns:r},methods:{onAdd:function(){this.$router.push({path:\"./add\"})},onEdit:function(t){this.$router.push({path:\"./edit\",query:{id:t.id}})}}},p=l,v=i(\"2877\"),_=Object(v[\"a\"])(p,a,s,!1,null,null,null);e[\"default\"]=_.exports},f4e9:function(t,e,i){\"use strict\";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"st-mina-panel\",[i(\"div\",{attrs:{slot:\"preview\"},slot:\"preview\"}),i(\"div\",{attrs:{slot:\"actions\"},slot:\"actions\"},[i(\"st-button\",{attrs:{type:\"primary\"}},[t._v(\"保存\")])],1),t._v(\"\\n  EDIT TODO\\n\")])},a=[],s=i(\"2877\"),c={},o=Object(s[\"a\"])(c,n,a,!1,null,null,null);e[\"default\"]=o.exports}}]);","extractedComments":[]}