{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/common/contract-preview.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/common/contract-preview.vue","mtime":1594718340585},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { dateFilter } from '@/filters/date.filters'\nimport { CONTRACT_TYPE } from '@/constants/setting/contract'\nimport moment from 'moment'\nimport { ContractPreviewService } from './contract-preview.service'\nimport avatar from '@/assets/img/avatar_default_contract.png'\nexport default {\n  bem: {\n    b: 'common-contract-preview'\n  },\n  serviceInject() {\n    return {\n      contractPreviewService: ContractPreviewService\n    }\n  },\n  rxState() {\n    return {\n      info: this.contractPreviewService.info$\n    }\n  },\n  filters: { dateFilter },\n  data() {\n    return {\n      CONTRACT_TYPE,\n      today: moment(),\n      avatar: avatar\n    }\n  },\n  computed: {\n    showAllTh() {\n      switch (this.info.contract_type) {\n        case CONTRACT_TYPE.MEMBER_CARD:\n        case CONTRACT_TYPE.PERSONAL:\n        case CONTRACT_TYPE.PACKAGE:\n        case CONTRACT_TYPE.CABINET:\n        case CONTRACT_TYPE.DEPOSITE:\n          return true\n        default:\n          return false\n      }\n    },\n    showSomeTh() {\n      switch (this.info.contract_type) {\n        case CONTRACT_TYPE.MONEY:\n          return true\n        default:\n          return false\n      }\n    },\n    showSmallCourseTh() {\n      switch (this.info.contract_type) {\n        case CONTRACT_TYPE.SMALL_COURSE:\n          return true\n        default:\n          return false\n      }\n    }\n  },\n  created() {\n    let html = document.querySelector('html')\n    html.className += ' print'\n    let id = this.$searchQuery.id\n    this.getInfo(id)\n  },\n  methods: {\n    getInfo(id) {\n      this.contractPreviewService.getInfo({ id }).subscribe()\n    }\n  }\n}\n",{"version":3,"sources":["contract-preview.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"contract-preview.vue","sourceRoot":"src/views/pages/common","sourcesContent":["<template>\n  <div :class=\"b()\">\n    <!-- :style=\"{ 'padding-top': info.contract_setting.contract_marget + 'mm' }\" -->\n    <header :class=\"b('header')\">\n      <img\n        v-if=\"info.contract_setting && info.contract_setting.is_brand_logo\"\n        :class=\"b('brand-logo')\"\n        :src=\"info.logo_url\"\n        alt=\"brand-logo\"\n      />\n      <h1 :class=\"b('title')\">{{ info.contract_title }}</h1>\n      <h4\n        v-if=\"info.contract_setting && info.contract_setting.is_brand_name\"\n        :class=\"b('brand-name')\"\n      >\n        {{ info.brand_name }}\n      </h4>\n      <div\n        v-if=\"info.contract_setting && info.contract_setting.is_contract_number\"\n        :class=\"b('contract-code')\"\n      >\n        <label class=\"info-label\">合同编号：</label>\n        <span class=\"info-text\">{{ info.contract_number }}</span>\n      </div>\n    </header>\n    <section :class=\"b('basic')\">\n      <div :class=\"b('basic-list')\">\n        <a-row :gutter=\"16\">\n          <a-col\n            :span=\"8\"\n            v-if=\"info.contract_setting && info.contract_setting.is_member_name\"\n          >\n            <div class=\"info-item\">\n              <label class=\"info-label\">姓名：</label>\n              <span class=\"info-text\">{{ info.member_name }}</span>\n            </div>\n          </a-col>\n          <a-col\n            :span=\"8\"\n            v-if=\"\n              info.contract_setting && info.contract_setting.is_member_mobile\n            \"\n          >\n            <div class=\"info-item\">\n              <label class=\"info-label\">联系方式：</label>\n              <template v-if=\"info.is_minors === 1\">\n                <span class=\"info-text\">{{ info.parent_mobile }}</span>\n              </template>\n              <template v-else>\n                <span class=\"info-text\">{{ info.mobile }}</span>\n              </template>\n            </div>\n          </a-col>\n          <!-- <a-col :span=\"8\" v-if=\"info.contract_setting.is_member_card\">\n            <div class=\"info-item\">\n              <label class=\"info-label\">{{ $c('member_card') }}号：</label>\n              <span class=\"info-text\">ST000001</span>\n            </div>\n          </a-col> -->\n          <a-col\n            :span=\"8\"\n            v-if=\"info.contract_setting && info.contract_setting.is_member_sex\"\n          >\n            <div class=\"info-item\">\n              <label class=\"info-label\">性别：</label>\n              <span class=\"info-text\">{{ info.sex }}</span>\n            </div>\n          </a-col>\n\n          <a-col\n            :span=\"8\"\n            v-if=\"\n              info.contract_setting && info.contract_setting.is_salesman_name\n            \"\n          >\n            <div class=\"info-item\">\n              <label class=\"info-label\">销售人员：</label>\n              <span class=\"info-text\">{{ info.sale }}</span>\n            </div>\n          </a-col>\n          <a-col\n            :span=\"12\"\n            v-if=\"\n              info.contract_setting && info.contract_setting.is_member_id_card\n            \"\n          >\n            <div class=\"info-item\">\n              <label class=\"info-label\">身份证：</label>\n              <span class=\"info-text\">{{ info.id_card }}</span>\n            </div>\n          </a-col>\n          <template v-if=\"info.is_minors === 1\">\n            <a-col\n              :span=\"8\"\n              v-if=\"\n                info.contract_setting && info.contract_setting.is_parent_name\n              \"\n            >\n              <div class=\"info-item\">\n                <label class=\"info-label\">家长姓名：</label>\n                <span class=\"info-text\">{{ info.parent_name }}</span>\n              </div>\n            </a-col>\n            <a-col\n              :span=\"8\"\n              v-if=\"\n                info.contract_setting && info.contract_setting.is_parent_mobile\n              \"\n            >\n              <div class=\"info-item\">\n                <label class=\"info-label\">家长联系方式：</label>\n                <span class=\"info-text\">{{ info.parent_mobile }}</span>\n              </div>\n            </a-col>\n            <a-col\n              :span=\"8\"\n              v-if=\"\n                info.contract_setting && info.contract_setting.is_parent_rule\n              \"\n            >\n              <div class=\"info-item\">\n                <label class=\"info-label\">家长身份：</label>\n                <span class=\"info-text\">{{ info.parent_rule }}</span>\n              </div>\n            </a-col>\n            <a-col\n              :span=\"12\"\n              v-if=\"info.contract_setting && info.is_parent_id_card\"\n            >\n              <div class=\"info-item\">\n                <label class=\"info-label\">家长身份证：</label>\n                <span class=\"info-text\">{{ info.parent_id_card }}</span>\n              </div>\n            </a-col>\n          </template>\n          <a-col\n            :span=\"12\"\n            v-if=\"\n              info.contract_setting && info.contract_setting.is_member_address\n            \"\n          >\n            <div class=\"info-item\">\n              <label class=\"info-label\">家庭住址：</label>\n              <span class=\"info-text\">{{ info.living_address }}</span>\n            </div>\n          </a-col>\n        </a-row>\n      </div>\n      <div\n        v-if=\"info.contract_setting && info.contract_setting.is_member_pic\"\n        :class=\"b('avatar')\"\n      >\n        <img :src=\"info.avatar_url || avatar\" alt />\n      </div>\n    </section>\n    <section :class=\"b('product')\">\n      <st-form-table>\n        <thead>\n          <tr v-if=\"showAllTh\">\n            <th>商品名称</th>\n            <th v-if=\"info.contract_type === CONTRACT_TYPE.MEMBER_CARD\">\n              支持入场人数\n            </th>\n            <th>价格</th>\n            <th>优惠</th>\n            <th>小计</th>\n          </tr>\n          <tr v-if=\"showSomeTh\">\n            <th>商品名称</th>\n            <th>小计</th>\n          </tr>\n          <tr v-if=\"showSmallCourseTh\">\n            <th>商品名称</th>\n            <th>购买课时</th>\n            <th>价格</th>\n            <th>优惠</th>\n            <th>小计</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-if=\"info.contract_type === CONTRACT_TYPE.MEMBER_CARD\">\n            <td>{{ info.product_name }}</td>\n            <td>{{ info.support_member_num }}</td>\n            <td>{{ info.price }}元</td>\n            <td>{{ info.discount }}元</td>\n            <td>{{ info.total_amount }}元</td>\n          </tr>\n          <tr v-if=\"info.contract_type === CONTRACT_TYPE.PERSONAL\">\n            <td>{{ info.product_name }}</td>\n            <td>{{ info.price }}元</td>\n            <td>{{ info.discount }}元</td>\n            <td>{{ info.total_amount }}元</td>\n          </tr>\n          <tr v-if=\"info.contract_type === CONTRACT_TYPE.PACKAGE\">\n            <td>{{ info.product_name }}</td>\n            <td>{{ info.price }}元</td>\n            <td>{{ info.discount }}元</td>\n            <td>{{ info.total_amount }}元</td>\n          </tr>\n          <tr v-if=\"info.contract_type === CONTRACT_TYPE.DEPOSITE\">\n            <td>{{ info.product_name }}</td>\n            <td>{{ info.price }}元</td>\n            <td>{{ info.discount }}元</td>\n            <td>{{ info.total_amount }}元</td>\n          </tr>\n          <tr v-if=\"info.contract_type === CONTRACT_TYPE.CABINET\">\n            <td>{{ info.product_name }}</td>\n            <td>{{ info.price }}元</td>\n            <td>{{ info.discount }}元</td>\n            <td>{{ info.total_amount }}元</td>\n          </tr>\n          <tr v-if=\"info.contract_type === CONTRACT_TYPE.MONEY\">\n            <td>{{ info.product_name }}</td>\n            <td>{{ info.total_amount }}元</td>\n          </tr>\n          <tr v-if=\"info.contract_type === CONTRACT_TYPE.SMALL_COURSE\">\n            <td>{{ $c('small_course') }}</td>\n            <td>{{ info.course_num }}</td>\n            <td>{{ info.price }}</td>\n            <td>{{ info.discount }}元</td>\n            <td>{{ info.total_amount }}元</td>\n          </tr>\n        </tbody>\n      </st-form-table>\n    </section>\n    <section :class=\"b('advanced')\">\n      <a-row>\n        <a-col :span=\"8\">\n          <div class=\"info-item\">\n            <label class=\"info-label\">合同总金额：</label>\n            <span class=\"info-text\">{{ info.total_amount }}元</span>\n          </div>\n        </a-col>\n        <!-- <a-col :span=\"8\">\n          <div class=\"info-item\">\n            <label class=\"info-label\">支付方式：</label>\n            <span class=\"info-text\">刷卡9600.00元</span>\n          </div>\n        </a-col> -->\n        <a-col\n          :span=\"8\"\n          v-if=\"info.contract_type === CONTRACT_TYPE.MEMBER_CARD\"\n        >\n          <div class=\"info-item\">\n            <label class=\"info-label\">开卡方式：</label>\n            <span class=\"info-text\">{{ info.open_card_type }}</span>\n          </div>\n        </a-col>\n        <a-col :span=\"8\">\n          <div class=\"info-item\">\n            <label class=\"info-label\">购买门店：</label>\n            <span class=\"info-text\">{{ info.shop_name }}</span>\n          </div>\n        </a-col>\n        <a-col :span=\"8\" v-if=\"info.contract_type === CONTRACT_TYPE.PACKAGE\">\n          <div class=\"info-item\">\n            <label class=\"info-label\">生效方式：</label>\n            <span class=\"info-text\">{{ info.effective_way }}</span>\n          </div>\n        </a-col>\n        <a-col :span=\"24\">\n          <div class=\"info-item\">\n            <label class=\"info-label\">合同有效期：</label>\n            <span class=\"info-text\">{{ info.valid_date }}</span>\n          </div>\n        </a-col>\n        <a-col\n          :span=\"24\"\n          v-if=\"info.contract_setting && info.contract_setting.is_comment\"\n        >\n          <div class=\"info-item\">\n            <label class=\"info-label\">备注：</label>\n            <span class=\"info-text\">{{ info.description }}</span>\n          </div>\n        </a-col>\n        <a-col\n          :span=\"24\"\n          v-if=\"info.contract_setting && info.contract_setting.is_law_content\"\n        >\n          <div class=\"info-item\">\n            <label class=\"info-label\">合同章程：</label>\n            <samp class=\"info-text\">{{ info.law_content }}</samp>\n          </div>\n        </a-col>\n      </a-row>\n    </section>\n\n    <footer :class=\"b('footer')\">\n      <a-row>\n        <a-col :span=\"12\">\n          <div class=\"info-item\">\n            <label class=\"info-label\">会员签名：</label>\n          </div>\n        </a-col>\n        <a-col :span=\"12\">\n          <div class=\"info-item\">\n            <label class=\"info-label\">会所签名：</label>\n          </div>\n        </a-col>\n        <a-col :span=\"12\">\n          <div class=\"info-item\">\n            <label class=\"info-label\">签订日期：</label>\n            <!-- <span class=\"info-text\">{{today | dateFilter('YYYY年M月D日') }}</span> -->\n          </div>\n        </a-col>\n        <a-col :span=\"12\">\n          <div class=\"info-item\">\n            <label class=\"info-label\">签订日期：</label>\n            <!-- <span class=\"info-text\">{{today | dateFilter('YYYY年M月D日') }}</span> -->\n          </div>\n        </a-col>\n      </a-row>\n    </footer>\n  </div>\n</template>\n<script>\nimport { dateFilter } from '@/filters/date.filters'\nimport { CONTRACT_TYPE } from '@/constants/setting/contract'\nimport moment from 'moment'\nimport { ContractPreviewService } from './contract-preview.service'\nimport avatar from '@/assets/img/avatar_default_contract.png'\nexport default {\n  bem: {\n    b: 'common-contract-preview'\n  },\n  serviceInject() {\n    return {\n      contractPreviewService: ContractPreviewService\n    }\n  },\n  rxState() {\n    return {\n      info: this.contractPreviewService.info$\n    }\n  },\n  filters: { dateFilter },\n  data() {\n    return {\n      CONTRACT_TYPE,\n      today: moment(),\n      avatar: avatar\n    }\n  },\n  computed: {\n    showAllTh() {\n      switch (this.info.contract_type) {\n        case CONTRACT_TYPE.MEMBER_CARD:\n        case CONTRACT_TYPE.PERSONAL:\n        case CONTRACT_TYPE.PACKAGE:\n        case CONTRACT_TYPE.CABINET:\n        case CONTRACT_TYPE.DEPOSITE:\n          return true\n        default:\n          return false\n      }\n    },\n    showSomeTh() {\n      switch (this.info.contract_type) {\n        case CONTRACT_TYPE.MONEY:\n          return true\n        default:\n          return false\n      }\n    },\n    showSmallCourseTh() {\n      switch (this.info.contract_type) {\n        case CONTRACT_TYPE.SMALL_COURSE:\n          return true\n        default:\n          return false\n      }\n    }\n  },\n  created() {\n    let html = document.querySelector('html')\n    html.className += ' print'\n    let id = this.$searchQuery.id\n    this.getInfo(id)\n  },\n  methods: {\n    getInfo(id) {\n      this.contractPreviewService.getInfo({ id }).subscribe()\n    }\n  }\n}\n</script>\n"]}]}