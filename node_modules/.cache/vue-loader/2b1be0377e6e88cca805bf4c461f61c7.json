{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/product/course/schedule/personal/personal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/product/course/schedule/personal/personal.vue","mtime":1600926556401},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Calendar from '@/views/biz-components/schedule/calendar'\nimport { PersonalTeamScheduleScheduleService } from '@/views/pages/shop/product/course/schedule/personal/service#/schedule.service'\nimport { PersonalScheduleReserveService } from './service#/reserve.service'\nimport SchedulePersonalAddReserve from '@/views/biz-modals/schedule/personal/add-reserve'\nimport SchedulePersonalReserveInfo from '@/views/biz-modals/schedule/personal/reserve-info'\nimport { cloneDeep } from 'lodash-es'\nimport { PersonalService } from './personal.service'\nimport { TIME_UNIT } from '@/constants/course/team'\nexport default {\n  name: 'TeamSchedule',\n  serviceInject() {\n    return {\n      personalScheduleReserveService: PersonalScheduleReserveService,\n      service: PersonalService\n    }\n  },\n  rxState() {\n    return {\n      cardList: this.personalScheduleReserveService.reserveTable$,\n      auth: this.service.auth$\n    }\n  },\n  modals: {\n    SchedulePersonalAddReserve,\n    SchedulePersonalReserveInfo\n  },\n  components: {\n    Calendar\n  },\n  computed: {\n    startDate() {\n      return this.$searchQuery.start_date || moment().format('YYYY-MM-DD')\n    },\n    isDay() {\n      const start = this.$searchQuery.start_date\n      const end = this.$searchQuery.end_date\n      return start === end\n    }\n  },\n  data() {\n    return {\n      TIME_UNIT\n    }\n  },\n  methods: {\n    onAddReserve(date) {\n      this.$modalRouter.push({\n        name: 'schedule-personal-add-reserve',\n        props: { time: date }\n      })\n    },\n    // 查看详情\n    onDetail(info) {\n      this.$modalRouter.push({\n        name: 'schedule-personal-reserve-info',\n        props: {\n          id: info.id\n        },\n        on: {\n          ok: res => {\n            this.onScheduleChange()\n          }\n        }\n      })\n    },\n    // 管理私教排期\n    onClickSettingSchdule() {\n      let requestParam = cloneDeep(this.$searchQuery)\n      let weekOfday = moment().format('E')\n      requestParam.time_unit = this.TIME_UNIT.TIME_WEEK\n      requestParam.date = moment().format('YYYY-MM-DD')\n      requestParam.start_date = moment()\n        .subtract(weekOfday - 1, 'days')\n        .format('YYYY-MM-DD')\n      requestParam.end_date = moment()\n        .add(7 - weekOfday, 'days')\n        .format('YYYY-MM-DD')\n      this.$router.push({\n        name: 'shop-product-course-personal-table',\n        query: requestParam\n      })\n    },\n    // 进入表格模式\n    onGetTable() {\n      this.$router.push({\n        name: 'shop-product-course-schedule-personal-personal-reserve-table',\n        query: this.$searchQuery\n      })\n    },\n    // 刷新页面\n    onScheduleChange() {\n      this.$router.push({ query: this.$searchQuery })\n    }\n  },\n  watch: {\n    $route(newValue, oldValue) {\n      this.personalScheduleReserveService.getList(this.$searchQuery)\n      this.$refs.calendar.getWeeks(\n        this.$searchQuery.time_unit === this.TIME_UNIT.TIME_WEEK ? 'week' : ''\n      )\n    }\n  }\n}\n",{"version":3,"sources":["personal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"personal.vue","sourceRoot":"src/views/pages/shop/product/course/schedule/personal","sourcesContent":["<template>\n  <div>\n    <calendar\n      @get-table=\"onGetTable\"\n      @detail=\"onDetail\"\n      @add=\"onAddReserve\"\n      addTitle=\"新增预约\"\n      :cardList=\"cardList\"\n      :startDate=\"startDate\"\n      fixed\n      ref=\"calendar\"\n    >\n      <div slot=\"toolbar-left\">\n        <st-button\n          type=\"primary\"\n          v-if=\"auth.get\"\n          class=\"mg-r24\"\n          @click=\"onClickSettingSchdule\"\n        >\n          管理私教工作时间\n        </st-button>\n      </div>\n    </calendar>\n  </div>\n</template>\n\n<script>\nimport Calendar from '@/views/biz-components/schedule/calendar'\nimport { PersonalTeamScheduleScheduleService } from '@/views/pages/shop/product/course/schedule/personal/service#/schedule.service'\nimport { PersonalScheduleReserveService } from './service#/reserve.service'\nimport SchedulePersonalAddReserve from '@/views/biz-modals/schedule/personal/add-reserve'\nimport SchedulePersonalReserveInfo from '@/views/biz-modals/schedule/personal/reserve-info'\nimport { cloneDeep } from 'lodash-es'\nimport { PersonalService } from './personal.service'\nimport { TIME_UNIT } from '@/constants/course/team'\nexport default {\n  name: 'TeamSchedule',\n  serviceInject() {\n    return {\n      personalScheduleReserveService: PersonalScheduleReserveService,\n      service: PersonalService\n    }\n  },\n  rxState() {\n    return {\n      cardList: this.personalScheduleReserveService.reserveTable$,\n      auth: this.service.auth$\n    }\n  },\n  modals: {\n    SchedulePersonalAddReserve,\n    SchedulePersonalReserveInfo\n  },\n  components: {\n    Calendar\n  },\n  computed: {\n    startDate() {\n      return this.$searchQuery.start_date || moment().format('YYYY-MM-DD')\n    },\n    isDay() {\n      const start = this.$searchQuery.start_date\n      const end = this.$searchQuery.end_date\n      return start === end\n    }\n  },\n  data() {\n    return {\n      TIME_UNIT\n    }\n  },\n  methods: {\n    onAddReserve(date) {\n      this.$modalRouter.push({\n        name: 'schedule-personal-add-reserve',\n        props: { time: date }\n      })\n    },\n    // 查看详情\n    onDetail(info) {\n      this.$modalRouter.push({\n        name: 'schedule-personal-reserve-info',\n        props: {\n          id: info.id\n        },\n        on: {\n          ok: res => {\n            this.onScheduleChange()\n          }\n        }\n      })\n    },\n    // 管理私教排期\n    onClickSettingSchdule() {\n      let requestParam = cloneDeep(this.$searchQuery)\n      let weekOfday = moment().format('E')\n      requestParam.time_unit = this.TIME_UNIT.TIME_WEEK\n      requestParam.date = moment().format('YYYY-MM-DD')\n      requestParam.start_date = moment()\n        .subtract(weekOfday - 1, 'days')\n        .format('YYYY-MM-DD')\n      requestParam.end_date = moment()\n        .add(7 - weekOfday, 'days')\n        .format('YYYY-MM-DD')\n      this.$router.push({\n        name: 'shop-product-course-personal-table',\n        query: requestParam\n      })\n    },\n    // 进入表格模式\n    onGetTable() {\n      this.$router.push({\n        name: 'shop-product-course-schedule-personal-personal-reserve-table',\n        query: this.$searchQuery\n      })\n    },\n    // 刷新页面\n    onScheduleChange() {\n      this.$router.push({ query: this.$searchQuery })\n    }\n  },\n  watch: {\n    $route(newValue, oldValue) {\n      this.personalScheduleReserveService.getList(this.$searchQuery)\n      this.$refs.calendar.getWeeks(\n        this.$searchQuery.time_unit === this.TIME_UNIT.TIME_WEEK ? 'week' : ''\n      )\n    }\n  }\n}\n</script>\n"]}]}