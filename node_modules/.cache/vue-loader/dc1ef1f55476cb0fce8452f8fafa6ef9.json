{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/marketing/add-coupon.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/marketing/add-coupon.vue","mtime":1594718339916},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { AddCouponService } from './add-coupon.service'\nimport { columns } from './add-coupon.config'\nimport { cloneDeep } from 'lodash-es'\nimport { COUPON } from '@/constants/marketing/coupon'\nexport default {\n  name: 'ModalMarketingAddCoupon',\n  bem: {\n    add: 'modal-marketing-add-coupon'\n  },\n  serviceInject() {\n    return {\n      addCouponService: AddCouponService\n    }\n  },\n  rxState() {\n    return {\n      loading: this.addCouponService.loading$,\n      list: this.addCouponService.list$\n    }\n  },\n  props: {\n    id: {\n      type: Number\n    }\n  },\n  data() {\n    return {\n      COUPON,\n      show: false,\n      selectedRowKeys: [],\n      selectedRows: []\n    }\n  },\n  computed: {\n    columns\n  },\n  mounted() {\n    this.getList({ coupon_name: '' })\n  },\n  methods: {\n    onGoCouponList() {\n      this.show = false\n      this.$router.push({ path: '/brand/marketing/plugin/coupon/list' })\n    },\n    getList(query) {\n      this.addCouponService.getList(query).subscribe(res => {\n        if (this.list.some(i => i.id === this.id)) {\n          this.selectedRowKeys = [this.id]\n          this.selectedRows = cloneDeep(this.list.filter(i => i.id === this.id))\n        } else {\n          this.selectedRowKeys = []\n          this.selectedRows = []\n        }\n      })\n    },\n    onSearch(data) {\n      this.getList({ coupon_name: data })\n    },\n    onSelectChange(selectedRowKeys, selectedRows) {\n      this.selectedRowKeys = selectedRowKeys\n      this.selectedRows = selectedRows\n    },\n    onSubmit() {\n      this.show = false\n      this.$emit('success', { coupon: this.selectedRows[0] })\n    }\n  }\n}\n",{"version":3,"sources":["add-coupon.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"add-coupon.vue","sourceRoot":"src/views/biz-modals/marketing","sourcesContent":["<template>\n  <st-modal\n    title=\"选择优惠券\"\n    v-model=\"show\"\n    wrapClassName=\"modal-marketing-add-coupon\"\n  >\n    <div :class=\"add('content')\">\n      <div :class=\"add('content-search')\" class=\"mg-b24\">\n        <st-input-search\n          style=\"width: 291px\"\n          @search=\"onSearch\"\n          placeholder=\"输入优惠券名称\"\n        />\n        <st-button type=\"primary\" @click=\"onGoCouponList\">优惠券列表</st-button>\n      </div>\n      <div :class=\"add('table')\" v-scrollBar=\"{ stopPropagation: true }\">\n        <st-table\n          size=\"middle\"\n          :rowSelection=\"{\n            selectedRowKeys: selectedRowKeys,\n            type: 'radio',\n            columnTitle: ' ',\n            onChange: onSelectChange\n          }\"\n          :columns=\"columns\"\n          :dataSource=\"list\"\n          :pagination=\"false\"\n          rowKey=\"id\"\n        >\n          <!-- 可用门店 -->\n          <template slot=\"is_shop_range\" slot-scope=\"text, record\">\n            {{\n              text === COUPON.IS_SHOP_RANGE ? '全门店' : `${record.shop_num}家`\n            }}\n          </template>\n          <!-- 面额 -->\n          <template slot=\"price\" slot-scope=\"text\">{{ text }}元</template>\n          <!-- 门槛 -->\n          <template slot=\"use_type\" slot-scope=\"text, record\">\n            {{\n              text === COUPON.USE_TYPE\n                ? `无门槛`\n                : `满${record.full_price}元使用`\n            }}\n          </template>\n        </st-table>\n      </div>\n    </div>\n    <template slot=\"footer\">\n      <st-button @click=\"show = false\">取消</st-button>\n      <st-button\n        @click=\"onSubmit\"\n        :disabled=\"!selectedRows.length\"\n        type=\"primary\"\n      >\n        确定\n      </st-button>\n    </template>\n  </st-modal>\n</template>\n<script>\nimport { AddCouponService } from './add-coupon.service'\nimport { columns } from './add-coupon.config'\nimport { cloneDeep } from 'lodash-es'\nimport { COUPON } from '@/constants/marketing/coupon'\nexport default {\n  name: 'ModalMarketingAddCoupon',\n  bem: {\n    add: 'modal-marketing-add-coupon'\n  },\n  serviceInject() {\n    return {\n      addCouponService: AddCouponService\n    }\n  },\n  rxState() {\n    return {\n      loading: this.addCouponService.loading$,\n      list: this.addCouponService.list$\n    }\n  },\n  props: {\n    id: {\n      type: Number\n    }\n  },\n  data() {\n    return {\n      COUPON,\n      show: false,\n      selectedRowKeys: [],\n      selectedRows: []\n    }\n  },\n  computed: {\n    columns\n  },\n  mounted() {\n    this.getList({ coupon_name: '' })\n  },\n  methods: {\n    onGoCouponList() {\n      this.show = false\n      this.$router.push({ path: '/brand/marketing/plugin/coupon/list' })\n    },\n    getList(query) {\n      this.addCouponService.getList(query).subscribe(res => {\n        if (this.list.some(i => i.id === this.id)) {\n          this.selectedRowKeys = [this.id]\n          this.selectedRows = cloneDeep(this.list.filter(i => i.id === this.id))\n        } else {\n          this.selectedRowKeys = []\n          this.selectedRows = []\n        }\n      })\n    },\n    onSearch(data) {\n      this.getList({ coupon_name: data })\n    },\n    onSelectChange(selectedRowKeys, selectedRows) {\n      this.selectedRowKeys = selectedRowKeys\n      this.selectedRows = selectedRows\n    },\n    onSubmit() {\n      this.show = false\n      this.$emit('success', { coupon: this.selectedRows[0] })\n    }\n  }\n}\n</script>\n"]}]}