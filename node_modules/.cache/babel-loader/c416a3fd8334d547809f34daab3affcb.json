{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/product/course/manage/package/add-fix-package.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/product/course/manage/package/add-fix-package.vue","mtime":1600926382459},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport moment from 'moment';\nimport { cloneDeep, remove, every, filter, reduce, forEach } from 'lodash-es';\nimport { AddFixPackageService } from \"./add-fix-package.service\";\nimport CourseSelectCourse from '@/views/biz-modals/course/select-course';\nimport StImageUpload from '@/views/biz-components/st/image-upload/image-upload.vue';\nexport default {\n  name: 'ShopFixPackageAdd',\n  serviceInject: function serviceInject() {\n    return {\n      addPackageService: AddFixPackageService\n    };\n  },\n  components: {\n    StImageUpload: StImageUpload\n  },\n  rxState: function rxState() {\n    return {\n      transferUnitList: this.addPackageService.transferUnitList$,\n      sellTypeList: this.addPackageService.sellTypeList$,\n      unitList: this.addPackageService.unitList$,\n      addLoading: this.addPackageService.loading$,\n      coachList: this.addPackageService.coachList$\n    };\n  },\n  modals: {\n    CourseSelectCourse: CourseSelectCourse\n  },\n  bem: {\n    add: 'page-shop-add-fix-package',\n    basic: 'page-shop-add-basic-package'\n  },\n  data: function data() {\n    return {\n      packageData: {\n        // 课程包名称\n        course_name: '',\n        // 售价\n        price: undefined,\n        // 是否支持团体课 0为不支持 1为支持\n        is_team: 0,\n        // 团体课上课范围课程id\n        team_range: [],\n        // 是否支持私教课 0为不支持 1为支持\n        is_personal: 0,\n        // 私教课上课范围课程id course_id私教课课程id coach_level私教课支持预约的教练等级\n        personal_range: [],\n        // 售卖开始时间\n        start_time: '',\n        // 售卖截止时间\n        end_time: '',\n        // 有效时间值\n        valid_time: undefined,\n        // 有效时间单位 1:天 2:月 3:年\n        valid_time_unit: 1,\n        // 允许冻结天数\n        frozen_days: undefined,\n        // 售卖方式\n        sale_mode: [2],\n        // 是否可以转让: 0 不可以 1 可以\n        is_allow_transfer: 0,\n        // 转让费率\n        transfer_rate: undefined,\n        // 转让单位 1:百分比 2:元\n        transfer_unit: 1,\n        // 封面对象\n        image: {\n          image_id: null,\n          image_key: ''\n        },\n        // 课程包介绍\n        intro: '',\n        // 备注\n        remarks: ''\n      },\n      // 课程范围是否未输入过\n      courseIsFirstInput: true,\n      // team course\n      teamCourseList: [],\n      // 备份课程已做的操作\n      teamCourseTotalList: {},\n      // 配置课程表格是否显示\n      teamCourseListIsShow: false,\n      // 配置的课程总计\n      teamCourseTotalObject: {\n        team_times: 0,\n        total: 0\n      },\n      // 批量操作的值\n      teamOperationObject: {\n        team_times: undefined,\n        team_unit_price: undefined\n      },\n      // 操作栏checkbox是否半选\n      teamIndeterminate: false,\n      // 操作栏checkbox是全选\n      teamCheckAll: false,\n      // personal course\n      personalCourseList: [],\n      // 备份课程已做的操作\n      personalCourseTotalList: {},\n      // 缓存最后一次选择的教练，用于阻止用户不选择任何一个\n      personalCoachListHistory: [],\n      // 操作栏教练等级选择的值\n      personalAllOperationCoachList: [],\n      // 配置的课程总计\n      personalCourseTotalObject: {\n        personal_times: 0,\n        total: 0\n      },\n      // 批量操作的值\n      personalOperationObject: {\n        personal_times: undefined,\n        personal_unit_price: undefined\n      },\n      // 配置课程表格是否显示\n      personalCourseListIsShow: false,\n      // 操作栏checkbox是否半选\n      personalIndeterminate: false,\n      // 操作栏checkbox是全选\n      personalCheckAll: false,\n      // 操作栏选择教练等级的dorpdown是否显示\n      coachAllOperationDropdownIsShow: false,\n      // 课程范围是否未配置\n      courseIsNone: false,\n      courseErrorText: '',\n      form: this.$form.createForm(this),\n      start_time: null,\n      end_time: null,\n      endOpen: false,\n      // 是否未传了封面\n      imageIsNone: false,\n      imageErrorText: '',\n      fileList: [],\n      cropperModal: {}\n    };\n  },\n  methods: {\n    // 保存\n    save: function save() {\n      var _this = this;\n\n      this.course_validator();\n      this.image_validator();\n      this.form.validateFieldsAndScroll(function (err, values) {\n        if (!err && !_this.courseIsNone && !_this.imageIsNone) {\n          _this.packageData.course_name = values.course_name;\n          _this.packageData.price = values.price;\n          _this.packageData.valid_time = values.valid_time;\n          _this.packageData.frozen_days = values.frozen_days;\n          _this.packageData.transfer_rate = _this.packageData.is_allow_transfer ? +values.transfer_rate : undefined;\n          _this.packageData.start_time = \"\".concat(_this.start_time.format('YYYY-MM-DD'));\n          _this.packageData.end_time = \"\".concat(_this.end_time.format('YYYY-MM-DD'));\n          _this.packageData.team_range = [];\n\n          _this.teamCourseList.forEach(function (i) {\n            _this.packageData.team_range.push({\n              course_id: i.course_id,\n              team_times: i.team_times,\n              team_unit_price: i.team_unit_price\n            });\n          });\n\n          _this.packageData.personal_range = [];\n\n          _this.personalCourseList.forEach(function (i) {\n            _this.packageData.personal_range.push({\n              course_id: i.course_id,\n              personal_times: i.personal_times,\n              personal_unit_price: i.personal_unit_price,\n              coach_level: cloneDeep(i.coachGradeList)\n            });\n          });\n\n          _this.addPackageService.add(_this.packageData).subscribe(function (res) {\n            _this.$router.push({\n              path: '/shop/product/course/manage/package/list'\n            });\n          });\n        }\n      });\n    },\n    // 保存并上架\n    onsale: function onsale() {\n      var _this2 = this;\n\n      this.course_validator();\n      this.image_validator();\n      this.form.validateFieldsAndScroll(function (err, values) {\n        if (!err && !_this2.courseIsNone && !_this2.imageIsNone) {\n          _this2.packageData.course_name = values.course_name;\n          _this2.packageData.price = values.price;\n          _this2.packageData.valid_time = values.valid_time;\n          _this2.packageData.frozen_days = values.frozen_days;\n          _this2.packageData.transfer_rate = _this2.packageData.is_allow_transfer ? +values.transfer_rate : undefined;\n          _this2.packageData.start_time = \"\".concat(_this2.start_time.format('YYYY-MM-DD'));\n          _this2.packageData.end_time = \"\".concat(_this2.end_time.format('YYYY-MM-DD'));\n\n          _this2.teamCourseList.forEach(function (i) {\n            _this2.packageData.team_range.push({\n              course_id: i.course_id,\n              team_times: i.team_times,\n              team_unit_price: i.team_unit_price\n            });\n          });\n\n          _this2.personalCourseList.forEach(function (i) {\n            _this2.packageData.personal_range.push({\n              course_id: i.course_id,\n              personal_times: i.personal_times,\n              personal_unit_price: i.personal_unit_price,\n              coach_level: cloneDeep(i.coachGradeList)\n            });\n          });\n\n          _this2.addPackageService.addAndOnsale(_this2.packageData).subscribe(function (res) {\n            _this2.$router.push({\n              path: '/shop/product/course/manage/package/list'\n            });\n          });\n        }\n      });\n    },\n    // checkboxChange\n    teamCheckboxChange: function teamCheckboxChange(e) {\n      this.packageData.is_team = +e.target.checked;\n      this.courseIsFirstInput = false;\n      this.teamCourseListIsShow = +e.target.checked;\n    },\n    personalCheckboxChange: function personalCheckboxChange(e) {\n      this.packageData.is_personal = +e.target.checked;\n      this.courseIsFirstInput = false;\n      this.personalCourseListIsShow = +e.target.checked;\n    },\n    // team\n    teamCourseListShow: function teamCourseListShow() {\n      this.teamCourseListIsShow = !this.teamCourseListIsShow;\n    },\n    // personal\n    personalCourseListShow: function personalCourseListShow() {\n      this.personalCourseListIsShow = !this.personalCourseListIsShow;\n    },\n    // 批量操作团课课程包节数\n    times_operation_ok: function times_operation_ok(type) {\n      var _this3 = this;\n\n      if (type === 'team') {\n        forEach(this.teamCourseList, function (o) {\n          if (o.courseChecked) {\n            o.team_times = +_this3.teamOperationObject.team_times; // 备份批量操作的数据\n\n            _this3.teamCourseTotalList[o.course_id] = _this3.teamCourseTotalList[o.course_id] ? _this3.teamCourseTotalList[o.course_id] : {};\n            _this3.teamCourseTotalList[o.course_id].team_times = +_this3.teamOperationObject.team_times;\n          }\n        });\n      } else if (type === 'personal') {\n        forEach(this.personalCourseList, function (o) {\n          if (o.courseChecked) {\n            o.personal_times = +_this3.personalOperationObject.personal_times; // 备份批量操作的数据\n\n            _this3.personalCourseTotalList[o.course_id] = _this3.personalCourseTotalList[o.course_id] ? _this3.personalCourseTotalList[o.course_id] : {};\n            _this3.personalCourseTotalList[o.course_id].personal_times = +_this3.personalOperationObject.personal_times;\n          }\n        });\n      }\n    },\n    // 批量操作团课课程包价格\n    unit_price_operation_ok: function unit_price_operation_ok(type) {\n      var _this4 = this;\n\n      if (type === 'team') {\n        forEach(this.teamCourseList, function (o) {\n          if (o.courseChecked) {\n            o.team_unit_price = +_this4.teamOperationObject.team_unit_price; // 备份批量操作的数据\n\n            _this4.teamCourseTotalList[o.course_id] = _this4.teamCourseTotalList[o.course_id] ? _this4.teamCourseTotalList[o.course_id] : {};\n            _this4.teamCourseTotalList[o.course_id].team_unit_price = +_this4.teamOperationObject.team_unit_price;\n          }\n        });\n      } else if (type === 'personal') {\n        forEach(this.personalCourseList, function (o) {\n          if (o.courseChecked) {\n            o.personal_unit_price = +_this4.personalOperationObject.personal_unit_price; // 备份批量操作的数据\n\n            _this4.personalCourseTotalList[o.course_id] = _this4.personalCourseTotalList[o.course_id] ? _this4.personalCourseTotalList[o.course_id] : {};\n            _this4.personalCourseTotalList[o.course_id].personal_unit_price = +_this4.personalOperationObject.personal_unit_price;\n          }\n        });\n      }\n    },\n    // teamItems input change\n    teamInputChange: function teamInputChange(e, type, id) {\n      this.teamCourseTotalList[id] = this.teamCourseTotalList[id] ? this.teamCourseTotalList[id] : {};\n      this.teamCourseTotalList[id][type] = e;\n    },\n    // personalItems input change\n    personalInputChange: function personalInputChange(e, type, id) {\n      this.personalCourseTotalList[id] = this.personalCourseTotalList[id] ? this.personalCourseTotalList[id] : {};\n      this.personalCourseTotalList[id][type] = e;\n    },\n    // 添加课程\n    addCourse: function addCourse(type) {\n      var that = this;\n\n      if (type === 'team') {\n        this.$modalRouter.push({\n          name: 'course-select-course',\n          props: {\n            type: type,\n            courses: this.teamCourseList\n          },\n          on: {\n            ok: function ok(data) {\n              data.list.forEach(function (i) {\n                i.courseChecked = false;\n                i.team_times = null;\n                i.team_unit_price = null;\n              });\n              forEach(that.teamCourseTotalList, function (value, key) {\n                forEach(data.list, function (innerValue) {\n                  if (+innerValue.course_id === +key) {\n                    innerValue.team_times = value.team_times;\n                    innerValue.team_unit_price = value.team_unit_price;\n                  }\n                }); // 删除teamCourseTotalList里不存在的course_id项\n\n                if (!data.list.some(function (o) {\n                  return +o.course_id === +key;\n                })) {\n                  delete that.teamCourseTotalList[key];\n                }\n              });\n              that.teamCourseList = cloneDeep(data.list);\n            }\n          }\n        });\n      } else if (type === 'personal') {\n        this.$modalRouter.push({\n          name: 'course-select-course',\n          props: {\n            type: type,\n            courses: this.personalCourseList\n          },\n          on: {\n            ok: function ok(data) {\n              var coachGradeList = [];\n              forEach(that.coachList, function (i) {\n                coachGradeList.push(i.id);\n              });\n              data.list.forEach(function (i) {\n                i.courseChecked = false;\n                i.coachGradeList = coachGradeList;\n                i.personal_times = null;\n                i.personal_unit_price = null;\n              });\n              forEach(that.personalCourseTotalList, function (value, key) {\n                forEach(data.list, function (innerValue) {\n                  if (+innerValue.course_id === +key) {\n                    innerValue.coachGradeList = cloneDeep(value.list ? value.list : coachGradeList);\n                    innerValue.personal_times = value.personal_times;\n                    innerValue.personal_unit_price = value.personal_unit_price;\n                  }\n                }); // 删除personalCoachTotalList里不存在的course_id项\n\n                if (!data.list.some(function (o) {\n                  return +o.course_id === +key;\n                })) {\n                  delete that.personalCourseTotalList[key];\n                }\n              }); // 缓存选择的教练等级\n\n              that.personalCoachListHistory = [];\n              data.list.forEach(function (i) {\n                that.personalCoachListHistory.push(i.coachGradeList);\n              });\n              that.personalCourseList = cloneDeep(data.list);\n            }\n          }\n        });\n      }\n    },\n    // 移除课程\n    removeCourseItem: function removeCourseItem(type, id) {\n      if (type === 'team') {\n        var arr = cloneDeep(this.teamCourseList);\n        remove(arr, function (o) {\n          return o.course_id === id;\n        });\n        this.teamCourseList = arr; // 移除备份\n\n        var list = cloneDeep(this.teamCourseTotalList);\n        delete list[id];\n        this.teamCourseTotalList = list;\n      } else if (type === 'personal') {\n        var _arr = cloneDeep(this.personalCourseList);\n\n        remove(_arr, function (o) {\n          return o.course_id === id;\n        });\n        this.personalCourseList = _arr; // 移除备份\n\n        var coachList = cloneDeep(this.personalCourseTotalList);\n        delete coachList[id];\n        this.personalCourseTotalList = coachList;\n      }\n    },\n    // 移除选择的课程\n    removeCourseItems: function removeCourseItems(type) {\n      if (type === 'team') {\n        var arr = cloneDeep(this.teamCourseList);\n        var removeList = remove(arr, function (o) {\n          return o.courseChecked;\n        });\n        this.teamCourseList = arr; // 移除备份\n\n        var list = cloneDeep(this.teamCourseTotalList);\n        removeList.forEach(function (i) {\n          delete list[i.course_id];\n        });\n        this.teamCourseTotalList = list;\n      } else if (type === 'personal') {\n        var _arr2 = cloneDeep(this.personalCourseList);\n\n        var _removeList = remove(_arr2, function (o) {\n          return o.courseChecked;\n        });\n\n        this.personalCourseList = _arr2; // 移除备份\n\n        var coachList = cloneDeep(this.personalCourseTotalList);\n\n        _removeList.forEach(function (i) {\n          delete coachList[i.course_id];\n        });\n\n        this.personalCourseTotalList = coachList;\n      }\n    },\n    // 选择课程\n    courseItemCheckedChange: function courseItemCheckedChange(e, type, index) {\n      if (type === 'team') {\n        this.teamCourseList[index].courseChecked = e.target.checked;\n      } else if (type === 'personal') {\n        this.personalCourseList[index].courseChecked = e.target.checked;\n      }\n    },\n    // 全选\n    checkAllChange: function checkAllChange(type) {\n      var _this5 = this;\n\n      if (type === 'team') {\n        this.teamCourseList.forEach(function (i) {\n          i.courseChecked = !_this5.teamCheckAll;\n        });\n      } else if (type === 'personal') {\n        this.personalCourseList.forEach(function (i) {\n          i.courseChecked = !_this5.personalCheckAll;\n        });\n      }\n    },\n    // item coach checkboxGroup changeEvent\n    coachItemChange: function coachItemChange(e, id, index) {\n      if (!e.length) {\n        this.personalCourseList[index].coachGradeList = this.personalCoachListHistory[index];\n        return;\n      } else {\n        this.personalCoachListHistory[index] = cloneDeep(e);\n      }\n\n      this.personalCourseTotalList[id] = this.personalCourseTotalList[id] ? this.personalCourseTotalList[id] : {};\n      this.personalCourseTotalList[id].list = cloneDeep(e);\n    },\n    coachAllOperationOk: function coachAllOperationOk() {\n      var _this6 = this;\n\n      // 批量设置\n      forEach(this.personalCourseList, function (value) {\n        if (value.courseChecked) {\n          value.coachGradeList = cloneDeep(_this6.personalAllOperationCoachList);\n          _this6.personalCourseTotalList[value.course_id] = _this6.personalCourseTotalList[value.course_id] ? _this6.personalCourseTotalList[value.course_id] : {};\n          _this6.personalCourseTotalList[value.course_id].list = cloneDeep(_this6.personalAllOperationCoachList);\n        }\n      }); // 缓存选择的教练等级\n\n      this.personalCoachListHistory = [];\n      forEach(this.personalCourseList, function (i) {\n        _this6.personalCoachListHistory.push(i.coachGradeList);\n      }); // 清空\n\n      this.personalAllOperationCoachList = []; // 收起\n\n      this.coachAllOperationDropdownIsShow = false;\n    },\n    // course validatorFn  kael\n    course_validator: function course_validator() {\n      this.courseIsFirstInput = false;\n      var teamIsOk = false;\n      var personalIsOk = false; // 校验团课\n\n      if (this.packageData.is_team) {\n        var isOk = false;\n        isOk = this.teamCourseList.every(function (o) {\n          var team_times = isNaN(+o.team_times) ? 0 : +o.team_times;\n          var team_unit_price = isNaN(+o.team_unit_price) ? 0 : +o.team_unit_price;\n          return team_times * team_unit_price !== 0;\n        });\n        teamIsOk = isOk && this.teamCourseList.length;\n      } else {\n        teamIsOk = true;\n      } // 校验私教\n\n\n      if (this.packageData.is_personal) {\n        var _isOk = false;\n        _isOk = this.personalCourseList.every(function (o) {\n          var personal_times = isNaN(+o.personal_times) ? 0 : +o.personal_times;\n          var personal_unit_price = isNaN(+o.personal_unit_price) ? 0 : +o.personal_unit_price;\n          return personal_times * personal_unit_price !== 0;\n        });\n        personalIsOk = _isOk && this.personalCourseList.length;\n      } else {\n        personalIsOk = true;\n      }\n\n      if (teamIsOk && personalIsOk && !(!this.packageData.is_team && !this.packageData.is_personal)) {\n        // 校验通过\n        this.courseIsNone = false;\n        this.courseErrorText = '';\n      } else {\n        // 校验未通过\n        this.courseIsNone = true;\n        this.courseErrorText = '请输入上课范围';\n      }\n    },\n    // image validatorFn\n    image_validator: function image_validator() {\n      if (this.packageData.image.image_key !== '') {\n        // 校验通过\n        this.imageIsNone = false;\n        this.imageErrorText = '';\n      } else {\n        // 校验未通过\n        this.imageIsNone = true;\n        this.imageErrorText = '请上传封面';\n      }\n    },\n    // 转让\n    transfer: function transfer(e) {\n      this.packageData.is_allow_transfer = +e.target.checked; // 重置转让费用的校验\n\n      this.packageData.transfer_rate = undefined;\n      this.form.resetFields(['transfer_rate']);\n    },\n    fileChange: function fileChange(data) {\n      if (data.length) {\n        // 上传\n        this.packageData.image.image_id = data[0].image_id;\n        this.packageData.image.image_key = data[0].image_key;\n        this.imageIsNone = false;\n        this.imageErrorText = '';\n      } else {\n        // 删除\n        this.packageData.image.image_id = null;\n        this.packageData.image.image_key = '';\n        this.imageIsNone = true;\n        this.imageErrorText = '请上传封面';\n      }\n    },\n    transferUnitChange: function transferUnitChange() {\n      this.packageData.transfer_rate = undefined;\n      this.form.setFieldsValue({\n        transfer_rate: undefined\n      });\n    },\n    // start_time validatorFn\n    start_time_validator: function start_time_validator(rule, value, callback) {\n      if (!value) {\n        // eslint-disable-next-line\n        callback('请选择开始售卖时间');\n      } else {\n        // eslint-disable-next-line\n        callback();\n      }\n    },\n    // end_time validatorFn\n    end_time_validator: function end_time_validator(rule, value, callback) {\n      if (!value) {\n        // eslint-disable-next-line\n        callback('请选择结束售卖时间');\n      } else {\n        // eslint-disable-next-line\n        callback();\n      }\n    },\n    // 售卖时间-start\n    start_time_change: function start_time_change(data) {\n      this.start_time = cloneDeep(data);\n    },\n    handleStartOpenChange: function handleStartOpenChange(open) {\n      if (!open) {\n        this.endOpen = true;\n      }\n    },\n    disabledStartDate: function disabledStartDate(startValue) {\n      var endValue = this.end_time;\n\n      if (!endValue) {\n        // 结束时间未选择\n        return startValue.valueOf() < moment().startOf('day').valueOf();\n      }\n\n      var start = endValue.valueOf() > moment().add(30, 'y').valueOf() ? moment(endValue).subtract(30, 'y').valueOf() : moment().startOf('day').valueOf();\n      return startValue.valueOf() < start || startValue.valueOf() > moment(endValue).valueOf();\n    },\n    // 售卖时间-end\n    end_time_change: function end_time_change(data) {\n      this.end_time = cloneDeep(data);\n    },\n    handleEndOpenChange: function handleEndOpenChange(open) {\n      this.endOpen = open;\n    },\n    disabledEndDate: function disabledEndDate(endValue) {\n      var startValue = this.start_time;\n\n      if (!startValue) {\n        // 开始时间未选择\n        return endValue.valueOf() < moment().startOf('day').valueOf();\n      }\n\n      return endValue.valueOf() >= moment(startValue).add(30, 'y').valueOf() || endValue.valueOf() < moment(startValue).valueOf() || endValue.valueOf() < moment().startOf('day').valueOf();\n    },\n    // moment\n    moment: moment\n  },\n  watch: {\n    teamCourseList: {\n      deep: true,\n      handler: function handler(newVal) {\n        var allSelect = false;\n        var allNotSelect = false;\n        allSelect = every(newVal, function (o) {\n          return o.courseChecked;\n        });\n        allNotSelect = every(newVal, function (o) {\n          return !o.courseChecked;\n        });\n        this.teamIndeterminate = !allSelect && !allNotSelect;\n        this.teamCheckAll = newVal.length ? allSelect : false; // 计算团课总计\n\n        this.teamCourseTotalObject.team_times = reduce(newVal, function (sum, o) {\n          var team_times = isNaN(+o.team_times) ? 0 : +o.team_times;\n          return sum + team_times;\n        }, 0);\n        this.teamCourseTotalObject.total = reduce(newVal, function (sum, o) {\n          var team_times = isNaN(+o.team_times) ? 0 : +o.team_times;\n          var team_unit_price = isNaN(+o.team_unit_price) ? 0 : +o.team_unit_price;\n          return sum + team_times * (team_unit_price * 10) / 10;\n        }, 0);\n      }\n    },\n    personalCourseList: {\n      deep: true,\n      handler: function handler(newVal) {\n        var allSelect = false;\n        var allNotSelect = false;\n        allSelect = every(newVal, function (o) {\n          return o.courseChecked;\n        });\n        allNotSelect = every(newVal, function (o) {\n          return !o.courseChecked;\n        });\n        this.personalIndeterminate = !allSelect && !allNotSelect;\n        this.personalCheckAll = newVal.length ? allSelect : false; // 计算私教课总计\n\n        this.personalCourseTotalObject.personal_times = reduce(newVal, function (sum, o) {\n          var personal_times = isNaN(+o.personal_times) ? 0 : +o.personal_times;\n          return sum + personal_times;\n        }, 0);\n        this.personalCourseTotalObject.total = reduce(newVal, function (sum, o) {\n          var personal_times = isNaN(+o.personal_times) ? 0 : +o.personal_times;\n          var personal_unit_price = isNaN(+o.personal_unit_price) ? 0 : +o.personal_unit_price;\n          return sum + personal_times * (personal_unit_price * 10) / 10;\n        }, 0);\n      }\n    }\n  },\n  filters: {\n    // 单课价格统计\n    course_item_total: function course_item_total(times, unit_price) {\n      if (+times && +unit_price) {\n        return +times * (+unit_price * 10) / 10;\n      } else {\n        return 0;\n      }\n    }\n  },\n  computed: {\n    all_total: function all_total() {\n      var teamTotal = this.packageData.is_team ? this.teamCourseTotalObject.total : 0;\n      var personalTotal = this.packageData.is_personal ? this.personalCourseTotalObject.total : 0;\n      return teamTotal + personalTotal;\n    }\n  }\n};",{"version":3,"sources":["add-fix-package.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <st-panel app :class=\"basic()\" class=\"page-shop-add-fix-package\">\n    <st-form :form=\"form\" labelWidth=\"96px\">\n      <a-row :gutter=\"8\">\n        <a-col :lg=\"10\" :xs=\"22\" :offset=\"1\">\n          <st-form-item label=\"课程包名称\" required class=\"mg-t40\">\n            <a-input\n              v-decorator=\"[\n                'course_name',\n                {\n                  rules: [\n                    { required: true, message: '请输入课程包名称' },\n                    { min: 2, message: '最少2个字符' },\n                    { max: 30, message: '最多30个字符' }\n                  ]\n                }\n              ]\"\n              placeholder=\"请输入课程包名称\"\n            />\n          </st-form-item>\n        </a-col>\n      </a-row>\n      <a-row :gutter=\"8\">\n        <a-col :lg=\"23\" :xs=\"22\" :offset=\"1\">\n          <st-form-item\n            :class=\"{ 'st-has-error': !courseIsFirstInput && courseIsNone }\"\n            :help=\"courseErrorText\"\n            required\n          >\n            <template slot=\"label\">\n              上课范围\n              <st-help-tooltip id=\"TSCPCF003\" />\n            </template>\n            <div :class=\"add('course')\">\n              <st-form-table>\n                <colgroup>\n                  <col style=\"width:5%;\" />\n                  <col style=\"width:10%;\" />\n                  <col style=\"width:24%;\" />\n                  <col style=\"width:18%;\" />\n                  <col style=\"width:18%;\" />\n                  <col style=\"width:25%;\" />\n                </colgroup>\n                <tr class=\"bg-thead table-header\">\n                  <th></th>\n                  <th class=\"rightline pd-x16\">课程类型</th>\n                  <th></th>\n                  <th class=\"pd-x16\">节数</th>\n                  <th class=\"pd-x16\">小计</th>\n                  <th></th>\n                </tr>\n                <tbody>\n                  <tr class=\"bg-row-odd checkbox\">\n                    <td class=\"tg-c\">\n                      <a-checkbox @change=\"teamCheckboxChange\" />\n                    </td>\n                    <td class=\"rightline white-nowrap\">\n                      团体课程\n                    </td>\n                    <td></td>\n                    <td>{{ teamCourseTotalObject.team_times }}节</td>\n                    <td>{{ teamCourseTotalObject.total }}元</td>\n                    <td class=\"overflow-hidden\">\n                      <a\n                        class=\"set-course-button\"\n                        @click=\"teamCourseListShow\"\n                        :disabled=\"!packageData.is_team\"\n                        :class=\"{\n                          hide: !(teamCourseListIsShow && packageData.is_team)\n                        }\"\n                        href=\"javascript:void(0)\"\n                      >\n                        配置上课范围&nbsp;&nbsp;\n                        <st-icon class=\"icon-12\" type=\"down-small\" />\n                      </a>\n                    </td>\n                  </tr>\n                  <tr\n                    class=\"bg-row-odd team-course-list-content\"\n                    v-if=\"teamCourseListIsShow && packageData.is_team\"\n                  >\n                    <td\n                      class=\"rightline\"\n                      style=\"background-color:#fff\"\n                      colspan=\"2\"\n                    ></td>\n                    <td class=\"team-course-table\" colspan=\"4\">\n                      <div :class=\"add('team-course-table')\">\n                        <st-form-table>\n                          <colgroup>\n                            <col style=\"width:5%;\" />\n                            <col style=\"width:20%;\" />\n                            <col style=\"width:28%;\" />\n                            <col style=\"width:28%;\" />\n                            <col style=\"width:10%;\" />\n                            <col style=\"width:9%;\" />\n                          </colgroup>\n                          <tr class=\"bg-thead th\">\n                            <th></th>\n                            <th>课程名称</th>\n                            <th>节数</th>\n                            <th>课时费</th>\n                            <th>总价</th>\n                            <th>操作</th>\n                          </tr>\n                          <tbody>\n                            <tr class=\"checkbox border-bottom\">\n                              <td colspan=\"6\" class=\"team-course-add-buton\">\n                                <st-button\n                                  block\n                                  type=\"dashed\"\n                                  icon=\"add\"\n                                  @click=\"addCourse('team')\"\n                                >\n                                  添加团体课程\n                                </st-button>\n                              </td>\n                            </tr>\n                            <tr>\n                              <td colspan=\"6\">\n                                <p\n                                  v-if=\"!teamCourseList.length\"\n                                  class=\"bg-row-even\"\n                                  style=\"margin: 0;text-align:center;\"\n                                >\n                                  无数据\n                                </p>\n                                <!-- 在AForm组件里用自定义指令时，需要加上v-decorator,值不能重复 -->\n                                <ul\n                                  class=\"team-course-content-table\"\n                                  v-if=\"teamCourseList.length\"\n                                  v-scrollBar=\"{ stopPropagation: true }\"\n                                  v-decorator=\"['teamCourseList2']\"\n                                >\n                                  <li\n                                    class=\"checkbox border-bottom\"\n                                    :class=\"{\n                                      'bg-row-odd': index % 2 !== 0,\n                                      'bg-row-even': index % 2 === 0\n                                    }\"\n                                    v-for=\"(i, index) in teamCourseList\"\n                                    :key=\"i.course_id\"\n                                  >\n                                    <div class=\"tg-c\">\n                                      <a-checkbox\n                                        :checked=\"i.courseChecked\"\n                                        @change=\"\n                                          courseItemCheckedChange(\n                                            $event,\n                                            'team',\n                                            index\n                                          )\n                                        \"\n                                      />\n                                    </div>\n                                    <div>{{ i.course_name }}</div>\n                                    <div>\n                                      <st-input-number\n                                        :min=\"1\"\n                                        :max=\"99999\"\n                                        @change=\"\n                                          teamInputChange(\n                                            $event,\n                                            'team_times',\n                                            i.course_id\n                                          )\n                                        \"\n                                        v-model=\"i.team_times\"\n                                      >\n                                        <template slot=\"addonAfter\">\n                                          节\n                                        </template>\n                                      </st-input-number>\n                                    </div>\n                                    <div>\n                                      <st-input-number\n                                        :min=\"0\"\n                                        :max=\"999999.9\"\n                                        @change=\"\n                                          teamInputChange(\n                                            $event,\n                                            'team_unit_price',\n                                            i.course_id\n                                          )\n                                        \"\n                                        v-model=\"i.team_unit_price\"\n                                        :float=\"true\"\n                                      >\n                                        <template slot=\"addonAfter\">\n                                          元\n                                        </template>\n                                      </st-input-number>\n                                    </div>\n                                    <div>\n                                      {{\n                                        i.team_times\n                                          | course_item_total(i.team_unit_price)\n                                      }}\n                                    </div>\n                                    <div>\n                                      <a\n                                        @click=\"\n                                          removeCourseItem('team', i.course_id)\n                                        \"\n                                        href=\"javascript:void(0)\"\n                                      >\n                                        删除\n                                      </a>\n                                    </div>\n                                  </li>\n                                </ul>\n                              </td>\n                            </tr>\n                            <tr class=\"bg-thead checkbox topline\">\n                              <td class=\"tg-c\">\n                                <a-checkbox\n                                  :indeterminate=\"teamIndeterminate\"\n                                  @change=\"checkAllChange('team')\"\n                                  :checked=\"teamCheckAll\"\n                                />\n                              </td>\n                              <td>批量操作</td>\n                              <td class=\"pr-24\">\n                                <st-input-number\n                                  :min=\"1\"\n                                  :max=\"99999\"\n                                  v-model=\"teamOperationObject.team_times\"\n                                >\n                                  <a\n                                    :disabled=\"!+teamOperationObject.team_times\"\n                                    href=\"javascript:void(0)\"\n                                    slot=\"addonAfter\"\n                                    @click=\"times_operation_ok('team')\"\n                                  >\n                                    确定\n                                  </a>\n                                </st-input-number>\n                              </td>\n                              <td class=\"pr-24\">\n                                <st-input-number\n                                  :min=\"0\"\n                                  :max=\"999999.9\"\n                                  v-model=\"teamOperationObject.team_unit_price\"\n                                  :float=\"true\"\n                                >\n                                  <a\n                                    :disabled=\"\n                                      !+teamOperationObject.team_unit_price\n                                    \"\n                                    href=\"javascript:void(0)\"\n                                    slot=\"addonAfter\"\n                                    @click=\"unit_price_operation_ok('team')\"\n                                  >\n                                    确定\n                                  </a>\n                                </st-input-number>\n                              </td>\n                              <td>\n                                {{\n                                  teamOperationObject.team_times\n                                    | course_item_total(\n                                      teamOperationObject.team_unit_price\n                                    )\n                                }}\n                              </td>\n                              <td>\n                                <a\n                                  @click=\"removeCourseItems('team')\"\n                                  href=\"javascript:void(0)\"\n                                >\n                                  删除\n                                </a>\n                              </td>\n                            </tr>\n                          </tbody>\n                        </st-form-table>\n                      </div>\n                    </td>\n                  </tr>\n                  <tr class=\"bg-row-top checkbox topline\">\n                    <td class=\"tg-c\">\n                      <a-checkbox @change=\"personalCheckboxChange\" />\n                    </td>\n                    <td class=\"rightline\">私教课程</td>\n                    <td></td>\n                    <td>{{ personalCourseTotalObject.personal_times }}节</td>\n                    <td>{{ personalCourseTotalObject.total }}元</td>\n                    <td class=\"overflow-hidden\">\n                      <a\n                        class=\"set-course-button\"\n                        @click=\"personalCourseListShow\"\n                        :disabled=\"!packageData.is_personal\"\n                        :class=\"{\n                          hide: !(\n                            personalCourseListIsShow && packageData.is_personal\n                          )\n                        }\"\n                        href=\"javascript:void(0)\"\n                      >\n                        配置上课范围&nbsp;&nbsp;\n                        <st-icon class=\"icon-12\" type=\"down-small\" />\n                      </a>\n                    </td>\n                  </tr>\n                  <tr\n                    class=\"bg-row-even personal-course-list-content\"\n                    v-if=\"personalCourseListIsShow && packageData.is_personal\"\n                  >\n                    <td class=\"rightline\" colspan=\"2\"></td>\n                    <td class=\"personal-course-table\" colspan=\"4\">\n                      <div :class=\"add('personal-course-table')\">\n                        <table>\n                          <colgroup>\n                            <col style=\"width:5%;\" />\n                            <col style=\"width:20%;\" />\n                            <col style=\"width:18%;\" />\n                            <col style=\"width:18%;\" />\n                            <col style=\"width:23%;\" />\n                            <col style=\"width:8%;\" />\n                            <col style=\"width:8%;\" />\n                          </colgroup>\n                          <tr class=\"bg-thead th\">\n                            <th></th>\n                            <th>课程名称</th>\n                            <th>节数</th>\n                            <th>课时费</th>\n                            <th class=\"tg-c\">\n                              支持预约的{{ $c('coach') }}等级\n                            </th>\n                            <th>总价</th>\n                            <th>操作</th>\n                          </tr>\n                          <tbody>\n                            <tr class=\"checkbox border-bottom\">\n                              <td colspan=\"7\" class=\"personal-course-add-buton\">\n                                <st-button\n                                  block\n                                  type=\"dashed\"\n                                  icon=\"add\"\n                                  @click=\"addCourse('personal')\"\n                                >\n                                  添加私教课程\n                                </st-button>\n                              </td>\n                            </tr>\n                            <tr>\n                              <td colspan=\"7\">\n                                <p\n                                  v-if=\"!personalCourseList.length\"\n                                  class=\"bg-row-even\"\n                                  style=\"margin: 0;text-align:center;\"\n                                >\n                                  无数据\n                                </p>\n                                <!-- 在AForm组件里用自定义指令时，需要加上v-decorator,值不能重复 -->\n                                <ul\n                                  class=\"personal-course-content-table\"\n                                  v-if=\"personalCourseList.length\"\n                                  v-scrollBar=\"{ stopPropagation: true }\"\n                                  v-decorator=\"['personalCourseList1']\"\n                                >\n                                  <li\n                                    class=\"checkbox border-bottom\"\n                                    :class=\"{\n                                      'bg-row-odd': index % 2 !== 0,\n                                      'bg-row-even': index % 2 === 0\n                                    }\"\n                                    v-for=\"(item, index) in personalCourseList\"\n                                    :key=\"item.course_id\"\n                                  >\n                                    <div class=\"tg-c\">\n                                      <a-checkbox\n                                        :checked=\"item.courseChecked\"\n                                        @change=\"\n                                          courseItemCheckedChange(\n                                            $event,\n                                            'personal',\n                                            index\n                                          )\n                                        \"\n                                      />\n                                    </div>\n                                    <div>{{ item.course_name }}</div>\n                                    <div>\n                                      <st-input-number\n                                        :min=\"1\"\n                                        :max=\"99999\"\n                                        @change=\"\n                                          personalInputChange(\n                                            $event,\n                                            'personal_times',\n                                            item.course_id\n                                          )\n                                        \"\n                                        v-model=\"item.personal_times\"\n                                      >\n                                        <template slot=\"addonAfter\">\n                                          节\n                                        </template>\n                                      </st-input-number>\n                                    </div>\n                                    <div>\n                                      <st-input-number\n                                        :min=\"0\"\n                                        :max=\"999999.9\"\n                                        @change=\"\n                                          personalInputChange(\n                                            $event,\n                                            'personal_unit_price',\n                                            item.course_id\n                                          )\n                                        \"\n                                        v-model=\"item.personal_unit_price\"\n                                        :float=\"true\"\n                                      >\n                                        <template slot=\"addonAfter\">\n                                          元\n                                        </template>\n                                      </st-input-number>\n                                    </div>\n                                    <div>\n                                      <a-dropdown\n                                        placement=\"bottomRight\"\n                                        :trigger=\"['click']\"\n                                      >\n                                        <a href=\"javascript:void(0)\">\n                                          {{\n                                            item.coachGradeList.length ===\n                                            coachList.length\n                                              ? '全部'\n                                              : `${item.coachGradeList.length}个`\n                                          }}等级&nbsp;&nbsp;\n                                          <st-icon\n                                            class=\"icon-12\"\n                                            type=\"down-small\"\n                                          />\n                                        </a>\n                                        <a-checkbox-group\n                                          :class=\"basic(`personal-dropdown`)\"\n                                          v-model=\"item.coachGradeList\"\n                                          @change=\"\n                                            coachItemChange(\n                                              $event,\n                                              item.course_id,\n                                              index\n                                            )\n                                          \"\n                                          slot=\"overlay\"\n                                        >\n                                          <!-- 在AForm组件里用自定义指令时，需要加上v-decorator,值不能重复 -->\n                                          <ul\n                                            class=\"personal-course-coach-grade-dropdown\"\n                                            v-scrollBar=\"{\n                                              stopPropagation: true\n                                            }\"\n                                            v-decorator=\"[\n                                              `personalCourseListCoachGrade${index}`\n                                            ]\"\n                                          >\n                                            <li\n                                              v-for=\"(coachItem,\n                                              coachIndex) in coachList\"\n                                              :key=\"coachIndex\"\n                                            >\n                                              <a-checkbox :value=\"coachItem.id\">\n                                                {{ coachItem.setting_name }}\n                                              </a-checkbox>\n                                            </li>\n                                          </ul>\n                                        </a-checkbox-group>\n                                      </a-dropdown>\n                                    </div>\n                                    <div>\n                                      {{\n                                        item.personal_times\n                                          | course_item_total(\n                                            item.personal_unit_price\n                                          )\n                                      }}\n                                    </div>\n                                    <div>\n                                      <a\n                                        @click=\"\n                                          removeCourseItem(\n                                            'personal',\n                                            item.course_id\n                                          )\n                                        \"\n                                        href=\"javascript:void(0)\"\n                                      >\n                                        删除\n                                      </a>\n                                    </div>\n                                  </li>\n                                </ul>\n                              </td>\n                            </tr>\n                            <tr class=\"bg-thead checkbox topline\">\n                              <td class=\"tg-c\">\n                                <a-checkbox\n                                  :indeterminate=\"personalIndeterminate\"\n                                  @change=\"checkAllChange('personal')\"\n                                  :checked=\"personalCheckAll\"\n                                />\n                              </td>\n                              <td>批量操作</td>\n                              <td class=\"pr-24\">\n                                <st-input-number\n                                  :min=\"1\"\n                                  :max=\"99999\"\n                                  v-model=\"\n                                    personalOperationObject.personal_times\n                                  \"\n                                >\n                                  <a\n                                    :disabled=\"\n                                      !+personalOperationObject.personal_times\n                                    \"\n                                    href=\"javascript:void(0)\"\n                                    slot=\"addonAfter\"\n                                    @click=\"times_operation_ok('personal')\"\n                                  >\n                                    确定\n                                  </a>\n                                </st-input-number>\n                              </td>\n                              <td class=\"pr-24\">\n                                <st-input-number\n                                  :min=\"0\"\n                                  :max=\"999999.9\"\n                                  v-model=\"\n                                    personalOperationObject.personal_unit_price\n                                  \"\n                                  :float=\"true\"\n                                >\n                                  <a\n                                    :disabled=\"\n                                      !+personalOperationObject.personal_unit_price\n                                    \"\n                                    href=\"javascript:void(0)\"\n                                    slot=\"addonAfter\"\n                                    @click=\"unit_price_operation_ok('personal')\"\n                                  >\n                                    确定\n                                  </a>\n                                </st-input-number>\n                              </td>\n                              <td class=\"tg-c\">\n                                <a-dropdown\n                                  placement=\"bottomRight\"\n                                  :trigger=\"['click']\"\n                                  v-model=\"coachAllOperationDropdownIsShow\"\n                                >\n                                  <a href=\"javascript:void(0)\">\n                                    批量设置等级&nbsp;&nbsp;\n                                    <st-icon\n                                      class=\"icon-12\"\n                                      type=\"down-small\"\n                                    />\n                                  </a>\n                                  <a-checkbox-group\n                                    :class=\"basic(`personal-dropdown`)\"\n                                    v-model=\"personalAllOperationCoachList\"\n                                    class=\"all\"\n                                    slot=\"overlay\"\n                                  >\n                                    <!-- 在AForm组件里用自定义指令时，需要加上v-decorator,值不能重复 -->\n                                    <ul\n                                      class=\"personal-course-coach-grade-dropdown\"\n                                      v-scrollBar=\"{ stopPropagation: true }\"\n                                      v-decorator=\"[\n                                        'personalCourseListCoachGradeAll'\n                                      ]\"\n                                    >\n                                      <li\n                                        v-for=\"(coachItem,\n                                        coachIndex) in coachList\"\n                                        :key=\"coachIndex\"\n                                      >\n                                        <a-checkbox :value=\"coachItem.id\">\n                                          {{ coachItem.setting_name }}\n                                        </a-checkbox>\n                                      </li>\n                                    </ul>\n                                    <div\n                                      class=\"personal-course-coach-grade-dropdown-button\"\n                                    >\n                                      <a\n                                        href=\"javascript:void(0)\"\n                                        :disabled=\"\n                                          !personalAllOperationCoachList.length\n                                        \"\n                                        @click=\"coachAllOperationOk\"\n                                      >\n                                        确定\n                                      </a>\n                                    </div>\n                                  </a-checkbox-group>\n                                </a-dropdown>\n                              </td>\n                              <td>\n                                {{\n                                  personalOperationObject.personal_times\n                                    | course_item_total(\n                                      personalOperationObject.personal_unit_price\n                                    )\n                                }}\n                              </td>\n                              <td>\n                                <a\n                                  @click=\"removeCourseItems('personal')\"\n                                  href=\"javascript:void(0)\"\n                                >\n                                  删除\n                                </a>\n                              </td>\n                            </tr>\n                          </tbody>\n                        </table>\n                      </div>\n                    </td>\n                  </tr>\n                </tbody>\n              </st-form-table>\n            </div>\n          </st-form-item>\n        </a-col>\n      </a-row>\n      <a-row :gutter=\"8\">\n        <a-col :lg=\"10\" :xs=\"22\" :offset=\"1\">\n          <st-form-item label=\"总价\">{{ all_total }}元</st-form-item>\n        </a-col>\n      </a-row>\n      <a-row :gutter=\"8\">\n        <a-col :lg=\"10\" :xs=\"22\" :offset=\"1\">\n          <st-form-item label=\"售卖价格\" required>\n            <st-input-number\n              :min=\"0\"\n              placeholder=\"请输入售卖价格\"\n              :max=\"999999.9\"\n              v-decorator=\"[\n                'price',\n                { rules: [{ required: true, message: '请输入售卖价格' }] }\n              ]\"\n              :float=\"true\"\n            >\n              <template slot=\"addonAfter\">\n                元\n              </template>\n            </st-input-number>\n          </st-form-item>\n        </a-col>\n      </a-row>\n      <a-row :gutter=\"8\">\n        <a-col :lg=\"10\" :xs=\"22\" :offset=\"1\">\n          <st-form-item class=\"mg-b0\" label=\"支持售卖时间\" required>\n            <div :class=\"basic('saletime')\">\n              <a-form-item class=\"page-a-form\">\n                <a-date-picker\n                  style=\"width: 100%;\"\n                  :disabledDate=\"disabledStartDate\"\n                  v-decorator=\"[\n                    'start_time',\n                    { rules: [{ validator: start_time_validator }] }\n                  ]\"\n                  format=\"YYYY-MM-DD\"\n                  placeholder=\"开始时间\"\n                  :showToday=\"false\"\n                  @openChange=\"handleStartOpenChange\"\n                  @change=\"start_time_change\"\n                />\n              </a-form-item>\n              <span>~</span>\n              <a-form-item class=\"page-a-form\">\n                <a-date-picker\n                  :disabledDate=\"disabledEndDate\"\n                  v-decorator=\"[\n                    'end_time',\n                    { rules: [{ validator: end_time_validator }] }\n                  ]\"\n                  format=\"YYYY-MM-DD\"\n                  placeholder=\"结束时间\"\n                  :showToday=\"false\"\n                  :open=\"endOpen\"\n                  @openChange=\"handleEndOpenChange\"\n                  @change=\"end_time_change\"\n                />\n              </a-form-item>\n            </div>\n          </st-form-item>\n        </a-col>\n      </a-row>\n      <a-row :gutter=\"8\">\n        <a-col :lg=\"10\" :xs=\"22\" :offset=\"1\">\n          <st-form-item label=\"有效时间\" required>\n            <st-input-number\n              placeholder=\"请输入有效时间\"\n              :min=\"1\"\n              :max=\"99999\"\n              v-decorator=\"[\n                'valid_time',\n                {\n                  initialValue: null,\n                  rules: [{ required: true, message: '请输入有效时间' }]\n                }\n              ]\"\n            >\n              <a-select\n                v-model=\"packageData.valid_time_unit\"\n                slot=\"addonAfter\"\n                style=\"width: 60px\"\n              >\n                <a-select-option\n                  v-for=\"(item, index) in unitList\"\n                  :value=\"item.value\"\n                  :key=\"index\"\n                >\n                  {{ item.label }}\n                </a-select-option>\n              </a-select>\n            </st-input-number>\n          </st-form-item>\n        </a-col>\n      </a-row>\n      <a-row :gutter=\"8\">\n        <a-col :lg=\"10\" :xs=\"22\" :offset=\"1\">\n          <st-form-item label=\"允许冻结天数\" required>\n            <st-input-number\n              placeholder=\"请输入允许冻结天数\"\n              :min=\"1\"\n              :max=\"99999\"\n              v-decorator=\"[\n                'frozen_days',\n                { rules: [{ required: true, message: '请输入允许冻结天数' }] }\n              ]\"\n            >\n              <template slot=\"addonAfter\">\n                天\n              </template>\n            </st-input-number>\n          </st-form-item>\n        </a-col>\n      </a-row>\n      <a-row :gutter=\"8\">\n        <a-col :lg=\"10\" :xs=\"22\" :offset=\"1\">\n          <st-form-item label=\"转让设置\">\n            <div :class=\"basic('transfer')\">\n              <a-checkbox\n                :class=\"basic('transfer-checkbox')\"\n                @change=\"transfer\"\n              >\n                支持转让\n              </a-checkbox>\n              <st-input-number\n                :min=\"0\"\n                :max=\"packageData.transfer_unit === 1 ? 100 : 999999.9\"\n                v-decorator=\"[\n                  'transfer_rate',\n                  {\n                    rules: [\n                      {\n                        required: packageData.is_allow_transfer !== 0,\n                        message: '请输入转让值数值'\n                      }\n                    ]\n                  }\n                ]\"\n                :disabled=\"packageData.is_allow_transfer === 0\"\n                :float=\"packageData.transfer_unit === 2\"\n                :class=\"basic('transfer-input')\"\n                style=\"padding-right:0;\"\n              >\n                <a-select\n                  :disabled=\"packageData.is_allow_transfer === 0\"\n                  slot=\"addonAfter\"\n                  @change=\"transferUnitChange\"\n                  v-model=\"packageData.transfer_unit\"\n                  style=\"width: 60px\"\n                >\n                  <a-select-option\n                    v-for=\"item in transferUnitList\"\n                    :key=\"item.value\"\n                    :value=\"+item.value\"\n                  >\n                    {{ item.label }}\n                  </a-select-option>\n                </a-select>\n              </st-input-number>\n            </div>\n          </st-form-item>\n        </a-col>\n      </a-row>\n      <a-row :gutter=\"8\">\n        <a-col :lg=\"10\" :xs=\"22\" :offset=\"1\">\n          <st-form-item label=\"售卖方式\" required>\n            <a-checkbox-group v-model=\"packageData.sale_mode\">\n              <a-checkbox\n                v-for=\"item in sellTypeList\"\n                :key=\"item.value\"\n                :disabled=\"item.value === 2\"\n                :value=\"item.value\"\n              >\n                {{ item.label }}\n              </a-checkbox>\n            </a-checkbox-group>\n          </st-form-item>\n        </a-col>\n      </a-row>\n      <a-row :gutter=\"8\">\n        <a-col :lg=\"22\" :xs=\"22\" :offset=\"1\">\n          <st-form-item\n            validate-status=\"error\"\n            :help=\"imageErrorText\"\n            label=\"封面\"\n            required\n          >\n            <div :class=\"basic('upload')\">\n              <st-image-upload\n                :class=\"basic('st-upload')\"\n                :cropperModal=\"cropperModal\"\n                :sizeLimit=\"5\"\n                :list=\"fileList\"\n                @change=\"fileChange\"\n              >\n                <i :class=\"basic('st-upload-icon')\"></i>\n                <div :class=\"basic('st-upload-text')\">上传封面</div>\n              </st-image-upload>\n              <div :class=\"basic('upload-describe')\">\n                <p>\n                  图片格式必须为:png,bmp,jpeg,jpg,gif,建议使用png格式图片,以保存最佳效果\n                </p>\n                <p>建议尺寸为750像素X422像素,不可大于2m</p>\n              </div>\n            </div>\n          </st-form-item>\n        </a-col>\n      </a-row>\n      <a-row :gutter=\"8\">\n        <a-col :lg=\"10\" :xs=\"22\" :offset=\"1\">\n          <st-form-item label=\"课程包介绍\">\n            <st-textarea\n              v-model=\"packageData.intro\"\n              maxlength=\"500\"\n              class=\"page-content-card-textarea\"\n              placeholder=\"请输入课程包介绍\"\n            />\n          </st-form-item>\n        </a-col>\n      </a-row>\n      <a-row :gutter=\"8\">\n        <a-col :lg=\"10\" :xs=\"22\" :offset=\"1\">\n          <st-form-item label=\"备注\">\n            <st-textarea\n              v-model=\"packageData.remarks\"\n              maxlength=\"500\"\n              class=\"page-content-card-textarea\"\n              placeholder=\"请输入备注\"\n            />\n          </st-form-item>\n        </a-col>\n      </a-row>\n      <a-row :gutter=\"8\">\n        <a-col :lg=\"10\" :xs=\"22\" :offset=\"1\">\n          <st-form-item label=\" \">\n            <st-button\n              type=\"primary\"\n              class=\"mr-8\"\n              @click=\"save\"\n              :loading=\"addLoading.add\"\n            >\n              保存\n            </st-button>\n            <st-button @click=\"onsale\" :loading=\"addLoading.addAndOnsale\">\n              保存并上架\n            </st-button>\n          </st-form-item>\n        </a-col>\n      </a-row>\n    </st-form>\n  </st-panel>\n</template>\n<script>\nimport moment from 'moment'\nimport { cloneDeep, remove, every, filter, reduce, forEach } from 'lodash-es'\nimport { AddFixPackageService } from './add-fix-package.service'\nimport CourseSelectCourse from '@/views/biz-modals/course/select-course'\nimport StImageUpload from '@/views/biz-components/st/image-upload/image-upload.vue'\nexport default {\n  name: 'ShopFixPackageAdd',\n  serviceInject() {\n    return {\n      addPackageService: AddFixPackageService\n    }\n  },\n  components: {\n    StImageUpload\n  },\n  rxState() {\n    return {\n      transferUnitList: this.addPackageService.transferUnitList$,\n      sellTypeList: this.addPackageService.sellTypeList$,\n      unitList: this.addPackageService.unitList$,\n      addLoading: this.addPackageService.loading$,\n      coachList: this.addPackageService.coachList$\n    }\n  },\n  modals: {\n    CourseSelectCourse\n  },\n  bem: {\n    add: 'page-shop-add-fix-package',\n    basic: 'page-shop-add-basic-package'\n  },\n  data() {\n    return {\n      packageData: {\n        // 课程包名称\n        course_name: '',\n        // 售价\n        price: undefined,\n        // 是否支持团体课 0为不支持 1为支持\n        is_team: 0,\n        // 团体课上课范围课程id\n        team_range: [],\n        // 是否支持私教课 0为不支持 1为支持\n        is_personal: 0,\n        // 私教课上课范围课程id course_id私教课课程id coach_level私教课支持预约的教练等级\n        personal_range: [],\n        // 售卖开始时间\n        start_time: '',\n        // 售卖截止时间\n        end_time: '',\n        // 有效时间值\n        valid_time: undefined,\n        // 有效时间单位 1:天 2:月 3:年\n        valid_time_unit: 1,\n        // 允许冻结天数\n        frozen_days: undefined,\n        // 售卖方式\n        sale_mode: [2],\n        // 是否可以转让: 0 不可以 1 可以\n        is_allow_transfer: 0,\n        // 转让费率\n        transfer_rate: undefined,\n        // 转让单位 1:百分比 2:元\n        transfer_unit: 1,\n        // 封面对象\n        image: {\n          image_id: null,\n          image_key: ''\n        },\n        // 课程包介绍\n        intro: '',\n        // 备注\n        remarks: ''\n      },\n      // 课程范围是否未输入过\n      courseIsFirstInput: true,\n      // team course\n      teamCourseList: [],\n      // 备份课程已做的操作\n      teamCourseTotalList: {},\n      // 配置课程表格是否显示\n      teamCourseListIsShow: false,\n      // 配置的课程总计\n      teamCourseTotalObject: {\n        team_times: 0,\n        total: 0\n      },\n      // 批量操作的值\n      teamOperationObject: {\n        team_times: undefined,\n        team_unit_price: undefined\n      },\n      // 操作栏checkbox是否半选\n      teamIndeterminate: false,\n      // 操作栏checkbox是全选\n      teamCheckAll: false,\n      // personal course\n      personalCourseList: [],\n      // 备份课程已做的操作\n      personalCourseTotalList: {},\n      // 缓存最后一次选择的教练，用于阻止用户不选择任何一个\n      personalCoachListHistory: [],\n      // 操作栏教练等级选择的值\n      personalAllOperationCoachList: [],\n      // 配置的课程总计\n      personalCourseTotalObject: {\n        personal_times: 0,\n        total: 0\n      },\n      // 批量操作的值\n      personalOperationObject: {\n        personal_times: undefined,\n        personal_unit_price: undefined\n      },\n      // 配置课程表格是否显示\n      personalCourseListIsShow: false,\n      // 操作栏checkbox是否半选\n      personalIndeterminate: false,\n      // 操作栏checkbox是全选\n      personalCheckAll: false,\n      // 操作栏选择教练等级的dorpdown是否显示\n      coachAllOperationDropdownIsShow: false,\n      // 课程范围是否未配置\n      courseIsNone: false,\n      courseErrorText: '',\n      form: this.$form.createForm(this),\n      start_time: null,\n      end_time: null,\n      endOpen: false,\n      // 是否未传了封面\n      imageIsNone: false,\n      imageErrorText: '',\n      fileList: [],\n      cropperModal: {}\n    }\n  },\n  methods: {\n    // 保存\n    save() {\n      this.course_validator()\n      this.image_validator()\n      this.form.validateFieldsAndScroll((err, values) => {\n        if (!err && !this.courseIsNone && !this.imageIsNone) {\n          this.packageData.course_name = values.course_name\n          this.packageData.price = values.price\n          this.packageData.valid_time = values.valid_time\n          this.packageData.frozen_days = values.frozen_days\n          this.packageData.transfer_rate = this.packageData.is_allow_transfer\n            ? +values.transfer_rate\n            : undefined\n          this.packageData.start_time = `${this.start_time.format(\n            'YYYY-MM-DD'\n          )}`\n          this.packageData.end_time = `${this.end_time.format('YYYY-MM-DD')}`\n          this.packageData.team_range = []\n          this.teamCourseList.forEach(i => {\n            this.packageData.team_range.push({\n              course_id: i.course_id,\n              team_times: i.team_times,\n              team_unit_price: i.team_unit_price\n            })\n          })\n          this.packageData.personal_range = []\n          this.personalCourseList.forEach(i => {\n            this.packageData.personal_range.push({\n              course_id: i.course_id,\n              personal_times: i.personal_times,\n              personal_unit_price: i.personal_unit_price,\n              coach_level: cloneDeep(i.coachGradeList)\n            })\n          })\n          this.addPackageService.add(this.packageData).subscribe(res => {\n            this.$router.push({\n              path: '/shop/product/course/manage/package/list'\n            })\n          })\n        }\n      })\n    },\n    // 保存并上架\n    onsale() {\n      this.course_validator()\n      this.image_validator()\n      this.form.validateFieldsAndScroll((err, values) => {\n        if (!err && !this.courseIsNone && !this.imageIsNone) {\n          this.packageData.course_name = values.course_name\n          this.packageData.price = values.price\n          this.packageData.valid_time = values.valid_time\n          this.packageData.frozen_days = values.frozen_days\n          this.packageData.transfer_rate = this.packageData.is_allow_transfer\n            ? +values.transfer_rate\n            : undefined\n          this.packageData.start_time = `${this.start_time.format(\n            'YYYY-MM-DD'\n          )}`\n          this.packageData.end_time = `${this.end_time.format('YYYY-MM-DD')}`\n          this.teamCourseList.forEach(i => {\n            this.packageData.team_range.push({\n              course_id: i.course_id,\n              team_times: i.team_times,\n              team_unit_price: i.team_unit_price\n            })\n          })\n          this.personalCourseList.forEach(i => {\n            this.packageData.personal_range.push({\n              course_id: i.course_id,\n              personal_times: i.personal_times,\n              personal_unit_price: i.personal_unit_price,\n              coach_level: cloneDeep(i.coachGradeList)\n            })\n          })\n          this.addPackageService\n            .addAndOnsale(this.packageData)\n            .subscribe(res => {\n              this.$router.push({\n                path: '/shop/product/course/manage/package/list'\n              })\n            })\n        }\n      })\n    },\n    // checkboxChange\n    teamCheckboxChange(e) {\n      this.packageData.is_team = +e.target.checked\n      this.courseIsFirstInput = false\n      this.teamCourseListIsShow = +e.target.checked\n    },\n    personalCheckboxChange(e) {\n      this.packageData.is_personal = +e.target.checked\n      this.courseIsFirstInput = false\n      this.personalCourseListIsShow = +e.target.checked\n    },\n    // team\n    teamCourseListShow() {\n      this.teamCourseListIsShow = !this.teamCourseListIsShow\n    },\n    // personal\n    personalCourseListShow() {\n      this.personalCourseListIsShow = !this.personalCourseListIsShow\n    },\n    // 批量操作团课课程包节数\n    times_operation_ok(type) {\n      if (type === 'team') {\n        forEach(this.teamCourseList, o => {\n          if (o.courseChecked) {\n            o.team_times = +this.teamOperationObject.team_times\n            // 备份批量操作的数据\n            this.teamCourseTotalList[o.course_id] = this.teamCourseTotalList[\n              o.course_id\n            ]\n              ? this.teamCourseTotalList[o.course_id]\n              : {}\n            this.teamCourseTotalList[o.course_id].team_times = +this\n              .teamOperationObject.team_times\n          }\n        })\n      } else if (type === 'personal') {\n        forEach(this.personalCourseList, o => {\n          if (o.courseChecked) {\n            o.personal_times = +this.personalOperationObject.personal_times\n            // 备份批量操作的数据\n            this.personalCourseTotalList[o.course_id] = this\n              .personalCourseTotalList[o.course_id]\n              ? this.personalCourseTotalList[o.course_id]\n              : {}\n            this.personalCourseTotalList[o.course_id].personal_times = +this\n              .personalOperationObject.personal_times\n          }\n        })\n      }\n    },\n    // 批量操作团课课程包价格\n    unit_price_operation_ok(type) {\n      if (type === 'team') {\n        forEach(this.teamCourseList, o => {\n          if (o.courseChecked) {\n            o.team_unit_price = +this.teamOperationObject.team_unit_price\n            // 备份批量操作的数据\n            this.teamCourseTotalList[o.course_id] = this.teamCourseTotalList[\n              o.course_id\n            ]\n              ? this.teamCourseTotalList[o.course_id]\n              : {}\n            this.teamCourseTotalList[o.course_id].team_unit_price = +this\n              .teamOperationObject.team_unit_price\n          }\n        })\n      } else if (type === 'personal') {\n        forEach(this.personalCourseList, o => {\n          if (o.courseChecked) {\n            o.personal_unit_price = +this.personalOperationObject\n              .personal_unit_price\n            // 备份批量操作的数据\n            this.personalCourseTotalList[o.course_id] = this\n              .personalCourseTotalList[o.course_id]\n              ? this.personalCourseTotalList[o.course_id]\n              : {}\n            this.personalCourseTotalList[\n              o.course_id\n            ].personal_unit_price = +this.personalOperationObject\n              .personal_unit_price\n          }\n        })\n      }\n    },\n    // teamItems input change\n    teamInputChange(e, type, id) {\n      this.teamCourseTotalList[id] = this.teamCourseTotalList[id]\n        ? this.teamCourseTotalList[id]\n        : {}\n      this.teamCourseTotalList[id][type] = e\n    },\n    // personalItems input change\n    personalInputChange(e, type, id) {\n      this.personalCourseTotalList[id] = this.personalCourseTotalList[id]\n        ? this.personalCourseTotalList[id]\n        : {}\n      this.personalCourseTotalList[id][type] = e\n    },\n    // 添加课程\n    addCourse(type) {\n      let that = this\n      if (type === 'team') {\n        this.$modalRouter.push({\n          name: 'course-select-course',\n          props: {\n            type,\n            courses: this.teamCourseList\n          },\n          on: {\n            ok(data) {\n              data.list.forEach(i => {\n                i.courseChecked = false\n                i.team_times = null\n                i.team_unit_price = null\n              })\n              forEach(that.teamCourseTotalList, (value, key) => {\n                forEach(data.list, innerValue => {\n                  if (+innerValue.course_id === +key) {\n                    innerValue.team_times = value.team_times\n                    innerValue.team_unit_price = value.team_unit_price\n                  }\n                })\n                // 删除teamCourseTotalList里不存在的course_id项\n                if (!data.list.some(o => +o.course_id === +key)) {\n                  delete that.teamCourseTotalList[key]\n                }\n              })\n              that.teamCourseList = cloneDeep(data.list)\n            }\n          }\n        })\n      } else if (type === 'personal') {\n        this.$modalRouter.push({\n          name: 'course-select-course',\n          props: {\n            type,\n            courses: this.personalCourseList\n          },\n          on: {\n            ok(data) {\n              let coachGradeList = []\n              forEach(that.coachList, i => {\n                coachGradeList.push(i.id)\n              })\n              data.list.forEach(i => {\n                i.courseChecked = false\n                i.coachGradeList = coachGradeList\n                i.personal_times = null\n                i.personal_unit_price = null\n              })\n              forEach(that.personalCourseTotalList, (value, key) => {\n                forEach(data.list, innerValue => {\n                  if (+innerValue.course_id === +key) {\n                    innerValue.coachGradeList = cloneDeep(\n                      value.list ? value.list : coachGradeList\n                    )\n                    innerValue.personal_times = value.personal_times\n                    innerValue.personal_unit_price = value.personal_unit_price\n                  }\n                })\n                // 删除personalCoachTotalList里不存在的course_id项\n                if (!data.list.some(o => +o.course_id === +key)) {\n                  delete that.personalCourseTotalList[key]\n                }\n              })\n              // 缓存选择的教练等级\n              that.personalCoachListHistory = []\n              data.list.forEach(i => {\n                that.personalCoachListHistory.push(i.coachGradeList)\n              })\n              that.personalCourseList = cloneDeep(data.list)\n            }\n          }\n        })\n      }\n    },\n    // 移除课程\n    removeCourseItem(type, id) {\n      if (type === 'team') {\n        let arr = cloneDeep(this.teamCourseList)\n        remove(arr, o => o.course_id === id)\n        this.teamCourseList = arr\n        // 移除备份\n        let list = cloneDeep(this.teamCourseTotalList)\n        delete list[id]\n        this.teamCourseTotalList = list\n      } else if (type === 'personal') {\n        let arr = cloneDeep(this.personalCourseList)\n        remove(arr, o => o.course_id === id)\n        this.personalCourseList = arr\n        // 移除备份\n        let coachList = cloneDeep(this.personalCourseTotalList)\n        delete coachList[id]\n        this.personalCourseTotalList = coachList\n      }\n    },\n    // 移除选择的课程\n    removeCourseItems(type) {\n      if (type === 'team') {\n        let arr = cloneDeep(this.teamCourseList)\n        let removeList = remove(arr, o => o.courseChecked)\n        this.teamCourseList = arr\n        // 移除备份\n        let list = cloneDeep(this.teamCourseTotalList)\n        removeList.forEach(i => {\n          delete list[i.course_id]\n        })\n        this.teamCourseTotalList = list\n      } else if (type === 'personal') {\n        let arr = cloneDeep(this.personalCourseList)\n        let removeList = remove(arr, o => o.courseChecked)\n        this.personalCourseList = arr\n        // 移除备份\n        let coachList = cloneDeep(this.personalCourseTotalList)\n        removeList.forEach(i => {\n          delete coachList[i.course_id]\n        })\n        this.personalCourseTotalList = coachList\n      }\n    },\n    // 选择课程\n    courseItemCheckedChange(e, type, index) {\n      if (type === 'team') {\n        this.teamCourseList[index].courseChecked = e.target.checked\n      } else if (type === 'personal') {\n        this.personalCourseList[index].courseChecked = e.target.checked\n      }\n    },\n    // 全选\n    checkAllChange(type) {\n      if (type === 'team') {\n        this.teamCourseList.forEach(i => {\n          i.courseChecked = !this.teamCheckAll\n        })\n      } else if (type === 'personal') {\n        this.personalCourseList.forEach(i => {\n          i.courseChecked = !this.personalCheckAll\n        })\n      }\n    },\n    // item coach checkboxGroup changeEvent\n    coachItemChange(e, id, index) {\n      if (!e.length) {\n        this.personalCourseList[\n          index\n        ].coachGradeList = this.personalCoachListHistory[index]\n        return\n      } else {\n        this.personalCoachListHistory[index] = cloneDeep(e)\n      }\n      this.personalCourseTotalList[id] = this.personalCourseTotalList[id]\n        ? this.personalCourseTotalList[id]\n        : {}\n      this.personalCourseTotalList[id].list = cloneDeep(e)\n    },\n    coachAllOperationOk() {\n      // 批量设置\n      forEach(this.personalCourseList, value => {\n        if (value.courseChecked) {\n          value.coachGradeList = cloneDeep(this.personalAllOperationCoachList)\n          this.personalCourseTotalList[value.course_id] = this\n            .personalCourseTotalList[value.course_id]\n            ? this.personalCourseTotalList[value.course_id]\n            : {}\n          this.personalCourseTotalList[value.course_id].list = cloneDeep(\n            this.personalAllOperationCoachList\n          )\n        }\n      })\n      // 缓存选择的教练等级\n      this.personalCoachListHistory = []\n      forEach(this.personalCourseList, i => {\n        this.personalCoachListHistory.push(i.coachGradeList)\n      })\n      // 清空\n      this.personalAllOperationCoachList = []\n      // 收起\n      this.coachAllOperationDropdownIsShow = false\n    },\n    // course validatorFn  kael\n    course_validator() {\n      this.courseIsFirstInput = false\n      let teamIsOk = false\n      let personalIsOk = false\n      // 校验团课\n      if (this.packageData.is_team) {\n        let isOk = false\n        isOk = this.teamCourseList.every(o => {\n          let team_times = isNaN(+o.team_times) ? 0 : +o.team_times\n          let team_unit_price = isNaN(+o.team_unit_price)\n            ? 0\n            : +o.team_unit_price\n          return team_times * team_unit_price !== 0\n        })\n        teamIsOk = isOk && this.teamCourseList.length\n      } else {\n        teamIsOk = true\n      }\n      // 校验私教\n      if (this.packageData.is_personal) {\n        let isOk = false\n        isOk = this.personalCourseList.every(o => {\n          let personal_times = isNaN(+o.personal_times) ? 0 : +o.personal_times\n          let personal_unit_price = isNaN(+o.personal_unit_price)\n            ? 0\n            : +o.personal_unit_price\n          return personal_times * personal_unit_price !== 0\n        })\n        personalIsOk = isOk && this.personalCourseList.length\n      } else {\n        personalIsOk = true\n      }\n      if (\n        teamIsOk &&\n        personalIsOk &&\n        !(!this.packageData.is_team && !this.packageData.is_personal)\n      ) {\n        // 校验通过\n        this.courseIsNone = false\n        this.courseErrorText = ''\n      } else {\n        // 校验未通过\n        this.courseIsNone = true\n        this.courseErrorText = '请输入上课范围'\n      }\n    },\n    // image validatorFn\n    image_validator() {\n      if (this.packageData.image.image_key !== '') {\n        // 校验通过\n        this.imageIsNone = false\n        this.imageErrorText = ''\n      } else {\n        // 校验未通过\n        this.imageIsNone = true\n        this.imageErrorText = '请上传封面'\n      }\n    },\n    // 转让\n    transfer(e) {\n      this.packageData.is_allow_transfer = +e.target.checked\n      // 重置转让费用的校验\n      this.packageData.transfer_rate = undefined\n      this.form.resetFields(['transfer_rate'])\n    },\n    fileChange(data) {\n      if (data.length) {\n        // 上传\n        this.packageData.image.image_id = data[0].image_id\n        this.packageData.image.image_key = data[0].image_key\n        this.imageIsNone = false\n        this.imageErrorText = ''\n      } else {\n        // 删除\n        this.packageData.image.image_id = null\n        this.packageData.image.image_key = ''\n        this.imageIsNone = true\n        this.imageErrorText = '请上传封面'\n      }\n    },\n    transferUnitChange() {\n      this.packageData.transfer_rate = undefined\n      this.form.setFieldsValue({\n        transfer_rate: undefined\n      })\n    },\n    // start_time validatorFn\n    start_time_validator(rule, value, callback) {\n      if (!value) {\n        // eslint-disable-next-line\n        callback('请选择开始售卖时间')\n      } else {\n        // eslint-disable-next-line\n        callback()\n      }\n    },\n    // end_time validatorFn\n    end_time_validator(rule, value, callback) {\n      if (!value) {\n        // eslint-disable-next-line\n        callback('请选择结束售卖时间')\n      } else {\n        // eslint-disable-next-line\n        callback()\n      }\n    },\n    // 售卖时间-start\n    start_time_change(data) {\n      this.start_time = cloneDeep(data)\n    },\n    handleStartOpenChange(open) {\n      if (!open) {\n        this.endOpen = true\n      }\n    },\n    disabledStartDate(startValue) {\n      const endValue = this.end_time\n      if (!endValue) {\n        // 结束时间未选择\n        return (\n          startValue.valueOf() <\n          moment()\n            .startOf('day')\n            .valueOf()\n        )\n      }\n      let start =\n        endValue.valueOf() >\n        moment()\n          .add(30, 'y')\n          .valueOf()\n          ? moment(endValue)\n              .subtract(30, 'y')\n              .valueOf()\n          : moment()\n              .startOf('day')\n              .valueOf()\n      return (\n        startValue.valueOf() < start ||\n        startValue.valueOf() > moment(endValue).valueOf()\n      )\n    },\n    // 售卖时间-end\n    end_time_change(data) {\n      this.end_time = cloneDeep(data)\n    },\n    handleEndOpenChange(open) {\n      this.endOpen = open\n    },\n    disabledEndDate(endValue) {\n      const startValue = this.start_time\n      if (!startValue) {\n        // 开始时间未选择\n        return (\n          endValue.valueOf() <\n          moment()\n            .startOf('day')\n            .valueOf()\n        )\n      }\n      return (\n        endValue.valueOf() >=\n          moment(startValue)\n            .add(30, 'y')\n            .valueOf() ||\n        endValue.valueOf() < moment(startValue).valueOf() ||\n        endValue.valueOf() <\n          moment()\n            .startOf('day')\n            .valueOf()\n      )\n    },\n    // moment\n    moment\n  },\n  watch: {\n    teamCourseList: {\n      deep: true,\n      handler(newVal) {\n        let allSelect = false\n        let allNotSelect = false\n        allSelect = every(newVal, o => o.courseChecked)\n        allNotSelect = every(newVal, o => !o.courseChecked)\n        this.teamIndeterminate = !allSelect && !allNotSelect\n        this.teamCheckAll = newVal.length ? allSelect : false\n        // 计算团课总计\n        this.teamCourseTotalObject.team_times = reduce(\n          newVal,\n          (sum, o) => {\n            let team_times = isNaN(+o.team_times) ? 0 : +o.team_times\n            return sum + team_times\n          },\n          0\n        )\n        this.teamCourseTotalObject.total = reduce(\n          newVal,\n          (sum, o) => {\n            let team_times = isNaN(+o.team_times) ? 0 : +o.team_times\n            let team_unit_price = isNaN(+o.team_unit_price)\n              ? 0\n              : +o.team_unit_price\n            return sum + (team_times * (team_unit_price * 10)) / 10\n          },\n          0\n        )\n      }\n    },\n    personalCourseList: {\n      deep: true,\n      handler(newVal) {\n        let allSelect = false\n        let allNotSelect = false\n        allSelect = every(newVal, o => o.courseChecked)\n        allNotSelect = every(newVal, o => !o.courseChecked)\n        this.personalIndeterminate = !allSelect && !allNotSelect\n        this.personalCheckAll = newVal.length ? allSelect : false\n        // 计算私教课总计\n        this.personalCourseTotalObject.personal_times = reduce(\n          newVal,\n          (sum, o) => {\n            let personal_times = isNaN(+o.personal_times)\n              ? 0\n              : +o.personal_times\n            return sum + personal_times\n          },\n          0\n        )\n        this.personalCourseTotalObject.total = reduce(\n          newVal,\n          (sum, o) => {\n            let personal_times = isNaN(+o.personal_times)\n              ? 0\n              : +o.personal_times\n            let personal_unit_price = isNaN(+o.personal_unit_price)\n              ? 0\n              : +o.personal_unit_price\n            return sum + (personal_times * (personal_unit_price * 10)) / 10\n          },\n          0\n        )\n      }\n    }\n  },\n  filters: {\n    // 单课价格统计\n    course_item_total(times, unit_price) {\n      if (+times && +unit_price) {\n        return (+times * (+unit_price * 10)) / 10\n      } else {\n        return 0\n      }\n    }\n  },\n  computed: {\n    all_total() {\n      let teamTotal = this.packageData.is_team\n        ? this.teamCourseTotalObject.total\n        : 0\n      let personalTotal = this.packageData.is_personal\n        ? this.personalCourseTotalObject.total\n        : 0\n      return teamTotal + personalTotal\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/pages/shop/product/course/manage/package"}]}