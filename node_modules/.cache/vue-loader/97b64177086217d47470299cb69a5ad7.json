{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/shop/app/venue/setting.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/shop/app/venue/setting.vue","mtime":1597396799941},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { SettingService } from './setting.service'\nimport { MessageService } from '@/services/message.service'\nimport { CYCLIC_TYPE, WEEK_MAP } from '@/constants/venue'\n\nexport default {\n  serviceInject() {\n    return {\n      settingService: SettingService,\n      messageService: MessageService\n    }\n  },\n  rxState() {\n    return {\n      list: this.settingService.list$,\n      auth: this.settingService.auth$\n    }\n  },\n  name: 'newLable',\n  props: {\n    siteId: {\n      type: Number,\n      default() {\n        return ''\n      }\n    },\n    venuesId: {\n      type: Number,\n      default() {\n        return ''\n      }\n    }\n  },\n  data() {\n    return {\n      show: false,\n      CYCLIC_TYPE\n    }\n  },\n  filters: {\n    cycleFilter(val) {\n      return '每' + val.map(item => WEEK_MAP[item]).join('、')\n    }\n  },\n  mounted() {\n    this.getList()\n  },\n  methods: {\n    getList() {\n      this.settingService.getList({ site_id: this.siteId }).subscribe()\n    },\n    delSetting(item) {\n      const data = {\n        settings_id: item.settings_id\n      }\n      this.settingService.deleteSetting(data).subscribe(() => {\n        this.getList()\n      })\n    },\n    order(item) {\n      const data = {\n        site_id: this.siteId,\n        settings_id: item.settings_id\n      }\n      this.settingService.orderSetting(data).subscribe(() => {\n        this.getList()\n      })\n    },\n    addRow() {\n      this.show = false\n      this.$router.push({\n        name: 'shop-app-venue-setting-add',\n        query: { venues_id: this.venuesId }\n      })\n    },\n    editRow(item) {\n      this.show = false\n      this.$router.push({\n        name: 'shop-app-venue-setting-edit',\n        query: { settings_id: item.settings_id }\n      })\n    },\n    save(e) {\n      let verify = true\n      e.preventDefault()\n      const sites = this.sites.map(item => {\n        item.name === '' && (verify = false)\n        return item.name\n      })\n      if (!verify) {\n        this.messageService.warn({ content: '场地名称不能为空' })\n        return\n      }\n      let data = {\n        venues_id: this.venuesId,\n        sites: this.sites.map(item => item.name)\n      }\n      this.settingService.addSites(data).subscribe(state => {\n        this.messageService.success({ content: '新增成功' })\n        this.show = false\n        this.$emit('success', true)\n      })\n    }\n  }\n}\n",null]}