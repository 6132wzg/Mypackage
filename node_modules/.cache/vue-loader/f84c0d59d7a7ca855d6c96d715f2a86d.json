{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/shop/distribution-sale.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/shop/distribution-sale.vue","mtime":1591147717212},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { DistributionSaleService } from './distribution-sale.service'\nimport { MessageService } from '@/services/message.service'\nconst columns = [\n  {\n    title: '会籍销售姓名',\n    dataIndex: 'sale_name',\n    key: 'sale_name'\n  },\n  {\n    dataIndex: 'sign_bill',\n    key: 'sign_bill',\n    slots: { title: 'custom_title' },\n    scopedSlots: { customRender: 'sign_bill' }\n  }\n]\nexport default {\n  name: 'distributionAles',\n  serviceInject() {\n    return {\n      service: DistributionSaleService,\n      messageService: MessageService\n    }\n  },\n  props: {\n    memberIds: {\n      type: Array,\n      default() {\n        return []\n      }\n    },\n    saleId: Number\n  },\n  data() {\n    return {\n      selectedRowKeys: [],\n      pagination: {\n        current: 1,\n        pageSize: 10\n      },\n      columns,\n      show: false,\n      list: [], // 列表数据\n      chooseId: ''\n    }\n  },\n  mounted() {\n    this.service.getSaleList().subscribe(res => {\n      this.list = res.list\n      this.selectedRowKeys = [this.saleId]\n      this.chooseId = this.saleId\n    })\n  },\n  methods: {\n    onChange(e) {\n      console.log(e.target)\n    },\n    onSelectChange(e, itemData) {\n      this.selectedRowKeys = e\n      this.chooseId = itemData[0].id\n    },\n    handleTableChange(pagination, filters, sorter) {\n      console.log(pagination)\n    },\n    onSearch(e) {\n      this.service\n        .getSaleList({\n          retrieve: e\n        })\n        .subscribe(res => {\n          this.list = res.list\n        })\n    },\n    save() {\n      console.log('sale', this.chooseId)\n      this.service\n        .addSale({\n          member_ids: this.memberIds,\n          sales_id: this.chooseId\n        })\n        .subscribe(res => {\n          this.show = false\n          this.$emit('success')\n          this.messageService.success({ content: '分配成功' })\n        })\n    }\n  },\n  watch: {}\n}\n",{"version":3,"sources":["distribution-sale.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"distribution-sale.vue","sourceRoot":"src/views/biz-modals/shop","sourcesContent":["<template>\n  <st-modal title=\"分配销售\" @ok=\"save\" v-model=\"show\" size=\"small\">\n    <a-row :gutter=\"8\">\n      <a-col :lg=\"24\" style=\"padding: 0;\">\n        <a-input-search\n          size=\"large\"\n          placeholder=\"搜索会籍销售昵称\"\n          style=\"width: 100%;\"\n          @search=\"onSearch\"\n        />\n      </a-col>\n    </a-row>\n    <a-row :gutter=\"8\">\n      <a-col\n        :lg=\"24\"\n        class=\"distribution-container\"\n        style=\"padding-left:12px;padding-right:12px;\"\n      >\n        <st-table\n          :rowSelection=\"{\n            fixed: true,\n            columnTitle: '分配',\n            type: 'radio',\n            selectedRowKeys: selectedRowKeys,\n            onChange: onSelectChange\n          }\"\n          :columns=\"columns\"\n          :dataSource=\"list\"\n          rowKey=\"id\"\n          @change=\"handleTableChange\"\n          :pagination=\"false\"\n        >\n          <template slot=\"custom_title\">\n            签单率（近30天）\n            <st-help-tooltip id=\"TSYHFP001\" />\n          </template>\n        </st-table>\n      </a-col>\n    </a-row>\n  </st-modal>\n</template>\n<script>\nimport { DistributionSaleService } from './distribution-sale.service'\nimport { MessageService } from '@/services/message.service'\nconst columns = [\n  {\n    title: '会籍销售姓名',\n    dataIndex: 'sale_name',\n    key: 'sale_name'\n  },\n  {\n    dataIndex: 'sign_bill',\n    key: 'sign_bill',\n    slots: { title: 'custom_title' },\n    scopedSlots: { customRender: 'sign_bill' }\n  }\n]\nexport default {\n  name: 'distributionAles',\n  serviceInject() {\n    return {\n      service: DistributionSaleService,\n      messageService: MessageService\n    }\n  },\n  props: {\n    memberIds: {\n      type: Array,\n      default() {\n        return []\n      }\n    },\n    saleId: Number\n  },\n  data() {\n    return {\n      selectedRowKeys: [],\n      pagination: {\n        current: 1,\n        pageSize: 10\n      },\n      columns,\n      show: false,\n      list: [], // 列表数据\n      chooseId: ''\n    }\n  },\n  mounted() {\n    this.service.getSaleList().subscribe(res => {\n      this.list = res.list\n      this.selectedRowKeys = [this.saleId]\n      this.chooseId = this.saleId\n    })\n  },\n  methods: {\n    onChange(e) {\n      console.log(e.target)\n    },\n    onSelectChange(e, itemData) {\n      this.selectedRowKeys = e\n      this.chooseId = itemData[0].id\n    },\n    handleTableChange(pagination, filters, sorter) {\n      console.log(pagination)\n    },\n    onSearch(e) {\n      this.service\n        .getSaleList({\n          retrieve: e\n        })\n        .subscribe(res => {\n          this.list = res.list\n        })\n    },\n    save() {\n      console.log('sale', this.chooseId)\n      this.service\n        .addSale({\n          member_ids: this.memberIds,\n          sales_id: this.chooseId\n        })\n        .subscribe(res => {\n          this.show = false\n          this.$emit('success')\n          this.messageService.success({ content: '分配成功' })\n        })\n    }\n  },\n  watch: {}\n}\n</script>\n"]}]}