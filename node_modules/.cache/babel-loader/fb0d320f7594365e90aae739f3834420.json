{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/course/select-course.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/course/select-course.vue","mtime":1600926382213},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.search\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _toConsumableArray from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { SelectCourseService } from \"./select-course.service\";\nimport { cloneDeep, filter, remove } from 'lodash-es';\nexport default {\n  name: 'SelectCourse',\n  serviceInject: function serviceInject() {\n    return {\n      selectCourseService: SelectCourseService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      addLoading: this.selectCourseService.loading$\n    };\n  },\n  bem: {\n    course: 'st-select-course'\n  },\n  props: {\n    type: {\n      type: String,\n      default: function _default() {\n        return 'team';\n      }\n    },\n    courses: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  data: function data() {\n    return {\n      show: false,\n      courseTypeList: [],\n      titleList: {\n        team: '选择团课',\n        personal: '选择私教课'\n      },\n      searchData: {\n        course_type: null,\n        search: ''\n      },\n      courseList: [],\n      selectCourseList: []\n    };\n  },\n  methods: {\n    onCourseTypeChange: function onCourseTypeChange(data) {\n      this.searchData.search = '';\n      this.searchData.course_type = data;\n      this.getCourseList();\n    },\n    onAdd: function onAdd(id) {\n      var _this$selectCourseLis;\n\n      var arr = filter(this.courseList, function (o) {\n        return o.course_id === id;\n      });\n\n      (_this$selectCourseLis = this.selectCourseList).push.apply(_this$selectCourseLis, _toConsumableArray(arr));\n\n      this.filterCourse();\n    },\n    onAllAdd: function onAllAdd() {\n      var _this$selectCourseLis2;\n\n      (_this$selectCourseLis2 = this.selectCourseList).push.apply(_this$selectCourseLis2, _toConsumableArray(cloneDeep(this.courseList)));\n\n      this.courseList = [];\n    },\n    onRemove: function onRemove(id) {\n      var arr = cloneDeep(this.selectCourseList);\n      remove(arr, function (o) {\n        return o.course_id === id;\n      });\n      this.selectCourseList = arr;\n      this.getCourseList();\n    },\n    onOk: function onOk() {\n      this.$emit('ok', {\n        list: cloneDeep(this.selectCourseList)\n      });\n      this.show = false;\n    },\n    // 根据已选课程，过滤可选课程\n    filterCourse: function filterCourse() {\n      var arr = cloneDeep(this.courseList);\n      this.selectCourseList.forEach(function (i) {\n        remove(arr, function (o) {\n          return o.course_id === i.course_id;\n        });\n      });\n      this.courseList = arr;\n    },\n    getCourseType: function getCourseType() {\n      var _this = this;\n\n      this.selectCourseService.getCourseTypeList().subscribe(function (res) {\n        _this.courseTypeList = cloneDeep(res.list);\n        _this.searchData.course_type = res.list[0].id;\n\n        _this.getCourseList();\n      });\n    },\n    getCourseList: function getCourseList() {\n      var _this2 = this;\n\n      this.selectCourseService.getCourseList({\n        type: this.type,\n        search: this.searchData.search,\n        course_type: this.searchData.course_type\n      }).subscribe(function (res) {\n        _this2.courseList = cloneDeep(res.list);\n\n        _this2.filterCourse();\n      });\n    }\n  },\n  created: function created() {\n    var _this$selectCourseLis3;\n\n    this.getCourseType();\n\n    (_this$selectCourseLis3 = this.selectCourseList).push.apply(_this$selectCourseLis3, _toConsumableArray(this.courses));\n  }\n};",{"version":3,"sources":["select-course.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <st-modal :title=\"titleList[type]\" @ok=\"onOk\" v-model=\"show\">\n    <div :class=\"course()\">\n      <div :class=\"course('search')\">\n        <a-select\n          :class=\"course('search-select')\"\n          :getPopupContainer=\"trigger => trigger.parentNode\"\n          v-model=\"searchData.course_type\"\n          @change=\"onCourseTypeChange\"\n        >\n          <a-select-option\n            v-for=\"(item, index) in courseTypeList\"\n            :key=\"index\"\n            :value=\"item.id\"\n          >\n            {{ item.setting_name }}\n          </a-select-option>\n        </a-select>\n        <st-input-search\n          @search=\"getCourseList\"\n          v-model=\"searchData.search\"\n          :class=\"course('search-input')\"\n          placeholder=\"请输入课程名称进行查询\"\n        />\n      </div>\n      <div :class=\"course('all-table')\">\n        <st-form-table>\n          <colgroup>\n            <col style=\"width:25%;\" />\n            <col style=\"width:23%;\" />\n            <col style=\"width:33%;\" />\n            <col style=\"width:16%;\" />\n          </colgroup>\n          <tr class=\"bg-thead\">\n            <th class=\"pl-9\">课程类别</th>\n            <th>课程类型</th>\n            <th>课程名称</th>\n            <th>操作</th>\n          </tr>\n          <tbody>\n            <tr>\n              <td colspan=\"4\">\n                <ul\n                  :class=\"course('scroll-content')\"\n                  v-scrollBar=\"{ stopPropagation: true }\"\n                >\n                  <li\n                    class=\"table-item\"\n                    v-for=\"(item, index) in courseList\"\n                    :class=\"{\n                      'bg-row-odd': index % 2 === 0,\n                      'bg-row-even': index % 2 !== 0\n                    }\"\n                    :key=\"item.course_id\"\n                  >\n                    <div class=\"pl-9\">{{ item.course_category }}</div>\n                    <div>{{ item.course_type }}</div>\n                    <div>\n                      <st-overflow-text\n                        slot=\"\"\n                        max-width=\"180px\"\n                        :value=\"item.course_name\"\n                      ></st-overflow-text>\n                    </div>\n                    <div>\n                      <a\n                        href=\"javascript:void(0)\"\n                        @click=\"onAdd(item.course_id)\"\n                      >\n                        添加\n                      </a>\n                    </div>\n                  </li>\n                </ul>\n              </td>\n            </tr>\n          </tbody>\n        </st-form-table>\n      </div>\n      <p :class=\"course('count')\">\n        <span>共查到{{ courseList.length }}条记录</span>\n        <a\n          href=\"javascript:void(0)\"\n          :disabled=\"courseList.length < 1\"\n          @click=\"onAllAdd\"\n        >\n          全部添加\n        </a>\n      </p>\n      <p :class=\"course('selet-course-title')\">\n        已选定{{ selectCourseList.length }}种课程\n      </p>\n      <div :class=\"course('select-table')\">\n        <st-form-table>\n          <colgroup>\n            <col style=\"width:25%;\" />\n            <col style=\"width:23%;\" />\n            <col style=\"width:33%;\" />\n            <col style=\"width:16%;\" />\n          </colgroup>\n          <tr class=\"bg-thead\">\n            <th class=\"pl-9\">课程类别</th>\n            <th>课程类型</th>\n            <th>课程名称</th>\n            <th>操作</th>\n          </tr>\n          <tbody>\n            <tr>\n              <td colspan=\"4\">\n                <ul\n                  :class=\"course('scroll-content')\"\n                  v-scrollBar=\"{ stopPropagation: true }\"\n                >\n                  <li\n                    class=\"table-item\"\n                    v-for=\"(item, index) in selectCourseList\"\n                    :class=\"{\n                      'bg-row-odd': index % 2 === 0,\n                      'bg-row-even': index % 2 !== 0\n                    }\"\n                    :key=\"item.course_id\"\n                  >\n                    <div class=\"pl-9\">{{ item.course_category }}</div>\n                    <div>{{ item.course_type }}</div>\n                    <div>\n                      <st-overflow-text\n                        slot=\"\"\n                        max-width=\"180px\"\n                        :value=\"item.course_name\"\n                      ></st-overflow-text>\n                    </div>\n                    <div>\n                      <a href=\"javascript:void(0)\">\n                        <st-popconfirm\n                          :title=\"'一旦删除则无法恢复，确认删除'\"\n                          @confirm=\"onRemove(item.course_id)\"\n                        >\n                          删除\n                        </st-popconfirm>\n                      </a>\n                    </div>\n                  </li>\n                </ul>\n              </td>\n            </tr>\n          </tbody>\n        </st-form-table>\n      </div>\n    </div>\n  </st-modal>\n</template>\n<script>\nimport { SelectCourseService } from './select-course.service'\nimport { cloneDeep, filter, remove } from 'lodash-es'\nexport default {\n  name: 'SelectCourse',\n  serviceInject() {\n    return {\n      selectCourseService: SelectCourseService\n    }\n  },\n  rxState() {\n    return {\n      addLoading: this.selectCourseService.loading$\n    }\n  },\n  bem: {\n    course: 'st-select-course'\n  },\n  props: {\n    type: {\n      type: String,\n      default() {\n        return 'team'\n      }\n    },\n    courses: {\n      type: Array,\n      default() {\n        return []\n      }\n    }\n  },\n  data() {\n    return {\n      show: false,\n      courseTypeList: [],\n      titleList: {\n        team: '选择团课',\n        personal: '选择私教课'\n      },\n      searchData: {\n        course_type: null,\n        search: ''\n      },\n      courseList: [],\n      selectCourseList: []\n    }\n  },\n  methods: {\n    onCourseTypeChange(data) {\n      this.searchData.search = ''\n      this.searchData.course_type = data\n      this.getCourseList()\n    },\n    onAdd(id) {\n      let arr = filter(this.courseList, o => o.course_id === id)\n      this.selectCourseList.push(...arr)\n      this.filterCourse()\n    },\n    onAllAdd() {\n      this.selectCourseList.push(...cloneDeep(this.courseList))\n      this.courseList = []\n    },\n    onRemove(id) {\n      let arr = cloneDeep(this.selectCourseList)\n      remove(arr, o => o.course_id === id)\n      this.selectCourseList = arr\n      this.getCourseList()\n    },\n    onOk() {\n      this.$emit('ok', { list: cloneDeep(this.selectCourseList) })\n      this.show = false\n    },\n    // 根据已选课程，过滤可选课程\n    filterCourse() {\n      let arr = cloneDeep(this.courseList)\n      this.selectCourseList.forEach(i => {\n        remove(arr, o => o.course_id === i.course_id)\n      })\n      this.courseList = arr\n    },\n    getCourseType() {\n      this.selectCourseService.getCourseTypeList().subscribe(res => {\n        this.courseTypeList = cloneDeep(res.list)\n        this.searchData.course_type = res.list[0].id\n        this.getCourseList()\n      })\n    },\n    getCourseList() {\n      this.selectCourseService\n        .getCourseList({\n          type: this.type,\n          search: this.searchData.search,\n          course_type: this.searchData.course_type\n        })\n        .subscribe(res => {\n          this.courseList = cloneDeep(res.list)\n          this.filterCourse()\n        })\n    }\n  },\n  created() {\n    this.getCourseType()\n    this.selectCourseList.push(...this.courses)\n  }\n}\n</script>\n"],"sourceRoot":"src/views/biz-modals/course"}]}