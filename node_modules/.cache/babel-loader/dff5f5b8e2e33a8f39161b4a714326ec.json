{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/shop/app/venue/add-site.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/shop/app/venue/add-site.vue","mtime":1600926555913},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { AddSiteService } from \"./add-site.service\";\nimport { MessageService } from '@/services/message.service';\nimport { PatternService } from '@/services/pattern.service';\nexport default {\n  serviceInject: function serviceInject() {\n    return {\n      Service: AddSiteService,\n      messageService: MessageService,\n      pattern: PatternService\n    };\n  },\n  name: 'newLable',\n  props: {\n    venuesId: {\n      type: Number,\n      default: function _default() {\n        return '';\n      }\n    }\n  },\n  data: function data() {\n    return {\n      sites: [],\n      show: false\n    };\n  },\n  created: function created() {},\n  methods: {\n    addRow: function addRow() {\n      this.sites.push({\n        name: ''\n      });\n    },\n    delRow: function delRow(index) {\n      this.sites.splice(index, 1);\n    },\n    save: function save(e) {\n      var _this = this;\n\n      var self = this;\n      var verify = true;\n      e.preventDefault();\n      var sites = this.sites.map(function (item) {\n        !self.pattern.CN_EN_NUM_SPACE('1-6').test(item.name) && (verify = false);\n        return item.name;\n      });\n\n      if (!verify) {\n        this.messageService.warn({\n          content: '输入的场馆名称格式错误，请重新输入'\n        });\n        return;\n      }\n\n      var data = {\n        venues_id: this.venuesId,\n        sites: self.sites.map(function (item) {\n          return item.name;\n        })\n      };\n      self.Service.addSites(data).subscribe(function (state) {\n        _this.messageService.success({\n          content: '新增成功'\n        });\n\n        self.show = false;\n        self.$emit('success', true);\n      });\n    }\n  }\n};",{"version":3,"sources":["add-site.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,SAAA,cAAA;AACA,SAAA,cAAA,QAAA,4BAAA;AACA,SAAA,cAAA,QAAA,4BAAA;AACA,eAAA;AACA,EAAA,aADA,2BACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,cADA;AAEA,MAAA,cAAA,EAAA,cAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KAAA;AAKA,GAPA;AAQA,EAAA,IAAA,EAAA,UARA;AASA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAFA,sBAEA;AACA,eAAA,EAAA;AACA;AAJA;AADA,GATA;AAiBA,EAAA,IAjBA,kBAiBA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA;AAFA,KAAA;AAIA,GAtBA;AAuBA,EAAA,OAvBA,qBAuBA,CAAA,CAvBA;AAwBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAAA;AACA,KAHA;AAIA,IAAA,MAJA,kBAIA,KAJA,EAIA;AACA,WAAA,KAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA,KANA;AAOA,IAAA,IAPA,gBAOA,CAPA,EAOA;AAAA;;AACA,UAAA,IAAA,GAAA,IAAA;AACA,UAAA,MAAA,GAAA,IAAA;AACA,MAAA,CAAA,CAAA,cAAA;AACA,UAAA,KAAA,GAAA,KAAA,KAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,SAAA,IAAA,CAAA,OAAA,CAAA,eAAA,CAAA,KAAA,EAAA,IAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,MAAA,GAAA,KAAA;AACA,eAAA,IAAA,CAAA,IAAA;AACA,OAHA,CAAA;;AAIA,UAAA,CAAA,MAAA,EAAA;AACA,aAAA,cAAA,CAAA,IAAA,CAAA;AACA,UAAA,OAAA,EAAA;AADA,SAAA;AAGA;AACA;;AACA,UAAA,IAAA,GAAA;AACA,QAAA,SAAA,EAAA,KAAA,QADA;AAEA,QAAA,KAAA,EAAA,IAAA,CAAA,KAAA,CAAA,GAAA,CAAA,UAAA,IAAA;AAAA,iBAAA,IAAA,CAAA,IAAA;AAAA,SAAA;AAFA,OAAA;AAIA,MAAA,IAAA,CAAA,OAAA,CAAA,QAAA,CAAA,IAAA,EAAA,SAAA,CAAA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,cAAA,CAAA,OAAA,CAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SAAA;;AACA,QAAA,IAAA,CAAA,IAAA,GAAA,KAAA;AACA,QAAA,IAAA,CAAA,KAAA,CAAA,SAAA,EAAA,IAAA;AACA,OAJA;AAKA;AA9BA;AAxBA,CAAA","sourcesContent":["<template>\n  <st-modal\n    title=\"批量新增场地\"\n    @ok=\"save\"\n    okText=\"提交\"\n    :okButtonProps=\"{ props: { disabled: !sites.length } }\"\n    v-model=\"show\"\n    width=\"668px\"\n    wrapClassName=\"st-modal-shop-app-venue-add-site\"\n  >\n    <div class=\"border-box\">\n      <st-form-table hoverable :isEmpty=\"false\">\n        <thead>\n          <tr>\n            <th>请批量设置场地名称</th>\n            <th style=\"width:120px\">操作</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td colspan=\"2\" class=\"st-form-table__add\">\n              <st-button type=\"dashed\" icon=\"add\" block @click=\"addRow\">\n                新增\n              </st-button>\n            </td>\n          </tr>\n\n          <template v-for=\"(item, index) in sites\">\n            <tr :key=\"index\">\n              <td>\n                <a-input v-model=\"item.name\" style=\"width: 278px;\"></a-input>\n              </td>\n              <td>\n                <template>\n                  <a @click=\"delRow(index)\">\n                    删除\n                  </a>\n                </template>\n              </td>\n            </tr>\n          </template>\n        </tbody>\n      </st-form-table>\n    </div>\n  </st-modal>\n</template>\n<script>\nimport { AddSiteService } from './add-site.service'\nimport { MessageService } from '@/services/message.service'\nimport { PatternService } from '@/services/pattern.service'\nexport default {\n  serviceInject() {\n    return {\n      Service: AddSiteService,\n      messageService: MessageService,\n      pattern: PatternService\n    }\n  },\n  name: 'newLable',\n  props: {\n    venuesId: {\n      type: Number,\n      default() {\n        return ''\n      }\n    }\n  },\n  data() {\n    return {\n      sites: [],\n      show: false\n    }\n  },\n  created() {},\n  methods: {\n    addRow() {\n      this.sites.push({ name: '' })\n    },\n    delRow(index) {\n      this.sites.splice(index, 1)\n    },\n    save(e) {\n      let self = this\n      let verify = true\n      e.preventDefault()\n      const sites = this.sites.map(item => {\n        !self.pattern.CN_EN_NUM_SPACE('1-6').test(item.name) && (verify = false)\n        return item.name\n      })\n      if (!verify) {\n        this.messageService.warn({\n          content: '输入的场馆名称格式错误，请重新输入'\n        })\n        return\n      }\n      let data = {\n        venues_id: this.venuesId,\n        sites: self.sites.map(item => item.name)\n      }\n      self.Service.addSites(data).subscribe(state => {\n        this.messageService.success({ content: '新增成功' })\n        self.show = false\n        self.$emit('success', true)\n      })\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/biz-modals/shop/app/venue"}]}