{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"brand-product-package\"],{\"135c\":function(e,t,a){\"use strict\";a.r(t),a.d(t,\"AddFixPackageService\",(function(){return f}));var s,i,n,o=a(\"d225\"),r=a(\"b0b4\"),c=a(\"9ab4\"),l=a(\"0cd5\"),u=a(\"df29\"),p=a(\"ecc1\"),d=a(\"9abd\"),h=a(\"c4cc\"),m=a(\"e69b\"),f=function(){function e(t,a,s){Object(o[\"a\"])(this,e),this.api=t,this.commonApi=a,this.msg=s,this.loading$=new u[\"d\"]({}),this.coachList$=new u[\"d\"]({})}return Object(r[\"a\"])(e,[{key:\"getCoachList\",value:function(){var e=this;return this.commonApi.getCoachList().pipe(Object(h[\"a\"])((function(t){e.coachList$.commit((function(){return t.list}))})))}},{key:\"add\",value:function(e){var t=this;return this.api.addFix(e).pipe(Object(h[\"a\"])((function(e){t.msg.success({content:\"新增课程包成功\"})})))}},{key:\"addAndUp\",value:function(e){var t=this;return this.api.addFixOnShelf(e).pipe(Object(h[\"a\"])((function(e){t.msg.success({content:\"新增并上架课程包成功\"})})))}},{key:\"beforeEach\",value:function(){return this.getCoachList()}}]),e}();f=Object(c[\"b\"])([Object(l[\"b\"])(),Object(c[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof p[\"a\"]&&p[\"a\"])?s:Object,\"function\"===typeof(i=\"undefined\"!==typeof d[\"a\"]&&d[\"a\"])?i:Object,\"function\"===typeof(n=\"undefined\"!==typeof m[\"a\"]&&m[\"a\"])?n:Object])],f)},\"1cba\":function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return s}));var s=function(){return[{title:\"时间\",dataIndex:\"operator_time\",width:250},{title:\"导出来源\",dataIndex:\"export_source\",scopedSlots:{customRender:\"export_source\"}},{title:\"导出状态\",dataIndex:\"operate_status\",scopedSlots:{customRender:\"operate_status\"}},{title:\"导出数据\",dataIndex:\"operate_type\",scopedSlots:{customRender:\"operate_type\"}},{title:\"操作人\",dataIndex:\"operator_name\"},{title:\"操作\",key:\"action\",width:140,scopedSlots:{customRender:\"action\"}}]}},\"2e47\":function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return h}));var s,i,n=a(\"d225\"),o=a(\"9ab4\"),r=a(\"0cd5\"),c=a(\"df29\"),l=a(\"2138\"),u=a(\"3a59\"),p=a(\"ebb6\"),d=a(\"2cbb\"),h=function e(t,a){var s=this;Object(n[\"a\"])(this,e),this.userService=t,this.authService=a,this.appConfig=!0,this.unitList$=this.userService.getOptions$(\"package_course.valid_time_unit\"),this.auth$=this.authService.authMap$({up:\"brand:product:package_course|up\"}),this.transferUnitList$=this.userService.getOptions$(\"package_course.transfer_unit\"),this.supportSales$=this.userService.getOptions$(\"package_course.sale_range\").pipe(Object(p[\"a\"])((function(e){return e=e.filter((function(e){return 1!==e.value})),e.reverse()}))),this.sellTypeList$=this.userService.getOptions$(\"package_course.sale_mode\").pipe(Object(p[\"a\"])((function(e){return s.appConfig||Object(u[\"a\"])(e,(function(e){return 1===e.value})),e}))),this.loading$=new c[\"d\"]({}),this.coachList$=new c[\"d\"]({})};h=Object(o[\"b\"])([Object(r[\"b\"])(),Object(o[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof l[\"a\"]&&l[\"a\"])?s:Object,\"function\"===typeof(i=\"undefined\"!==typeof d[\"a\"]&&d[\"a\"])?i:Object])],h)},\"308e\":function(e,t,a){\"use strict\";a.r(t),a.d(t,\"EditUnlimitPackageService\",(function(){return _}));var s,i,n,o=a(\"d225\"),r=a(\"b0b4\"),c=a(\"9ab4\"),l=a(\"0cd5\"),u=a(\"df29\"),p=a(\"ecc1\"),d=a(\"9abd\"),h=a(\"c4cc\"),m=a(\"e69b\"),f=a(\"c170\"),_=function(){function e(t,a,s){Object(o[\"a\"])(this,e),this.api=t,this.commonApi=a,this.msg=s,this.loading$=new u[\"d\"]({}),this.coachList$=new u[\"d\"]({}),this.info$=new u[\"d\"]({})}return Object(r[\"a\"])(e,[{key:\"getCoachList\",value:function(){var e=this;return this.commonApi.getCoachList().pipe(Object(h[\"a\"])((function(t){e.coachList$.commit((function(){return t.list}))})))}},{key:\"getEditShow\",value:function(e){var t=this;return this.api.getUnLimitEditShow(e).pipe(Object(h[\"a\"])((function(e){t.info$.commit((function(){return e.info}))})))}},{key:\"edit\",value:function(e){var t=this;return this.api.editUnLimit(e).pipe(Object(h[\"a\"])((function(e){t.msg.success({content:\"编辑课程包成功\"})})))}},{key:\"init\",value:function(e){return Object(f[\"a\"])(this.getEditShow(e),this.getCoachList())}},{key:\"beforeEach\",value:function(e){return this.init(e.query.id)}}]),e}();_=Object(c[\"b\"])([Object(l[\"b\"])(),Object(c[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof p[\"a\"]&&p[\"a\"])?s:Object,\"function\"===typeof(i=\"undefined\"!==typeof d[\"a\"]&&d[\"a\"])?i:Object,\"function\"===typeof(n=\"undefined\"!==typeof m[\"a\"]&&m[\"a\"])?n:Object])],_)},\"378a\":function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"biz-form\",{on:{\"rest-use-shop\":e.onRestUseShop,\"submit-form\":e.onSubmit,\"use-shop\":e.onUseShop,up:e.onSaveAndUp}},[a(\"template\",{slot:\"range\"},[a(\"st-form-item\",{attrs:{label:\"总节数\",labelWidth:\"118px\",required:\"\"}},[a(\"a-radio-group\",{attrs:{options:e.isLimitOptions$},on:{change:e.onIsLimit},model:{value:e.isLimit,callback:function(t){e.isLimit=t},expression:\"isLimit\"}})],1)],1),a(\"template\",{slot:\"courseRange\"},[e.isRestCourseRange?a(\"add-course-range-table\",{attrs:{useShopInfo:e.useShopInfo,isLimit:!!e.isLimit},on:{change:e.onCourseRange}}):e._e()],1)],2)},i=[],n=(a(\"8e6e\"),a(\"ac6a\"),a(\"456d\"),a(\"bd86\")),o=a(\"f8c4\"),r=a(\"6344\"),c=a(\"ff5f\");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(n[\"a\"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={name:\"AddRangePackage\",components:{BizForm:o[\"a\"],AddCourseRangeTable:r[\"a\"]},serviceInject:function(){return{service:c[\"AddRangePackageService\"]}},rxState:function(){var e=this.service.isLimitOptions$;return{isLimitOptions$:e}},data:function(){return{isLimit:1,rangeCourse:{},useShopInfo:{},isRestCourseRange:!0}},methods:{onRestUseShop:function(){var e=this;this.isRestCourseRange=!1;var t=setTimeout((function(){e.isRestCourseRange=!0,clearTimeout(t)}))},onUseShop:function(e){this.useShopInfo=e},onCourseRange:function(e){this.rangeCourse=u({},e)},onIsLimit:function(e){},onSubmit:function(e){var t=this;this.service.add(u({is_limit:this.isLimit},this.rangeCourse,{},e)).subscribe((function(e){t.$router.push({name:\"brand-product-package-list\"})}))},onSaveAndUp:function(e){var t=this;this.service.addAndUp(u({is_limit:this.isLimit},this.rangeCourse,{},e)).subscribe((function(e){t.$router.push({name:\"brand-product-package-list\"})}))}}},d=p,h=a(\"2877\"),m=Object(h[\"a\"])(d,s,i,!1,null,null,null);t[\"default\"]=m.exports},\"38d8\":function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"biz-form\",{attrs:{isEdit:!0,initInfo:e.info$},on:{\"submit-form\":e.onSubmit},scopedSlots:e._u([{key:\"courseRange\",fn:function(t){return[a(\"add-course-un-limit-table\",{attrs:{decorators:t.decorators,initInfo:e.info$},on:{change:e.onCourseRange}})]}}])})},i=[],n=(a(\"8e6e\"),a(\"ac6a\"),a(\"456d\"),a(\"bd86\")),o=a(\"f8c4\"),r=a(\"5ee1\"),c=a(\"308e\"),l=a(\"7ee8\");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(n[\"a\"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={name:\"EditUmLimitPackage\",components:{BizForm:o[\"a\"],AddCourseUnLimitTable:r[\"a\"]},serviceInject:function(){return{service:c[\"EditUnlimitPackageService\"]}},rxState:function(){var e=this.service.info$;return{info$:e}},data:function(){return{reserveIsLimitInfo:{},validateCourseRange:\"\"}},methods:{onCourseRange:function(e){Object(l[\"a\"])(e)?this.validateCourseRange=\"请选择课程范围\":(this.validateCourseRange=\"\",this.rangeCourse=p({},e))},onSubmit:function(e){var t=this;Object(l[\"a\"])(this.rangeCourse)?this.validateCourseRange=\"请选择课程范围\":this.service.edit(p({id:this.info$.package_course_id},this.rangeCourse,{},e)).subscribe((function(e){t.$router.push({name:\"brand-product-package-list\"})}))}},created:function(){}},h=d,m=a(\"2877\"),f=Object(m[\"a\"])(h,s,i,!1,null,null,null);t[\"default\"]=f.exports},\"47c6\":function(e,t,a){\"use strict\";var s,i,n,o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"st-modal\",{attrs:{title:\"下架课程包\",okText:\"确认下架\",width:\"500px\"},on:{ok:e.onOffsale},model:{value:e.show,callback:function(t){e.show=t},expression:\"show\"}},[a(\"div\",{class:e.bModal()},[a(\"st-form\",{attrs:{form:e.form}},[a(\"st-form-item\",{attrs:{label:\"课程包名称\",labelWidth:\"128px\"}},[e._v(\"\\n        \"+e._s(e.info$.course_name)+\"\\n      \")]),a(\"st-form-item\",{attrs:{label:\"当前上架门店(家)\",labelWidth:\"128px\"}},[e._v(\"\\n        \"+e._s(e.info$.upshelf_shop_num)+\"\\n        \"),a(\"span\",{class:e.bModal(\"tip\")},[e._v(\"（不含已下架门店）\")])]),a(\"st-form-item\",{attrs:{label:\"当前有效课程包\",labelWidth:\"128px\"}},[e._v(\"\\n        \"+e._s(e.info$.valid_package_num)+\"\\n        \"),a(\"span\",{class:e.bModal(\"tip\")},[e._v(\"（不含过期课程包）\")])]),a(\"st-form-item\",{attrs:{label:\"下架门店\",required:\"\",labelWidth:\"128px\"}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.shop_ids,expression:\"decorators.shop_ids\"}],attrs:{mode:\"multiple\",placeholder:\"请选择下架门店\",options:e.shopOptions$}})],1),a(\"st-form-item\",{attrs:{label:\"下架原因\",required:\"\",labelWidth:\"128px\"}},[a(\"st-textarea\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.reason,expression:\"decorators.reason\"}],attrs:{maxlength:500,placeholder:\"请输入下架原因\"}})],1)],1)],1)])},r=[],c=(a(\"8e6e\"),a(\"ac6a\"),a(\"456d\"),a(\"bd86\")),l=(a(\"c5f6\"),a(\"d225\")),u=a(\"b0b4\"),p=a(\"9ab4\"),d=a(\"ecc1\"),h=a(\"0cd5\"),m=a(\"df29\"),f=a(\"c4cc\"),_=a(\"e69b\"),b=a(\"c170\"),g=function(){function e(t,a){Object(l[\"a\"])(this,e),this.api=t,this.msg=a,this.loading$=new m[\"d\"]({}),this.shopOptions$=new m[\"d\"]([]),this.info$=new m[\"d\"]({})}return Object(u[\"a\"])(e,[{key:\"getDownShelfInfo\",value:function(e){var t=this;return this.api.getDownShelf(e).pipe(Object(f[\"a\"])((function(e){t.info$.commit((function(){return e.info}))})))}},{key:\"SET_LIST\",value:function(e){e=e.map((function(e){return{label:e.shop_name,value:e.shop_id}})),this.shopOptions$.commit((function(){return e}))}},{key:\"getShopList\",value:function(e){var t=this;return this.api.getDownShelfShopList(e).pipe(Object(f[\"a\"])((function(e){t.SET_LIST(e.list)})))}},{key:\"init\",value:function(e){return Object(b[\"a\"])(this.getDownShelfInfo(e))}},{key:\"setDownShelf\",value:function(e){var t=this;return this.api.setDownShelf(e).pipe(Object(f[\"a\"])((function(e){t.msg.success({content:\"课程包下架成功\"})})))}}]),e}();Object(p[\"b\"])([Object(m[\"c\"])(),Object(p[\"d\"])(\"design:type\",Function),Object(p[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof d[\"QueryInput\"]&&d[\"QueryInput\"])?s:Object]),Object(p[\"d\"])(\"design:returntype\",void 0)],g.prototype,\"getDownShelfInfo\",null),g=Object(p[\"b\"])([Object(h[\"b\"])(),Object(p[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(i=\"undefined\"!==typeof d[\"a\"]&&d[\"a\"])?i:Object,\"function\"===typeof(n=\"undefined\"!==typeof _[\"a\"]&&_[\"a\"])?n:Object])],g);var v=a(\"c053\");function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){Object(c[\"a\"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var k={name:\"PackageOffSales\",bem:{bModal:\"modal-package-off-sales\"},serviceInject:function(){return{service:g}},serviceProviders:function(){return[g]},rxState:function(){var e=this.service,t=e.info$,a=e.shopOptions$;return{info$:t,shopOptions$:a}},props:{id:[String,Number]},data:function(){var e=this.$stForm.create(),t=e.decorators(v[\"a\"]);return{form:e,decorators:t,show:!1}},methods:{onOffsale:function(){var e=this;this.form.validate().then((function(t){e.service.setDownShelf(C({id:e.id},t)).subscribe((function(t){e.$emit(\"success\"),e.show=!1}))}))}},created:function(){this.service.init({id:this.id}).subscribe((function(e){}))},mounted:function(){var e=this;this.service.getShopList(this.id).subscribe((function(t){e.$nextTick().then((function(){e.form.setFieldsValue({shop_ids:e.shopOptions$.map((function(e){return e.value}))})}))}))}},y=k,j=a(\"2877\"),S=Object(j[\"a\"])(y,o,r,!1,null,null,null);t[\"a\"]=S.exports},\"5ee1\":function(e,t,a){\"use strict\";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"page-shop-add-basic-package  page-shop-add-range-package\",class:e.add(\"course\")},[a(\"div\",[a(\"st-form-table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"8%\"}}),a(\"col\",{staticStyle:{width:\"16%\"}}),a(\"col\",{staticStyle:{width:\"27%\"}}),a(\"col\",{staticStyle:{width:\"28%\"}}),a(\"col\",{staticStyle:{width:\"21%\"}})]),a(\"tr\",{staticClass:\"bg-thead table-header\"},[a(\"th\"),a(\"th\",[e._v(\"课程类型\")]),a(\"th\",[e._v(\"节数\")]),a(\"th\",[e._v(\"课时费\")]),a(\"th\",[e._v(\"小计(元)\")])]),a(\"tbody\",[a(\"tr\",{staticClass:\"bg-row-team\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{checked:!!e.packageData.is_team},on:{change:e.teamCheckboxChange}})],1),a(\"td\",[e._v(\"团体课程\")]),a(\"td\",{staticClass:\"pr-32\"},[a(\"st-input-number\",{attrs:{min:1,max:99999,disabled:0===e.packageData.is_team},on:{change:function(t){e.courseIsFirstInput=!1}},model:{value:e.packageData.team_times,callback:function(t){e.$set(e.packageData,\"team_times\",t)},expression:\"packageData.team_times\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                节\\n              \")])],2)],1),a(\"td\",{staticClass:\"pr-32\"},[a(\"st-input-number\",{attrs:{min:0,max:999999.9,float:!0,disabled:0===e.packageData.is_team},on:{change:function(t){e.courseIsFirstInput=!1}},model:{value:e.packageData.team_unit_price,callback:function(t){e.$set(e.packageData,\"team_unit_price\",t)},expression:\"packageData.team_unit_price\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                元\\n              \")])],2)],1),a(\"td\",[e._v(e._s(e.team_total))])]),a(\"tr\",{staticClass:\"bg-row-personal\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{checked:!!e.packageData.is_personal},on:{change:e.personalCheckboxChange}})],1),a(\"td\",[e._v(\"私教课程\")]),a(\"td\",{staticClass:\"pr-32\"},[a(\"st-input-number\",{attrs:{min:1,max:99999,disabled:0===e.packageData.is_personal},on:{change:function(t){e.courseIsFirstInput=!1}},model:{value:e.packageData.personal_times,callback:function(t){e.$set(e.packageData,\"personal_times\",t)},expression:\"packageData.personal_times\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                节\\n              \")])],2)],1),a(\"td\",{staticClass:\"pr-32\"},[a(\"st-input-number\",{attrs:{min:0,max:999999.9,float:!0,disabled:0===e.packageData.is_personal},on:{change:function(t){e.courseIsFirstInput=!1}},model:{value:e.packageData.personal_unit_price,callback:function(t){e.$set(e.packageData,\"personal_unit_price\",t)},expression:\"packageData.personal_unit_price\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                元\\n              \")])],2)],1),a(\"td\",[e._v(e._s(e.personal_total))])])])]),a(\"portal\",{attrs:{to:\"BRAND_PACKAGE_FORM_TOTAL\"}},[a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"总价\"}},[e._v(e._s(e.all_total)+\"元\")])],1)],1)],1)],1)])},i=[],n={name:\"AddCourseUnlimitTable\",bem:{add:\"page-shop-add-fix-package\",b:\"add-course-fix-table\"},props:{initInfo:{type:Object,default:function(){return{is_team:0,team_times:void 0,team_unit_price:void 0,is_personal:0,personal_times:void 0,personal_unit_price:void 0}}}},watch:{packageData:{handler:function(e,t){(e.is_team||e.is_personal)&&(!e.is_team||e.is_personal||e.team_times||e.team_unit_price)&&(!e.is_personal||e.is_team||e.personal_times||e.personal_unit_price)?this.$emit(\"change\",e):this.$emit(\"change\",null)},deep:!0}},data:function(){return{packageData:{is_team:0,team_times:void 0,team_unit_price:void 0,is_personal:0,personal_times:void 0,personal_unit_price:void 0},courseIsFirstInput:!0}},created:function(){this.packageData.is_team=this.initInfo.is_team,this.packageData.is_personal=this.initInfo.is_personal,this.packageData.personal_unit_price=this.initInfo.personal_unit_price,this.packageData.team_unit_price=this.initInfo.team_unit_price,this.packageData.team_times=this.initInfo.team_times,this.packageData.personal_times=this.initInfo.personal_times},methods:{teamCheckboxChange:function(e){this.packageData.is_team=+e.target.checked,this.courseIsFirstInput=!1},personalCheckboxChange:function(e){this.packageData.is_personal=+e.target.checked,this.courseIsFirstInput=!1}},computed:{team_total:function(){return+this.packageData.team_times&&+this.packageData.team_unit_price?this.packageData.team_times*(10*this.packageData.team_unit_price)/10:0},personal_total:function(){return+this.packageData.personal_times&&+this.packageData.personal_unit_price?this.packageData.personal_times*(10*this.packageData.personal_unit_price)/10:0},all_total:function(){var e=this.packageData.is_team?this.team_total:0,t=this.packageData.is_personal?this.personal_total:0;return e+t}}},o=n,r=a(\"2877\"),c=Object(r[\"a\"])(o,s,i,!1,null,null,null);t[\"a\"]=c.exports},6344:function(e,t,a){\"use strict\";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"page-shop-add-basic-package page-shop-add-range-package page-brand-add-fix-package\",class:e.add(\"course\")},[a(\"div\",[a(\"st-form-table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"10%\"}}),a(\"col\",{staticStyle:{width:\"21%\"}}),a(\"col\",{staticStyle:{width:\"27%\"}}),a(\"col\",{staticStyle:{width:\"20%\"}}),a(\"col\",{staticStyle:{width:\"17%\"}})]),a(\"tr\",{staticClass:\"bg-thead table-header\"},[a(\"th\"),a(\"th\",{staticClass:\"rightline\"},[e._v(\"课程类型\")]),a(\"th\",{staticClass:\"pl-56\"},[e.isLimit?[e._v(\"节数\")]:e._e()],2),a(\"th\",{staticClass:\"pd-x16\"},[e._v(\"课时费\")]),a(\"th\",[e.isLimit?[e._v(\"小计(元)\")]:e._e()],2),a(\"th\")]),a(\"tbody\",[a(\"tr\",{staticClass:\"bg-row-odd checkbox\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{on:{change:e.teamCheckboxChange},model:{value:e.packageData.is_team,callback:function(t){e.$set(e.packageData,\"is_team\",t)},expression:\"packageData.is_team\"}})],1),a(\"td\",{staticClass:\"rightline white-nowrap\"},[e._v(\"团体课程\")]),e.isLimit?a(\"td\",{staticClass:\"pr-32 pl-56\"},[a(\"st-input-number\",{staticStyle:{\"min-width\":\"100px\"},attrs:{min:1,max:99999,disabled:!e.packageData.is_team},model:{value:e.packageData.team_times,callback:function(t){e.$set(e.packageData,\"team_times\",t)},expression:\"packageData.team_times\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                节\\n              \")])],2)],1):e._e(),a(\"td\",{staticClass:\"pr-32\"},[a(\"st-input-number\",{staticStyle:{\"min-width\":\"100px\"},attrs:{min:0,max:999999.9,float:!0,disabled:!e.packageData.is_team},model:{value:e.packageData.team_unit_price,callback:function(t){e.$set(e.packageData,\"team_unit_price\",t)},expression:\"packageData.team_unit_price\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                元\\n              \")])],2)],1),e.isLimit?a(\"td\",[e._v(e._s(e.team_total))]):e._e(),a(\"td\",{staticClass:\"overflow-hidden\"},[a(\"a\",{staticClass:\"set-course-button white-nowrap\",class:{hide:!(e.teamCourseListIsShow&&e.packageData.is_team)},attrs:{disabled:!e.packageData.is_team},on:{click:e.teamCourseListShow}},[e._v(\"\\n              配置上课范围  \\n              \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1)])]),e.teamCourseListIsShow&&e.packageData.is_team?a(\"tr\",{staticClass:\"bg-row-odd team-course-list-content\"},[a(\"td\",{staticClass:\"rightline\",staticStyle:{\"background-color\":\"#fff\"},attrs:{colspan:\"2\"}}),a(\"td\",{staticClass:\"team-course-table\",attrs:{colspan:\"4\"}},[a(\"div\",{class:e.add(\"team-course-table\")},[a(\"st-form-table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"41%\"}}),a(\"col\",{staticStyle:{width:\"40%\"}}),a(\"col\",{staticStyle:{width:\"14%\"}})]),a(\"tr\",{staticClass:\"bg-thead th\"},[a(\"th\"),a(\"th\",[e._v(\"课程名称\")]),a(\"th\",[e._v(\"上课门店\")]),a(\"th\",[e._v(\"操作\")])]),a(\"tbody\",[a(\"tr\",{staticClass:\"checkbox border-bottom\"},[a(\"td\",{staticClass:\"team-course-add-buton\",attrs:{colspan:\"4\"}},[a(\"st-button\",{attrs:{block:\"\",type:\"dashed\",icon:\"add\"},on:{click:function(t){return e.addCourseTeam()}}},[e._v(\"\\n                        新增团体课程\\n                      \")])],1)]),a(\"tr\",[a(\"td\",{attrs:{colspan:\"4\"}},[e.teamCourseList.length?e._e():a(\"p\",{staticStyle:{margin:\"0\",\"text-align\":\"center\"}},[e._v(\"\\n                        无数据\\n                      \")]),e.teamCourseList.length?a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{ stopPropagation: true }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"teamCourseList2\"],expression:\"['teamCourseList2']\"}],staticClass:\"team-course-content-table\"},e._l(e.teamCourseList,(function(t,s){return a(\"li\",{key:t.course_id,staticClass:\"checkbox checkbox-brand border-bottom\",class:{\"bg-row-odd\":s%2!==0,\"bg-row-even\":s%2===0}},[a(\"div\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{checked:t.courseChecked},on:{change:function(t){return e.courseItemCheckedChange(t,\"team\",s)}}})],1),a(\"div\",[a(\"st-overflow-text\",{attrs:{\"max-width\":\"120px\",value:t.course_name}})],1),a(\"div\",[a(\"st-overflow-text\",{attrs:{maxWidth:\"120px\",value:t.shop_name}})],1),a(\"div\",[a(\"a\",{on:{click:function(a){return e.removeCourseItem(\"team\",t.course_id)}}},[e._v(\"\\n                              删除\\n                            \")])])])})),0):e._e()])]),a(\"tr\",{staticClass:\"bg-thead checkbox topline\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{indeterminate:e.teamIndeterminate,checked:e.teamCheckAll},on:{change:function(t){return e.checkAllChange(\"team\")}}})],1),a(\"td\"),a(\"td\",[e._v(\"批量操作\")]),a(\"td\",[a(\"a\",{on:{click:function(t){return e.removeCourseItems(\"team\")}}},[e._v(\"\\n                        删除\\n                      \")])])])])])],1)])]):e._e(),a(\"tr\",{staticClass:\"checkbox border-bottom\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{on:{change:e.personalCheckboxChange},model:{value:e.packageData.is_personal,callback:function(t){e.$set(e.packageData,\"is_personal\",t)},expression:\"packageData.is_personal\"}})],1),a(\"td\",{staticClass:\"rightline\"},[e._v(\"私教课程\")]),e.isLimit?a(\"td\",{staticClass:\"pr-32 pl-56\"},[a(\"st-input-number\",{staticStyle:{\"min-width\":\"100px\"},attrs:{min:1,max:99999,disabled:!e.packageData.is_personal},model:{value:e.packageData.personal_times,callback:function(t){e.$set(e.packageData,\"personal_times\",t)},expression:\"packageData.personal_times\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                节\\n              \")])],2)],1):e._e(),a(\"td\",{staticClass:\"pr-32\"},[a(\"st-input-number\",{staticStyle:{\"min-width\":\"100px\"},attrs:{min:0,max:999999.9,float:!0,disabled:!e.packageData.is_personal},model:{value:e.packageData.personal_unit_price,callback:function(t){e.$set(e.packageData,\"personal_unit_price\",t)},expression:\"packageData.personal_unit_price\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                元\\n              \")])],2)],1),e.isLimit?a(\"td\",[e._v(e._s(e.personal_total))]):e._e(),a(\"td\",{staticClass:\"overflow-hidden\"},[a(\"a\",{staticClass:\"set-course-button\",class:{hide:!(e.personalCourseListIsShow&&e.packageData.is_personal)},attrs:{disabled:!e.packageData.is_personal},on:{click:e.personalCourseListShow}},[e._v(\"\\n              配置上课范围  \\n              \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1)])]),e.personalCourseListIsShow&&e.packageData.is_personal?a(\"tr\",{staticClass:\"bg-row-even personal-course-list-content\"},[a(\"td\",{staticClass:\"rightline\",attrs:{colspan:\"2\"}}),a(\"td\",{staticClass:\"personal-course-table\",attrs:{colspan:\"4\"}},[a(\"div\",{class:e.add(\"personal-course-table\")},[a(\"st-form-table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"20%\"}}),a(\"col\",{staticStyle:{width:\"19%\"}}),a(\"col\",{staticStyle:{width:\"24%\"}}),a(\"col\",{staticStyle:{width:\"16%\"}}),a(\"col\",{staticStyle:{width:\"16%\"}})]),a(\"tr\",{staticClass:\"bg-thead th\"},[a(\"th\"),a(\"th\",[e._v(\"课程名称\")]),a(\"th\",[e._v(\"上课门店\")]),a(\"th\",[e._v(\"支持预约的\"+e._s(e.$c(\"coach\"))+\"等级\")]),a(\"th\",[e._v(\"授课\"+e._s(e.$c(\"coach\"))+\"数\")]),a(\"th\",[e._v(\"操作\")])]),a(\"tbody\",[a(\"tr\",{staticClass:\"checkbox border-bottom\"},[a(\"td\",{staticClass:\"personal-course-add-buton\",attrs:{colspan:\"6\"}},[a(\"st-button\",{attrs:{block:\"\",type:\"dashed\",icon:\"add\"},on:{click:e.addCoursePersonal}},[e._v(\"\\n                        新增私教课程\\n                      \")])],1)]),a(\"tr\",[a(\"td\",{attrs:{colspan:\"6\"}},[e.personalCourseList.length?e._e():a(\"p\",{staticStyle:{margin:\"0\",\"text-align\":\"center\"}},[e._v(\"\\n                        无数据\\n                      \")]),e.personalCourseList.length?a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{ stopPropagation: true }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseList1\"],expression:\"['personalCourseList1']\"}],staticClass:\"personal-course-content-table\"},e._l(e.personalCourseList,(function(t,s){return a(\"li\",{key:t.course_id,staticClass:\"checkbox checkbox-brand border-bottom\",class:{\"bg-row-odd\":s%2!==0,\"bg-row-even\":s%2===0}},[a(\"div\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{checked:t.courseChecked},on:{change:function(t){return e.courseItemCheckedChange(t,\"personal\",s)}}})],1),a(\"div\",[a(\"st-overflow-text\",{attrs:{maxWidth:\"120px\",value:t.course_name}})],1),a(\"div\",[a(\"st-overflow-text\",{attrs:{maxWidth:\"120px\",value:t.shop_name}})],1),a(\"div\",[a(\"a-dropdown\",{attrs:{placement:\"bottomRight\",trigger:[\"click\"]}},[a(\"a\",{attrs:{href:\"javascript:void(0)\"}},[e._v(\"\\n                                \"+e._s(t.coachGradeList.length===e.coachList.length?\"全部\":t.coachGradeList.length+\"个\")+\"等级  \\n                                \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1),a(\"a-checkbox-group\",{class:e.basic(\"personal-dropdown\"),attrs:{slot:\"overlay\"},on:{change:function(a){return e.coachItemChange(a,t.course_id,s)}},slot:\"overlay\",model:{value:t.coachGradeList,callback:function(a){e.$set(t,\"coachGradeList\",a)},expression:\"item.coachGradeList\"}},[a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{\\n                                    stopPropagation: true\\n                                  }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseListCoachGrade\"+s],expression:\"[\\n                                    `personalCourseListCoachGrade${index}`\\n                                  ]\"}],staticClass:\"personal-course-coach-grade-dropdown brand-page-package__personal-course-coach-grade-dropdown\"},e._l(e.coachList,(function(t,s){return a(\"li\",{key:s},[a(\"a-checkbox\",{attrs:{value:t.id}},[e._v(\"\\n                                      \"+e._s(t.setting_name)+\"\\n                                    \")])],1)})),0)])],1)],1),a(\"div\",[e._v(e._s(t.coach))]),a(\"div\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(a){return e.removeCourseItem(\"personal\",t.course_id)}}},[e._v(\"\\n                              删除\\n                            \")])])])})),0):e._e()])]),a(\"tr\",{staticClass:\"bg-thead checkbox checkbox-brand topline\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{indeterminate:e.personalIndeterminate,checked:e.personalCheckAll},on:{change:function(t){return e.checkAllChange(\"personal\")}}})],1),a(\"td\",[e._v(\"批量操作\")]),a(\"td\"),a(\"td\",[a(\"a-dropdown\",{attrs:{placement:\"bottomRight\",trigger:[\"click\"]},model:{value:e.coachAllOperationDropdownIsShow,callback:function(t){e.coachAllOperationDropdownIsShow=t},expression:\"coachAllOperationDropdownIsShow\"}},[a(\"a\",{attrs:{href:\"javascript:void(0)\"}},[e._v(\"\\n                          批量设置等级  \\n                          \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1),a(\"a-checkbox-group\",{staticClass:\"all\",class:e.basic(\"personal-dropdown\"),attrs:{slot:\"overlay\"},on:{change:e.coachAllChange},slot:\"overlay\",model:{value:e.personalAllOperationCoachList,callback:function(t){e.personalAllOperationCoachList=t},expression:\"personalAllOperationCoachList\"}},[a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{ stopPropagation: true }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseListCoachGradeAll\"],expression:\"['personalCourseListCoachGradeAll']\"}],staticClass:\"personal-course-coach-grade-dropdown brand-page-package__personal-course-coach-grade-dropdown\"},e._l(e.coachList,(function(t,s){return a(\"li\",{key:s},[a(\"a-checkbox\",{attrs:{value:t.id}},[e._v(\"\\n                                \"+e._s(t.setting_name)+\"\\n                              \")])],1)})),0),a(\"div\",{staticClass:\"personal-course-coach-grade-dropdown-button\"},[a(\"a\",{attrs:{href:\"javascript:void(0)\",disabled:!e.personalAllOperationCoachList.length},on:{click:e.coachAllOperationOk}},[e._v(\"\\n                              确定\\n                            \")])])])],1)],1),a(\"td\",[e._v(e._s(e.personalAllOperationCoachTotal))]),a(\"td\",[a(\"a\",{on:{click:function(t){return e.removeCourseItems(\"personal\")}}},[e._v(\"\\n                        删除\\n                      \")])])])])])],1)])]):e._e()])]),a(\"portal\",{attrs:{to:\"BRAND_PACKAGE_FORM_TOTAL\"}},[e.all_total?a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"总价\"}},[e._v(e._s(e.all_total)+\"元\")])],1)],1):e._e()],1)],1)])},i=[],n=(a(\"8e6e\"),a(\"456d\"),a(\"ac6a\"),a(\"6762\"),a(\"2fdb\"),a(\"7618\")),o=(a(\"c5f6\"),a(\"bd86\")),r=a(\"e98c\"),c=(a(\"2e47\"),a(\"ff5f\")),l=a(\"2ef0\"),u=(a(\"ae08\"),a(\"7ee8\"));function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(o[\"a\"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={name:\"AddCourseRangeTable\",bem:{add:\"page-shop-add-range-package\",basic:\"page-shop-add-basic-package\"},serviceInject:function(){return{addRangeService:c[\"AddRangePackageService\"]}},rxState:function(){return{coachList:this.addRangeService.coachList$}},computed:{team_total:function(){return+this.packageData.team_times&&+this.packageData.team_unit_price?this.packageData.team_times*(10*this.packageData.team_unit_price)/10:0},personal_total:function(){return+this.packageData.personal_times&&+this.packageData.personal_unit_price?this.packageData.personal_times*(10*this.packageData.personal_unit_price)/10:0},all_total:function(){var e=this.packageData.is_team?this.team_total:0,t=this.packageData.is_personal?this.personal_total:0;return e+t}},watch:{packageData:{handler:function(e,t){if(!e.is_team&&!e.is_personal)return this.$emit(\"change\",{}),\"\";if(e.is_team&&!this.teamCourseList.length)return this.$emit(\"change\",{}),!1;if(e.is_personal&&!this.personalCourseList.length)return this.$emit(\"change\",{}),!1;var a=0,s=0;a=+e.personal_times&&+e.personal_unit_price?e.personal_times*(10*e.personal_unit_price)/10:0,s=+e.team_times&&+e.team_unit_price?e.team_times*(10*e.team_unit_price)/10:0,this.allTotal=a+s,this.$emit(\"change\",this.getRangeCourse(d({team_range:this.teamCourseList},e,{personal_range:this.personalCourseList})))},deep:!0},teamCourseList:{handler:function(e,t){this.$emit(\"change\",this.getRangeCourse(d({team_range:e},this.packageData,{personal_range:this.personalCourseList})))},deep:!0},personalCourseList:{handler:function(e,t){this.$emit(\"change\",this.getRangeCourse(d({personal_range:e},this.packageData,{team_range:this.teamCourseList})))},deep:!0}},props:{useShopInfo:{type:Object,default:function(){}},initInfo:{type:Object,default:function(){return{}}},isLimit:{type:Number,default:0}},data:function(){return{personalCourseTotalList:[],personalCoachListHistory:[],personalCoachTotalList:[],teamIndeterminate:!1,personalIndeterminate:!1,personalCheckAll:!1,teamCourseListIsShow:!1,teamCourseTotalObject:{team_times:0,total:0},teamCourseTotalList:{},teamOperationObject:{team_times:void 0,team_unit_price:void 0},personalAllOperationCoachTotal:0,coachAllOperationDropdownIsShow:!1,personalAllOperationCoachList:[],personalOperationObject:{personal_times:void 0,personal_unit_price:void 0},personalCourseListIsShow:!1,personalCourseTotalObject:{personal_times:0,total:0},teamCourseList:[],personalCourseList:[],courseIsFirstInput:!0,teamCheckAll:!1,packageData:{is_team:!1,is_personal:!1,personal_times:void 0,team_times:void 0,team_unit_price:void 0,personal_unit_price:void 0},allTotal:0}},modals:{CourseSelectCourse:r[\"a\"]},filters:{course_item_total:function(e,t){return+e&&+t?10*+t*+e/10:0}},methods:{getRangeCourse:function(e){var t=Object(l[\"cloneDeep\"])(e);return\"object\"===Object(n[\"a\"])(t.personal_range)&&t.personal_range.length>0&&(t.personal_range=t.personal_range.map((function(e){var t=e.coachGradeList.map((function(e){return\"object\"!==Object(n[\"a\"])(e)?e:e.id}));return{course_id:e.course_id,coach_level:t}}))),\"object\"===Object(n[\"a\"])(t.team_range)&&(t.team_range=t.team_range.map((function(e){return e.course_id}))),e.is_team||(t.team_range=[]),e.is_personal||(t.personal_range=[]),t.is_team=+e.is_team,t.is_personal=+e.is_personal,t},coachAllChange:function(e){var t=Object(l[\"filter\"])(this.coachList,(function(t){return e.includes(t.id)}));this.personalAllOperationCoachTotal=Object(l[\"reduce\"])(t,(function(e,t){return e+t.coach_number}),0)},removeCourseItems:function(e){if(\"team\"===e){var t=Object(l[\"cloneDeep\"])(this.teamCourseList);Object(l[\"remove\"])(t,(function(e){return e.courseChecked})),this.teamCourseList=t}else if(\"personal\"===e){var a=Object(l[\"cloneDeep\"])(this.personalCourseList),s=Object(l[\"remove\"])(a,(function(e){return e.courseChecked}));this.personalCourseList=a;var i=Object(l[\"cloneDeep\"])(this.personalCoachTotalList);s.forEach((function(e){delete i[e.course_id]})),this.personalCoachTotalList=i}},coachItemChange:function(e,t,a){if(e.length){this.personalCoachListHistory[a]=Object(l[\"cloneDeep\"])(e),this.personalCoachTotalList[t]={},this.personalCoachTotalList[t].list=Object(l[\"cloneDeep\"])(e);var s=Object(l[\"filter\"])(this.coachList,(function(t){return e.includes(t.id)})),i=Object(l[\"reduce\"])(s,(function(e,t){return e+t.coach_number}),0);this.personalCoachTotalList[t].total=i,this.personalCourseList.forEach((function(e){e.course_id===t&&(e.coach=i)}))}else this.personalCourseList[a].coachGradeList=this.personalCoachListHistory[a]},courseItemCheckedChange:function(e,t,a){\"team\"===t?this.teamCourseList[a].courseChecked=e.target.checked:\"personal\"===t&&(this.personalCourseList[a].courseChecked=e.target.checked)},teamInputChange:function(e,t,a){this.teamCourseTotalList[a]=this.teamCourseTotalList[a]?this.teamCourseTotalList[a]:{},this.teamCourseTotalList[a][t]=e},removeCourseItem:function(e,t){if(\"team\"===e){var a=Object(l[\"cloneDeep\"])(this.teamCourseList);Object(l[\"remove\"])(a,(function(e){return e.course_id===t})),this.teamCourseList=a;var s=Object(l[\"cloneDeep\"])(this.teamCourseTotalList);delete s[t],this.teamCourseTotalList=s}else if(\"personal\"===e){var i=Object(l[\"cloneDeep\"])(this.personalCourseList);Object(l[\"remove\"])(i,(function(e){return e.course_id===t})),this.personalCourseList=i;var n=Object(l[\"cloneDeep\"])(this.personalCourseTotalList);delete n[t],this.personalCourseTotalList=n}},addCourseTeam:function(){var e=this;this.$modalRouter.push({name:\"course-select-course\",props:{platform:\"brand\",type:\"team\",useShopInfo:this.useShopInfo,courses:this.teamCourseList},on:{ok:function(t){t.list.forEach((function(e){e.courseChecked=!1,e.team_times=null,e.team_unit_price=null})),Object(l[\"forEach\"])(e.teamCourseTotalList,(function(a,s){Object(l[\"forEach\"])(t.list,(function(e){+e.course_id===+s&&(e.team_times=a.team_times,e.team_unit_price=a.team_unit_price)})),t.list.some((function(e){return+e.course_id===+s}))||delete e.teamCourseTotalList[s]})),e.teamCourseList=Object(l[\"cloneDeep\"])(t.list)}}})},addCoursePersonal:function(){var e=this;this.$modalRouter.push({name:\"course-select-course\",props:{platform:\"brand\",type:\"personal\",useShopInfo:this.useShopInfo,courses:this.personalCourseList},on:{ok:function(t){var a=[];Object(l[\"forEach\"])(e.coachList,(function(e){a.push(e.id)}));var s=Object(l[\"reduce\"])(e.coachList,(function(e,t){return e+t.coach_number}),0);t.list.forEach((function(e){e.courseChecked=!1,e.coachGradeList=a,e.coach=s})),Object(l[\"forEach\"])(e.personalCoachTotalList,(function(a,s){Object(l[\"forEach\"])(t.list,(function(e){+e.course_id===+s&&(e.coachGradeList=Object(l[\"cloneDeep\"])(a.list),e.coach=Object(l[\"cloneDeep\"])(a.total))})),t.list.some((function(e){return+e.course_id===+s}))||delete e.personalCoachTotalList[s]})),e.personalCoachListHistory=[],t.list.forEach((function(t){e.personalCoachListHistory.push(t.coachGradeList)})),e.personalCourseList=Object(l[\"cloneDeep\"])(t.list)}}})},teamCheckboxChange:function(e){this.courseIsFirstInput=!1,this.teamCourseListIsShow=+e.target.checked},personalCheckboxChange:function(e){this.courseIsFirstInput=!1,this.personalCourseListIsShow=+e.target.checked},teamCourseListShow:function(){this.teamCourseListIsShow=!this.teamCourseListIsShow},personalCourseListShow:function(){this.personalCourseListIsShow=!this.personalCourseListIsShow},checkAllChange:function(e){var t=this;\"team\"===e?(this.teamCheckAll=!this.teamCheckAll,this.teamCourseList.forEach((function(e){e.courseChecked=t.teamCheckAll}))):\"personal\"===e&&(this.personalCheckAll=!this.personalCheckAll,this.personalCourseList.forEach((function(e){e.courseChecked=t.personalCheckAll})))},timesOperationOk:function(e){var t=this;\"team\"===e?Object(l[\"forEach\"])(this.teamCourseList,(function(e){e.courseChecked&&(e.team_times=+t.teamOperationObject.team_times,t.teamCourseTotalList[e.course_id]=t.teamCourseTotalList[e.course_id]?t.teamCourseTotalList[e.course_id]:{},t.teamCourseTotalList[e.course_id].team_times=+t.teamOperationObject.team_times)})):\"personal\"===e&&Object(l[\"forEach\"])(this.personalCourseList,(function(e){e.courseChecked&&(e.personal_times=+t.personalOperationObject.personal_times,t.personalCourseTotalList[e.course_id]=t.personalCourseTotalList[e.course_id]?t.personalCourseTotalList[e.course_id]:{},t.personalCourseTotalList[e.course_id].personal_times=+t.personalOperationObject.personal_times)}))},unitPriceOperationOk:function(e){var t=this;\"team\"===e?Object(l[\"forEach\"])(this.teamCourseList,(function(e){e.courseChecked&&(e.team_unit_price=+t.teamOperationObject.team_unit_price,t.teamCourseTotalList[e.course_id]=t.teamCourseTotalList[e.course_id]?t.teamCourseTotalList[e.course_id]:{},t.teamCourseTotalList[e.course_id].team_unit_price=+t.teamOperationObject.team_unit_price)})):\"personal\"===e&&Object(l[\"forEach\"])(this.personalCourseList,(function(e){e.courseChecked&&(e.personal_unit_price=+t.personalOperationObject.personal_unit_price,t.personalCourseTotalList[e.course_id]=t.personalCourseTotalList[e.course_id]?t.personalCourseTotalList[e.course_id]:{},t.personalCourseTotalList[e.course_id].personal_unit_price=+t.personalOperationObject.personal_unit_price)}))},coachAllOperationOk:function(){var e=this;Object(l[\"forEach\"])(this.personalCourseList,(function(t){t.courseChecked&&(t.coachGradeList=Object(l[\"cloneDeep\"])(e.personalAllOperationCoachList),e.personalCourseTotalList[t.course_id]=e.personalCourseTotalList[t.course_id]?e.personalCourseTotalList[t.course_id]:{},e.personalCourseTotalList[t.course_id].list=Object(l[\"cloneDeep\"])(e.personalAllOperationCoachList))})),this.personalCoachListHistory=[],Object(l[\"forEach\"])(this.personalCourseList,(function(t){e.personalCoachListHistory.push(t.coachGradeList)})),this.personalAllOperationCoachList=[],this.coachAllOperationDropdownIsShow=!1}},created:function(){var e=this;if(Object(u[\"a\"])(this.initInfo))return\"\";this.packageData.is_team=!!this.initInfo.is_team,this.packageData.is_personal=!!this.initInfo.is_personal,this.packageData.personal_unit_price=this.initInfo.personal_unit_price,this.packageData.team_unit_price=this.initInfo.team_unit_price,this.initInfo.is_limit&&(this.packageData.personal_times=this.initInfo.personal_times,this.packageData.team_times=this.initInfo.team_times),this.teamCourseList=this.initInfo.team_range,this.personalCourseList=this.initInfo.personal_range.map((function(t){return e.$set(t,\"coachGradeList\",t.coach_level.map((function(e){return e.id}))),t}))},mounted:function(){this.addRangeService.getCoachList().subscribe()}},m=h,f=a(\"2877\"),_=Object(f[\"a\"])(m,s,i,!1,null,null,null);t[\"a\"]=_.exports},6827:function(e,t,a){\"use strict\";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"page-shop-add-basic-package  page-shop-add-range-package page-brand-add-fix-package\",class:e.add(\"course\")},[a(\"div\",[a(\"st-form-table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"10%\"}}),a(\"col\",{staticStyle:{width:\"24%\"}}),a(\"col\",{staticStyle:{width:\"18%\"}}),a(\"col\",{staticStyle:{width:\"18%\"}}),a(\"col\",{staticStyle:{width:\"25%\"}})]),a(\"tr\",{staticClass:\"bg-thead table-header\"},[a(\"th\"),a(\"th\",{staticClass:\"rightline pd-x16\"},[e._v(\"课程类型\")]),a(\"th\"),a(\"th\",{staticClass:\"pd-x16\"},[e._v(\"节数(节)\")]),a(\"th\",{staticClass:\"pd-x16\"},[e._v(\"小计(元)\")]),a(\"th\")]),a(\"tbody\",[a(\"tr\",{staticClass:\"bg-row-odd add-team checkbox border-bottom\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{on:{change:e.teamCheckboxChange},model:{value:e.packageData.is_team,callback:function(t){e.$set(e.packageData,\"is_team\",t)},expression:\"packageData.is_team\"}})],1),a(\"td\",{staticClass:\"rightline white-nowrap\"},[e._v(\"\\n            团体课程\\n          \")]),a(\"td\",{class:{\"add-team__item\":!!e.packageData.is_team}}),a(\"td\",[e._v(e._s(e.teamCourseTotalObject.team_times))]),a(\"td\",[e._v(e._s(e.teamCourseTotalObject.total))]),a(\"td\",{staticClass:\"overflow-hidden\"},[a(\"a\",{staticClass:\"set-course-button\",class:{hide:!(e.teamCourseListIsShow&&e.packageData.is_team)},attrs:{disabled:!e.packageData.is_team,href:\"javascript:void(0)\"},on:{click:e.teamCourseListShow}},[e._v(\"\\n              配置上课范围  \\n              \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1)])]),e.teamCourseListIsShow&&e.packageData.is_team?a(\"tr\",{staticClass:\"bg-row-odd team-course-list-content\"},[a(\"td\",{staticClass:\"rightline\",staticStyle:{\"background-color\":\"#fff\"},attrs:{colspan:\"2\"}}),a(\"td\",{staticClass:\"team-course-table\",attrs:{colspan:\"4\"}},[a(\"div\",{class:e.add(\"team-course-table\")},[a(\"st-form-table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"10%\"}}),a(\"col\",{staticStyle:{width:\"14%\"}}),a(\"col\",{staticStyle:{width:\"18%\"}}),a(\"col\",{staticStyle:{width:\"18%\"}}),a(\"col\",{staticStyle:{width:\"15%\"}}),a(\"col\",{staticStyle:{width:\"10%\"}})]),a(\"tr\",{staticClass:\"bg-thead th\"},[a(\"th\"),a(\"th\",[e._v(\"课程名称\")]),a(\"th\",[e._v(\"上课门店\")]),a(\"th\",[e._v(\"节数\")]),a(\"th\",[e._v(\"课时费\")]),a(\"th\",[e._v(\"总价(元)\")]),a(\"th\",[e._v(\"操作\")])]),a(\"tbody\",[a(\"tr\",{staticClass:\"checkbox border-bottom\"},[a(\"td\",{staticClass:\"team-course-add-buton\",attrs:{colspan:\"7\"}},[a(\"st-button\",{attrs:{block:\"\",type:\"dashed\",icon:\"add\"},on:{click:e.addCourseTeam}},[e._v(\"\\n                        新增团体课程\\n                      \")])],1)]),a(\"tr\",[a(\"td\",{attrs:{colspan:\"7\"}},[e.teamCourseList.length?e._e():a(\"p\",{staticClass:\"bg-row-even\",staticStyle:{margin:\"0\",\"text-align\":\"center\"}},[e._v(\"\\n                        无数据\\n                      \")])])]),e.teamCourseList.length?e._l(e.teamCourseList,(function(t,s){return a(\"tr\",{key:t.course_id,staticClass:\"checkbox border-bottom\",class:{\"bg-row-odd\":s%2!==0,\"bg-row-even\":s%2===0}},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{checked:t.courseChecked},on:{change:function(t){return e.courseItemCheckedChange(t,\"team\",s)}}})],1),a(\"td\",[a(\"st-overflow-text\",{attrs:{maxWidth:\"120px\",value:t.course_name}})],1),a(\"td\",[a(\"st-overflow-text\",{attrs:{maxWidth:\"120px\",value:t.shop_name}})],1),a(\"td\",[a(\"st-input-number\",{attrs:{min:1,max:99999},on:{change:function(a){return e.teamInputChange(a,\"team_times\",t.course_id)}},model:{value:t.team_times,callback:function(a){e.$set(t,\"team_times\",a)},expression:\"i.team_times\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                            节\\n                          \")])],2),e.validateTeam&&!t.team_times?a(\"span\",{staticStyle:{color:\"red\",\"font-size\":\"12px\"}},[e._v(\"\\n                          请填写节数\\n                        \")]):e._e()],1),a(\"td\",[a(\"st-input-number\",{attrs:{min:0,max:999999.9,float:!0},on:{change:function(a){return e.teamInputChange(a,\"team_unit_price\",t.course_id)}},model:{value:t.team_unit_price,callback:function(a){e.$set(t,\"team_unit_price\",a)},expression:\"i.team_unit_price\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                            元\\n                          \")])],2),e.validateTeam&&!t.team_unit_price?a(\"span\",{staticStyle:{color:\"red\",\"font-size\":\"12px\"}},[e._v(\"\\n                          请填写价格\\n                        \")]):e._e()],1),a(\"td\",[e._v(\"\\n                        \"+e._s(e._f(\"course_item_total\")(t.team_times,t.team_unit_price))+\"\\n                      \")]),a(\"td\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(a){return e.removeCourseItem(\"team\",t.course_id)}}},[e._v(\"\\n                          删除\\n                        \")])])])})):e._e(),a(\"tr\",{staticClass:\"bg-thead checkbox topline\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{indeterminate:e.teamIndeterminate,checked:e.teamCheckAll},on:{change:function(t){return e.checkAllChange(\"team\")}}})],1),a(\"td\",[e._v(\"批量操作\")]),a(\"td\"),a(\"td\",[a(\"st-input-number\",{attrs:{min:1,max:99999},model:{value:e.teamOperationObject.team_times,callback:function(t){e.$set(e.teamOperationObject,\"team_times\",t)},expression:\"teamOperationObject.team_times\"}},[a(\"a\",{attrs:{slot:\"addonAfter\",disabled:!+e.teamOperationObject.team_times},on:{click:function(t){return e.timesOperationOk(\"team\")}},slot:\"addonAfter\"},[e._v(\"\\n                          确定\\n                        \")])])],1),a(\"td\",[a(\"st-input-number\",{attrs:{min:0,max:999999.9,float:!0},model:{value:e.teamOperationObject.team_unit_price,callback:function(t){e.$set(e.teamOperationObject,\"team_unit_price\",t)},expression:\"teamOperationObject.team_unit_price\"}},[a(\"a\",{attrs:{slot:\"addonAfter\",disabled:!+e.teamOperationObject.team_unit_price},on:{click:function(t){return e.unitPriceOperationOk(\"team\")}},slot:\"addonAfter\"},[e._v(\"\\n                          确定\\n                        \")])])],1),a(\"td\",[e._v(\"\\n                      \"+e._s(e._f(\"course_item_total\")(e.teamOperationObject.team_times,e.teamOperationObject.team_unit_price))+\"\\n                    \")]),a(\"td\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(t){return e.removeCourseItems(\"team\")}}},[e._v(\"\\n                        删除\\n                      \")])])])],2)])],1)])]):e._e(),a(\"tr\",{staticClass:\"checkbox topline add-personal  border-bottom\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{on:{change:e.personalCheckboxChange},model:{value:e.packageData.is_personal,callback:function(t){e.$set(e.packageData,\"is_personal\",t)},expression:\"packageData.is_personal\"}})],1),a(\"td\",{staticClass:\"rightline\"},[e._v(\"私教课程\")]),a(\"td\",{class:{\"add-personal__item\":!!e.packageData.is_personal}}),a(\"td\",[e._v(e._s(e.personalCourseTotalObject.personal_times))]),a(\"td\",[e._v(e._s(e.personalCourseTotalObject.total))]),a(\"td\",{staticClass:\"overflow-hidden\"},[a(\"a\",{staticClass:\"set-course-button\",class:{hide:!(e.personalCourseListIsShow&&e.packageData.is_personal)},attrs:{disabled:!e.packageData.is_personal,href:\"javascript:void(0)\"},on:{click:e.personalCourseListShow}},[e._v(\"\\n              配置上课范围  \\n              \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1)])]),e.personalCourseListIsShow&&e.packageData.is_personal?a(\"tr\",{staticClass:\"personal-course-list-content\"},[a(\"td\",{staticClass:\"rightline\",attrs:{colspan:\"2\"}}),a(\"td\",{staticClass:\"personal-course-table\",attrs:{colspan:\"4\"}},[a(\"div\",{class:e.add(\"personal-course-table\")},[a(\"table\",[a(\"colgroup\",[a(\"col\",{staticStyle:{width:\"5%\"}}),a(\"col\",{staticStyle:{width:\"15%\"}}),a(\"col\",{staticStyle:{width:\"15%\"}}),a(\"col\",{staticStyle:{width:\"13%\"}}),a(\"col\",{staticStyle:{width:\"13%\"}}),a(\"col\",{staticStyle:{width:\"23%\"}}),a(\"col\",{staticStyle:{width:\"8%\"}}),a(\"col\",{staticStyle:{width:\"8%\"}})]),a(\"tr\",{staticClass:\"bg-thead th\"},[a(\"th\"),a(\"th\",[e._v(\"课程名称\")]),a(\"th\",[e._v(\"上课门店\")]),a(\"th\",[e._v(\"节数\")]),a(\"th\",[e._v(\"课时费\")]),a(\"th\",{staticClass:\"tg-c\"},[e._v(\"支持预约的\"+e._s(e.$c(\"coach\"))+\"等级\")]),a(\"th\",[e._v(\"总价(元)\")]),a(\"th\",[e._v(\"操作\")])]),a(\"tbody\",[a(\"tr\",{staticClass:\"checkbox border-bottom\"},[a(\"td\",{staticClass:\"personal-course-add-buton\",attrs:{colspan:\"8\"}},[a(\"st-button\",{attrs:{block:\"\",type:\"dashed\",icon:\"add\"},on:{click:e.addCoursePersonal}},[e._v(\"\\n                        新增私教课程\\n                      \")])],1)]),a(\"tr\",[a(\"td\",{attrs:{colspan:\"8\"}},[e.personalCourseList.length?e._e():a(\"p\",{staticClass:\"bg-row-even\",staticStyle:{margin:\"0\",\"text-align\":\"center\"}},[e._v(\"\\n                        无数据\\n                      \")])])]),e.personalCourseList.length?e._l(e.personalCourseList,(function(t,s){return a(\"tr\",{key:t.course_id,staticClass:\"checkbox border-bottom\",class:{\"bg-row-odd\":s%2!==0,\"bg-row-even\":s%2===0}},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{checked:t.courseChecked},on:{change:function(t){return e.courseItemCheckedChange(t,\"personal\",s)}}})],1),a(\"td\",[a(\"st-overflow-text\",{attrs:{\"max-width\":\"120px\",value:t.course_name}})],1),a(\"td\",[a(\"st-overflow-text\",{attrs:{maxWidth:\"120px\",value:t.shop_name}})],1),a(\"td\",[a(\"st-input-number\",{attrs:{min:1,max:99999},on:{change:function(a){return e.personalInputChange(a,\"personal_times\",t.course_id)}},model:{value:t.personal_times,callback:function(a){e.$set(t,\"personal_times\",a)},expression:\"item.personal_times\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                            节\\n                          \")])],2),e.validatePersonal&&!t.personal_times?a(\"span\",{staticStyle:{color:\"red\",\"font-size\":\"12px\"}},[e._v(\"\\n                          请填写节数\\n                        \")]):e._e()],1),a(\"td\",[a(\"st-input-number\",{attrs:{min:0,max:999999.9,float:!0},on:{change:function(a){return e.personalInputChange(a,\"personal_unit_price\",t.course_id)}},model:{value:t.personal_unit_price,callback:function(a){e.$set(t,\"personal_unit_price\",a)},expression:\"item.personal_unit_price\"}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                            元\\n                          \")])],2),e.validatePersonal&&!t.personal_unit_price?a(\"span\",{staticStyle:{color:\"red\",\"font-size\":\"12px\"}},[e._v(\"\\n                          请填写价格\\n                        \")]):e._e()],1),a(\"td\",{staticClass:\"tg-c\"},[a(\"a-dropdown\",{attrs:{placement:\"bottomRight\",trigger:[\"click\"]}},[a(\"a\",{attrs:{href:\"javascript:void(0)\"}},[e._v(\"\\n                            \"+e._s(t.coachGradeList.length===e.coachList.length?\"全部\":t.coachGradeList.length+\"个\")+\"等级  \\n                            \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1),a(\"a-checkbox-group\",{class:e.b(\"personal-dropdown\"),attrs:{slot:\"overlay\"},on:{change:function(a){return e.coachItemChange(a,t.course_id,s)}},slot:\"overlay\",model:{value:t.coachGradeList,callback:function(a){e.$set(t,\"coachGradeList\",a)},expression:\"item.coachGradeList\"}},[a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{\\n                                stopPropagation: true\\n                              }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseListCoachGrade\"+s],expression:\"[\\n                                `personalCourseListCoachGrade${index}`\\n                              ]\"}],staticClass:\"personal-course-coach-grade-dropdown brand-page-package__personal-course-coach-grade-dropdown\"},e._l(e.coachList,(function(t,s){return a(\"li\",{key:s},[a(\"a-checkbox\",{attrs:{value:t.id}},[e._v(\"\\n                                  \"+e._s(t.setting_name)+\"\\n                                \")])],1)})),0)])],1)],1),a(\"td\",[e._v(\"\\n                        \"+e._s(e._f(\"course_item_total\")(t.personal_times,t.personal_unit_price))+\"\\n                      \")]),a(\"td\",[a(\"a\",{on:{click:function(a){return e.removeCourseItem(\"personal\",t.course_id)}}},[e._v(\"\\n                          删除\\n                        \")])])])})):e._e(),a(\"tr\",{staticClass:\"bg-thead checkbox topline\"},[a(\"td\",{staticClass:\"tg-c\"},[a(\"a-checkbox\",{attrs:{indeterminate:e.personalIndeterminate,checked:e.personalCheckAll},on:{change:function(t){return e.checkAllChange(\"personal\")}}})],1),a(\"td\",[e._v(\"批量操作\")]),a(\"td\"),a(\"td\",{staticClass:\"batch-sure\"},[a(\"st-input-number\",{attrs:{min:1,max:99999},model:{value:e.personalOperationObject.personal_times,callback:function(t){e.$set(e.personalOperationObject,\"personal_times\",t)},expression:\"personalOperationObject.personal_times\"}},[a(\"a\",{attrs:{slot:\"addonAfter\",disabled:!+e.personalOperationObject.personal_times,href:\"javascript:void(0)\"},on:{click:function(t){return e.timesOperationOk(\"personal\")}},slot:\"addonAfter\"},[e._v(\"\\n                          确定\\n                        \")])])],1),a(\"td\",{staticClass:\"batch-sure\"},[a(\"st-input-number\",{attrs:{min:0,max:999999.9,float:!0},model:{value:e.personalOperationObject.personal_unit_price,callback:function(t){e.$set(e.personalOperationObject,\"personal_unit_price\",t)},expression:\"personalOperationObject.personal_unit_price\"}},[a(\"a\",{attrs:{slot:\"addonAfter\",disabled:!+e.personalOperationObject.personal_unit_price,href:\"javascript:void(0)\"},on:{click:function(t){return e.unitPriceOperationOk(\"personal\")}},slot:\"addonAfter\"},[e._v(\"\\n                          确定\\n                        \")])])],1),a(\"td\",{staticClass:\"tg-c\"},[a(\"a-dropdown\",{attrs:{placement:\"bottomRight\",trigger:[\"click\"]},model:{value:e.coachAllOperationDropdownIsShow,callback:function(t){e.coachAllOperationDropdownIsShow=t},expression:\"coachAllOperationDropdownIsShow\"}},[a(\"a\",{attrs:{href:\"javascript:void(0)\"}},[e._v(\"\\n                          批量设置等级  \\n                          \"),a(\"st-icon\",{staticClass:\"icon-12\",attrs:{type:\"down-small\"}})],1),a(\"a-checkbox-group\",{staticClass:\"all page-shop-add-basic-package__personal-dropdown\",attrs:{slot:\"overlay\"},slot:\"overlay\",model:{value:e.personalAllOperationCoachList,callback:function(t){e.personalAllOperationCoachList=t},expression:\"personalAllOperationCoachList\"}},[a(\"ul\",{directives:[{name:\"scrollBar\",rawName:\"v-scrollBar\",value:{stopPropagation:!0},expression:\"{ stopPropagation: true }\"},{name:\"decorator\",rawName:\"v-decorator\",value:[\"personalCourseListCoachGradeAll\"],expression:\"['personalCourseListCoachGradeAll']\"}],staticClass:\"personal-course-coach-grade-dropdown brand-page-package__personal-course-coach-grade-dropdown \"},e._l(e.coachList,(function(t,s){return a(\"li\",{key:s},[a(\"a-checkbox\",{attrs:{value:t.id}},[e._v(\"\\n                                \"+e._s(t.setting_name)+\"\\n                              \")])],1)})),0),a(\"div\",{staticClass:\"personal-course-coach-grade-dropdown-button\"},[a(\"a\",{attrs:{disabled:!e.personalAllOperationCoachList.length},on:{click:e.coachAllOperationOk}},[e._v(\"\\n                              确定\\n                            \")])])])],1)],1),a(\"td\",[e._v(\"\\n                      \"+e._s(e._f(\"course_item_total\")(e.personalOperationObject.personal_times,e.personalOperationObject.personal_unit_price))+\"\\n                    \")]),a(\"td\",[a(\"a\",{attrs:{href:\"javascript:void(0)\"},on:{click:function(t){return e.removeCourseItems(\"personal\")}}},[e._v(\"\\n                        删除\\n                      \")])])])],2)])])])]):e._e()])]),a(\"portal\",{attrs:{to:\"BRAND_PACKAGE_FORM_TOTAL\"}},[a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"总价\"}},[e._v(\"\\n            \"+e._s(e.personalCourseTotalObject.total+e.teamCourseTotalObject.total)+\"元\\n          \")])],1)],1)],1)],1)])},i=[],n=(a(\"8e6e\"),a(\"456d\"),a(\"6762\"),a(\"7618\")),o=(a(\"ac6a\"),a(\"bd86\")),r=a(\"e98c\"),c=(a(\"2e47\"),a(\"135c\")),l=a(\"2ef0\"),u=a(\"7ee8\");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(o[\"a\"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={name:\"AddCourseFixTable\",bem:{add:\"page-shop-add-fix-package\",b:\"page-shop-add-basic-package\"},serviceInject:function(){return{addFixService:c[\"AddFixPackageService\"]}},rxState:function(){return{coachList:this.addFixService.coachList$}},computed:{all_total:function(){var e=this.packageData.is_team?this.teamCourseTotalObject.total:0,t=this.packageData.is_personal?this.personalCourseTotalObject.total:0;return e+t}},props:{initInfo:{type:Object,default:function(){return{}}},useShopInfo:{type:Object,default:function(){}}},watch:{packageData:{handler:function(e,t){return e.is_team||e.is_personal?e.is_team&&!this.teamCourseList.length||e.is_personal&&!this.personalCourseList.length?(this.$emit(\"change\",{}),!1):void this.$emit(\"change\",this.getRangeCourse(d({team_range:this.teamCourseList},e,{personal_range:this.personalCourseList}))):(this.$emit(\"change\",{}),\"\")},deep:!0},teamCourseList:{handler:function(e,t){var a=this,s=!1,i=!1;s=Object(l[\"every\"])(e,(function(e){return e.courseChecked})),i=Object(l[\"every\"])(e,(function(e){return!e.courseChecked})),this.teamIndeterminate=!s&&!i,this.teamCheckAll=!!e.length&&s,e.forEach((function(e){a.validateTeam=!e.team_times||!e.team_unit_price})),this.teamCourseTotalObject.team_times=Object(l[\"reduce\"])(e,(function(e,t){var a=isNaN(+t.team_times)?0:+t.team_times;return e+a}),0),this.teamCourseTotalObject.total=Object(l[\"reduce\"])(e,(function(e,t){var a=isNaN(+t.team_times)?0:+t.team_times,s=isNaN(+t.team_unit_price)?0:+t.team_unit_price;return e+a*(10*s)/10}),0),this.validateTeam?this.$emit(\"change\",{}):this.$emit(\"change\",this.getRangeCourse(d({personal_range:this.personalCourseList},this.packageData,{team_range:e})))},deep:!0},personalCourseList:{handler:function(e,t){var a=this;e.forEach((function(e){a.validatePersonal=!e.personal_times||!e.personal_unit_price}));var s=!1,i=!1;s=Object(l[\"every\"])(e,(function(e){return e.courseChecked})),i=Object(l[\"every\"])(e,(function(e){return!e.courseChecked})),this.personalIndeterminate=!s&&!i,this.personalCheckAll=!!e.length&&s,this.personalCourseTotalObject.personal_times=Object(l[\"reduce\"])(e,(function(e,t){var a=isNaN(+t.personal_times)?0:+t.personal_times;return e+a}),0),this.personalCourseTotalObject.total=Object(l[\"reduce\"])(e,(function(e,t){var a=isNaN(+t.personal_times)?0:+t.personal_times,s=isNaN(+t.personal_unit_price)?0:+t.personal_unit_price;return e+a*(10*s)/10}),0),this.validatePersonal?this.$emit(\"change\",{}):this.$emit(\"change\",this.getRangeCourse(d({personal_range:e},this.packageData,{team_range:this.teamCourseList})))},deep:!0}},data:function(){return{isCourseRange:!1,validateTeam:!1,validatePersonal:!1,personalCoachTotalList:{},personalCoachListHistory:[],teamIndeterminate:!1,personalIndeterminate:!1,personalCheckAll:!1,teamCourseListIsShow:!1,teamCourseTotalObject:{team_times:0,total:0},teamCourseTotalList:{},teamOperationObject:{team_times:void 0,team_unit_price:void 0},coachAllOperationDropdownIsShow:!1,personalAllOperationCoachList:[],personalOperationObject:{personal_times:void 0,personal_unit_price:void 0},personalCourseListIsShow:!1,personalCourseTotalObject:{personal_times:0,total:0},personalCourseTotalList:[],teamCourseList:[],personalCourseList:[],courseIsFirstInput:!0,teamCheckAll:!1,packageData:{is_team:!1,is_personal:!1},validateCourseRange:\"\"}},modals:{CourseSelectCourse:r[\"a\"]},filters:{course_item_total:function(e,t){return+e&&+t?10*+t*+e/10:0}},methods:{removeCourseItems:function(e){if(\"team\"===e){var t=Object(l[\"cloneDeep\"])(this.teamCourseList),a=Object(l[\"remove\"])(t,(function(e){return e.courseChecked}));this.teamCourseList=t;var s=Object(l[\"cloneDeep\"])(this.teamCourseTotalList);a.forEach((function(e){delete s[e.course_id]})),this.teamCourseTotalList=s}else if(\"personal\"===e){var i=Object(l[\"cloneDeep\"])(this.personalCourseList),n=Object(l[\"remove\"])(i,(function(e){return e.courseChecked}));this.personalCourseList=i;var o=Object(l[\"cloneDeep\"])(this.personalCourseTotalList);n.forEach((function(e){delete o[e.course_id]})),this.personalCourseTotalList=o}},getRangeCourse:function(e){var t=Object(l[\"cloneDeep\"])(e);return\"object\"===Object(n[\"a\"])(t.personal_range)&&(t.personal_range=t.personal_range.map((function(e){return{personal_unit_price:e.personal_unit_price,personal_times:e.personal_times,course_id:e.course_id,coach_level:e.coachGradeList.map((function(e){return\"number\"===typeof e?e:e.id}))}}))),\"object\"===Object(n[\"a\"])(t.team_range)&&(t.team_range=t.team_range.map((function(e){return{team_unit_price:e.team_unit_price,team_times:e.team_times,course_id:e.course_id}}))),e.is_team||(t.team_range=[]),e.is_personal||(t.personal_range=[]),t.is_team=+e.is_team,t.is_personal=+e.is_personal,t},coachItemChange:function(e,t,a){e.length?(this.personalCoachListHistory[a]=Object(l[\"cloneDeep\"])(e),this.personalCourseTotalList[t]=this.personalCourseTotalList[t]?this.personalCourseTotalList[t]:{},this.personalCourseTotalList[t].list=Object(l[\"cloneDeep\"])(e)):this.personalCourseList[a].coachGradeList=this.personalCoachListHistory[a]},teamInputChange:function(e,t,a){this.teamCourseTotalList[a]=this.teamCourseTotalList[a]?this.teamCourseTotalList[a]:{},this.teamCourseTotalList[a][t]=e},courseItemCheckedChange:function(e,t,a){\"team\"===t?this.teamCourseList[a].courseChecked=e.target.checked:\"personal\"===t&&(this.personalCourseList[a].courseChecked=e.target.checked)},personalInputChange:function(e,t,a){this.personalCourseTotalList[a]=this.personalCourseTotalList[a]?this.personalCourseTotalList[a]:{},this.personalCourseTotalList[a][t]=e},removeCourseItem:function(e,t){if(\"team\"===e){var a=Object(l[\"cloneDeep\"])(this.teamCourseList);Object(l[\"remove\"])(a,(function(e){return e.course_id===t})),this.teamCourseList=a;var s=Object(l[\"cloneDeep\"])(this.teamCourseTotalList);delete s[t],this.teamCourseTotalList=s}else if(\"personal\"===e){var i=Object(l[\"cloneDeep\"])(this.personalCourseList);Object(l[\"remove\"])(i,(function(e){return e.course_id===t})),this.personalCourseList=i;var n=Object(l[\"cloneDeep\"])(this.personalCourseTotalList);delete n[t],this.personalCourseTotalList=n}},addCourseTeam:function(){var e=this;this.$modalRouter.push({name:\"course-select-course\",props:{platform:\"brand\",type:\"team\",useShopInfo:this.useShopInfo,courses:this.teamCourseList,isLimit:!0},on:{ok:function(t){t.list.forEach((function(e){e.courseChecked=!1,e.team_times=e.team_times?+e.team_times:0,e.team_unit_price=e.team_unit_price?+e.team_unit_price:0})),Object(l[\"forEach\"])(e.teamCourseTotalList,(function(a,s){Object(l[\"forEach\"])(t.list,(function(e){+e.course_id===+s&&(e.team_times=a.team_times?+a.team_times:0,e.team_unit_price=a.team_unit_price?+a.team_unit_price:0)})),t.list.some((function(e){return+e.course_id===+s}))||delete e.teamCourseTotalList[s]})),e.teamCourseList=Object(l[\"cloneDeep\"])(t.list)}}})},addCoursePersonal:function(){var e=this;this.$modalRouter.push({name:\"course-select-course\",props:{platform:\"brand\",type:\"personal\",useShopInfo:this.useShopInfo,courses:this.personalCourseList,isLimit:!0},on:{ok:function(t){var a=[];Object(l[\"forEach\"])(e.coachList,(function(e){a.push(e.id)}));Object(l[\"reduce\"])(e.coachList,(function(e,t){return e+t.coach_number}),0);t.list.forEach((function(e){e.courseChecked=!1,e.coachGradeList=a,e.personal_times=e.personal_times?+e.personal_times:0,e.personal_unit_price=e.personal_unit_price?+e.personal_unit_price:0})),Object(l[\"forEach\"])(e.personalCourseTotalList,(function(s,i){Object(l[\"forEach\"])(t.list,(function(e){+e.course_id===+i&&(e.coachGradeList=Object(l[\"cloneDeep\"])(s.list?s.list:a),e.personal_times=s.personal_times?+s.personal_times:0,e.personal_unit_price=s.personal_unit_price?+s.personal_unit_price:0)})),t.list.some((function(e){return+e.course_id===+i}))||delete e.personalCourseTotalList[i]})),e.personalCoachListHistory=[],t.list.forEach((function(t){e.personalCoachListHistory.push(t.coachGradeList)})),e.personalCourseList=Object(l[\"cloneDeep\"])(t.list),e.personalCourseList.forEach((function(e){e.coachGradeList&&e.coachGradeList.length>0&&(e.coachGradeList=e.coachGradeList.map((function(e){return e.id||e})))}))}}})},teamCheckboxChange:function(e){this.courseIsFirstInput=!1,this.teamCourseListIsShow=+e.target.checked},personalCheckboxChange:function(e){this.courseIsFirstInput=!1,this.personalCourseListIsShow=+e.target.checked},teamCourseListShow:function(){this.teamCourseListIsShow=!this.teamCourseListIsShow},personalCourseListShow:function(){this.personalCourseListIsShow=!this.personalCourseListIsShow},checkAllChange:function(e){var t=this;\"team\"===e?(this.teamCheckAll=!this.teamCheckAll,this.teamCourseList.forEach((function(e){e.courseChecked=t.teamCheckAll}))):\"personal\"===e&&(this.personalCheckAll=!this.personalCheckAll,this.personalCourseList.forEach((function(e){e.courseChecked=t.personalCheckAll})))},timesOperationOk:function(e){var t=this;\"team\"===e?Object(l[\"forEach\"])(this.teamCourseList,(function(e){e.courseChecked&&(e.team_times=+t.teamOperationObject.team_times,t.teamCourseTotalList[e.course_id]=t.teamCourseTotalList[e.course_id]?t.teamCourseTotalList[e.course_id]:{},t.teamCourseTotalList[e.course_id].team_times=+t.teamOperationObject.team_times)})):\"personal\"===e&&Object(l[\"forEach\"])(this.personalCourseList,(function(e){if(e.courseChecked){e.personal_times=+t.personalOperationObject.personal_times;var a=t.personalCourseTotalList[e.course_id]?t.personalCourseTotalList[e.course_id]:{},s=+t.personalOperationObject.personal_times;t.personalCourseTotalList[e.course_id]=d({},a,{personal_times:s})}}))},unitPriceOperationOk:function(e){var t=this;\"team\"===e?Object(l[\"forEach\"])(this.teamCourseList,(function(e){e.courseChecked&&(e.team_unit_price=+t.teamOperationObject.team_unit_price,t.teamCourseTotalList[e.course_id]=t.teamCourseTotalList[e.course_id]?t.teamCourseTotalList[e.course_id]:{},t.teamCourseTotalList[e.course_id].team_unit_price=+t.teamOperationObject.team_unit_price)})):\"personal\"===e&&Object(l[\"forEach\"])(this.personalCourseList,(function(e){e.courseChecked&&(e.personal_unit_price=+t.personalOperationObject.personal_unit_price,t.personalCourseTotalList[e.course_id]=t.personalCourseTotalList[e.course_id]?t.personalCourseTotalList[e.course_id]:{},t.personalCourseTotalList[e.course_id].personal_unit_price=+t.personalOperationObject.personal_unit_price)}))},coachAllOperationOk:function(){var e=this;Object(l[\"forEach\"])(this.personalCourseList,(function(t){t.courseChecked&&(t.coachGradeList=Object(l[\"cloneDeep\"])(e.personalAllOperationCoachList),e.personalCourseTotalList[t.course_id]=e.personalCourseTotalList[t.course_id]?e.personalCourseTotalList[t.course_id]:{},e.personalCourseTotalList[t.course_id].list=Object(l[\"cloneDeep\"])(e.personalAllOperationCoachList))})),this.personalCoachListHistory=[],Object(l[\"forEach\"])(this.personalCourseList,(function(t){e.personalCoachListHistory.push(t.coachGradeList)})),this.personalAllOperationCoachList=[],this.coachAllOperationDropdownIsShow=!1}},created:function(){var e=this;if(Object(u[\"a\"])(this.initInfo))return\"\";this.packageData.is_team=this.initInfo.is_team,this.packageData.is_personal=this.initInfo.is_personal,this.packageData.personal_unit_price=this.initInfo.personal_unit_price,this.packageData.team_unit_price=this.initInfo.team_unit_price,Object(l[\"forEach\"])(this.initInfo.team_range,(function(t){e.teamCourseList.push(d({courseChecked:!1},t)),e.teamCourseTotalList[t.course_id]=e.teamCourseTotalList[t.course_id]||{},e.teamCourseTotalList[t.course_id].team_times=t.team_times,e.teamCourseTotalList[t.course_id].team_unit_price=t.team_unit_price})),Object(l[\"forEach\"])(this.initInfo.personal_range,(function(t){var a=[];t.coach_level.forEach((function(e){a.push(e.id)}));var s=Object(l[\"filter\"])(e.coachList,(function(e){return a.includes(e.id)})),i=Object(l[\"reduce\"])(s,(function(e,t){return e+t.coach_number}),0);e.personalCourseList.push(d({courseChecked:!1},t,{coachGradeList:a,coach:i})),e.personalCoachTotalList[t.course_id]=e.personalCoachTotalList[t.course_id]||{},e.personalCoachTotalList[t.course_id].list=Object(l[\"cloneDeep\"])(t.coach_level),e.personalCoachTotalList[t.course_id].total=i,e.personalCoachListHistory.push(Object(l[\"cloneDeep\"])(t.coach_level.map((function(e){return e.id}))))}))},mounted:function(){this.addFixService.getCoachList().subscribe()}},m=h,f=a(\"2877\"),_=Object(f[\"a\"])(m,s,i,!1,null,null,null);t[\"a\"]=_.exports},6870:function(e,t,a){\"use strict\";var s,i,n,o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"st-modal\",{attrs:{title:\"上架课程包\",okText:\"确认上架\",confirmLoading:e.loading$.getUpShelfInfo,wrapClassName:\"modal-shop-product-course-package\"},on:{ok:e.onOnsale},model:{value:e.show,callback:function(t){e.show=t},expression:\"show\"}},[a(\"st-form\",{attrs:{form:e.form}},[a(\"st-form-item\",{attrs:{label:\"课程包名称\",labelWidth:\"128px\"}},[e._v(\"\\n      \"+e._s(e.info$.course_name)+\"\\n    \")]),a(\"st-form-item\",{attrs:{label:\"当前上架门店\",labelWidth:\"128px\"}},[e._v(\"\\n      \"+e._s(e.info$.upshelf_shop_num)+\"\\n    \")]),a(\"st-form-item\",{attrs:{label:\"支持售卖门店数\",labelWidth:\"128px\"}},[e._v(\"\\n      \"+e._s(e.info$.support_shop_num)+\"\\n    \")]),a(\"st-form-item\",{attrs:{label:\"支持售卖时间\",labelWidth:\"128px\",required:\"\"}},[a(\"st-range-picker\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"shop\"===e.channel,expression:\"channel === 'shop'\"},{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.sale_date,expression:\"decorators.sale_date\"}],attrs:{disabledDays:180},on:{change:e.onSaleDate}}),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"brand\"===e.channel,expression:\"channel === 'brand'\"}]},[e._v(e._s(e.saleDate))])],1)],1)],1)},r=[],c=(a(\"8e6e\"),a(\"ac6a\"),a(\"456d\"),a(\"bd86\")),l=(a(\"c5f6\"),a(\"d225\")),u=a(\"b0b4\"),p=a(\"9ab4\"),d=a(\"ecc1\"),h=a(\"0cd5\"),m=a(\"df29\"),f=a(\"c4cc\"),_=a(\"e69b\"),b=function(){function e(t,a){Object(l[\"a\"])(this,e),this.api=t,this.msg=a,this.loading$=new m[\"d\"]({}),this.info$=new m[\"d\"]([])}return Object(u[\"a\"])(e,[{key:\"getUpShelfInfo\",value:function(e){var t=this;return this.api.getUpShelf(e).pipe(Object(f[\"a\"])((function(e){t.info$.commit((function(){return e.info}))})))}},{key:\"setUpShelf\",value:function(e){var t=this;return this.api.setUpShelf(e).pipe(Object(f[\"a\"])((function(e){t.msg.success({content:\"课程包上架成功\"})})))}}]),e}();Object(p[\"b\"])([Object(m[\"c\"])(),Object(p[\"d\"])(\"design:type\",Function),Object(p[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof d[\"QueryInput\"]&&d[\"QueryInput\"])?s:Object]),Object(p[\"d\"])(\"design:returntype\",void 0)],b.prototype,\"getUpShelfInfo\",null),b=Object(p[\"b\"])([Object(h[\"b\"])(),Object(p[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(i=\"undefined\"!==typeof d[\"a\"]&&d[\"a\"])?i:Object,\"function\"===typeof(n=\"undefined\"!==typeof _[\"a\"]&&_[\"a\"])?n:Object])],b);var g=a(\"c32d\"),v=a.n(g),O=function(e){return{sale_date:{rules:[{validator:function(e,t,a){return t?v()(t[1])<v()()?\"支持售卖时间已过，请重新编辑时间\":void 0:\"请填写售卖时间\"}}],initialValue:[e.info$.sale_start_time,e.info$.sale_end_time]}}};function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){Object(c[\"a\"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={name:\"ModalPackageOnSale\",bem:{bModal:\"modal-package-on-sale\"},serviceInject:function(){return{service:b}},serviceProviders:function(){return[b]},rxState:function(){var e=this.service,t=e.info$,a=e.loading$;return{info$:t,loading$:a}},data:function(){var e=this.$stForm.create(),t=e.decorators(O);return{form:e,decorators:t,show:!1,sale_start_time:\"\",sale_end_time:\"\"}},props:{id:{type:[String,Number]},channel:{type:String}},computed:{saleDate:function(){return\"\".concat(moment(this.sale_start_time).format(\"YYYY-MM-DD\"),\" ~ \").concat(moment(this.sale_end_time).format(\"YYYY-MM-DD\"))}},methods:{onOnsale:function(){var e=this;this.form.validate().then((function(t){var a={id:e.id};\"shop\"===e.channel&&(a=k({},a,{sale_start_time:e.sale_start_time,sale_end_time:e.sale_end_time})),e.service.setUpShelf(a).subscribe((function(t){e.$emit(\"success\"),e.show=!1}))}))},onSaleDate:function(e){this.sale_start_time=moment(e[0]).format(\"YYYY-MM-DD\"),this.sale_end_time=moment(e[1]).format(\"YYYY-MM-DD\")}},created:function(){var e=this;this.service.getUpShelfInfo({id:this.id}).subscribe((function(t){e.$nextTick().then((function(){e.form.setFieldsValue({sale_date:[t.info.sale_start_time,t.info.sale_end_time]}),e.sale_start_time=moment(t.info.sale_start_time).format(\"YYYY-MM-DD\"),e.sale_end_time=moment(t.info.sale_end_time).format(\"YYYY-MM-DD\")}))}))}},j=y,S=a(\"2877\"),L=Object(S[\"a\"])(j,o,r,!1,null,null,null);t[\"a\"]=L.exports},\"6bba\":function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"st-panel\",{class:e.b(),attrs:{app:\"\"}},[a(\"div\",{attrs:{slot:\"title\"},slot:\"title\"},[a(\"st-input-search\",{attrs:{placeholder:\"课程包名称\"},on:{search:function(t){return e.onSingleSearch(\"course_name\",t,!0)}},model:{value:e.$searchQuery.course_name,callback:function(t){e.$set(e.$searchQuery,\"course_name\",t)},expression:\"$searchQuery.course_name\"}})],1),a(\"div\",{class:e.b(\"operation\")},[a(\"router-link\",{attrs:{to:\"./add-select\"}},[a(\"st-button\",{attrs:{type:\"primary\",disabled:!e.auth$.add,icon:\"add\"}},[e._v(\"\\n        新增课程包\\n      \")])],1),a(\"div\",{class:e.b(\"select-group\")},[a(\"a-select\",{staticClass:\"mg-r16\",class:e.b(\"select\"),staticStyle:{width:\"160px\"},attrs:{options:e.supportNum$},on:{change:function(t){return e.onSingleSearch(\"support_num\",t)}},model:{value:e.$searchQuery.support_num,callback:function(t){e.$set(e.$searchQuery,\"support_num\",t)},expression:\"$searchQuery.support_num\"}}),a(\"a-select\",{class:e.b(\"select\"),staticStyle:{width:\"160px\"},attrs:{options:e.packageType$},on:{change:function(t){return e.onSingleSearch(\"package_type\",t)}},model:{value:e.$searchQuery.package_type,callback:function(t){e.$set(e.$searchQuery,\"package_type\",t)},expression:\"$searchQuery.package_type\"}}),a(\"a-select\",{staticClass:\"mg-l16\",class:e.b(\"select\"),staticStyle:{width:\"160px\"},attrs:{options:e.publicChannel$},on:{change:function(t){return e.onSingleSearch(\"publish_channel\",t)}},model:{value:e.$searchQuery.publish_channel,callback:function(t){e.$set(e.$searchQuery,\"publish_channel\",t)},expression:\"$searchQuery.publish_channel\"}})],1)],1),a(\"st-table\",{staticClass:\"mg-t16\",attrs:{page:e.page$,columns:e.columns,rowKey:\"package_course_id\",dataSource:e.list$,loading:e.loading$.getList},on:{change:e.onTableChange},scopedSlots:e._u([{key:\"package_type\",fn:function(t){return[e._v(\"\\n      \"+e._s(e._f(\"enumFilter\")(t,\"package_course.package_type\"))+\"\\n    \")]}},{key:\"valid_time\",fn:function(t,s){return[a(\"span\",{staticClass:\"white-nowrap\"},[e._v(\"\\n        \"+e._s(t)+\"\\n        \"+e._s(e._f(\"enumFilter\")(s.valid_time_unit,\"package_course.valid_time_unit\"))+\"\\n      \")])]}},{key:\"sale_shop_num\",fn:function(t,s){return[a(\"a\",{on:{click:function(t){return e.getShopList(s.package_course_id)}}},[e._v(\"\\n        \"+e._s(s.up_shop_num+\" / \"+t)+\"\\n      \")])]}},{key:\"action\",fn:function(t,s){return a(\"div\",{},[a(\"st-table-actions\",[s.auth[\"brand:product:package_course|edit\"]?a(\"a\",{on:{click:function(t){return e.onEdit(s.package_course_id,s.package_type)}}},[e._v(\"\\n          编辑\\n        \")]):e._e(),s.auth[\"brand:product:package_course|get\"]?a(\"a\",{on:{click:function(t){return e.onDetail(s.package_course_id,s.package_type)}}},[e._v(\"\\n          详情\\n        \")]):e._e(),s.auth[\"brand:product:package_course|up\"]?a(\"a\",{on:{click:function(t){return e.onUpShelf(s.package_course_id,s.publish_channel)}}},[e._v(\"\\n          上架\\n        \")]):e._e(),s.auth[\"brand:product:package_course|down\"]?a(\"a\",{on:{click:function(t){return e.onDownShelf(s.package_course_id,s.course_name)}}},[e._v(\"\\n          下架\\n        \")]):e._e(),s.auth[\"brand:product:package_course|batch_operate\"]?a(\"a\",{on:{click:function(t){return e.batchOperate(s.package_course_id,s.course_name)}}},[e._v(\"\\n          应用至售出\\n        \")]):e._e(),s.auth[\"brand:product:package_course|del\"]?a(\"a\",{on:{click:function(t){return e.deletePackage(s.package_course_id,s.course_name)}}},[e._v(\"\\n          删除\\n        \")]):e._e()])],1)}}])})],1)},i=[],n=a(\"bd86\"),o=a(\"efb14\"),r=a(\"ea3e\"),c=(a(\"a481\"),function(){return[{title:\"课程包名称\",width:175,dataIndex:\"course_name\"},{title:\"课程包分类\",dataIndex:\"package_type\",scopedSlots:{customRender:\"package_type\"}},{title:\"团课/私教(节)\",dataIndex:\"totalTimesText\",scopedSlots:{customRender:\"totalTimesText\"}},{title:\"有效期\",dataIndex:\"valid_time\",scopedSlots:{customRender:\"valid_time\"}},{title:\"售卖价格(元)\",dataIndex:\"price\",scopedSlots:{customRender:\"price\"}},{title:\"已上架/支持售卖门店\",dataIndex:\"sale_shop_num\",width:175,scopedSlots:{customRender:\"sale_shop_num\"}},{title:\"支持售卖时间\",dataIndex:\"sale_time\",scopedSlots:{customRender:\"sale_time\"}},{title:\"发布渠道\",dataIndex:\"channelName\",scopedSlots:{customRender:\"channelName\"}},{title:\"操作\",dataIndex:\"action\",fixed:\"right\",width:140,scopedSlots:{customRender:\"action\"}}]}),l=a(\"6870\"),u=a(\"47c6\"),p=a(\"df88\"),d=a(\"c871\"),h=a(\"ec7f\"),m=a(\"dab3\"),f={name:\"BrandPackageList\",mixins:[r[\"a\"]],serviceInject:function(){return{listService:o[\"ListService\"]}},modals:{OnSales:l[\"a\"],OffSales:u[\"a\"],ShopList:p[\"a\"],Synchronize:d[\"a\"],SuccessTip:h[\"a\"]},rxState:function(){var e=this.listService,t=e.list$,a=e.page$,s=e.loading$,i=e.auth$,n=e.packageType$,o=e.publicChannel$,r=e.supportNum$;return{list$:t,page$:a,loading$:s,auth$:i,packageType$:n,publicChannel$:o,supportNum$:r}},bem:{b:\"page-brand-package-list\"},data:function(){return{FIXATION:3,UNLIMIT:1,RANGE:2}},computed:{columns:c},methods:{getShopList:function(e){this.$modalRouter.push({name:\"shop-list\",props:{id:e}})},onUpShelf:function(e,t){var a=this;this.$modalRouter.push({name:\"on-sales\",props:{id:e,channel:t===m[\"b\"].SHOP?\"shop\":\"brand\"},on:{success:function(){a.$router.reload()}}})},onDownShelf:function(e){var t=this;this.$modalRouter.push({name:\"off-sales\",props:{id:e},on:{success:function(){t.$router.reload()}}})},batchOperate:function(e){var t=this;this.$modalRouter.push({name:\"Synchronize\",on:{success:function(){t.$confirm({title:\"提示\",content:\"请再次确认是否同步，同步后会覆盖售出课程包，将会有2～5s无法正常使用\",onOk:function(){t.listService.setSyncSold(e).subscribe((function(e){t.$modalRouter.push({name:\"success-tip\"}),t.$router.reload()}))},onCancel:function(){}})}}})},deletePackage:function(e,t){var a=this;this.$confirm({title:\"提示\",content:\" 删除后不影响已购买的用户，一旦删除则无法恢复，确认删除\".concat(t,\"？\"),onOk:function(){a.listService.deletePackage(e).subscribe((function(e){a.$router.reload()}))},onCancel:function(){}})},onEdit:function(e,t){var a,s=(a={},Object(n[\"a\"])(a,this.FIXATION,\"brand-product-package-edit-fix-package\"),Object(n[\"a\"])(a,this.UNLIMIT,\"brand-product-package-edit-unlimit-package\"),Object(n[\"a\"])(a,this.RANGE,\"brand-product-package-edit-range-package\"),a);this.$router.push({name:s[t],query:{id:e}})},onDetail:function(e,t){this.$router.push({name:\"brand-product-package-info\",query:{id:e,packageType:t}})}}},_=f,b=a(\"2877\"),g=Object(b[\"a\"])(_,s,i,!1,null,null,null);t[\"default\"]=g.exports},\"6f71\":function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"biz-form\",{on:{\"submit-form\":e.onSubmit,up:e.onSaveAndUp}},[a(\"div\",{attrs:{slot:\"courseRange\"},slot:\"courseRange\"},[a(\"add-course-umlimit-table\",{on:{change:e.onCourseRange}}),e.validateCourseRange?a(\"span\",{staticStyle:{color:\"red\",\"font-size\":\"12px\"}},[e._v(\"\\n      \"+e._s(e.validateCourseRange)+\"\\n    \")]):e._e()],1)])},i=[],n=(a(\"8e6e\"),a(\"ac6a\"),a(\"456d\"),a(\"bd86\")),o=a(\"f8c4\"),r=a(\"5ee1\"),c=a(\"e49b\"),l=a(\"7ee8\");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(n[\"a\"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={name:\"AddUnlimitPackage\",serviceInject:function(){return{service:c[\"AddUnlimitPackageService\"]}},data:function(){return{rangeCourse:{},validateCourseRange:\"\"}},components:{BizForm:o[\"a\"],AddCourseUmlimitTable:r[\"a\"]},methods:{onCourseRange:function(e){Object(l[\"a\"])(e)?this.validateCourseRange=\"请选择课程范围\":(this.validateCourseRange=\"\",this.rangeCourse=p({},e))},onSubmit:function(e){var t=this;Object(l[\"a\"])(this.rangeCourse)?this.validateCourseRange=\"请选择课程范围\":this.service.add(p({},this.rangeCourse,{},e)).subscribe((function(e){t.$router.push({name:\"brand-product-package-list\"})}))},onSaveAndUp:function(e){var t=this;Object(l[\"a\"])(this.rangeCourse)?this.validateCourseRange=\"请选择课程范围\":this.service.addAndUp(p({},this.rangeCourse,{},e)).subscribe((function(e){t.$router.push({name:\"brand-product-package-list\"})}))}}},h=d,m=a(\"2877\"),f=Object(m[\"a\"])(h,s,i,!1,null,null,null);t[\"default\"]=f.exports},\"7ee8\":function(e,t,a){\"use strict\";var s=a(\"8cc4\"),i=a(\"60ce\"),n=a(\"f5fe\"),o=a(\"ff51\"),r=a(\"e56b\"),c=a(\"58e0\"),l=a(\"a724\"),u=a(\"a187\"),p=\"[object Map]\",d=\"[object Set]\",h=Object.prototype,m=h.hasOwnProperty;function f(e){if(null==e)return!0;if(Object(r[\"a\"])(e)&&(Object(o[\"a\"])(e)||\"string\"==typeof e||\"function\"==typeof e.splice||Object(c[\"a\"])(e)||Object(u[\"a\"])(e)||Object(n[\"a\"])(e)))return!e.length;var t=Object(i[\"a\"])(e);if(t==p||t==d)return!e.size;if(Object(l[\"a\"])(e))return!Object(s[\"a\"])(e).length;for(var a in e)if(m.call(e,a))return!1;return!0}t[\"a\"]=f},8437:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"biz-add-select\",{attrs:{cardUrlList:e.cardUrlList}})},i=[],n=a(\"a09f\"),o={name:\"BrandAddPackageType\",data:function(){return{cardUrlList:{fix:\"brand-product-package-add-fix-package\",range:\"brand-product-package-add-range-package\",unLimit:\"brand-product-package-add-unlimit-package\"}}},components:{BizAddSelect:n[\"a\"]}},r=o,c=a(\"2877\"),l=Object(c[\"a\"])(r,s,i,!1,null,null,null);t[\"default\"]=l.exports},8474:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"biz-form\",{attrs:{isEdit:!0,initInfo:e.info$},on:{\"use-shop\":e.onUseShop,\"rest-use-shop\":e.onRestUseShop,\"submit-form\":e.onSubmit},scopedSlots:e._u([{key:\"courseRange\",fn:function(t){return[e.isRestCourseRange?a(\"add-course-fix-table\",{attrs:{initInfo:e.info$,useShopInfo:e.useShopInfo,decorators:t.decorators,reserveIsLimitInfo:e.reserveIsLimitInfo},on:{change:e.onCourseRange}}):e._e()]}}])})},i=[],n=(a(\"8e6e\"),a(\"ac6a\"),a(\"456d\"),a(\"bd86\")),o=a(\"f8c4\"),r=a(\"6827\"),c=a(\"8e77\");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(n[\"a\"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={name:\"EditFixPackage\",components:{BizForm:o[\"a\"],AddCourseFixTable:r[\"a\"]},serviceInject:function(){return{service:c[\"EditFixPackageService\"]}},rxState:function(){var e=this.service.info$;return{info$:e}},data:function(){return{reserveIsLimitInfo:{},useShopInfo:{},isRestCourseRange:!0}},methods:{onRestUseShop:function(){var e=this;this.isRestCourseRange=!1;var t=setTimeout((function(){e.isRestCourseRange=!0,clearTimeout(t)}))},onUseShop:function(e){this.useShopInfo=e},onCourseRange:function(e){this.rangeCourse=u({},e)},onSubmit:function(e){var t=this;this.service.edit(u({id:this.info$.package_course_id},this.rangeCourse,{},e)).subscribe((function(e){t.$router.push({name:\"brand-product-package-list\"})}))}},created:function(){this.reserveIsLimitInfo={reserve_is_limit:this.info$.reserve_is_limit,reserve_limit_day:this.info$.reserve_limit_day,reserve_limit_times:this.info$.reserve_limit_times}}},d=p,h=a(\"2877\"),m=Object(h[\"a\"])(d,s,i,!1,null,null,null);t[\"default\"]=m.exports},\"8e77\":function(e,t,a){\"use strict\";a.r(t),a.d(t,\"EditFixPackageService\",(function(){return _}));var s,i,n,o=a(\"d225\"),r=a(\"b0b4\"),c=a(\"9ab4\"),l=a(\"0cd5\"),u=a(\"df29\"),p=a(\"ecc1\"),d=a(\"9abd\"),h=a(\"c4cc\"),m=a(\"e69b\"),f=a(\"c170\"),_=function(){function e(t,a,s){Object(o[\"a\"])(this,e),this.api=t,this.commonApi=a,this.msg=s,this.loading$=new u[\"d\"]({}),this.info$=new u[\"d\"]({}),this.coachList$=new u[\"d\"]({})}return Object(r[\"a\"])(e,[{key:\"getCoachList\",value:function(){var e=this;return this.commonApi.getCoachList().pipe(Object(h[\"a\"])((function(t){e.coachList$.commit((function(){return t.list}))})))}},{key:\"getEditShow\",value:function(e){var t=this;return this.api.getFixEditShow(e).pipe(Object(h[\"a\"])((function(e){t.info$.commit((function(){return e.info}))})))}},{key:\"edit\",value:function(e){var t=this;return this.api.editFix(e).pipe(Object(h[\"a\"])((function(e){t.msg.success({content:\"编辑课程包成功\"})})))}},{key:\"init\",value:function(e){return Object(f[\"a\"])(this.getEditShow(e),this.getCoachList())}},{key:\"beforeEach\",value:function(e){return this.init(e.query.id)}}]),e}();_=Object(c[\"b\"])([Object(l[\"b\"])(),Object(c[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof p[\"a\"]&&p[\"a\"])?s:Object,\"function\"===typeof(i=\"undefined\"!==typeof d[\"a\"]&&d[\"a\"])?i:Object,\"function\"===typeof(n=\"undefined\"!==typeof m[\"a\"]&&m[\"a\"])?n:Object])],_)},\"9abd\":function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return p}));a(\"6b54\"),a(\"2397\"),a(\"386d\");var s=a(\"d225\"),i=a(\"b0b4\"),n=a(\"308d\"),o=a(\"6bb5\"),r=a(\"4e2b\"),c=a(\"de46\");function l(e){return function(){var t,a=Object(o[\"a\"])(e);if(u()){var s=Object(o[\"a\"])(this).constructor;t=Reflect.construct(a,arguments,s)}else t=a.apply(this,arguments);return Object(n[\"a\"])(this,t)}}function u(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){Object(r[\"a\"])(a,e);var t=l(a);function a(){return Object(s[\"a\"])(this,a),t.apply(this,arguments)}return Object(i[\"a\"])(a,[{key:\"getCourseList\",value:function(e){var t=e.platform?\"\".concat(e.platform,\"/\"):\"\";return this.http.get(\"/v1/course/package/\".concat(t).concat(e.type),{query:{search:e.search,course_type:e.course_type}})}},{key:\"getCoachList\",value:function(){return this.http.get(\"/v1/course/package/coach\")}}]),a}(c[\"a\"])},ae08:function(e,t,a){\"use strict\";a.d(t,\"c\",(function(){return s})),a.d(t,\"a\",(function(){return i})),a.d(t,\"b\",(function(){return n}));var s=[{title:\"省\",dataIndex:\"province\",width:\"20%\"},{title:\"市\",dataIndex:\"city\",width:\"20%\"},{title:\"区\",dataIndex:\"district\",width:\"20%\"},{title:\"门店名称\",dataIndex:\"shop_name\",width:\"30%\"}],i=function(e){return[{title:e.$c(\"coach\"),dataIndex:\"nickname\"},{title:\"\".concat(e.$c(\"coach\"),\"等级\"),dataIndex:\"level_name\"},{title:\"在职状态\",dataIndex:\"nature_work\",scopedSlots:{customRender:\"nature_work\"}}]},n=[{title:\"价格等级\",dataIndex:\"level\"},{title:\"售卖梯度（节）\",dataIndex:\"min_sell\",scopedSlots:{customRender:\"min_sell\"}},{title:\"售卖价格（元/节）\",dataIndex:\"min_sell_price\",scopedSlots:{customRender:\"min_sell_price\"}},{title:\"转让手续费\",dataIndex:\"transfer_num\",scopedSlots:{customRender:\"transfer_num\"}}]},affc:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"InfoService\",(function(){return b}));var s,i,n,o=a(\"bd86\"),r=a(\"d225\"),c=a(\"b0b4\"),l=a(\"9ab4\"),u=a(\"0cd5\"),p=a(\"df29\"),d=a(\"ecc1\"),h=a(\"9abd\"),m=a(\"c170\"),f=a(\"2138\"),_=a(\"c4cc\"),b=function(){function e(t,a,s){Object(r[\"a\"])(this,e),this.userService=t,this.brandPackageApi=a,this.commonApi=s,this.info$=new p[\"d\"]({}),this.auth$=new p[\"d\"]({}),this.page$=new p[\"d\"]({}),this.loading$=new p[\"d\"]({}),this.coachList$=new p[\"d\"]([]),this.RANGE=2,this.FIXATION=3,this.UNLIMITED=1,this.SINGLE_SHOP=1,this.MANY_SHOP=2,this.ALL_SHOP=3,this.saleMode$=this.userService.getOptions$(\"package_course.sale_mode\"),this.packageType$=this.userService.getOptions$(\"package_course.package_type\"),this.validTimeUnit$=this.userService.getOptions$(\"package_course.valid_time_unit\"),this.reserveLimitDay$=this.userService.getOptions$(\"package_course.reserve_limit_day\"),this.reserveIsLimit$=this.userService.getOptions$(\"package_course.reserve_is_limit\")}return Object(c[\"a\"])(e,[{key:\"SET_INFO\",value:function(e){var t,a,s=this.saleMode$.snapshot().map((function(e){return e.label})),i=this.reserveLimitDay$.snapshot(),n=this.validTimeUnit$.snapshot().map((function(e){return e.label}));e.validTimeUnit=\"开始生效后\".concat(e.valid_time).concat(n[e.valid_time_unit-1],\"有效\"),e.priceText=\"\".concat(e.price,\"元\");var r=\"\";i.map((function(t){t.value===e.reserve_limit_day&&(r=t.label)}));var c=this.coachList$.snapshot();e.personal_range&&e.personal_range.length&&(e.personal_range=e.personal_range.map((function(e){return e.coachLevel=c.length===e.coach_level.length?\"全部等级\":\"\".concat(e.coach_level.length,\"个等级\"),e})));var l=(t={},Object(o[\"a\"])(t,this.SINGLE_SHOP,e.shop_name),Object(o[\"a\"])(t,this.MANY_SHOP,\"指定门店 （已上架\".concat(e.up_shop_num,\"/共\").concat(e.sale_shop_list.length,\"家门店）\")),Object(o[\"a\"])(t,this.ALL_SHOP,\"全门店\"),t),u=(a={},Object(o[\"a\"])(a,this.SINGLE_SHOP,e.shop_name),Object(o[\"a\"])(a,this.MANY_SHOP,\"共\".concat(e.use_shop_list.length,\"家门店\")),Object(o[\"a\"])(a,this.ALL_SHOP,\"全门店\"),a);e.saleRangeName=l[e.sale_range],e.useRangeName=u[e.use_range],e.reserveIsLimit=0===e.reserve_is_limit?\"不限制\":\"每\".concat(r,\"约课，最多\").concat(e.reserve_limit_times,\"次\"),e.saleMode=e.sale_mode.map((function(e){return s[e-1]})).join(\"/\"),e.isAllowTransfer=e.is_allow_transfer?\"\".concat(e.transfer_rate).concat(1===e.transfer_unit?\"%\":\"元\"):\"不支持转让\",e.frozenDays=\"\".concat(e.frozen_days,\"天\"),this.info$.commit((function(){return e}))}},{key:\"getInfo\",value:function(e){var t=this;return this.brandPackageApi.getPackageDetailInfo(e).pipe(Object(_[\"a\"])((function(e){t.SET_INFO(e.info),t.auth$.commit((function(){return e.auth}))})))}},{key:\"init\",value:function(e){var t,a=(t={},Object(o[\"a\"])(t,this.RANGE,\"range\"),Object(o[\"a\"])(t,this.FIXATION,\"fixation\"),Object(o[\"a\"])(t,this.UNLIMITED,\"unlimited\"),t),s=a[e.packageType];return Object(m[\"a\"])(this.getInfo({id:+e.id,packageType:s}),this.getCoachList())}},{key:\"getCoachList\",value:function(){var e=this;return this.commonApi.getCoachList().pipe(Object(_[\"a\"])((function(t){e.coachList$.commit((function(){return t.list}))})))}},{key:\"beforeRouteEnter\",value:function(e,t){return this.init(e.query)}}]),e}();b=Object(l[\"b\"])([Object(u[\"b\"])(),Object(l[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof f[\"a\"]&&f[\"a\"])?s:Object,\"function\"===typeof(i=\"undefined\"!==typeof d[\"a\"]&&d[\"a\"])?i:Object,\"function\"===typeof(n=\"undefined\"!==typeof h[\"a\"]&&h[\"a\"])?n:Object])],b)},baec:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"EditRangePackageService\",(function(){return g}));var s,i,n,o,r=a(\"d225\"),c=a(\"b0b4\"),l=a(\"9ab4\"),u=a(\"2138\"),p=a(\"0cd5\"),d=a(\"df29\"),h=a(\"ecc1\"),m=a(\"9abd\"),f=a(\"c4cc\"),_=a(\"e69b\"),b=a(\"c170\"),g=function(){function e(t,a,s,i){Object(r[\"a\"])(this,e),this.api=t,this.commonApi=a,this.userService=s,this.msg=i,this.loading$=new d[\"d\"]({}),this.coachList$=new d[\"d\"]({}),this.info$=new d[\"d\"]({}),this.isLimitOptions$=this.userService.getOptions$(\"package_course.is_limit\")}return Object(c[\"a\"])(e,[{key:\"getCoachList\",value:function(){var e=this;return this.commonApi.getCoachList().pipe(Object(f[\"a\"])((function(t){e.coachList$.commit((function(){return t.list}))})))}},{key:\"getEditShow\",value:function(e){var t=this;return this.api.getRangeEditShow(e).pipe(Object(f[\"a\"])((function(e){t.info$.commit((function(){return e.info}))})))}},{key:\"edit\",value:function(e){var t=this;return this.api.editRange(e).pipe(Object(f[\"a\"])((function(e){t.msg.success({content:\"编辑课程包成功\"})})))}},{key:\"init\",value:function(e){return Object(b[\"a\"])(this.getEditShow(e))}},{key:\"beforeEach\",value:function(e){return this.init(e.query.id)}}]),e}();g=Object(l[\"b\"])([Object(p[\"b\"])(),Object(l[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof h[\"a\"]&&h[\"a\"])?s:Object,\"function\"===typeof(i=\"undefined\"!==typeof m[\"a\"]&&m[\"a\"])?i:Object,\"function\"===typeof(n=\"undefined\"!==typeof u[\"a\"]&&u[\"a\"])?n:Object,\"function\"===typeof(o=\"undefined\"!==typeof _[\"a\"]&&_[\"a\"])?o:Object])],g)},c053:function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return s}));var s=function(e){return{shop_ids:{rules:[{validator:function(e,t,a){if(void 0===t||!t.length)return\"请选择下架门店\"}}]},reason:{rules:[{validator:function(e,t,a){if(!t)return\"请填写下架原因\"}}]}}}},d875:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"biz-form\",{on:{\"submit-form\":e.onSubmit,\"use-shop\":e.onUseShop,\"rest-use-shop\":e.onRestUseShop,up:e.onSaveAndUp}},[a(\"template\",{slot:\"courseRange\"},[a(\"div\",{style:e.styleDanger},[e.isRestCourseRange?a(\"add-course-fix-table\",{attrs:{useShopInfo:e.useShopInfo},on:{change:e.onCourseRange}}):e._e(),e.isCourseRange?e._e():a(\"span\",{staticStyle:{color:\"red\",\"font-size\":\"12px\"}},[e._v(\"\\n        \"+e._s(e.validateCourseRange)+\"\\n      \")])],1)])],2)},i=[],n=(a(\"8e6e\"),a(\"ac6a\"),a(\"456d\"),a(\"bd86\")),o=a(\"f8c4\"),r=a(\"6827\"),c=a(\"135c\"),l=a(\"7ee8\");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(n[\"a\"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={name:\"AddFixPackage\",components:{BizForm:o[\"a\"],AddCourseFixTable:r[\"a\"]},serviceInject:function(){return{service:c[\"AddFixPackageService\"]}},watch:{rangeCourse:{handler:function(e){this.getValidateCourseRange()},deep:!0}},data:function(){return{rangeCourse:{},useShopInfo:{},isRestCourseRange:!0,isCourseRange:!0,styleDanger:\"\",validateCourseRange:\"\"}},methods:{onRestUseShop:function(){var e=this;this.isRestCourseRange=!1;var t=setTimeout((function(){e.isRestCourseRange=!0,clearTimeout(t)}))},onUseShop:function(e){this.useShopInfo=e},onCourseRange:function(e){this.rangeCourse=p({},e)},getValidateCourseRange:function(){if(Object(l[\"a\"])(this.rangeCourse))return this.isCourseRange=!1,this.validateCourseRange=\"请新增课程\",this.styleDanger=\"border: 1px solid red\",!0;this.isCourseRange=!0,this.styleDanger=\"\",this.validateCourseRange=\"\"},onSubmit:function(e){var t=this;this.getValidateCourseRange()||this.service.add(p({},this.rangeCourse,{},e)).subscribe((function(e){t.$router.push({name:\"brand-product-package-list\"})}))},onSaveAndUp:function(e){var t=this;this.getValidateCourseRange()||this.service.addAndUp(p({},this.rangeCourse,{},e)).subscribe((function(e){t.$router.push({name:\"brand-product-package-list\"})}))}}},h=d,m=a(\"2877\"),f=Object(m[\"a\"])(h,s,i,!1,null,null,null);t[\"default\"]=f.exports},df88:function(e,t,a){\"use strict\";var s,i,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"st-modal\",{attrs:{title:\"上架课程包\",footer:null,width:\"800px\"},on:{ok:function(t){e.show=!1}},model:{value:e.show,callback:function(t){e.show=t},expression:\"show\"}},[a(\"div\",{class:e.bModal()},[a(\"st-table\",{attrs:{scroll:{x:568},pageMode:\"client\",columns:e.columns,rowKey:\"id\",dataSource:e.list$,loading:e.loading$.getShelfStatusList},scopedSlots:e._u([{key:\"down_shelf_reason\",fn:function(e){return[a(\"st-overflow-text\",{attrs:{\"max-width\":\"140px\",value:e}})]}}])})],1)])},o=[],r=(a(\"c5f6\"),a(\"ea3e\")),c=function(){return[{title:\"门店名称\",fixed:\"left\",width:180,dataIndex:\"shop_name\"},{title:\"支持售卖时间\",dataIndex:\"shelfDate\",scopedSlots:{customRender:\"shelfDate\"}},{title:\"上架状态\",dataIndex:\"shelfStatusName\",scopedSlots:{customRender:\"shelfStatusName\"}},{title:\"下架原因\",dataIndex:\"down_shelf_reason\",align:\"right\",scopedSlots:{customRender:\"down_shelf_reason\"}}]},l=(a(\"ac6a\"),a(\"d225\")),u=a(\"b0b4\"),p=a(\"9ab4\"),d=a(\"2138\"),h=a(\"ecc1\"),m=a(\"0cd5\"),f=a(\"df29\"),_=a(\"c4cc\"),b=function(){function e(t,a){Object(l[\"a\"])(this,e),this.api=t,this.userService=a,this.loading$=new f[\"d\"]({}),this.list$=new f[\"d\"]([])}return Object(u[\"a\"])(e,[{key:\"SET_LIST\",value:function(e){var t=this.userService.getOptions$(\"package_course.shelf_status\").snapshot();e=e.map((function(e,a){return e.shelfDate=\"\".concat(e.start_time,\" ~ \").concat(e.end_time),t.forEach((function(t){t.value===e.shelf_status&&(e.shelfStatusName=t.label)})),e.id=a,e})),this.list$.commit((function(){return e}))}},{key:\"getShelfStatusList\",value:function(e){var t=this;return this.api.getShelfStatusList(e).pipe(Object(_[\"a\"])((function(e){t.SET_LIST(e.list)})))}}]),e}();Object(p[\"b\"])([Object(f[\"c\"])(),Object(p[\"d\"])(\"design:type\",Function),Object(p[\"d\"])(\"design:paramtypes\",[Object]),Object(p[\"d\"])(\"design:returntype\",void 0)],b.prototype,\"SET_LIST\",null),b=Object(p[\"b\"])([Object(m[\"b\"])(),Object(p[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof h[\"a\"]&&h[\"a\"])?s:Object,\"function\"===typeof(i=\"undefined\"!==typeof d[\"a\"]&&d[\"a\"])?i:Object])],b);a(\"c053\");var g={name:\"PackageShopList\",mixins:[r[\"a\"]],bem:{bModal:\"modal-package-off-sales\"},serviceInject:function(){return{service:b}},serviceProviders:function(){return[b]},rxState:function(){var e=this.service,t=e.list$,a=e.loading$;return{list$:t,loading$:a}},props:{id:[String,Number]},computed:{columns:c},data:function(){return{show:!1}},created:function(){this.service.getShelfStatusList(this.id).subscribe()}},v=g,O=a(\"2877\"),C=Object(O[\"a\"])(v,n,o,!1,null,null,null);t[\"a\"]=C.exports},e49b:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"AddUnlimitPackageService\",(function(){return d}));var s,i,n=a(\"d225\"),o=a(\"b0b4\"),r=a(\"9ab4\"),c=a(\"0cd5\"),l=a(\"ecc1\"),u=a(\"e69b\"),p=a(\"c4cc\"),d=function(){function e(t,a){Object(n[\"a\"])(this,e),this.api=t,this.msg=a}return Object(o[\"a\"])(e,[{key:\"add\",value:function(e){var t=this;return this.api.addUnLimit(e).pipe(Object(p[\"a\"])((function(e){t.msg.success({content:\"新增课程包成功\"})})))}},{key:\"addAndUp\",value:function(e){var t=this;return this.api.addUnLimitAndOnShelf(e).pipe(Object(p[\"a\"])((function(e){t.msg.success({content:\"新增并上架课程包成功\"})})))}}]),e}();d=Object(r[\"b\"])([Object(c[\"b\"])(),Object(r[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof l[\"a\"]&&l[\"a\"])?s:Object,\"function\"===typeof(i=\"undefined\"!==typeof u[\"a\"]&&u[\"a\"])?i:Object])],d)},eaa5:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"st-panel\",{staticClass:\"mg-t16\",attrs:{calss:e.b(),app:\"\",title:e.title}},[a(\"div\",{attrs:{slot:\"actions\"},slot:\"actions\"},[a(\"st-btn-actions\",{attrs:{options:e.btnOptions}})],1),a(\"div\",{class:e.b(\"base-info\")},[a(\"div\",{staticClass:\"text\"},[a(\"st-info\",{staticClass:\"text-item\"},[a(\"st-info-item\",{attrs:{label:\"售价\"}},[e._v(e._s(e.info$.priceText))]),a(\"st-info-item\",{attrs:{label:\"有效时间\"}},[e._v(\"\\n          \"+e._s(e.info$.validTimeUnit)+\"\\n        \")]),a(\"st-info-item\",{attrs:{label:\"售卖方式\"}},[e._v(e._s(e.info$.saleMode))]),a(\"st-info-item\",{attrs:{label:\"约课限制\"}},[e._v(\"\\n          \"+e._s(e.info$.reserveIsLimit)+\"\\n        \")])],1),a(\"st-info\",{staticClass:\"text-item\"},[a(\"st-info-item\",{attrs:{label:\"售卖时间\"}},[e._v(e._s(e.salesDate))]),a(\"st-info-item\",{attrs:{label:\"允许冻结天数\"}},[e._v(\"\\n          \"+e._s(e.info$.frozenDays)+\"\\n        \")]),a(\"st-info-item\",{attrs:{label:\"转让设置\"}},[e._v(\"\\n          \"+e._s(e.info$.isAllowTransfer)+\"\\n        \")]),a(\"st-info-item\",{attrs:{label:\"支持使用人数\"}},[e._v(\"\\n          \"+e._s(e.info$.support_num)+\"\\n        \")])],1)],1),a(\"div\",{staticClass:\"img\"},[a(\"st-image\",{attrs:{src:e._f(\"imgFilter\")(e.info$.image_url,{w:280,h:158}),alt:\"课程包封面\"}})],1)]),a(\"div\",{staticClass:\"mg-t24\",class:e.b(\"course-range\")},[a(\"st-info\",{staticClass:\"text-item\"},[a(\"st-info-item\",{attrs:{label:\"上课范围\"}})],1),e.isUnLimit?[a(\"st-container\",[a(\"st-table\",{attrs:{columns:e.courseUnLimitColumns,pageMode:\"client\",dataSource:e.unlimitRange}})],1)]:e._e(),e.isUnLimit?e._e():a(\"st-container\",[a(\"div\",{staticClass:\"mg-b8\",class:e.b(\"course-title\")},[a(\"st-t3\",{staticClass:\"mg-r24\"},[e._v(\"团课\")]),0===e.info$.is_limit?a(\"span\",{staticClass:\"mg-r12\",attrs:{label:\"\"}},[e._v(\"\\n          不限次\\n        \")]):e._e(),a(\"st-info\",{staticClass:\"text-item\"},[e.info$.is_limit?a(\"st-info-item\",{staticClass:\"mg-r12\",attrs:{label:\"节数\"}},[e._v(\"\\n            \"+e._s(e.info$.team_times)+\"\\n          \")]):e._e(),e.packageType!==e.FIXATION?a(\"st-info-item\",{attrs:{label:\"课单价\"}},[e._v(\"\\n            \"+e._s(e.info$.team_unit_price)+\"\\n          \")]):e._e()],1)],1),a(\"st-table\",{attrs:{columns:e.teamColumns,pageMode:\"client\",dataSource:e.info$.team_range},scopedSlots:e._u([{key:\"shop_name\",fn:function(e){return[a(\"st-overflow-text\",{attrs:{\"max-width\":\"120px\",value:e}})]}}],null,!1,2315020075)})],1),e.isUnLimit?e._e():a(\"st-container\",{staticClass:\"mg-t24\"},[a(\"div\",{staticClass:\"mg-b8\",class:e.b(\"course-title\")},[a(\"st-t3\",{staticClass:\"mg-r24\"},[e._v(\"私教课\")]),0===e.info$.is_limit?a(\"span\",{staticClass:\"mg-r12\",attrs:{label:\"\"}},[e._v(\"\\n          不限次\\n        \")]):e._e(),a(\"st-info\",{staticClass:\"text-item\"},[e.info$.is_limit?a(\"st-info-item\",{staticClass:\"mg-r12\",attrs:{label:\"节数\"}},[e._v(\"\\n            \"+e._s(e.info$.personal_times)+\"\\n          \")]):e._e(),e.packageType!==e.FIXATION?a(\"st-info-item\",{attrs:{label:\"课单价\"}},[e._v(\"\\n            \"+e._s(e.info$.personal_unit_price)+\"\\n          \")]):e._e()],1)],1),a(\"st-table\",{attrs:{columns:e.personalColumns,pageMode:\"client\",dataSource:e.info$.personal_range},scopedSlots:e._u([{key:\"coach_level\",fn:function(e){return[a(\"st-overflow-text\",{attrs:{\"max-width\":\"120px\",value:e.map((function(e){return e.setting_name}))}})]}},{key:\"shop_name\",fn:function(e){return[a(\"st-overflow-text\",{attrs:{\"max-width\":\"120px\",value:e}})]}}],null,!1,2879809866)})],1),a(\"st-info\",{staticClass:\"text-item mg-t24\"},[a(\"st-info-item\",{attrs:{label:\"支持使用门店\"}},[e._v(\"\\n        \"+e._s(e.info$.useRangeName)+\"\\n      \")])],1),e.info$.use_range===e.SHOP_RANGE.SPECIFIED_STORE?a(\"st-container\",[a(\"st-table\",{attrs:{columns:e.shopColumns,dataSource:e.info$.use_shop_list,pageMode:\"client\"}})],1):e._e(),a(\"st-info\",{staticClass:\"text-item mg-t24\"},[a(\"st-info-item\",{attrs:{label:\"支持售卖门店\"}},[e._v(\"\\n        \"+e._s(e.info$.saleRangeName)+\"\\n      \")])],1),e.info$.sale_range===e.SHOP_RANGE.SPECIFIED_STORE?a(\"st-container\",[a(\"st-table\",{attrs:{columns:e.shopColumns,dataSource:e.info$.sale_shop_list,pageMode:\"client\"}})],1):e._e()],2),a(\"div\",{staticClass:\"mg-t24\",class:e.b(\"detail\")},[a(\"st-info\",{staticClass:\"text-item\"},[a(\"st-info-item\",{attrs:{label:\"课程介绍\"}},[a(\"div\",{domProps:{innerHTML:e._s(e.info$.intro)}})])],1),a(\"div\"),a(\"st-info\",{staticClass:\"text-item\"},[a(\"st-info-item\",{attrs:{label:\"备注\"}},[e._v(\"\\n        \"+e._s(e.info$.remarks)+\"\\n      \")])],1)],1)])},i=[],n=a(\"bd86\"),o=a(\"affc\"),r=a(\"ea3e\"),c=function(){return[{title:\"课程名称\",dataIndex:\"course_name\",width:\"20%\"},{title:\"上课门店\",dataIndex:\"shop_name\",scopedSlots:{customRender:\"shop_name\"},width:\"20%\"},{title:\"节数\",dataIndex:\"team_times\",width:\"20%\"},{title:\"单价\",dataIndex:\"team_unit_price\",width:\"20%\"}]},l=function(){return[{title:\"课程名称\",dataIndex:\"course_name\",width:\"20%\"},{title:\"上课门店\",dataIndex:\"shop_name\",scopedSlots:{customRender:\"shop_name\"},width:\"20%\"}]},u=function(){return[{title:\"课程名称\",dataIndex:\"course_name\",width:\"20%\"},{title:\"上课门店\",dataIndex:\"shop_name\",scopedSlots:{customRender:\"shop_name\"},width:\"20%\"},{title:\"等级\",dataIndex:\"coach_level\",scopedSlots:{customRender:\"coach_level\"},width:\"20%\"},{title:\"节数\",dataIndex:\"personal_times\",width:\"20%\"},{title:\"单价\",dataIndex:\"personal_unit_price\",width:\"20%\"}]},p=function(){return[{title:\"课程名称\",dataIndex:\"course_name\",width:\"20%\"},{title:\"上课门店\",dataIndex:\"shop_name\",scopedSlots:{customRender:\"shop_name\"},width:\"20%\"},{title:\"等级\",dataIndex:\"coachLevel\",width:\"20%\"}]},d=function(){return[{title:\"课程类型\",dataIndex:\"course_type\",width:\"25%\"},{title:\"节数（节）\",dataIndex:\"count\",width:\"25%\"},{title:\"课时费(元)\",dataIndex:\"price\",width:\"25%\"},{title:\"合计(元)\",dataIndex:\"total\",width:\"25%\"}]},h=function(){return[{title:\"省\",dataIndex:\"province_name\"},{title:\"市\",dataIndex:\"city_name\"},{title:\"区\",dataIndex:\"district_name\"},{title:\"门店\",dataIndex:\"shop_name\"}]},m=(a(\"1cba\"),a(\"6870\")),f=a(\"47c6\"),_=a(\"df88\"),b=a(\"c871\"),g=a(\"ec7f\"),v=a(\"dab3\"),O={name:\"BrandPackageInfo\",bem:{b:\"page-brand-package-info\"},modals:{OnSales:m[\"a\"],OffSales:f[\"a\"],ShopList:_[\"a\"],Synchronize:b[\"a\"],SuccessTip:g[\"a\"]},mixins:[r[\"a\"]],data:function(){return{FIXATION:3,UNLIMIT:1,RANGE:2,SHOP_RANGE:v[\"d\"],PRODUCT_CHANNEL:v[\"b\"]}},serviceInject:function(){return{service:o[\"InfoService\"]}},rxState:function(){var e=this.service,t=e.info$,a=e.auth$;return{info$:t,auth$:a}},computed:{btnOptions:function(){return[{text:\"编辑\",click:this.onEdit,if:this.auth$[\"brand:product:package_course|edit\"]},{text:\"删除\",click:this.deletePackage,if:this.auth$[\"brand:product:package_course|del\"]},{text:\"下架\",click:this.onDownShelf,if:this.auth$[\"brand:product:package_course|down\"]},{text:\"上架\",click:this.onUpShelf,if:this.auth$[\"brand:product:package_course|up\"]},{text:\"应用至售出\",click:this.batchOperate,if:this.auth$[\"brand:product:package_course|batch_operate\"]}]},packageTypeConst:function(){return{RANGE:2,FIXATION:3,UNLIMITED:1}},unlimitRange:function(){return[{course_type:\"团课课程\",price:this.info$.team_unit_price,count:this.info$.team_times,total:this.info$.team_unit_price*this.info$.team_times},{course_type:\"私教课程\",price:this.info$.personal_unit_price,count:this.info$.personal_times,total:this.info$.personal_unit_price*this.info$.personal_times}]},personalFixColumns:u,personalRangeColumns:p,teamFixColumns:c,teamRangeColumns:l,shopColumns:h,courseUnLimitColumns:d,packageType:function(){return+this.$route.query.packageType},teamColumns:function(){return this.packageType===this.packageTypeConst.RANGE?this.teamRangeColumns:(this.packageType,this.packageTypeConst.FIXATION,this.teamFixColumns)},personalColumns:function(){return this.packageType===this.packageTypeConst.RANGE?this.personalRangeColumns:(this.packageType,this.packageTypeConst.FIXATION,this.personalFixColumns)},isUnLimit:function(){return+this.packageType===this.packageTypeConst.UNLIMITED},salesDate:function(){return\"\".concat(this.info$.start_time,\" ~ \").concat(this.info$.end_time)},title:function(){return this.info$.course_name}},methods:{onUpShelf:function(){var e=this,t=this.info$.package_course_id,a=this.info$.publish_channel;this.$modalRouter.push({name:\"on-sales\",props:{id:t,channel:a===v[\"b\"].SHOP?\"shop\":\"brand\"},on:{success:function(){e.$router.reload()}}})},onDownShelf:function(){var e=this,t=this.info$.package_course_id;this.$modalRouter.push({name:\"off-sales\",props:{id:t},on:{success:function(){e.$router.reload()}}})},batchOperate:function(){var e=this,t=this.info$.package_course_id;this.$modalRouter.push({name:\"Synchronize\",on:{success:function(){e.$confirm({title:\"提示\",content:\"请再次确认是否同步，同步后会覆盖售出课程包，将会有2～5s无法正常使用\",onOk:function(){e.listService.setSyncSold(t).subscribe((function(t){e.$modalRouter.push({name:\"success-tip\"}),e.$router.reload()}))},onCancel:function(){}})}}})},deletePackage:function(){var e=this,t=this.info$.package_course_id,a=this.info$.course_name;this.$confirm({title:\"提示\",content:\" 删除后不影响已购买的用户，一旦删除则无法恢复，确认删除\".concat(a,\"？\"),onOk:function(){e.listService.deletePackage(t).subscribe((function(t){e.$router.reload()}))},onCancel:function(){}})},onEdit:function(){var e,t=this.info$.package_course_id,a=this.packageType,s=(e={},Object(n[\"a\"])(e,this.FIXATION,\"brand-product-package-edit-fix-package\"),Object(n[\"a\"])(e,this.UNLIMIT,\"brand-product-package-edit-unlimit-package\"),Object(n[\"a\"])(e,this.RANGE,\"brand-product-package-edit-range-package\"),e);this.$router.push({name:s[a],query:{id:t}})}}},C=O,k=a(\"2877\"),y=Object(k[\"a\"])(C,s,i,!1,null,null,null);t[\"default\"]=y.exports},ec7f:function(e,t,a){\"use strict\";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"st-modal\",{attrs:{size:\"small\"},on:{cancel:e.onConfirm},model:{value:e.show,callback:function(t){e.show=t},expression:\"show\"}},[a(\"div\",{class:e.b()},[a(\"div\",{class:e.b(\"title\")},[a(\"st-icon\",{class:e.b(\"title-icon\"),attrs:{type:\"success\",color:\"#52c41a\",size:\"22px\"}}),e._v(\"\\n      已提交成功！\\n    \")],1),a(\"div\",{class:e.b(\"content\")},[e._v(\"\\n      可至【门店-设置-任务中心】查看处理进度\\n    \")])]),a(\"template\",{slot:\"footer\"},[a(\"st-button\",{attrs:{type:\"primary\"},on:{click:e.onConfirm}},[e._v(\"确定\")])],1)],2)},i=[],n={name:\"ModalSettingTaskTip\",bem:{b:\"modal-task-success-tip\"},data:function(){return{show:!1}},methods:{onConfirm:function(){this.$emit(\"success\"),this.show=!1}}},o=n,r=a(\"2877\"),c=Object(r[\"a\"])(o,s,i,!1,null,null,null);t[\"a\"]=c.exports},efb14:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"ListService\",(function(){return g}));a(\"ac6a\");var s,i,n,o,r=a(\"d225\"),c=a(\"b0b4\"),l=a(\"9ab4\"),u=a(\"0cd5\"),p=a(\"df29\"),d=a(\"ecc1\"),h=a(\"c170\"),m=a(\"2138\"),f=a(\"c4cc\"),_=a(\"e69b\"),b=a(\"2cbb\"),g=function(){function e(t,a,s,i){Object(r[\"a\"])(this,e),this.userService=t,this.msg=a,this.brandPackageApi=s,this.authService=i,this.list$=new p[\"d\"]([]),this.page$=new p[\"d\"]({}),this.upShelfInfo$=new p[\"d\"]({}),this.downShelfInfo$=new p[\"d\"]({}),this.loading$=new p[\"d\"]({}),this.packageType$=this.userService.getOptions$(\"package_course.package_type\",{addAll:!0}),this.supportNum$=this.userService.getOptions$(\"package_course.support_num\",{addAll:!0}),this.auth$=this.authService.authMap$({add:\"brand:product:package_course|add\"}),this.publicChannel$=this.userService.getOptions$(\"package_course.publish_channel\",{addAll:!0})}return Object(c[\"a\"])(e,[{key:\"SET_PACKAGE_LIST\",value:function(e){var t=this.publicChannel$.snapshot(),a={};t.forEach((function(e){a[e.value]=e.label})),this.list$.commit((function(){return e.map((function(e){return e.channelName=a[e.publish_channel],e.totalTimesText=\"string\"===typeof e.total_times?e.total_times:\"\".concat(e.team_times,\"/\").concat(e.personal_times),e}))}))}},{key:\"getList\",value:function(e){var t=this;return this.brandPackageApi.getList(e).pipe(Object(f[\"a\"])((function(e){t.SET_PACKAGE_LIST(e.list),t.page$.commit((function(){return e.page}))})))}},{key:\"deletePackage\",value:function(e){var t=this;return this.brandPackageApi.deletePackage(e).pipe(Object(f[\"a\"])((function(e){t.msg.success({content:\"删除课程包成功\"})})))}},{key:\"setSyncSold\",value:function(e){var t=this;return this.brandPackageApi.setSyncSold(e).pipe(Object(f[\"a\"])((function(){t.msg.success({content:\"同步至售出成功\"})})))}},{key:\"init\",value:function(e){return Object(h[\"a\"])(this.getList(e))}},{key:\"beforeEach\",value:function(e,t){return this.init(e.meta.query)}}]),e}();g=Object(l[\"b\"])([Object(u[\"b\"])(),Object(l[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof m[\"a\"]&&m[\"a\"])?s:Object,\"function\"===typeof(i=\"undefined\"!==typeof _[\"a\"]&&_[\"a\"])?i:Object,\"function\"===typeof(n=\"undefined\"!==typeof d[\"a\"]&&d[\"a\"])?n:Object,\"function\"===typeof(o=\"undefined\"!==typeof b[\"a\"]&&b[\"a\"])?o:Object])],g)},f795:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"biz-form\",{attrs:{isEdit:!0,initInfo:e.info$},on:{\"use-shop\":e.onUseShop,\"rest-use-shop\":e.onRestUseShop,\"submit-form\":e.onSubmit},scopedSlots:e._u([{key:\"courseRange\",fn:function(t){return[e.isRestCourseRange?a(\"add-course-range-table\",{attrs:{decorators:t.decorators,useShopInfo:e.useShopInfo,initInfo:e.info$,isLimit:e.isLimit},on:{change:e.onCourseRange}}):e._e()]}}])},[a(\"template\",{slot:\"range\"},[a(\"st-form-item\",{attrs:{label:\"总节数\",labelWidth:\"118px\",required:\"\"}},[a(\"a-radio-group\",{attrs:{disabled:\"\",options:e.isLimitOptions$},model:{value:e.isLimit,callback:function(t){e.isLimit=t},expression:\"isLimit\"}})],1)],1)],2)},i=[],n=(a(\"8e6e\"),a(\"ac6a\"),a(\"456d\"),a(\"bd86\")),o=a(\"f8c4\"),r=a(\"6344\"),c=a(\"baec\");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){Object(n[\"a\"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={name:\"EditFixPackage\",components:{BizForm:o[\"a\"],AddCourseRangeTable:r[\"a\"]},serviceInject:function(){return{service:c[\"EditRangePackageService\"]}},rxState:function(){var e=this.service,t=e.info$,a=e.isLimitOptions$;return{info$:t,isLimitOptions$:a}},data:function(){return{isLimit:1,reserveIsLimitInfo:{},useShopInfo:{},isRestCourseRange:!0}},methods:{onRestUseShop:function(){var e=this;this.isRestCourseRange=!1;var t=setTimeout((function(){e.isRestCourseRange=!0,clearTimeout(t)}))},onUseShop:function(e){this.useShopInfo=e},onCourseRange:function(e){this.rangeCourse=u({},e)},onSubmit:function(e){var t=this;this.service.edit(u({id:this.info$.package_course_id,is_limit:this.isLimit},this.rangeCourse,{},e)).subscribe((function(e){t.$router.push({name:\"brand-product-package-list\"})}))}},created:function(){this.reserveIsLimitInfo={reserve_is_limit:this.info$.reserve_is_limit,reserve_limit_day:this.info$.reserve_limit_day,reserve_limit_times:this.info$.reserve_limit_times},this.isLimit=this.info$.is_limit}},d=p,h=a(\"2877\"),m=Object(h[\"a\"])(d,s,i,!1,null,null,null);t[\"default\"]=m.exports},f8c4:function(e,t,a){\"use strict\";var s,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{class:e.b()},[e.isEdit&&e.initInfo.up_shelf_num?a(\"a-alert\",{attrs:{message:e.initInfo.up_shelf_num+\"家门店上架中，若需修改全部信息，请下架后编辑\",banner:\"\"}}):e._e(),a(\"st-panel\",{class:e.b(\"form-wapper\"),attrs:{app:\"\"}},[a(\"st-form\",{attrs:{form:e.form}},[a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:8,xs:11,offset:1}},[a(\"st-form-item\",{attrs:{label:\"课程包名称\",labelWidth:\"118px\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.course_name,expression:\"decorators.course_name\"}],attrs:{disabled:!!e.initInfo.course_name,placeholder:\"请输入课程包名称\"}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:16,xs:22,offset:1}},[e._t(\"range\")],2)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:8,xs:11,offset:1}},[a(\"st-form-item\",{attrs:{label:\"支持使用人数\",labelWidth:\"118px\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.support_num,expression:\"decorators.support_num\"}],staticStyle:{width:\"110px\"},attrs:{min:1,max:20,placeholder:\"请输入支持使用人数\"}}),a(\"span\",{staticClass:\"mg-l8\"},[e._v(\"限定20人\")])],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:22,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"支持使用门店\",labelWidth:\"118px\",required:\"\"}},[1===e.initInfo.use_range?a(\"div\",[e._v(\"\\n              \"+e._s(e.initInfo.shop_name)+\"\\n            \")]):a(\"a-radio-group\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.use_range,expression:\"decorators.use_range\"}],attrs:{options:e.supportSales$},on:{change:e.onUserShopChange}}),2===e.userRange?a(\"div\",{staticClass:\"brand-range-shop\"},[a(\"p\",{staticClass:\"brand-range-shop__describe\"},[e._v(\"\\n                设置支持此课程包使用门店范围\\n              \")]),a(\"select-shop\",{attrs:{shopIds:e.useShopIds},on:{change:e.getUserShopFormItem}}),e.userShopList.length?e._e():a(\"span\",{staticStyle:{color:\"red\",\"font-size\":\"12px\"}},[e._v(\"\\n                \"+e._s(e.validateUseShop)+\"\\n              \")])],1):e._e()],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"上课范围\",labelWidth:\"118px\",required:\"\"}},[e._t(\"courseRange\",null,{decorators:e.decorators})],2)],1)],1),a(\"portal-target\",{attrs:{name:\"BRAND_PACKAGE_FORM_TOTAL\"}}),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:22,xs:22,offset:1}},[a(\"st-form-item\",{staticClass:\"page-content-card-support-sales mg-t4\",attrs:{label:\"支持售卖门店\",labelWidth:\"118px\",required:\"\"}},[e.initInfo.sale_range===e.SHOP_RANGE.SINGLE_STORE?a(\"div\",[e._v(\"\\n              \"+e._s(e.initInfo.shop_name)+\"\\n            \")]):a(\"a-radio-group\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.sale_range,expression:\"decorators.sale_range\"}],attrs:{disabled:e.initInfo.shelf_status===e.SHELF_STATUS.UP,options:e.supportSales$},on:{change:e.onSaleShopChange}}),e.saleRange===e.SHOP_RANGE.SPECIFIED_STORE?a(\"div\",{staticClass:\"brand-range-shop\"},[a(\"p\",{staticClass:\"brand-range-shop__describe\"},[e._v(\"\\n                设置支持此课程包售卖门店范围\\n              \")]),a(\"select-shop\",{attrs:{shopIds:e.saleShopIds,disabled:this.initInfo.shelf_status===e.SHELF_STATUS.UP},on:{change:e.getSaleShopFormItem}}),e.saleShopList.length?e._e():a(\"span\",{staticStyle:{color:\"red\",\"font-size\":\"12px\"}},[e._v(\"\\n                \"+e._s(e.validateUseShop)+\"\\n              \")])],1):e._e()],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:8,xs:11,offset:1}},[a(\"st-form-item\",{staticClass:\"page-content-card-support-sales mg-t4\",attrs:{labelWidth:\"118px\",label:\"售卖价格\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.price,expression:\"decorators.price\"}],attrs:{min:0,placeholder:\"请输入售卖价格\",max:999999.9,float:!0}},[a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n                元\\n              \")])],2)],1)],1)],1),a(\"reserve-is-limit\",{attrs:{labelWidth:\"118px\",decorators:e.decorators,reserveIsLimitInfo:e.reserveIsLimitInfo}}),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:14,xs:22,offset:1}},[a(\"st-form-item\",{staticClass:\"page-content-card-support-sales mg-t4\",attrs:{labelWidth:\"118px\",label:\"支持售卖时间\",required:\"\"}},[a(\"st-range-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.saleDate,expression:\"decorators.saleDate\"}],attrs:{disabledDays:10950,options:{start:{disable:e.initInfo.shelf_status===e.SHELF_STATUS.UP,disabledBegin:e.moment().format(\"YYYY-MM-DD\")}}},on:{change:e.onSaleDate}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:8,xs:11,offset:1}},[a(\"st-form-item\",{attrs:{labelWidth:\"118px\",label:\"有效时间\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.valid_time,expression:\"decorators.valid_time\"}],attrs:{placeholder:\"请输入有效时间\",min:1,max:99999}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.valid_time_unit,expression:\"decorators.valid_time_unit\"}],staticStyle:{width:\"60px\"},attrs:{slot:\"addonAfter\",options:e.unitList$},slot:\"addonAfter\"})],1)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:8,xs:11,offset:1}},[a(\"st-form-item\",{staticClass:\"page-content-card-support-sales mg-t4\",attrs:{labelWidth:\"118px\",label:\"允许冻结天数\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.frozen_days,expression:\"decorators.frozen_days\"}],attrs:{placeholder:\"请输入允许冻结天数\",min:1,max:99999}},[a(\"span\",{staticStyle:{width:\"60px\"},attrs:{slot:\"addonAfter\"},slot:\"addonAfter\"},[e._v(\"\\n                天\\n              \")])])],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:16,xs:22,offset:1}},[a(\"div\",{class:e.b(\"transfer\")},[a(\"st-form-item\",{attrs:{label:\"转让设置\",labelWidth:\"118px\",required:e.isTransfer}},[a(\"a-checkbox\",{on:{change:function(t){return e.onTransferChange(t,\"transfer\")}},model:{value:e.isTransfer,callback:function(t){e.isTransfer=t},expression:\"isTransfer\"}},[e._v(\"\\n                支持转让\\n              \")])],1),e.isTransfer?a(\"st-form-item\",{attrs:{label:\"\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.transfer_rate,expression:\"decorators.transfer_rate\"}],class:e.b(\"transfer-input\"),staticStyle:{\"padding-right\":\"0\"},attrs:{min:0,max:1===e.transfer.transfer_unit?100:999999.9,float:2===e.transfer.transfer_unit}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.transfer_unit,expression:\"decorators.transfer_unit\"}],staticStyle:{width:\"60px\"},attrs:{slot:\"addonAfter\",options:e.transferUnitList$},on:{change:e.transferUnitChange},slot:\"addonAfter\"})],1)],1):e._e()],1)])],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:16,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"售卖方式\",labelWidth:\"118px\",required:\"\"}},[a(\"a-checkbox-group\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.sale_mode,expression:\"decorators.sale_mode\"}],attrs:{options:e.sellTypeList$}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:11,offset:1}},[a(\"st-form-item\",{attrs:{help:e.imageErrorText,label:\"封面\",labelWidth:\"118px\",required:\"\"}},[a(\"div\",{class:e.b(\"upload\")},[a(\"st-image-upload\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.image,expression:\"decorators.image\"}],class:e.b(\"st-upload\"),attrs:{cropperModal:e.cropperModal,sizeLimit:1,list:e.fileList},on:{change:e.fileChange}},[a(\"i\",{class:e.b(\"st-upload-icon\")}),a(\"div\",{class:e.b(\"st-upload-text\")},[e._v(\"上传封面\")])]),a(\"div\",{class:e.b(\"upload-describe\")},[a(\"p\",[e._v(\"\\n                  图片格式必须为:png,bmp,jpeg,jpg,gif,建议使用png格式图片,以保存最佳效果\\n                \")]),a(\"p\",[e._v(\"建议尺寸为750像素X422像素,不可大于2m\")])])],1)])],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:14,xs:24,offset:1}},[a(\"st-form-item\",{staticClass:\"page-content-card-support-sales mg-t4\",attrs:{labelWidth:\"118px\",label:\"课程包介绍\"}},[a(\"st-editor\",{on:{input:e.onChangeEditor},model:{value:e.content,callback:function(t){e.content=t},expression:\"content\"}}),a(\"span\",{staticStyle:{color:\"red\",\"font-size\":\"12px\"}},[e._v(\"\\n              \"+e._s(e.validateIntro)+\"\\n            \")])],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:14,xs:24,offset:1}},[a(\"st-form-item\",{staticClass:\"page-content-card-support-sales mg-t4\",attrs:{labelWidth:\"118px\",label:\"备注\"}},[a(\"st-textarea\",{attrs:{maxlength:\"500\",placeholder:\"请输入备注\"},model:{value:e.remarks,callback:function(t){e.remarks=t},expression:\"remarks\"}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:16,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{labelWidth:\"118px\",label:\" \"}},[a(\"st-button\",{attrs:{type:\"primary\"},on:{click:e.onSave}},[e._v(\"\\n              保存\\n            \")]),e.isEdit?e._e():a(\"st-button\",{staticClass:\"mg-l16\",attrs:{disabled:!e.auth$.up},on:{click:e.onSaveAndOnShelf}},[e._v(\"\\n              保存并上架\\n            \")])],1)],1)],1)],1)],1)],1)},n=[],o=(a(\"8e6e\"),a(\"ac6a\"),a(\"456d\"),a(\"7618\")),r=a(\"bd86\"),c=a(\"2527\"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:12,xs:22,offset:1}},[a(\"div\",{staticClass:\"page-package__reserve-limit\"},[a(\"st-form-item\",{attrs:{labelWidth:e.labelWidth,label:\"约课限制\",required:\"\"}},[a(\"a-radio-group\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.validateObject.reserve_is_limit,expression:\"validateObject.reserve_is_limit\"}],attrs:{options:e.reserveIsLimit$},on:{change:e.onChangeReserveIslimit}})],1),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.reserveIsLimit,expression:\"reserveIsLimit\"}],staticClass:\"page-package__reserve-limit-true\"},[a(\"st-form-item\",{attrs:{label:\"\",required:\"\"}},[a(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.validateObject.reserve_limit_times,expression:\"validateObject.reserve_limit_times\"}],staticStyle:{width:\"180px\"},attrs:{min:0,max:999999}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.validateObject.reserve_limit_day,expression:\"validateObject.reserve_limit_day\"}],attrs:{slot:\"addonBefore\",options:e.reserveLimitDay$},slot:\"addonBefore\"}),a(\"template\",{slot:\"addonAfter\"},[e._v(\"\\n              节\\n            \")])],2)],1)],1)],1)])],1)},u=[],p=(a(\"6762\"),a(\"2fdb\"),a(\"d225\")),d=a(\"9ab4\"),h=a(\"0cd5\"),m=a(\"2138\"),f=a(\"ebb6\"),_=function e(t){Object(p[\"a\"])(this,e),this.userService=t,this.reserveLimitDay$=this.userService.getOptions$(\"package_course.reserve_limit_day\").pipe(Object(f[\"a\"])((function(e){return e.map((function(e){return e.label=e.label.includes(\"每\")?e.label:\"每\".concat(e.label),e}))}))),this.reserveIsLimit$=this.userService.getOptions$(\"package_course.reserve_is_limit\")};_=Object(d[\"b\"])([Object(h[\"b\"])(),Object(d[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof m[\"a\"]&&m[\"a\"])?s:Object])],_);var b={name:\"ReserveIsLimitFormItem\",serviceInject:function(){return{reserveIsLimitService:_}},rxState:function(){var e=this.reserveIsLimitService,t=e.reserveLimitDay$,a=e.reserveIsLimit$;return{reserveLimitDay$:t,reserveIsLimit$:a}},data:function(){return{reserveIsLimit:0}},props:{decorators:{type:Object,default:function(){}},labelWidth:{type:String,default:\"\"},reserveIsLimitInfo:{type:Object,default:function(){return{reserve_is_limit:0,reserve_limit_day:1,reserve_limit_times:3}}}},computed:{validateObject:function(){var e=Object.keys(this.decorators).length;return e?this.decorators:{reserve_is_limit:[\"reserve_is_limit\",{initialValue:this.reserveIsLimitInfo.reserve_is_limit}],reserve_limit_day:[\"reserve_limit_day\",{initialValue:this.reserveIsLimitInfo.reserve_limit_day}],reserve_limit_times:[\"reserve_limit_times\",{initialValue:this.reserveIsLimitInfo.reserve_limit_times}]}}},methods:{onChangeReserveIslimit:function(e){this.reserveIsLimit=e.target.value}},created:function(){this.reserveIsLimit=this.validateObject.reserve_is_limit[1].initialValue}},g=b,v=a(\"2877\"),O=Object(v[\"a\"])(g,l,u,!1,null,null,null),C=O.exports,k=function(e){return{course_name:{rules:[{validator:function(t,a,s){return void 0===a||\"\"===a?\"请填写课程包名称\":a&&!e.pattern.CN_EN_NUM_SPACE(\"1-30\").test(a)?\"输入的课程包名称格式错误，请重新输入\":void 0}}],initialValue:e.initInfo.course_name},support_num:{rules:[{validator:function(e,t,a){return void 0===t||\"\"===t?\"请输入支持使用人数\":t>20?\"支持使用人数不能超过20人\":void 0}}],initialValue:e.initInfo.support_num},price:{rules:[{validator:function(t,a,s){return void 0===a||\"\"===a?\"请填写售卖价格\":a&&!e.pattern.NUM_FLOAT(1).test(a)?\"输入的售卖价格错误，请重新输入\":void 0}}],initialValue:e.initInfo.price},reserve_is_limit:{initialValue:e.initInfo.reserve_is_limit||0},reserve_limit_day:{initialValue:e.initInfo.reserve_limit_day||1},reserve_limit_times:{initialValue:e.initInfo.reserve_limit_times},saleDate:{rules:[{validator:function(e,t,a){return t[0]?t[1]?0===t.filter(Boolean).length?\"请填写售卖时间\":void 0:\"请填写结束售卖时间\":\"请填写开始售卖时间\"}}],initialValue:[e.initInfo.start_time,e.initInfo.end_time]||!1},valid_time:{rules:[{validator:function(e,t,a){if(!t)return\"请填写有效时间\"}}],initialValue:e.initInfo.valid_time},valid_time_unit:{initialValue:e.initInfo.valid_time_unit||1},frozen_days:{rules:[{validator:function(e,t,a){if(!t)return\"请填写允许冻结天数\"}}],initialValue:e.initInfo.frozen_days},is_allow_transfer:{initialValue:e.initInfo.is_allow_transfer},transfer_rate:{rules:[{validator:function(e,t,a){if(!t)return\"请输入转让设置\"}}],initialValue:e.initInfo.transfer_rate},transfer_unit:{initialValue:e.initInfo.transfer_unit||1},image:{rules:[{validator:function(t,a,s){if(!a)return e.validateImage=\"请上传图片\",\"请上传图片\";e.validateImage=\"\"}}],initialValue:[e.initInfo.image]||!1},intro:{},remarks:{},sale_mode:{rules:[{validator:function(e,t,a){if(!t.length)return\"请选择售卖方式\"}}],initialValue:e.initInfo.sale_mode||[2]},sale_range:{initialValue:e.initInfo.sale_range||3},use_range:{initialValue:e.initInfo.use_range||3},start_time:{rules:[{validator:function(e,t,a){if(!t)return\"请选择开始售卖时间\"}}]},end_time:{rules:[{validator:function(e,t,a){if(!t)return\"请选择结束售卖时间\"}}]}}},y=a(\"972a\"),j=a(\"d2d7\"),S=a(\"7ce1\"),L=a(\"2e47\"),w=a(\"c32d\"),x=a.n(w),I=a(\"dab3\"),$=a(\"d153\"),D=a(\"5c8a\");function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){Object(r[\"a\"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R={name:\"BrandPackageAdd\",bem:{b:\"brand-package-add\"},components:{SelectShop:j[\"a\"],StEditor:y[\"a\"],ReserveIsLimit:C,StImageUpload:S[\"a\"]},serviceInject:function(){return{pattern:c[\"a\"],formService:L[\"a\"]}},rxState:function(){var e=this.formService,t=e.supportSales$,a=e.unitList$,s=e.auth$,i=e.transferUnitList$,n=e.sellTypeList$;return{supportSales$:t,unitList$:a,auth$:s,transferUnitList$:i,sellTypeList$:n}},props:{initInfo:{type:Object,default:function(){return{}}},isEdit:{type:Boolean,default:!1}},watch:{content:function(e){e&&e.length>1e4?this.validateIntro=\"输入字数不能超过10000， 请减少输入\":this.validateIntro=\"\"},fileList:{handler:function(e,t){e.length?this.validateImage=\"\":this.validateImage=\"请上传封面\"},deep:!0},userShopList:{handler:function(e,t){Object($[\"a\"])(e,t).length!==t.length&&this.$emit(\"rest-use-shop\"),this.$emit(\"use-shop\",{use_range:this.userRange,use_shop_list:this.useShopIds})},deep:!0}},data:function(){var e=this.$stForm.create(),t=e.decorators(k);return{SHOP_RANGE:I[\"d\"],SHELF_STATUS:I[\"c\"],moment:x.a,validateIntro:\"\",validateUseShop:\"\",validateSaleShop:\"\",form:e,decorators:t,isTransfer:!1,validateImage:\"\",transfer:{transfer_unit:1,is_allow_transfer:0},packageData:{transfer_unit:1,is_allow_transfer:0,sale_mode:[1]},reserveIsLimitOptions:[{label:\"不限制\",value:0},{label:\"限制\",value:1}],useShopIds:[],saleShopIds:[],image:{},content:\"\",imageErrorText:\"\",fileList:[],saleDate:[null,null],cropperModal:{},reserveIsLimitInfo:{},userRange:3,saleRange:3,userShopList:[],saleShopList:[],remarks:\"\"}},methods:{getFormdata:function(e){var t=Object(D[\"a\"])(e)||{};t.saleDate&&t.saleDate.length&&(t.start_time=\"string\"===typeof t.saleDate[0]?t.saleDate[0]:t.saleDate[0].format(\"YYYY-MM-DD\"),t.end_time=\"string\"===typeof t.saleDate[1]?t.saleDate[1]:t.saleDate[1].format(\"YYYY-MM-DD\"),delete t.saleDate);var a=A({},t,{is_allow_transfer:+this.isTransfer,remarks:this.remarks,intro:this.content,image:this.image,sale_shop_list:this.saleShopList.map((function(e){return\"object\"===Object(o[\"a\"])(e)?e.shop_id:e})),use_shop_list:this.userShopList.map((function(e){return\"object\"===Object(o[\"a\"])(e)?e.shop_id:e}))});return a},validate:function(){return this.useRange!==I[\"d\"].SPECIFIED_STORE||this.userShopList.length||(this.validateUseShop=\"请选择使用门店\"),this.saleRange!==I[\"d\"].SPECIFIED_STORE||this.saleShopList.length||(this.validateUseShop=\"请选择售卖门店\"),this.fileList.length?this.imageErrorText=\"\":this.imageErrorText=\"请上传封面\",this.validateIntro||this.validateUseShop||this.validateSaleShop},onSave:function(){var e=this;this.validate()||this.form.validate().then((function(t){e.$emit(\"submit-form\",e.getFormdata(t))}))},onSaveAndOnShelf:function(){var e=this;this.validate()||this.form.validate().then((function(t){e.$emit(\"up\",e.getFormdata(t))}))},onUserShopChange:function(e){this.$emit(\"rest-use-shop\"),this.userRange=e.target.value},onSaleShopChange:function(e){this.saleRange=e.target.value},getUserShopFormItem:function(e){this.userShopList=e,this.useShopIds=e},getSaleShopFormItem:function(e){this.saleShopList=e},onSaleDate:function(){},transferUnitChange:function(e){this.transfer.transfer_unit=e},onTransferChange:function(e){},onChangeEditor:function(){},fileChange:function(e){e.length?(this.image.image_id=e[0].image_id,this.image.image_key=e[0].image_key,this.imageIsNone=!1,this.imageErrorText=\"\"):(this.image.image_id=null,this.image.image_key=\"\",this.imageIsNone=!0,this.imageErrorText=\"请上传封面\")}},created:function(){this.fileList=this.initInfo.image?[this.initInfo.image]:[],this.content=this.initInfo.intro,this.remarks=this.initInfo.remarks,this.isTransfer=!!this.initInfo.is_allow_transfer,this.transfer.transfer_unit=this.initInfo.transfer_unit,this.saleRange=this.initInfo.sale_range,this.userRange=this.initInfo.use_range,this.initInfo.sale_shop_list&&this.initInfo.sale_shop_list.length&&(this.saleShopIds=this.initInfo.sale_shop_list.map((function(e){return e.shop_id})),this.saleShopList=this.initInfo.sale_shop_list),this.initInfo.use_shop_list&&this.initInfo.use_shop_list.length&&(this.userShopList=this.initInfo.use_shop_list,this.useShopIds=this.initInfo.use_shop_list.map((function(e){return e.shop_id})))}},P=R,E=Object(v[\"a\"])(P,i,n,!1,null,null,null);t[\"a\"]=E.exports},ff5f:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"AddRangePackageService\",(function(){return b}));var s,i,n,o,r=a(\"d225\"),c=a(\"b0b4\"),l=a(\"9ab4\"),u=a(\"2138\"),p=a(\"0cd5\"),d=a(\"9abd\"),h=a(\"df29\"),m=a(\"ecc1\"),f=a(\"e69b\"),_=a(\"c4cc\"),b=function(){function e(t,a,s,i){Object(r[\"a\"])(this,e),this.api=t,this.msg=a,this.commonApi=s,this.userService=i,this.coachList$=new h[\"d\"]({}),this.isLimitOptions$=this.userService.getOptions$(\"package_course.is_limit\")}return Object(c[\"a\"])(e,[{key:\"add\",value:function(e){var t=this;return this.api.addRange(e).pipe(Object(_[\"a\"])((function(e){t.msg.success({content:\"新增课程包成功\"})})))}},{key:\"addAndUp\",value:function(e){var t=this;return this.api.addRangeOnShelf(e).pipe(Object(_[\"a\"])((function(e){t.msg.success({content:\"新增并上架课程包成功\"})})))}},{key:\"getCoachList\",value:function(){var e=this;return this.commonApi.getCoachList().pipe(Object(_[\"a\"])((function(t){e.coachList$.commit((function(){return t.list}))})))}}]),e}();b=Object(l[\"b\"])([Object(p[\"b\"])(),Object(l[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof m[\"a\"]&&m[\"a\"])?s:Object,\"function\"===typeof(i=\"undefined\"!==typeof f[\"a\"]&&f[\"a\"])?i:Object,\"function\"===typeof(n=\"undefined\"!==typeof d[\"a\"]&&d[\"a\"])?n:Object,\"function\"===typeof(o=\"undefined\"!==typeof u[\"a\"]&&u[\"a\"])?o:Object])],b)}}]);","extractedComments":[]}