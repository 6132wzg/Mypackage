{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/marketing/add-signup.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/marketing/add-signup.vue","mtime":1600926555861},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { ruleOptions } from \"./add-signup.config\";\nimport { PatternService } from '@/services/pattern.service';\nimport { MessageService } from '@/services/message.service';\n\nvar uuidv1 = require('uuid/v1');\n\nexport default {\n  name: 'ModalAddTicket',\n  bem: {\n    bModal: 'modal-marketing-add-signup'\n  },\n  serviceInject: function serviceInject() {\n    return {\n      pattern: PatternService,\n      msg: MessageService\n    };\n  },\n  data: function data() {\n    var form = this.$stForm.create();\n    var decorators = form.decorators(ruleOptions);\n    return {\n      extraTypeList: ['text', 'textarea', 'radio', 'checkbox'],\n      form: form,\n      decorators: decorators,\n      show: false,\n      ticketType: 1,\n      option: '',\n      extraType: 1,\n      extra_info: []\n    };\n  },\n  props: {\n    modalTitle: {\n      type: String,\n      default: '报名信息设置'\n    },\n    extra_sort: Number,\n    signUpList: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  computed: {\n    isShowSignUp: function isShowSignUp() {\n      return this.extraType === 2 || this.extraType === 3;\n    }\n  },\n  methods: {\n    onCLickDelOption: function onCLickDelOption(value) {\n      this.extra_info = this.extra_info.filter(function (item) {\n        return item !== value;\n      });\n    },\n    onCLickGetOption: function onCLickGetOption() {\n      if (this.extra_info.length >= 10) {\n        this.msg.error({\n          content: '报名的选项最多新增10个选项值'\n        });\n        return;\n      }\n\n      if (!this.option) {\n        this.msg.error({\n          content: '报名选项不能为空'\n        });\n        return;\n      }\n\n      if (!this.pattern.CN_EN_NUM('1-15').test(this.option)) {\n        this.msg.error({\n          content: '请输入1~15个字符'\n        });\n        return;\n      }\n\n      if (!this.extra_info.includes(this.option)) {\n        this.extra_info.push(this.option);\n        this.option = '';\n      } else {\n        this.msg.error({\n          content: '选项重复,请重新填写'\n        });\n      }\n    },\n    onChangeExtraType: function onChangeExtraType(e) {\n      this.extraType = e.target.value;\n    },\n    isUniq: function isUniq(name) {\n      var bool = false;\n      this.signUpList.forEach(function (item) {\n        bool = item.extra_name === name;\n      });\n      return bool;\n    },\n    onSubmit: function onSubmit() {\n      var _this = this;\n\n      this.form.validate().then(function (values) {\n        if (_this.isUniq(values.extra_name)) {\n          _this.msg.error({\n            content: '标题名重复请重新填写'\n          });\n\n          return;\n        }\n\n        _this.show = false;\n        var obj = {\n          extra_name: values.extra_name,\n          extra_require: values.extra_require,\n          extra_default_value: '',\n          extra_sort: _this.extra_sort,\n          extra_info: _this.extra_info,\n          extra_type: _this.extraTypeList[values.extra_type],\n          extra_key: uuidv1(values)\n        };\n\n        _this.$emit('show', obj);\n\n        _this.$emit('submit', obj);\n      });\n    }\n  }\n};",{"version":3,"sources":["add-signup.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <st-modal :title=\"modalTitle\" width=\"568px\" v-model=\"show\">\n    <div :class=\"bModal()\">\n      <st-form :form=\"form\">\n        <st-form-item label=\"报名标题\">\n          <a-input\n            placeholder=\"请输入报名项\"\n            v-decorator=\"decorators.extra_name\"\n          ></a-input>\n        </st-form-item>\n        <st-form-item label=\"报名类型\">\n          <a-radio-group\n            @change=\"onChangeExtraType\"\n            v-decorator=\"decorators.extra_type\"\n          >\n            <a-radio :value=\"0\">单行文本</a-radio>\n            <a-radio :value=\"1\">多行文本</a-radio>\n            <a-radio :value=\"2\">单选</a-radio>\n            <a-radio :value=\"3\">多选</a-radio>\n          </a-radio-group>\n        </st-form-item>\n        <st-form-item v-if=\"isShowSignUp\" label=\"报名选项\">\n          <a-input-group compact>\n            <a-input\n              v-model=\"option\"\n              style=\"width: 80%\"\n              placeholder=\"请填写报名选项\"\n            />\n            <st-button @click=\"onCLickGetOption\">新增</st-button>\n          </a-input-group>\n          <div class=\"option-group-wrap\">\n            <div\n              size=\"small\"\n              :key=\"index\"\n              class=\"mg-r8 option-tip\"\n              v-for=\"(item, index) in extra_info\"\n            >\n              <span class=\"tip\">{{ item }}</span>\n              <span class=\"mg-l8\" @click=\"onCLickDelOption(item)\">x</span>\n            </div>\n          </div>\n        </st-form-item>\n        <st-form-item class=\"mg-b0\" label=\"是否必填\">\n          <a-radio-group v-decorator=\"decorators.extra_require\">\n            <a-radio :value=\"1\">是</a-radio>\n            <a-radio :value=\"2\">否</a-radio>\n          </a-radio-group>\n        </st-form-item>\n      </st-form>\n    </div>\n    <template slot=\"footer\">\n      <st-button @click=\"show = false\">取消</st-button>\n      <st-button @click=\"onSubmit\" type=\"primary\">\n        确定\n      </st-button>\n    </template>\n  </st-modal>\n</template>\n<script>\nimport { ruleOptions } from './add-signup.config'\nimport { PatternService } from '@/services/pattern.service'\nimport { MessageService } from '@/services/message.service'\nconst uuidv1 = require('uuid/v1')\nexport default {\n  name: 'ModalAddTicket',\n  bem: {\n    bModal: 'modal-marketing-add-signup'\n  },\n  serviceInject() {\n    return {\n      pattern: PatternService,\n      msg: MessageService\n    }\n  },\n  data() {\n    const form = this.$stForm.create()\n    const decorators = form.decorators(ruleOptions)\n    return {\n      extraTypeList: ['text', 'textarea', 'radio', 'checkbox'],\n      form,\n      decorators,\n      show: false,\n      ticketType: 1,\n      option: '',\n      extraType: 1,\n      extra_info: []\n    }\n  },\n  props: {\n    modalTitle: {\n      type: String,\n      default: '报名信息设置'\n    },\n    extra_sort: Number,\n    signUpList: {\n      type: Array,\n      default: () => []\n    }\n  },\n  computed: {\n    isShowSignUp() {\n      return this.extraType === 2 || this.extraType === 3\n    }\n  },\n  methods: {\n    onCLickDelOption(value) {\n      this.extra_info = this.extra_info.filter(item => item !== value)\n    },\n    onCLickGetOption() {\n      if (this.extra_info.length >= 10) {\n        this.msg.error({ content: '报名的选项最多新增10个选项值' })\n        return\n      }\n      if (!this.option) {\n        this.msg.error({ content: '报名选项不能为空' })\n        return\n      }\n      if (!this.pattern.CN_EN_NUM('1-15').test(this.option)) {\n        this.msg.error({ content: '请输入1~15个字符' })\n        return\n      }\n      if (!this.extra_info.includes(this.option)) {\n        this.extra_info.push(this.option)\n        this.option = ''\n      } else {\n        this.msg.error({ content: '选项重复,请重新填写' })\n      }\n    },\n    onChangeExtraType(e) {\n      this.extraType = e.target.value\n    },\n    isUniq(name) {\n      let bool = false\n      this.signUpList.forEach(item => {\n        bool = item.extra_name === name\n      })\n      return bool\n    },\n    onSubmit() {\n      this.form.validate().then(values => {\n        if (this.isUniq(values.extra_name)) {\n          this.msg.error({ content: '标题名重复请重新填写' })\n          return\n        }\n        this.show = false\n        const obj = {\n          extra_name: values.extra_name,\n          extra_require: values.extra_require,\n          extra_default_value: '',\n          extra_sort: this.extra_sort,\n          extra_info: this.extra_info,\n          extra_type: this.extraTypeList[values.extra_type],\n          extra_key: uuidv1(values)\n        }\n        this.$emit('show', obj)\n        this.$emit('submit', obj)\n      })\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/biz-modals/marketing"}]}