{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/package/form/form-item#/slod-price-setting-form-item.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/package/form/form-item#/slod-price-setting-form-item.vue","mtime":1600926555705},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { cloneDeep } from 'lodash'\nimport { PACKAGE_ATTR } from './const.ts'\nexport default {\n  name: 'SlodPriceSettingFormItem',\n  inject: ['form'],\n  data() {\n    return {\n      teamPrice: 0,\n      personalPrice: 0,\n      isSettingPrice: false,\n      totalPrice: 0,\n      PACKAGE_ATTR\n    }\n  },\n  methods: {\n    onChangeTeamPrice(value) {\n      this.isSettingPrice = true\n      this.teamPrice = +value\n    },\n    onChangePersonalPrice(value) {\n      this.isSettingPrice = true\n      this.personalPrice = +value\n    },\n    onChangeTotalPrice(value) {\n      this.isSettingPrice = true\n      this.totalPrice = +value\n    }\n  },\n  computed: {\n    initInfo() {\n      return this.form.initInfo\n    },\n    realityPrice() {\n      if (this.form.isEdit && !this.isSettingPrice) {\n        return this.form.initInfo.price\n      }\n      return (\n        this.totalPrice || (+this.teamPrice + this.personalPrice).toFixed(1)\n      )\n    },\n    personalCourse() {\n      return this.form.personalCourse\n    },\n    teamCourse() {\n      return this.form.teamCourse\n    },\n    referPrice() {\n      let count = 0\n      if (this.isFix) {\n        let course = cloneDeep([...this.personalCourse, ...this.teamCourse])\n        course.forEach(item => {\n          count += (item.course_times || 0) * (item.course_unit_price || 0)\n        })\n      }\n      return count\n    },\n    decorators() {\n      return this.form.decorators\n    },\n    // 可选课程中类 spec 1 仅团课 2 仅私教课 3 团课 和 私教 4 私教团课混合\n    spec() {\n      return this.form.courseSetting.spec\n    },\n    isRange() {\n      return this.packageAttr === PACKAGE_ATTR.RANGE\n    },\n    isAll() {\n      return this.packageAttr === PACKAGE_ATTR.ALL\n    },\n    isFix() {\n      return this.packageAttr === PACKAGE_ATTR.FIX\n    },\n    unLimited() {\n      return this.form.unLimited\n    },\n    packageAttr() {\n      return this.form.packageAttr\n    },\n    formVueData() {\n      return this.form.form\n    }\n  },\n  mounted() {\n    if ([1, 3, 4].includes(spec)) {\n      this.teamPrice = +this.initInfo.team_total_price || 0\n    }\n    if ([(2, 3, 4)].includes(spec)) {\n      this.personalPrice = +this.initInfo.personal_total_price || 0\n    }\n  }\n}\n",{"version":3,"sources":["slod-price-setting-form-item.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"slod-price-setting-form-item.vue","sourceRoot":"src/views/biz-components/package/form/form-item#","sourcesContent":["<template>\n  <div>\n    <a-row :gutter=\"2\" v-if=\"isAll || (isRange && !unLimited)\">\n      <a-col :lg=\"24\" style=\"display: flex;\">\n        <st-form-item\n          v-if=\"spec !== 2\"\n          :label=\"spec !== 4 ? '价格设置' : '实际售价'\"\n          labelWidth=\"148px\"\n          required\n        >\n          <!-- 这个用于固定课程 -->\n          <div class=\"biz-package-form__price-setting\">\n            <template v-if=\"spec === 1 || spec === 3\">\n              <span class=\"mg-r20\">团体课总售价</span>\n              <st-input-number\n                v-decorator=\"decorators.team_total_price\"\n                style=\"width: 121px\"\n                :min=\"0\"\n                :max=\"9999999.9\"\n                float\n                @change=\"onChangeTeamPrice\"\n              >\n                <template slot=\"addonAfter\">元</template>\n              </st-input-number>\n            </template>\n\n            <template v-if=\"spec === 4\">\n              <span class=\"mg-r20\">\n                团课&私教课总售价\n              </span>\n              <st-input-number\n                float\n                :min=\"0\"\n                :max=\"9999999.9\"\n                @change=\"onChangeTotalPrice\"\n                v-decorator=\"decorators.price\"\n                style=\"width: 121px\"\n              >\n                <template slot=\"addonAfter\">元</template>\n              </st-input-number>\n            </template>\n          </div>\n        </st-form-item>\n        <!-- 单独为私教的时候只有私教课一个价格设置表单 -->\n        <st-form-item\n          v-if=\"spec === 2 || spec === 3\"\n          :label=\"spec === 2 ? '价格设置' : ' '\"\n          :labelWidth=\"spec === 2 ? '148px' : '0'\"\n          :required=\"spec === 2\"\n        >\n          <template>\n            <span class=\"mg-r20\">\n              私教课总售价\n            </span>\n            <st-input-number\n              float\n              :min=\"0\"\n              :max=\"9999999.9\"\n              @change=\"onChangePersonalPrice\"\n              v-decorator=\"decorators.personal_total_price\"\n              style=\"width: 121px\"\n            >\n              <template slot=\"addonAfter\">元</template>\n            </st-input-number>\n          </template>\n        </st-form-item>\n      </a-col>\n    </a-row>\n    <a-row :gutter=\"2\">\n      <a-col :lg=\"8\" :xs=\"11\">\n        <st-form-item label=\"参考价\" v-if=\"isFix\" labelWidth=\"148px\" required>\n          <!-- 这个用于固定课程 -->\n          {{ referPrice }}元\n        </st-form-item>\n      </a-col>\n    </a-row>\n    <a-row :gutter=\"2\" v-if=\"spec !== 4\">\n      <a-col :lg=\"8\" :xs=\"11\">\n        <st-form-item label=\"实际售价\" labelWidth=\"148px\" required>\n          <!-- 这个用于任意课程 限定范围-->\n          <st-input-number\n            v-if=\"isFix || (unLimited && isRange)\"\n            v-decorator=\"decorators.price\"\n            :min=\"0\"\n            :max=\"9999999.9\"\n            float\n            style=\"width: 120px\"\n          >\n            <template slot=\"addonAfter\">元</template>\n          </st-input-number>\n          <span v-if=\"isAll || (!unLimited && isRange)\">\n            {{ realityPrice }}元\n          </span>\n        </st-form-item>\n      </a-col>\n    </a-row>\n  </div>\n</template>\n\n<script>\nimport { cloneDeep } from 'lodash'\nimport { PACKAGE_ATTR } from './const.ts'\nexport default {\n  name: 'SlodPriceSettingFormItem',\n  inject: ['form'],\n  data() {\n    return {\n      teamPrice: 0,\n      personalPrice: 0,\n      isSettingPrice: false,\n      totalPrice: 0,\n      PACKAGE_ATTR\n    }\n  },\n  methods: {\n    onChangeTeamPrice(value) {\n      this.isSettingPrice = true\n      this.teamPrice = +value\n    },\n    onChangePersonalPrice(value) {\n      this.isSettingPrice = true\n      this.personalPrice = +value\n    },\n    onChangeTotalPrice(value) {\n      this.isSettingPrice = true\n      this.totalPrice = +value\n    }\n  },\n  computed: {\n    initInfo() {\n      return this.form.initInfo\n    },\n    realityPrice() {\n      if (this.form.isEdit && !this.isSettingPrice) {\n        return this.form.initInfo.price\n      }\n      return (\n        this.totalPrice || (+this.teamPrice + this.personalPrice).toFixed(1)\n      )\n    },\n    personalCourse() {\n      return this.form.personalCourse\n    },\n    teamCourse() {\n      return this.form.teamCourse\n    },\n    referPrice() {\n      let count = 0\n      if (this.isFix) {\n        let course = cloneDeep([...this.personalCourse, ...this.teamCourse])\n        course.forEach(item => {\n          count += (item.course_times || 0) * (item.course_unit_price || 0)\n        })\n      }\n      return count\n    },\n    decorators() {\n      return this.form.decorators\n    },\n    // 可选课程中类 spec 1 仅团课 2 仅私教课 3 团课 和 私教 4 私教团课混合\n    spec() {\n      return this.form.courseSetting.spec\n    },\n    isRange() {\n      return this.packageAttr === PACKAGE_ATTR.RANGE\n    },\n    isAll() {\n      return this.packageAttr === PACKAGE_ATTR.ALL\n    },\n    isFix() {\n      return this.packageAttr === PACKAGE_ATTR.FIX\n    },\n    unLimited() {\n      return this.form.unLimited\n    },\n    packageAttr() {\n      return this.form.packageAttr\n    },\n    formVueData() {\n      return this.form.form\n    }\n  },\n  mounted() {\n    if ([1, 3, 4].includes(spec)) {\n      this.teamPrice = +this.initInfo.team_total_price || 0\n    }\n    if ([(2, 3, 4)].includes(spec)) {\n      this.personalPrice = +this.initInfo.personal_total_price || 0\n    }\n  }\n}\n</script>\n"]}]}