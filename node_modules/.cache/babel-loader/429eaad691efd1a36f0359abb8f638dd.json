{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/card-bg-radio/card-bg-radio.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/card-bg-radio/card-bg-radio.vue","mtime":1600926555657},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport StImageUpload from '@/views/components/image-upload#/image-upload.vue';\nimport { cloneDeep } from 'lodash-es';\nimport { UserService } from '@/services/user.service';\nvar className = ['first custom', 'second custom', 'third custom', 'fourth custom'];\nexport default {\n  name: 'StCardBgRadio',\n  bem: {\n    cardRadio: 'st-card-bg-radio'\n  },\n  components: {\n    StImageUpload: StImageUpload\n  },\n  serviceInject: function serviceInject() {\n    return {\n      userService: UserService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      memberCardBgList: this.userService.getOptions$('member_card.card_bg_list'),\n      familyCardBgList: this.userService.getOptions$('member_card.family_card_bg_list'),\n      smallCourseCardBgList: this.userService.getOptions$('small_course.small_bg_list'),\n      packageBgList: this.userService.getOptions$('package_course.package_bg_list')\n    };\n  },\n  created: function created() {\n    this.init();\n  },\n  computed: {\n    bgIndex: function bgIndex() {\n      return this.radioIndex === 0 ? 4 : this.radioIndex - 1;\n    },\n    cardBgList: function cardBgList() {\n      var arr = [];\n      this.card_bg_list.forEach(function (item, index) {\n        item.className = className[index];\n        item.index = ++index;\n        arr.push(item);\n      });\n      return arr;\n    }\n  },\n  data: function data() {\n    return {\n      // 截图参数对象\n      cropperModal: {},\n      card_bg_list: this.isFamilyCard ? this.familyCardBgList : this.isSmallCourse ? this.smallCourseCardBgList : this.isPackage ? this.packageBgList : this.memberCardBgList,\n      // 备份\n      list: [],\n      // radioIndex\n      radioIndex: 1,\n      // 选择的cardBg\n      cardBg: {\n        image_id: 0,\n        image_key: this.memberCardBgList[0].image_key,\n        image_url: this.memberCardBgList[0].image_url,\n        index: 1\n      },\n      // 自定义cardBg\n      customCardBg: {\n        image_id: 0,\n        image_key: '',\n        image_url: '',\n        index: 0\n      },\n      // 回显的自定义bg\n      fileList: []\n    };\n  },\n  watch: {\n    value: {\n      handler: function handler(newVal) {\n        this.setdata(newVal);\n      },\n      deep: true\n    },\n    radioIndex: function radioIndex(newVal) {\n      if (newVal === 0 || !newVal) {\n        this.cardBg = cloneDeep(this.customCardBg);\n      } else {\n        var i = newVal;\n        --i;\n        this.cardBg = cloneDeep(this.card_bg_list[i]);\n        this.cardBg.index = newVal;\n      }\n\n      this.$emit('input', this.cardBg);\n      this.$emit('change', this.cardBg);\n    }\n  },\n  props: {\n    value: {\n      type: Object,\n      default: function _default() {\n        return {\n          image_id: 0,\n          image_key: '',\n          image_url: '',\n          index: 1\n        };\n      }\n    },\n    isFamilyCard: {\n      type: Boolean,\n      default: false\n    },\n    isSmallCourse: {\n      type: Boolean,\n      default: false\n    },\n    // 是否是课程包\n    isPackage: {\n      type: Boolean,\n      default: false\n    }\n  },\n  mounted: function mounted() {\n    this.setRadioColor();\n  },\n  methods: {\n    init: function init() {\n      this.list = cloneDeep(this.card_bg_list);\n      this.setdata(this.value);\n    },\n    setRadioColor: function setRadioColor() {\n      var innerHTML = '';\n      this.cardBgList.forEach(function (i) {\n        innerHTML += \"\\n          .st-card-bg-radio .\".concat(i.className.split('custom')[0], \" .ant-radio-inner::after {\\n            background-color: \").concat(i.color, \";\\n          }\\n        \");\n      });\n      var style = document.createElement('style');\n      style.innerHTML = innerHTML;\n      document.head.appendChild(style);\n    },\n    setdata: function setdata(data) {\n      this.radioIndex = data.index;\n\n      if (data.index === 0) {\n        this.customCardBg = cloneDeep(data);\n\n        if (data.image_url) {\n          this.fileList = [{\n            image_id: data.image_id,\n            image_key: data.image_url\n          }];\n        }\n      } else {\n        this.card_bg_list = cloneDeep(this.list);\n        var i = data.index;\n        --i;\n        this.card_bg_list[i].image_id = data.image_id;\n      }\n    },\n    imageUploadChange: function imageUploadChange(fileList) {\n      if (fileList.length) {\n        this.customCardBg = {\n          image_id: fileList[0].image_id,\n          image_key: fileList[0].image_key,\n          image_url: fileList[0].image_url,\n          index: 0\n        };\n      } else {\n        this.fileList = [];\n        this.customCardBg = {\n          image_id: 0,\n          image_key: '',\n          image_url: '',\n          index: 0\n        };\n      }\n\n      this.cardBg = cloneDeep(this.customCardBg);\n      this.$emit('input', this.cardBg);\n      this.$emit('change', this.cardBg);\n    }\n  }\n};",{"version":3,"sources":["card-bg-radio.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div :class=\"cardRadio()\">\n    <a-radio-group v-model=\"radioIndex\">\n      <a-radio\n        v-for=\"(i, index) in cardBgList\"\n        :class=\"i.className\"\n        :key=\"index\"\n        :value=\"i.index\"\n      ></a-radio>\n      <a-radio :value=\"0\">自定义背景</a-radio>\n    </a-radio-group>\n    <div :class=\"cardRadio('image')\">\n      <img\n        v-if=\"radioIndex !== 0 && cardBgList[bgIndex]\"\n        :src=\"cardBgList[bgIndex].image_url | imgFilter({ w: 192, h: 108 })\"\n        width=\"192\"\n        height=\"108\"\n        :alt=\"`${$c('member_card')}背景`\"\n      />\n      <div v-else :class=\"cardRadio('upload')\">\n        <st-image-upload\n          @change=\"imageUploadChange\"\n          width=\"192px\"\n          height=\"108px\"\n          :cropperModal=\"cropperModal\"\n          :list=\"fileList\"\n          :sizeLimit=\"2\"\n          placeholder=\"上传照片\"\n        ></st-image-upload>\n        <div :class=\"cardRadio('describe')\">\n          <span :class=\"cardRadio('describe-tip')\">\n            建议尺寸 750X422像素\n          </span>\n          <span>支持jpg、png、bmp格式，大小不超过2M</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport StImageUpload from '@/views/components/image-upload#/image-upload.vue'\nimport { cloneDeep } from 'lodash-es'\nimport { UserService } from '@/services/user.service'\nlet className = [\n  'first custom',\n  'second custom',\n  'third custom',\n  'fourth custom'\n]\nexport default {\n  name: 'StCardBgRadio',\n  bem: {\n    cardRadio: 'st-card-bg-radio'\n  },\n  components: {\n    StImageUpload\n  },\n  serviceInject() {\n    return {\n      userService: UserService\n    }\n  },\n  rxState() {\n    return {\n      memberCardBgList: this.userService.getOptions$(\n        'member_card.card_bg_list'\n      ),\n      familyCardBgList: this.userService.getOptions$(\n        'member_card.family_card_bg_list'\n      ),\n      smallCourseCardBgList: this.userService.getOptions$(\n        'small_course.small_bg_list'\n      ),\n      packageBgList: this.userService.getOptions$(\n        'package_course.package_bg_list'\n      )\n    }\n  },\n  created() {\n    this.init()\n  },\n  computed: {\n    bgIndex() {\n      return this.radioIndex === 0 ? 4 : this.radioIndex - 1\n    },\n    cardBgList() {\n      let arr = []\n      this.card_bg_list.forEach((item, index) => {\n        item.className = className[index]\n        item.index = ++index\n        arr.push(item)\n      })\n      return arr\n    }\n  },\n  data() {\n    return {\n      // 截图参数对象\n      cropperModal: {},\n      card_bg_list: this.isFamilyCard\n        ? this.familyCardBgList\n        : this.isSmallCourse\n        ? this.smallCourseCardBgList\n        : this.isPackage\n        ? this.packageBgList\n        : this.memberCardBgList,\n      // 备份\n      list: [],\n      // radioIndex\n      radioIndex: 1,\n      // 选择的cardBg\n      cardBg: {\n        image_id: 0,\n        image_key: this.memberCardBgList[0].image_key,\n        image_url: this.memberCardBgList[0].image_url,\n        index: 1\n      },\n      // 自定义cardBg\n      customCardBg: {\n        image_id: 0,\n        image_key: '',\n        image_url: '',\n        index: 0\n      },\n      // 回显的自定义bg\n      fileList: []\n    }\n  },\n  watch: {\n    value: {\n      handler(newVal) {\n        this.setdata(newVal)\n      },\n      deep: true\n    },\n    radioIndex(newVal) {\n      if (newVal === 0 || !newVal) {\n        this.cardBg = cloneDeep(this.customCardBg)\n      } else {\n        let i = newVal\n        --i\n        this.cardBg = cloneDeep(this.card_bg_list[i])\n        this.cardBg.index = newVal\n      }\n      this.$emit('input', this.cardBg)\n      this.$emit('change', this.cardBg)\n    }\n  },\n  props: {\n    value: {\n      type: Object,\n      default() {\n        return {\n          image_id: 0,\n          image_key: '',\n          image_url: '',\n          index: 1\n        }\n      }\n    },\n    isFamilyCard: {\n      type: Boolean,\n      default: false\n    },\n    isSmallCourse: {\n      type: Boolean,\n      default: false\n    },\n    // 是否是课程包\n    isPackage: {\n      type: Boolean,\n      default: false\n    }\n  },\n  mounted() {\n    this.setRadioColor()\n  },\n  methods: {\n    init() {\n      this.list = cloneDeep(this.card_bg_list)\n      this.setdata(this.value)\n    },\n    setRadioColor() {\n      let innerHTML = ''\n      this.cardBgList.forEach(i => {\n        innerHTML += `\n          .st-card-bg-radio .${\n            i.className.split('custom')[0]\n          } .ant-radio-inner::after {\n            background-color: ${i.color};\n          }\n        `\n      })\n      let style = document.createElement('style')\n      style.innerHTML = innerHTML\n      document.head.appendChild(style)\n    },\n    setdata(data) {\n      this.radioIndex = data.index\n      if (data.index === 0) {\n        this.customCardBg = cloneDeep(data)\n        if (data.image_url) {\n          this.fileList = [\n            {\n              image_id: data.image_id,\n              image_key: data.image_url\n            }\n          ]\n        }\n      } else {\n        this.card_bg_list = cloneDeep(this.list)\n        let i = data.index\n        --i\n        this.card_bg_list[i].image_id = data.image_id\n      }\n    },\n    imageUploadChange(fileList) {\n      if (fileList.length) {\n        this.customCardBg = {\n          image_id: fileList[0].image_id,\n          image_key: fileList[0].image_key,\n          image_url: fileList[0].image_url,\n          index: 0\n        }\n      } else {\n        this.fileList = []\n        this.customCardBg = {\n          image_id: 0,\n          image_key: '',\n          image_url: '',\n          index: 0\n        }\n      }\n      this.cardBg = cloneDeep(this.customCardBg)\n      this.$emit('input', this.cardBg)\n      this.$emit('change', this.cardBg)\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/biz-components/card-bg-radio"}]}