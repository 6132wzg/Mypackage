{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/crowd/add.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/crowd/add.vue","mtime":1597396799954},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport base_info from './components#/basic-data'\nimport base_sex from './components#/base_sex'\nimport base_age from './components#/base_age'\nimport base_birthday from './components#/base_birthday'\nimport regTime from './components#/reg-time'\nimport affiliatedStore from './components#/affiliated-store'\nimport availableIntegral from './components#/available-integral'\nimport availableCoupons from './components#/available-coupons'\nimport accumulateIntegrals from './components#/accumulate-integrals'\nimport membershipExpires from './components#/membership-expires'\nimport cardRemainingNumber from './components#/card-remaining-number'\nimport privateClassNum from './components#/private-class-num'\nimport cardMount from './components#/card-mount'\nimport admissionTimes from './components#/admission-times'\nimport lastAdmissionTime from './components#/last-admission-time'\nimport sourceMode from './components#/source-mode.vue'\nimport inductionTime from './components#/induction-time.vue'\nimport { AddService } from './add.service'\nimport routes from '@/router/routes'\nimport { MessageService } from '@/services/message.service'\nexport default {\n  serviceInject() {\n    return {\n      addService: AddService,\n      messageService: MessageService\n    }\n  },\n  rxState() {\n    return {\n      loading: this.addService.loading$,\n      crowdInfo: this.addService.crowdInfo$\n    }\n  },\n  components: {\n    'basic-data': base_info, // 左侧组件\n    'reg-time': regTime, // 注册时间\n    'source-mode': sourceMode, // 来源方式\n    'induction-time': inductionTime, // 入会时间\n    base_birthday: base_birthday, // 生日\n    base_sex: base_sex, // 性别\n    base_age: base_age, // 年龄\n    'affiliated-store': affiliatedStore, // 所属门店\n    'available-integral': availableIntegral, // 可用积分\n    'available-coupons': availableCoupons, // 可用优惠劵\n    'accumulate-integrals': accumulateIntegrals, // 累计获取积分\n    'membership-expires': membershipExpires, // 会员卡即将到期\n    'card-remaining-number': cardRemainingNumber, // 会员卡剩余次数\n    'admission-times': admissionTimes, // 入场次数\n    'private-class-num': privateClassNum, // 私教课剩余次数\n    cardMount, // 储值卡剩余金额\n    lastAdmissionTime // 最后一次入场时间\n  },\n  data() {\n    let self = this\n    return {\n      // 状态锁\n      flag: true,\n      form: this.$form.createForm(this),\n      basicInfoRuleList: {\n        crowd_name: [\n          'crowd_name',\n          {\n            rules: [\n              {\n                required: true,\n                message: '不超过20字，且不包含“/”'\n              }\n            ]\n          }\n        ]\n      },\n      selectData: {\n        // 基础资料\n        base_info: {\n          title: '基础资料',\n          value: ['性别', 'base_age', '所属门店', '生日'],\n          selectionData: [],\n          width: 108\n        },\n        // 注册来源\n        source_info: {\n          title: '注册来源',\n          value: ['注册时间', '来源方式', '入会时间'],\n          selectionData: [],\n          width: 108\n        },\n\n        deal_info: {\n          title: '交易信息',\n          value: [\n            `${this.$c('member_card')}即将到期`,\n            `${this.$c('member_card')}剩余次数`,\n            '私教课剩余次数',\n            '储值卡剩余金额'\n          ],\n          selectionData: [],\n          width: 170\n        },\n        active_info: {\n          title: '活跃信息',\n          value: ['入场次数', '最后一次入场时间'],\n          selectionData: [],\n          width: 170\n        },\n        discount_info: {\n          title: '优惠奖励',\n          value: ['可用积分', '可用优惠券', '累计获得积分'],\n          selectionData: [],\n          width: 108\n        },\n        arrData: [],\n        getData: {\n          crowd_name: '',\n          base_sex: {\n            name: '',\n            value: ''\n          },\n          base_age: {\n            min: '',\n            max: ''\n          },\n          base_birthday: {\n            min: '',\n            max: '',\n            name: '',\n            value: ''\n          },\n          shop: [],\n          register_time: {\n            min: '',\n            max: '',\n            name: '',\n            value: ''\n          },\n          source_channel: [],\n          member_time: {\n            min: '',\n            max: ''\n          },\n          available_scores: {\n            min: '',\n            max: ''\n          },\n          available_coupon_number: {\n            min: '',\n            max: ''\n          },\n          sum_scores: {\n            min: '',\n            max: ''\n          },\n          member_expiring: {\n            min: '',\n            max: ''\n          },\n          member_card_remain_times: {\n            min: '',\n            max: ''\n          },\n          personal_course_remain_times: {\n            min: '',\n            max: ''\n          },\n          deposit_remain_money: {\n            min: '',\n            max: ''\n          },\n          remain_enter_times: {\n            select_time: {\n              min: '',\n              max: ''\n            },\n            remain_times: {\n              min: '',\n              max: ''\n            }\n          },\n          final_enter_time: {\n            min: '',\n            max: ''\n          }\n        },\n        info: {}\n      }\n    }\n  },\n  created() {\n    if (this.$searchQuery.id) {\n      this.getCrowdBrand(this.$searchQuery.id)\n    }\n    this.getFilterData()\n  },\n  filters: {\n    componentFun(value) {\n      let obj = {\n        base_sex: 'base_sex',\n        base_age: 'base_age',\n        base_birthday: 'base_birthday',\n        shop: 'affiliated-store',\n        register_time: 'reg-time',\n        source_channel: 'source-mode',\n        member_time: 'induction-time',\n        available_scores: 'available-integral',\n        available_coupon_number: 'available-coupons',\n        sum_scores: 'accumulate-integrals',\n        member_expiring: 'membership-expires',\n        member_card_remain_times: 'card-remaining-number',\n        personal_course_remain_times: 'private-class-num',\n        deposit_remain_money: 'cardMount',\n        remain_enter_times: 'admission-times',\n        final_enter_time: 'lastAdmissionTime'\n      }\n      return obj[value]\n    }\n  },\n  methods: {\n    getCrowdBrand(id) {\n      this.addService.getCrowdBrand(id).subscribe(status => {\n        this.selectData.arrData = status.info.array_index\n        this.selectData.getData.crowd_name = status.info.crowd_name\n        status.info.array_index.map(item => {\n          this.selectData.getData[item] = status.info[item]\n        })\n      })\n    },\n    conserve() {\n      this.form.validateFields((err, values) => {\n        if (!err) {\n          let obj = {}\n          this.selectData.arrData.map(item => {\n            obj[item] = this.selectData.getData[item]\n          })\n          let [arrKey, arrValue] = [[], []]\n          this.selectData.arrData.map(item => {\n            obj[item] = this.selectData.getData[item]\n            if (\n              Object.prototype.toString\n                .call(this.selectData.getData[item])\n                .slice(8, -1) === 'Object'\n            ) {\n              arrKey.push(...Object.keys(this.selectData.getData[item]))\n              arrValue.push(...Object.values(this.selectData.getData[item]))\n            } else {\n              arrKey.push(item)\n              arrValue.push(this.selectData.getData[item])\n            }\n          })\n          obj.crowd_name = values.basicInfoRuleList.crowd_name\n          obj.array_index = this.selectData.arrData\n          if (\n            obj.remain_enter_times &&\n            (!obj.remain_enter_times.remain_times.min ||\n              (!obj.remain_enter_times.select_time.min &&\n                !obj.remain_enter_times.select_time.name))\n          ) {\n            this.messageService.error({\n              content: '入场次数和时间范围必填!'\n            })\n            return\n          }\n          if (this.$searchQuery.id) {\n            this.addService\n              .updateCrowdBrandCrowd(this.$searchQuery.id, obj)\n              .subscribe(status => {\n                this.$router.push({\n                  name: 'brand-marketing-plugin-crowd-index'\n                })\n              })\n          } else {\n            this.addService.setCrowdBrandField(obj).subscribe(status => {\n              this.$router.push({ name: 'brand-marketing-plugin-crowd-index' })\n            })\n          }\n        }\n      })\n    },\n    getFilterData() {\n      Object.keys(this.crowdInfo.info).map(item => {\n        Object.assign(this.selectData.info, this.crowdInfo.info[item].value)\n        this.selectData[item].value = Object.keys(\n          this.crowdInfo.info[item].value\n        )\n      })\n    },\n    deleteIcon(data, item) {\n      let k = Object.keys(data)\n      k.map(item1 => {\n        if (item1 !== 'arrData' && item1 !== 'getData' && item1 !== 'info') {\n          if (data[item1].selectionData.indexOf(item) >= 0) {\n            data[item1].selectionData.splice(\n              data[item1].selectionData.indexOf(item),\n              1\n            )\n          }\n        } else {\n          if (data.arrData.indexOf(item) >= 0) {\n            data.arrData.splice(data.arrData.indexOf(item), 1)\n          }\n        }\n      })\n    },\n    save(e) {\n      e.preventDefault()\n      this.form.validateFields((err, values) => {\n        console.log(err, values)\n      })\n    },\n    // 校验格式\n    physicalId(rule, value, callback) {\n      if (value === undefined || value === '') {\n        // eslint-disable-next-line\n        callback('请填写人群名称')\n      } else if (value && /\\//.test(value)) {\n        // eslint-disable-next-line\n        callback('输入的人群名称格式错误，请重新输入')\n      } else {\n        // eslint-disable-next-line\n        callback()\n      }\n    }\n  },\n  mounted() {},\n  watch: {\n    selectData: {\n      handler() {\n        let k = Object.keys(this.selectData)\n        let arr = []\n        arr.push(...this.selectData.arrData)\n        if (arr.length >= 5) {\n          this.flag = false\n        } else {\n          this.flag = true\n        }\n      },\n      deep: true\n    }\n  }\n}\n",{"version":3,"sources":["add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"add.vue","sourceRoot":"src/views/pages/brand/marketing/plugin/crowd","sourcesContent":["<template>\n  <div class=\"shop-member-crowd-add\">\n    <div class=\"shop-member-crowd-add__box\">\n      <div class=\"shop-member-crowd-add__left\">\n        <st-t2>人群定义维度</st-t2>\n        <div class=\"shop-member-crowd-add__tip\">\n          单个人群最多可新增5个条件\n        </div>\n        <basic-data v-model=\"selectData\" :flag=\"flag\"></basic-data>\n      </div>\n      <div class=\"shop-member-crowd-add__right\">\n        <st-t2 class=\"mg-b24\">\n          {{ $searchQuery.id ? '编辑人群' : '新增人群' }}\n        </st-t2>\n        <st-form\n          :form=\"form\"\n          @submit=\"save\"\n          style=\"height:72px\"\n          labelWidth=\"75px\"\n        >\n          <st-form-item label=\"人群名称\" required>\n            <a-input\n              style=\"width:404px\"\n              placeholder=\"不超过20字，且不包含“/”\"\n              maxlength=\"20\"\n              v-decorator=\"[\n                'basicInfoRuleList.crowd_name',\n                {\n                  initialValue: selectData.getData.crowd_name,\n                  rules: [{ validator: physicalId }]\n                }\n              ]\"\n            />\n          </st-form-item>\n        </st-form>\n        <div class=\"shop-member-crowd-add__right-condition\">\n          <div>创建的人群同时满足以下条件</div>\n\n          <div class=\"shop-member-crowd-add__right-tip\">\n            已选\n            <label>{{ selectData.arrData.length }}/5</label>\n            个条件\n          </div>\n        </div>\n        <template v-for=\"(item, index) in selectData.arrData\">\n          <div\n            :key=\"index\"\n            class=\"shop-member-crowd-add__right-condition-box\"\n            v-if=\"selectData.arrData.indexOf(item) >= 0\"\n          >\n            <div\n              class=\"shop-member-crowd-add__right-condition-box-delete\"\n              @click=\"deleteIcon(selectData, item)\"\n            >\n              <st-icon\n                type=\"delete\"\n                class=\"shop-member-crowd-add__icon\"\n                color=\"#ff5e41\"\n              />\n            </div>\n            <component\n              v-bind:is=\"item | componentFun\"\n              v-model=\"selectData\"\n            ></component>\n          </div>\n        </template>\n        <div class=\"shop-member-crowd-add__button-group\">\n          <st-button\n            v-if=\"selectData.arrData.length\"\n            type=\"primary\"\n            class=\"mg-l16 shop-member-crowd-add__button-save\"\n            @click=\"conserve\"\n            :loading=\"\n              loading.setCrowdBrandField || loading.updateCrowdBrandCrowd\n            \"\n          >\n            保存\n          </st-button>\n          <st-button\n            v-else\n            disabled\n            type=\"primary\"\n            class=\"mg-l16 shop-member-crowd-add__button-save\"\n          >\n            保存\n          </st-button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport base_info from './components#/basic-data'\nimport base_sex from './components#/base_sex'\nimport base_age from './components#/base_age'\nimport base_birthday from './components#/base_birthday'\nimport regTime from './components#/reg-time'\nimport affiliatedStore from './components#/affiliated-store'\nimport availableIntegral from './components#/available-integral'\nimport availableCoupons from './components#/available-coupons'\nimport accumulateIntegrals from './components#/accumulate-integrals'\nimport membershipExpires from './components#/membership-expires'\nimport cardRemainingNumber from './components#/card-remaining-number'\nimport privateClassNum from './components#/private-class-num'\nimport cardMount from './components#/card-mount'\nimport admissionTimes from './components#/admission-times'\nimport lastAdmissionTime from './components#/last-admission-time'\nimport sourceMode from './components#/source-mode.vue'\nimport inductionTime from './components#/induction-time.vue'\nimport { AddService } from './add.service'\nimport routes from '@/router/routes'\nimport { MessageService } from '@/services/message.service'\nexport default {\n  serviceInject() {\n    return {\n      addService: AddService,\n      messageService: MessageService\n    }\n  },\n  rxState() {\n    return {\n      loading: this.addService.loading$,\n      crowdInfo: this.addService.crowdInfo$\n    }\n  },\n  components: {\n    'basic-data': base_info, // 左侧组件\n    'reg-time': regTime, // 注册时间\n    'source-mode': sourceMode, // 来源方式\n    'induction-time': inductionTime, // 入会时间\n    base_birthday: base_birthday, // 生日\n    base_sex: base_sex, // 性别\n    base_age: base_age, // 年龄\n    'affiliated-store': affiliatedStore, // 所属门店\n    'available-integral': availableIntegral, // 可用积分\n    'available-coupons': availableCoupons, // 可用优惠劵\n    'accumulate-integrals': accumulateIntegrals, // 累计获取积分\n    'membership-expires': membershipExpires, // 会员卡即将到期\n    'card-remaining-number': cardRemainingNumber, // 会员卡剩余次数\n    'admission-times': admissionTimes, // 入场次数\n    'private-class-num': privateClassNum, // 私教课剩余次数\n    cardMount, // 储值卡剩余金额\n    lastAdmissionTime // 最后一次入场时间\n  },\n  data() {\n    let self = this\n    return {\n      // 状态锁\n      flag: true,\n      form: this.$form.createForm(this),\n      basicInfoRuleList: {\n        crowd_name: [\n          'crowd_name',\n          {\n            rules: [\n              {\n                required: true,\n                message: '不超过20字，且不包含“/”'\n              }\n            ]\n          }\n        ]\n      },\n      selectData: {\n        // 基础资料\n        base_info: {\n          title: '基础资料',\n          value: ['性别', 'base_age', '所属门店', '生日'],\n          selectionData: [],\n          width: 108\n        },\n        // 注册来源\n        source_info: {\n          title: '注册来源',\n          value: ['注册时间', '来源方式', '入会时间'],\n          selectionData: [],\n          width: 108\n        },\n\n        deal_info: {\n          title: '交易信息',\n          value: [\n            `${this.$c('member_card')}即将到期`,\n            `${this.$c('member_card')}剩余次数`,\n            '私教课剩余次数',\n            '储值卡剩余金额'\n          ],\n          selectionData: [],\n          width: 170\n        },\n        active_info: {\n          title: '活跃信息',\n          value: ['入场次数', '最后一次入场时间'],\n          selectionData: [],\n          width: 170\n        },\n        discount_info: {\n          title: '优惠奖励',\n          value: ['可用积分', '可用优惠券', '累计获得积分'],\n          selectionData: [],\n          width: 108\n        },\n        arrData: [],\n        getData: {\n          crowd_name: '',\n          base_sex: {\n            name: '',\n            value: ''\n          },\n          base_age: {\n            min: '',\n            max: ''\n          },\n          base_birthday: {\n            min: '',\n            max: '',\n            name: '',\n            value: ''\n          },\n          shop: [],\n          register_time: {\n            min: '',\n            max: '',\n            name: '',\n            value: ''\n          },\n          source_channel: [],\n          member_time: {\n            min: '',\n            max: ''\n          },\n          available_scores: {\n            min: '',\n            max: ''\n          },\n          available_coupon_number: {\n            min: '',\n            max: ''\n          },\n          sum_scores: {\n            min: '',\n            max: ''\n          },\n          member_expiring: {\n            min: '',\n            max: ''\n          },\n          member_card_remain_times: {\n            min: '',\n            max: ''\n          },\n          personal_course_remain_times: {\n            min: '',\n            max: ''\n          },\n          deposit_remain_money: {\n            min: '',\n            max: ''\n          },\n          remain_enter_times: {\n            select_time: {\n              min: '',\n              max: ''\n            },\n            remain_times: {\n              min: '',\n              max: ''\n            }\n          },\n          final_enter_time: {\n            min: '',\n            max: ''\n          }\n        },\n        info: {}\n      }\n    }\n  },\n  created() {\n    if (this.$searchQuery.id) {\n      this.getCrowdBrand(this.$searchQuery.id)\n    }\n    this.getFilterData()\n  },\n  filters: {\n    componentFun(value) {\n      let obj = {\n        base_sex: 'base_sex',\n        base_age: 'base_age',\n        base_birthday: 'base_birthday',\n        shop: 'affiliated-store',\n        register_time: 'reg-time',\n        source_channel: 'source-mode',\n        member_time: 'induction-time',\n        available_scores: 'available-integral',\n        available_coupon_number: 'available-coupons',\n        sum_scores: 'accumulate-integrals',\n        member_expiring: 'membership-expires',\n        member_card_remain_times: 'card-remaining-number',\n        personal_course_remain_times: 'private-class-num',\n        deposit_remain_money: 'cardMount',\n        remain_enter_times: 'admission-times',\n        final_enter_time: 'lastAdmissionTime'\n      }\n      return obj[value]\n    }\n  },\n  methods: {\n    getCrowdBrand(id) {\n      this.addService.getCrowdBrand(id).subscribe(status => {\n        this.selectData.arrData = status.info.array_index\n        this.selectData.getData.crowd_name = status.info.crowd_name\n        status.info.array_index.map(item => {\n          this.selectData.getData[item] = status.info[item]\n        })\n      })\n    },\n    conserve() {\n      this.form.validateFields((err, values) => {\n        if (!err) {\n          let obj = {}\n          this.selectData.arrData.map(item => {\n            obj[item] = this.selectData.getData[item]\n          })\n          let [arrKey, arrValue] = [[], []]\n          this.selectData.arrData.map(item => {\n            obj[item] = this.selectData.getData[item]\n            if (\n              Object.prototype.toString\n                .call(this.selectData.getData[item])\n                .slice(8, -1) === 'Object'\n            ) {\n              arrKey.push(...Object.keys(this.selectData.getData[item]))\n              arrValue.push(...Object.values(this.selectData.getData[item]))\n            } else {\n              arrKey.push(item)\n              arrValue.push(this.selectData.getData[item])\n            }\n          })\n          obj.crowd_name = values.basicInfoRuleList.crowd_name\n          obj.array_index = this.selectData.arrData\n          if (\n            obj.remain_enter_times &&\n            (!obj.remain_enter_times.remain_times.min ||\n              (!obj.remain_enter_times.select_time.min &&\n                !obj.remain_enter_times.select_time.name))\n          ) {\n            this.messageService.error({\n              content: '入场次数和时间范围必填!'\n            })\n            return\n          }\n          if (this.$searchQuery.id) {\n            this.addService\n              .updateCrowdBrandCrowd(this.$searchQuery.id, obj)\n              .subscribe(status => {\n                this.$router.push({\n                  name: 'brand-marketing-plugin-crowd-index'\n                })\n              })\n          } else {\n            this.addService.setCrowdBrandField(obj).subscribe(status => {\n              this.$router.push({ name: 'brand-marketing-plugin-crowd-index' })\n            })\n          }\n        }\n      })\n    },\n    getFilterData() {\n      Object.keys(this.crowdInfo.info).map(item => {\n        Object.assign(this.selectData.info, this.crowdInfo.info[item].value)\n        this.selectData[item].value = Object.keys(\n          this.crowdInfo.info[item].value\n        )\n      })\n    },\n    deleteIcon(data, item) {\n      let k = Object.keys(data)\n      k.map(item1 => {\n        if (item1 !== 'arrData' && item1 !== 'getData' && item1 !== 'info') {\n          if (data[item1].selectionData.indexOf(item) >= 0) {\n            data[item1].selectionData.splice(\n              data[item1].selectionData.indexOf(item),\n              1\n            )\n          }\n        } else {\n          if (data.arrData.indexOf(item) >= 0) {\n            data.arrData.splice(data.arrData.indexOf(item), 1)\n          }\n        }\n      })\n    },\n    save(e) {\n      e.preventDefault()\n      this.form.validateFields((err, values) => {\n        console.log(err, values)\n      })\n    },\n    // 校验格式\n    physicalId(rule, value, callback) {\n      if (value === undefined || value === '') {\n        // eslint-disable-next-line\n        callback('请填写人群名称')\n      } else if (value && /\\//.test(value)) {\n        // eslint-disable-next-line\n        callback('输入的人群名称格式错误，请重新输入')\n      } else {\n        // eslint-disable-next-line\n        callback()\n      }\n    }\n  },\n  mounted() {},\n  watch: {\n    selectData: {\n      handler() {\n        let k = Object.keys(this.selectData)\n        let arr = []\n        arr.push(...this.selectData.arrData)\n        if (arr.length >= 5) {\n          this.flag = false\n        } else {\n          this.flag = true\n        }\n      },\n      deep: true\n    }\n  }\n}\n</script>\n"]}]}