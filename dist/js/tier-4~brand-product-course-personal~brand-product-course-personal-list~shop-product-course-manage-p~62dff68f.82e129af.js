(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tier-4~brand-product-course-personal~brand-product-course-personal-list~shop-product-course-manage-p~62dff68f"],{"6bd7":function(t,e,c){"use strict";var n=function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("div",[c("st-form-table",[c("thead",[c("tr",[c("th",[t._v(t._s(t.$c("coach")))]),c("th",[t._v(t._s(t.$c("coach"))+"等级")]),c("th",[t._v("工作性质")]),c("th",[t._v("操作")])])]),c("tbody",[c("tr",[c("td",{staticClass:"st-form-table__add",attrs:{colspan:"4"}},[c("st-button",{directives:[{name:"modal-link",rawName:"v-modal-link",value:{name:"coach-select",props:{selected:t.selected,shopIds:t.shopIds,type:t.type},on:{change:t.onSelectComplete}},expression:"{\n              name: 'coach-select',\n              props: {\n                selected,\n                shopIds,\n                type\n              },\n              on: {\n                change: onSelectComplete\n              }\n            }"}],attrs:{type:"dashed",icon:"add",block:""}},[t._v("\n            新增"+t._s(t.$c("coach"))+"\n          ")])],1)]),t._l(t.list,(function(e,n){return c("tr",{key:n},[c("td",[t._v(t._s(e.name))]),c("td",[t._v(t._s(e.level))]),c("td",[t._v(t._s(e.nature_work))]),c("td",[c("a",{on:{click:function(c){return t.delTableRecord(e.id)}}},[t._v("删除")])])])}))],2)])],1)},s=[],o=(c("ac6a"),c("d225")),a=c("b0b4"),i=c("9ab4"),r=c("0cd5"),h=c("df29"),l=(c("6b54"),c("2397"),c("308d")),u=c("6bb5"),d=c("4e2b"),f=c("de46");function p(t){return function(){var e,c=Object(u["a"])(t);if(b()){var n=Object(u["a"])(this).constructor;e=Reflect.construct(c,arguments,n)}else e=c.apply(this,arguments);return Object(l["a"])(this,e)}}function b(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var y,v,m=function(t){Object(d["a"])(c,t);var e=p(c);function c(){return Object(o["a"])(this,c),e.apply(this,arguments)}return Object(a["a"])(c,[{key:"getCoachSelect",value:function(t){return this.http.post("/v1/staff/coach/select",{params:t})}},{key:"getCoachBasic",value:function(t){return this.http.post("/v1/staff/coach/basic",{params:t})}},{key:"getCoachList",value:function(){return this.http.get("/v1/staff/coach")}},{key:"getCoachRecommend",value:function(t){return this.http.get("/v1/staff/coach/recommend",{query:t})}}]),c}(f["a"]),g=function(){function t(e){Object(o["a"])(this,t),this.coachApi=e,this.loading$=new h["d"]({})}return Object(a["a"])(t,[{key:"getCoachBasic",value:function(t){return this.coachApi.getCoachBasic(t)}}]),t}();Object(i["b"])([Object(h["c"])(),Object(i["d"])("design:type",Function),Object(i["d"])("design:paramtypes",["function"===typeof(y=!1)?y:Object]),Object(i["d"])("design:returntype",void 0)],g.prototype,"getCoachBasic",null),g=Object(i["b"])([Object(r["b"])(),Object(i["d"])("design:paramtypes",["function"===typeof(v="undefined"!==typeof m&&m)?v:Object])],g);var _,C=function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("st-modal",{staticClass:"modal-brand-switch",attrs:{title:"选择"+t.$c("coach"),footer:null},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[c("div",[c("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple",placeholder:"请输入"+t.$c("coach")+"昵称、姓名、手机号进行查询",value:t.coachIds,filterOption:!1},on:{change:t.onChange,search:t.onSearch,focus:t.onFocus,blur:t.onBlur}},t._l(t.list,(function(e){return c("a-select-option",{key:""+e.id,attrs:{value:e.id}},[t._v("\n        "+t._s(e.nickname||e.staff_name)+"\n      ")])})),1),c("p",{staticClass:"color-text-light mg-t8"},[t._v("\n      已选择"+t._s(t.coachIds.length)+"个"+t._s(t.$c("coach"))+"\n    ")]),c("p",{staticClass:"ta-r"},[c("st-button",{on:{click:t.onCancelSelect}},[t._v("取消")]),c("st-button",{staticClass:"mg-l8",attrs:{type:"primary"},on:{click:t.onConfirmSelect}},[t._v("\n        确定\n      ")])],1)],1)])},j=[],S=(c("386d"),function(){function t(e){Object(o["a"])(this,t),this.coachApi=e}return Object(a["a"])(t,[{key:"getCoachSelect",value:function(t){return this.coachApi.getCoachSelect(t)}}]),t}());S=Object(i["b"])([Object(r["b"])(),Object(i["d"])("design:paramtypes",["function"===typeof(_="undefined"!==typeof m&&m)?_:Object])],S);var O={data:function(){return{show:!1,coachIds:[],keyword:"",size:50,list:[]}},serviceInject:function(){return{selectService:S}},props:{selected:{type:Array,default:function(){return[]}},shopIds:{type:Array,default:function(){return[]}},type:{type:String,default:""}},created:function(){this.coachIds=this.selected,this.search()},methods:{onChange:function(t){this.coachIds=t,this.onSearch("")},onSearch:function(t){this.keyword=t,this.search("")},search:function(){var t=this,e={shop_ids:this.shopIds,size:this.size,keyword:this.keyword};"smallCourse"===this.type&&(e.course_type=5),this.selectService.getCoachSelect(e).subscribe((function(e){t.list=e.coaches}))},onConfirmSelect:function(){this.show=!1,this.$emit("change",this.coachIds)},onCancelSelect:function(){this.show=!1},onFocus:function(){this.onSearch("")},onBlur:function(){this.keyword=""}}},k=O,w=c("2877"),I=Object(w["a"])(k,C,j,!1,null,null,null),$=I.exports,A={name:"SelectCoach",serviceInject:function(){return{selectCoachService:g}},props:{coachIds:{type:Array,default:function(){return[]}},shopIds:{type:Array,default:function(){return[]}},type:{type:String,default:""}},modals:{CoachSelect:$},data:function(){return{selected:[],list:[]}},created:function(){this.selected=this.coachIds,this.getSelectedList(this.coachIds)},methods:{onSelectComplete:function(t){this.getSelectedList(t),this.selected=t,this.$emit("change",t)},getSelectedList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length&&this.selectCoachService.getCoachBasic({coach_ids:e}).subscribe((function(e){t.list=e.coaches}))},delTableRecord:function(t){var e=this.list,c=this.selected;e.forEach((function(c,n){+c.id===+t&&e.splice(n,1)})),c.forEach((function(e,n){+e===+t&&c.splice(n,1)})),this.list=e,this.selected=c,this.$emit("change",c)}}},R=A,B=Object(w["a"])(R,n,s,!1,null,null,null);e["a"]=B.exports}}]);