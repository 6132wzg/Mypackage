{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"tier-2~brand-product-course-team~shop-product-course-manage-team\"],{\"15e0\":function(e,t,r){\"use strict\";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"st-form\",{staticClass:\"page-create-container\",attrs:{form:e.form,labelWidth:\"130px\"}},[r(\"a-row\",{attrs:{gutter:8}},[r(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[r(\"st-form-item\",{staticClass:\"mg-t40\",attrs:{label:\"课程名称\",required:\"\"}},[r(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.course_name,expression:\"decorators.course_name\"}],attrs:{placeholder:\"支持输入1~30个字的课程名称\",maxlength:\"30\",disabled:e.$searchQuery.id},on:{change:e.onCourseNameChange}})],1)],1)],1),r(\"a-row\",{attrs:{gutter:8}},[r(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[r(\"st-form-item\",{attrs:{label:\"课程类型\",required:\"\"}},[r(\"input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.category_id,expression:\"decorators.category_id\"}],attrs:{type:\"hidden\"}}),r(\"st-select-course-category\",{attrs:{value:e.info.category_id},on:{change:e.onCourseTypeChange}})],1)],1)],1),r(\"a-row\",{attrs:{gutter:8}},[r(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[r(\"st-form-item\",{attrs:{label:\"训练目的\",required:\"\"}},[r(\"input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.train_aim,expression:\"decorators.train_aim\"}],attrs:{type:\"hidden\"}}),r(\"st-select-training-aim\",{attrs:{value:e.info.train_aim},on:{change:e.onTrainingAimChange}})],1)],1)],1),r(\"a-row\",{attrs:{gutter:8}},[r(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[r(\"st-form-item\",{attrs:{label:\"强度\",required:\"\"}},[r(\"a-rate\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.strength_level,expression:\"decorators.strength_level\"}]})],1)],1)],1),r(\"a-row\",{attrs:{gutter:8}},[r(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[r(\"st-form-item\",{attrs:{label:\"消耗卡路里\"}},[r(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.calories,expression:\"decorators.calories\"}],attrs:{float:\"\",min:0,max:99999}},[r(\"template\",{slot:\"addonAfter\"},[e._v(\"Kcal/节\")])],2)],1)],1)],1),r(\"a-row\",{attrs:{gutter:8}},[r(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[r(\"st-form-item\",{attrs:{label:\"时长\",required:\"\"}},[r(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.duration,expression:\"decorators.duration\"}]},[r(\"template\",{slot:\"addonAfter\"},[e._v(\"分钟\")])],2)],1)],1)],1),r(\"a-row\",{attrs:{gutter:8}},[r(\"a-col\",{attrs:{lg:22,xs:22,offset:1}},[r(\"st-form-item\",{attrs:{label:\"图片\"}},[r(\"div\",{staticClass:\"page-upload-container\"},[r(\"st-image-upload\",{attrs:{list:e.fileList},on:{change:e.onImgChange}}),r(\"input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.image,expression:\"decorators.image\"}],attrs:{type:\"hidden\"}}),r(\"div\",{staticClass:\"page-course-photo-des mg-l16\"},[r(\"div\",{staticClass:\"page-course-item\"},[r(\"div\",{staticClass:\"page-course-item-tip\"},[e._v(\"1.\")]),r(\"div\",{staticClass:\"page-course-item-cont\"},[e._v(\"\\n                图片格式必须为：png,bmp,\\n                jpeg,jpg,gif,建议使用png格式图片，以保存最佳效果\\n              \")])]),r(\"div\",{staticClass:\"page-course-item\"},[r(\"div\",{staticClass:\"page-course-item-tip\"},[e._v(\"2.\")]),r(\"div\",{staticClass:\"page-course-item-cont\"},[e._v(\"\\n                建议尺寸为750px * 422px， 不可大于2M\\n              \")])])])],1)])],1)],1),r(\"a-row\",{attrs:{gutter:8}},[r(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[r(\"st-form-item\",{attrs:{label:\"课程介绍\"}},[r(\"st-textarea\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.description,expression:\"decorators.description\"}],attrs:{autosize:{minRows:10,maxRows:16},placeholder:\"填写点什么吧\",maxlength:\"500\"}})],1)],1)],1),r(\"a-row\",{attrs:{gutter:8}},[r(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[\"brand\"===e.from?r(\"st-form-item\",{attrs:{labelFix:\"\"}},[r(\"st-button\",{attrs:{loading:\"save\"===e.activeBtn&&e.loading.setCourse,\"data-name\":\"save\"},on:{click:e.save}},[e._v(\"\\n          保存\\n        \")]),r(\"st-button\",{staticClass:\"mg-l12\",attrs:{type:\"primary\",loading:\"go\"===e.activeBtn&&e.loading.setCourse,\"data-name\":\"go\"},on:{click:e.saveAndGoNext}},[e._v(\"\\n          保存，继续设置上课门店\\n        \")])],1):e._e(),\"shop\"===e.from?r(\"st-form-item\",{attrs:{labelFix:\"\"}},[r(\"st-button\",{attrs:{type:\"primary\",loading:e.loading.setCourse},on:{click:e.save}},[e._v(\"\\n          保存\\n        \")])],1):e._e()],1)],1)],1)},s=[],o=(r(\"7f7f\"),r(\"e69b\")),n=r(\"7ce1\"),i=r(\"eab3\"),c=r(\"d82d\"),u=r(\"89dd\"),d=r(\"b9ab\"),p=function(e){return{course_name:{rules:[{required:!0,message:\"请输入课程名称\"},{min:1,message:\"支持输入1~30个字的课程名称\"}]},category_id:{rules:[{required:!0,message:\"请选择课程类型\"},{validator:function(e,t,r){if(-1===t)return\"请选择课程类型\"}}]},train_aim:{rules:[{required:!0,message:\"请选择训练目的\"}]},strength_level:{rules:[{required:!0,message:\"请选择训练强度\"}]},calories:{},duration:{rules:[{required:!0,message:\"请输入课程时长\"}]},image:{},description:{initialValue:\"\"}}},l={name:\"SetTeamCourse\",serviceInject:function(){var e,t=this.$route.name;return e=/^brand/.test(t)?u[\"a\"]:d[\"a\"],{messageService:o[\"a\"],courseService:e}},rxState:function(){return{loading:this.courseService.loading$}},components:{StSelectCourseCategory:i[\"a\"],StSelectTrainingAim:c[\"a\"],StImageUpload:n[\"a\"]},props:{from:{type:String,default:\"shop\"},info:{type:Object,default:function(){return{}}}},data:function(){var e=this.$stForm.create(),t=e.decorators(p);return{form:e,decorators:t,fileList:[],activeBtn:\"save\",courseId:0}},mounted:function(){var e=this;this.$nextTick((function(){e.setFieldsValue()}))},methods:{save:function(e){this.activeBtn=e.target.dataset.name,e.preventDefault(),this.doSave(this.onSubmitSuccess)},doSave:function(e){var t=this;this.form.validate().then((function(){var r=t.getData();t.courseService.setCourse(r).subscribe((function(r){t.courseId=r.course_id,e()}))}))},saveAndGoNext:function(e){var t=this;this.activeBtn=e.target.dataset.name,this.doSave((function(){t.messageService.success({content:\"保存成功\"}),t.$emit(\"goNext\",t.courseId)}))},onSubmitSuccess:function(){this.messageService.success({content:\"保存成功\"});var e=this.getParentListName();this.$router.push({name:e})},getParentListName:function(){return{shop:\"shop-product-course-manage-team-list\",brand:\"brand-product-course-team-list-brand\"}[this.from]},onImgChange:function(e){this.form.setFieldsValue({image:e[0]})},onCourseTypeChange:function(e){this.form.setFieldsValue({category_id:e})},onTrainingAimChange:function(e){this.form.setFieldsValue({train_aim:e})},onCourseNameChange:function(e){this.$emit(\"onCourseNameChange\",e.target.value)},setFieldsValue:function(){var e=this.info;this.form.setFieldsValue({course_name:e.course_name,category_id:e.category_id,train_aim:e.train_aim,strength_level:e.strength_level,calories:e.calories,duration:e.duration,price:e.price,image:e.image,description:e.description}),e.image&&e.image.image_key&&(this.fileList=[e.image])},getData:function(){var e=this.form.getFieldsValue(),t=this.$searchQuery.id;return t&&(e.course_id=+t),e.price=+e.price,e}}},f=l,m=r(\"2877\"),h=Object(m[\"a\"])(f,a,s,!1,null,null,null);t[\"a\"]=h.exports},3876:function(e,t,r){\"use strict\";r.d(t,\"a\",(function(){return p}));r(\"6b54\"),r(\"2397\");var a=r(\"d225\"),s=r(\"b0b4\"),o=r(\"308d\"),n=r(\"6bb5\"),i=r(\"4e2b\"),c=r(\"de46\");function u(e){return function(){var t,r=Object(n[\"a\"])(e);if(d()){var a=Object(n[\"a\"])(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return Object(o[\"a\"])(this,t)}}function d(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){Object(i[\"a\"])(r,e);var t=u(r);function r(){return Object(a[\"a\"])(this,r),t.apply(this,arguments)}return Object(s[\"a\"])(r,[{key:\"add\",value:function(e){return this.http.post(\"/v1/course/team/brand\",{params:e})}},{key:\"getUpdateInfo\",value:function(e){return this.http.get(\"/v1/course/team/brand/edit/\".concat(e.course_id))}},{key:\"update\",value:function(e){return this.http.put(\"/v1/course/team/brand/\".concat(e.course_id),{params:e})}},{key:\"setShop\",value:function(e){return this.http.put(\"/v1/course/team/brand/set/shop/\".concat(e.course_id),{params:e})}},{key:\"getTeamCourseList\",value:function(e){return this.http.get(\"/v1/course/team/brand\",{query:e})}},{key:\"getTeamCourseListInShop\",value:function(e){return this.http.get(\"/v1/course/team/brand/shop\",{query:e})}},{key:\"deleteCourse\",value:function(e){return this.http.delete(\"/v1/course/team/brand/\".concat(e))}},{key:\"getTeamCourseInfo\",value:function(e){return this.http.get(\"/v1/course/team/brand/\".concat(e))}},{key:\"putCourseTeamIntoBrand\",value:function(e){return this.http.put(\"/v1/course/team/into/brand\",{params:e})}}]),r}(c[\"a\"])},\"89dd\":function(e,t,r){\"use strict\";r.d(t,\"a\",(function(){return m}));var a,s,o,n,i=r(\"d225\"),c=r(\"b0b4\"),u=r(\"9ab4\"),d=r(\"0cd5\"),p=r(\"df29\"),l=r(\"3876\"),f=r(\"2138\"),m=function(){function e(t,r){Object(i[\"a\"])(this,e),this.courseApi=t,this.userService=r,this.loading$=new p[\"d\"]({}),this.shopSetting$=this.userService.getOptions$(\"team_course.shop_setting\")}return Object(c[\"a\"])(e,[{key:\"addCourse\",value:function(e){return this.courseApi.add(e)}},{key:\"updateCourse\",value:function(e){return this.courseApi.update(e)}},{key:\"setCourse\",value:function(e){var t=e.course_id;return t?this.updateCourse(e):this.addCourse(e)}},{key:\"setShop\",value:function(e){return this.courseApi.setShop(e)}}]),e}();Object(u[\"b\"])([Object(p[\"c\"])(),Object(u[\"d\"])(\"design:type\",Function),Object(u[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(a=\"undefined\"!==typeof l[\"UpdateInput\"]&&l[\"UpdateInput\"])?a:Object]),Object(u[\"d\"])(\"design:returntype\",void 0)],m.prototype,\"setCourse\",null),Object(u[\"b\"])([Object(p[\"c\"])(),Object(u[\"d\"])(\"design:type\",Function),Object(u[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof l[\"SetShopInput\"]&&l[\"SetShopInput\"])?s:Object]),Object(u[\"d\"])(\"design:returntype\",void 0)],m.prototype,\"setShop\",null),m=Object(u[\"b\"])([Object(d[\"b\"])(),Object(u[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(o=\"undefined\"!==typeof l[\"a\"]&&l[\"a\"])?o:Object,\"function\"===typeof(n=\"undefined\"!==typeof f[\"a\"]&&f[\"a\"])?n:Object])],m)},b9ab:function(e,t,r){\"use strict\";r.d(t,\"a\",(function(){return f}));var a,s,o,n=r(\"d225\"),i=r(\"b0b4\"),c=r(\"9ab4\"),u=r(\"df29\"),d=r(\"0cd5\"),p=r(\"c1e8\"),l=r(\"2138\"),f=function(){function e(t,r){Object(n[\"a\"])(this,e),this.courseApi=t,this.userService=r,this.loading$=new u[\"d\"]({}),this.shopSetting$=this.userService.getOptions$(\"team_course.shop_setting\")}return Object(i[\"a\"])(e,[{key:\"addCourse\",value:function(e){return this.courseApi.add(e)}},{key:\"updateCourse\",value:function(e){return this.courseApi.update(e)}},{key:\"setCourse\",value:function(e){var t=e.course_id;return t?this.updateCourse(e):this.addCourse(e)}}]),e}();Object(c[\"b\"])([Object(u[\"c\"])(),Object(c[\"d\"])(\"design:type\",Function),Object(c[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(a=\"undefined\"!==typeof p[\"UpdateInput\"]&&p[\"UpdateInput\"])?a:Object]),Object(c[\"d\"])(\"design:returntype\",void 0)],f.prototype,\"setCourse\",null),f=Object(c[\"b\"])([Object(d[\"b\"])(),Object(c[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof p[\"a\"]&&p[\"a\"])?s:Object,\"function\"===typeof(o=\"undefined\"!==typeof l[\"a\"]&&l[\"a\"])?o:Object])],f)},c1e8:function(e,t,r){\"use strict\";r.d(t,\"a\",(function(){return p}));r(\"6b54\"),r(\"2397\");var a=r(\"d225\"),s=r(\"b0b4\"),o=r(\"308d\"),n=r(\"6bb5\"),i=r(\"4e2b\"),c=r(\"de46\");function u(e){return function(){var t,r=Object(n[\"a\"])(e);if(d()){var a=Object(n[\"a\"])(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return Object(o[\"a\"])(this,t)}}function d(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){Object(i[\"a\"])(r,e);var t=u(r);function r(){return Object(a[\"a\"])(this,r),t.apply(this,arguments)}return Object(s[\"a\"])(r,[{key:\"add\",value:function(e){return this.http.post(\"/v1/course/team/shop\",{params:e})}},{key:\"getUpdateInfo\",value:function(e){return this.http.get(\"/v1/course/team/shop/edit/\".concat(e.course_id))}},{key:\"update\",value:function(e){return this.http.put(\"/v1/course/team/shop/\".concat(e.course_id),{params:e})}},{key:\"deleteTeamCourse\",value:function(e){return this.http.delete(\"/v1/course/team/shop/\".concat(e))}},{key:\"getTeamCourseList\",value:function(e){return this.http.get(\"/v1/course/team/shop\",{query:e})}},{key:\"getTeamCourseInfo\",value:function(e){return this.http.get(\"/v1/course/team/shop/\".concat(e))}}]),r}(c[\"a\"])}}]);","extractedComments":[]}