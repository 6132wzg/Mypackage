{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/shop/distribution-coach.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/shop/distribution-coach.vue","mtime":1591147717212},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { DistributionCoachService } from './distribution-coach.service'\nimport { MessageService } from '@/services/message.service'\nconst columns = vm => [\n  {\n    title: `私教${vm.$c('coach')}姓名`,\n    dataIndex: 'coach_name',\n    key: 'coach_name'\n  },\n  {\n    dataIndex: 'personal_sales',\n    key: 'personal_sales',\n    slots: { title: 'custom_title' },\n    scopedSlots: { customRender: 'personal_sales' }\n  }\n]\nexport default {\n  name: 'distributionCoach',\n  serviceInject() {\n    return {\n      service: DistributionCoachService,\n      messageService: MessageService\n    }\n  },\n  props: {\n    memberIds: {\n      type: Array,\n      default() {\n        return []\n      }\n    },\n    coachId: Number\n  },\n  data() {\n    return {\n      show: false,\n      selectedRowKeys: [],\n      pagination: {\n        current: 1,\n        pageSize: 10\n      },\n      list: [],\n      coach_id: ''\n    }\n  },\n  computed: {\n    columns\n  },\n  mounted() {\n    this.service.getSaleList().subscribe(res => {\n      this.list = res.list\n      this.selectedRowKeys = [this.coachId]\n    })\n  },\n  methods: {\n    handleTableChange(pagination, filters, sorter) {\n      console.log(pagination)\n    },\n    onSelectChange(e, item) {\n      console.log(this.selectedRowKeys)\n      this.selectedRowKeys = e\n      this.coach_id = item[0].id\n    },\n    onSearch(e) {\n      this.service\n        .getSaleList({\n          retrieve: e\n        })\n        .subscribe(res => {\n          console.log(res)\n          this.list = res.list\n        })\n    },\n    save(e) {\n      this.service\n        .addSale({\n          member_ids: this.memberIds,\n          coach_id: this.coach_id\n        })\n        .subscribe(res => {\n          this.show = false\n          this.$emit('success')\n          this.messageService.success({ content: '分配成功' })\n        })\n    }\n  },\n  created() {\n    this.coach_id = this.coachId\n  }\n}\n",{"version":3,"sources":["distribution-coach.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"distribution-coach.vue","sourceRoot":"src/views/biz-modals/shop","sourcesContent":["<template>\n  <st-modal\n    :title=\"`分配${$c('coach')}`\"\n    @ok=\"save\"\n    v-model=\"show\"\n    size=\"small\"\n  >\n    <a-row :gutter=\"8\">\n      <a-col :lg=\"24\" style=\"padding: 0;\">\n        <a-input-search\n          size=\"large\"\n          :placeholder=\"`搜索${$c('coach')}昵称`\"\n          style=\"width: 100%;\"\n          @search=\"onSearch\"\n        />\n      </a-col>\n    </a-row>\n    <a-row :gutter=\"8\">\n      <a-col :lg=\"24\" class=\"distribution-container\">\n        <st-table\n          :rowSelection=\"{\n            columnTitle: '分配',\n            type: 'radio',\n            selectedRowKeys: selectedRowKeys,\n            onChange: onSelectChange\n          }\"\n          :columns=\"columns\"\n          :dataSource=\"list\"\n          rowKey=\"id\"\n          @change=\"handleTableChange\"\n          :pagination=\"false\"\n        >\n          <template slot=\"custom_title\">\n            私教消课数（近30天）\n            <st-help-tooltip id=\"TSYHFP002\" />\n          </template>\n        </st-table>\n      </a-col>\n    </a-row>\n  </st-modal>\n</template>\n<script>\nimport { DistributionCoachService } from './distribution-coach.service'\nimport { MessageService } from '@/services/message.service'\nconst columns = vm => [\n  {\n    title: `私教${vm.$c('coach')}姓名`,\n    dataIndex: 'coach_name',\n    key: 'coach_name'\n  },\n  {\n    dataIndex: 'personal_sales',\n    key: 'personal_sales',\n    slots: { title: 'custom_title' },\n    scopedSlots: { customRender: 'personal_sales' }\n  }\n]\nexport default {\n  name: 'distributionCoach',\n  serviceInject() {\n    return {\n      service: DistributionCoachService,\n      messageService: MessageService\n    }\n  },\n  props: {\n    memberIds: {\n      type: Array,\n      default() {\n        return []\n      }\n    },\n    coachId: Number\n  },\n  data() {\n    return {\n      show: false,\n      selectedRowKeys: [],\n      pagination: {\n        current: 1,\n        pageSize: 10\n      },\n      list: [],\n      coach_id: ''\n    }\n  },\n  computed: {\n    columns\n  },\n  mounted() {\n    this.service.getSaleList().subscribe(res => {\n      this.list = res.list\n      this.selectedRowKeys = [this.coachId]\n    })\n  },\n  methods: {\n    handleTableChange(pagination, filters, sorter) {\n      console.log(pagination)\n    },\n    onSelectChange(e, item) {\n      console.log(this.selectedRowKeys)\n      this.selectedRowKeys = e\n      this.coach_id = item[0].id\n    },\n    onSearch(e) {\n      this.service\n        .getSaleList({\n          retrieve: e\n        })\n        .subscribe(res => {\n          console.log(res)\n          this.list = res.list\n        })\n    },\n    save(e) {\n      this.service\n        .addSale({\n          member_ids: this.memberIds,\n          coach_id: this.coach_id\n        })\n        .subscribe(res => {\n          this.show = false\n          this.$emit('success')\n          this.messageService.success({ content: '分配成功' })\n        })\n    }\n  },\n  created() {\n    this.coach_id = this.coachId\n  }\n}\n</script>\n"]}]}