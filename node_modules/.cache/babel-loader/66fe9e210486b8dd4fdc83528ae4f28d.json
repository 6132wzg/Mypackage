{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/components/textarea/textarea.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/components/textarea/textarea.vue","mtime":1601345390909},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.split\";\nimport _defineProperty from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.number.constructor\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'StTextarea',\n  model: {\n    prop: 'value',\n    event: 'change'\n  },\n  bem: {\n    b: 'st-textarea'\n  },\n  props: {\n    value: {\n      type: String\n    },\n    maxlength: {\n      type: [String, Number],\n      default: 500\n    },\n    maxRows: {\n      type: [String, Number],\n      default: 0\n    },\n    autosize: {\n      type: Object,\n      default: function _default() {\n        return {\n          minRows: 10,\n          maxRow: 20\n        };\n      }\n    },\n    // 文字后缀\n    suffix: {\n      type: [String, Object]\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      content: '',\n      attrs: _objectSpread({\n        autosize: this.autosize\n      }, this.$attrs),\n      lastContent: ''\n    };\n  },\n  watch: {\n    value: function value() {\n      this.init();\n    }\n  },\n  created: function created() {\n    this.init();\n  },\n  computed: {\n    currentLength: function currentLength() {\n      return this.suffix ? this.content.length + this.suffix.length + 2 : this.content.length;\n    },\n    currentRows: function currentRows() {\n      return this.calcRowsLength(this.content);\n    },\n    shouldUseRows: function shouldUseRows() {\n      return this.maxRows;\n    }\n  },\n  methods: {\n    calcRowsLength: function calcRowsLength(content) {\n      return content.trim().split('\\n').filter(function (item) {\n        return item !== '';\n      }).length;\n    },\n    init: function init() {\n      this.content = this.value || '';\n    },\n    onChange: function onChange(e) {\n      if (this.maxRows) {\n        var newRows = this.calcRowsLength(e.target.value);\n\n        if (newRows > this.maxRows) {\n          // 逐字输入\n          if (newRows - this.calcRowsLength(this.lastContent) <= 1) {\n            this.content = this.lastContent;\n          } else {\n            // 复制黏贴截取\n            this.content = e.target.value.trim().split('\\n').slice(0, this.maxRows).join('\\n');\n          }\n        }\n\n        this.$emit('input', this.content);\n        this.$emit('change', this.content);\n      } else {\n        var maxlength = this.maxlength;\n        var content = e.target.value.substr(0, maxlength);\n        this.content = content;\n        this.$emit('input', content);\n        this.$emit('change', content);\n      }\n\n      this.lastContent = this.content;\n    }\n  }\n};",{"version":3,"sources":["textarea.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuBA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA,OADA;AAEA,IAAA,KAAA,EAAA;AAFA,GAFA;AAMA,EAAA,GAAA,EAAA;AACA,IAAA,CAAA,EAAA;AADA,GANA;AASA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA,KADA;AAIA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,CAAA,MAAA,EAAA,MAAA,CADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAJA;AAQA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,CAAA,MAAA,EAAA,MAAA,CADA;AAEA,MAAA,OAAA,EAAA;AAFA,KARA;AAYA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA,oBAAA;AACA,eAAA;AACA,UAAA,OAAA,EAAA,EADA;AAEA,UAAA,MAAA,EAAA;AAFA,SAAA;AAIA;AAPA,KAZA;AAqBA;AACA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,CAAA,MAAA,EAAA,MAAA;AADA,KAtBA;AAyBA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA;AAzBA,GATA;AAuCA,EAAA,IAvCA,kBAuCA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,KAAA;AACA,QAAA,QAAA,EAAA,KAAA;AADA,SAEA,KAAA,MAFA,CAFA;AAMA,MAAA,WAAA,EAAA;AANA,KAAA;AAQA,GAhDA;AAiDA,EAAA,KAAA,EAAA;AACA,IAAA,KADA,mBACA;AACA,WAAA,IAAA;AACA;AAHA,GAjDA;AAsDA,EAAA,OAtDA,qBAsDA;AACA,SAAA,IAAA;AACA,GAxDA;AAyDA,EAAA,QAAA,EAAA;AACA,IAAA,aADA,2BACA;AACA,aAAA,KAAA,MAAA,GACA,KAAA,OAAA,CAAA,MAAA,GAAA,KAAA,MAAA,CAAA,MAAA,GAAA,CADA,GAEA,KAAA,OAAA,CAAA,MAFA;AAGA,KALA;AAMA,IAAA,WANA,yBAMA;AACA,aAAA,KAAA,cAAA,CAAA,KAAA,OAAA,CAAA;AACA,KARA;AASA,IAAA,aATA,2BASA;AACA,aAAA,KAAA,OAAA;AACA;AAXA,GAzDA;AAsEA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,0BACA,OADA,EACA;AACA,aAAA,OAAA,CACA,IADA,GAEA,KAFA,CAEA,IAFA,EAGA,MAHA,CAGA,UAAA,IAAA;AAAA,eAAA,IAAA,KAAA,EAAA;AAAA,OAHA,EAGA,MAHA;AAIA,KANA;AAOA,IAAA,IAPA,kBAOA;AACA,WAAA,OAAA,GAAA,KAAA,KAAA,IAAA,EAAA;AACA,KATA;AAUA,IAAA,QAVA,oBAUA,CAVA,EAUA;AACA,UAAA,KAAA,OAAA,EAAA;AACA,YAAA,OAAA,GAAA,KAAA,cAAA,CAAA,CAAA,CAAA,MAAA,CAAA,KAAA,CAAA;;AACA,YAAA,OAAA,GAAA,KAAA,OAAA,EAAA;AACA;AACA,cAAA,OAAA,GAAA,KAAA,cAAA,CAAA,KAAA,WAAA,CAAA,IAAA,CAAA,EAAA;AACA,iBAAA,OAAA,GAAA,KAAA,WAAA;AACA,WAFA,MAEA;AACA;AACA,iBAAA,OAAA,GAAA,CAAA,CAAA,MAAA,CAAA,KAAA,CACA,IADA,GAEA,KAFA,CAEA,IAFA,EAGA,KAHA,CAGA,CAHA,EAGA,KAAA,OAHA,EAIA,IAJA,CAIA,IAJA,CAAA;AAKA;AACA;;AACA,aAAA,KAAA,CAAA,OAAA,EAAA,KAAA,OAAA;AACA,aAAA,KAAA,CAAA,QAAA,EAAA,KAAA,OAAA;AACA,OAjBA,MAiBA;AAAA,YACA,SADA,GACA,IADA,CACA,SADA;AAEA,YAAA,OAAA,GAAA,CAAA,CAAA,MAAA,CAAA,KAAA,CAAA,MAAA,CAAA,CAAA,EAAA,SAAA,CAAA;AACA,aAAA,OAAA,GAAA,OAAA;AACA,aAAA,KAAA,CAAA,OAAA,EAAA,OAAA;AACA,aAAA,KAAA,CAAA,QAAA,EAAA,OAAA;AACA;;AACA,WAAA,WAAA,GAAA,KAAA,OAAA;AACA;AApCA;AAtEA,CAAA","sourcesContent":["<template>\n  <div :class=\"b()\">\n    <a-textarea\n      :class=\"b('content')\"\n      v-bind=\"attrs\"\n      :allowClear=\"false\"\n      :disabled=\"disabled\"\n      v-model=\"content\"\n      @change=\"onChange\"\n    ></a-textarea>\n    <label :class=\"b('label')\">\n      <span v-if=\"shouldUseRows\">{{ currentRows }}/{{ maxRows }} 行</span>\n      <span v-else>\n        {{ currentLength }}/{{\n          suffix ? suffix.length + 2 + maxlength : maxlength\n        }}\n        字\n      </span>\n    </label>\n    <label v-if=\"suffix\" :class=\"b('suffix')\">{{ '【' + suffix + '】' }}</label>\n  </div>\n</template>\n<script>\nexport default {\n  name: 'StTextarea',\n  model: {\n    prop: 'value',\n    event: 'change'\n  },\n  bem: {\n    b: 'st-textarea'\n  },\n  props: {\n    value: {\n      type: String\n    },\n    maxlength: {\n      type: [String, Number],\n      default: 500\n    },\n    maxRows: {\n      type: [String, Number],\n      default: 0\n    },\n    autosize: {\n      type: Object,\n      default: () => {\n        return {\n          minRows: 10,\n          maxRow: 20\n        }\n      }\n    },\n    // 文字后缀\n    suffix: {\n      type: [String, Object]\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      content: '',\n      attrs: {\n        autosize: this.autosize,\n        ...this.$attrs\n      },\n      lastContent: ''\n    }\n  },\n  watch: {\n    value() {\n      this.init()\n    }\n  },\n  created() {\n    this.init()\n  },\n  computed: {\n    currentLength() {\n      return this.suffix\n        ? this.content.length + this.suffix.length + 2\n        : this.content.length\n    },\n    currentRows() {\n      return this.calcRowsLength(this.content)\n    },\n    shouldUseRows() {\n      return this.maxRows\n    }\n  },\n  methods: {\n    calcRowsLength(content) {\n      return content\n        .trim()\n        .split('\\n')\n        .filter(item => item !== '').length\n    },\n    init() {\n      this.content = this.value || ''\n    },\n    onChange(e) {\n      if (this.maxRows) {\n        const newRows = this.calcRowsLength(e.target.value)\n        if (newRows > this.maxRows) {\n          // 逐字输入\n          if (newRows - this.calcRowsLength(this.lastContent) <= 1) {\n            this.content = this.lastContent\n          } else {\n            // 复制黏贴截取\n            this.content = e.target.value\n              .trim()\n              .split('\\n')\n              .slice(0, this.maxRows)\n              .join('\\n')\n          }\n        }\n        this.$emit('input', this.content)\n        this.$emit('change', this.content)\n      } else {\n        const { maxlength } = this\n        const content = e.target.value.substr(0, maxlength)\n        this.content = content\n        this.$emit('input', content)\n        this.$emit('change', content)\n      }\n      this.lastContent = this.content\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/components/textarea"}]}