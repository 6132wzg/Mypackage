{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/lottery/add.vue?vue&type=template&id=f46f2a56&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/lottery/add.vue","mtime":1600926556138},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":1591062572376},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["\n<st-mina-panel>\n  <h5-container slot=\"preview\" fixed>\n    <template v-slot:title>\n      幸运大转盘\n    </template>\n    <div :class=\"bPage('lottery')\">\n      <img\n        :class=\"bPage('lottery-bg')\"\n        src=\"https://styd-frontend.oss-cn-shanghai.aliyuncs.com/images/turntable-bg1.png\"\n      />\n      <div :class=\"bPage('lottery-header')\">\n        <div class=\" wrap\">\n          <div\n            :class=\"bPage('swiper')\"\n            v-if=\"isStopSwiper === STOP_SWIPER.DEFAULT\"\n          >\n            <swiper :options=\"sliderOptions\">\n              <swiper-slide\n                v-for=\"(item, index) in prizeInfoList\"\n                :key=\"index\"\n              >\n                <span :class=\"bPage('swiper-text')\">{{ item }}</span>\n              </swiper-slide>\n            </swiper>\n            <!-- <img class=\" swiper-img\" src=\"https://styd-frontend.oss-cn-shanghai.aliyuncs.com/imgs/turntable-swiper-msg.png\" alt=\"通知\"/>\n        <span class=\" swiper-text\">\n          <span v-for=\"(item, index) in prizeInfoList\" :key=\"index\"\n            decode=\"true\"\n            space=\"nbsp\"\n          >\n            {{ item }}&nbsp;&nbsp;&nbsp;&nbsp;\n          </span>\n        </span> -->\n          </div>\n        </div>\n        <div :class=\"bPage('lottery-title')\">{{ preview.title }}</div>\n      </div>\n      <div :class=\"bPage('lottery-content')\">\n        <div :class=\"bPage('lottery-content-changes')\">\n          还剩{{\n            (timesType === 1 ? preview.perTimes : preview.totalTimes) || 0\n          }}次免费抽奖机会\n        </div>\n        <div :class=\"bPage('lottery-content-box')\">\n          <div\n            v-for=\"(item, index) in prizeListFilters\"\n            :class=\"\n              'run-item run-item-' +\n                index +\n                (currentActive === index ? ' run-item--active' : '')\n            \"\n            :key=\"index\"\n          >\n            <div class=\"run-item-box\">\n              <img\n                class=\"run-item-img\"\n                v-if=\"item.prize.image_url\"\n                :src=\"item.prize.image_url\"\n                alt=\"奖品图片\"\n              />\n              <div class=\"run-item-text\">\n                {{ item.prize_name }}\n              </div>\n            </div>\n          </div>\n          <div class=\"run-item run-item-start\">\n            <span class=\"run-item-start-text\">\n              {{\n                hasPointsCondition && !hasFreeCondition\n                  ? (preview.drawPoints || 0) + '积分/次'\n                  : '免费抽奖'\n              }}\n            </span>\n            <img\n              src=\"https://styd-frontend.oss-cn-shanghai.aliyuncs.com/images/minaPro/plugin/draw-go.png\"\n            />\n          </div>\n        </div>\n        <div :class=\"bPage('lottery-content-my-prize')\">\n          <div :class=\"bPage('lottery-content-my-prize-text')\">我的奖品</div>\n          <img\n            :class=\"bPage('lottery-content-my-prize-img')\"\n            src=\"https://styd-frontend.oss-cn-shanghai.aliyuncs.com/images/minaPro/plugin/my-gift.png\"\n          />\n        </div>\n      </div>\n      <div\n        :class=\"bPage('lottery-my-point')\"\n        v-if=\"pluginStatus.pointActivityAtatus === 1 && hasPointsCondition\"\n      >\n        我的积分：\n        <span :class=\"bPage('lottery-my-point-num')\">\n          {{ preview.remain_points }}\n        </span>\n      </div>\n      <div :class=\"bPage('lottery-footer')\">\n        <div :class=\"bPage('lottery-footer-title')\">活动规则</div>\n        <div :class=\"bPage('lottery-footer-tip')\">\n          <span :class=\"bPage('lottery-footer-label')\">活动时间：</span>\n          <span :class=\"bPage('lottery-footer-value')\">\n            {{ preview.startTime }}--{{ preview.endTime }}\n          </span>\n        </div>\n        <div :class=\"bPage('lottery-footer-tip')\">\n          <span :class=\"bPage('lottery-footer-label')\">抽奖规则：</span>\n          <div :class=\"bPage('lottery-footer-value')\">\n            <div v-if=\"timesType === 1\">\n              每人每天有{{ preview.perTimes }}次机会\n            </div>\n            <div v-else>每人总共有{{ preview.totalTimes }}次机会</div>\n            <div v-if=\"hasPointsCondition\">\n              {{ preview.drawPoints || 0 }}积分兑换一次抽奖机会\n            </div>\n          </div>\n        </div>\n        <div :class=\"bPage('lottery-footer-tip')\">\n          <span :class=\"bPage('lottery-footer-label')\">活动说明：</span>\n          <span :class=\"bPage('lottery-footer-value')\">\n            {{ preview.description }}\n          </span>\n        </div>\n      </div>\n    </div>\n  </h5-container>\n  <div slot=\"actions\">\n    <st-button v-show=\"currentIndex === 0\" type=\"primary\" @click=\"next(1)\">\n      下一步\n    </st-button>\n    <st-button v-show=\"currentIndex === 1\" type=\"primary\" @click=\"next(2)\">\n      下一步\n    </st-button>\n    <st-button v-show=\"currentIndex === 2\" type=\"primary\" @click=\"onSubmit\">\n      完成\n    </st-button>\n  </div>\n\n  <div :class=\"bPage('form')\">\n    <Steps :value=\"currentIndex\" @skip=\"next\" :stepArr=\"stepArr\" />\n    <div style=\"padding:24px;\">\n      <st-form\n        style=\"width:500px\"\n        :form=\"form\"\n        labelGutter=\"0\"\n        v-show=\"currentIndex == 0\"\n        labelWidth=\"124px\"\n      >\n        <st-form-item label=\"活动名称\" required>\n          <a-input\n            :disabled=\"info.activity_status === ACTIVITY_STATUS.DISABLED\"\n            placeholder=\"请输入活动名称\"\n            v-decorator=\"decorators.activity_base.activity_name\"\n          ></a-input>\n        </st-form-item>\n        <st-form-item label=\"活动标题\" required>\n          <a-input\n            :disabled=\"info.activity_status === ACTIVITY_STATUS.DISABLED\"\n            @change=\"getTitle\"\n            placeholder=\"请输入活动标题\"\n            v-decorator=\"decorators.activity_base.activity_sub_name\"\n          ></a-input>\n        </st-form-item>\n        <st-form-item label=\"活动时间\" required>\n          <a-range-picker\n            :disabled=\"info.activity_status === ACTIVITY_STATUS.DISABLED\"\n            :disabledDate=\"disabledDate\"\n            :showTime=\"{\n              hideDisabledOptions: true,\n              defaultValue: defaultValue\n            }\"\n            format=\"YYYY-MM-DD HH:mm\"\n            v-model=\"dateRangeVal\"\n            @change=\"onDateChange\"\n          ></a-range-picker>\n        </st-form-item>\n        <st-form-item label=\"活动说明\">\n          <st-textarea\n            :rows=\"4\"\n            :maxlength=\"500\"\n            @change=\"getDescription\"\n            :disabled=\"info.activity_status === ACTIVITY_STATUS.DISABLED\"\n            placeholder=\"请输入活动说明\"\n            v-decorator=\"decorators.activity_base.activity_description\"\n          ></st-textarea>\n        </st-form-item>\n        <st-form-item label=\"轮播获奖\">\n          <a-radio-group\n            :disabled=\"info.activity_status === ACTIVITY_STATUS.DISABLED\"\n            @change=\"stopSwiper\"\n            v-decorator=\"decorators.activity_base.wheel_turn_around\"\n          >\n            <a-radio\n              v-for=\"(item, index) in wheelTurnAround\"\n              :key=\"index\"\n              :value=\"item.value\"\n            >\n              {{ item.label }}\n            </a-radio>\n          </a-radio-group>\n        </st-form-item>\n        <st-form-item label=\"分享设置\">\n          <a-radio-group\n            @change=\"getCurShareType\"\n            :disabled=\"info.activity_status === ACTIVITY_STATUS.DISABLED\"\n            v-decorator=\"decorators.activity_base.wheel_share_default\"\n          >\n            <a-radio\n              v-for=\"(item, index) in wheelDefault\"\n              :key=\"index\"\n              :value=\"item.value\"\n            >\n              {{ item.label }}\n            </a-radio>\n          </a-radio-group>\n          <div v-if=\"shareType === 2\" :class=\"bPage('share-upload')\">\n            <st-form-item label=\"选择图片\" labelWidth=\"60px\">\n              <st-image-upload\n                width=\"96px\"\n                height=\"96px\"\n                :list=\"fileShareList\"\n                @change=\"onShareChangeGetAvatar\"\n                placeholder=\"上传图片\"\n              ></st-image-upload>\n              <span :class=\"bPage('share-upload-text')\">\n                请上传jpg、png格式的图片\n              </span>\n            </st-form-item>\n            <st-form-item label=\"分享标题\" labelWidth=\"60px\">\n              <a-input placeholder=\"分享标题\" v-model=\"shareTitle\"></a-input>\n            </st-form-item>\n          </div>\n          <img\n            class=\"default-img\"\n            v-else\n            :src=\"share[0].image_url\"\n            alt=\"默认图片\"\n          />\n        </st-form-item>\n      </st-form>\n\n      <st-form\n        style=\"width:520px\"\n        :form=\"form\"\n        labelGutter=\"0\"\n        v-show=\"currentIndex == 1\"\n        labelWidth=\"124px\"\n      >\n        <st-form-item label=\"参与用户\" required>\n          <a-radio-group\n            @change=\"getCurCrowdType\"\n            v-decorator=\"decorators.activity_rule.join_crowd_all\"\n          >\n            <a-radio\n              v-for=\"(item, index) in joinCrowdAll\"\n              :key=\"index\"\n              :value=\"item.value\"\n            >\n              {{ item.label }}\n            </a-radio>\n          </a-radio-group>\n\n          <a-select\n            v-if=\"crowdType === CROWD_TYPE.CUSTOM\"\n            placeholder=\"请选择参与用户\"\n            v-decorator=\"decorators.activity_rule.crowd_id\"\n          >\n            <a-select-option\n              v-for=\"(item, index) in crowd\"\n              :key=\"index\"\n              :value=\"item.value\"\n            >\n              {{ item.label }}\n            </a-select-option>\n          </a-select>\n        </st-form-item>\n        <st-form-item label=\"抽奖条件\" required>\n          <a-checkbox-group\n            v-decorator=\"decorators.activity_rule.draw_condition\"\n            @change=\"onDrawConditionChange\"\n          >\n            <template v-for=\"(item, index) in drawCondition\">\n              <a-checkbox\n                :key=\"index\"\n                :value=\"item.value\"\n                :disabled=\"\n                  item.value === 2 && pluginStatus.pointActivityAtatus !== 1\n                \"\n              >\n                {{ item.label }}\n                <template\n                  v-if=\"\n                    item.value === 2 && pluginStatus.pointActivityAtatus !== 1\n                  \"\n                >\n                  <span :class=\"bPage('point-condition-tips')\">\n                    请先开启会员积分功能，\n                  </span>\n                  <st-link\n                    _blank\n                    :class=\"bPage('point-condition-link')\"\n                    value=\"去开启\"\n                    :to=\"{\n                      path:\n                        '/brand/marketing/plugin/member-points/list/setting'\n                    }\"\n                  ></st-link>\n                </template>\n              </a-checkbox>\n            </template>\n          </a-checkbox-group>\n        </st-form-item>\n        <st-form-item label=\"抽奖机会\" required v-if=\"hasFreeCondition\">\n          <a-radio-group\n            @change=\"getCurTimesType\"\n            v-decorator=\"decorators.activity_rule.draw_times_type\"\n          >\n            <a-radio\n              v-for=\"(item, index) in drawTimesType\"\n              :key=\"index\"\n              :value=\"item.value\"\n            >\n              {{ item.label }}\n            </a-radio>\n          </a-radio-group>\n          <template>\n            <a-form-item v-show=\"timesType === 1\">\n              每人每天有\n              <a-input-number\n                :min=\"1\"\n                :max=\"999\"\n                :step=\"1\"\n                :precision=\"0\"\n                @change=\"getPerTimes\"\n                style=\"width: 100px;\"\n                placeholder=\"请输入\"\n                v-decorator=\"decorators.activity_rule.per_times\"\n              ></a-input-number>\n              次\n            </a-form-item>\n          </template>\n          <template>\n            <a-form-item v-show=\"timesType === 2\">\n              每人总共有\n              <a-input-number\n                :min=\"1\"\n                :max=\"999\"\n                :step=\"1\"\n                :precision=\"0\"\n                @change=\"getTotalTimes\"\n                style=\"width: 100px;\"\n                placeholder=\"请输入\"\n                v-decorator=\"decorators.activity_rule.total_times\"\n              ></a-input-number>\n              次\n            </a-form-item>\n          </template>\n        </st-form-item>\n        <st-form-item label=\"积分抽奖\" required v-if=\"hasPointsCondition\">\n          可使用\n          <st-input-number\n            type=\"number\"\n            :min=\"1\"\n            :max=\"99999\"\n            :step=\"1\"\n            :precision=\"0\"\n            :disabled=\"pluginStatus.pointActivityAtatus !== 1\"\n            @change=\"getDrawPoints\"\n            style=\"width: 150px;\"\n            placeholder=\"请输入\"\n            v-decorator=\"decorators.activity_rule.draw_points\"\n          >\n            <template slot=\"addonAfter\">\n              积分\n            </template>\n          </st-input-number>\n          兑换一次抽奖机会\n        </st-form-item>\n        <st-form-item label=\" 中奖次数\">\n          每人最多可中奖\n          <a-input-number\n            :min=\"1\"\n            :max=\"999\"\n            :step=\"1\"\n            :precision=\"0\"\n            style=\"width: 100px;\"\n            placeholder=\"请输入\"\n            v-decorator=\"decorators.activity_rule.prize_times\"\n          ></a-input-number>\n          次\n        </st-form-item>\n      </st-form>\n\n      <st-form\n        style=\"width:756px;padding-left:62px;\"\n        :form=\"form\"\n        v-show=\"currentIndex == 2\"\n      >\n        <st-t3 class=\"mg-b24\">奖品设置</st-t3>\n        <st-form-table\n          style=\"border:1px solid rgba(205,212,223,1);padding:12px;\"\n        >\n          <thead>\n            <tr>\n              <template v-for=\"(item, index) in columsTitlelist\">\n                <th :key=\"index\">{{ item }}</th>\n              </template>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td colspan=\"6\" class=\"st-form-table__add\">\n                <st-button\n                  :disabled=\"\n                    $searchQuery.activity_id && $searchQuery.status === 1\n                  \"\n                  @click=\"getCurPrizeIndex(-1)\"\n                  type=\"dashed\"\n                  block\n                  v-if=\"prizeList.length < 7\"\n                  v-modal-link=\"{\n                    name: 'brand-marketing-plugin-add-prize',\n                    on: { change: getPrizeInfo }\n                  }\"\n                >\n                  新增奖品\n                </st-button>\n              </td>\n            </tr>\n            <template v-for=\"(item, index) in prizeList\">\n              <tr :key=\"item.id\">\n                <td>{{ item.prize_name }}</td>\n                <td>\n                  {{\n                    item.prize_type | enumFilter('plugin.prize_type_setting')\n                  }}\n                </td>\n                <td>\n                  {{\n                    item.prize_type === 1\n                      ? item.shop_num ||\n                        (item.support_shop_ids &&\n                          item.support_shop_ids.length)\n                      : item.support_shop_ids && item.support_shop_ids.length\n                  }}\n                </td>\n                <td>\n                  <span v-show=\"isShowEditTable !== index\">\n                    {{ item.number }}\n                  </span>\n                  <st-input-number\n                    v-show=\"isShowEditTable === index\"\n                    :min=\"1\"\n                    :max=\"99999\"\n                    :step=\"1\"\n                    :precision=\"0\"\n                    :value=\"item.number\"\n                    :index=\"index\"\n                    @change=\"editTableNum($event, index)\"\n                  ></st-input-number>\n                </td>\n                <td>\n                  <span v-show=\"isShowEditTable !== index\">\n                    {{ item.rate }}\n                  </span>\n                  <st-input-number\n                    v-show=\"isShowEditTable === index\"\n                    :min=\"0\"\n                    :max=\"100\"\n                    :float=\"true\"\n                    :value=\"item.rate\"\n                    @change=\"editTableRate($event, index)\"\n                  ></st-input-number>\n                </td>\n                <td>\n                  <st-table-actions>\n                    <a @click=\"showEditTable(index)\">\n                      {{ isShowEditTable === index ? '确认' : '编辑' }}\n                    </a>\n                    <a\n                      :disabled=\"deleteBtnStatus\"\n                      href=\"javascript:;\"\n                      @click=\"onDelete(index)\"\n                    >\n                      {{ isShowEditTable === index ? '取消' : '删除' }}\n                    </a>\n                  </st-table-actions>\n                </td>\n              </tr>\n            </template>\n          </tbody>\n        </st-form-table>\n        <st-t3 class=\"mg-b24 mg-t32\">未中奖设置</st-t3>\n        <st-form-item label=\"名称\" labelWidth=\"40px\" required>\n          <a-input\n            @change=\"getName\"\n            :disabled=\"info.activity_status === ACTIVITY_STATUS.DISABLED\"\n            placeholder=\"请输入未奖品名称\"\n            v-decorator=\"decorators.activity_lucky.lucky_name\"\n          ></a-input>\n        </st-form-item>\n        <st-form-item label=\" 图片\" labelWidth=\"43px\" required>\n          <a-radio-group\n            :disabled=\"info.activity_status === ACTIVITY_STATUS.DISABLED\"\n            v-decorator=\"decorators.activity_lucky.image_default\"\n            @change=\"getNotImgType\"\n          >\n            <a-radio\n              v-for=\"(item, index) in imgType\"\n              :key=\"index\"\n              :value=\"item.value\"\n            >\n              {{ item.label }}\n            </a-radio>\n          </a-radio-group>\n          <div\n            v-if=\"notPrizeImgType === NOT_PRIZE_IMG_TYPE.CUSTOM\"\n            :class=\"bPage('lucky-upload')\"\n          >\n            <st-image-upload\n              width=\"96px\"\n              height=\"96px\"\n              :list=\"fileList\"\n              @change=\"onChangeGetAvatar\"\n              placeholder=\"上传图片\"\n            ></st-image-upload>\n            <span :class=\"bPage('lucky-upload-text')\">\n              请上传jpg、png格式的图片\n            </span>\n          </div>\n\n          <img\n            class=\"default-img\"\n            v-else\n            :src=\"lucky[0].image_url\"\n            alt=\"默认图片\"\n          />\n        </st-form-item>\n      </st-form>\n    </div>\n  </div>\n</st-mina-panel>\n",null]}