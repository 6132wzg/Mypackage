{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/hardware/black-list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/hardware/black-list.vue","mtime":1591147717180},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { columns } from './black-list.config'\nimport { BlackService } from './black-list.service'\n\nexport default {\n  serviceInject() {\n    return {\n      blackService: BlackService\n    }\n  },\n  rxState() {\n    return {\n      loading: this.blackService.loading$,\n      blackList: this.blackService.blackList$,\n      blackKeys: this.blackService.blackKeys$,\n      searchList: this.blackService.searchList$\n    }\n  },\n  bem: {\n    bPage: 'modal-shop-blacklist'\n  },\n  props: {\n    id: Number\n  },\n  data() {\n    return {\n      show: false,\n      list: [],\n      page: {} // 前端分页\n    }\n  },\n  created() {\n    this.getBlackList()\n  },\n  computed: {\n    columns\n  },\n  methods: {\n    getBlackList() {\n      return this.blackService.getBlackList().subscribe()\n    },\n    onSearchKeyWords(val) {\n      this.blackService.onSearchKeyWords(val).subscribe()\n    },\n    joinPerson(para) {\n      let arr = this.blackList\n      this.blackList = []\n      this.blackKeys = Array.from(new Set(this.blackKeys))\n      let searchRes = this.searchList.concat(arr)\n      this.blackKeys.map(id => {\n        searchRes.map(searchItem => {\n          if (searchItem.user_id === id) {\n            this.blackList.push(searchItem)\n          }\n        })\n      })\n    },\n    deletePerson(para) {\n      this.blackKeys = this.blackKeys.filter(id => {\n        return id !== para.user_id\n      })\n      this.blackList = this.blackList.filter(({ user_id }) => {\n        return user_id !== para.user_id\n      })\n    },\n    onChange(pagination, filters, sorter) {\n      this.page = pagination\n      this.page.current_page = pagination.current\n      this.page.size = pagination.pageSize\n    },\n    postBlackListSetting() {\n      this.blackService\n        .postBlackListSetting({ black_list: this.blackList })\n        .subscribe(res => {\n          this.show = false\n          this.$emit('success')\n        })\n    }\n  },\n  watch: {\n    // 去重\n    blackList() {\n      for (var i = 0; i < this.blackList.length; i++) {\n        for (var j = i + 1; j < this.blackList.length; j++) {\n          if (this.blackList[i].user_id === this.blackList[j].user_id) {\n            this.blackList.splice(j, 1)\n            j--\n          }\n        }\n      }\n    }\n  }\n}\n",null]}