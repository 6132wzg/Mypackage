{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js!/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/schedule/personal/edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/schedule/personal/edit.vue","mtime":1595230476660},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js","mtime":1591062572352},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _defineProperty from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.number.constructor\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { PersonalScheduleScheduleService } from '@/views/pages/shop/product/course/schedule/personal/service#/schedule.service';\nimport ScheduleTimePicker from '@/views/biz-components/schedule-time-picker/schedule-time-picker';\nexport default {\n  name: 'EditShchedule',\n  components: {\n    ScheduleTimePicker: ScheduleTimePicker\n  },\n  serviceInject: function serviceInject() {\n    return {\n      scheduleService: PersonalScheduleScheduleService\n    };\n  },\n  rxState: function rxState() {\n    return {};\n  },\n  data: function data() {\n    return {\n      show: false,\n      staffName: '',\n      isInit: false,\n      scheduleInfo: [{\n        timing: []\n      }, {\n        timing: []\n      }, {\n        timing: []\n      }, {\n        timing: []\n      }, {\n        timing: []\n      }, {\n        timing: []\n      }, {\n        timing: []\n      }]\n    };\n  },\n  props: {\n    id: {\n      type: Number\n    },\n    start: {\n      type: String,\n      default: ''\n    }\n  },\n  filters: {\n    filterDate: function filterDate(val) {\n      return moment(val).format('dddd').valueOf();\n    }\n  },\n  computed: {\n    end: function end() {\n      return moment(moment(this.start).valueOf() + 24 * 6 * 3600 * 1000).format('YYYY-MM-DD').valueOf();\n    },\n    rangeTime: function rangeTime() {\n      return \"\".concat(this.start, \" ~ \").concat(this.end);\n    }\n  },\n  methods: {\n    onOkSave: function onOkSave() {\n      var _this = this;\n\n      var date = {\n        id: this.id,\n        schedule_info: this.scheduleInfo\n      };\n      this.scheduleService.update(date).subscribe(function (res) {\n        _this.show = false;\n\n        _this.$emit('success:ok');\n\n        _this.$emit('success');\n      });\n    },\n    onClickCopySchedule: function onClickCopySchedule() {\n      var _this2 = this;\n\n      this.scheduleService.copy(this.id, {\n        start_date: this.start,\n        end_date: this.end\n      }).subscribe(function (res) {\n        _this2.show = false;\n\n        _this2.$emit('success:copy');\n\n        _this2.$emit('success');\n      });\n    },\n    initScheduleInfo: function initScheduleInfo() {\n      var _this3 = this;\n\n      var weekOfday = moment(this.start, 'YYYY-MM-DD').format('E');\n      this.scheduleInfo = this.scheduleInfo.map(function (item, index) {\n        var day = moment(_this3.start).add(index + 1 - weekOfday, 'days').format('YYYY-MM-DD');\n        return _objectSpread({\n          schedule_time: day\n        }, item);\n      });\n    },\n    getInfo: function getInfo() {\n      var _this4 = this;\n\n      var form = {\n        id: this.id,\n        start_time: this.start,\n        end_time: this.end\n      };\n      this.isInit = false;\n      this.scheduleService.getUpdateInfo(form).subscribe(function (res) {\n        _this4.staffName = res.info.staff_name;\n\n        var scheduleInfo = _this4.scheduleInfo.map(function (item) {\n          res.info.coach_info.forEach(function (ele) {\n            if (ele.schedule_time === item.schedule_time) {\n              item = ele;\n            } else if (!item.id) {\n              item.id = 0;\n            }\n          });\n          _this4.isInit = true;\n          return item;\n        });\n\n        _this4.$set(_this4, 'scheduleInfo', scheduleInfo);\n      });\n    }\n  },\n  created: function created() {\n    this.initScheduleInfo(this.start);\n    this.getInfo();\n  }\n};",null]}