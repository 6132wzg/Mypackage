{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js!/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/reception/reserve/course.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/reception/reserve/course.vue","mtime":1595230476682},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js","mtime":1591062572352},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport tableMixin from '@/mixins/table.mixin';\nimport { mainColumns, childColumns } from \"./course.config\";\nimport { CourseService } from \"./course.service\";\nimport CustomRadioGroup from '@/views/biz-components/custom-radio-group/custom-radio-group';\nimport moment from 'moment';\nexport default {\n  name: '',\n  bem: {\n    b: 'shop-reception-reserve-course'\n  },\n  components: {\n    CustomRadioGroup: CustomRadioGroup\n  },\n  modals: {},\n  serviceInject: function serviceInject() {\n    return {\n      courseService: CourseService\n    };\n  },\n  rxState: function rxState() {\n    var courseService = this.courseService;\n    return {\n      list: courseService.list$,\n      page: courseService.page$,\n      loading: courseService.loading$,\n      auth: courseService.auth$,\n      courseTypeOptions: courseService.courseTypeOptions$,\n      reserveStatusOptions: courseService.reserveStatusOptions$,\n      checkinOptions: courseService.checkinOptions$\n    };\n  },\n  mixins: [tableMixin],\n  props: {},\n  data: function data() {\n    return {\n      reserveQuery: {\n        end_time: '',\n        search_date: 1,\n        start_time: ''\n      }\n    };\n  },\n  computed: {\n    mainColumns: mainColumns,\n    childColumns: childColumns\n  },\n  mounted: function mounted() {},\n  methods: {\n    moment: moment,\n    recentChange: function recentChange(data) {\n      var start_time = data.start_time ? \"\".concat(data.start_time.format('YYYY-MM-DD'), \" 00:00\") : '';\n      var end_time = data.end_time ? \"\".concat(data.end_time.format('YYYY-MM-DD'), \" 23:59\") : '';\n      var recent = data.recent;\n      this.$searchQuery.search_date = data.recent || undefined;\n      this.$searchQuery.start_time = start_time || undefined;\n      this.$searchQuery.end_time = end_time || undefined;\n\n      if (this.$searchQuery.start_time || this.$searchQuery.end_time) {\n        this.$searchQuery.search_date = undefined;\n        recent = undefined;\n      }\n\n      this.reserveQuery = {\n        start_time: start_time,\n        end_time: end_time,\n        search_date: recent\n      };\n      this.onMultiSearch(this.reserveQuery); // console.log('query', this.query)\n      // console.log('$searchQuery', this.$searchQuery)\n      // this.onSearch()\n    },\n    getCourseForm: function getCourseForm(record, index) {\n      var id = record.id,\n          member = record.member;\n      var reserve_type = this.list[index].sub_reserve_type;\n      return {\n        id: member.id,\n        reserve_type: reserve_type.id,\n        reserve_id: id\n      };\n    },\n    // 取消签到\n    cancelBooking: function cancelBooking(record, index) {\n      var _this = this;\n\n      var params = this.getCourseForm(record, index);\n      this.courseService.cancelVisitReserve(params).subscribe(function (res) {\n        _this.$router.reload();\n      });\n    },\n    // 签到\n    booking: function booking(record, index) {\n      var _this2 = this;\n\n      var params = this.getCourseForm(record, index);\n      this.courseService.confirmVisitReserve(params).subscribe(function (res) {\n        _this2.$router.reload();\n      });\n    },\n    onPrint: function onPrint(id) {\n      window.open('/ticket/print?id=' + id, '_blank', 'width=800,height=600');\n    },\n    onSearch: function onSearch() {\n      this.$router.push({\n        query: this.$searchQuery\n      });\n    }\n  }\n};",null]}