{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/activity-registration/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/activity-registration/list.vue","mtime":1600926556121},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// table\nimport tableMixin from '@/mixins/table.mixin';\nimport { ListService } from \"./list.service\";\nimport MarkteingPluginTitle from \"../../components#/marketing-title\";\nimport { columns } from \"./list.config\";\nimport useShare from '@/hooks/marketing/share.hook'; // modal\n\nexport default {\n  name: 'ActivityList',\n  mixins: [tableMixin],\n  bem: {\n    bPage: 'page-plugin-activity-registration',\n    bSearch: 'search'\n  },\n  data: function data() {\n    return {\n      plugin_image: [],\n      redirectPath: {\n        addActivity: 'brand-marketing-plugin-activity-registration-add',\n        editActivity: 'brand-marketing-plugin-activity-registration-edit',\n        checkinActivity: 'brand-marketing-plugin-activity-registration-checkin',\n        copyActivity: 'brand-marketing-plugin-activity-registration-copy',\n        rosterActivity: 'brand-marketing-plugin-activity-registration-roster'\n      }\n    };\n  },\n  hooks: function hooks() {\n    return {\n      share: useShare()\n    };\n  },\n  serviceInject: function serviceInject() {\n    return {\n      service: ListService\n    };\n  },\n  rxState: function rxState() {\n    var _this$service = this.service,\n        info$ = _this$service.info$,\n        brand$ = _this$service.brand$,\n        page$ = _this$service.page$,\n        list$ = _this$service.list$,\n        activityStatus$ = _this$service.activityStatus$,\n        loading$ = _this$service.loading$,\n        auth$ = _this$service.auth$;\n    return {\n      activityStatus$: activityStatus$,\n      page$: page$,\n      list$: list$,\n      auth$: auth$,\n      loading$: loading$,\n      brand$: brand$,\n      info$: info$\n    };\n  },\n  components: {\n    MarkteingPluginTitle: MarkteingPluginTitle\n  },\n  computed: {\n    columns: columns\n  },\n  methods: {\n    onConfigHandle: function onConfigHandle() {\n      this.$router.push({\n        path: '/brand/setting/mina/index'\n      });\n    },\n    onClickRouterPush: function onClickRouterPush(_ref) {\n      var record = _ref.record,\n          pathName = _ref.pathName;\n      this.$router.push({\n        name: this.redirectPath[pathName]\n      });\n    },\n    onClickEdit: function onClickEdit(_ref2) {\n      var record = _ref2.record,\n          pathName = _ref2.pathName;\n      this.$router.push({\n        name: this.redirectPath[pathName],\n        query: {\n          id: record.id\n        }\n      });\n    },\n    onCLickGeneralize: function onCLickGeneralize(record) {\n      var _this = this;\n\n      this.service.getSharePosterInfo(record.id).subscribe(function (res) {\n        var info = _this.info$;\n        var activity_date = \"\".concat(info.start_time, \" - \").concat(info.end_time);\n        var shsInfo = {\n          qrcode_url: info.qrcode,\n          brand_name: _this.brand$.name,\n          brand_logo: _this.brand$.logo,\n          activity_img: info.image.image_url,\n          activity_title: info.activity_name,\n          activity_date: activity_date,\n          activity_address: info.address\n        };\n\n        _this.share.poster({\n          isAuth: res.is_auth,\n          shsInfo: shsInfo,\n          shsPath: '/saas/activity'\n        });\n      });\n    },\n    onClickNameList: function onClickNameList(_ref3) {\n      var record = _ref3.record,\n          pathName = _ref3.pathName;\n      this.$router.push({\n        name: this.redirectPath[pathName],\n        query: {\n          id: record.id\n        }\n      });\n    },\n    onClickStop: function onClickStop(record) {\n      var _this2 = this;\n\n      this.$confirm({\n        title: '提示',\n        content: '确认取消该活动吗?',\n        okText: '是的',\n        cancelText: '再想想',\n        onOk: function onOk() {\n          _this2.service.cancelSignUp(record.id).subscribe(function (res) {\n            _this2.$router.reload();\n          });\n        },\n        onCancel: function onCancel() {}\n      });\n    },\n    onClickCopy: function onClickCopy(_ref4) {\n      var record = _ref4.record,\n          pathName = _ref4.pathName;\n      this.$router.push({\n        name: this.redirectPath[pathName],\n        query: {\n          id: record.id\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["list.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <st-panel-layout :class=\"bPage()\">\n    <markteing-plugin-title\n      pathName=\"brand-marketing-plugin-activity-registration-list\"\n    />\n    <st-panel app :class=\"bPage('content')\">\n      <div slot=\"title\" :class=\"bSearch()\">\n        <div :class=\"bSearch('button-group')\">\n          <st-button\n            @click=\"onClickRouterPush({ pathName: 'addActivity' })\"\n            icon=\"add\"\n            v-if=\"auth$.add\"\n            type=\"primary\"\n          >\n            新增活动\n          </st-button>\n          <st-button\n            @click=\"onClickRouterPush({ pathName: 'checkinActivity' })\"\n            v-if=\"auth$.checkIn\"\n            class=\"mg-l8\"\n          >\n            签到验票\n          </st-button>\n          <st-button @click=\"onConfigHandle\" class=\"mg-l8\">\n            配置到小程序\n          </st-button>\n        </div>\n        <div :class=\"bSearch('input-group')\">\n          <a-select\n            placeholder=\"请选择活动报名状态\"\n            @change=\"onSingleSearch('activity_status', $event)\"\n            v-model=\"$searchQuery.activity_status\"\n            class=\"mg-r8\"\n            style=\"width: 160px\"\n            :options=\"activityStatus$\"\n          ></a-select>\n          <st-input-search\n            @search=\"onSingleSearch('activity_name', $event)\"\n            placeholder=\"请输入活动报名标题\"\n            style=\"width: 290px;\"\n          />\n        </div>\n      </div>\n      <div :class=\"bPage('table')\">\n        <st-table\n          :page=\"page$\"\n          rowKey=\"id\"\n          :loading=\"loading$.getList\"\n          :columns=\"columns\"\n          @change=\"onTableChange\"\n          :dataSource=\"list$\"\n        >\n          <span slot=\"time\" slot-scope=\"record\">\n            {{ record.start_time }} ~ {{ record.end_time }}\n          </span>\n          <template slot=\"activity_status\" slot-scope=\"text, record\">\n            <st-text\n              :status=\"{\n                error: record.activity_status.id === 3,\n                success:\n                  record.activity_status.id === 2 ||\n                  record.activity_status.id === 1,\n                default:\n                  record.activity_status.id === 4 ||\n                  record.activity_status.id === 5\n              }\"\n            >\n              {{ text.name }}\n            </st-text>\n          </template>\n          <template slot=\"join_people\" slot-scope=\"text, record\">\n            <a\n              @click=\"onClickNameList({ record, pathName: 'rosterActivity' })\"\n              v-if=\"text > 0\"\n            >\n              {{ text }}\n            </a>\n            <span v-else>{{ text }}</span>\n          </template>\n          <template slot=\"action\" slot-scope=\"text, record\">\n            <st-table-actions>\n              <a\n                v-if=\"record.auth.isEdit\"\n                @click=\"onClickEdit({ record, pathName: 'editActivity' })\"\n              >\n                编辑\n              </a>\n              <a v-if=\"record.auth.isAdv\" @click=\"onCLickGeneralize(record)\">\n                推广\n              </a>\n              <a\n                v-if=\"record.auth.isName\"\n                @click=\"onClickNameList({ record, pathName: 'rosterActivity' })\"\n              >\n                名单\n              </a>\n              <a\n                v-if=\"record.auth.isCopy\"\n                @click=\"onClickCopy({ record, pathName: 'copyActivity' })\"\n              >\n                复制\n              </a>\n              <a v-if=\"record.auth.isCancel\" @click=\"onClickStop(record)\">\n                取消\n              </a>\n            </st-table-actions>\n          </template>\n        </st-table>\n      </div>\n    </st-panel>\n  </st-panel-layout>\n</template>\n<script>\n// table\nimport tableMixin from '@/mixins/table.mixin'\nimport { ListService } from './list.service'\nimport MarkteingPluginTitle from '../../components#/marketing-title'\nimport { columns } from './list.config'\nimport useShare from '@/hooks/marketing/share.hook'\n// modal\nexport default {\n  name: 'ActivityList',\n  mixins: [tableMixin],\n  bem: {\n    bPage: 'page-plugin-activity-registration',\n    bSearch: 'search'\n  },\n  data() {\n    return {\n      plugin_image: [],\n      redirectPath: {\n        addActivity: 'brand-marketing-plugin-activity-registration-add',\n        editActivity: 'brand-marketing-plugin-activity-registration-edit',\n        checkinActivity: 'brand-marketing-plugin-activity-registration-checkin',\n        copyActivity: 'brand-marketing-plugin-activity-registration-copy',\n        rosterActivity: 'brand-marketing-plugin-activity-registration-roster'\n      }\n    }\n  },\n  hooks() {\n    return {\n      share: useShare()\n    }\n  },\n  serviceInject() {\n    return {\n      service: ListService\n    }\n  },\n  rxState() {\n    const {\n      info$,\n      brand$,\n      page$,\n      list$,\n      activityStatus$,\n      loading$,\n      auth$\n    } = this.service\n    return {\n      activityStatus$,\n      page$,\n      list$,\n      auth$,\n      loading$,\n      brand$,\n      info$\n    }\n  },\n  components: {\n    MarkteingPluginTitle\n  },\n  computed: {\n    columns\n  },\n  methods: {\n    onConfigHandle() {\n      this.$router.push({\n        path: '/brand/setting/mina/index'\n      })\n    },\n    onClickRouterPush({ record, pathName }) {\n      this.$router.push({\n        name: this.redirectPath[pathName]\n      })\n    },\n    onClickEdit({ record, pathName }) {\n      this.$router.push({\n        name: this.redirectPath[pathName],\n        query: { id: record.id }\n      })\n    },\n    onCLickGeneralize(record) {\n      this.service.getSharePosterInfo(record.id).subscribe(res => {\n        const info = this.info$\n        const activity_date = `${info.start_time} - ${info.end_time}`\n        const shsInfo = {\n          qrcode_url: info.qrcode,\n          brand_name: this.brand$.name,\n          brand_logo: this.brand$.logo,\n          activity_img: info.image.image_url,\n          activity_title: info.activity_name,\n          activity_date,\n          activity_address: info.address\n        }\n        this.share.poster({\n          isAuth: res.is_auth,\n          shsInfo,\n          shsPath: '/saas/activity'\n        })\n      })\n    },\n    onClickNameList({ record, pathName }) {\n      this.$router.push({\n        name: this.redirectPath[pathName],\n        query: { id: record.id }\n      })\n    },\n    onClickStop(record) {\n      this.$confirm({\n        title: '提示',\n        content: '确认取消该活动吗?',\n        okText: '是的',\n        cancelText: '再想想',\n        onOk: () => {\n          this.service.cancelSignUp(record.id).subscribe(res => {\n            this.$router.reload()\n          })\n        },\n        onCancel() {}\n      })\n    },\n    onClickCopy({ record, pathName }) {\n      this.$router.push({\n        name: this.redirectPath[pathName],\n        query: { id: record.id }\n      })\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/pages/brand/marketing/plugin/activity-registration"}]}