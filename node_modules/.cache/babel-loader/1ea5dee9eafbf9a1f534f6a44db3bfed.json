{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/store/add.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/store/add.vue","mtime":1600926556578},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.to-string\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { ruleOptions, skuColumns } from \"./add.config\";\nimport StImageUpload from '@/views/components/image-upload#/image-upload.vue';\nimport StEditor from '@/views/components/editor#/editor.vue';\nimport StoreClassManage from '@/views/biz-modals/store/class-manage.vue';\nimport { PatternService } from '@/services/pattern.service';\nimport { AddService } from \"./add.service.ts\";\nimport StoreAddSku from '@/views/biz-modals/store/add-sku';\nimport { result } from 'lodash-es';\nimport { UserService } from '@/services/user.service';\nimport { cloneDeep } from 'lodash-es';\nexport default {\n  bem: {\n    basic: 'shop-store-add',\n    skuItem: 'sku-item'\n  },\n  serviceInject: function serviceInject() {\n    return {\n      pattern: PatternService,\n      addService: AddService,\n      userService: UserService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      loading: this.addService.loading$,\n      saleType: this.userService.getOptions$('cloud_store.sale_type'),\n      shippingMode: this.userService.getOptions$('cloud_store.shipping_mode'),\n      shelvesStatus: this.userService.getOptions$('cloud_store.edit_shelves_status')\n    };\n  },\n  modals: {\n    StoreClassManage: StoreClassManage,\n    StoreAddSku: StoreAddSku\n  },\n  props: {\n    isEditMode: {\n      type: Boolean,\n      default: false\n    },\n    info: {\n      type: Object,\n      default: function _default() {}\n    }\n  },\n  data: function data() {\n    var form = this.$stForm.create();\n    var decorators = form.decorators(ruleOptions);\n    return {\n      form: form,\n      decorators: decorators,\n      cropperModal: {\n        cropper: {\n          aspectRatio: 1\n        }\n      },\n      name: '',\n      // 商品名称\n      isMore: 1,\n      // 是否是多规格\n      tableData: [{\n        market_price: '',\n        selling_price: '',\n        stock_amount: '',\n        key: parseInt(Math.random() * 999999).toString()\n      }],\n      skuList: [],\n      content: '',\n      isEditor: false,\n      fileList: [],\n      // 商品图片组件中\n      imgList: [],\n      //上传的图片\n      isImgError: false,\n      shelves_status: 1,\n      product_images_del: [],\n      product_images_add: [],\n      classList: [],\n      tableErr: false,\n      tableTips: '',\n      isChoose: false,\n      isDisabledCourier: false\n    };\n  },\n  components: {\n    StEditor: StEditor,\n    StImageUpload: StImageUpload\n  },\n  computed: {\n    skuColumns: skuColumns,\n    sku: function sku() {\n      var list = [];\n      this.skuList.forEach(function (item, index) {\n        var skuItem = {\n          title: item.spec_name,\n          dataIndex: index\n        };\n        list.push(skuItem);\n      });\n      return list;\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.addService.getList().subscribe(function (res) {\n      _this.classList = res.list;\n    });\n\n    if (this.isEditMode) {\n      this.goodDetail();\n    }\n  },\n  methods: {\n    changeSale: function changeSale(event) {\n      var type = this.form.getFieldValue('delivery_type');\n      var deliveryType = [];\n\n      if (event.indexOf(1) !== -1) {\n        this.isChoose = true;\n\n        if (type !== undefined) {\n          deliveryType = type;\n        }\n\n        if (deliveryType.indexOf(1) === -1) {\n          deliveryType.push(1);\n          this.form.setFieldsValue({\n            delivery_type: deliveryType\n          });\n        }\n      } else {\n        this.isChoose = false;\n      }\n\n      if (event.indexOf(1) !== -1 && event.indexOf(2) === -1) {\n        this.isDisabledCourier = true;\n      } else {\n        this.isDisabledCourier = false;\n      }\n    },\n    // 保存\n    onSubmit: function onSubmit() {\n      var _this2 = this;\n\n      var isReturn = false;\n      var tableError = false;\n\n      if (!this.imgList.length) {\n        this.isReturn = true;\n        this.isImgError = true;\n      }\n\n      this.skuList.forEach(function (item) {\n        item.isErr = false;\n        item.isNameErr = false;\n\n        if (!item.spec_item_name.length) {\n          item.isErr = true;\n          isReturn = true;\n        }\n\n        if (!item.spec_name) {\n          item.isNameErr = true;\n          isReturn = true;\n        }\n      });\n      this.tableData.forEach(function (item) {\n        if (!item.market_price || !item.selling_price || !_this2.isEditMode && !item.stock_amount) {\n          tableError = true;\n          _this2.tableTips = '请正确填写表格';\n          _this2.tableErr = true;\n          isReturn = true;\n        }\n      });\n\n      if (!tableError) {\n        this.tableTips = '';\n        this.tableErr = false;\n      }\n\n      this.form.validate().then(function (values) {\n        if (isReturn) {\n          return;\n        }\n\n        if (_this2.isEditMode) {\n          _this2.editGoodOld(values);\n        } else {\n          _this2.addGoodNew(values);\n        }\n      });\n    },\n    addGoodNew: function addGoodNew(values) {\n      var _this3 = this;\n\n      var data = {};\n      var product_sku = [];\n      var spec_name_arr = [];\n      this.tableData.forEach(function (item, index) {\n        var skuItem = {};\n        skuItem.market_price = item.market_price;\n        skuItem.selling_price = item.selling_price;\n        skuItem.stock_amount = item.stock_amount;\n        skuItem.spec_arr = [];\n\n        if (_this3.skuList.length > 0) {\n          skuItem.spec_arr.push({\n            spec_name: _this3.skuList[0].spec_name,\n            spec_item_name: item['0']\n          });\n        }\n\n        if (_this3.skuList.length > 1) {\n          skuItem.spec_arr.push({\n            spec_name: _this3.skuList[1].spec_name,\n            spec_item_name: item['1']\n          });\n        }\n\n        if (_this3.skuList.length > 2) {\n          skuItem.spec_arr.push({\n            spec_name: _this3.skuList[2].spec_name,\n            spec_item_name: item['2']\n          });\n        }\n\n        product_sku.push(skuItem);\n      });\n      this.skuList.forEach(function (item) {\n        spec_name_arr.push(item.spec_name);\n      });\n      data = {\n        product_images: this.imgList,\n        // 商品图片\n        product_intro: this.content,\n        // 商品介绍\n        product_sku: product_sku,\n        // 规格设置\n        shelves_status: this.shelves_status,\n        // 上架状态\n        product_name: values.product_name,\n        // 商品名称\n        category_id: values.category_id,\n        // 分类id\n        delivery_type: values.delivery_type.length === this.shippingMode.length ? -1 : values.delivery_type[0],\n        // 配送方式\n        sale_type: values.sale_type.length === this.saleType.length ? -1 : values.sale_type[0],\n        // 售卖方式\n        spec_name_arr: spec_name_arr\n      };\n      this.addService.addGoods(data).subscribe(function (res) {\n        _this3.$router.push({\n          path: './list'\n        });\n      });\n    },\n    editGoodOld: function editGoodOld(values) {\n      var _this4 = this;\n\n      var data = {};\n      var product_sku = [];\n      this.tableData.forEach(function (item, index) {\n        var skuItem = {};\n        skuItem.market_price = item.market_price;\n        skuItem.selling_price = item.selling_price;\n        skuItem.stock_amount = item.stock_amount;\n\n        if (item.sku_id) {\n          skuItem.is_update = item.is_update;\n          skuItem.sku_id = item.sku_id;\n        }\n\n        skuItem.spec_arr = [];\n\n        if (_this4.skuList.length > 0) {\n          var sku = {};\n\n          _this4.info.all_spec[0].spec_item_arr.forEach(function (spec) {\n            sku.spec_id = _this4.info.all_spec[0].spec_id;\n\n            if (spec.spec_item_name === item['0']) {\n              sku.spec_item_id = spec.spec_item_id;\n            }\n          });\n\n          sku.spec_name = _this4.skuList[0].spec_name;\n          sku.spec_item_name = item['0'];\n          skuItem.spec_arr.push(sku);\n        }\n\n        if (_this4.skuList.length > 1) {\n          var _sku = {};\n\n          _this4.info.all_spec[1].spec_item_arr.forEach(function (spec) {\n            _sku.spec_id = _this4.info.all_spec[1].spec_id;\n\n            if (spec.spec_item_name === item['1']) {\n              _sku.spec_item_id = spec.spec_item_id;\n            }\n          });\n\n          _sku.spec_name = _this4.skuList[1].spec_name;\n          _sku.spec_item_name = item['1'];\n          skuItem.spec_arr.push(_sku);\n        }\n\n        if (_this4.skuList.length > 2) {\n          var _sku2 = {};\n\n          _this4.info.all_spec[2].spec_item_arr.forEach(function (spec) {\n            _sku2.spec_id = _this4.info.all_spec[2].spec_id;\n\n            if (spec.spec_item_name === item['2']) {\n              _sku2.spec_item_id = spec.spec_item_id;\n            }\n          });\n\n          _sku2.spec_name = _this4.skuList[2].spec_name;\n          _sku2.spec_item_name = item['2'];\n          skuItem.spec_arr.push(_sku2);\n        }\n\n        product_sku.push(skuItem);\n      });\n      data = {\n        product_images_del: this.product_images_del,\n        // 商品图片\n        product_images_add: this.imgList.filter(function (item) {\n          return item.isNew;\n        }),\n        // 商品图片\n        product_intro: this.content,\n        // 商品介绍\n        product_sku: product_sku,\n        // 规格设置\n        shelves_status: this.shelves_status,\n        // 上架状态\n        product_name: values.product_name,\n        // 商品名称\n        category_id: values.category_id,\n        // 分类id\n        delivery_type: values.delivery_type.length === this.shippingMode.length ? -1 : values.delivery_type[0],\n        // 配送方式\n        sale_type: values.sale_type.length === this.saleType.length ? -1 : values.sale_type[0] // 售卖方式\n\n      };\n      this.addService.editGoods(this.$route.query.id, data).subscribe(function (res) {\n        _this4.$router.push({\n          path: './list'\n        });\n      });\n    },\n    goodDetail: function goodDetail() {\n      var _this5 = this;\n\n      this.form.setFieldsValue({\n        product_name: this.info.product_name,\n        category_id: this.info.category_id,\n        delivery_type: this.info.delivery_type === -1 ? this.shippingMode.map(function (item) {\n          return item.value;\n        }) : [this.info.delivery_type],\n        sale_type: this.info.sale_type === -1 ? this.saleType.map(function (item) {\n          return item.value;\n        }) : [this.info.sale_type]\n      });\n      this.name = this.info.product_name;\n      this.isMore = this.info.all_spec ? 2 : 1;\n      this.imgList = this.info.product_images;\n      this.content = this.info.product_intro;\n      this.shelves_status = this.info.shelves_status;\n      this.skuList = [];\n\n      if (this.info.all_spec) {\n        this.info.all_spec.forEach(function (item) {\n          var list = [];\n\n          if (item.spec_item_arr) {\n            item.spec_item_arr.forEach(function (it) {\n              list.push(it.spec_item_name);\n            });\n\n            _this5.skuList.push({\n              spec_name: item.spec_name,\n              spec_item_name: list,\n              isErr: false,\n              isNameErr: false\n            });\n          }\n        });\n      }\n\n      var tableData = [];\n      this.info.product_sku.forEach(function (item, index) {\n        var tableItem = {};\n        tableItem.market_price = item.market_price;\n        tableItem.selling_price = item.selling_price;\n        tableItem.stock_amount = item.stock_amount;\n        tableItem.sku_id = item.sku_id;\n        tableItem.is_update = 0;\n        tableItem.key = parseInt(Math.random() * 999999).toString();\n\n        if (item.spec_arr) {\n          item.spec_arr.forEach(function (item, index) {\n            tableItem[index] = item.spec_item_name;\n          });\n        }\n\n        tableData.push(tableItem);\n      });\n      this.tableData = tableData;\n    },\n    // 为了同步字数\n    changeName: function changeName(e) {\n      this.name = e.target.value;\n    },\n    delImg: function delImg(item, index) {\n      if (this.isEditMode && item.image_id) {\n        this.product_images_del.push(item.image_id);\n      }\n\n      this.imgList.splice(index, 1);\n    },\n    addSku: function addSku() {\n      this.skuList.push({\n        spec_name: '',\n        spec_item_name: [],\n        isErr: false,\n        isNameErr: false\n      });\n    },\n    addSkuItem: function addSkuItem(index) {\n      var _this6 = this;\n\n      this.$modalRouter.push({\n        name: 'store-add-sku',\n        props: {\n          list: this.skuList[index].spec_item_name\n        },\n        on: {\n          success: function success(result) {\n            _this6.skuList[index].spec_item_name.push(result);\n\n            _this6.changeTable();\n          }\n        }\n      });\n    },\n    delSkuItem: function delSkuItem(index, i) {\n      this.skuList[index].spec_item_name.splice(i, 1);\n      this.changeTable();\n    },\n    delSku: function delSku(index) {\n      this.skuList.splice(index, 1);\n\n      if (!this.skuList.length) {\n        this.isMore = 1;\n        this.tableData = [{\n          market_price: '',\n          selling_price: '',\n          stock_amount: '',\n          key: parseInt(Math.random() * 999999).toString()\n        }];\n      }\n    },\n    getImageUrl: function getImageUrl(imageUrl) {\n      var imgEl = \"<img src='\".concat(imageUrl.url, \"' width='400' height='400'>\");\n      this.content = this.content + imgEl;\n    },\n    onChangeEditor: function onChangeEditor() {\n      this.isEditor = this.content.length === 0;\n      return this.content.length === 0;\n    },\n    getImage: function getImage(data) {\n      var img = {\n        image_id: data[0].image_id,\n        image_key: data[0].image_key,\n        image_url: data[0].image_url,\n        is_cover: 0\n      };\n      this.imgList.push(img);\n\n      if (this.isEditMode) {\n        img.isNew = true;\n      }\n\n      this.isImgError = false;\n      this.fileList = [];\n    },\n    // 规格发生改变时列表数据相应改变\n    changeTable: function changeTable() {\n      var list = [];\n      var skuList = [];\n      this.skuList.forEach(function (item, index) {\n        if (item.spec_item_name.length !== 0) {\n          skuList.push(item);\n        }\n      });\n      skuList[0].spec_item_name.forEach(function (item, index) {\n        var skuItem = {\n          market_price: '',\n          selling_price: '',\n          stock_amount: ''\n        };\n        skuItem['0'] = item;\n\n        if (skuList[1] && skuList[1].spec_item_name.length) {\n          skuList[1].spec_item_name.forEach(function (ite, inde) {\n            skuItem['1'] = ite;\n\n            if (skuList[2] && skuList[2].spec_item_name.length) {\n              skuList[2].spec_item_name.forEach(function (it, ind) {\n                skuItem['2'] = it;\n                list.push(cloneDeep(skuItem));\n              });\n            } else {\n              list.push(cloneDeep(skuItem));\n            }\n          });\n        } else {\n          list.push(cloneDeep(skuItem));\n        }\n      });\n      list.forEach(function (o) {\n        o.key = parseInt(Math.random() * 999999).toString();\n      });\n      this.tableData = list;\n      console.log(this.tableData, 'tableDatatableData');\n    },\n    openClass: function openClass() {\n      var _this7 = this;\n\n      this.$modalRouter.push({\n        name: 'store-class-manage',\n        props: {\n          shopList: 1\n        },\n        on: {\n          success: function success(res) {\n            _this7.addService.getList().subscribe(function (res) {\n              _this7.classList = res.list;\n\n              var data = _this7.form.getFieldsValue();\n\n              if (!_this7.classList.some(function (item) {\n                return item.id === data.category_id;\n              })) {\n                _this7.form.setFieldsValue({\n                  category_id: ''\n                });\n              }\n            });\n          }\n        }\n      });\n    },\n    changeMore: function changeMore() {\n      this.skuList = [];\n      this.tableData = [{\n        market_price: '',\n        selling_price: '',\n        stock_amount: '',\n        key: parseInt(Math.random() * 999999).toString()\n      }];\n    },\n    allApply: function allApply(attr, value) {\n      this.tableData.map(function (item) {\n        return item[attr] = value;\n      });\n    }\n  }\n};",{"version":3,"sources":["add.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <st-mina-panel app>\n    <div slot=\"actions\">\n      <st-button\n        type=\"primary\"\n        :loading=\"isEditMode ? loading.editGoods : loading.addGoods\"\n        @click=\"onSubmit\"\n      >\n        保 存\n      </st-button>\n    </div>\n    <div :class=\"basic()\">\n      <st-form :form=\"form\" labelWidth=\"118px\">\n        <a-row :gutter=\"8\">\n          <a-col :span=\"10\">\n            <st-form-item label=\"商品名称\" required>\n              <a-input\n                v-decorator=\"decorators.product_name\"\n                placeholder=\"请输入商品名称\"\n                @change=\"changeName\"\n                maxlength=\"30\"\n              >\n                <span :class=\"basic('name--gray')\" slot=\"suffix\">\n                  {{ name.length }}\n                  /30\n                </span>\n              </a-input>\n            </st-form-item>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"8\">\n          <a-col :span=\"10\">\n            <st-form-item label=\"商品分类\" required>\n              <a-select\n                showSearch\n                v-decorator=\"decorators.category_id\"\n                placeholder=\"请选择分类\"\n              >\n                <a-select-option\n                  :value=\"item.category_id\"\n                  v-for=\"item in classList\"\n                  :key=\"item.category_id\"\n                >\n                  {{ item.category_name }}\n                </a-select-option>\n              </a-select>\n            </st-form-item>\n          </a-col>\n          <a-col :span=\"6\" :class=\"basic('class--manage')\">\n            <a @click=\"openClass\">\n              分类管理\n            </a>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"8\">\n          <a-col :span=\"16\">\n            <st-form-item label=\"商品图片\" required>\n              <ul :class=\"basic('img--container')\">\n                <li\n                  :class=\"['mg-r12', 'mg-t12', basic('img')]\"\n                  v-for=\"(item, index) in imgList\"\n                  :key=\"index\"\n                >\n                  <img\n                    :data-src=\"item.image_url | imgFilter({ w: 1000 })\"\n                    :src=\"item.image_url | imgFilter({ w: 126, h: 126 })\"\n                    width=\"126\"\n                    height=\"126\"\n                    alt=\"商品图片\"\n                  />\n                  <div :class=\"basic('img--del')\">\n                    <span\n                      :class=\"basic('img--del-text')\"\n                      @click=\"delImg(item, index)\"\n                    >\n                      删除\n                    </span>\n                  </div>\n                </li>\n                <li :class=\"basic('img')\">\n                  <st-image-upload\n                    v-if=\"imgList.length < 5\"\n                    class=\"mg-t12\"\n                    width=\"126px\"\n                    height=\"126px\"\n                    :cropperModal=\"cropperModal\"\n                    :list=\"fileList\"\n                    @change=\"getImage\"\n                    :numLimit=\"5\"\n                    :sizeLimit=\"2\"\n                    placeholder=\"上传图片\"\n                  >\n                    <template v-slot:description>\n                      <p>建议尺寸为750px*750px</p>\n                    </template>\n                  </st-image-upload>\n                  <div :class=\"basic('img--tip')\">可上传5张商品图片</div>\n                </li>\n              </ul>\n              <div class=\"color-danger\" v-if=\"isImgError\">请上传商品图片</div>\n            </st-form-item>\n            <st-form-item label=\"售卖方式\" required>\n              <a-checkbox-group\n                v-decorator=\"decorators.sale_type\"\n                @change=\"changeSale\"\n              >\n                <a-checkbox\n                  :value=\"item.value\"\n                  v-for=\"item in saleType\"\n                  :key=\"item.value\"\n                  style=\"margin-right: 16px;\"\n                >\n                  {{ item.label }}\n                </a-checkbox>\n              </a-checkbox-group>\n            </st-form-item>\n            <st-form-item label=\"配送方式\" required>\n              <a-checkbox-group v-decorator=\"decorators.delivery_type\">\n                <a-checkbox\n                  :value=\"item.value\"\n                  :disabled=\"\n                    (isChoose && item.value === 1) ||\n                      (isDisabledCourier && item.value === 2)\n                  \"\n                  v-for=\"item in shippingMode\"\n                  :key=\"item.value\"\n                  style=\"margin-right: 16px;\"\n                >\n                  {{ item.label }}\n                </a-checkbox>\n              </a-checkbox-group>\n            </st-form-item>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"8\">\n          <a-col :span=\"18\">\n            <st-form-item label=\"商品介绍\">\n              <st-editor\n                @image-change=\"getImageUrl\"\n                @input=\"onChangeEditor\"\n                v-model=\"content\"\n              ></st-editor>\n              <div class=\"color-danger\" v-if=\"isEditor\">请输入活动详情</div>\n            </st-form-item>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"8\">\n          <a-col :span=\"20\">\n            <!-- <a-col :span=\"10\"> -->\n            <st-form-item label=\"规格设置\" required>\n              <a-radio-group\n                v-model=\"isMore\"\n                @change=\"changeMore\"\n                :disabled=\"isEditMode\"\n              >\n                <a-radio :value=\"1\">单规格</a-radio>\n                <a-radio :value=\"2\">多规格</a-radio>\n              </a-radio-group>\n              <st-button\n                type=\"dashed\"\n                :class=\"basic('sku--add')\"\n                v-if=\"isMore === 2 && !isEditMode && skuList.length < 3\"\n                @click=\"addSku\"\n              >\n                <a-icon type=\"plus\" :class=\"basic('sku--add-icon')\" />\n                <span>新增规格项（{{ skuList.length }}/3）</span>\n              </st-button>\n              <div\n                :class=\"skuItem()\"\n                v-for=\"(item, index) in skuList\"\n                :key=\"index\"\n              >\n                <st-form-item\n                  label=\"规格项名称\"\n                  :help=\"item.isNameErr ? '请正确填写规格项' : ''\"\n                  :validateStatus=\"item.isNameErr ? 'error' : ''\"\n                >\n                  <a-input\n                    v-model=\"item.spec_name\"\n                    placeholder=\"请输入规格项名称\"\n                    :disabled=\"isEditMode\"\n                    maxlength=\"20\"\n                    style=\"width: 220px;\"\n                  ></a-input>\n                  <span\n                    :class=\"skuItem('del')\"\n                    @click=\"delSku(index)\"\n                    v-if=\"!isEditMode\"\n                  >\n                    <st-icon\n                      type=\"delete\"\n                      :class=\"skuItem('icon')\"\n                      color=\"#3F66F6\"\n                    ></st-icon>\n                    <span :class=\"skuItem('text')\">\n                      删除\n                    </span>\n                  </span>\n                </st-form-item>\n                <st-form-item\n                  label=\"规格项设置\"\n                  :help=\"item.isErr ? '请正确填写规格' : ''\"\n                  :validateStatus=\"item.isErr ? 'error' : ''\"\n                >\n                  <span\n                    v-for=\"(sku, i) in item.spec_item_name\"\n                    :key=\"i\"\n                    :class=\"basic('sku--tag')\"\n                  >\n                    {{ sku }}\n                    <a-icon\n                      type=\"close\"\n                      @click=\"delSkuItem(index, i)\"\n                      v-if=\"isEditMode ? item.spec_item_name.length > 1 : true\"\n                    />\n                  </span>\n                  <a\n                    :class=\"skuItem('add')\"\n                    @click=\"addSkuItem(index)\"\n                    v-if=\"item.spec_item_name.length <= 10\"\n                  >\n                    新增规格\n                  </a>\n                </st-form-item>\n              </div>\n            </st-form-item>\n            <st-form-item\n              label-fix\n              :help=\"tableTips\"\n              :validateStatus=\"tableErr ? 'error' : ''\"\n            >\n              <st-container>\n                <st-table\n                  rowKey=\"key\"\n                  :columns=\"skuColumns\"\n                  :dataSource=\"tableData\"\n                  :pagination=\"false\"\n                >\n                  <template\n                    slot=\"market_price\"\n                    slot-scope=\"customRender, record\"\n                  >\n                    <div :class=\"basic('apply')\">\n                      <st-input-number\n                        v-model=\"record.market_price\"\n                        :float=\"true\"\n                        style=\"width: 110px;\"\n                        @change=\"record.is_update = 1\"\n                      >\n                        <template slot=\"addonAfter\">\n                          元\n                        </template>\n                      </st-input-number>\n                      <a\n                        style=\"margin-left: 8px;\"\n                        :class=\"basic('apply--all')\"\n                        v-if=\"isMore === 2 && tableData.length > 1\"\n                        @click=\"allApply('market_price', record.market_price)\"\n                      >\n                        批量应用\n                      </a>\n                    </div>\n                  </template>\n                  <template\n                    slot=\"selling_price\"\n                    slot-scope=\"customRender, record\"\n                  >\n                    <div :class=\"basic('apply')\">\n                      <st-input-number\n                        v-model=\"record.selling_price\"\n                        :float=\"true\"\n                        style=\"width: 110px;\"\n                        @change=\"record.is_update = 1\"\n                      >\n                        <template slot=\"addonAfter\">\n                          元\n                        </template>\n                      </st-input-number>\n                      <a\n                        style=\"margin-left: 8px;\"\n                        :class=\"basic('apply--all')\"\n                        v-if=\"isMore === 2 && tableData.length > 1\"\n                        @click=\"allApply('selling_price', record.selling_price)\"\n                      >\n                        批量应用\n                      </a>\n                    </div>\n                  </template>\n                  <template\n                    slot=\"stock_amount\"\n                    slot-scope=\"customRender, record\"\n                  >\n                    <div :class=\"basic('apply')\">\n                      <st-input-number\n                        v-model=\"record.stock_amount\"\n                        style=\"width: 110px;\"\n                        :disabled=\"isEditMode\"\n                      ></st-input-number>\n                      <a\n                        style=\"margin-left: 8px;\"\n                        :class=\"basic('apply--all')\"\n                        v-if=\"isMore === 2 && tableData.length > 1\"\n                        @click=\"allApply('stock_amount', record.stock_amount)\"\n                      >\n                        批量应用\n                      </a>\n                    </div>\n                  </template>\n                </st-table>\n              </st-container>\n            </st-form-item>\n          </a-col>\n        </a-row>\n        <a-row :gutter=\"8\">\n          <a-col :span=\"10\">\n            <st-form-item label=\"上架状态\" required>\n              <a-radio-group v-model=\"shelves_status\">\n                <a-radio\n                  :value=\"item.value\"\n                  v-for=\"item in shelvesStatus\"\n                  :key=\"item.value\"\n                >\n                  {{ item.label }}\n                </a-radio>\n              </a-radio-group>\n            </st-form-item>\n          </a-col>\n        </a-row>\n      </st-form>\n    </div>\n  </st-mina-panel>\n</template>\n<script>\nimport { ruleOptions, skuColumns } from './add.config'\nimport StImageUpload from '@/views/components/image-upload#/image-upload.vue'\nimport StEditor from '@/views/components/editor#/editor.vue'\nimport StoreClassManage from '@/views/biz-modals/store/class-manage.vue'\nimport { PatternService } from '@/services/pattern.service'\nimport { AddService } from './add.service.ts'\nimport StoreAddSku from '@/views/biz-modals/store/add-sku'\nimport { result } from 'lodash-es'\nimport { UserService } from '@/services/user.service'\nimport { cloneDeep } from 'lodash-es'\nexport default {\n  bem: {\n    basic: 'shop-store-add',\n    skuItem: 'sku-item'\n  },\n  serviceInject() {\n    return {\n      pattern: PatternService,\n      addService: AddService,\n      userService: UserService\n    }\n  },\n  rxState() {\n    return {\n      loading: this.addService.loading$,\n      saleType: this.userService.getOptions$('cloud_store.sale_type'),\n      shippingMode: this.userService.getOptions$('cloud_store.shipping_mode'),\n      shelvesStatus: this.userService.getOptions$(\n        'cloud_store.edit_shelves_status'\n      )\n    }\n  },\n  modals: { StoreClassManage, StoreAddSku },\n  props: {\n    isEditMode: {\n      type: Boolean,\n      default: false\n    },\n    info: {\n      type: Object,\n      default: () => {}\n    }\n  },\n  data() {\n    const form = this.$stForm.create()\n    const decorators = form.decorators(ruleOptions)\n    return {\n      form,\n      decorators,\n      cropperModal: {\n        cropper: {\n          aspectRatio: 1\n        }\n      },\n      name: '', // 商品名称\n      isMore: 1, // 是否是多规格\n      tableData: [\n        {\n          market_price: '',\n          selling_price: '',\n          stock_amount: '',\n          key: parseInt(Math.random() * 999999).toString()\n        }\n      ],\n      skuList: [],\n      content: '',\n      isEditor: false,\n      fileList: [], // 商品图片组件中\n      imgList: [], //上传的图片\n      isImgError: false,\n      shelves_status: 1,\n      product_images_del: [],\n      product_images_add: [],\n      classList: [],\n      tableErr: false,\n      tableTips: '',\n      isChoose: false,\n      isDisabledCourier: false\n    }\n  },\n  components: {\n    StEditor,\n    StImageUpload\n  },\n  computed: {\n    skuColumns,\n    sku() {\n      let list = []\n      this.skuList.forEach((item, index) => {\n        let skuItem = {\n          title: item.spec_name,\n          dataIndex: index\n        }\n        list.push(skuItem)\n      })\n      return list\n    }\n  },\n  mounted() {\n    this.addService.getList().subscribe(res => {\n      this.classList = res.list\n    })\n    if (this.isEditMode) {\n      this.goodDetail()\n    }\n  },\n  methods: {\n    changeSale(event) {\n      let type = this.form.getFieldValue('delivery_type')\n      let deliveryType = []\n      if (event.indexOf(1) !== -1) {\n        this.isChoose = true\n        if (type !== undefined) {\n          deliveryType = type\n        }\n        if (deliveryType.indexOf(1) === -1) {\n          deliveryType.push(1)\n          this.form.setFieldsValue({\n            delivery_type: deliveryType\n          })\n        }\n      } else {\n        this.isChoose = false\n      }\n      if (event.indexOf(1) !== -1 && event.indexOf(2) === -1) {\n        this.isDisabledCourier = true\n      } else {\n        this.isDisabledCourier = false\n      }\n    },\n    // 保存\n    onSubmit() {\n      let isReturn = false\n      let tableError = false\n      if (!this.imgList.length) {\n        this.isReturn = true\n        this.isImgError = true\n      }\n      this.skuList.forEach(item => {\n        item.isErr = false\n        item.isNameErr = false\n        if (!item.spec_item_name.length) {\n          item.isErr = true\n          isReturn = true\n        }\n        if (!item.spec_name) {\n          item.isNameErr = true\n          isReturn = true\n        }\n      })\n      this.tableData.forEach(item => {\n        if (\n          !item.market_price ||\n          !item.selling_price ||\n          (!this.isEditMode && !item.stock_amount)\n        ) {\n          tableError = true\n          this.tableTips = '请正确填写表格'\n          this.tableErr = true\n          isReturn = true\n        }\n      })\n      if (!tableError) {\n        this.tableTips = ''\n        this.tableErr = false\n      }\n      this.form.validate().then(values => {\n        if (isReturn) {\n          return\n        }\n        if (this.isEditMode) {\n          this.editGoodOld(values)\n        } else {\n          this.addGoodNew(values)\n        }\n      })\n    },\n    addGoodNew(values) {\n      let data = {}\n      let product_sku = []\n      let spec_name_arr = []\n      this.tableData.forEach((item, index) => {\n        let skuItem = {}\n        skuItem.market_price = item.market_price\n        skuItem.selling_price = item.selling_price\n        skuItem.stock_amount = item.stock_amount\n        skuItem.spec_arr = []\n        if (this.skuList.length > 0) {\n          skuItem.spec_arr.push({\n            spec_name: this.skuList[0].spec_name,\n            spec_item_name: item['0']\n          })\n        }\n        if (this.skuList.length > 1) {\n          skuItem.spec_arr.push({\n            spec_name: this.skuList[1].spec_name,\n            spec_item_name: item['1']\n          })\n        }\n        if (this.skuList.length > 2) {\n          skuItem.spec_arr.push({\n            spec_name: this.skuList[2].spec_name,\n            spec_item_name: item['2']\n          })\n        }\n        product_sku.push(skuItem)\n      })\n      this.skuList.forEach(item => {\n        spec_name_arr.push(item.spec_name)\n      })\n      data = {\n        product_images: this.imgList, // 商品图片\n        product_intro: this.content, // 商品介绍\n        product_sku: product_sku, // 规格设置\n        shelves_status: this.shelves_status, // 上架状态\n        product_name: values.product_name, // 商品名称\n        category_id: values.category_id, // 分类id\n        delivery_type:\n          values.delivery_type.length === this.shippingMode.length\n            ? -1\n            : values.delivery_type[0], // 配送方式\n        sale_type:\n          values.sale_type.length === this.saleType.length\n            ? -1\n            : values.sale_type[0], // 售卖方式\n        spec_name_arr\n      }\n      this.addService.addGoods(data).subscribe(res => {\n        this.$router.push({\n          path: './list'\n        })\n      })\n    },\n    editGoodOld(values) {\n      let data = {}\n      let product_sku = []\n      this.tableData.forEach((item, index) => {\n        let skuItem = {}\n        skuItem.market_price = item.market_price\n        skuItem.selling_price = item.selling_price\n        skuItem.stock_amount = item.stock_amount\n        if (item.sku_id) {\n          skuItem.is_update = item.is_update\n          skuItem.sku_id = item.sku_id\n        }\n        skuItem.spec_arr = []\n        if (this.skuList.length > 0) {\n          let sku = {}\n          this.info.all_spec[0].spec_item_arr.forEach(spec => {\n            sku.spec_id = this.info.all_spec[0].spec_id\n            if (spec.spec_item_name === item['0']) {\n              sku.spec_item_id = spec.spec_item_id\n            }\n          })\n          sku.spec_name = this.skuList[0].spec_name\n          sku.spec_item_name = item['0']\n          skuItem.spec_arr.push(sku)\n        }\n        if (this.skuList.length > 1) {\n          let sku = {}\n          this.info.all_spec[1].spec_item_arr.forEach(spec => {\n            sku.spec_id = this.info.all_spec[1].spec_id\n            if (spec.spec_item_name === item['1']) {\n              sku.spec_item_id = spec.spec_item_id\n            }\n          })\n          sku.spec_name = this.skuList[1].spec_name\n          sku.spec_item_name = item['1']\n          skuItem.spec_arr.push(sku)\n        }\n        if (this.skuList.length > 2) {\n          let sku = {}\n          this.info.all_spec[2].spec_item_arr.forEach(spec => {\n            sku.spec_id = this.info.all_spec[2].spec_id\n            if (spec.spec_item_name === item['2']) {\n              sku.spec_item_id = spec.spec_item_id\n            }\n          })\n          sku.spec_name = this.skuList[2].spec_name\n          sku.spec_item_name = item['2']\n          skuItem.spec_arr.push(sku)\n        }\n        product_sku.push(skuItem)\n      })\n      data = {\n        product_images_del: this.product_images_del, // 商品图片\n        product_images_add: this.imgList.filter(item => item.isNew), // 商品图片\n        product_intro: this.content, // 商品介绍\n        product_sku: product_sku, // 规格设置\n        shelves_status: this.shelves_status, // 上架状态\n        product_name: values.product_name, // 商品名称\n        category_id: values.category_id, // 分类id\n        delivery_type:\n          values.delivery_type.length === this.shippingMode.length\n            ? -1\n            : values.delivery_type[0], // 配送方式\n        sale_type:\n          values.sale_type.length === this.saleType.length\n            ? -1\n            : values.sale_type[0] // 售卖方式\n      }\n      this.addService.editGoods(this.$route.query.id, data).subscribe(res => {\n        this.$router.push({\n          path: './list'\n        })\n      })\n    },\n    goodDetail() {\n      this.form.setFieldsValue({\n        product_name: this.info.product_name,\n        category_id: this.info.category_id,\n        delivery_type:\n          this.info.delivery_type === -1\n            ? this.shippingMode.map(item => item.value)\n            : [this.info.delivery_type],\n        sale_type:\n          this.info.sale_type === -1\n            ? this.saleType.map(item => item.value)\n            : [this.info.sale_type]\n      })\n      this.name = this.info.product_name\n      this.isMore = this.info.all_spec ? 2 : 1\n      this.imgList = this.info.product_images\n      this.content = this.info.product_intro\n      this.shelves_status = this.info.shelves_status\n      this.skuList = []\n      if (this.info.all_spec) {\n        this.info.all_spec.forEach(item => {\n          let list = []\n          if (item.spec_item_arr) {\n            item.spec_item_arr.forEach(it => {\n              list.push(it.spec_item_name)\n            })\n            this.skuList.push({\n              spec_name: item.spec_name,\n              spec_item_name: list,\n              isErr: false,\n              isNameErr: false\n            })\n          }\n        })\n      }\n      let tableData = []\n      this.info.product_sku.forEach((item, index) => {\n        let tableItem = {}\n        tableItem.market_price = item.market_price\n        tableItem.selling_price = item.selling_price\n        tableItem.stock_amount = item.stock_amount\n        tableItem.sku_id = item.sku_id\n        tableItem.is_update = 0\n        tableItem.key = parseInt(Math.random() * 999999).toString()\n        if (item.spec_arr) {\n          item.spec_arr.forEach((item, index) => {\n            tableItem[index] = item.spec_item_name\n          })\n        }\n\n        tableData.push(tableItem)\n      })\n      this.tableData = tableData\n    },\n    // 为了同步字数\n    changeName(e) {\n      this.name = e.target.value\n    },\n    delImg(item, index) {\n      if (this.isEditMode && item.image_id) {\n        this.product_images_del.push(item.image_id)\n      }\n      this.imgList.splice(index, 1)\n    },\n    addSku() {\n      this.skuList.push({\n        spec_name: '',\n        spec_item_name: [],\n        isErr: false,\n        isNameErr: false\n      })\n    },\n    addSkuItem(index) {\n      this.$modalRouter.push({\n        name: 'store-add-sku',\n        props: { list: this.skuList[index].spec_item_name },\n        on: {\n          success: result => {\n            this.skuList[index].spec_item_name.push(result)\n            this.changeTable()\n          }\n        }\n      })\n    },\n\n    delSkuItem(index, i) {\n      this.skuList[index].spec_item_name.splice(i, 1)\n      this.changeTable()\n    },\n    delSku(index) {\n      this.skuList.splice(index, 1)\n      if (!this.skuList.length) {\n        this.isMore = 1\n        this.tableData = [\n          {\n            market_price: '',\n            selling_price: '',\n            stock_amount: '',\n            key: parseInt(Math.random() * 999999).toString()\n          }\n        ]\n      }\n    },\n    getImageUrl(imageUrl) {\n      const imgEl = `<img src='${imageUrl.url}' width='400' height='400'>`\n      this.content = this.content + imgEl\n    },\n    onChangeEditor() {\n      this.isEditor = this.content.length === 0\n      return this.content.length === 0\n    },\n    getImage(data) {\n      let img = {\n        image_id: data[0].image_id,\n        image_key: data[0].image_key,\n        image_url: data[0].image_url,\n        is_cover: 0\n      }\n      this.imgList.push(img)\n      if (this.isEditMode) {\n        img.isNew = true\n      }\n      this.isImgError = false\n      this.fileList = []\n    },\n    // 规格发生改变时列表数据相应改变\n    changeTable() {\n      let list = []\n      let skuList = []\n      this.skuList.forEach((item, index) => {\n        if (item.spec_item_name.length !== 0) {\n          skuList.push(item)\n        }\n      })\n      skuList[0].spec_item_name.forEach((item, index) => {\n        let skuItem = { market_price: '', selling_price: '', stock_amount: '' }\n        skuItem['0'] = item\n        if (skuList[1] && skuList[1].spec_item_name.length) {\n          skuList[1].spec_item_name.forEach((ite, inde) => {\n            skuItem['1'] = ite\n            if (skuList[2] && skuList[2].spec_item_name.length) {\n              skuList[2].spec_item_name.forEach((it, ind) => {\n                skuItem['2'] = it\n                list.push(cloneDeep(skuItem))\n              })\n            } else {\n              list.push(cloneDeep(skuItem))\n            }\n          })\n        } else {\n          list.push(cloneDeep(skuItem))\n        }\n      })\n      list.forEach(o => {\n        o.key = parseInt(Math.random() * 999999).toString()\n      })\n      this.tableData = list\n      console.log(this.tableData, 'tableDatatableData')\n    },\n    openClass() {\n      this.$modalRouter.push({\n        name: 'store-class-manage',\n        props: { shopList: 1 },\n        on: {\n          success: res => {\n            this.addService.getList().subscribe(res => {\n              this.classList = res.list\n              let data = this.form.getFieldsValue()\n              if (!this.classList.some(item => item.id === data.category_id)) {\n                this.form.setFieldsValue({ category_id: '' })\n              }\n            })\n          }\n        }\n      })\n    },\n    changeMore() {\n      this.skuList = []\n      this.tableData = [\n        {\n          market_price: '',\n          selling_price: '',\n          stock_amount: '',\n          key: parseInt(Math.random() * 999999).toString()\n        }\n      ]\n    },\n    allApply(attr, value) {\n      this.tableData.map(item => (item[attr] = value))\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/pages/shop/store"}]}