{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/setting/mina/pay-config.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/setting/mina/pay-config.vue","mtime":1600912107009},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { PayConfigService } from \"./pay-config.service\";\nimport PemUploadComponent from \"./components#/pem-upload.component\";\nexport default {\n  bem: {\n    pay: 'brand-setting-mina-pay-config'\n  },\n  serviceInject: function serviceInject() {\n    return {\n      payConfigService: PayConfigService\n    };\n  },\n  components: {\n    PemUploadComponent: PemUploadComponent\n  },\n  data: function data() {\n    return {\n      form: this.$form.createForm(this),\n      payConfig: {\n        mch_name: ['mch_name', {\n          rules: [{\n            required: true,\n            message: '请填写商户名称'\n          }]\n        }],\n        mch_id: ['mch_id', {\n          rules: [{\n            required: true,\n            message: '请填写微信商户号'\n          }]\n        }],\n        key: ['key', {\n          rules: [{\n            required: true,\n            message: '请填写API密钥'\n          }]\n        }],\n        cert_pem: ['cert_pem'],\n        key_pem: ['key_pem']\n      }\n    };\n  },\n  methods: {\n    uploadPemSuccess: function uploadPemSuccess(key) {\n      this.form.setFieldsValue({\n        cert_pem: key\n      });\n    },\n    uploadSecretKeySuccess: function uploadSecretKeySuccess(key) {\n      this.form.setFieldsValue({\n        key_pem: key\n      });\n    },\n    trim: function trim(str) {\n      return str.replace(/(^\\s*)|(\\s*$)/g, '');\n    },\n    save: function save() {\n      var _this = this;\n\n      var self = this;\n      this.form.validateFields(function (err, values) {\n        if (!err) {\n          values.mch_name = _this.trim(values.mch_name);\n          values.mch_id = _this.trim(values.mch_id);\n          values.key = _this.trim(values.key);\n          self.payConfigService.saveMch(values).subscribe(function () {\n            self.$router.push({\n              path: '/brand/setting/mina/auth-callback?type=payConfig'\n            });\n          });\n        }\n      });\n    },\n    back: function back() {\n      this.$router.back();\n    },\n    skip: function skip() {\n      this.$router.push({\n        name: 'brand-setting-mina-index'\n      });\n    }\n  }\n};",{"version":3,"sources":["pay-config.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA,SAAA,gBAAA;AACA,OAAA,kBAAA;AACA,eAAA;AACA,EAAA,GAAA,EAAA;AACA,IAAA,GAAA,EAAA;AADA,GADA;AAIA,EAAA,aAJA,2BAIA;AACA,WAAA;AACA,MAAA,gBAAA,EAAA;AADA,KAAA;AAGA,GARA;AASA,EAAA,UAAA,EAAA;AACA,IAAA,kBAAA,EAAA;AADA,GATA;AAYA,EAAA,IAZA,kBAYA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,KAAA,KAAA,CAAA,UAAA,CAAA,IAAA,CADA;AAEA,MAAA,SAAA,EAAA;AACA,QAAA,QAAA,EAAA,CACA,UADA,EAEA;AACA,UAAA,KAAA,EAAA,CACA;AACA,YAAA,QAAA,EAAA,IADA;AAEA,YAAA,OAAA,EAAA;AAFA,WADA;AADA,SAFA,CADA;AAYA,QAAA,MAAA,EAAA,CACA,QADA,EAEA;AACA,UAAA,KAAA,EAAA,CACA;AACA,YAAA,QAAA,EAAA,IADA;AAEA,YAAA,OAAA,EAAA;AAFA,WADA;AADA,SAFA,CAZA;AAuBA,QAAA,GAAA,EAAA,CACA,KADA,EAEA;AACA,UAAA,KAAA,EAAA,CACA;AACA,YAAA,QAAA,EAAA,IADA;AAEA,YAAA,OAAA,EAAA;AAFA,WADA;AADA,SAFA,CAvBA;AAkCA,QAAA,QAAA,EAAA,CAAA,UAAA,CAlCA;AAmCA,QAAA,OAAA,EAAA,CAAA,SAAA;AAnCA;AAFA,KAAA;AAwCA,GArDA;AAsDA,EAAA,OAAA,EAAA;AACA,IAAA,gBADA,4BACA,GADA,EACA;AACA,WAAA,IAAA,CAAA,cAAA,CAAA;AACA,QAAA,QAAA,EAAA;AADA,OAAA;AAGA,KALA;AAMA,IAAA,sBANA,kCAMA,GANA,EAMA;AACA,WAAA,IAAA,CAAA,cAAA,CAAA;AACA,QAAA,OAAA,EAAA;AADA,OAAA;AAGA,KAVA;AAWA,IAAA,IAXA,gBAWA,GAXA,EAWA;AACA,aAAA,GAAA,CAAA,OAAA,CAAA,gBAAA,EAAA,EAAA,CAAA;AACA,KAbA;AAcA,IAAA,IAdA,kBAcA;AAAA;;AACA,UAAA,IAAA,GAAA,IAAA;AACA,WAAA,IAAA,CAAA,cAAA,CAAA,UAAA,GAAA,EAAA,MAAA,EAAA;AACA,YAAA,CAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,GAAA,KAAA,CAAA,IAAA,CAAA,MAAA,CAAA,QAAA,CAAA;AACA,UAAA,MAAA,CAAA,MAAA,GAAA,KAAA,CAAA,IAAA,CAAA,MAAA,CAAA,MAAA,CAAA;AACA,UAAA,MAAA,CAAA,GAAA,GAAA,KAAA,CAAA,IAAA,CAAA,MAAA,CAAA,GAAA,CAAA;AACA,UAAA,IAAA,CAAA,gBAAA,CAAA,OAAA,CAAA,MAAA,EAAA,SAAA,CAAA,YAAA;AACA,YAAA,IAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,cAAA,IAAA,EAAA;AADA,aAAA;AAGA,WAJA;AAKA;AACA,OAXA;AAYA,KA5BA;AA6BA,IAAA,IA7BA,kBA6BA;AACA,WAAA,OAAA,CAAA,IAAA;AACA,KA/BA;AAgCA,IAAA,IAhCA,kBAgCA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA;AADA,OAAA;AAGA;AApCA;AAtDA,CAAA","sourcesContent":["<template>\n  <st-panel app :class=\"pay()\">\n    <div :class=\"pay('shadowbox')\">\n      <div :class=\"pay('skip')\" @click=\"skip\">\n        跳过，下次配置\n        <st-icon type=\"right-small\" size=\"14px\"></st-icon>\n      </div>\n      <st-form :form=\"form\">\n        <st-form-item label=\"商户名称\" required>\n          <a-input placeholder=\"请输入\" v-decorator=\"payConfig.mch_name\" />\n          <a\n            class=\"fz12\"\n            target=\"_blank\"\n            href=\"https://help.styd.cn/docs/merchant_name.html\"\n          >\n            如何获取微信商户名称？\n          </a>\n        </st-form-item>\n        <st-form-item label=\"微信商户号\" required>\n          <a-input placeholder=\"请输入\" v-decorator=\"payConfig.mch_id\" />\n          <a\n            class=\"fz12\"\n            target=\"_blank\"\n            href=\"https://help.styd.cn/docs/merchant_number.html\"\n          >\n            如何获取微信商户号？\n          </a>\n        </st-form-item>\n        <st-form-item label=\"API密钥\" required>\n          <a-input placeholder=\"请输入\" v-decorator=\"payConfig.key\" />\n          <a\n            class=\"fz12\"\n            target=\"_blank\"\n            href=\"https://help.styd.cn/docs/merchant_secretkey.html\"\n          >\n            如何取微信商户API密钥？\n          </a>\n        </st-form-item>\n        <st-form-item label=\"证书\" required>\n          <pem-upload-component\n            @success=\"uploadPemSuccess\"\n          ></pem-upload-component>\n          <a-input v-show=\"false\" v-decorator=\"payConfig.cert_pem\" />\n          <div class=\"fz12\">\n            仅支持.pem格式文件，大小不超过5M，\n            <a\n              target=\"_blank\"\n              href=\"https://help.styd.cn/docs/api_certificate.html\"\n            >\n              如何获取证书？\n            </a>\n          </div>\n        </st-form-item>\n        <st-form-item label=\"证书秘钥\" required>\n          <pem-upload-component\n            @success=\"uploadSecretKeySuccess\"\n          ></pem-upload-component>\n          <a-input v-show=\"false\" v-decorator=\"payConfig.key_pem\" />\n          <div class=\"fz12\">\n            仅支持.pem格式文件，大小不超过5M，\n            <a\n              href=\"https://help.styd.cn/docs/api_certificate.html\"\n              target=\"_blank\"\n            >\n              如何获取证书秘钥？\n            </a>\n          </div>\n        </st-form-item>\n        <st-form-item labelFix>\n          <st-button @click=\"back\" :class=\"pay('back')\">上一步</st-button>\n          <st-button type=\"primary\" @click=\"save\">提交</st-button>\n        </st-form-item>\n      </st-form>\n    </div>\n  </st-panel>\n</template>\n\n<script>\nimport { PayConfigService } from './pay-config.service'\nimport PemUploadComponent from './components#/pem-upload.component'\nexport default {\n  bem: {\n    pay: 'brand-setting-mina-pay-config'\n  },\n  serviceInject() {\n    return {\n      payConfigService: PayConfigService\n    }\n  },\n  components: {\n    PemUploadComponent\n  },\n  data() {\n    return {\n      form: this.$form.createForm(this),\n      payConfig: {\n        mch_name: [\n          'mch_name',\n          {\n            rules: [\n              {\n                required: true,\n                message: '请填写商户名称'\n              }\n            ]\n          }\n        ],\n        mch_id: [\n          'mch_id',\n          {\n            rules: [\n              {\n                required: true,\n                message: '请填写微信商户号'\n              }\n            ]\n          }\n        ],\n        key: [\n          'key',\n          {\n            rules: [\n              {\n                required: true,\n                message: '请填写API密钥'\n              }\n            ]\n          }\n        ],\n        cert_pem: ['cert_pem'],\n        key_pem: ['key_pem']\n      }\n    }\n  },\n  methods: {\n    uploadPemSuccess(key) {\n      this.form.setFieldsValue({\n        cert_pem: key\n      })\n    },\n    uploadSecretKeySuccess(key) {\n      this.form.setFieldsValue({\n        key_pem: key\n      })\n    },\n    trim(str) {\n      return str.replace(/(^\\s*)|(\\s*$)/g, '')\n    },\n    save() {\n      let self = this\n      this.form.validateFields((err, values) => {\n        if (!err) {\n          values.mch_name = this.trim(values.mch_name)\n          values.mch_id = this.trim(values.mch_id)\n          values.key = this.trim(values.key)\n          self.payConfigService.saveMch(values).subscribe(() => {\n            self.$router.push({\n              path: '/brand/setting/mina/auth-callback?type=payConfig'\n            })\n          })\n        }\n      })\n    },\n    back() {\n      this.$router.back()\n    },\n    skip() {\n      this.$router.push({\n        name: 'brand-setting-mina-index'\n      })\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/pages/brand/setting/mina"}]}