{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/marketing/add-signup.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/marketing/add-signup.vue","mtime":1600926555861},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { ruleOptions } from './add-signup.config'\nimport { PatternService } from '@/services/pattern.service'\nimport { MessageService } from '@/services/message.service'\nconst uuidv1 = require('uuid/v1')\nexport default {\n  name: 'ModalAddTicket',\n  bem: {\n    bModal: 'modal-marketing-add-signup'\n  },\n  serviceInject() {\n    return {\n      pattern: PatternService,\n      msg: MessageService\n    }\n  },\n  data() {\n    const form = this.$stForm.create()\n    const decorators = form.decorators(ruleOptions)\n    return {\n      extraTypeList: ['text', 'textarea', 'radio', 'checkbox'],\n      form,\n      decorators,\n      show: false,\n      ticketType: 1,\n      option: '',\n      extraType: 1,\n      extra_info: []\n    }\n  },\n  props: {\n    modalTitle: {\n      type: String,\n      default: '报名信息设置'\n    },\n    extra_sort: Number,\n    signUpList: {\n      type: Array,\n      default: () => []\n    }\n  },\n  computed: {\n    isShowSignUp() {\n      return this.extraType === 2 || this.extraType === 3\n    }\n  },\n  methods: {\n    onCLickDelOption(value) {\n      this.extra_info = this.extra_info.filter(item => item !== value)\n    },\n    onCLickGetOption() {\n      if (this.extra_info.length >= 10) {\n        this.msg.error({ content: '报名的选项最多新增10个选项值' })\n        return\n      }\n      if (!this.option) {\n        this.msg.error({ content: '报名选项不能为空' })\n        return\n      }\n      if (!this.pattern.CN_EN_NUM('1-15').test(this.option)) {\n        this.msg.error({ content: '请输入1~15个字符' })\n        return\n      }\n      if (!this.extra_info.includes(this.option)) {\n        this.extra_info.push(this.option)\n        this.option = ''\n      } else {\n        this.msg.error({ content: '选项重复,请重新填写' })\n      }\n    },\n    onChangeExtraType(e) {\n      this.extraType = e.target.value\n    },\n    isUniq(name) {\n      let bool = false\n      this.signUpList.forEach(item => {\n        bool = item.extra_name === name\n      })\n      return bool\n    },\n    onSubmit() {\n      this.form.validate().then(values => {\n        if (this.isUniq(values.extra_name)) {\n          this.msg.error({ content: '标题名重复请重新填写' })\n          return\n        }\n        this.show = false\n        const obj = {\n          extra_name: values.extra_name,\n          extra_require: values.extra_require,\n          extra_default_value: '',\n          extra_sort: this.extra_sort,\n          extra_info: this.extra_info,\n          extra_type: this.extraTypeList[values.extra_type],\n          extra_key: uuidv1(values)\n        }\n        this.$emit('show', obj)\n        this.$emit('submit', obj)\n      })\n    }\n  }\n}\n",{"version":3,"sources":["add-signup.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"add-signup.vue","sourceRoot":"src/views/biz-modals/marketing","sourcesContent":["<template>\n  <st-modal :title=\"modalTitle\" width=\"568px\" v-model=\"show\">\n    <div :class=\"bModal()\">\n      <st-form :form=\"form\">\n        <st-form-item label=\"报名标题\">\n          <a-input\n            placeholder=\"请输入报名项\"\n            v-decorator=\"decorators.extra_name\"\n          ></a-input>\n        </st-form-item>\n        <st-form-item label=\"报名类型\">\n          <a-radio-group\n            @change=\"onChangeExtraType\"\n            v-decorator=\"decorators.extra_type\"\n          >\n            <a-radio :value=\"0\">单行文本</a-radio>\n            <a-radio :value=\"1\">多行文本</a-radio>\n            <a-radio :value=\"2\">单选</a-radio>\n            <a-radio :value=\"3\">多选</a-radio>\n          </a-radio-group>\n        </st-form-item>\n        <st-form-item v-if=\"isShowSignUp\" label=\"报名选项\">\n          <a-input-group compact>\n            <a-input\n              v-model=\"option\"\n              style=\"width: 80%\"\n              placeholder=\"请填写报名选项\"\n            />\n            <st-button @click=\"onCLickGetOption\">新增</st-button>\n          </a-input-group>\n          <div class=\"option-group-wrap\">\n            <div\n              size=\"small\"\n              :key=\"index\"\n              class=\"mg-r8 option-tip\"\n              v-for=\"(item, index) in extra_info\"\n            >\n              <span class=\"tip\">{{ item }}</span>\n              <span class=\"mg-l8\" @click=\"onCLickDelOption(item)\">x</span>\n            </div>\n          </div>\n        </st-form-item>\n        <st-form-item class=\"mg-b0\" label=\"是否必填\">\n          <a-radio-group v-decorator=\"decorators.extra_require\">\n            <a-radio :value=\"1\">是</a-radio>\n            <a-radio :value=\"2\">否</a-radio>\n          </a-radio-group>\n        </st-form-item>\n      </st-form>\n    </div>\n    <template slot=\"footer\">\n      <st-button @click=\"show = false\">取消</st-button>\n      <st-button @click=\"onSubmit\" type=\"primary\">\n        确定\n      </st-button>\n    </template>\n  </st-modal>\n</template>\n<script>\nimport { ruleOptions } from './add-signup.config'\nimport { PatternService } from '@/services/pattern.service'\nimport { MessageService } from '@/services/message.service'\nconst uuidv1 = require('uuid/v1')\nexport default {\n  name: 'ModalAddTicket',\n  bem: {\n    bModal: 'modal-marketing-add-signup'\n  },\n  serviceInject() {\n    return {\n      pattern: PatternService,\n      msg: MessageService\n    }\n  },\n  data() {\n    const form = this.$stForm.create()\n    const decorators = form.decorators(ruleOptions)\n    return {\n      extraTypeList: ['text', 'textarea', 'radio', 'checkbox'],\n      form,\n      decorators,\n      show: false,\n      ticketType: 1,\n      option: '',\n      extraType: 1,\n      extra_info: []\n    }\n  },\n  props: {\n    modalTitle: {\n      type: String,\n      default: '报名信息设置'\n    },\n    extra_sort: Number,\n    signUpList: {\n      type: Array,\n      default: () => []\n    }\n  },\n  computed: {\n    isShowSignUp() {\n      return this.extraType === 2 || this.extraType === 3\n    }\n  },\n  methods: {\n    onCLickDelOption(value) {\n      this.extra_info = this.extra_info.filter(item => item !== value)\n    },\n    onCLickGetOption() {\n      if (this.extra_info.length >= 10) {\n        this.msg.error({ content: '报名的选项最多新增10个选项值' })\n        return\n      }\n      if (!this.option) {\n        this.msg.error({ content: '报名选项不能为空' })\n        return\n      }\n      if (!this.pattern.CN_EN_NUM('1-15').test(this.option)) {\n        this.msg.error({ content: '请输入1~15个字符' })\n        return\n      }\n      if (!this.extra_info.includes(this.option)) {\n        this.extra_info.push(this.option)\n        this.option = ''\n      } else {\n        this.msg.error({ content: '选项重复,请重新填写' })\n      }\n    },\n    onChangeExtraType(e) {\n      this.extraType = e.target.value\n    },\n    isUniq(name) {\n      let bool = false\n      this.signUpList.forEach(item => {\n        bool = item.extra_name === name\n      })\n      return bool\n    },\n    onSubmit() {\n      this.form.validate().then(values => {\n        if (this.isUniq(values.extra_name)) {\n          this.msg.error({ content: '标题名重复请重新填写' })\n          return\n        }\n        this.show = false\n        const obj = {\n          extra_name: values.extra_name,\n          extra_require: values.extra_require,\n          extra_default_value: '',\n          extra_sort: this.extra_sort,\n          extra_info: this.extra_info,\n          extra_type: this.extraTypeList[values.extra_type],\n          extra_key: uuidv1(values)\n        }\n        this.$emit('show', obj)\n        this.$emit('submit', obj)\n      })\n    }\n  }\n}\n</script>\n"]}]}