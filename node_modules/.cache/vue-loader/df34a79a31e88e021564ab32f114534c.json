{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/brand/marketing/download-qrcode.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/brand/marketing/download-qrcode.vue","mtime":1600926555827},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { ShsService } from '@/services/shs.service'\n\nexport default {\n  name: 'BrandMarketingDownloadQrcode',\n  bem: {\n    basic: 'brand-marketing-download-qrcode'\n  },\n  serviceInject() {\n    return {\n      shsService: ShsService\n    }\n  },\n  props: {\n    url: String,\n    name: String,\n    title: String,\n    subTitle: String\n  },\n  data() {\n    return {\n      posterUrl: '',\n      show: false\n    }\n  },\n  created() {\n    let shsData = {\n      title: this.title,\n      sub_title: this.subTitle,\n      name: this.name,\n      qrcode_url: this.url\n    }\n    this.shsService\n      .getShsImage(shsData, '/saas/activity_qrcode')\n      .subscribe(res => {\n        this.posterUrl = res\n      })\n  },\n  methods: {\n    downloadFile(url, filename = '') {\n      fetch(url, {\n        headers: new Headers({\n          Origin: location.origin\n        }),\n        mode: 'cors'\n      })\n        .then(res => res.blob())\n        .then(blob => {\n          const blobUrl = window.URL.createObjectURL(blob)\n          this.download(blobUrl, filename)\n          window.URL.revokeObjectURL(blobUrl)\n        })\n    },\n    download(blobUrl, filename) {\n      const a = document.createElement('a')\n      a.href = blobUrl\n      a.target = '_blank'\n      a.download = filename\n      document.body.appendChild(a)\n      a.click()\n      a.remove()\n    }\n  }\n}\n",{"version":3,"sources":["download-qrcode.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"download-qrcode.vue","sourceRoot":"src/views/biz-modals/brand/marketing","sourcesContent":["<template>\n  <st-modal title=\"推广码\" v-model=\"show\" width=\"400px\" :footer=\"null\">\n    <div :class=\"basic()\">\n      <st-image :src=\"posterUrl\" :class=\"basic('qrcode')\"></st-image>\n      <div :class=\"basic('btn-group')\">\n        <st-button\n          :class=\"basic('button')\"\n          @click=\"downloadFile(url, 'qrcode.png')\"\n        >\n          下载小程序码\n        </st-button>\n        <st-button\n          type=\"primary\"\n          :class=\"basic('button')\"\n          @click=\"downloadFile(posterUrl, 'qrcode.png')\"\n        >\n          下载推广海报\n        </st-button>\n      </div>\n    </div>\n  </st-modal>\n</template>\n<script>\nimport { ShsService } from '@/services/shs.service'\n\nexport default {\n  name: 'BrandMarketingDownloadQrcode',\n  bem: {\n    basic: 'brand-marketing-download-qrcode'\n  },\n  serviceInject() {\n    return {\n      shsService: ShsService\n    }\n  },\n  props: {\n    url: String,\n    name: String,\n    title: String,\n    subTitle: String\n  },\n  data() {\n    return {\n      posterUrl: '',\n      show: false\n    }\n  },\n  created() {\n    let shsData = {\n      title: this.title,\n      sub_title: this.subTitle,\n      name: this.name,\n      qrcode_url: this.url\n    }\n    this.shsService\n      .getShsImage(shsData, '/saas/activity_qrcode')\n      .subscribe(res => {\n        this.posterUrl = res\n      })\n  },\n  methods: {\n    downloadFile(url, filename = '') {\n      fetch(url, {\n        headers: new Headers({\n          Origin: location.origin\n        }),\n        mode: 'cors'\n      })\n        .then(res => res.blob())\n        .then(blob => {\n          const blobUrl = window.URL.createObjectURL(blob)\n          this.download(blobUrl, filename)\n          window.URL.revokeObjectURL(blobUrl)\n        })\n    },\n    download(blobUrl, filename) {\n      const a = document.createElement('a')\n      a.href = blobUrl\n      a.target = '_blank'\n      a.download = filename\n      document.body.appendChild(a)\n      a.click()\n      a.remove()\n    }\n  }\n}\n</script>\n"]}]}