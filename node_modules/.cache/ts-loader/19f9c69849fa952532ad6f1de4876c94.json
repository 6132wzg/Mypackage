{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/ts-loader/index.js??ref--13-2!/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/package/form/form.service.ts","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/package/form/form.service.ts","mtime":1600926555706},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/ts-loader/index.js","mtime":1591062571609}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _classCallCheck from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\n\nvar _a, _b;\n\nimport { __decorate, __metadata } from \"tslib\";\nimport { UserService } from '@/services/user.service';\nimport { State } from 'rx-state';\nimport { Injectable } from 'vue-service-app';\nimport { map, tap } from 'rxjs/operators';\nimport { CommonPackageApi } from '@/api/v1/package/common';\n\nvar FormService = /*#__PURE__*/function () {\n  function FormService(userService, commonApi) {\n    _classCallCheck(this, FormService);\n\n    this.userService = userService;\n    this.commonApi = commonApi;\n    this.cardBgList$ = this.userService.getOptions$('package_course.package_bg_list'); // 课程包类型\n\n    this.packageTypeOptions$ = this.userService.getOptions$('package_course.is_limit'); // 课程包属性\n\n    this.packageAttrOptions$ = this.userService.getOptions$('package_course.package_type').pipe(map(function (res) {\n      var tooltips = ['RYKCB001', 'FWKCB001', 'GDKCB001'];\n      res = res.map(function (item, index) {\n        item.tooltip = tooltips[index];\n        return item;\n      });\n      return res;\n    })); // 时间单位 年月日\n\n    this.freezeUnitOptions$ = this.userService.getOptions$('package_course.valid_time_unit'); // 时间单位 年月日\n\n    this.reserveLimitDayOptions$ = this.userService.getOptions$('package_course.reserve_limit_day').pipe(map(function (res) {\n      return res.map(function (item) {\n        item.label = item.label.includes('每') ? item.label : \"\\u6BCF\".concat(item.label, \"\\u6700\\u591A\\u7EA6\");\n        return item;\n      });\n    }));\n    this.coachList$ = new State([]);\n    this.isShop$ = this.userService.isShop$;\n    this.shop$ = this.userService.shop$; // 售卖方式\n\n    this.sellTypeOptions$ = this.userService.getOptions$('package_course.sale_mode');\n    this.transferUnitOptions$ = this.userService.getOptions$('package_course.transfer_unit');\n  }\n\n  _createClass(FormService, [{\n    key: \"getCoachList\",\n    value: function getCoachList() {\n      var _this = this;\n\n      return this.commonApi.getCoachList().pipe(tap(function (res) {\n        _this.coachList$.commit(function () {\n          return res.list.map(function (item) {\n            return {\n              label: item.setting_name,\n              value: item.id\n            };\n          });\n        });\n      }));\n    }\n  }]);\n\n  return FormService;\n}();\n\nFormService = __decorate([Injectable(), __metadata(\"design:paramtypes\", [typeof (_a = typeof UserService !== \"undefined\" && UserService) === \"function\" ? _a : Object, typeof (_b = typeof CommonPackageApi !== \"undefined\" && CommonPackageApi) === \"function\" ? _b : Object])], FormService);\nexport { FormService };",{"version":3,"sources":["/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/package/form/form.service.ts"],"names":[],"mappings":";;;;;;;;AAAA,SAAS,WAAT,QAA4B,yBAA5B;AACA,SAAS,KAAT,QAAsB,UAAtB;AACA,SAAS,UAAT,QAA2B,iBAA3B;AACA,SAAS,GAAT,EAAc,GAAd,QAAyB,gBAAzB;AACA,SAAS,gBAAT,QAAiC,yBAAjC;;AAEA,IAAa,WAAb;AA2CE,uBACU,WADV,EAEU,SAFV,EAEqC;AAAA;;AAD3B,SAAA,WAAA,GAAA,WAAA;AACA,SAAA,SAAA,GAAA,SAAA;AA5CV,SAAA,WAAA,GAAc,KAAK,WAAL,CAAiB,WAAjB,CAA6B,gCAA7B,CAAd,CA4CqC,CA3CrC;;AACA,SAAA,mBAAA,GAAsB,KAAK,WAAL,CAAiB,WAAjB,CAA6B,yBAA7B,CAAtB,CA0CqC,CAzCrC;;AACA,SAAA,mBAAA,GAAsB,KAAK,WAAL,CACnB,WADmB,CACP,6BADO,EAEnB,IAFmB,CAGlB,GAAG,CAAC,UAAA,GAAG,EAAG;AACR,UAAI,QAAQ,GAAG,CAAC,UAAD,EAAa,UAAb,EAAyB,UAAzB,CAAf;AACA,MAAA,GAAG,GAAG,GAAG,CAAC,GAAJ,CAAQ,UAAC,IAAD,EAAY,KAAZ,EAAqB;AACjC,QAAA,IAAI,CAAC,OAAL,GAAe,QAAQ,CAAC,KAAD,CAAvB;AACA,eAAO,IAAP;AACD,OAHK,CAAN;AAIA,aAAO,GAAP;AACD,KAPE,CAHe,CAAtB,CAwCqC,CA5BrC;;AACA,SAAA,kBAAA,GAAqB,KAAK,WAAL,CAAiB,WAAjB,CACnB,gCADmB,CAArB,CA2BqC,CAxBrC;;AACA,SAAA,uBAAA,GAA0B,KAAK,WAAL,CACvB,WADuB,CACX,kCADW,EAEvB,IAFuB,CAGtB,GAAG,CAAC,UAAA,GAAG,EAAG;AACR,aAAO,GAAG,CAAC,GAAJ,CAAQ,UAAA,IAAI,EAAG;AACpB,QAAA,IAAI,CAAC,KAAL,GAAa,IAAI,CAAC,KAAL,CAAW,QAAX,CAAoB,GAApB,IACT,IAAI,CAAC,KADI,mBAEL,IAAI,CAAC,KAFA,uBAAb;AAGA,eAAO,IAAP;AACD,OALM,CAAP;AAMD,KAPE,CAHmB,CAA1B;AAYA,SAAA,UAAA,GAAa,IAAI,KAAJ,CAAU,EAAV,CAAb;AACA,SAAA,OAAA,GAAU,KAAK,WAAL,CAAiB,OAA3B;AACA,SAAA,KAAA,GAAQ,KAAK,WAAL,CAAiB,KAAzB,CASqC,CAPrC;;AACA,SAAA,gBAAA,GAAmB,KAAK,WAAL,CAAiB,WAAjB,CAA6B,0BAA7B,CAAnB;AACA,SAAA,oBAAA,GAAuB,KAAK,WAAL,CAAiB,WAAjB,CACrB,8BADqB,CAAvB;AAMI;;AA9CN;AAAA;AAAA,mCA+Cc;AAAA;;AACV,aAAO,KAAK,SAAL,CAAe,YAAf,GAA8B,IAA9B,CACL,GAAG,CAAC,UAAC,GAAD,EAAa;AACf,QAAA,KAAI,CAAC,UAAL,CAAgB,MAAhB,CAAuB;AAAA,iBACrB,GAAG,CAAC,IAAJ,CAAS,GAAT,CAAa,UAAA,IAAI,EAAG;AAClB,mBAAO;AACL,cAAA,KAAK,EAAE,IAAI,CAAC,YADP;AAEL,cAAA,KAAK,EAAE,IAAI,CAAC;AAFP,aAAP;AAID,WALD,CADqB;AAAA,SAAvB;AAQD,OATE,CADE,CAAP;AAYD;AA5DH;;AAAA;AAAA,GAAA;;AAAa,WAAW,GAAA,UAAA,CAAA,CADvB,UAAU,EACa,E,qDA4CC,W,KAAW,W,IAAX,W,MAAW,U,GAAA,E,GAAA,M,EAAA,QAAA,EAAA,GAAA,OACb,gBADa,KACG,WADH,IACb,gBADa,MACG,UADH,GACG,EADH,GACG,M,EA7Cf,CAAA,EAAX,WAAW,CAAX;SAAA,W","sourcesContent":["import { UserService } from '@/services/user.service'\nimport { State } from 'rx-state'\nimport { Injectable } from 'vue-service-app'\nimport { map, tap } from 'rxjs/operators'\nimport { CommonPackageApi } from '@/api/v1/package/common'\n@Injectable()\nexport class FormService {\n  cardBgList$ = this.userService.getOptions$('package_course.package_bg_list')\n  // 课程包类型\n  packageTypeOptions$ = this.userService.getOptions$('package_course.is_limit')\n  // 课程包属性\n  packageAttrOptions$ = this.userService\n    .getOptions$('package_course.package_type')\n    .pipe(\n      map(res => {\n        let tooltips = ['RYKCB001', 'FWKCB001', 'GDKCB001']\n        res = res.map((item: any, index) => {\n          item.tooltip = tooltips[index]\n          return item\n        })\n        return res\n      })\n    )\n  // 时间单位 年月日\n  freezeUnitOptions$ = this.userService.getOptions$(\n    'package_course.valid_time_unit'\n  )\n  // 时间单位 年月日\n  reserveLimitDayOptions$ = this.userService\n    .getOptions$('package_course.reserve_limit_day')\n    .pipe(\n      map(res => {\n        return res.map(item => {\n          item.label = item.label.includes('每')\n            ? item.label\n            : `每${item.label}最多约`\n          return item\n        })\n      })\n    )\n  coachList$ = new State([])\n  isShop$ = this.userService.isShop$\n  shop$ = this.userService.shop$\n\n  // 售卖方式\n  sellTypeOptions$ = this.userService.getOptions$('package_course.sale_mode')\n  transferUnitOptions$ = this.userService.getOptions$(\n    'package_course.transfer_unit'\n  )\n  constructor(\n    private userService: UserService,\n    private commonApi: CommonPackageApi\n  ) {}\n  getCoachList() {\n    return this.commonApi.getCoachList().pipe(\n      tap((res: any) => {\n        this.coachList$.commit(() =>\n          res.list.map(item => {\n            return {\n              label: item.setting_name,\n              value: item.id\n            }\n          })\n        )\n      })\n    )\n  }\n}\n"],"sourceRoot":""}]}