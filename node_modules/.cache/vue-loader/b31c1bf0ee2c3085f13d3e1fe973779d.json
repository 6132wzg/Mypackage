{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/setting/sms/components#/shop-notice-item.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/setting/sms/components#/shop-notice-item.vue","mtime":1591147717359},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { NOTIFY_SHOP_SUB_TYPE } from '@/constants/setting/sms'\nconst componentName = 'notice-item'\nexport default {\n  name: 'NoticeItem',\n  bem: {\n    bComponent: componentName,\n    bShop: `shop-${componentName}`\n  },\n  computed: {\n    isPc() {\n      return [\n        this.NOTIFY_SHOP_SUB_TYPE.MEMBER_ENTRANCE_SUCCESS,\n        this.NOTIFY_SHOP_SUB_TYPE.BATCH_OPERATE\n      ].includes(this.info.notify_sub_type.value)\n    }\n  },\n  data() {\n    return {\n      isShowEdit: 0,\n      NOTIFY_SHOP_SUB_TYPE,\n      isShowPhone: false, // 默认不展示输入手机号\n      params: {\n        id: '',\n        msg_suffix: '',\n        msg_preffix: '',\n        custom_phone: '',\n        course_type: {\n          team_course: {\n            value: 0,\n            name: '团课'\n          },\n          personal_course: {\n            value: 0,\n            name: '私教课'\n          },\n          small_course: {\n            value: 0,\n            name: this.$c('small_course')\n          }\n        },\n        order_type: {\n          advance: {\n            value: 0,\n            name: '定金'\n          },\n          deposit: {\n            value: 0,\n            name: '押金'\n          },\n          product: {\n            value: 0,\n            name: '商品'\n          },\n          poundage: {\n            value: 0,\n            name: '手续费'\n          }\n        },\n        receiver: {\n          coach: {\n            value: 0,\n            name: this.$c('coach')\n          },\n          member: {\n            value: 0,\n            name: '会员'\n          },\n          seller: {\n            value: 0,\n            name: '销售'\n          },\n          operator: {\n            value: 0,\n            name: '操作人'\n          },\n          custom: {\n            value: 0,\n            name: '自定义'\n          },\n          leader: {\n            value: 0,\n            name: '负责人'\n          }\n        },\n        notify_time: '',\n        notify_number: '',\n        notify_mode: {\n          sms: 0,\n          app: 0,\n          mini_programs: 0\n        }\n      }\n    }\n  },\n  props: {\n    info: {\n      type: Object,\n      default: () => {}\n    }\n  },\n  created() {\n    if (Object.keys(this.info.order_type).length > 0) {\n      this.params.order_type = this.info.order_type\n    }\n    if (Object.keys(this.info.course_type).length > 0) {\n      this.params.course_type = this.info.course_type\n    }\n    if (Object.keys(this.info.receiver).length > 0) {\n      this.params.receiver = this.info.receiver\n    }\n    this.params.notify_time = this.info.notify_time.value\n    this.params.notify_number = this.info.notify_number\n    this.params.msg_preffix = this.info.msg_preffix\n    this.params.msg_suffix = this.info.msg_suffix\n    this.params.custom_phone = this.info.custom_phone\n    this.params.notify_mode = {\n      sms: this.info.notify_mode.sms && this.info.notify_mode.sms.value,\n      app: this.info.notify_mode.app && this.info.notify_mode.app.value,\n      pc: this.info.notify_mode.pc && this.info.notify_mode.pc.value\n    }\n  },\n  methods: {\n    save() {\n      // 课程类型：团课， 私教课\n      let course_type = {}\n      // 订单类型\n      let order_type = {}\n      // 接收人\n      let receiver = {}\n      if (this.info.course_type.team_course) {\n        course_type.team_course = this.params.course_type.team_course.value\n          ? 1\n          : 0\n      }\n      if (this.info.course_type.personal_course) {\n        course_type.personal_course = this.params.course_type.personal_course\n          .value\n          ? 1\n          : 0\n      }\n      if (this.info.course_type.small_course) {\n        course_type.small_course = this.params.course_type.small_course.value\n          ? 1\n          : 0\n      }\n      if (this.info.order_type.advance) {\n        order_type.advance = this.params.order_type.advance.value ? 1 : 0\n      }\n      if (this.info.order_type.deposit) {\n        order_type.deposit = this.params.order_type.deposit.value ? 1 : 0\n      }\n      if (this.info.order_type.product) {\n        order_type.product = this.params.order_type.product.value ? 1 : 0\n      }\n      if (this.info.order_type.poundage) {\n        order_type.poundage = this.params.order_type.poundage.value ? 1 : 0\n      }\n\n      if (this.info.receiver.coach) {\n        receiver.coach = this.params.receiver.coach.value ? 1 : 0\n      }\n      if (this.info.receiver.member) {\n        receiver.member = this.params.receiver.member.value ? 1 : 0\n      }\n      if (this.info.receiver.custom) {\n        receiver.custom = this.params.receiver.custom.value ? 1 : 0\n      }\n      if (this.info.receiver.seller) {\n        receiver.seller = this.params.receiver.seller.value ? 1 : 0\n      }\n      if (this.info.receiver.leader) {\n        receiver.leader = this.params.receiver.leader.value ? 1 : 0\n      }\n      if (this.info.receiver.operator) {\n        receiver.operator = this.params.receiver.operator.value ? 1 : 0\n      }\n      const custom_phone = this.params.custom_phone\n\n      const para = Object.assign({}, this.params, {\n        id: this.info.id,\n        custom_phone,\n        order_type,\n        receiver,\n        course_type\n      })\n      this.$emit('editInfo', para)\n      this.isShowEdit = 0\n    }\n  },\n  watch: {\n    'params.receiver.custom.value'(oldVal, newVal) {\n      if (oldVal) {\n        this.isShowPhone = true\n      } else {\n        this.isShowPhone = false\n      }\n    }\n  }\n}\n",{"version":3,"sources":["shop-notice-item.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"shop-notice-item.vue","sourceRoot":"src/views/pages/brand/setting/sms/components#","sourcesContent":["<template>\n  <div :class=\"[bComponent(), bShop()]\">\n    <div :class=\"bComponent('title')\">{{ info.title }}</div>\n    <div :class=\"[bComponent('content'), bShop('content')]\">\n      <div :class=\"[bComponent('text'), bShop('text')]\">\n        {{ info.notify_time.name }}\n      </div>\n      <div :class=\"[bComponent('text'), bShop('text')]\">\n        {{ info.notify_type.name }}\n      </div>\n      <div :class=\"[bComponent('text'), bShop('text')]\" style=\"padding-left:0\">\n        <span\n          :class=\"bComponent('button-disabled')\"\n          v-if=\"\n            NOTIFY_SHOP_SUB_TYPE.MEMBER_ENTRANCE_SUCCESS ===\n              info.notify_sub_type.value\n          \"\n        >\n          --\n        </span>\n        <st-switch\n          @change=\"save\"\n          v-model=\"params.notify_mode.sms\"\n          v-else\n        ></st-switch>\n      </div>\n      <div :class=\"[bComponent('text'), bShop('text')]\" style=\"padding-left:0\">\n        <st-switch @change=\"save\" v-model=\"params.notify_mode.app\"></st-switch>\n      </div>\n      <div :class=\"[bComponent('text'), bShop('text')]\" style=\"padding-left:0\">\n        <st-switch\n          @change=\"save\"\n          v-model=\"params.notify_mode.pc\"\n          v-if=\"isPc\"\n        ></st-switch>\n        <span :class=\"bComponent('button-disabled')\" v-else>--</span>\n      </div>\n      <div\n        v-show=\"\n          params.notify_mode.sms ||\n            params.notify_mode.app ||\n            params.notify_mode.pc\n        \"\n      >\n        <div class=\"shadow\"></div>\n        <div :class=\"bComponent('column')\" v-show=\"!isShowEdit\">\n          <div\n            class=\"width80\"\n            :class=\"[bComponent('text'), bShop('text')]\"\n            v-if=\"info.preview\"\n          >\n            <span class=\"color-title mg-r24\">预览内容:</span>\n            <span :class=\"bComponent('text-right')\">{{ info.preview }}</span>\n          </div>\n          <div\n            :class=\"[bComponent('text'), bShop('text')]\"\n            style=\"padding-left:0\"\n          >\n            <span class=\"color-primary cursor-pointer\" @click=\"isShowEdit = 1\">\n              编辑\n            </span>\n          </div>\n          <div\n            class=\"width80\"\n            :class=\"[bComponent('text'), bShop('text')]\"\n            v-if=\"info.receiver_description\"\n          >\n            <span class=\"color-title\">接收人员:</span>\n            <span>{{ info.receiver_description }}</span>\n          </div>\n          <div\n            class=\"width80\"\n            :class=\"[bComponent('text'), bShop('text')]\"\n            v-if=\"info.course_type_description\"\n          >\n            <span class=\"color-title mg-r24\">课程类型:</span>\n            <span>{{ info.course_type_description }}</span>\n          </div>\n          <div\n            class=\"width80\"\n            :class=\"[bComponent('text'), bShop('text')]\"\n            v-if=\"info.order_type_description\"\n          >\n            <span class=\"color-title mg-r24\">订单类型:</span>\n            <span>{{ info.order_type_description }}</span>\n          </div>\n        </div>\n        <div :class=\"bComponent('column')\" v-show=\"isShowEdit\">\n          <div class=\"width80\" :class=\"[bComponent('text'), bShop('text')]\">\n            <template v-if=\"info.preview\">\n              <div class=\"mg-b16\">\n                <span class=\"color-title mg-r24\">发送内容</span>\n                <span :class=\"bComponent('text-right')\">\n                  {{ info.content }}\n                </span>\n              </div>\n              <div class=\"mg-b16\">\n                <span class=\"color-title mg-r24\">预览内容</span>\n                <span :class=\"bComponent('text-right')\">\n                  {{ info.preview }}\n                </span>\n              </div>\n            </template>\n\n            <!-- 课程类型 start -->\n            <div class=\"mg-b16\" v-if=\"Object.keys(info.course_type).length > 0\">\n              <span class=\"color-title mg-r24\">课程类型</span>\n              <span\n                v-for=\"(item, key) of params.course_type\"\n                :key=\"key\"\n                class=\"inlineblock\"\n              >\n                <st-checkbox v-model=\"params.course_type[key].value\">\n                  {{ item.name }}\n                </st-checkbox>\n              </span>\n            </div>\n            <!-- 课程类型 end -->\n\n            <!-- 接收人员 start -->\n            <div class=\"mg-b16\" v-if=\"Object.keys(info.receiver).length > 0\">\n              <span class=\"color-title mg-r24\">接收人员</span>\n              <template v-for=\"(item, key) of params.receiver\">\n                <span class=\"inlineblock\" :key=\"key\" v-if=\"key !== 'custom'\">\n                  <st-checkbox v-model=\"params.receiver[key].value\">\n                    {{ item.name }}\n                  </st-checkbox>\n                </span>\n              </template>\n              <!-- 自定义 本来可以是直接拿后端数据v-for出来但是自定义有可能第二个 自定义应该是最后一个start -->\n              <template>\n                <span class=\"inlineblock\">\n                  <st-checkbox\n                    v-if=\"params.receiver.custom\"\n                    v-model=\"params.receiver.custom.value\"\n                  >\n                    {{ params.receiver.custom.name }}\n                  </st-checkbox>\n                </span>\n                <span v-if=\"isShowPhone\">\n                  <!-- 这个slot 门店通知现在是选择角色 其他都是选择手机号码 为了自定义 本来产品想改成都是选择角色但是现在为了兼容老数据只能两种都保存TODO: 以后可能会改 20191231 -->\n                  <slot name=\"custom\" :params=\"params\">\n                    <a-input\n                      style=\"width:44%\"\n                      v-show=\"isShowPhone\"\n                      v-model=\"params.custom_phone\"\n                      placeholder=\"请输入手机号码，多个用逗号分隔\"\n                    />\n                  </slot>\n                </span>\n              </template>\n              <!-- 自定义 end -->\n            </div>\n            <!-- 接收人员 end -->\n\n            <!-- 订单类型 start -->\n            <div class=\"mg-b16\" v-if=\"Object.keys(info.order_type).length > 0\">\n              <span class=\"color-title  mg-r24\">订单类型</span>\n              <span\n                v-for=\"(item, key) of params.order_type\"\n                :key=\"key\"\n                class=\"inlineblock\"\n              >\n                <st-checkbox v-model=\"params.order_type[key].value\">\n                  {{ item.name }}\n                </st-checkbox>\n              </span>\n            </div>\n            <!-- 订单类型 end -->\n\n            <slot name=\"content-self\" :params=\"params\"></slot>\n            <!-- 发送规则 start -->\n            <div>\n              <span class=\"color-title mg-r24\">发送规则</span>\n              <slot name=\"sendRule\" :params=\"params\">\n                <span>{{ info.notify_time.name }}</span>\n              </slot>\n            </div>\n            <!-- 发送规则 start -->\n          </div>\n          <div\n            :class=\"[bComponent('text'), bShop('text')]\"\n            style=\"padding-left:0\"\n          >\n            <span class=\"btn color-primary mg-r12\" @click=\"isShowEdit = 0\">\n              取消\n            </span>\n            <span class=\"btn color-primary\" @click=\"save\">保存</span>\n          </div>\n        </div>\n        <div class=\"shadow-bottom\"></div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { NOTIFY_SHOP_SUB_TYPE } from '@/constants/setting/sms'\nconst componentName = 'notice-item'\nexport default {\n  name: 'NoticeItem',\n  bem: {\n    bComponent: componentName,\n    bShop: `shop-${componentName}`\n  },\n  computed: {\n    isPc() {\n      return [\n        this.NOTIFY_SHOP_SUB_TYPE.MEMBER_ENTRANCE_SUCCESS,\n        this.NOTIFY_SHOP_SUB_TYPE.BATCH_OPERATE\n      ].includes(this.info.notify_sub_type.value)\n    }\n  },\n  data() {\n    return {\n      isShowEdit: 0,\n      NOTIFY_SHOP_SUB_TYPE,\n      isShowPhone: false, // 默认不展示输入手机号\n      params: {\n        id: '',\n        msg_suffix: '',\n        msg_preffix: '',\n        custom_phone: '',\n        course_type: {\n          team_course: {\n            value: 0,\n            name: '团课'\n          },\n          personal_course: {\n            value: 0,\n            name: '私教课'\n          },\n          small_course: {\n            value: 0,\n            name: this.$c('small_course')\n          }\n        },\n        order_type: {\n          advance: {\n            value: 0,\n            name: '定金'\n          },\n          deposit: {\n            value: 0,\n            name: '押金'\n          },\n          product: {\n            value: 0,\n            name: '商品'\n          },\n          poundage: {\n            value: 0,\n            name: '手续费'\n          }\n        },\n        receiver: {\n          coach: {\n            value: 0,\n            name: this.$c('coach')\n          },\n          member: {\n            value: 0,\n            name: '会员'\n          },\n          seller: {\n            value: 0,\n            name: '销售'\n          },\n          operator: {\n            value: 0,\n            name: '操作人'\n          },\n          custom: {\n            value: 0,\n            name: '自定义'\n          },\n          leader: {\n            value: 0,\n            name: '负责人'\n          }\n        },\n        notify_time: '',\n        notify_number: '',\n        notify_mode: {\n          sms: 0,\n          app: 0,\n          mini_programs: 0\n        }\n      }\n    }\n  },\n  props: {\n    info: {\n      type: Object,\n      default: () => {}\n    }\n  },\n  created() {\n    if (Object.keys(this.info.order_type).length > 0) {\n      this.params.order_type = this.info.order_type\n    }\n    if (Object.keys(this.info.course_type).length > 0) {\n      this.params.course_type = this.info.course_type\n    }\n    if (Object.keys(this.info.receiver).length > 0) {\n      this.params.receiver = this.info.receiver\n    }\n    this.params.notify_time = this.info.notify_time.value\n    this.params.notify_number = this.info.notify_number\n    this.params.msg_preffix = this.info.msg_preffix\n    this.params.msg_suffix = this.info.msg_suffix\n    this.params.custom_phone = this.info.custom_phone\n    this.params.notify_mode = {\n      sms: this.info.notify_mode.sms && this.info.notify_mode.sms.value,\n      app: this.info.notify_mode.app && this.info.notify_mode.app.value,\n      pc: this.info.notify_mode.pc && this.info.notify_mode.pc.value\n    }\n  },\n  methods: {\n    save() {\n      // 课程类型：团课， 私教课\n      let course_type = {}\n      // 订单类型\n      let order_type = {}\n      // 接收人\n      let receiver = {}\n      if (this.info.course_type.team_course) {\n        course_type.team_course = this.params.course_type.team_course.value\n          ? 1\n          : 0\n      }\n      if (this.info.course_type.personal_course) {\n        course_type.personal_course = this.params.course_type.personal_course\n          .value\n          ? 1\n          : 0\n      }\n      if (this.info.course_type.small_course) {\n        course_type.small_course = this.params.course_type.small_course.value\n          ? 1\n          : 0\n      }\n      if (this.info.order_type.advance) {\n        order_type.advance = this.params.order_type.advance.value ? 1 : 0\n      }\n      if (this.info.order_type.deposit) {\n        order_type.deposit = this.params.order_type.deposit.value ? 1 : 0\n      }\n      if (this.info.order_type.product) {\n        order_type.product = this.params.order_type.product.value ? 1 : 0\n      }\n      if (this.info.order_type.poundage) {\n        order_type.poundage = this.params.order_type.poundage.value ? 1 : 0\n      }\n\n      if (this.info.receiver.coach) {\n        receiver.coach = this.params.receiver.coach.value ? 1 : 0\n      }\n      if (this.info.receiver.member) {\n        receiver.member = this.params.receiver.member.value ? 1 : 0\n      }\n      if (this.info.receiver.custom) {\n        receiver.custom = this.params.receiver.custom.value ? 1 : 0\n      }\n      if (this.info.receiver.seller) {\n        receiver.seller = this.params.receiver.seller.value ? 1 : 0\n      }\n      if (this.info.receiver.leader) {\n        receiver.leader = this.params.receiver.leader.value ? 1 : 0\n      }\n      if (this.info.receiver.operator) {\n        receiver.operator = this.params.receiver.operator.value ? 1 : 0\n      }\n      const custom_phone = this.params.custom_phone\n\n      const para = Object.assign({}, this.params, {\n        id: this.info.id,\n        custom_phone,\n        order_type,\n        receiver,\n        course_type\n      })\n      this.$emit('editInfo', para)\n      this.isShowEdit = 0\n    }\n  },\n  watch: {\n    'params.receiver.custom.value'(oldVal, newVal) {\n      if (oldVal) {\n        this.isShowPhone = true\n      } else {\n        this.isShowPhone = false\n      }\n    }\n  }\n}\n</script>\n"]}]}