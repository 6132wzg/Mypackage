{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/date-slider/button.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/date-slider/button.vue","mtime":1600926382169},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'StSliderButton',\n  bem: {\n    sliderButton: 'st-slider-button'\n  },\n  props: {\n    value: {\n      type: Number,\n      default: 0\n    }\n  },\n  data: function data() {\n    return {\n      dragging: false,\n      isClick: false,\n      startX: 0,\n      currentX: 0,\n      startPosition: 0,\n      newPosition: null,\n      oldValue: this.value\n    };\n  },\n  computed: {\n    wrapperStyle: function wrapperStyle() {\n      return {\n        left: this.currentPosition\n      };\n    },\n    max: function max() {\n      return this.$parent.max;\n    },\n    min: function min() {\n      return this.$parent.min;\n    },\n    rangeFirst: function rangeFirst() {\n      return this.$parent.rangeFirst;\n    },\n    rangeSecond: function rangeSecond() {\n      return this.$parent.rangeSecond;\n    },\n    range: function range() {\n      return this.$parent.range;\n    },\n    step: function step() {\n      return this.$parent.step;\n    },\n    precision: function precision() {\n      return this.$parent.precision;\n    },\n    disable: function disable() {\n      return this.$parent.disable;\n    },\n    currentPosition: function currentPosition() {\n      return \"\".concat((this.value - this.min) / (this.max - this.min) * 100, \"%\");\n    },\n    enableFormat: function enableFormat() {\n      // tipFormatter\n      return this.$parent.tipFormatter instanceof Function;\n    },\n    formatValue: function formatValue() {\n      // 格式化后的tips数据\n      return this.enableFormat && this.$parent.tipFormatter(this.value) || this.value;\n    }\n  },\n  watch: {\n    dragging: function dragging(val) {\n      this.$parent.dragging = val;\n    }\n  },\n  mounted: function mounted() {},\n  methods: {\n    onMouseDown: function onMouseDown(event) {\n      if (this.disable) {\n        event.preventDefault();\n      }\n\n      this.onDragStart(event);\n      window.addEventListener('mousemove', this.onDragging);\n      window.addEventListener('mouseup', this.onDragEnd);\n      window.addEventListener('contextmenu', this.onDragEnd); // 右键点击时 进行\n    },\n    onDragging: function onDragging() {\n      if (!this.disable && this.dragging) {\n        this.isClick = false;\n        this.$parent.resetSize();\n        var diff = 0;\n        this.currentX = event.clientX;\n        diff = (this.currentX - this.startX) / this.$parent.sliderSize * 100;\n        this.newPosition = this.startPosition + diff;\n        this.setPosition(this.newPosition);\n      }\n    },\n    onDragStart: function onDragStart(event) {\n      if (this.disable) return;\n      this.dragging = true;\n      this.isClick = true;\n      this.startX = event.clientX;\n      this.startPosition = parseFloat(this.currentPosition);\n      this.newPosition = this.startPosition;\n    },\n    onDragEnd: function onDragEnd() {\n      var _this = this;\n\n      if (!this.disable && this.dragging) {\n        setTimeout(function () {\n          _this.dragging = false;\n\n          if (!_this.isClick) {\n            _this.setPosition(_this.newPosition);\n\n            _this.$parent.emitChange();\n          }\n        }, 0);\n        window.removeEventListener('mousemove', this.onDragging);\n        window.removeEventListener('mouseup', this.onDragEnd);\n        window.removeEventListener('contextmenu', this.onDragEnd);\n      }\n    },\n    setPosition: function setPosition(newPosition) {\n      if (newPosition === null || isNaN(newPosition)) return;\n\n      if (newPosition < 0) {\n        newPosition = 0;\n      } else if (newPosition > 100) {\n        newPosition = 100;\n      }\n\n      var lengthPerStep = 100 / ((this.max - this.min) / this.step);\n      var steps = Math.round(newPosition / lengthPerStep);\n      var value = steps * lengthPerStep * (this.max - this.min) * 0.01 + this.min;\n      value = parseFloat(value.toFixed(this.precision));\n      this.$emit('input', value);\n\n      if (!this.dragging && this.value !== this.oldValue) {\n        this.oldValue = this.value;\n      }\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    window.removeEventListener('mousemove', this.onDragging);\n    window.removeEventListener('mouseup', this.onDragEnd);\n    window.removeEventListener('contextmenu', this.onDragEnd);\n  }\n};",{"version":3,"sources":["button.vue"],"names":[],"mappings":";;;;;;;;;;;;AAYA,eAAA;AACA,EAAA,IAAA,EAAA,gBADA;AAEA,EAAA,GAAA,EAAA;AACA,IAAA,YAAA,EAAA;AADA,GAFA;AAKA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AADA,GALA;AAWA,EAAA,IAXA,kBAWA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA,KAFA;AAGA,MAAA,MAAA,EAAA,CAHA;AAIA,MAAA,QAAA,EAAA,CAJA;AAKA,MAAA,aAAA,EAAA,CALA;AAMA,MAAA,WAAA,EAAA,IANA;AAOA,MAAA,QAAA,EAAA,KAAA;AAPA,KAAA;AASA,GArBA;AAsBA,EAAA,QAAA,EAAA;AACA,IAAA,YADA,0BACA;AACA,aAAA;AAAA,QAAA,IAAA,EAAA,KAAA;AAAA,OAAA;AACA,KAHA;AAIA,IAAA,GAJA,iBAIA;AACA,aAAA,KAAA,OAAA,CAAA,GAAA;AACA,KANA;AAOA,IAAA,GAPA,iBAOA;AACA,aAAA,KAAA,OAAA,CAAA,GAAA;AACA,KATA;AAUA,IAAA,UAVA,wBAUA;AACA,aAAA,KAAA,OAAA,CAAA,UAAA;AACA,KAZA;AAaA,IAAA,WAbA,yBAaA;AACA,aAAA,KAAA,OAAA,CAAA,WAAA;AACA,KAfA;AAgBA,IAAA,KAhBA,mBAgBA;AACA,aAAA,KAAA,OAAA,CAAA,KAAA;AACA,KAlBA;AAmBA,IAAA,IAnBA,kBAmBA;AACA,aAAA,KAAA,OAAA,CAAA,IAAA;AACA,KArBA;AAsBA,IAAA,SAtBA,uBAsBA;AACA,aAAA,KAAA,OAAA,CAAA,SAAA;AACA,KAxBA;AAyBA,IAAA,OAzBA,qBAyBA;AACA,aAAA,KAAA,OAAA,CAAA,OAAA;AACA,KA3BA;AA4BA,IAAA,eA5BA,6BA4BA;AACA,uBAAA,CAAA,KAAA,KAAA,GAAA,KAAA,GAAA,KAAA,KAAA,GAAA,GAAA,KAAA,GAAA,CAAA,GAAA,GAAA;AACA,KA9BA;AA+BA,IAAA,YA/BA,0BA+BA;AACA;AACA,aAAA,KAAA,OAAA,CAAA,YAAA,YAAA,QAAA;AACA,KAlCA;AAmCA,IAAA,WAnCA,yBAmCA;AACA;AACA,aACA,KAAA,YAAA,IAAA,KAAA,OAAA,CAAA,YAAA,CAAA,KAAA,KAAA,CAAA,IACA,KAAA,KAFA;AAIA;AAzCA,GAtBA;AAiEA,EAAA,KAAA,EAAA;AACA,IAAA,QADA,oBACA,GADA,EACA;AACA,WAAA,OAAA,CAAA,QAAA,GAAA,GAAA;AACA;AAHA,GAjEA;AAsEA,EAAA,OAtEA,qBAsEA,CAAA,CAtEA;AAuEA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,uBACA,KADA,EACA;AACA,UAAA,KAAA,OAAA,EAAA;AACA,QAAA,KAAA,CAAA,cAAA;AACA;;AACA,WAAA,WAAA,CAAA,KAAA;AACA,MAAA,MAAA,CAAA,gBAAA,CAAA,WAAA,EAAA,KAAA,UAAA;AACA,MAAA,MAAA,CAAA,gBAAA,CAAA,SAAA,EAAA,KAAA,SAAA;AACA,MAAA,MAAA,CAAA,gBAAA,CAAA,aAAA,EAAA,KAAA,SAAA,EAPA,CAOA;AACA,KATA;AAUA,IAAA,UAVA,wBAUA;AACA,UAAA,CAAA,KAAA,OAAA,IAAA,KAAA,QAAA,EAAA;AACA,aAAA,OAAA,GAAA,KAAA;AACA,aAAA,OAAA,CAAA,SAAA;AACA,YAAA,IAAA,GAAA,CAAA;AACA,aAAA,QAAA,GAAA,KAAA,CAAA,OAAA;AACA,QAAA,IAAA,GAAA,CAAA,KAAA,QAAA,GAAA,KAAA,MAAA,IAAA,KAAA,OAAA,CAAA,UAAA,GAAA,GAAA;AACA,aAAA,WAAA,GAAA,KAAA,aAAA,GAAA,IAAA;AACA,aAAA,WAAA,CAAA,KAAA,WAAA;AACA;AACA,KApBA;AAqBA,IAAA,WArBA,uBAqBA,KArBA,EAqBA;AACA,UAAA,KAAA,OAAA,EAAA;AACA,WAAA,QAAA,GAAA,IAAA;AACA,WAAA,OAAA,GAAA,IAAA;AACA,WAAA,MAAA,GAAA,KAAA,CAAA,OAAA;AACA,WAAA,aAAA,GAAA,UAAA,CAAA,KAAA,eAAA,CAAA;AACA,WAAA,WAAA,GAAA,KAAA,aAAA;AACA,KA5BA;AA6BA,IAAA,SA7BA,uBA6BA;AAAA;;AACA,UAAA,CAAA,KAAA,OAAA,IAAA,KAAA,QAAA,EAAA;AACA,QAAA,UAAA,CAAA,YAAA;AACA,UAAA,KAAA,CAAA,QAAA,GAAA,KAAA;;AACA,cAAA,CAAA,KAAA,CAAA,OAAA,EAAA;AACA,YAAA,KAAA,CAAA,WAAA,CAAA,KAAA,CAAA,WAAA;;AACA,YAAA,KAAA,CAAA,OAAA,CAAA,UAAA;AACA;AACA,SANA,EAMA,CANA,CAAA;AAOA,QAAA,MAAA,CAAA,mBAAA,CAAA,WAAA,EAAA,KAAA,UAAA;AACA,QAAA,MAAA,CAAA,mBAAA,CAAA,SAAA,EAAA,KAAA,SAAA;AACA,QAAA,MAAA,CAAA,mBAAA,CAAA,aAAA,EAAA,KAAA,SAAA;AACA;AACA,KA1CA;AA2CA,IAAA,WA3CA,uBA2CA,WA3CA,EA2CA;AACA,UAAA,WAAA,KAAA,IAAA,IAAA,KAAA,CAAA,WAAA,CAAA,EAAA;;AACA,UAAA,WAAA,GAAA,CAAA,EAAA;AACA,QAAA,WAAA,GAAA,CAAA;AACA,OAFA,MAEA,IAAA,WAAA,GAAA,GAAA,EAAA;AACA,QAAA,WAAA,GAAA,GAAA;AACA;;AACA,UAAA,aAAA,GAAA,OAAA,CAAA,KAAA,GAAA,GAAA,KAAA,GAAA,IAAA,KAAA,IAAA,CAAA;AACA,UAAA,KAAA,GAAA,IAAA,CAAA,KAAA,CAAA,WAAA,GAAA,aAAA,CAAA;AACA,UAAA,KAAA,GACA,KAAA,GAAA,aAAA,IAAA,KAAA,GAAA,GAAA,KAAA,GAAA,IAAA,IAAA,GAAA,KAAA,GADA;AAEA,MAAA,KAAA,GAAA,UAAA,CAAA,KAAA,CAAA,OAAA,CAAA,KAAA,SAAA,CAAA,CAAA;AACA,WAAA,KAAA,CAAA,OAAA,EAAA,KAAA;;AACA,UAAA,CAAA,KAAA,QAAA,IAAA,KAAA,KAAA,KAAA,KAAA,QAAA,EAAA;AACA,aAAA,QAAA,GAAA,KAAA,KAAA;AACA;AACA;AA3DA,GAvEA;AAoIA,EAAA,aApIA,2BAoIA;AACA,IAAA,MAAA,CAAA,mBAAA,CAAA,WAAA,EAAA,KAAA,UAAA;AACA,IAAA,MAAA,CAAA,mBAAA,CAAA,SAAA,EAAA,KAAA,SAAA;AACA,IAAA,MAAA,CAAA,mBAAA,CAAA,aAAA,EAAA,KAAA,SAAA;AACA;AAxIA,CAAA","sourcesContent":["<template>\n  <div\n    :class=\"sliderButton()\"\n    :style=\"wrapperStyle\"\n    ref=\"button\"\n    @mousedown=\"onMouseDown\"\n  >\n    <div :class=\"sliderButton('toolTip')\">{{ formatValue }}</div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'StSliderButton',\n  bem: {\n    sliderButton: 'st-slider-button'\n  },\n  props: {\n    value: {\n      type: Number,\n      default: 0\n    }\n  },\n  data() {\n    return {\n      dragging: false,\n      isClick: false,\n      startX: 0,\n      currentX: 0,\n      startPosition: 0,\n      newPosition: null,\n      oldValue: this.value\n    }\n  },\n  computed: {\n    wrapperStyle() {\n      return { left: this.currentPosition }\n    },\n    max() {\n      return this.$parent.max\n    },\n    min() {\n      return this.$parent.min\n    },\n    rangeFirst() {\n      return this.$parent.rangeFirst\n    },\n    rangeSecond() {\n      return this.$parent.rangeSecond\n    },\n    range() {\n      return this.$parent.range\n    },\n    step() {\n      return this.$parent.step\n    },\n    precision() {\n      return this.$parent.precision\n    },\n    disable() {\n      return this.$parent.disable\n    },\n    currentPosition() {\n      return `${((this.value - this.min) / (this.max - this.min)) * 100}%`\n    },\n    enableFormat() {\n      // tipFormatter\n      return this.$parent.tipFormatter instanceof Function\n    },\n    formatValue() {\n      // 格式化后的tips数据\n      return (\n        (this.enableFormat && this.$parent.tipFormatter(this.value)) ||\n        this.value\n      )\n    }\n  },\n  watch: {\n    dragging(val) {\n      this.$parent.dragging = val\n    }\n  },\n  mounted() {},\n  methods: {\n    onMouseDown(event) {\n      if (this.disable) {\n        event.preventDefault()\n      }\n      this.onDragStart(event)\n      window.addEventListener('mousemove', this.onDragging)\n      window.addEventListener('mouseup', this.onDragEnd)\n      window.addEventListener('contextmenu', this.onDragEnd) // 右键点击时 进行\n    },\n    onDragging() {\n      if (!this.disable && this.dragging) {\n        this.isClick = false\n        this.$parent.resetSize()\n        let diff = 0\n        this.currentX = event.clientX\n        diff = ((this.currentX - this.startX) / this.$parent.sliderSize) * 100\n        this.newPosition = this.startPosition + diff\n        this.setPosition(this.newPosition)\n      }\n    },\n    onDragStart(event) {\n      if (this.disable) return\n      this.dragging = true\n      this.isClick = true\n      this.startX = event.clientX\n      this.startPosition = parseFloat(this.currentPosition)\n      this.newPosition = this.startPosition\n    },\n    onDragEnd() {\n      if (!this.disable && this.dragging) {\n        setTimeout(() => {\n          this.dragging = false\n          if (!this.isClick) {\n            this.setPosition(this.newPosition)\n            this.$parent.emitChange()\n          }\n        }, 0)\n        window.removeEventListener('mousemove', this.onDragging)\n        window.removeEventListener('mouseup', this.onDragEnd)\n        window.removeEventListener('contextmenu', this.onDragEnd)\n      }\n    },\n    setPosition(newPosition) {\n      if (newPosition === null || isNaN(newPosition)) return\n      if (newPosition < 0) {\n        newPosition = 0\n      } else if (newPosition > 100) {\n        newPosition = 100\n      }\n      const lengthPerStep = 100 / ((this.max - this.min) / this.step)\n      const steps = Math.round(newPosition / lengthPerStep)\n      let value =\n        steps * lengthPerStep * (this.max - this.min) * 0.01 + this.min\n      value = parseFloat(value.toFixed(this.precision))\n      this.$emit('input', value)\n      if (!this.dragging && this.value !== this.oldValue) {\n        this.oldValue = this.value\n      }\n    }\n  },\n  beforeDestroy() {\n    window.removeEventListener('mousemove', this.onDragging)\n    window.removeEventListener('mouseup', this.onDragEnd)\n    window.removeEventListener('contextmenu', this.onDragEnd)\n  }\n}\n</script>\n"],"sourceRoot":"src/views/biz-components/date-slider"}]}