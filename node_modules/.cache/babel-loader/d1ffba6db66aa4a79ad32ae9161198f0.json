{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/package/info/info.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/package/info/info.vue","mtime":1600926555708},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { InfoService } from \"./info.service\";\nimport { teamColumns, personalColumns } from \"./info.config\";\nimport { PACKAGE_ATTR } from \"../const\";\nexport default {\n  name: 'PackageInfo',\n  bem: {\n    b: 'biz-package-info'\n  },\n  serviceInject: function serviceInject() {\n    return {\n      service: InfoService\n    };\n  },\n  rxState: function rxState() {\n    var _this$service = this.service,\n        saleTimeIsForever$ = _this$service.saleTimeIsForever$,\n        reserveIsLimit$ = _this$service.reserveIsLimit$,\n        packageType$ = _this$service.packageType$,\n        coachList$ = _this$service.coachList$,\n        reserveLimitDay$ = _this$service.reserveLimitDay$;\n    return {\n      saleTimeIsForever$: saleTimeIsForever$,\n      reserveIsLimit$: reserveIsLimit$,\n      coachList$: coachList$,\n      packageType$: packageType$,\n      reserveLimitDay$: reserveLimitDay$\n    };\n  },\n  data: function data() {\n    return {\n      PACKAGE_ATTR: PACKAGE_ATTR\n    };\n  },\n  props: {\n    info: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    },\n    btnOptions: {\n      type: Array,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  computed: {\n    teamColumns: teamColumns,\n    personalColumns: personalColumns,\n    imgUrl: function imgUrl() {\n      return this.info.image;\n    },\n    courseRangeName: function courseRangeName() {\n      return this.packageType$[this.info.package_type];\n    },\n    supportTeamCourse: function supportTeamCourse() {\n      var basic_info = this.info.basic_info;\n      return basic_info.course_setting.support_course_team_range;\n    },\n    supportPersonalCourse: function supportPersonalCourse() {\n      var basic_info = this.info.basic_info;\n      return basic_info.course_setting.support_course_personal_range.map(function (item) {\n        item.coachList = item.coach_level_ids.map(function (item) {\n          return item.setting_name;\n        }).join(',');\n        return item;\n      });\n    },\n    packageType: function packageType() {\n      return this.info.package_type;\n    },\n    isLimit: function isLimit() {\n      return this.info.is_limit;\n    },\n    allCourseRange: function allCourseRange() {\n      var basic_info = this.info.basic_info;\n      return basic_info.course_setting.description;\n    },\n    baseInfo: function baseInfo() {\n      var basic_info = this.info.basic_info;\n      var reserve_is_limit = basic_info.reserve_is_limit,\n          reserve_limit_times = basic_info.reserve_limit_times,\n          reserve_limit_day = basic_info.reserve_limit_day;\n      var unit = this.reserveLimitDay$[reserve_limit_day];\n      var reserveCourseLimit = reserve_is_limit === 0 ? this.reserveIsLimit$[reserve_is_limit] : \"\".concat(unit).concat(reserve_limit_times, \"\\u8282\\u8BFE\");\n      return [{\n        label: '使用人数',\n        value: \"\".concat(basic_info.support_num, \"\\u4EBA\")\n      }, {\n        label: '上课门店',\n        value: basic_info.use_shop\n      }, {\n        label: '约课限制',\n        value: reserveCourseLimit\n      }];\n    },\n    saleInfo: function saleInfo() {\n      var sale_info = this.info.sale_info;\n      var is_permanent_sale = sale_info.is_permanent_sale,\n          end_time = sale_info.end_time,\n          start_time = sale_info.start_time,\n          sale_mode = sale_info.sale_mode,\n          sale_shop = sale_info.sale_shop,\n          frozen_setting = sale_info.frozen_setting,\n          transfer_setting = sale_info.transfer_setting; // TODO: 永久售卖应该是枚举 1 为永久售卖\n\n      var saleTime = is_permanent_sale === 0 ? \"\".concat(start_time, \" ~ \").concat(end_time) : this.saleTimeIsForever$[is_permanent_sale];\n      return [{\n        label: '售卖时间',\n        value: saleTime\n      }, {\n        label: '售卖方式',\n        value: sale_mode\n      }, {\n        label: '售卖门店',\n        value: sale_shop\n      }, {\n        label: '转让设置',\n        value: transfer_setting\n      }, {\n        label: '冻结设置',\n        value: frozen_setting\n      }];\n    },\n    intro: function intro() {\n      var extra_info = this.info.extra_info;\n      return extra_info.intro || '--';\n    },\n    extraInfo: function extraInfo() {\n      var extra_info = this.info.extra_info;\n      var remarks = extra_info.remarks;\n      return [{\n        label: '内部备注',\n        value: remarks || '--'\n      }];\n    }\n  },\n  created: function created() {\n    this.service.getCoachList().subscribe();\n  }\n};",{"version":3,"sources":["info.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <st-panel app initial :class=\"b()\">\n    <div :class=\"b('header')\" class=\"mg-l32 mg-r16\">\n      <div :class=\"b('header-left')\">\n        <div :class=\"b('header-left-img')\" class=\"mg-r24\">\n          <img :src=\"imgUrl\" alt=\"\" width=\"281\" height=\"158\" />\n        </div>\n\n        <div :class=\"b('header-right')\">\n          <div :class=\"b('header-right-title')\" class=\"mg-b24\">\n            {{ info.course_name }}\n            <span>（{{ courseRangeName }}）</span>\n          </div>\n          <div class=\"price mg-b16\">\n            <i-count-up\n              class=\"font-number mg-r8\"\n              :options=\"{ decimalPlaces: 1, duration: 0 }\"\n              :endVal=\"+info.price\"\n            ></i-count-up>\n            <span class=\"font-unit\">元</span>\n          </div>\n          <div class=\"mg-b8 limit\">\n            {{ info.course_setting }}\n          </div>\n          <div class=\"validate\">{{ info.valid_time }}</div>\n        </div>\n      </div>\n      <div class=\"right\">\n        <slot name=\"actions\"></slot>\n      </div>\n    </div>\n    <div :class=\"b('base-info')\">\n      <block-title title-name=\"基本信息\" class=\"mg-b24\"></block-title>\n      <div class=\"mg-l24\">\n        <st-info>\n          <st-info-item\n            v-for=\"(item, index) in baseInfo\"\n            :label=\"item.label\"\n            :key=\"index\"\n          >\n            {{ item.value }}\n          </st-info-item>\n          <st-info-item label=\"可约课程\">\n            <span v-if=\"packageType === PACKAGE_ATTR.ALL\">\n              {{ allCourseRange }}\n            </span>\n            <span v-if=\"info.basic_info.course_setting.total_times\">\n              团课&私教课共{{ info.basic_info.course_setting.total_times }}次\n            </span>\n          </st-info-item>\n          <template\n            v-if=\"\n              packageType === PACKAGE_ATTR.RANGE ||\n                packageType === PACKAGE_ATTR.FIX\n            \"\n          >\n            <st-container v-if=\"supportTeamCourse.length\" class=\"mg-r40\">\n              <div :class=\"b('course-title')\">\n                <st-t3>团体课</st-t3>\n                <st-info class=\"mg-l16 mg-r40\">\n                  <st-info-item\n                    v-if=\"info.basic_info.course_setting.team_times\"\n                    label=\"总计\"\n                  >\n                    <span>\n                      {{ info.basic_info.course_setting.team_times }}次\n                    </span>\n                  </st-info-item>\n                </st-info>\n              </div>\n              <st-table\n                :columns=\"teamColumns\"\n                class=\"mg-t8\"\n                pageMode=\"client\"\n                rowKey=\"course_id\"\n                :dataSource=\"supportTeamCourse\"\n              ></st-table>\n            </st-container>\n            <st-container\n              v-if=\"supportPersonalCourse.length\"\n              class=\"mg-t8 mg-r40\"\n            >\n              <div :class=\"b('course-title')\">\n                <st-t3>私教课</st-t3>\n                <st-info class=\"mg-l16\">\n                  <st-info-item\n                    v-if=\"info.basic_info.course_setting.personal_times\"\n                    label=\"总计\"\n                  >\n                    <span>\n                      {{ info.basic_info.course_setting.personal_times }}次\n                    </span>\n                  </st-info-item>\n                </st-info>\n              </div>\n              <st-table\n                :columns=\"personalColumns\"\n                pageMode=\"client\"\n                class=\"mg-t8\"\n                rowKey=\"course_id\"\n                simplePage\n                :dataSource=\"supportPersonalCourse\"\n              ></st-table>\n            </st-container>\n          </template>\n        </st-info>\n      </div>\n    </div>\n    <div :class=\"b('sale-info')\" class=\"mg-t32\">\n      <block-title title-name=\"售卖信息\" class=\"mg-b24\"></block-title>\n      <div class=\"mg-l24\">\n        <st-info>\n          <st-info-item\n            v-for=\"(item, index) in saleInfo\"\n            :label=\"item.label\"\n            :key=\"index\"\n          >\n            {{ item.value }}\n          </st-info-item>\n        </st-info>\n      </div>\n    </div>\n    <div :class=\"b('other-info')\" class=\"mg-t32\">\n      <block-title title-name=\"其他信息\" class=\"mg-b24\"></block-title>\n      <div class=\"mg-l24 mg-r24\">\n        <st-info>\n          <st-info-item label=\"介绍\">\n            <div v-html=\"intro\"></div>\n          </st-info-item>\n          <st-info-item\n            v-for=\"(item, index) in extraInfo\"\n            :label=\"item.label\"\n            :key=\"index\"\n          >\n            {{ item.value }}\n          </st-info-item>\n        </st-info>\n      </div>\n    </div>\n  </st-panel>\n</template>\n\n<script>\nimport { InfoService } from './info.service'\nimport { teamColumns, personalColumns } from './info.config'\nimport { PACKAGE_ATTR } from '../const'\nexport default {\n  name: 'PackageInfo',\n  bem: { b: 'biz-package-info' },\n  serviceInject() {\n    return {\n      service: InfoService\n    }\n  },\n  rxState() {\n    const {\n      saleTimeIsForever$,\n      reserveIsLimit$,\n      packageType$,\n      coachList$,\n      reserveLimitDay$\n    } = this.service\n    return {\n      saleTimeIsForever$,\n      reserveIsLimit$,\n      coachList$,\n      packageType$,\n      reserveLimitDay$\n    }\n  },\n  data() {\n    return {\n      PACKAGE_ATTR\n    }\n  },\n  props: {\n    info: {\n      type: Object,\n      default: () => {\n        return {}\n      }\n    },\n    btnOptions: {\n      type: Array,\n      default: () => {\n        return {}\n      }\n    }\n  },\n  computed: {\n    teamColumns,\n    personalColumns,\n    imgUrl() {\n      return this.info.image\n    },\n    courseRangeName() {\n      return this.packageType$[this.info.package_type]\n    },\n    supportTeamCourse() {\n      let { basic_info } = this.info\n      return basic_info.course_setting.support_course_team_range\n    },\n    supportPersonalCourse() {\n      let { basic_info } = this.info\n      return basic_info.course_setting.support_course_personal_range.map(\n        item => {\n          item.coachList = item.coach_level_ids\n            .map(item => item.setting_name)\n            .join(',')\n          return item\n        }\n      )\n    },\n    packageType() {\n      return this.info.package_type\n    },\n    isLimit() {\n      return this.info.is_limit\n    },\n    allCourseRange() {\n      let { basic_info } = this.info\n      return basic_info.course_setting.description\n    },\n    baseInfo() {\n      let { basic_info } = this.info\n      let {\n        reserve_is_limit,\n        reserve_limit_times,\n        reserve_limit_day\n      } = basic_info\n      let unit = this.reserveLimitDay$[reserve_limit_day]\n      let reserveCourseLimit =\n        reserve_is_limit === 0\n          ? this.reserveIsLimit$[reserve_is_limit]\n          : `${unit}${reserve_limit_times}节课`\n      return [\n        { label: '使用人数', value: `${basic_info.support_num}人` },\n        { label: '上课门店', value: basic_info.use_shop },\n        {\n          label: '约课限制',\n          value: reserveCourseLimit\n        }\n      ]\n    },\n    saleInfo() {\n      let { sale_info } = this.info\n      let {\n        is_permanent_sale,\n        end_time,\n        start_time,\n        sale_mode,\n        sale_shop,\n        frozen_setting,\n        transfer_setting\n      } = sale_info\n      // TODO: 永久售卖应该是枚举 1 为永久售卖\n      let saleTime =\n        is_permanent_sale === 0\n          ? `${start_time} ~ ${end_time}`\n          : this.saleTimeIsForever$[is_permanent_sale]\n      return [\n        { label: '售卖时间', value: saleTime },\n        { label: '售卖方式', value: sale_mode },\n        {\n          label: '售卖门店',\n          value: sale_shop\n        },\n        { label: '转让设置', value: transfer_setting },\n        { label: '冻结设置', value: frozen_setting }\n      ]\n    },\n    intro() {\n      let { extra_info } = this.info\n      return extra_info.intro || '--'\n    },\n    extraInfo() {\n      let { extra_info } = this.info\n      let { remarks } = extra_info\n      return [\n        {\n          label: '内部备注',\n          value: remarks || '--'\n        }\n      ]\n    }\n  },\n  created() {\n    this.service.getCoachList().subscribe()\n  }\n}\n</script>\n"],"sourceRoot":"src/views/biz-components/package/info"}]}