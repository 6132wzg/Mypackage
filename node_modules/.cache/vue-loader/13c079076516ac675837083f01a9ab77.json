{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/setting/sms/notice.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/setting/sms/notice.vue","mtime":1591147717361},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { NoticeService } from './notice.service'\nimport { thsMember, thsShop } from './notice.config'\nimport MemberNoticeItem from './components#/member-notice-item'\nimport ShopNoticeItem from './components#/shop-notice-item'\nimport {\n  NOTIFY_TYPES,\n  NOTIFY_MEMBER_SUB_TYPE,\n  NOTIFY_SHOP_SUB_TYPE\n} from '@/constants/setting/sms'\nconst pageName = 'page-setting-sms-notice'\n\nexport default {\n  name: 'NoticeConfig',\n  bem: {\n    bPage: pageName,\n    bItem: `${pageName}-item`\n  },\n  serviceInject() {\n    return {\n      noticeService: NoticeService\n    }\n  },\n  data() {\n    return {\n      NOTIFY_TYPES,\n      NOTIFY_MEMBER_SUB_TYPE,\n      NOTIFY_SHOP_SUB_TYPE\n    }\n  },\n  rxState() {\n    const {\n      memberList$,\n      roleList$,\n      shopList$,\n      consumeType$,\n      entranceType$,\n      notifyTimeHour$,\n      notifyRule$\n    } = this.noticeService\n    return {\n      memberList$,\n      roleList$,\n      shopList$,\n      consumeType$,\n      entranceType$,\n      notifyTimeHour$,\n      notifyRule$\n    }\n  },\n  computed: {\n    thsMember,\n    thsShop,\n    consumeTypeString() {\n      return this.consumeType$.map(item => item.label)\n    },\n    entranceTypeString() {\n      return this.entranceType$.map(item => item.label)\n    }\n  },\n\n  methods: {\n    onSearch() {},\n    save(para) {\n      this.putNotice(para)\n    },\n    getNoticeList() {\n      return this.noticeService.getNoticeList().subscribe()\n    },\n    putNotice(para) {\n      return this.noticeService.putNotice({ ...para }).subscribe(res => {\n        this.getNoticeList()\n      })\n    }\n  },\n  components: {\n    MemberNoticeItem,\n    ShopNoticeItem\n  }\n}\n",{"version":3,"sources":["notice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"notice.vue","sourceRoot":"src/views/pages/brand/setting/sms","sourcesContent":["<template>\n  <div :class=\"bPage()\">\n    <div :class=\"bItem()\">\n      <st-t3 class=\"mg-b16\">通知会员信息</st-t3>\n      <div :class=\"bItem('table')\">\n        <div :class=\"bItem('table-title')\">\n          <div :class=\"bItem('table-th')\">模板标题</div>\n          <div class=\"th-wrap\">\n            <div class=\"th\" v-for=\"(item, index) in thsMember\" :key=\"index\">\n              {{ item.title }}\n            </div>\n          </div>\n        </div>\n        <div\n          :class=\"bItem('table-tr')\"\n          v-for=\"(item, index) in memberList$\"\n          :key=\"index\"\n        >\n          <member-notice-item @editInfo=\"save\" :info=\"item\">\n            <!-- 预约到期提醒 需要设置时间 start-->\n            <template\n              v-slot:notifyTime=\"slotProps\"\n              v-if=\"\n                item.notify_sub_type.value ===\n                  NOTIFY_MEMBER_SUB_TYPE.RESERVE_EXPIRE\n              \"\n            >\n              <span>\n                课程开始前\n                <a-select\n                  v-model=\"slotProps.params.notify_time\"\n                  style=\"width:100px\"\n                >\n                  <a-select-option\n                    v-for=\"(item, index) in notifyTimeHour$\"\n                    :key=\"index\"\n                    :value=\"item.value\"\n                  >\n                    {{ item.label }}\n                  </a-select-option>\n                </a-select>\n                发送\n              </span>\n            </template>\n            <!-- 预约到期提醒 需要设置时间 end-->\n\n            <!-- 购买商品到期通知 是radio -->\n            <template\n              v-slot:notify-time=\"slotProps\"\n              v-if=\"\n                [\n                  NOTIFY_MEMBER_SUB_TYPE.GOODS_EXPIRE,\n                  NOTIFY_MEMBER_SUB_TYPE.RESERVE_EXPIRE\n                ].includes(item.notify_sub_type.value)\n              \"\n            >\n              <span\n                v-if=\"\n                  NOTIFY_MEMBER_SUB_TYPE.RESERVE_EXPIRE ===\n                    item.notify_sub_type.value\n                \"\n              >\n                课程开始前\n                <a-select\n                  v-model=\"slotProps.params.notify_time\"\n                  style=\"width:100px\"\n                >\n                  <a-select-option\n                    v-for=\"(item, index) in notifyTimeHour$\"\n                    :key=\"index\"\n                    :value=\"item.value\"\n                  >\n                    {{ item.label }}\n                  </a-select-option>\n                </a-select>\n                发送\n              </span>\n              <a-radio-group\n                v-if=\"\n                  NOTIFY_MEMBER_SUB_TYPE.GOODS_EXPIRE ===\n                    item.notify_sub_type.value\n                \"\n                v-model=\"slotProps.params.notify_time\"\n                class=\"mg-b16\"\n              >\n                <a-radio\n                  v-for=\"(item, index) in notifyRule$\"\n                  :key=\"index\"\n                  :value=\"item.value\"\n                >\n                  {{ item.label }}\n                </a-radio>\n              </a-radio-group>\n            </template>\n            <!-- 购买商品到期通知 是radio end-->\n          </member-notice-item>\n        </div>\n      </div>\n    </div>\n    <div :class=\"bItem()\" class=\"mg-t24\">\n      <st-t3 class=\"mg-b16\">通知门店信息</st-t3>\n      <div :class=\"bItem('table')\">\n        <div :class=\"bItem('table-title')\">\n          <div :class=\"bItem('table-th')\">模板标题</div>\n          <div class=\"th-wrap\">\n            <div\n              class=\"th shop-th\"\n              v-for=\"(item, index) in thsShop\"\n              :key=\"index\"\n            >\n              {{ item.title }}\n              <st-help-tooltip\n                v-if=\"thsMember.length === index\"\n                id=\"TBPCT001\"\n              />\n            </div>\n          </div>\n        </div>\n        <div\n          :class=\"bItem('table-tr')\"\n          v-for=\"(item, index) in shopList$\"\n          :key=\"index\"\n        >\n          <shop-notice-item @editInfo=\"save\" :info=\"item\">\n            <!-- 自定义内容 start -->\n            <template\n              v-if=\"\n                NOTIFY_SHOP_SUB_TYPE.MEMBER_ENTRANCE_SUCCESS ===\n                  item.notify_sub_type.value\n              \"\n              v-slot:content-self=\"slotProps\"\n            >\n              <div class=\"mg-b16\">\n                <span class=\"color-title mg-r24\">消息类型</span>\n                <span\n                  class=\"mg-r16\"\n                  v-for=\"(item, index) in consumeTypeString\"\n                  :key=\"index\"\n                >\n                  {{ item }}\n                </span>\n              </div>\n\n              <div class=\"mg-b16\">\n                <span class=\"color-title mg-r24\">入场方式</span>\n                <span\n                  class=\"mg-r16\"\n                  v-for=\"(item, index) in entranceTypeString\"\n                  :key=\"index\"\n                >\n                  {{ item }}\n                </span>\n              </div>\n            </template>\n            <!-- 自定义内容 start -->\n\n            <!-- 自定义发送规则 start -->\n            <template\n              v-if=\"\n                [\n                  NOTIFY_SHOP_SUB_TYPE.MEMBER_COURSE_EXPIRE_DUE,\n                  NOTIFY_SHOP_SUB_TYPE.MEMBER_EXPIRE_DUE,\n                  NOTIFY_SHOP_SUB_TYPE.MEMBER_FLOW_DUE\n                ].includes(item.notify_sub_type.value)\n              \"\n              v-slot:sendRule=\"slotProps\"\n            >\n              <span\n                v-if=\"\n                  [\n                    NOTIFY_SHOP_SUB_TYPE.MEMBER_EXPIRE_DUE,\n                    NOTIFY_SHOP_SUB_TYPE.MEMBER_FLOW_DUE\n                  ].includes(item.notify_sub_type.value)\n                \"\n              >\n                {{\n                  NOTIFY_SHOP_SUB_TYPE.MEMBER_EXPIRE_DUE ===\n                  item.notify_sub_type.value\n                    ? '客保到期前'\n                    : '会员流失前'\n                }}\n                <a-input\n                  v-model=\"slotProps.params.notify_time\"\n                  style=\"width:80px\"\n                  type=\"number\"\n                />\n                天提醒，每日早7点推送\n              </span>\n              <span\n                v-if=\"\n                  NOTIFY_SHOP_SUB_TYPE.MEMBER_COURSE_EXPIRE_DUE ===\n                    item.notify_sub_type.value\n                \"\n              >\n                会员课程剩余\n                <a-input\n                  v-model=\"slotProps.params.notify_number\"\n                  style=\"width:80px\"\n                  type=\"number\"\n                />\n                次时，或会员课程有效期剩余\n                <a-input\n                  v-model=\"slotProps.params.notify_time\"\n                  style=\"width:80px\"\n                  type=\"number\"\n                />\n                天时提醒，每日早7点推送\n              </span>\n            </template>\n            <!-- 自定义发送规则 end -->\n\n            <!-- 接收人员 选择角色 start -->\n            <template\n              v-if=\"\n                item.notify_sub_type.value ===\n                  NOTIFY_SHOP_SUB_TYPE.MEMBER_ENTRANCE_SUCCESS ||\n                  item.notify_sub_type.value ===\n                    NOTIFY_SHOP_SUB_TYPE.BATCH_OPERATE\n              \"\n              v-slot:custom=\"slotProps\"\n            >\n              <a-select\n                style=\"width:44%\"\n                mode=\"multiple\"\n                placeholder=\"点击选择角色\"\n                :options=\"roleList$\"\n                v-model=\"slotProps.params.custom_phone\"\n              ></a-select>\n            </template>\n            <!-- 接收人员 选择角色 end -->\n          </shop-notice-item>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { NoticeService } from './notice.service'\nimport { thsMember, thsShop } from './notice.config'\nimport MemberNoticeItem from './components#/member-notice-item'\nimport ShopNoticeItem from './components#/shop-notice-item'\nimport {\n  NOTIFY_TYPES,\n  NOTIFY_MEMBER_SUB_TYPE,\n  NOTIFY_SHOP_SUB_TYPE\n} from '@/constants/setting/sms'\nconst pageName = 'page-setting-sms-notice'\n\nexport default {\n  name: 'NoticeConfig',\n  bem: {\n    bPage: pageName,\n    bItem: `${pageName}-item`\n  },\n  serviceInject() {\n    return {\n      noticeService: NoticeService\n    }\n  },\n  data() {\n    return {\n      NOTIFY_TYPES,\n      NOTIFY_MEMBER_SUB_TYPE,\n      NOTIFY_SHOP_SUB_TYPE\n    }\n  },\n  rxState() {\n    const {\n      memberList$,\n      roleList$,\n      shopList$,\n      consumeType$,\n      entranceType$,\n      notifyTimeHour$,\n      notifyRule$\n    } = this.noticeService\n    return {\n      memberList$,\n      roleList$,\n      shopList$,\n      consumeType$,\n      entranceType$,\n      notifyTimeHour$,\n      notifyRule$\n    }\n  },\n  computed: {\n    thsMember,\n    thsShop,\n    consumeTypeString() {\n      return this.consumeType$.map(item => item.label)\n    },\n    entranceTypeString() {\n      return this.entranceType$.map(item => item.label)\n    }\n  },\n\n  methods: {\n    onSearch() {},\n    save(para) {\n      this.putNotice(para)\n    },\n    getNoticeList() {\n      return this.noticeService.getNoticeList().subscribe()\n    },\n    putNotice(para) {\n      return this.noticeService.putNotice({ ...para }).subscribe(res => {\n        this.getNoticeList()\n      })\n    }\n  },\n  components: {\n    MemberNoticeItem,\n    ShopNoticeItem\n  }\n}\n</script>\n"]}]}