{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/setting/mina/pay-config.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/setting/mina/pay-config.vue","mtime":1600912107009},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { PayConfigService } from './pay-config.service'\nimport PemUploadComponent from './components#/pem-upload.component'\nexport default {\n  bem: {\n    pay: 'brand-setting-mina-pay-config'\n  },\n  serviceInject() {\n    return {\n      payConfigService: PayConfigService\n    }\n  },\n  components: {\n    PemUploadComponent\n  },\n  data() {\n    return {\n      form: this.$form.createForm(this),\n      payConfig: {\n        mch_name: [\n          'mch_name',\n          {\n            rules: [\n              {\n                required: true,\n                message: '请填写商户名称'\n              }\n            ]\n          }\n        ],\n        mch_id: [\n          'mch_id',\n          {\n            rules: [\n              {\n                required: true,\n                message: '请填写微信商户号'\n              }\n            ]\n          }\n        ],\n        key: [\n          'key',\n          {\n            rules: [\n              {\n                required: true,\n                message: '请填写API密钥'\n              }\n            ]\n          }\n        ],\n        cert_pem: ['cert_pem'],\n        key_pem: ['key_pem']\n      }\n    }\n  },\n  methods: {\n    uploadPemSuccess(key) {\n      this.form.setFieldsValue({\n        cert_pem: key\n      })\n    },\n    uploadSecretKeySuccess(key) {\n      this.form.setFieldsValue({\n        key_pem: key\n      })\n    },\n    trim(str) {\n      return str.replace(/(^\\s*)|(\\s*$)/g, '')\n    },\n    save() {\n      let self = this\n      this.form.validateFields((err, values) => {\n        if (!err) {\n          values.mch_name = this.trim(values.mch_name)\n          values.mch_id = this.trim(values.mch_id)\n          values.key = this.trim(values.key)\n          self.payConfigService.saveMch(values).subscribe(() => {\n            self.$router.push({\n              path: '/brand/setting/mina/auth-callback?type=payConfig'\n            })\n          })\n        }\n      })\n    },\n    back() {\n      this.$router.back()\n    },\n    skip() {\n      this.$router.push({\n        name: 'brand-setting-mina-index'\n      })\n    }\n  }\n}\n",{"version":3,"sources":["pay-config.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pay-config.vue","sourceRoot":"src/views/pages/brand/setting/mina","sourcesContent":["<template>\n  <st-panel app :class=\"pay()\">\n    <div :class=\"pay('shadowbox')\">\n      <div :class=\"pay('skip')\" @click=\"skip\">\n        跳过，下次配置\n        <st-icon type=\"right-small\" size=\"14px\"></st-icon>\n      </div>\n      <st-form :form=\"form\">\n        <st-form-item label=\"商户名称\" required>\n          <a-input placeholder=\"请输入\" v-decorator=\"payConfig.mch_name\" />\n          <a\n            class=\"fz12\"\n            target=\"_blank\"\n            href=\"https://help.styd.cn/docs/merchant_name.html\"\n          >\n            如何获取微信商户名称？\n          </a>\n        </st-form-item>\n        <st-form-item label=\"微信商户号\" required>\n          <a-input placeholder=\"请输入\" v-decorator=\"payConfig.mch_id\" />\n          <a\n            class=\"fz12\"\n            target=\"_blank\"\n            href=\"https://help.styd.cn/docs/merchant_number.html\"\n          >\n            如何获取微信商户号？\n          </a>\n        </st-form-item>\n        <st-form-item label=\"API密钥\" required>\n          <a-input placeholder=\"请输入\" v-decorator=\"payConfig.key\" />\n          <a\n            class=\"fz12\"\n            target=\"_blank\"\n            href=\"https://help.styd.cn/docs/merchant_secretkey.html\"\n          >\n            如何取微信商户API密钥？\n          </a>\n        </st-form-item>\n        <st-form-item label=\"证书\" required>\n          <pem-upload-component\n            @success=\"uploadPemSuccess\"\n          ></pem-upload-component>\n          <a-input v-show=\"false\" v-decorator=\"payConfig.cert_pem\" />\n          <div class=\"fz12\">\n            仅支持.pem格式文件，大小不超过5M，\n            <a\n              target=\"_blank\"\n              href=\"https://help.styd.cn/docs/api_certificate.html\"\n            >\n              如何获取证书？\n            </a>\n          </div>\n        </st-form-item>\n        <st-form-item label=\"证书秘钥\" required>\n          <pem-upload-component\n            @success=\"uploadSecretKeySuccess\"\n          ></pem-upload-component>\n          <a-input v-show=\"false\" v-decorator=\"payConfig.key_pem\" />\n          <div class=\"fz12\">\n            仅支持.pem格式文件，大小不超过5M，\n            <a\n              href=\"https://help.styd.cn/docs/api_certificate.html\"\n              target=\"_blank\"\n            >\n              如何获取证书秘钥？\n            </a>\n          </div>\n        </st-form-item>\n        <st-form-item labelFix>\n          <st-button @click=\"back\" :class=\"pay('back')\">上一步</st-button>\n          <st-button type=\"primary\" @click=\"save\">提交</st-button>\n        </st-form-item>\n      </st-form>\n    </div>\n  </st-panel>\n</template>\n\n<script>\nimport { PayConfigService } from './pay-config.service'\nimport PemUploadComponent from './components#/pem-upload.component'\nexport default {\n  bem: {\n    pay: 'brand-setting-mina-pay-config'\n  },\n  serviceInject() {\n    return {\n      payConfigService: PayConfigService\n    }\n  },\n  components: {\n    PemUploadComponent\n  },\n  data() {\n    return {\n      form: this.$form.createForm(this),\n      payConfig: {\n        mch_name: [\n          'mch_name',\n          {\n            rules: [\n              {\n                required: true,\n                message: '请填写商户名称'\n              }\n            ]\n          }\n        ],\n        mch_id: [\n          'mch_id',\n          {\n            rules: [\n              {\n                required: true,\n                message: '请填写微信商户号'\n              }\n            ]\n          }\n        ],\n        key: [\n          'key',\n          {\n            rules: [\n              {\n                required: true,\n                message: '请填写API密钥'\n              }\n            ]\n          }\n        ],\n        cert_pem: ['cert_pem'],\n        key_pem: ['key_pem']\n      }\n    }\n  },\n  methods: {\n    uploadPemSuccess(key) {\n      this.form.setFieldsValue({\n        cert_pem: key\n      })\n    },\n    uploadSecretKeySuccess(key) {\n      this.form.setFieldsValue({\n        key_pem: key\n      })\n    },\n    trim(str) {\n      return str.replace(/(^\\s*)|(\\s*$)/g, '')\n    },\n    save() {\n      let self = this\n      this.form.validateFields((err, values) => {\n        if (!err) {\n          values.mch_name = this.trim(values.mch_name)\n          values.mch_id = this.trim(values.mch_id)\n          values.key = this.trim(values.key)\n          self.payConfigService.saveMch(values).subscribe(() => {\n            self.$router.push({\n              path: '/brand/setting/mina/auth-callback?type=payConfig'\n            })\n          })\n        }\n      })\n    },\n    back() {\n      this.$router.back()\n    },\n    skip() {\n      this.$router.push({\n        name: 'brand-setting-mina-index'\n      })\n    }\n  }\n}\n</script>\n"]}]}