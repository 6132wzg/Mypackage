{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js!/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/hardware/area.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/hardware/area.vue","mtime":1596188219490},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js","mtime":1591062572352},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { ruleOptions, formItemSwitches, alertMsg, timesCardRules } from \"./area.config\";\nimport { AreaService } from \"./area.service\";\nimport { LEAVE_LIMIT, CHECKIN, PEOPLE_TYPE, ENTRY } from '@/constants/setting/hardware';\nexport default {\n  name: 'Area',\n  serviceProviders: function serviceProviders() {\n    return [AreaService];\n  },\n  serviceInject: function serviceInject() {\n    return {\n      areaService: AreaService\n    };\n  },\n  rxState: function rxState() {\n    var areaService = this.areaService;\n    return {\n      rule: areaService.rule$,\n      timeCardRange: areaService.timeCardRange$,\n      info: areaService.info$,\n      loading: areaService.loading$,\n      whiteList: areaService.whiteList$\n    };\n  },\n  bem: {\n    bPage: 'modal-shop-blacklist'\n  },\n  props: {\n    isEdit: {\n      type: Boolean,\n      default: false\n    },\n    id: {\n      type: Number\n    }\n  },\n  data: function data() {\n    var form = this.$stForm.create();\n    var decorators = form.decorators(ruleOptions);\n    return {\n      show: false,\n      form: form,\n      decorators: decorators,\n      LEAVE_LIMIT: LEAVE_LIMIT,\n      ENTRY: ENTRY,\n      CHECKIN: CHECKIN,\n      PEOPLE_TYPE: PEOPLE_TYPE,\n      peopleType: 0,\n      white_list: [],\n      type: ENTRY.GATE // area类型\n\n    };\n  },\n  computed: {\n    /**\n     * 根据场地类型控制特定 form-item 的显示隐藏\n     */\n    formItemSwitches: formItemSwitches,\n    alertMsg: alertMsg,\n    timesCardRules: timesCardRules\n  },\n  mounted: function mounted() {\n    this.getWhiteList('');\n    this.getInfo();\n  },\n  methods: {\n    getWhiteList: function getWhiteList(val) {\n      this.areaService.getWhiteList(val).subscribe();\n    },\n    getInfo: function getInfo() {\n      var _this = this;\n\n      this.areaService.getAreaInfo(this.id).subscribe(function (res) {\n        var _res$info = res.info,\n            area_id = _res$info.area_id,\n            course_time = _res$info.course_time,\n            people_type = _res$info.people_type,\n            leave_limit = _res$info.leave_limit,\n            checkin = _res$info.checkin,\n            white_list = _res$info.white_list,\n            charge_type = _res$info.charge_type,\n            charge_value = _res$info.charge_value,\n            is_course = _res$info.is_course;\n        _this.peopleType = people_type;\n\n        _this.$nextTick(function () {\n          _this.form.setFieldsValue({\n            area_id: area_id,\n            course_time: course_time,\n            people_type: people_type,\n\n            /**\n             * 请不要再这么定义了！\n             */\n            leave_limit: leave_limit === LEAVE_LIMIT.TRUE,\n            checkin: checkin,\n            white_list: white_list,\n            charge_type: charge_type,\n            charge_value: charge_value,\n            is_course: is_course\n          });\n        });\n      });\n    },\n    getCurPeopleType: function getCurPeopleType(e) {\n      this.peopleType = e.target.value;\n    },\n    putAreaSetting: function putAreaSetting(e) {\n      var _this2 = this;\n\n      if (!this.isEdit) {\n        this.show = false;\n      }\n\n      e.preventDefault();\n      this.form.validate().then(function (values) {\n        values.area_type = _this2.type;\n        values.leave_limit = values.leave_limit ? LEAVE_LIMIT.TRUE : LEAVE_LIMIT.FALSE;\n\n        _this2.areaService.putAreaSetting(values).subscribe(function () {\n          _this2.$emit('success');\n\n          _this2.show = false;\n        });\n      });\n    }\n  }\n};",null]}