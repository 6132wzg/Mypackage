(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tier-5~brand-marketing-plugin-activity-registration~brand-marketing-plugin-coupon~brand-marketing-pl~a7a2eea1"],{e80a:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));n("8e6e"),n("ac6a"),n("456d"),n("34ef"),n("28a5");var o,r,i,a,c=n("bd86"),u=n("d225"),p=n("b0b4"),f=n("9ab4"),s=n("df29"),b=n("da41"),d=n("0cd5"),g=n("74d8"),l=n("36d3"),O=n("d792"),h=n("c4cc"),y=n("e9b9"),j=n("2a5b");function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v=function(){function t(e,n,o,r){Object(u["a"])(this,t),this.ossService=e,this.http=n,this.appConfig=o,this.notification=r,this.token$=new s["d"](""),this.loading$=new s["d"](!0)}return Object(p["a"])(t,[{key:"getShsImage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/saas/poster";return this.getToken().pipe(Object(O["a"])((function(){return e.http.originalPost("".concat(e.appConfig.SHS_API_ENV).concat(n),w({},t,{token:e.token$.snapshot()}))})),Object(O["a"])((function(t){var n="".concat(e.appConfig.SHS_API_ENV).concat(t.response.data.url);return e.loadImage(n)})))}},{key:"loadImage",value:function(t){var e=this;return this.loading$.commit((function(){return!0})),new y["a"]((function(n){var o=new Image;o.src=t,o.onload=function(){n.next(t),e.loading$.commit((function(){return!1})),n.complete()},o.onerror=function(t){e.loading$.commit((function(){return!1})),n.error(t),n.complete()}}))}},{key:"convertBase64UrlToBlob",value:function(t){t||this.notification.error({title:"海报",content:"is not qrcode url"});for(var e=window.atob(t.split(",")[1]),n=new ArrayBuffer(e.length),o=new Uint8Array(n),r=0;r<e.length;r++)o[r]=e.charCodeAt(r);return new Blob([n],{type:"image/png"})}},{key:"getToken",value:function(){var t=this;return this.http.originalPost("".concat(this.appConfig.SHS_API_ENV,"/user/token")).pipe(Object(h["a"])((function(e){t.token$.commit((function(){return e.response.data.token}))})))}}]),t}();v=Object(f["b"])([Object(d["b"])(),Object(f["d"])("design:paramtypes",["function"===typeof(o="undefined"!==typeof b["a"]&&b["a"])?o:Object,"function"===typeof(r="undefined"!==typeof l["a"]&&l["a"])?r:Object,"function"===typeof(i="undefined"!==typeof g["a"]&&g["a"])?i:Object,"function"===typeof(a="undefined"!==typeof j["a"]&&j["a"])?a:Object])],v)}}]);