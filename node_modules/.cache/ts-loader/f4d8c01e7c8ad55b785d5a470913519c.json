{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js!/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/ts-loader/index.js??ref--13-3!/Users/wangzhigang/Desktop/styd/web/src/filters/resource.filters.ts","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/filters/resource.filters.ts","mtime":1591147717078},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js","mtime":1591062572352},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/ts-loader/index.js","mtime":1591062571609}],"contextDependencies":[],"result":["import { AppConfig } from '@/constants/config';\nimport { isSupportWebp } from '@/utils/support.ts';\nimport container from '@/container';\nvar appConfig = container.get(AppConfig);\n/**\n * 图片资源过滤器\n */\n\nexport var imgFilter = function imgFilter(key, opts) {\n  if (!key) {\n    if (!opts) {\n      key = appConfig.PLACEHOLDER_IMG.PICTURE;\n    } else {\n      switch (opts.type) {\n        case 'avatar':\n          key = appConfig.PLACEHOLDER_IMG.AVATAR;\n          break;\n\n        case 'course':\n          key = appConfig.PLACEHOLDER_IMG.PICTURE;\n          break;\n\n        default:\n          key = appConfig.PLACEHOLDER_IMG.PICTURE;\n          break;\n      }\n    }\n  }\n\n  if (/x-oss-process/.test(key) || /blob/.test(key)) {\n    return key;\n  }\n\n  if (!/^https?/.test(key)) {\n    key = appConfig.HOST_IMAGE + '/' + key;\n  }\n\n  var configs = {\n    interlace: 1,\n    m: 'fill'\n  };\n  var processConfigStr = '';\n\n  if (opts && opts.m) {\n    configs.m = opts.m;\n  }\n\n  if (opts && opts.w) {\n    configs.w = opts.w;\n  }\n\n  if (opts && opts.h) {\n    configs.h = opts.h;\n  }\n\n  if (!opts) {\n    return key;\n  }\n\n  for (var i in configs) {\n    processConfigStr += \",\".concat(i, \"_\").concat(configs[i]);\n  }\n\n  var ossUrl = \"\".concat(key, \"?x-oss-process=image/resize\").concat(processConfigStr).concat(isSupportWebp() ? '/quality,q_99/format,webp' : '');\n  return ossUrl;\n};",null]}