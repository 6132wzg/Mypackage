{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"tier-2~shop-finance-gathering~shop-reception\"],{\"11fa\":function(e,t,r){\"use strict\";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isBrandStudio?e._e():r(\"st-button\",e._g(e._b({},\"st-button\",e.$attrs,!1),e.$listeners),[e._v(\"\\n  自动生成\\n\")])},a=[],i=r(\"2138\"),o={serviceInject:function(){return{user:i[\"a\"]}},rxState:function(){return{isBrandStudio:this.user.isBrandStudio$}}},c=o,s=r(\"2877\"),d=Object(s[\"a\"])(c,n,a,!1,null,null,null);t[\"a\"]=d.exports},\"2edc\":function(e,t,r){\"use strict\";r.d(t,\"c\",(function(){return m}));r(\"8e6e\"),r(\"ac6a\"),r(\"456d\"),r(\"6b54\"),r(\"2397\");var n=r(\"bd86\"),a=r(\"d225\"),i=r(\"b0b4\"),o=r(\"308d\"),c=r(\"6bb5\"),s=r(\"4e2b\"),d=r(\"de46\");function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){Object(n[\"a\"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e){return function(){var t,r=Object(c[\"a\"])(e);if(b()){var n=Object(c[\"a\"])(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return Object(o[\"a\"])(this,t)}}function b(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var m=function(e){Object(s[\"a\"])(r,e);var t=p(r);function r(){return Object(a[\"a\"])(this,r),t.apply(this,arguments)}return Object(i[\"a\"])(r,[{key:\"getEarnestList\",value:function(e){return this.http.get(\"/v1/finance/advance_fee\",{query:l({},e)})}},{key:\"addEarnest\",value:function(e){return this.http.post(\"/v1/order/transaction/advance\",{params:e})}},{key:\"getEarnestInfo\",value:function(e){return this.http.get(\"/v1/order/transaction/advance/\".concat(e))}}]),r}(d[\"a\"])},\"739d\":function(e,t,r){\"use strict\";var n,a,i,o,c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"st-modal\",{attrs:{title:\"新增定金\",size:\"small\",wrapClassName:\"modal-sold-deal-sale\"},on:{cancel:e.onCancel},model:{value:e.show,callback:function(t){e.show=t},expression:\"show\"}},[r(\"div\",[r(\"st-form\",{attrs:{form:e.form,labelWidth:\"88px\"}},[r(\"div\",[r(\"member-search\",{attrs:{form:e.form,saleRangeType:1,isSoldDeal:\"\"}}),r(\"st-form-item\",{attrs:{label:\"定金金额\",required:\"\"}},[r(\"st-input-number\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.pay_price,expression:\"decorators.pay_price\"}],attrs:{min:1,max:99999,float:!0,placeholder:\"请输入定金金额\"},on:{change:e.changeMoney}})],1),r(\"st-form-item\",{staticClass:\"mg-b16\",attrs:{label:\"支付方式\",required:\"\"}},[r(\"a-radio-group\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.pay_channel,expression:\"decorators.pay_channel\"}]},e._l(e.paymentMethodList,(function(t,n){return r(\"a-radio\",{key:n,attrs:{value:t.payment_type}},[e._v(\"\\n              \"+e._s(t.payment_type_name)+\"\\n            \")])})),1)],1),r(\"st-form-item\",{attrs:{required:\"\"}},[r(\"template\",{slot:\"label\"},[e._v(\"\\n            合同编号\\n            \"),r(\"st-help-tooltip\",{attrs:{id:\"TSSD001\"}})],1),r(\"div\",{class:e.sale(\"contract\")},[r(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.contract_number,expression:\"decorators.contract_number\"}],attrs:{placeholder:\"请输入合同编号\"}}),r(\"auto-contract-btn\",{staticClass:\"create-button\",attrs:{loading:e.loading.getCodeNumber},on:{click:e.onCodeNumber}},[e._v(\"\\n              自动生成\\n            \")])],1)],2)],1),r(\"div\",[r(\"st-form-item\",{attrs:{label:\"销售人员\"}},[r(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.sale_id,expression:\"decorators.sale_id\"}],attrs:{placeholder:\"选择签单的工作人员\"}},e._l(e.saleList,(function(t,n){return r(\"a-select-option\",{key:n,attrs:{value:t.id}},[e._v(\"\\n              \"+e._s(t.staff_name)+\"\\n            \")])})),1)],1),r(\"st-form-item\",{staticClass:\"mg-b0\",attrs:{label:\"备注\"}},[r(\"st-textarea\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.description,expression:\"decorators.description\"}],attrs:{autosize:{minRows:4,maxRows:6},maxlength:200}})],1)],1)])],1),r(\"template\",{slot:\"footer\"},[r(\"div\",{class:e.sale(\"footer\")},[r(\"div\",{staticClass:\"price\"},[r(\"span\",[e._v(e._s(e.money)+\"元\")])]),r(\"div\",{staticClass:\"button\"},[r(\"st-button\",{attrs:{type:\"primary\",loading:e.loading.addEarnest},on:{click:e.onSubmit}},[e._v(\"\\n          确认收款\\n        \")])],1)])])],2)},s=[],d=(r(\"8e6e\"),r(\"ac6a\"),r(\"456d\"),r(\"bd86\")),u=(r(\"c5f6\"),r(\"d225\")),l=r(\"b0b4\"),p=r(\"9ab4\"),b=r(\"2edc\"),m=r(\"0cd5\"),f=r(\"df29\"),y=r(\"75ca\"),v=r(\"c4cc\"),h=r(\"af6c\"),O=r(\"54da\"),g=function(){function e(t,r,n){Object(u[\"a\"])(this,e),this.contractApi=t,this.gatheringApi=r,this.transactionApi=n,this.loading$=new f[\"d\"]({}),this.memberList$=new f[\"d\"]({}),this.saleList$=new f[\"d\"]({}),this.paymentMethodList$=new f[\"d\"]({})}return Object(l[\"a\"])(e,[{key:\"getMember\",value:function(e,t){var r=this;return this.transactionApi.getMemberList(e,t).pipe(Object(v[\"a\"])((function(e){r.memberList$.commit((function(){return e.list}))})))}},{key:\"getCodeNumber\",value:function(e){return this.contractApi.getCodeNumber(e)}},{key:\"getSaleList\",value:function(){var e=this;return this.transactionApi.getTransactionSaleList().pipe(Object(v[\"a\"])((function(t){e.saleList$.commit((function(){return t.list}))})))}},{key:\"getPaymentMethodList\",value:function(){var e=this;return this.transactionApi.getMemberPaymentList({product_type:8}).pipe(Object(v[\"a\"])((function(t){e.paymentMethodList$.commit((function(){return t.list}))})))}},{key:\"serviceInit\",value:function(){return Object(O[\"a\"])(this.getPaymentMethodList(),this.getSaleList())}},{key:\"addEarnest\",value:function(e){return this.gatheringApi.addEarnest(e)}}]),e}();Object(p[\"b\"])([Object(f[\"c\"])(),Object(p[\"d\"])(\"design:type\",Function),Object(p[\"d\"])(\"design:paramtypes\",[String,Number]),Object(p[\"d\"])(\"design:returntype\",void 0)],g.prototype,\"getMember\",null),Object(p[\"b\"])([Object(f[\"c\"])(),Object(p[\"d\"])(\"design:type\",Function),Object(p[\"d\"])(\"design:paramtypes\",[String]),Object(p[\"d\"])(\"design:returntype\",void 0)],g.prototype,\"getCodeNumber\",null),Object(p[\"b\"])([Object(f[\"c\"])(),Object(p[\"d\"])(\"design:type\",Function),Object(p[\"d\"])(\"design:paramtypes\",[]),Object(p[\"d\"])(\"design:returntype\",void 0)],g.prototype,\"getPaymentMethodList\",null),Object(p[\"b\"])([Object(f[\"c\"])(),Object(p[\"d\"])(\"design:type\",Function),Object(p[\"d\"])(\"design:paramtypes\",[]),Object(p[\"d\"])(\"design:returntype\",void 0)],g.prototype,\"serviceInit\",null),Object(p[\"b\"])([Object(f[\"c\"])(),Object(p[\"d\"])(\"design:type\",Function),Object(p[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(n=\"undefined\"!==typeof b[\"AddEarnestParams\"]&&b[\"AddEarnestParams\"])?n:Object]),Object(p[\"d\"])(\"design:returntype\",void 0)],g.prototype,\"addEarnest\",null),g=Object(p[\"b\"])([Object(m[\"b\"])(),Object(p[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(a=\"undefined\"!==typeof h[\"a\"]&&h[\"a\"])?a:Object,\"function\"===typeof(i=\"undefined\"!==typeof b[\"c\"]&&b[\"c\"])?i:Object,\"function\"===typeof(o=\"undefined\"!==typeof y[\"c\"]&&y[\"c\"])?o:Object])],g);var j=r(\"2527\"),_=function(e){var t=e.pattern;return{pay_price:{rules:[{required:!0,message:\"请输入定金金额\"}]},contract_number:{rules:[{required:!0,message:\"请输入合同编号\"},{pattern:t.EN_NUM(\"6-20\"),message:\"请输入正确合同编号\"}]},description:{},pay_channel:[{required:!0,message:\"请选择支付方式\"}],sale_id:{},identityNum:{}}},w=r(\"0262\"),S=r(\"11fa\"),L=r(\"2d9d\");function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){Object(d[\"a\"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M={name:\"ModalShopFinanceGatheringEarnest\",bem:{sale:\"modal-sold-deal-sale\"},components:{autoContractBtn:S[\"a\"],MemberSearch:L[\"a\"]},serviceProviders:function(){return[g]},serviceInject:function(){return{addService:g,pattern:j[\"a\"]}},rxState:function(){return{loading:this.addService.loading$,memberList:this.addService.memberList$,saleList:this.addService.saleList$,paymentMethodList:this.addService.paymentMethodList$}},data:function(){var e=this.$stForm.create(),t=e.decorators(_);return{CODE_NUMBER:w[\"a\"],form:e,decorators:t,show:!1,money:0}},created:function(){this.init()},methods:{init:function(){var e=this;this.addService.serviceInit().subscribe((function(){e.$nextTick((function(){var t=e.paymentMethodList,r=t[0]&&t[0].payment_type;e.form.setFieldsValue({pay_channel:r})}))}))},changeMoney:function(e){this.money=e},onCodeNumber:function(){var e=this;this.addService.getCodeNumber(this.CODE_NUMBER.EARNEST).subscribe((function(t){e.form.setFieldsValue({contract_number:t.info.code})}))},onCancel:function(){this.addService.memberList$.commit((function(){return[]}))},onSubmit:function(){var e=this;this.form.validate().then((function(t){e.addService.addEarnest(P({},t,{mobile:t.mobile?t.mobile.phone:void 0,is_minors:t.is_minors,parent_name:t.parent_name,parent_mobile:t.parent_mobile?t.parent_mobile.phone:void 0,parent_country_prefix:t.parent_mobile?t.parent_mobile.code_id:void 0,parent_user_role:t.parent_user_role})).subscribe((function(t){e.$emit(\"success\",{type:\"create\",orderId:t.info.order_id}),e.show=!1}))}))}}},N=M,$=r(\"2877\"),k=Object($[\"a\"])(N,c,s,!1,null,null,null);t[\"a\"]=k.exports}}]);","extractedComments":[]}