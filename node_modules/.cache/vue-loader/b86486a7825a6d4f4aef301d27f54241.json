{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/package/info/info.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/package/info/info.vue","mtime":1600926555708},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { InfoService } from './info.service'\nimport { teamColumns, personalColumns } from './info.config'\nimport { PACKAGE_ATTR } from '../const'\nexport default {\n  name: 'PackageInfo',\n  bem: { b: 'biz-package-info' },\n  serviceInject() {\n    return {\n      service: InfoService\n    }\n  },\n  rxState() {\n    const {\n      saleTimeIsForever$,\n      reserveIsLimit$,\n      packageType$,\n      coachList$,\n      reserveLimitDay$\n    } = this.service\n    return {\n      saleTimeIsForever$,\n      reserveIsLimit$,\n      coachList$,\n      packageType$,\n      reserveLimitDay$\n    }\n  },\n  data() {\n    return {\n      PACKAGE_ATTR\n    }\n  },\n  props: {\n    info: {\n      type: Object,\n      default: () => {\n        return {}\n      }\n    },\n    btnOptions: {\n      type: Array,\n      default: () => {\n        return {}\n      }\n    }\n  },\n  computed: {\n    teamColumns,\n    personalColumns,\n    imgUrl() {\n      return this.info.image\n    },\n    courseRangeName() {\n      return this.packageType$[this.info.package_type]\n    },\n    supportTeamCourse() {\n      let { basic_info } = this.info\n      return basic_info.course_setting.support_course_team_range\n    },\n    supportPersonalCourse() {\n      let { basic_info } = this.info\n      return basic_info.course_setting.support_course_personal_range.map(\n        item => {\n          item.coachList = item.coach_level_ids\n            .map(item => item.setting_name)\n            .join(',')\n          return item\n        }\n      )\n    },\n    packageType() {\n      return this.info.package_type\n    },\n    isLimit() {\n      return this.info.is_limit\n    },\n    allCourseRange() {\n      let { basic_info } = this.info\n      return basic_info.course_setting.description\n    },\n    baseInfo() {\n      let { basic_info } = this.info\n      let {\n        reserve_is_limit,\n        reserve_limit_times,\n        reserve_limit_day\n      } = basic_info\n      let unit = this.reserveLimitDay$[reserve_limit_day]\n      let reserveCourseLimit =\n        reserve_is_limit === 0\n          ? this.reserveIsLimit$[reserve_is_limit]\n          : `${unit}${reserve_limit_times}节课`\n      return [\n        { label: '使用人数', value: `${basic_info.support_num}人` },\n        { label: '上课门店', value: basic_info.use_shop },\n        {\n          label: '约课限制',\n          value: reserveCourseLimit\n        }\n      ]\n    },\n    saleInfo() {\n      let { sale_info } = this.info\n      let {\n        is_permanent_sale,\n        end_time,\n        start_time,\n        sale_mode,\n        sale_shop,\n        frozen_setting,\n        transfer_setting\n      } = sale_info\n      // TODO: 永久售卖应该是枚举 1 为永久售卖\n      let saleTime =\n        is_permanent_sale === 0\n          ? `${start_time} ~ ${end_time}`\n          : this.saleTimeIsForever$[is_permanent_sale]\n      return [\n        { label: '售卖时间', value: saleTime },\n        { label: '售卖方式', value: sale_mode },\n        {\n          label: '售卖门店',\n          value: sale_shop\n        },\n        { label: '转让设置', value: transfer_setting },\n        { label: '冻结设置', value: frozen_setting }\n      ]\n    },\n    intro() {\n      let { extra_info } = this.info\n      return extra_info.intro || '--'\n    },\n    extraInfo() {\n      let { extra_info } = this.info\n      let { remarks } = extra_info\n      return [\n        {\n          label: '内部备注',\n          value: remarks || '--'\n        }\n      ]\n    }\n  },\n  created() {\n    this.service.getCoachList().subscribe()\n  }\n}\n",{"version":3,"sources":["info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"info.vue","sourceRoot":"src/views/biz-components/package/info","sourcesContent":["<template>\n  <st-panel app initial :class=\"b()\">\n    <div :class=\"b('header')\" class=\"mg-l32 mg-r16\">\n      <div :class=\"b('header-left')\">\n        <div :class=\"b('header-left-img')\" class=\"mg-r24\">\n          <img :src=\"imgUrl\" alt=\"\" width=\"281\" height=\"158\" />\n        </div>\n\n        <div :class=\"b('header-right')\">\n          <div :class=\"b('header-right-title')\" class=\"mg-b24\">\n            {{ info.course_name }}\n            <span>（{{ courseRangeName }}）</span>\n          </div>\n          <div class=\"price mg-b16\">\n            <i-count-up\n              class=\"font-number mg-r8\"\n              :options=\"{ decimalPlaces: 1, duration: 0 }\"\n              :endVal=\"+info.price\"\n            ></i-count-up>\n            <span class=\"font-unit\">元</span>\n          </div>\n          <div class=\"mg-b8 limit\">\n            {{ info.course_setting }}\n          </div>\n          <div class=\"validate\">{{ info.valid_time }}</div>\n        </div>\n      </div>\n      <div class=\"right\">\n        <slot name=\"actions\"></slot>\n      </div>\n    </div>\n    <div :class=\"b('base-info')\">\n      <block-title title-name=\"基本信息\" class=\"mg-b24\"></block-title>\n      <div class=\"mg-l24\">\n        <st-info>\n          <st-info-item\n            v-for=\"(item, index) in baseInfo\"\n            :label=\"item.label\"\n            :key=\"index\"\n          >\n            {{ item.value }}\n          </st-info-item>\n          <st-info-item label=\"可约课程\">\n            <span v-if=\"packageType === PACKAGE_ATTR.ALL\">\n              {{ allCourseRange }}\n            </span>\n            <span v-if=\"info.basic_info.course_setting.total_times\">\n              团课&私教课共{{ info.basic_info.course_setting.total_times }}次\n            </span>\n          </st-info-item>\n          <template\n            v-if=\"\n              packageType === PACKAGE_ATTR.RANGE ||\n                packageType === PACKAGE_ATTR.FIX\n            \"\n          >\n            <st-container v-if=\"supportTeamCourse.length\" class=\"mg-r40\">\n              <div :class=\"b('course-title')\">\n                <st-t3>团体课</st-t3>\n                <st-info class=\"mg-l16 mg-r40\">\n                  <st-info-item\n                    v-if=\"info.basic_info.course_setting.team_times\"\n                    label=\"总计\"\n                  >\n                    <span>\n                      {{ info.basic_info.course_setting.team_times }}次\n                    </span>\n                  </st-info-item>\n                </st-info>\n              </div>\n              <st-table\n                :columns=\"teamColumns\"\n                class=\"mg-t8\"\n                pageMode=\"client\"\n                rowKey=\"course_id\"\n                :dataSource=\"supportTeamCourse\"\n              ></st-table>\n            </st-container>\n            <st-container\n              v-if=\"supportPersonalCourse.length\"\n              class=\"mg-t8 mg-r40\"\n            >\n              <div :class=\"b('course-title')\">\n                <st-t3>私教课</st-t3>\n                <st-info class=\"mg-l16\">\n                  <st-info-item\n                    v-if=\"info.basic_info.course_setting.personal_times\"\n                    label=\"总计\"\n                  >\n                    <span>\n                      {{ info.basic_info.course_setting.personal_times }}次\n                    </span>\n                  </st-info-item>\n                </st-info>\n              </div>\n              <st-table\n                :columns=\"personalColumns\"\n                pageMode=\"client\"\n                class=\"mg-t8\"\n                rowKey=\"course_id\"\n                simplePage\n                :dataSource=\"supportPersonalCourse\"\n              ></st-table>\n            </st-container>\n          </template>\n        </st-info>\n      </div>\n    </div>\n    <div :class=\"b('sale-info')\" class=\"mg-t32\">\n      <block-title title-name=\"售卖信息\" class=\"mg-b24\"></block-title>\n      <div class=\"mg-l24\">\n        <st-info>\n          <st-info-item\n            v-for=\"(item, index) in saleInfo\"\n            :label=\"item.label\"\n            :key=\"index\"\n          >\n            {{ item.value }}\n          </st-info-item>\n        </st-info>\n      </div>\n    </div>\n    <div :class=\"b('other-info')\" class=\"mg-t32\">\n      <block-title title-name=\"其他信息\" class=\"mg-b24\"></block-title>\n      <div class=\"mg-l24 mg-r24\">\n        <st-info>\n          <st-info-item label=\"介绍\">\n            <div v-html=\"intro\"></div>\n          </st-info-item>\n          <st-info-item\n            v-for=\"(item, index) in extraInfo\"\n            :label=\"item.label\"\n            :key=\"index\"\n          >\n            {{ item.value }}\n          </st-info-item>\n        </st-info>\n      </div>\n    </div>\n  </st-panel>\n</template>\n\n<script>\nimport { InfoService } from './info.service'\nimport { teamColumns, personalColumns } from './info.config'\nimport { PACKAGE_ATTR } from '../const'\nexport default {\n  name: 'PackageInfo',\n  bem: { b: 'biz-package-info' },\n  serviceInject() {\n    return {\n      service: InfoService\n    }\n  },\n  rxState() {\n    const {\n      saleTimeIsForever$,\n      reserveIsLimit$,\n      packageType$,\n      coachList$,\n      reserveLimitDay$\n    } = this.service\n    return {\n      saleTimeIsForever$,\n      reserveIsLimit$,\n      coachList$,\n      packageType$,\n      reserveLimitDay$\n    }\n  },\n  data() {\n    return {\n      PACKAGE_ATTR\n    }\n  },\n  props: {\n    info: {\n      type: Object,\n      default: () => {\n        return {}\n      }\n    },\n    btnOptions: {\n      type: Array,\n      default: () => {\n        return {}\n      }\n    }\n  },\n  computed: {\n    teamColumns,\n    personalColumns,\n    imgUrl() {\n      return this.info.image\n    },\n    courseRangeName() {\n      return this.packageType$[this.info.package_type]\n    },\n    supportTeamCourse() {\n      let { basic_info } = this.info\n      return basic_info.course_setting.support_course_team_range\n    },\n    supportPersonalCourse() {\n      let { basic_info } = this.info\n      return basic_info.course_setting.support_course_personal_range.map(\n        item => {\n          item.coachList = item.coach_level_ids\n            .map(item => item.setting_name)\n            .join(',')\n          return item\n        }\n      )\n    },\n    packageType() {\n      return this.info.package_type\n    },\n    isLimit() {\n      return this.info.is_limit\n    },\n    allCourseRange() {\n      let { basic_info } = this.info\n      return basic_info.course_setting.description\n    },\n    baseInfo() {\n      let { basic_info } = this.info\n      let {\n        reserve_is_limit,\n        reserve_limit_times,\n        reserve_limit_day\n      } = basic_info\n      let unit = this.reserveLimitDay$[reserve_limit_day]\n      let reserveCourseLimit =\n        reserve_is_limit === 0\n          ? this.reserveIsLimit$[reserve_is_limit]\n          : `${unit}${reserve_limit_times}节课`\n      return [\n        { label: '使用人数', value: `${basic_info.support_num}人` },\n        { label: '上课门店', value: basic_info.use_shop },\n        {\n          label: '约课限制',\n          value: reserveCourseLimit\n        }\n      ]\n    },\n    saleInfo() {\n      let { sale_info } = this.info\n      let {\n        is_permanent_sale,\n        end_time,\n        start_time,\n        sale_mode,\n        sale_shop,\n        frozen_setting,\n        transfer_setting\n      } = sale_info\n      // TODO: 永久售卖应该是枚举 1 为永久售卖\n      let saleTime =\n        is_permanent_sale === 0\n          ? `${start_time} ~ ${end_time}`\n          : this.saleTimeIsForever$[is_permanent_sale]\n      return [\n        { label: '售卖时间', value: saleTime },\n        { label: '售卖方式', value: sale_mode },\n        {\n          label: '售卖门店',\n          value: sale_shop\n        },\n        { label: '转让设置', value: transfer_setting },\n        { label: '冻结设置', value: frozen_setting }\n      ]\n    },\n    intro() {\n      let { extra_info } = this.info\n      return extra_info.intro || '--'\n    },\n    extraInfo() {\n      let { extra_info } = this.info\n      let { remarks } = extra_info\n      return [\n        {\n          label: '内部备注',\n          value: remarks || '--'\n        }\n      ]\n    }\n  },\n  created() {\n    this.service.getCoachList().subscribe()\n  }\n}\n</script>\n"]}]}