{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/brand/marketing/share-poster.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/brand/marketing/share-poster.vue","mtime":1600926555831},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { ShsService } from '@/services/shs.service';\nimport { cloneDeep } from 'lodash-es';\nexport default {\n  name: 'BrandMarketingPoster',\n  bem: {\n    basic: 'brand-marketing-share'\n  },\n  serviceInject: function serviceInject() {\n    return {\n      shsService: ShsService\n    };\n  },\n  serviceProviders: function serviceProviders() {\n    return [ShsService];\n  },\n  props: {\n    // shsInfo 的qrcode_url必传\n    shsInfo: {\n      type: Object,\n      default: function _default() {}\n    },\n    // 是否新增下载二维码按钮\n    hasQrCodeBtn: {\n      type: Boolean,\n      default: false\n    },\n    shsPath: String\n  },\n  data: function data() {\n    return {\n      show: false,\n      url: '',\n      title: '分享海报',\n      message: '复制和下载二维码，推广至微信朋友圈、微博等，或打印活动海报，张贴至门店，吸引顾客参与活动。',\n      button: '下载海报'\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    var shsInfo = cloneDeep(this.shsInfo);\n    this.shsService.getShsImage(shsInfo, this.shsPath).subscribe(function (res) {\n      _this.url = res;\n    });\n  },\n  methods: {\n    downloadFile: function downloadFile(url) {\n      var _this2 = this;\n\n      var filename = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      fetch(url, {\n        headers: new Headers({\n          Origin: location.origin\n        }),\n        mode: 'cors'\n      }).then(function (res) {\n        return res.blob();\n      }).then(function (blob) {\n        var blobUrl = window.URL.createObjectURL(blob);\n\n        _this2.download(blobUrl, filename);\n\n        window.URL.revokeObjectURL(blobUrl);\n      });\n    },\n    download: function download(blobUrl, filename) {\n      var a = document.createElement('a');\n      a.href = blobUrl;\n      a.target = '_blank';\n      a.download = filename;\n      document.body.appendChild(a);\n      a.click();\n      a.remove();\n    }\n  }\n};",{"version":3,"sources":["share-poster.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA,SAAA,UAAA,QAAA,wBAAA;AACA,SAAA,SAAA,QAAA,WAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,sBADA;AAEA,EAAA,GAAA,EAAA;AACA,IAAA,KAAA,EAAA;AADA,GAFA;AAKA,EAAA,aALA,2BAKA;AACA,WAAA;AACA,MAAA,UAAA,EAAA;AADA,KAAA;AAGA,GATA;AAUA,EAAA,gBAVA,8BAUA;AACA,WAAA,CAAA,UAAA,CAAA;AACA,GAZA;AAaA,EAAA,KAAA,EAAA;AACA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA,oBAAA,CAAA;AAFA,KAFA;AAMA;AACA,IAAA,YAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAPA;AAWA,IAAA,OAAA,EAAA;AAXA,GAbA;AA0BA,EAAA,IA1BA,kBA0BA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,GAAA,EAAA,EAFA;AAGA,MAAA,KAAA,EAAA,MAHA;AAIA,MAAA,OAAA,EACA,+CALA;AAMA,MAAA,MAAA,EAAA;AANA,KAAA;AAQA,GAnCA;AAoCA,EAAA,OApCA,qBAoCA;AAAA;;AACA,QAAA,OAAA,GAAA,SAAA,CAAA,KAAA,OAAA,CAAA;AACA,SAAA,UAAA,CAAA,WAAA,CAAA,OAAA,EAAA,KAAA,OAAA,EAAA,SAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,GAAA,GAAA,GAAA;AACA,KAFA;AAGA,GAzCA;AA0CA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,GADA,EACA;AAAA;;AAAA,UAAA,QAAA,uEAAA,EAAA;AACA,MAAA,KAAA,CAAA,GAAA,EAAA;AACA,QAAA,OAAA,EAAA,IAAA,OAAA,CAAA;AACA,UAAA,MAAA,EAAA,QAAA,CAAA;AADA,SAAA,CADA;AAIA,QAAA,IAAA,EAAA;AAJA,OAAA,CAAA,CAMA,IANA,CAMA,UAAA,GAAA;AAAA,eAAA,GAAA,CAAA,IAAA,EAAA;AAAA,OANA,EAOA,IAPA,CAOA,UAAA,IAAA,EAAA;AACA,YAAA,OAAA,GAAA,MAAA,CAAA,GAAA,CAAA,eAAA,CAAA,IAAA,CAAA;;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,OAAA,EAAA,QAAA;;AACA,QAAA,MAAA,CAAA,GAAA,CAAA,eAAA,CAAA,OAAA;AACA,OAXA;AAYA,KAdA;AAeA,IAAA,QAfA,oBAeA,OAfA,EAeA,QAfA,EAeA;AACA,UAAA,CAAA,GAAA,QAAA,CAAA,aAAA,CAAA,GAAA,CAAA;AACA,MAAA,CAAA,CAAA,IAAA,GAAA,OAAA;AACA,MAAA,CAAA,CAAA,MAAA,GAAA,QAAA;AACA,MAAA,CAAA,CAAA,QAAA,GAAA,QAAA;AACA,MAAA,QAAA,CAAA,IAAA,CAAA,WAAA,CAAA,CAAA;AACA,MAAA,CAAA,CAAA,KAAA;AACA,MAAA,CAAA,CAAA,MAAA;AACA;AAvBA;AA1CA,CAAA","sourcesContent":["<template>\n  <st-modal :title=\"title\" v-model=\"show\" width=\"400px\" :footer=\"null\">\n    <div :class=\"basic()\">\n      <p :class=\"basic('tip')\">{{ message }}</p>\n      <st-image :src=\"url\" :class=\"basic('poster')\"></st-image>\n      <div :class=\"basic('btn-group')\">\n        <st-button\n          pill\n          type=\"primary\"\n          icon=\"download\"\n          size=\"large\"\n          class=\"mg-r8\"\n          :class=\"basic('button')\"\n          @click=\"downloadFile(url, 'poster.png')\"\n        >\n          {{ button }}\n        </st-button>\n        <st-button\n          pill\n          v-if=\"hasQrCodeBtn\"\n          type=\"primary\"\n          icon=\"download\"\n          size=\"large\"\n          :class=\"basic('button')\"\n          @click=\"downloadFile(shsInfo.qrcode_url, 'qrcode.png')\"\n        >\n          下载小程序码\n        </st-button>\n      </div>\n    </div>\n  </st-modal>\n</template>\n<script>\nimport { ShsService } from '@/services/shs.service'\nimport { cloneDeep } from 'lodash-es'\nexport default {\n  name: 'BrandMarketingPoster',\n  bem: {\n    basic: 'brand-marketing-share'\n  },\n  serviceInject() {\n    return {\n      shsService: ShsService\n    }\n  },\n  serviceProviders() {\n    return [ShsService]\n  },\n  props: {\n    // shsInfo 的qrcode_url必传\n    shsInfo: {\n      type: Object,\n      default: () => {}\n    },\n    // 是否新增下载二维码按钮\n    hasQrCodeBtn: {\n      type: Boolean,\n      default: false\n    },\n    shsPath: String\n  },\n  data() {\n    return {\n      show: false,\n      url: '',\n      title: '分享海报',\n      message:\n        '复制和下载二维码，推广至微信朋友圈、微博等，或打印活动海报，张贴至门店，吸引顾客参与活动。',\n      button: '下载海报'\n    }\n  },\n  created() {\n    const shsInfo = cloneDeep(this.shsInfo)\n    this.shsService.getShsImage(shsInfo, this.shsPath).subscribe(res => {\n      this.url = res\n    })\n  },\n  methods: {\n    downloadFile(url, filename = '') {\n      fetch(url, {\n        headers: new Headers({\n          Origin: location.origin\n        }),\n        mode: 'cors'\n      })\n        .then(res => res.blob())\n        .then(blob => {\n          const blobUrl = window.URL.createObjectURL(blob)\n          this.download(blobUrl, filename)\n          window.URL.revokeObjectURL(blobUrl)\n        })\n    },\n    download(blobUrl, filename) {\n      const a = document.createElement('a')\n      a.href = blobUrl\n      a.target = '_blank'\n      a.download = filename\n      document.body.appendChild(a)\n      a.click()\n      a.remove()\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/biz-modals/brand/marketing"}]}