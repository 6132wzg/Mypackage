{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/setting/shop/edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/setting/shop/edit.vue","mtime":1600926556444},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import _toConsumableArray from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { PatternService } from '@/services/pattern.service';\nimport { EditService } from \"./edit.service\";\nimport { cloneDeep } from 'lodash-es';\nimport ShopMapLocation from '@/views/biz-modals/shop/map-location';\nimport CheckboxFacilityGroup from '@/views/biz-components/checkbox-facility/checkbox-facility-group';\nimport CheckboxFacilityItem from '@/views/biz-components/checkbox-facility/checkbox-facility-item';\nimport ShopHourPicker from '@/views/components/hour-picker#/hour-picker';\nimport StImageUpload from '@/views/components/image-upload#/image-upload';\nimport MoreInput from '@/views/components/more-input#/more-input.vue';\nimport { ruleOptions } from \"./edit.config\";\nexport default {\n  name: 'PageShopSettingShopEdit',\n  components: {\n    CheckboxFacilityGroup: CheckboxFacilityGroup,\n    CheckboxFacilityItem: CheckboxFacilityItem,\n    ShopHourPicker: ShopHourPicker,\n    StImageUpload: StImageUpload,\n    MoreInput: MoreInput\n  },\n  bem: {\n    edit: 'page-shop-setting-shop-edit'\n  },\n  modals: {\n    ShopMapLocation: ShopMapLocation\n  },\n  serviceInject: function serviceInject() {\n    return {\n      pattern: PatternService,\n      editService: EditService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      loading: this.editService.loading$,\n      serviceList: this.editService.serviceList$,\n      info: this.editService.info$\n    };\n  },\n  data: function data() {\n    var form = this.$stForm.create();\n    var decorators = form.decorators(ruleOptions);\n    return {\n      form: form,\n      decorators: decorators,\n      flagList: ['', 'shop-trial', 'shop-opening', 'shop-stop', 'shop-close', 'shop-holiday'],\n      shopPhones: [],\n      // 服务设施\n      serviceIds: [],\n      serviceIconIconList: {\n        1: 'WIFI',\n        2: 'park',\n        3: 'shower',\n        4: 'medical',\n        5: 'heating',\n        6: 'snow',\n        7: 'nosmoking',\n        8: 'energy'\n      },\n      // 图片\n      fileList: [],\n      imgList: [],\n      cropperModal: {},\n      weekTime: [],\n      shopPhoneValidateText: ''\n    };\n  },\n  computed: {},\n  mounted: function mounted() {\n    this.init();\n  },\n  methods: {\n    init: function init() {\n      var _this = this;\n\n      this.form.setFieldsValue({\n        email: this.info.email\n      }); // 电话\n\n      this.shopPhones = cloneDeep(this.info.shop_phones); // 服务设施\n\n      this.info.shop_services.forEach(function (i) {\n        _this.serviceIds.push(i.service_id);\n      }); // 图片\n\n      this.imgList = cloneDeep(this.info.shop_images); // 营业时间\n\n      this.weekTime = cloneDeep(this.info.business_time);\n    },\n    // 查看定位\n    location: function location() {\n      this.$modalRouter.push({\n        name: 'shop-map-location',\n        props: {\n          lat: this.info.lat,\n          lng: this.info.lng\n        }\n      });\n    },\n    // 校验门店电话是否输入\n    shopPhoneValidator: function shopPhoneValidator() {\n      var length = this.shopPhones.filter(function (i) {\n        return i;\n      }).length;\n      this.shopPhoneValidateText = length ? '' : '请输入门店电话';\n      return this.shopPhoneValidateText;\n    },\n    onShopPhoneChange: function onShopPhoneChange(list) {\n      this.shopPhones = list;\n      this.shopPhoneValidator();\n    },\n    // 图片\n    fileChange: function fileChange(data) {\n      this.imgList.push({\n        image_id: data[0].image_id,\n        image_key: data[0].image_key,\n        image_url: data[0].image_url,\n        is_cover: 0\n      });\n      this.fileList = [];\n    },\n    // 设为店招\n    onSetCover: function onSetCover(index) {\n      var _this$imgList;\n\n      this.imgList.forEach(function (i) {\n        i.is_cover = 0;\n      });\n      this.imgList[index].is_cover = 1;\n\n      (_this$imgList = this.imgList).unshift.apply(_this$imgList, _toConsumableArray(this.imgList.splice(index, 1)));\n    },\n    // 删除图片\n    onDelete: function onDelete(index) {\n      this.imgList.splice(index, 1);\n    },\n    // 提交\n    onSubmit: function onSubmit() {\n      var _this2 = this;\n\n      // 确认为提交表单校验\n      this.form.resetFields(['shopPhone']);\n      this.form.validate().then(function (values) {\n        if (_this2.shopPhoneValidator()) {\n          return;\n        } // 过滤空数据\n\n\n        _this2.shopPhones = _this2.shopPhones.filter(function (i) {\n          return i;\n        });\n\n        _this2.editService.edit({\n          shop_phones: _this2.shopPhones,\n          service_ids: _this2.serviceIds,\n          business_time: _this2.weekTime,\n          email: values.email,\n          shop_images: _this2.imgList\n        }).subscribe(function () {\n          _this2.$router.push({\n            path: '/shop/setting/shop/info'\n          });\n        });\n      });\n    }\n  }\n};",{"version":3,"sources":["edit.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <st-panel app initial :class=\"edit()\">\n    <div :class=\"edit('head')\">\n      <p>\n        <st-tag class=\"mg-r8\" :type=\"flagList[info.shop_status]\" />\n        <st-t2>{{ info.shop_name }}</st-t2>\n      </p>\n      <p>\n        {{ info.shop_position.address_detail }}\n        <a class=\"mg-l12\" @click=\"location\">查看定位</a>\n      </p>\n    </div>\n    <st-form labelWidth=\"117px\" :form=\"form\" :class=\"edit('body')\">\n      <a-row :gutter=\"8\">\n        <a-col :lg=\"10\" :xs=\"22\" :offset=\"1\">\n          <st-form-item\n            label=\"门店电话\"\n            required\n            :help=\"shopPhoneValidateText\"\n            :validateStatus=\"shopPhoneValidateText ? 'error' : ''\"\n          >\n            <more-input\n              :length=\"3\"\n              :list=\"shopPhones\"\n              @change=\"onShopPhoneChange\"\n              placeholder=\"请输入门店电话\"\n            ></more-input>\n          </st-form-item>\n        </a-col>\n      </a-row>\n      <a-row :gutter=\"8\">\n        <a-col :lg=\"10\" :xs=\"22\" :offset=\"1\">\n          <st-form-item label=\"邮箱\">\n            <a-input\n              v-decorator=\"decorators.email\"\n              placeholder=\"请输入门店邮箱\"\n            />\n          </st-form-item>\n        </a-col>\n      </a-row>\n      <a-row :gutter=\"8\">\n        <a-col offset=\"1\" :lg=\"23\">\n          <st-form-item label=\"服务设施\" class=\"mg-b0\">\n            <checkbox-facility-group v-model=\"serviceIds\">\n              <checkbox-facility-item\n                style=\"margin-right:24px\"\n                v-for=\"item in serviceList\"\n                :label=\"item.service_name\"\n                :icon=\"serviceIconIconList[item.service_id]\"\n                :key=\"item.service_id\"\n                :value=\"item.service_id\"\n              ></checkbox-facility-item>\n            </checkbox-facility-group>\n          </st-form-item>\n        </a-col>\n      </a-row>\n      <a-row :gutter=\"8\">\n        <a-col offset=\"1\" :lg=\"23\">\n          <st-form-item\n            label=\"门店图片\"\n            class=\"st-preview-item\"\n            v-viewer=\"{ url: 'data-src', toolbar: false }\"\n            required\n          >\n            <ul :class=\"edit('img-box')\">\n              <li\n                :class=\"edit('img')\"\n                class=\"mg-r12 mg-t12\"\n                v-for=\"(item, index) in imgList\"\n                :key=\"index\"\n              >\n                <img\n                  :data-src=\"item.image_url | imgFilter({ w: 1000 })\"\n                  :src=\"item.image_url | imgFilter({ w: 240, h: 135 })\"\n                  width=\"240\"\n                  height=\"135\"\n                  alt=\"门店图片\"\n                />\n                <st-tag\n                  v-if=\"item.is_cover\"\n                  class=\"shop-edit-img-tag\"\n                  type=\"shop-sign\"\n                />\n                <p class=\"shop-edit-img-button mg-b0\" v-else>\n                  <span class=\"cursor-pointer\" @click=\"onSetCover(index)\">\n                    设为店招\n                  </span>\n                  <span class=\"cursor-pointer\" @click=\"onDelete(index)\">\n                    删除\n                  </span>\n                </p>\n              </li>\n              <li class=\"mg-t12\" v-if=\"imgList.length < 20\">\n                <st-image-upload\n                  :sizeLimit=\"5\"\n                  :list=\"fileList\"\n                  @change=\"fileChange\"\n                  width=\"240px\"\n                  height=\"135px\"\n                  placeholder=\"上传门店照片\"\n                  description=\"大小不超过5M，建议尺寸16:9\"\n                  :cropperModal=\"{\n                    title: '门店图片裁切',\n                    cropper: { aspectRatio: 16 / 9 }\n                  }\"\n                ></st-image-upload>\n                <p class=\"st-des ta-c\">可新增20张门店图片</p>\n              </li>\n            </ul>\n          </st-form-item>\n        </a-col>\n      </a-row>\n      <a-row :gutter=\"8\">\n        <a-col offset=\"1\" :lg=\"22\">\n          <st-form-item label=\"营业时间\">\n            <shop-hour-picker v-model=\"weekTime\"></shop-hour-picker>\n          </st-form-item>\n        </a-col>\n      </a-row>\n      <a-row :gutter=\"8\">\n        <a-col offset=\"1\" :lg=\"22\">\n          <st-form-item label=\" \">\n            <st-button type=\"primary\" :loading=\"loading.edit\" @click=\"onSubmit\">\n              提交\n            </st-button>\n          </st-form-item>\n        </a-col>\n      </a-row>\n    </st-form>\n  </st-panel>\n</template>\n<script>\nimport { PatternService } from '@/services/pattern.service'\nimport { EditService } from './edit.service'\nimport { cloneDeep } from 'lodash-es'\nimport ShopMapLocation from '@/views/biz-modals/shop/map-location'\nimport CheckboxFacilityGroup from '@/views/biz-components/checkbox-facility/checkbox-facility-group'\nimport CheckboxFacilityItem from '@/views/biz-components/checkbox-facility/checkbox-facility-item'\nimport ShopHourPicker from '@/views/components/hour-picker#/hour-picker'\nimport StImageUpload from '@/views/components/image-upload#/image-upload'\nimport MoreInput from '@/views/components/more-input#/more-input.vue'\nimport { ruleOptions } from './edit.config'\n\nexport default {\n  name: 'PageShopSettingShopEdit',\n  components: {\n    CheckboxFacilityGroup,\n    CheckboxFacilityItem,\n    ShopHourPicker,\n    StImageUpload,\n    MoreInput\n  },\n  bem: {\n    edit: 'page-shop-setting-shop-edit'\n  },\n  modals: {\n    ShopMapLocation\n  },\n  serviceInject() {\n    return {\n      pattern: PatternService,\n      editService: EditService\n    }\n  },\n  rxState() {\n    return {\n      loading: this.editService.loading$,\n      serviceList: this.editService.serviceList$,\n      info: this.editService.info$\n    }\n  },\n  data() {\n    const form = this.$stForm.create()\n    const decorators = form.decorators(ruleOptions)\n    return {\n      form,\n      decorators,\n      flagList: [\n        '',\n        'shop-trial',\n        'shop-opening',\n        'shop-stop',\n        'shop-close',\n        'shop-holiday'\n      ],\n      shopPhones: [],\n      // 服务设施\n      serviceIds: [],\n      serviceIconIconList: {\n        1: 'WIFI',\n        2: 'park',\n        3: 'shower',\n        4: 'medical',\n        5: 'heating',\n        6: 'snow',\n        7: 'nosmoking',\n        8: 'energy'\n      },\n      // 图片\n      fileList: [],\n      imgList: [],\n      cropperModal: {},\n      weekTime: [],\n      shopPhoneValidateText: ''\n    }\n  },\n  computed: {},\n  mounted() {\n    this.init()\n  },\n  methods: {\n    init() {\n      this.form.setFieldsValue({\n        email: this.info.email\n      })\n      // 电话\n      this.shopPhones = cloneDeep(this.info.shop_phones)\n      // 服务设施\n      this.info.shop_services.forEach(i => {\n        this.serviceIds.push(i.service_id)\n      })\n      // 图片\n      this.imgList = cloneDeep(this.info.shop_images)\n      // 营业时间\n      this.weekTime = cloneDeep(this.info.business_time)\n    },\n    // 查看定位\n    location() {\n      this.$modalRouter.push({\n        name: 'shop-map-location',\n        props: {\n          lat: this.info.lat,\n          lng: this.info.lng\n        }\n      })\n    },\n    // 校验门店电话是否输入\n    shopPhoneValidator() {\n      const length = this.shopPhones.filter(i => i).length\n      this.shopPhoneValidateText = length ? '' : '请输入门店电话'\n      return this.shopPhoneValidateText\n    },\n    onShopPhoneChange(list) {\n      this.shopPhones = list\n      this.shopPhoneValidator()\n    },\n    // 图片\n    fileChange(data) {\n      this.imgList.push({\n        image_id: data[0].image_id,\n        image_key: data[0].image_key,\n        image_url: data[0].image_url,\n        is_cover: 0\n      })\n      this.fileList = []\n    },\n    // 设为店招\n    onSetCover(index) {\n      this.imgList.forEach(i => {\n        i.is_cover = 0\n      })\n      this.imgList[index].is_cover = 1\n      this.imgList.unshift(...this.imgList.splice(index, 1))\n    },\n    // 删除图片\n    onDelete(index) {\n      this.imgList.splice(index, 1)\n    },\n    // 提交\n    onSubmit() {\n      // 确认为提交表单校验\n      this.form.resetFields(['shopPhone'])\n      this.form.validate().then(values => {\n        if (this.shopPhoneValidator()) {\n          return\n        }\n        // 过滤空数据\n        this.shopPhones = this.shopPhones.filter(i => i)\n        this.editService\n          .edit({\n            shop_phones: this.shopPhones,\n            service_ids: this.serviceIds,\n            business_time: this.weekTime,\n            email: values.email,\n            shop_images: this.imgList\n          })\n          .subscribe(() => {\n            this.$router.push({ path: '/shop/setting/shop/info' })\n          })\n      })\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/pages/shop/setting/shop"}]}