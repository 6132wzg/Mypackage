{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/package/form/form-item#/reserve-course-species-form-item.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/package/form/form-item#/reserve-course-species-form-item.vue","mtime":1600926555701},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\n\nfunction _createForOfIteratorHelper(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(n); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { PACKAGE_ATTR } from \"./const.ts\";\nimport { cloneDeep } from 'lodash';\nexport default {\n  name: 'ReserveCourseSpeciesFormItem',\n  // 通过这个vueapi获取父组件的属性\n  inject: ['form'],\n  data: function data() {\n    return {\n      unit: '次',\n      help: '',\n      courseSetting: {\n        spec: -1\n      },\n      PACKAGE_ATTR: PACKAGE_ATTR,\n      // 可约课程种类 1 仅支持团课 2 仅支持私教课 3 既支持团课也支持私教课4支持团课和私教课总数\n      initSpecOptions: [{\n        value: 1,\n        labelOptions: [{\n          label: '仅支持预约团体课',\n          model: void 0,\n          validateText: '请填写支持预约团体课次数'\n        }]\n      }, {\n        value: 2,\n        labelOptions: [{\n          label: '仅支持预约私教课',\n          model: 0,\n          validateText: '请填写支持预约私教课次数'\n        }]\n      }, {\n        value: 3,\n        labelOptions: [{\n          label: '仅支持预约团体课',\n          model: 0,\n          validateText: '请填写支持预约团体课和私教课次数'\n        }, {\n          label: '和私教课',\n          model: 0,\n          validateText: '请填写支持预约团体课和私教课次数'\n        }]\n      }, {\n        value: 4,\n        labelOptions: [{\n          label: '支持预约团体课和私教课共',\n          model: 0,\n          validateText: '请填写支持预约团体课和私教课总共次数'\n        }]\n      }]\n    };\n  },\n  watch: {\n    courseSetting: {\n      deep: true,\n      handler: function handler(newValue) {\n        this.$emit('change', newValue);\n      }\n    },\n    specOptions: {\n      deep: true,\n      handler: function handler(newValue, oldValue) {\n        var spec = this.courseSetting.spec;\n        var labelOptions = newValue[spec - 1].labelOptions;\n        this.courseSetting = this.outDataFormat(labelOptions, spec);\n        this.helpText(labelOptions);\n      }\n    }\n  },\n  computed: {\n    initSpecOptionsMap: function initSpecOptionsMap() {\n      var map = {};\n\n      var _iterator = _createForOfIteratorHelper(this.initSpecOptions),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var item = _step.value;\n          map[item.value] = item;\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return map;\n    },\n    specOptions: function specOptions() {\n      var iso = this.initSpecOptions;\n      return this.mixinAttr ? iso : iso.filter(function (item) {\n        return item.value !== 4;\n      });\n    },\n    initInfo: function initInfo() {\n      return this.form.initInfo;\n    },\n    style: function style() {\n      return 'width: 121px';\n    },\n    unLimited: function unLimited() {\n      return this.form.unLimited;\n    },\n    mixinAttr: function mixinAttr() {\n      // 当是范围课程包且是限次的课程包才需要填写第四项私教和团课混合\n      return this.form.packageAttr === this.PACKAGE_ATTR.RANGE && !this.unLimited;\n    },\n    isInputTime: function isInputTime() {\n      // 当是范围课程包且是不限限次的课程包不需要填写第四项私教且次数也不需要填写\n      return !(this.form.packageAttr === this.PACKAGE_ATTR.RANGE && this.unLimited);\n    }\n  },\n  methods: {\n    outDataFormat: function outDataFormat(labelOptions, spec) {\n      var cs = {\n        spec: spec,\n        is_team: 0,\n        is_personal: 0,\n        team_times: 0,\n        personal_times: 0,\n        total_times: 0\n      };\n\n      if (spec === 1) {\n        cs.is_team = 1;\n        cs.team_times = labelOptions[0].model;\n      } else if (spec === 2) {\n        cs.is_personal = 1;\n        cs.personal_times = labelOptions[0].model;\n      } else if (spec === 3) {\n        cs.is_personal = 1;\n        cs.is_team = 1;\n        cs.team_times = labelOptions[0].model;\n        cs.personal_times = labelOptions[1].model;\n      } else if (spec === 4) {\n        cs.is_personal = 1;\n        cs.is_team = 1;\n        cs.is_total = 1;\n        cs.total_times = labelOptions[0].model;\n      }\n\n      return cs;\n    },\n    inDataFormat: function inDataFormat() {\n      var defaultSpec = 1;\n\n      if (!this.initInfo.course_setting) {\n        this.$set(this.courseSetting, 'spec', defaultSpec);\n        return;\n      }\n\n      var _this$initInfo$course = this.initInfo.course_setting,\n          is_team = _this$initInfo$course.is_team,\n          is_personal = _this$initInfo$course.is_personal,\n          total_times = _this$initInfo$course.total_times,\n          personal_times = _this$initInfo$course.personal_times,\n          team_times = _this$initInfo$course.team_times;\n\n      if (total_times > 0) {\n        defaultSpec = 4;\n        this.initSpecOptions[3].labelOptions[0].model = total_times;\n      } else if (is_team && is_personal) {\n        defaultSpec = 3;\n        this.initSpecOptions[2].labelOptions[0].model = team_times;\n        this.initSpecOptions[2].labelOptions[1].model = personal_times;\n      } else if (is_personal && !is_team) {\n        this.initSpecOptions[1].labelOptions[0].model = personal_times;\n        defaultSpec = 2;\n      } else if (is_team && !is_personal) {\n        this.initSpecOptions[0].labelOptions[0].model = team_times || '';\n        defaultSpec = 1;\n      }\n\n      this.$set(this.courseSetting, 'spec', defaultSpec);\n    },\n    helpText: function helpText(labelOptions) {\n      this.help = '';\n      if (this.unLimited) return;\n\n      for (var key in labelOptions) {\n        var _labelOptions$key = labelOptions[key],\n            model = _labelOptions$key.model,\n            validateText = _labelOptions$key.validateText;\n\n        if (!model) {\n          this.help = validateText;\n          return;\n        }\n      }\n    },\n    resetInputNumberValue: function resetInputNumberValue(spec) {\n      var iso = this.initSpecOptions.map(function (item) {\n        var labelOptions = item.labelOptions.map(function (ele) {\n          // 被选中的选项定为次数为1\n          ele.model = spec === item.value ? void 0 : 0;\n          return ele;\n        });\n        item.labelOptions = labelOptions;\n        return item;\n      });\n      this.initSpecOptions = iso;\n    },\n    onChange: function onChange(e) {\n      var val = e.target.value;\n      this.$set(this.courseSetting, 'spec', val);\n      this.resetInputNumberValue(val);\n      this.helpText(this.initSpecOptionsMap[val].labelOptions);\n    },\n    init: function init() {\n      this.inDataFormat();\n    }\n  },\n  mounted: function mounted() {\n    this.init();\n  }\n};",{"version":3,"sources":["reserve-course-species-form-item.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <st-form-item\n    label=\"可约课程种类\"\n    labelWidth=\"148px\"\n    :validateStatus=\"help ? 'error' : ''\"\n    :help=\"help\"\n    required\n  >\n    <a-radio-group\n      v-model=\"courseSetting.spec\"\n      @change=\"onChange\"\n      class=\"biz-package-form__course-spec\"\n    >\n      <a-radio\n        v-for=\"(item, index) in specOptions\"\n        :key=\"index\"\n        :class=\"{ 'mg-t16': index !== 0 }\"\n        :value=\"item.value\"\n      >\n        <template v-for=\"label in item.labelOptions\">\n          <span :key=\"label.label\">\n            <span>{{ label.label }}</span>\n            <st-input-number\n              v-model=\"label.model\"\n              class=\"mg-l20 mg-r20\"\n              :min=\"0\"\n              :max=\"99999\"\n              :disabled=\"!(item.value === courseSetting.spec)\"\n              v-if=\"isInputTime\"\n              :style=\"style\"\n            >\n              <template slot=\"addonAfter\">{{ unit }}</template>\n            </st-input-number>\n          </span>\n        </template>\n      </a-radio>\n    </a-radio-group>\n  </st-form-item>\n</template>\n\n<script>\nimport { PACKAGE_ATTR } from './const.ts'\nimport { cloneDeep } from 'lodash'\nexport default {\n  name: 'ReserveCourseSpeciesFormItem',\n  // 通过这个vueapi获取父组件的属性\n  inject: ['form'],\n  data() {\n    return {\n      unit: '次',\n      help: '',\n      courseSetting: { spec: -1 },\n      PACKAGE_ATTR,\n      // 可约课程种类 1 仅支持团课 2 仅支持私教课 3 既支持团课也支持私教课4支持团课和私教课总数\n      initSpecOptions: [\n        {\n          value: 1,\n          labelOptions: [\n            {\n              label: '仅支持预约团体课',\n              model: void 0,\n              validateText: '请填写支持预约团体课次数'\n            }\n          ]\n        },\n        {\n          value: 2,\n          labelOptions: [\n            {\n              label: '仅支持预约私教课',\n              model: 0,\n              validateText: '请填写支持预约私教课次数'\n            }\n          ]\n        },\n        {\n          value: 3,\n          labelOptions: [\n            {\n              label: '仅支持预约团体课',\n              model: 0,\n              validateText: '请填写支持预约团体课和私教课次数'\n            },\n            {\n              label: '和私教课',\n              model: 0,\n              validateText: '请填写支持预约团体课和私教课次数'\n            }\n          ]\n        },\n        {\n          value: 4,\n          labelOptions: [\n            {\n              label: '支持预约团体课和私教课共',\n              model: 0,\n              validateText: '请填写支持预约团体课和私教课总共次数'\n            }\n          ]\n        }\n      ]\n    }\n  },\n  watch: {\n    courseSetting: {\n      deep: true,\n      handler(newValue) {\n        this.$emit('change', newValue)\n      }\n    },\n    specOptions: {\n      deep: true,\n      handler(newValue, oldValue) {\n        let { spec } = this.courseSetting\n        const labelOptions = newValue[spec - 1].labelOptions\n        this.courseSetting = this.outDataFormat(labelOptions, spec)\n        this.helpText(labelOptions)\n      }\n    }\n  },\n  computed: {\n    initSpecOptionsMap() {\n      let map = {}\n      for (let item of this.initSpecOptions) {\n        map[item.value] = item\n      }\n      return map\n    },\n    specOptions() {\n      let iso = this.initSpecOptions\n      return this.mixinAttr ? iso : iso.filter(item => item.value !== 4)\n    },\n    initInfo() {\n      return this.form.initInfo\n    },\n    style() {\n      return 'width: 121px'\n    },\n    unLimited() {\n      return this.form.unLimited\n    },\n    mixinAttr() {\n      // 当是范围课程包且是限次的课程包才需要填写第四项私教和团课混合\n      return (\n        this.form.packageAttr === this.PACKAGE_ATTR.RANGE && !this.unLimited\n      )\n    },\n    isInputTime() {\n      // 当是范围课程包且是不限限次的课程包不需要填写第四项私教且次数也不需要填写\n      return !(\n        this.form.packageAttr === this.PACKAGE_ATTR.RANGE && this.unLimited\n      )\n    }\n  },\n  methods: {\n    outDataFormat(labelOptions, spec) {\n      const cs = {\n        spec,\n        is_team: 0,\n        is_personal: 0,\n        team_times: 0,\n        personal_times: 0,\n        total_times: 0\n      }\n      if (spec === 1) {\n        cs.is_team = 1\n        cs.team_times = labelOptions[0].model\n      } else if (spec === 2) {\n        cs.is_personal = 1\n        cs.personal_times = labelOptions[0].model\n      } else if (spec === 3) {\n        cs.is_personal = 1\n        cs.is_team = 1\n        cs.team_times = labelOptions[0].model\n        cs.personal_times = labelOptions[1].model\n      } else if (spec === 4) {\n        cs.is_personal = 1\n        cs.is_team = 1\n        cs.is_total = 1\n        cs.total_times = labelOptions[0].model\n      }\n      return cs\n    },\n    inDataFormat() {\n      let defaultSpec = 1\n      if (!this.initInfo.course_setting) {\n        this.$set(this.courseSetting, 'spec', defaultSpec)\n        return\n      }\n      const {\n        is_team,\n        is_personal,\n        total_times,\n        personal_times,\n        team_times\n      } = this.initInfo.course_setting\n      if (total_times > 0) {\n        defaultSpec = 4\n        this.initSpecOptions[3].labelOptions[0].model = total_times\n      } else if (is_team && is_personal) {\n        defaultSpec = 3\n        this.initSpecOptions[2].labelOptions[0].model = team_times\n        this.initSpecOptions[2].labelOptions[1].model = personal_times\n      } else if (is_personal && !is_team) {\n        this.initSpecOptions[1].labelOptions[0].model = personal_times\n        defaultSpec = 2\n      } else if (is_team && !is_personal) {\n        this.initSpecOptions[0].labelOptions[0].model = team_times || ''\n        defaultSpec = 1\n      }\n      this.$set(this.courseSetting, 'spec', defaultSpec)\n    },\n    helpText(labelOptions) {\n      this.help = ''\n      if (this.unLimited) return\n      for (let key in labelOptions) {\n        const { model, validateText } = labelOptions[key]\n        if (!model) {\n          this.help = validateText\n          return\n        }\n      }\n    },\n    resetInputNumberValue(spec) {\n      let iso = this.initSpecOptions.map(item => {\n        let labelOptions = item.labelOptions.map(ele => {\n          // 被选中的选项定为次数为1\n          ele.model = spec === item.value ? void 0 : 0\n          return ele\n        })\n        item.labelOptions = labelOptions\n        return item\n      })\n      this.initSpecOptions = iso\n    },\n    onChange(e) {\n      const val = e.target.value\n      this.$set(this.courseSetting, 'spec', val)\n      this.resetInputNumberValue(val)\n      this.helpText(this.initSpecOptionsMap[val].labelOptions)\n    },\n    init() {\n      this.inDataFormat()\n    }\n  },\n  mounted() {\n    this.init()\n  }\n}\n</script>\n"],"sourceRoot":"src/views/biz-components/package/form/form-item#"}]}