{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js!/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src-entries/account/views/pages/account/login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src-entries/account/views/pages/account/login.vue","mtime":1596188219468},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js","mtime":1591062572352},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { UserService } from '@/services/user.service';\nimport { AuthService } from '@/services/auth.service';\nimport { LoginService } from \"./login.service\";\nimport mobile from \"./login#/mobile\";\nimport user from \"./login#/user\";\nimport bind from \"./login#/bind\";\nimport { NoCaptchaService } from '@/services/no-captcha.service';\nimport { throwError } from 'rxjs';\nimport Copyright from '@/views/biz-components/copyright/copyright';\nexport default {\n  name: 'Login',\n  serviceInject: function serviceInject() {\n    return {\n      loginService: LoginService,\n      userService: UserService,\n      authService: AuthService,\n      noCaptchaService: NoCaptchaService\n    };\n  },\n  data: function data() {\n    return {\n      loginType: '',\n      typeNames: {\n        weibo: '微博登录',\n        qq: 'qq登录',\n        alipay: '支付宝登录',\n        wechat: '微信登录'\n      },\n      findPasswordTypes: [{\n        key: 'mobilefind',\n        name: '手机找回'\n      }, {\n        key: 'emailfind',\n        name: '邮件找回'\n      }],\n      loginTypes: [{\n        key: 'user',\n        name: '用户密码登录'\n      }, {\n        key: 'mobile',\n        name: '手机验证码登录'\n      }],\n      countryInfo: {}\n    };\n  },\n  components: {\n    LoginMobile: mobile,\n    LoginBind: bind,\n    LoginUser: user,\n    Copyright: Copyright\n  },\n  rxState: function rxState() {\n    return {\n      isBind: this.loginService.isBind$,\n      loading: this.loginService.loading$\n    };\n  },\n  mounted: function mounted() {\n    if (this.isBind) {\n      this.loginType = 'bind';\n    } else {\n      this.loginType = 'user';\n    }\n  },\n  computed: {\n    switchLoginTypeIsShow: function switchLoginTypeIsShow() {\n      var types = ['user', 'mobile', 'qrcode', 'bind'];\n      return types.includes(this.loginType);\n    }\n  },\n  methods: {\n    onClickChangeType: function onClickChangeType(key) {\n      this.loginType = key;\n    },\n    onFindPassword: function onFindPassword() {\n      this.loginType = 'mobilefind';\n    },\n    onThird: function onThird(type) {\n      this.loginType = type;\n    },\n    onClickBack: function onClickBack() {\n      this.loginType = 'user';\n    },\n    bindBackLogin: function bindBackLogin() {\n      if (this.loginType === 'bind') {\n        this.loginType = 'mobile';\n      }\n    },\n    onLogin: function onLogin(params) {\n      var _this = this;\n\n      // params.nvc_val = window.getNVCVal()\n      var nvc_val = this.noCaptchaService.generateNVCVal();\n\n      if (!nvc_val) {\n        return;\n      }\n\n      params.nvc_val = nvc_val;\n      this.loginService.loginAccount(params).subscribe(function (res) {\n        _this.noCaptchaService.resetNVC();\n\n        localStorage.clear();\n        location.href = '/';\n      }, this.loginErrorHandler);\n    },\n    loginErrorHandler: function loginErrorHandler(err) {\n      var code = err.response.code;\n\n      if (this.noCaptchaService.testIsNeedCallCaptcha(code)) {\n        this.noCaptchaService.callCaptcha(code);\n        return;\n      }\n\n      this.noCaptchaService.resetNVC();\n    },\n    // 切换登录方式\n    switchLoginType: function switchLoginType() {\n      this.loginType = this.loginType === 'qrcode' ? 'user' : 'qrcode';\n    },\n    onBind: function onBind(event) {\n      this.loginType = 'bind';\n      this.countryInfo = event;\n    },\n    onClickBind: function onClickBind(params) {\n      var _this2 = this;\n\n      this.loginService.bindPhoneForAccount(params).subscribe(function (res) {\n        _this2.countryInfo = {};\n        location.href = '/';\n      });\n    }\n  }\n};",null]}