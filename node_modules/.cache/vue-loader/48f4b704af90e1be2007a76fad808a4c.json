{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/setting/mina/pay-config.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/setting/mina/pay-config.vue","mtime":1591147717356},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { PayConfigService } from './pay-config.service'\nimport PemUploadComponent from './components#/pem-upload.component'\nexport default {\n  bem: {\n    pay: 'brand-setting-mina-pay-config'\n  },\n  serviceInject() {\n    return {\n      payConfigService: PayConfigService\n    }\n  },\n  components: {\n    PemUploadComponent\n  },\n  data() {\n    return {\n      form: this.$form.createForm(this),\n      payConfig: {\n        mch_name: [\n          'mch_name',\n          {\n            rules: [\n              {\n                required: true,\n                message: '请填写商户名称'\n              }\n            ]\n          }\n        ],\n        mch_id: [\n          'mch_id',\n          {\n            rules: [\n              {\n                required: true,\n                message: '请填写微信商户号'\n              }\n            ]\n          }\n        ],\n        key: [\n          'key',\n          {\n            rules: [\n              {\n                required: true,\n                message: '请填写API密钥'\n              }\n            ]\n          }\n        ],\n        cert_pem: ['cert_pem'],\n        key_pem: ['key_pem']\n      }\n    }\n  },\n  methods: {\n    uploadPemSuccess(key) {\n      this.form.setFieldsValue({\n        cert_pem: key\n      })\n    },\n    uploadSecretKeySuccess(key) {\n      this.form.setFieldsValue({\n        key_pem: key\n      })\n    },\n    trim(str) {\n      return str.replace(/(^\\s*)|(\\s*$)/g, '')\n    },\n    save() {\n      let self = this\n      this.form.validateFields((err, values) => {\n        if (!err) {\n          values.mch_name = this.trim(values.mch_name)\n          values.mch_id = this.trim(values.mch_id)\n          values.key = this.trim(values.key)\n          self.payConfigService.saveMch(values).subscribe(() => {\n            self.$router.push({\n              path: '/brand/setting/mina/auth-callback?type=payConfig'\n            })\n          })\n        }\n      })\n    },\n    back() {\n      this.$router.back()\n    },\n    skip() {\n      this.$router.push({\n        name: 'brand-setting-mina-index'\n      })\n    }\n  }\n}\n",null]}