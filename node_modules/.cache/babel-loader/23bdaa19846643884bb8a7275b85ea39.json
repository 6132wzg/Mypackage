{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js!/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/staff/edit#/edit-coach-info.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/staff/edit#/edit-coach-info.vue","mtime":1597895242242},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js","mtime":1591062572352},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.set\";\nimport _toConsumableArray from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { EditService } from \"../edit.service\";\nimport { MessageService } from '@/services/message.service';\nimport { PatternService } from '@/services/pattern.service';\nimport { ruleOptions } from \"../staff-form.config.ts\";\nimport StImageUpload from '@/views/biz-components/st/image-upload/image-upload.vue';\nexport default {\n  name: 'EditCoachInfo',\n  serviceInject: function serviceInject() {\n    return {\n      pattern: PatternService,\n      service: EditService,\n      message: MessageService\n    };\n  },\n  components: {\n    StImageUpload: StImageUpload\n  },\n  rxState: function rxState() {\n    return {\n      loading: this.service.loading$\n    };\n  },\n  props: {\n    data: {\n      type: Object\n    },\n    staffSpecialty: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  data: function data() {\n    var form = this.$stForm.create();\n    var decorators = form.decorators(ruleOptions);\n    return {\n      form: form,\n      decorators: decorators,\n      coachInfoData: {\n        certification_name: []\n      },\n      fileList: [],\n      checked: false\n    };\n  },\n  mounted: function mounted() {\n    this.setData(this.data);\n  },\n  methods: {\n    onChangeGetShowImage: function onChangeGetShowImage(imageFiles) {\n      this.image_personal = cloneDeep(imageFiles);\n    },\n    onChangeSpecialtyId: function onChangeSpecialtyId(v) {\n      if (v.length > 10) {\n        v.pop();\n      }\n    },\n    onClickBack: function onClickBack() {\n      this.$emit('back', 1);\n    },\n    imageUploadChange: function imageUploadChange(e) {\n      this.image_personal = e;\n    },\n    onChooseSpecialty: function onChooseSpecialty(e) {\n      console.log(e);\n    },\n    setData: function setData(obj) {\n      this.form.setFieldsValue({\n        employment_time: obj.employment_time ? moment(obj.employment_time) : undefined,\n        introduction: obj.introduction,\n        specialty_id: obj.specialty_id\n      });\n      this.fileList = obj.image_personal;\n      this.coachInfoData.certification_name = obj.certification_name ? obj.certification_name : [];\n    },\n    goNext: function goNext(e) {\n      var _this = this;\n\n      this.form.validate().then(function (values) {\n        _this.submit(_this.form.getFieldsValue(), 1);\n      });\n    },\n    submit: function submit(data, saveOrgoNext) {\n      var _this2 = this;\n\n      if (data.employment_time) {\n        data.employment_time = data.employment_time.format('YYYY-MM-DD');\n      } else {\n        data.employment_time = undefined;\n      }\n\n      data.certification_name = this.coachInfoData.certification_name;\n      data.image_personal = this.fileList;\n      data.album_id = this.data.album_id;\n      this.service.updateCoachInfo(this.data.staff_id, data).subscribe(function (res) {\n        _this2.$router.push({\n          name: 'shop-staff-list'\n        });\n      });\n    },\n    // 新增证书\n    onAddProfess: function onAddProfess() {\n      var _this3 = this;\n\n      // input框里有值才新增\n      this.form.validate(['certification_name']).then(function (values) {\n        var arr = _toConsumableArray(_this3.coachInfoData.certification_name);\n\n        if (values.certification_name) {\n          arr.push(values.certification_name);\n          _this3.coachInfoData.certification_name = _toConsumableArray(new Set(arr));\n\n          _this3.form.setFieldsValue({\n            certification_name: ''\n          });\n        }\n      });\n    },\n    // 移除证书\n    onProfessRule: function onProfessRule(index) {\n      this.coachInfoData.certification_name.splice(index, 1);\n    }\n  }\n};",null]}