{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/tpl/plugin/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/tpl/plugin/index.vue","mtime":1600926556717},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport MarketingTitle from '@/views/pages/brand/marketing/components#/marketing-title'\nimport tableMixin from '@/mixins/table.mixin'\nimport { columns } from './index.config'\nimport { IndexService } from './index.service'\n/**\n * 使用枚举值 引入常量\n */\nimport { ACTIVITY_STATUS } from '@/constants/marketing/activity'\n\nexport default {\n  bem: {\n    // page-页面路由名称\n    bPage: 'page-tpl-plugin-index'\n  },\n  components: {\n    MarketingTitle\n  },\n  mixins: [tableMixin],\n  serviceInject() {\n    return {\n      indexService: IndexService\n    }\n  },\n  rxState() {\n    /**\n     * @type {IndexService}\n     */\n    const {\n      activityStatusOptions$,\n      list$,\n      loading$,\n      page$,\n      auth$\n    } = this.indexService\n    return {\n      activityStatusOptions$,\n      list$,\n      loading$,\n      page$,\n      auth$\n    }\n  },\n  data() {\n    return {\n      ACTIVITY_STATUS\n    }\n  },\n  computed: {\n    columns\n  },\n  methods: {\n    onAdd() {\n      this.$router.push({\n        path: './add'\n      })\n    },\n    onEdit(record) {\n      this.$router.push({\n        path: './edit',\n        query: { id: record.id }\n      })\n    }\n  }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/pages/tpl/plugin","sourcesContent":["<template>\n  <st-panel-layout :class=\"bPage()\">\n    <marketing-title pathName=\"brand-plugin-points-mall\"></marketing-title>\n    <st-panel app>\n      <div slot=\"title\">\n        <st-button v-if=\"auth$.add\" @click=\"onAdd\" type=\"primary\" icon=\"add\">\n          新增活动\n        </st-button>\n        <st-button v-if=\"auth$.checkIn\" class=\"mg-l8\">\n          签到验票\n        </st-button>\n      </div>\n      <div slot=\"actions\">\n        <!-- 默认需要绑定`全部`选项 在route-map.config.ts中配置queryOptions -->\n        <!-- onSingleSearch tableMixin中的方法 -->\n        <a-select\n          placeholder=\"选择活动报名状态\"\n          v-model=\"$searchQuery.activity_status\"\n          :options=\"activityStatusOptions$\"\n          @change=\"onSingleSearch('activity_status', $event)\"\n          style=\"width:160px\"\n        ></a-select>\n        <!-- onKeywordsSearch 查询关键词 tableMixin中的方法  -->\n        <st-input-search\n          class=\"mg-l8\"\n          placeholder=\"请输入活动报名标题\"\n          @search=\"onKeywordsSearch('activity_name', $event)\"\n        ></st-input-search>\n      </div>\n      <!-- scroll x 根据表格的实际内容宽度而定，列比较少的可以小些或者不要，列多的设的大些 -->\n      <!-- onTableChange为  tableMixin方法 -->\n      <!-- 使用loading态 -->\n      <st-table\n        :scroll=\"{ x: 1200 }\"\n        rowKey=\"id\"\n        :dataSource=\"list$\"\n        :columns=\"columns\"\n        :page=\"page$\"\n        :loading=\"loading$.getList\"\n        @change=\"onTableChange\"\n      >\n        <st-text\n          slot=\"activity_status\"\n          slot-scope=\"text, record\"\n          :status=\"{\n            error: record.activity_status.id === ACTIVITY_STATUS.END,\n            success:\n              record.activity_status.id === ACTIVITY_STATUS.PUBLISHED ||\n              record.activity_status.id === ACTIVITY_STATUS.STARTED,\n            default:\n              record.activity_status.id === ACTIVITY_STATUS.DRAFT ||\n              record.activity_status.id === ACTIVITY_STATUS.CANCEL\n          }\"\n        >\n          {{ text.name }}\n        </st-text>\n        <st-table-actions slot=\"actions\" slot-scope=\"text, record\">\n          <a\n            v-if=\"record.auth['brand:activity:sign_up|edit']\"\n            @click=\"onEdit(record)\"\n          >\n            编辑\n          </a>\n          <a\n            v-if=\"record.auth['brand:activity:sign_up|promotion']\"\n            @click=\"onGeneralize(record)\"\n          >\n            推广\n          </a>\n          <a\n            v-if=\"record.auth['brand:activity:sign_up|end']\"\n            @click=\"onStop(record)\"\n          >\n            取消\n          </a>\n        </st-table-actions>\n      </st-table>\n    </st-panel>\n  </st-panel-layout>\n</template>\n\n<script>\nimport MarketingTitle from '@/views/pages/brand/marketing/components#/marketing-title'\nimport tableMixin from '@/mixins/table.mixin'\nimport { columns } from './index.config'\nimport { IndexService } from './index.service'\n/**\n * 使用枚举值 引入常量\n */\nimport { ACTIVITY_STATUS } from '@/constants/marketing/activity'\n\nexport default {\n  bem: {\n    // page-页面路由名称\n    bPage: 'page-tpl-plugin-index'\n  },\n  components: {\n    MarketingTitle\n  },\n  mixins: [tableMixin],\n  serviceInject() {\n    return {\n      indexService: IndexService\n    }\n  },\n  rxState() {\n    /**\n     * @type {IndexService}\n     */\n    const {\n      activityStatusOptions$,\n      list$,\n      loading$,\n      page$,\n      auth$\n    } = this.indexService\n    return {\n      activityStatusOptions$,\n      list$,\n      loading$,\n      page$,\n      auth$\n    }\n  },\n  data() {\n    return {\n      ACTIVITY_STATUS\n    }\n  },\n  computed: {\n    columns\n  },\n  methods: {\n    onAdd() {\n      this.$router.push({\n        path: './add'\n      })\n    },\n    onEdit(record) {\n      this.$router.push({\n        path: './edit',\n        query: { id: record.id }\n      })\n    }\n  }\n}\n</script>\n"]}]}