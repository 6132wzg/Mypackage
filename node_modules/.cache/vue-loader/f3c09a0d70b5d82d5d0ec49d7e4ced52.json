{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/fragments/shop/switch.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/fragments/shop/switch.vue","mtime":1591147717282},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { fromEvent } from 'rxjs'\nimport { tap, debounceTime } from 'rxjs/operators'\nimport { MessageService } from '@/services/message.service'\nimport { SwitchService } from './switch.service'\nimport { UserService } from '@/services/user.service'\n\nexport default {\n  name: 'SwtichShopDrawer',\n  serviceProvider() {\n    return [SwitchService]\n  },\n  serviceInject() {\n    return {\n      messageService: MessageService,\n      switchService: SwitchService,\n      userService: UserService\n    }\n  },\n  rxState() {\n    const { shopList$, loading$ } = this.switchService\n    return {\n      shopList: shopList$,\n      loading: loading$,\n      shop: this.userService.shop$,\n      isShop: this.userService.isShop$\n    }\n  },\n  data() {\n    return {\n      /**\n       * Drawer 是否可见\n       */\n      visible: false,\n      /**\n       * 是否显示右上角的关闭按钮\n       */\n      closable: false,\n      keyword: '',\n      list: [],\n      isShowShadow: false\n    }\n  },\n  props: {\n    value: {\n      type: Boolean,\n      default: false\n    }\n  },\n  watch: {\n    value(val) {\n      this.visible = val\n      this.onSearch()\n    }\n  },\n  computed: {\n    currentShopId() {\n      return this.shop.id\n    }\n  },\n  methods: {\n    onClose() {\n      this.visible = false\n      this.$emit('input', false)\n    },\n    onSwitchShop(shop) {\n      const params = {\n        shop_id: shop.shop_id\n      }\n      this.switchService.switchShop(params).subscribe(this.onClose)\n    },\n    switchBackToBrand() {\n      this.switchService.switchBackToBrand().subscribe(this.onClose)\n    },\n    onSearch() {\n      let { shopList } = this\n      const list = []\n      shopList.forEach(item => {\n        if (item.shop_name.toLowerCase().includes(this.keyword.toLowerCase())) {\n          list.push(item)\n        }\n      })\n      this.list = list\n    },\n    onChange() {\n      this.onSearch(this.keyword)\n    }\n  }\n}\n",null]}