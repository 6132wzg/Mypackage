(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tier-4~brand-stat-orders~brand-stat-revenue~shop-stat-orders~shop-stat-revenue"],{"9ab6":function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));r("6b54"),r("2397");var n=r("d225"),o=r("b0b4"),a=r("308d"),s=r("6bb5"),d=r("4e2b"),i=r("de46");function u(e){return function(){var t,r=Object(s["a"])(e);if(c()){var n=Object(s["a"])(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return Object(a["a"])(this,t)}}function c(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var p=function(e){Object(d["a"])(r,e);var t=u(r);function r(){var e;return Object(n["a"])(this,r),e=t.apply(this,arguments),e.RevenueMap$={"brand-revenue-gather":"/v1/report/revenue/brand/revenue_everyday_list","brand-revenue-product":"/v1/report/revenue/brand/product/revenue_everyday_list","shop-revenue-gather":"/v1/report/revenue/shop/revenue_everyday_list","shop-revenue-product":"/v1/report/revenue/shop/product/revenue_everyday_list"},e.OrderMap$={"brand-revenue-gather":"/v1/report/revenue/brand/revenue_order_list","brand-revenue-product":"/v1/report/revenue/brand/product/revenue_order_list","brand-orders-gather":"/v1/report/order-collect/brand/order_list","shop-revenue-gather":"/v1/report/revenue/shop/revenue_order_list","shop-revenue-product":"/v1/report/revenue/shop/product/revenue_order_list","shop-orders-gather":"/v1/report/order-collect/shop/order_list","brand-orders-analyse":"/v1/report/order-analysis/brand/order_list","shop-orders-analyse":"/v1/report/order-analysis/shop/order_list"},e.PerOrderMap$={"brand-orders-analyse":"/v1/report/order-analysis/brand/order_per_price","shop-orders-analyse":"/v1/report/order-analysis/shop/order_per_price"},e}return Object(o["a"])(r,[{key:"getRevenueList",value:function(e,t){var r=this.RevenueMap$[t];return this.http.get(r,{query:e})}},{key:"getOrderList",value:function(e,t){return this.http.get(this.OrderMap$[t],{query:e})}},{key:"getPerOrderList",value:function(e,t){return this.http.get(this.PerOrderMap$[t],{query:e})}}]),r}(i["a"])},f35f:function(e,t,r){"use strict";var n,o,a,s,d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("st-modal",{class:e.b(),attrs:{wrapClassName:"modal-stat-order-detail",title:e.title,width:"1140px",loading:e.loading.getOrderList,footer:!1},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[r("st-table",{attrs:{rowKey:function(e,t){return e.order_id||e.id||Math.random()},scroll:{x:1600,y:340},columns:e.columns,loading:e.loading.getOrderList,dataSource:e.list,pagination:{simple:!0},page:e.page},on:{change:e.onModalTableChange},scopedSlots:e._u([{key:"product_type",fn:function(t){return r("span",{},[e._v("\n      "+e._s(e.productType[t])+"\n    ")])}},{key:"pay_finished_time",fn:function(t){return r("span",{},[e._v("\n      "+e._s(t||"--")+"\n    ")])}},{key:"discount_price",fn:function(t){return r("span",{},[e._v("\n      "+e._s(t||"--")+"\n    ")])}},{key:"refund_price",fn:function(t){return r("span",{},[e._v("\n      "+e._s(t||"--")+"\n    ")])}},{key:"staff_sale_name",fn:function(t){return r("span",{},[e._v("\n      "+e._s(t||"--")+"\n    ")])}},{key:"order_id",fn:function(t){return r("span",{},[e._v("\n      "+e._s(t||"--")+"\n    ")])}},{key:"order_status",fn:function(t,n){return r("a-badge",{attrs:{status:2===n.order_status?"success":"default",text:e.orderStatus[t]+(e.refundReason[n.refund_reason]?"("+e.refundReason[n.refund_reason]+")":" ")}})}},{key:"member_mobile",fn:function(t,n){return r("span",{},[e._v("\n      "+e._s(n.parent_id>0?n.parent_mobile+"("+n.parent_user_role+")":t)+"\n    ")])}}])}),e.authExport?r("st-button",{directives:[{name:"export-excel",rawName:"v-export-excel",value:e.exportParams,expression:"exportParams"}],staticStyle:{position:"absolute",bottom:"0",left:"0"},attrs:{disabled:!e.list.length,type:"primary"}},[e._v("\n    全部导出\n  ")]):e._e()],1)},i=[],u=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),c=(r("6762"),r("2fdb"),function(){return[{title:"商品类型",scopedSlots:{customRender:"product_type"},width:140,dataIndex:"product_type"},{title:"商品名称",width:140,dataIndex:"product_name"},{title:"支付时间",width:110,scopedSlots:{customRender:"pay_finished_time"},dataIndex:"pay_finished_time"},{title:"门店名称",width:100,dataIndex:"shop_name"},{title:"状态",scopedSlots:{customRender:"order_status"},width:100,dataIndex:"order_status"},{title:"原价(元)",width:80,dataIndex:"total_price"},{title:"减免(元)",width:80,dataIndex:"reduce_price"},{title:"优惠(元)",width:80,scopedSlots:{customRender:"discount_price"},dataIndex:"discount_price"},{title:"实收(元)",width:80,dataIndex:"pay_price"},{title:"退款",width:80,scopedSlots:{customRender:"refund_price"},dataIndex:"refund_price"},{title:"会员姓名",width:100,dataIndex:"member_name"},{title:"手机号",scopedSlots:{customRender:"member_mobile"},width:120,dataIndex:"member_mobile"},{title:"销售",width:100,scopedSlots:{customRender:"staff_sale_name"},dataIndex:"staff_sale_name"},{title:"订单编号",width:160,scopedSlots:{customRender:"order_id"},dataIndex:"order_id"},{title:"创建时间",width:110,scopedSlots:{customRender:"created_time"},dataIndex:"created_time"}]}),p=r("ea3e"),l=r("d225"),h=r("b0b4"),f=r("9ab4"),b=r("0cd5"),_=r("df29"),v=r("c4cc"),y=r("2cbb"),m=r("9ab6"),g=r("2138"),O=function(){function e(t,r,n){Object(l["a"])(this,e),this.ordersApi=t,this.authService=r,this.userService=n,this.list$=new _["d"]([]),this.page$=new _["d"]({}),this.loading$=new _["d"]({}),this.auth$=this.authService.authMap$({brandExport:"brand:stat:revenue|order_export",shopExport:"shop:stat:revenue|order_export"}),this.orderStatus$=this.userService.getEnumValue$("finance.order_status"),this.productType$=this.userService.getEnumValue$("report.revenue_product_type"),this.refundReason$=this.userService.getEnumValue$("report.report_refund_reason")}return Object(h["a"])(e,[{key:"getOrderList",value:function(e,t){var r=this;return this.list$.commit((function(){return[]})),this.ordersApi.getOrderList(e,t).pipe(Object(v["a"])((function(e){r.list$.commit((function(){return e.list})),r.page$.commit((function(){return e.page}))})))}}]),e}();function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){Object(u["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Object(f["b"])([Object(_["c"])(),Object(f["d"])("design:type",Function),Object(f["d"])("design:paramtypes",["function"===typeof(n="undefined"!==typeof m["OrdersDataParams"]&&m["OrdersDataParams"])?n:Object,String]),Object(f["d"])("design:returntype",void 0)],O.prototype,"getOrderList",null),O=Object(f["b"])([Object(b["b"])(),Object(f["d"])("design:paramtypes",["function"===typeof(o="undefined"!==typeof m["a"]&&m["a"])?o:Object,"function"===typeof(a="undefined"!==typeof y["a"]&&y["a"])?a:Object,"function"===typeof(s="undefined"!==typeof g["a"]&&g["a"])?s:Object])],O);var j={name:"OrderDetail",mixins:[p["a"]],bem:{b:"modal-stat-order-detail"},serviceInject:function(){return{orderService:O}},rxState:function(){var e=this.orderService,t=e.list$,r=e.page$,n=e.auth$,o=e.orderStatus$,a=e.productType$,s=e.refundReason$,d=e.loading$;return{list:t,page:r,auth:n,orderStatus:o,productType:a,refundReason:s,loading:d}},props:{query:{type:Object,default:function(){return{}}},title:String,type:String},data:function(){return{show:!1,modalQuery:{current_page:1,size:10}}},computed:{columns:c,authExport:function(){return this.type.includes("brand")?this.auth.brandExport:this.auth.shopExport},exportParams:function(){var e={"brand-revenue-gather":"brand/revenue-order","brand-revenue-product":"brand/revenue-order","shop-revenue-gather":"shop/revenue-order","shop-revenue-product":"shop/revenue-order","brand-orders-gather":"brand/order_collect_order_list_export","shop-orders-gather":"shop/order_collect_export","brand-orders-analyse":"brand/order_analysis_order_list_export","shop-orders-analyse":"shop/analysis_order_export"},t=e[this.type]||"";return{type:t,query:this.query}},searchQuery:function(){return w({},this.query,{},this.modalQuery)}},methods:{getList:function(){this.orderService.getOrderList(this.searchQuery,this.type).subscribe()},onModalTableChange:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.modalQuery=w({},this.modalQuery,{},this.getTableQuery.apply(this,[e].concat(r))),this.getList()}},mounted:function(){this.getList()}},S=j,$=r("2877"),R=Object($["a"])(S,d,i,!1,null,null,null);t["a"]=R.exports}}]);