{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/finance/edit-performance-template.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/finance/edit-performance-template.vue","mtime":1597396799934},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { MessageService } from '@/services/message.service'\nimport { EditTemplateService } from './edit-performance-template.service'\nimport { forEach } from 'lodash-es'\nimport { ruleOptions } from './performance-template.config'\nimport { PERFORMANCE } from '@/constants/finance/performance'\nexport default {\n  serviceInject() {\n    return {\n      service: EditTemplateService,\n      message: MessageService\n    }\n  },\n  rxState() {\n    return {\n      performanceModes: this.service.performanceModes$,\n      performanceTypes: this.service.performanceTypes$\n    }\n  },\n  data() {\n    const form = this.$stForm.create()\n    const decorators = form.decorators(ruleOptions)\n    return {\n      PERFORMANCE,\n      form,\n      decorators,\n      data: [],\n      gradients: {\n        range_min: '',\n        royalty_num: ''\n      },\n      show: false,\n      choose: 1, // 1 百分比 0 金额\n      isChooseks: true, // 是否选中课时\n      performance_type: 1,\n      performance_mode: 1,\n      infodata: {}\n    }\n  },\n  watch: {\n    performance_type: function(newValue, oldValue) {\n      if (\n        newValue === PERFORMANCE.PERFORMANCE_TYPE_1 ||\n        newValue === PERFORMANCE.PERFORMANCE_TYPE_2\n      ) {\n        this.isChooseks = true\n      } else if (newValue === 3) {\n        this.isChooseks = false\n      }\n    }\n  },\n  props: {\n    id: Number\n  },\n  computed: {\n    placeholderGradient() {\n      if (this.performance_type == this.PERFORMANCE.PERFORMANCE_TYPE_1) {\n        return '请输入月销售额'\n      }\n      if (this.performance_type == this.PERFORMANCE.PERFORMANCE_TYPE_2) {\n        return '请输入月课时价值'\n      }\n      if (this.performance_type == this.PERFORMANCE.PERFORMANCE_TYPE_3) {\n        return '请输入月课时数'\n      }\n      return '请输入'\n    },\n    errorMessageTip() {\n      if (this.performance_type == this.PERFORMANCE.PERFORMANCE_TYPE_1) {\n        return '月销售额不能重复'\n      }\n      if (this.performance_type == this.PERFORMANCE.PERFORMANCE_TYPE_2) {\n        return '月课时价值不能重复'\n      }\n      if (this.performance_type == this.PERFORMANCE.PERFORMANCE_TYPE_3) {\n        return '月课时数不能重复'\n      }\n      return '请输入'\n    },\n    placeholderGradientFee() {\n      if (this.performance_type == this.PERFORMANCE.PERFORMANCE_TYPE_3) {\n        return '请输入课时费'\n      }\n      return '请输入月销售额'\n    }\n  },\n  mounted() {\n    this.service.getInfo(this.id).subscribe(res => {\n      this.infodata = res.info\n      res.info.gradients.forEach(item => {\n        this.$set(item, 'isEdit', false)\n        this.data.push(item)\n      })\n      this.performance_type = res.info.performance_type.id\n      this.performance_mode = res.info.performance_mode.id\n      this.form.setFieldsValue({\n        template_name: this.infodata.template_name,\n        performance_type: this.infodata.performance_type.id,\n        performance_mode: this.infodata.performance_mode.id,\n        performance_num: this.infodata.performance_num\n      })\n    })\n  },\n  methods: {\n    selectType(e) {\n      this.performance_type = e\n      if (\n        e === PERFORMANCE.PERFORMANCE_TYPE_1 ||\n        e === PERFORMANCE.PERFORMANCE_TYPE_2\n      ) {\n        this.isChooseks = true\n      } else if (e === PERFORMANCE.PERFORMANCE_TYPE_3) {\n        this.isChooseks = false\n      }\n    },\n    submitEdit(e) {\n      let range_min = this.data[e].range_min\n      let royalty_num = this.data[e].royalty_num\n      if (!this.data[e].range_min || !this.data[e].royalty_num) {\n        this.message.warn({ content: '请填写完整' })\n        return\n      }\n      if (this.performance_type == this.PERFORMANCE.PERFORMANCE_TYPE_3) {\n        range_min = parseInt(range_min)\n      } else {\n        range_min = parseFloat(range_min).toFixed(1)\n      }\n      royalty_num = parseFloat(royalty_num).toFixed(1)\n      const arr = this.data.filter(\n        (item, index) => item.range_min === range_min && index !== e\n      )\n      if (arr.length > 0) {\n        this.message.warn({ content: this.errorMessageTip })\n        return\n      }\n      this.data[e].range_min = range_min\n      this.data[e].royalty_num = royalty_num\n      delete this.data[e].range_min_bak\n      delete this.data[e].royalty_num_bak\n      this.data[e].isEdit = false\n    },\n    cancelEdit(e) {\n      this.data[e].isEdit = false\n      this.data[e].range_min = this.data[e].range_min_bak\n      this.data[e].royalty_num = this.data[e].royalty_num_bak\n      delete this.data[e].range_min_bak\n      delete this.data[e].royalty_num_bak\n    },\n    editPerformanceNum(e) {\n      this.data[e].isEdit = true\n      this.data[e].range_min_bak = this.data[e].range_min\n      this.data[e].royalty_num_bak = this.data[e].royalty_num\n    },\n    deletePerformanceNum(e) {\n      this.data.splice(e, 1)\n    },\n    addGradients(e) {\n      // 加校验\n      let { range_min, royalty_num } = this.gradients\n      if (!range_min || !royalty_num) {\n        this.message.warn({ content: '请填写完整' })\n        return\n      }\n      if (this.performance_type == this.PERFORMANCE.PERFORMANCE_TYPE_3) {\n        range_min = parseInt(range_min)\n      } else {\n        range_min = parseFloat(range_min).toFixed(1)\n      }\n      royalty_num = parseInt(royalty_num)\n\n      const arr = this.data.filter(item => item.range_min === range_min)\n      if (arr.length > 0) {\n        this.message.warn({ content: this.errorMessageTip })\n        return\n      }\n      this.data.push({\n        id: 0,\n        range_min,\n        royalty_num,\n        isEdit: false\n      })\n      this.gradients.range_min = ''\n      this.gradients.royalty_num = ''\n    },\n    handleSubmit(e) {\n      e.preventDefault()\n      this.form.validate().then(values => {\n        values.gradients = this.data\n        if (values.performance_type === 3) {\n          values.performance_mode = 0\n        }\n        this.service.editTemplate(this.id, values).subscribe(() => {\n          this.$emit('change')\n          this.message.success({ content: '编辑成功' })\n          this.show = false\n        })\n      })\n    },\n    onChooseRadio(e) {\n      this.performance_mode = e.target.value\n      this.data = []\n    }\n  }\n}\n",{"version":3,"sources":["edit-performance-template.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"edit-performance-template.vue","sourceRoot":"src/views/biz-modals/finance","sourcesContent":["<template>\n  <st-modal title=\"编辑业绩模板\" v-model=\"show\" @ok=\"handleSubmit\">\n    <st-form\n      :form=\"form\"\n      labelWidth=\"66px\"\n      @submit=\"handleSubmit\"\n      class=\"modal-add-perfromance-contaner\"\n    >\n      <a-row :gutter=\"8\">\n        <a-col :lg=\"24\">\n          <st-form-item label=\"模板名称\" required>\n            <a-input\n              placeholder=\"请输模板名称\"\n              v-decorator=\"decorators.template_name\"\n            />\n          </st-form-item>\n        </a-col>\n        <a-col :lg=\"24\">\n          <st-form-item label=\"业绩类型\" required>\n            <a-select\n              v-decorator=\"decorators.performance_type\"\n              placeholder=\"请选择\"\n              @change=\"selectType\"\n              disabled\n            >\n              <template v-for=\"(item, key) in performanceTypes\">\n                <a-select-option :key=\"key\" :value=\"+item.value\">\n                  {{ item.label }}\n                </a-select-option>\n              </template>\n            </a-select>\n          </st-form-item>\n        </a-col>\n        <a-col :lg=\"24\" v-if=\"isChooseks\">\n          <st-form-item label=\"提成模式\" required>\n            <a-radio-group\n              @change=\"onChooseRadio\"\n              v-decorator=\"decorators.performance_mode\"\n            >\n              <template v-for=\"(item, key) in performanceModes\">\n                <a-radio :key=\"key\" :value=\"+item.value\">\n                  {{ item.label }}\n                </a-radio>\n              </template>\n            </a-radio-group>\n          </st-form-item>\n        </a-col>\n        <a-col :lg=\"24\">\n          <st-form-item label=\"默认提成\" required>\n            <st-input-number\n              :float=\"true\"\n              :min=\"0\"\n              :max=\"\n                performance_mode === PERFORMANCE.PERFORMANCE_MODE_1\n                  ? 100\n                  : 999999\n              \"\n              placeholder=\"请输入默认提成\"\n              v-decorator=\"decorators.performance_num\"\n            >\n              <template\n                v-if=\"\n                  performance_type == PERFORMANCE.PERFORMANCE_TYPE_1 ||\n                    performance_type == PERFORMANCE.PERFORMANCE_TYPE_2\n                \"\n              >\n                <template\n                  v-if=\"performance_mode == PERFORMANCE.PERFORMANCE_MODE_1\"\n                >\n                  <template slot=\"addonAfter\">\n                    %\n                  </template>\n                </template>\n                <template\n                  v-if=\"performance_mode == PERFORMANCE.PERFORMANCE_MODE_2\"\n                >\n                  <template slot=\"addonAfter\">\n                    元\n                  </template>\n                </template>\n              </template>\n              <template\n                v-if=\"performance_type == PERFORMANCE.PERFORMANCE_TYPE_3\"\n              >\n                <template slot=\"addonAfter\">\n                  元/节\n                </template>\n              </template>\n            </st-input-number>\n          </st-form-item>\n        </a-col>\n        <a-col :lg=\"24\">\n          <st-form-item label=\"梯度提成\">\n            <div\n              style=\"padding:12px; box-size: border-box; border-radius:4px;border:1px solid rgba(205,212,223,1); \"\n            >\n              <st-form-table hoverable :isEmpty=\"false\">\n                <thead>\n                  <tr>\n                    <template\n                      v-if=\"performance_type == PERFORMANCE.PERFORMANCE_TYPE_1\"\n                    >\n                      <template\n                        v-if=\"\n                          performance_mode == PERFORMANCE.PERFORMANCE_MODE_1\n                        \"\n                      >\n                        <th>月销售额（万及以上）</th>\n                        <th>提成（%）</th>\n                      </template>\n                      <template\n                        v-if=\"\n                          performance_mode == PERFORMANCE.PERFORMANCE_MODE_2\n                        \"\n                      >\n                        <th>月销售额（万及以上）</th>\n                        <th>提成(元)</th>\n                      </template>\n                    </template>\n                    <template\n                      v-if=\"performance_type == PERFORMANCE.PERFORMANCE_TYPE_2\"\n                    >\n                      <template\n                        v-if=\"\n                          performance_mode == PERFORMANCE.PERFORMANCE_MODE_1\n                        \"\n                      >\n                        <th>月课时价值（万及以上）</th>\n                        <th>提成（%）</th>\n                      </template>\n                      <template\n                        v-if=\"\n                          performance_mode == PERFORMANCE.PERFORMANCE_MODE_2\n                        \"\n                      >\n                        <th>月课时价值（万及以上）</th>\n                        <th>提成(元)</th>\n                      </template>\n                    </template>\n                    <template\n                      v-if=\"performance_type == PERFORMANCE.PERFORMANCE_TYPE_3\"\n                    >\n                      <th>月课时数（节及以上）</th>\n                      <th>课时费（元/节）</th>\n                    </template>\n                    <th style=\"width:135px\">操作</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr v-if=\"data.length < 15\">\n                    <td>\n                      <st-input-number\n                        :float=\"\n                          performance_type != PERFORMANCE.PERFORMANCE_TYPE_3\n                        \"\n                        :min=\"0\"\n                        :max=\"999.9\"\n                        :placeholder=\"placeholderGradient\"\n                        v-model=\"gradients.range_min\"\n                      />\n                    </td>\n                    <td>\n                      <st-input-number\n                        :float=\"true\"\n                        :min=\"0\"\n                        :max=\"\n                          isChooseks &&\n                          performance_mode == PERFORMANCE.PERFORMANCE_MODE_1\n                            ? 100\n                            : 999999\n                        \"\n                        :placeholder=\"placeholderGradientFee\"\n                        v-model=\"gradients.royalty_num\"\n                      />\n                    </td>\n                    <td>\n                      <a @click=\"addGradients\">\n                        新增梯度({{ data.length }}/15)\n                      </a>\n                    </td>\n                  </tr>\n\n                  <template v-for=\"(item, index) in data\">\n                    <tr :key=\"index\">\n                      <template v-if=\"item.isEdit\">\n                        <td>\n                          <st-input-number\n                            :float=\"\n                              performance_type != PERFORMANCE.PERFORMANCE_TYPE_3\n                            \"\n                            :min=\"0\"\n                            :max=\"999.9\"\n                            :placeholder=\"placeholderGradient\"\n                            v-model=\"item.range_min\"\n                          />\n                        </td>\n                        <td>\n                          <st-input-number\n                            :float=\"true\"\n                            :min=\"0\"\n                            :max=\"\n                              isChooseks &&\n                              performance_mode == PERFORMANCE.PERFORMANCE_MODE_1\n                                ? 100\n                                : 999999\n                            \"\n                            :placeholder=\"placeholderGradientFee\"\n                            v-model=\"item.royalty_num\"\n                          />\n                        </td>\n                      </template>\n                      <template v-else>\n                        <td>{{ item.range_min }}</td>\n                        <td>{{ item.royalty_num }}</td>\n                      </template>\n                      <td>\n                        <template v-if=\"item.isEdit\">\n                          <a @click=\"submitEdit(index)\">\n                            提交\n                          </a>\n                          <a-divider type=\"vertical\"></a-divider>\n                          <a @click=\"cancelEdit(index)\">\n                            取消\n                          </a>\n                        </template>\n                        <template v-else>\n                          <a @click=\"editPerformanceNum(index)\">\n                            编辑\n                          </a>\n                          <a-divider type=\"vertical\"></a-divider>\n                          <a @click=\"deletePerformanceNum(index)\">\n                            删除\n                          </a>\n                        </template>\n                      </td>\n                    </tr>\n                  </template>\n                </tbody>\n              </st-form-table>\n            </div>\n          </st-form-item>\n        </a-col>\n      </a-row>\n    </st-form>\n  </st-modal>\n</template>\n<script>\nimport { MessageService } from '@/services/message.service'\nimport { EditTemplateService } from './edit-performance-template.service'\nimport { forEach } from 'lodash-es'\nimport { ruleOptions } from './performance-template.config'\nimport { PERFORMANCE } from '@/constants/finance/performance'\nexport default {\n  serviceInject() {\n    return {\n      service: EditTemplateService,\n      message: MessageService\n    }\n  },\n  rxState() {\n    return {\n      performanceModes: this.service.performanceModes$,\n      performanceTypes: this.service.performanceTypes$\n    }\n  },\n  data() {\n    const form = this.$stForm.create()\n    const decorators = form.decorators(ruleOptions)\n    return {\n      PERFORMANCE,\n      form,\n      decorators,\n      data: [],\n      gradients: {\n        range_min: '',\n        royalty_num: ''\n      },\n      show: false,\n      choose: 1, // 1 百分比 0 金额\n      isChooseks: true, // 是否选中课时\n      performance_type: 1,\n      performance_mode: 1,\n      infodata: {}\n    }\n  },\n  watch: {\n    performance_type: function(newValue, oldValue) {\n      if (\n        newValue === PERFORMANCE.PERFORMANCE_TYPE_1 ||\n        newValue === PERFORMANCE.PERFORMANCE_TYPE_2\n      ) {\n        this.isChooseks = true\n      } else if (newValue === 3) {\n        this.isChooseks = false\n      }\n    }\n  },\n  props: {\n    id: Number\n  },\n  computed: {\n    placeholderGradient() {\n      if (this.performance_type == this.PERFORMANCE.PERFORMANCE_TYPE_1) {\n        return '请输入月销售额'\n      }\n      if (this.performance_type == this.PERFORMANCE.PERFORMANCE_TYPE_2) {\n        return '请输入月课时价值'\n      }\n      if (this.performance_type == this.PERFORMANCE.PERFORMANCE_TYPE_3) {\n        return '请输入月课时数'\n      }\n      return '请输入'\n    },\n    errorMessageTip() {\n      if (this.performance_type == this.PERFORMANCE.PERFORMANCE_TYPE_1) {\n        return '月销售额不能重复'\n      }\n      if (this.performance_type == this.PERFORMANCE.PERFORMANCE_TYPE_2) {\n        return '月课时价值不能重复'\n      }\n      if (this.performance_type == this.PERFORMANCE.PERFORMANCE_TYPE_3) {\n        return '月课时数不能重复'\n      }\n      return '请输入'\n    },\n    placeholderGradientFee() {\n      if (this.performance_type == this.PERFORMANCE.PERFORMANCE_TYPE_3) {\n        return '请输入课时费'\n      }\n      return '请输入月销售额'\n    }\n  },\n  mounted() {\n    this.service.getInfo(this.id).subscribe(res => {\n      this.infodata = res.info\n      res.info.gradients.forEach(item => {\n        this.$set(item, 'isEdit', false)\n        this.data.push(item)\n      })\n      this.performance_type = res.info.performance_type.id\n      this.performance_mode = res.info.performance_mode.id\n      this.form.setFieldsValue({\n        template_name: this.infodata.template_name,\n        performance_type: this.infodata.performance_type.id,\n        performance_mode: this.infodata.performance_mode.id,\n        performance_num: this.infodata.performance_num\n      })\n    })\n  },\n  methods: {\n    selectType(e) {\n      this.performance_type = e\n      if (\n        e === PERFORMANCE.PERFORMANCE_TYPE_1 ||\n        e === PERFORMANCE.PERFORMANCE_TYPE_2\n      ) {\n        this.isChooseks = true\n      } else if (e === PERFORMANCE.PERFORMANCE_TYPE_3) {\n        this.isChooseks = false\n      }\n    },\n    submitEdit(e) {\n      let range_min = this.data[e].range_min\n      let royalty_num = this.data[e].royalty_num\n      if (!this.data[e].range_min || !this.data[e].royalty_num) {\n        this.message.warn({ content: '请填写完整' })\n        return\n      }\n      if (this.performance_type == this.PERFORMANCE.PERFORMANCE_TYPE_3) {\n        range_min = parseInt(range_min)\n      } else {\n        range_min = parseFloat(range_min).toFixed(1)\n      }\n      royalty_num = parseFloat(royalty_num).toFixed(1)\n      const arr = this.data.filter(\n        (item, index) => item.range_min === range_min && index !== e\n      )\n      if (arr.length > 0) {\n        this.message.warn({ content: this.errorMessageTip })\n        return\n      }\n      this.data[e].range_min = range_min\n      this.data[e].royalty_num = royalty_num\n      delete this.data[e].range_min_bak\n      delete this.data[e].royalty_num_bak\n      this.data[e].isEdit = false\n    },\n    cancelEdit(e) {\n      this.data[e].isEdit = false\n      this.data[e].range_min = this.data[e].range_min_bak\n      this.data[e].royalty_num = this.data[e].royalty_num_bak\n      delete this.data[e].range_min_bak\n      delete this.data[e].royalty_num_bak\n    },\n    editPerformanceNum(e) {\n      this.data[e].isEdit = true\n      this.data[e].range_min_bak = this.data[e].range_min\n      this.data[e].royalty_num_bak = this.data[e].royalty_num\n    },\n    deletePerformanceNum(e) {\n      this.data.splice(e, 1)\n    },\n    addGradients(e) {\n      // 加校验\n      let { range_min, royalty_num } = this.gradients\n      if (!range_min || !royalty_num) {\n        this.message.warn({ content: '请填写完整' })\n        return\n      }\n      if (this.performance_type == this.PERFORMANCE.PERFORMANCE_TYPE_3) {\n        range_min = parseInt(range_min)\n      } else {\n        range_min = parseFloat(range_min).toFixed(1)\n      }\n      royalty_num = parseInt(royalty_num)\n\n      const arr = this.data.filter(item => item.range_min === range_min)\n      if (arr.length > 0) {\n        this.message.warn({ content: this.errorMessageTip })\n        return\n      }\n      this.data.push({\n        id: 0,\n        range_min,\n        royalty_num,\n        isEdit: false\n      })\n      this.gradients.range_min = ''\n      this.gradients.royalty_num = ''\n    },\n    handleSubmit(e) {\n      e.preventDefault()\n      this.form.validate().then(values => {\n        values.gradients = this.data\n        if (values.performance_type === 3) {\n          values.performance_mode = 0\n        }\n        this.service.editTemplate(this.id, values).subscribe(() => {\n          this.$emit('change')\n          this.message.success({ content: '编辑成功' })\n          this.show = false\n        })\n      })\n    },\n    onChooseRadio(e) {\n      this.performance_mode = e.target.value\n      this.data = []\n    }\n  }\n}\n</script>\n"]}]}