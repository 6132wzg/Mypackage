{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/sold/card/batch-area.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/sold/card/batch-area.vue","mtime":1591147717227},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { BatchAreaService } from './batch-area.service'\nimport { BATCH_TYPE, BATCH_INFO } from '@/constants/common/batch-operation'\nimport { cloneDeep } from 'lodash-es'\nexport default {\n  name: 'ModalSoldCardArea',\n  bem: {\n    batch: 'sold-card-batch-area'\n  },\n  props: {\n    ids: {\n      type: Array,\n      required: true\n    },\n    searchQuery: Object\n  },\n  serviceProviders() {\n    return [BatchAreaService]\n  },\n  serviceInject() {\n    return {\n      batchAreaService: BatchAreaService\n    }\n  },\n  rxState() {\n    return {\n      vips: this.batchAreaService.vips$,\n      loading: this.batchAreaService.loading$,\n      count: this.batchAreaService.count$\n    }\n  },\n  data() {\n    return {\n      BATCH_TYPE,\n      BATCH_INFO,\n      show: false,\n      cardVip: [],\n      batch_type: BATCH_TYPE.SELECTED,\n      btnDisabled: false\n    }\n  },\n  watch: {\n    vips(newVal) {\n      newVal.length === 0\n        ? (this.btnDisabled = true)\n        : (this.btnDisabled = false)\n    }\n  },\n  mounted() {\n    this.batchAreaService.init(this.searchQuery).subscribe()\n  },\n  computed: {\n    helpText() {\n      return this.count > this.BATCH_INFO.LIMIT_NUM\n        ? this.BATCH_INFO.ERROR_TIP\n        : ''\n    },\n    helpShow() {\n      return this.count > this.BATCH_INFO.LIMIT_NUM\n    },\n    operateDataNum() {\n      return this.batch_type === this.BATCH_TYPE.SELECTED\n        ? this.ids.length\n        : this.count\n    }\n  },\n  methods: {\n    onSubmit() {\n      this.batchAreaService\n        .setCardVip({\n          batch_type: this.batch_type,\n          sold_ids: this.ids,\n          vip_ids: this.cardVip,\n          conditions: this.searchQuery\n        })\n        .subscribe(res => {\n          this.show = false\n          this.$emit('success')\n        })\n    }\n  }\n}\n",null]}