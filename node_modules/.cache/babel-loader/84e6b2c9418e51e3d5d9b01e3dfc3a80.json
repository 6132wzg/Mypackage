{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js!/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/store/data/data.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/store/data/data.vue","mtime":1591147717472},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js","mtime":1591062572352},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport pieImg from '@/assets/img/shop/dashboard/pie.png';\nimport inoutNumImg from '@/assets/img/shop/dashboard/inoutNum.png';\nimport moment from 'moment';\nimport ShopStoreDataLine from '@/views/biz-components/stat/shop-store-data-line';\nimport WholeTabs from \"./components#/whole-tabs\";\nimport BuyConsumptionTables from \"./components#/buy-consumption-tables\";\nimport DatePicker from \"./components#/date-picker\";\nimport SalesAnalysis from \"./components#/sales-analysis\";\nimport BuyNumber from \"./components#/buy-number\";\nimport WholeOrderMember from \"./components#/whole-order-member\";\nimport ShopStoreDataRevenueRing from '@/views/biz-components/stat/shop-store-data-revenue-ring';\nimport { DataService } from \"./data.service\";\nimport { headerInfo, wholeNav, headerTitleItem, fieldNav, fieldInfo } from \"./data.config.ts\";\nexport default {\n  serviceInject: function serviceInject() {\n    return {\n      dataService: DataService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      dataProfile: this.dataService.dataProfile$,\n      storeBoard: this.dataService.storeBoard$,\n      storeSaleList: this.dataService.storeSaleList$,\n      storeCategoryRank: this.dataService.storeCategoryRank$,\n      storeMemberAnalysis: this.dataService.storeMemberAnalysis$\n    };\n  },\n  bem: {\n    basic: 'shop-store-data',\n    salesCategory: 'sales-category',\n    headerContent: 'header-content'\n  },\n  data: function data() {\n    return {\n      wholenavIndex: 0,\n      pieImg: pieImg,\n      inoutNumImg: inoutNumImg,\n      wholeNavcom: 'shop-store-data-ring',\n      headerInfo: headerInfo,\n      wholeNav: wholeNav,\n      headerTitleItem: headerTitleItem,\n      fieldNav: fieldNav,\n      fieldInfo: fieldInfo,\n      tabsObjData: {\n        choose_type: 1,\n        date_type: 1,\n        date: null\n      }\n    };\n  },\n  components: {\n    ShopStoreDataLine: ShopStoreDataLine,\n    DatePicker: DatePicker,\n    WholeTabs: WholeTabs,\n    BuyConsumptionTables: BuyConsumptionTables,\n    SalesAnalysis: SalesAnalysis,\n    BuyNumber: BuyNumber,\n    ShopStoreDataRevenueRing: ShopStoreDataRevenueRing,\n    WholeOrderMember: WholeOrderMember\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this.wholenavFilter();\n    });\n  },\n  methods: {\n    // 整体看板时间\n    wholeTimesFn: function wholeTimesFn(value) {\n      var _this2 = this;\n\n      this.dataService.getStoreBoard(value).subscribe(function (res) {\n        _this2.wholenavFilter();\n      });\n    },\n    // 销售分析时间\n    saleTimesFn: function saleTimesFn(value) {\n      this.dataService.getStoreSaleList(value).subscribe();\n    },\n    // 类目分析时间\n    categoryTimesFn: function categoryTimesFn(value) {\n      this.dataService.getStoreCategoryRank(value).subscribe();\n    },\n    // 购买次数/消费金额时间\n    userAnalysisTimesFn: function userAnalysisTimesFn(value) {\n      this.tabsObjData.date_type = value.date_type;\n      this.tabsObjData.date = value.date;\n      this.dataService.getStoreMemberAnalysis(this.tabsObjData).subscribe();\n    },\n    // 整体看板订单/会员折线图\n    filterLine: function filterLine(data, type) {\n      var _this3 = this;\n\n      if (!data[this.fieldNav[this.wholenavIndex]].trend.length) return [];\n      return data[this.fieldNav[this.wholenavIndex]].trend.map(function (item) {\n        return {\n          date: item.date,\n          amount: Number(item[_this3.fieldInfo[_this3.wholenavIndex]])\n        };\n      });\n    },\n    // 整体看板数据处理\n    wholenavFilter: function wholenavFilter() {\n      var _this4 = this;\n\n      var data = this.storeBoard;\n      this.wholeNav.forEach(function (item, index) {\n        var dataInfo = data[_this4.fieldNav[index]][_this4.fieldInfo[index]];\n\n        _this4.$set(item, 'num', dataInfo);\n\n        item.unit = data[_this4.fieldNav[index]].unit;\n      });\n    },\n    onChangeTabs: function onChangeTabs(query) {\n      this.tabsObjData = Object.assign(this.tabsObjData, {\n        choose_type: query\n      });\n      this.tabsObjData.date = this.tabsObjData.date ? this.tabsObjData.date : moment().subtract(1, 'days').format('YYYY-MM-DD') + '';\n      this.dataService.getStoreMemberAnalysis(this.tabsObjData).subscribe();\n    },\n    refresh: function refresh() {\n      return this.dataService.getDataProfile(this.chartTodayShop);\n    },\n    wholenavFun: function wholenavFun(index, item) {\n      this.wholenavIndex = index;\n\n      if (index > 1) {\n        this.wholeNavcom = 'brand-user-avg-bar';\n      } else {\n        this.wholeNavcom = 'shop-store-data-ring';\n      }\n    }\n  }\n};",null]}