{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/package/form/form-item#/slod-price-setting-form-item.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/package/form/form-item#/slod-price-setting-form-item.vue","mtime":1600926555705},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _toConsumableArray from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { cloneDeep } from 'lodash';\nimport { PACKAGE_ATTR } from \"./const.ts\";\nexport default {\n  name: 'SlodPriceSettingFormItem',\n  inject: ['form'],\n  data: function data() {\n    return {\n      teamPrice: 0,\n      personalPrice: 0,\n      isSettingPrice: false,\n      totalPrice: 0,\n      PACKAGE_ATTR: PACKAGE_ATTR\n    };\n  },\n  methods: {\n    onChangeTeamPrice: function onChangeTeamPrice(value) {\n      this.isSettingPrice = true;\n      this.teamPrice = +value;\n    },\n    onChangePersonalPrice: function onChangePersonalPrice(value) {\n      this.isSettingPrice = true;\n      this.personalPrice = +value;\n    },\n    onChangeTotalPrice: function onChangeTotalPrice(value) {\n      this.isSettingPrice = true;\n      this.totalPrice = +value;\n    }\n  },\n  computed: {\n    initInfo: function initInfo() {\n      return this.form.initInfo;\n    },\n    realityPrice: function realityPrice() {\n      if (this.form.isEdit && !this.isSettingPrice) {\n        return this.form.initInfo.price;\n      }\n\n      return this.totalPrice || (+this.teamPrice + this.personalPrice).toFixed(1);\n    },\n    personalCourse: function personalCourse() {\n      return this.form.personalCourse;\n    },\n    teamCourse: function teamCourse() {\n      return this.form.teamCourse;\n    },\n    referPrice: function referPrice() {\n      var count = 0;\n\n      if (this.isFix) {\n        var course = cloneDeep([].concat(_toConsumableArray(this.personalCourse), _toConsumableArray(this.teamCourse)));\n        course.forEach(function (item) {\n          count += (item.course_times || 0) * (item.course_unit_price || 0);\n        });\n      }\n\n      return count;\n    },\n    decorators: function decorators() {\n      return this.form.decorators;\n    },\n    // 可选课程中类 spec 1 仅团课 2 仅私教课 3 团课 和 私教 4 私教团课混合\n    spec: function spec() {\n      return this.form.courseSetting.spec;\n    },\n    isRange: function isRange() {\n      return this.packageAttr === PACKAGE_ATTR.RANGE;\n    },\n    isAll: function isAll() {\n      return this.packageAttr === PACKAGE_ATTR.ALL;\n    },\n    isFix: function isFix() {\n      return this.packageAttr === PACKAGE_ATTR.FIX;\n    },\n    unLimited: function unLimited() {\n      return this.form.unLimited;\n    },\n    packageAttr: function packageAttr() {\n      return this.form.packageAttr;\n    },\n    formVueData: function formVueData() {\n      return this.form.form;\n    }\n  },\n  mounted: function mounted() {\n    if ([1, 3, 4].includes(spec)) {\n      this.teamPrice = +this.initInfo.team_total_price || 0;\n    }\n\n    if ([(2, 3, 4)].includes(spec)) {\n      this.personalPrice = +this.initInfo.personal_total_price || 0;\n    }\n  }\n};",{"version":3,"sources":["slod-price-setting-form-item.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA,SAAA,SAAA,QAAA,QAAA;AACA,SAAA,YAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,0BADA;AAEA,EAAA,MAAA,EAAA,CAAA,MAAA,CAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,CADA;AAEA,MAAA,aAAA,EAAA,CAFA;AAGA,MAAA,cAAA,EAAA,KAHA;AAIA,MAAA,UAAA,EAAA,CAJA;AAKA,MAAA,YAAA,EAAA;AALA,KAAA;AAOA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,iBADA,6BACA,KADA,EACA;AACA,WAAA,cAAA,GAAA,IAAA;AACA,WAAA,SAAA,GAAA,CAAA,KAAA;AACA,KAJA;AAKA,IAAA,qBALA,iCAKA,KALA,EAKA;AACA,WAAA,cAAA,GAAA,IAAA;AACA,WAAA,aAAA,GAAA,CAAA,KAAA;AACA,KARA;AASA,IAAA,kBATA,8BASA,KATA,EASA;AACA,WAAA,cAAA,GAAA,IAAA;AACA,WAAA,UAAA,GAAA,CAAA,KAAA;AACA;AAZA,GAZA;AA0BA,EAAA,QAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,aAAA,KAAA,IAAA,CAAA,QAAA;AACA,KAHA;AAIA,IAAA,YAJA,0BAIA;AACA,UAAA,KAAA,IAAA,CAAA,MAAA,IAAA,CAAA,KAAA,cAAA,EAAA;AACA,eAAA,KAAA,IAAA,CAAA,QAAA,CAAA,KAAA;AACA;;AACA,aACA,KAAA,UAAA,IAAA,CAAA,CAAA,KAAA,SAAA,GAAA,KAAA,aAAA,EAAA,OAAA,CAAA,CAAA,CADA;AAGA,KAXA;AAYA,IAAA,cAZA,4BAYA;AACA,aAAA,KAAA,IAAA,CAAA,cAAA;AACA,KAdA;AAeA,IAAA,UAfA,wBAeA;AACA,aAAA,KAAA,IAAA,CAAA,UAAA;AACA,KAjBA;AAkBA,IAAA,UAlBA,wBAkBA;AACA,UAAA,KAAA,GAAA,CAAA;;AACA,UAAA,KAAA,KAAA,EAAA;AACA,YAAA,MAAA,GAAA,SAAA,8BAAA,KAAA,cAAA,sBAAA,KAAA,UAAA,GAAA;AACA,QAAA,MAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,UAAA,KAAA,IAAA,CAAA,IAAA,CAAA,YAAA,IAAA,CAAA,KAAA,IAAA,CAAA,iBAAA,IAAA,CAAA,CAAA;AACA,SAFA;AAGA;;AACA,aAAA,KAAA;AACA,KA3BA;AA4BA,IAAA,UA5BA,wBA4BA;AACA,aAAA,KAAA,IAAA,CAAA,UAAA;AACA,KA9BA;AA+BA;AACA,IAAA,IAhCA,kBAgCA;AACA,aAAA,KAAA,IAAA,CAAA,aAAA,CAAA,IAAA;AACA,KAlCA;AAmCA,IAAA,OAnCA,qBAmCA;AACA,aAAA,KAAA,WAAA,KAAA,YAAA,CAAA,KAAA;AACA,KArCA;AAsCA,IAAA,KAtCA,mBAsCA;AACA,aAAA,KAAA,WAAA,KAAA,YAAA,CAAA,GAAA;AACA,KAxCA;AAyCA,IAAA,KAzCA,mBAyCA;AACA,aAAA,KAAA,WAAA,KAAA,YAAA,CAAA,GAAA;AACA,KA3CA;AA4CA,IAAA,SA5CA,uBA4CA;AACA,aAAA,KAAA,IAAA,CAAA,SAAA;AACA,KA9CA;AA+CA,IAAA,WA/CA,yBA+CA;AACA,aAAA,KAAA,IAAA,CAAA,WAAA;AACA,KAjDA;AAkDA,IAAA,WAlDA,yBAkDA;AACA,aAAA,KAAA,IAAA,CAAA,IAAA;AACA;AApDA,GA1BA;AAgFA,EAAA,OAhFA,qBAgFA;AACA,QAAA,CAAA,CAAA,EAAA,CAAA,EAAA,CAAA,EAAA,QAAA,CAAA,IAAA,CAAA,EAAA;AACA,WAAA,SAAA,GAAA,CAAA,KAAA,QAAA,CAAA,gBAAA,IAAA,CAAA;AACA;;AACA,QAAA,EAAA,GAAA,CAAA,EAAA,CAAA,GAAA,QAAA,CAAA,IAAA,CAAA,EAAA;AACA,WAAA,aAAA,GAAA,CAAA,KAAA,QAAA,CAAA,oBAAA,IAAA,CAAA;AACA;AACA;AAvFA,CAAA","sourcesContent":["<template>\n  <div>\n    <a-row :gutter=\"2\" v-if=\"isAll || (isRange && !unLimited)\">\n      <a-col :lg=\"24\" style=\"display: flex;\">\n        <st-form-item\n          v-if=\"spec !== 2\"\n          :label=\"spec !== 4 ? '价格设置' : '实际售价'\"\n          labelWidth=\"148px\"\n          required\n        >\n          <!-- 这个用于固定课程 -->\n          <div class=\"biz-package-form__price-setting\">\n            <template v-if=\"spec === 1 || spec === 3\">\n              <span class=\"mg-r20\">团体课总售价</span>\n              <st-input-number\n                v-decorator=\"decorators.team_total_price\"\n                style=\"width: 121px\"\n                :min=\"0\"\n                :max=\"9999999.9\"\n                float\n                @change=\"onChangeTeamPrice\"\n              >\n                <template slot=\"addonAfter\">元</template>\n              </st-input-number>\n            </template>\n\n            <template v-if=\"spec === 4\">\n              <span class=\"mg-r20\">\n                团课&私教课总售价\n              </span>\n              <st-input-number\n                float\n                :min=\"0\"\n                :max=\"9999999.9\"\n                @change=\"onChangeTotalPrice\"\n                v-decorator=\"decorators.price\"\n                style=\"width: 121px\"\n              >\n                <template slot=\"addonAfter\">元</template>\n              </st-input-number>\n            </template>\n          </div>\n        </st-form-item>\n        <!-- 单独为私教的时候只有私教课一个价格设置表单 -->\n        <st-form-item\n          v-if=\"spec === 2 || spec === 3\"\n          :label=\"spec === 2 ? '价格设置' : ' '\"\n          :labelWidth=\"spec === 2 ? '148px' : '0'\"\n          :required=\"spec === 2\"\n        >\n          <template>\n            <span class=\"mg-r20\">\n              私教课总售价\n            </span>\n            <st-input-number\n              float\n              :min=\"0\"\n              :max=\"9999999.9\"\n              @change=\"onChangePersonalPrice\"\n              v-decorator=\"decorators.personal_total_price\"\n              style=\"width: 121px\"\n            >\n              <template slot=\"addonAfter\">元</template>\n            </st-input-number>\n          </template>\n        </st-form-item>\n      </a-col>\n    </a-row>\n    <a-row :gutter=\"2\">\n      <a-col :lg=\"8\" :xs=\"11\">\n        <st-form-item label=\"参考价\" v-if=\"isFix\" labelWidth=\"148px\" required>\n          <!-- 这个用于固定课程 -->\n          {{ referPrice }}元\n        </st-form-item>\n      </a-col>\n    </a-row>\n    <a-row :gutter=\"2\" v-if=\"spec !== 4\">\n      <a-col :lg=\"8\" :xs=\"11\">\n        <st-form-item label=\"实际售价\" labelWidth=\"148px\" required>\n          <!-- 这个用于任意课程 限定范围-->\n          <st-input-number\n            v-if=\"isFix || (unLimited && isRange)\"\n            v-decorator=\"decorators.price\"\n            :min=\"0\"\n            :max=\"9999999.9\"\n            float\n            style=\"width: 120px\"\n          >\n            <template slot=\"addonAfter\">元</template>\n          </st-input-number>\n          <span v-if=\"isAll || (!unLimited && isRange)\">\n            {{ realityPrice }}元\n          </span>\n        </st-form-item>\n      </a-col>\n    </a-row>\n  </div>\n</template>\n\n<script>\nimport { cloneDeep } from 'lodash'\nimport { PACKAGE_ATTR } from './const.ts'\nexport default {\n  name: 'SlodPriceSettingFormItem',\n  inject: ['form'],\n  data() {\n    return {\n      teamPrice: 0,\n      personalPrice: 0,\n      isSettingPrice: false,\n      totalPrice: 0,\n      PACKAGE_ATTR\n    }\n  },\n  methods: {\n    onChangeTeamPrice(value) {\n      this.isSettingPrice = true\n      this.teamPrice = +value\n    },\n    onChangePersonalPrice(value) {\n      this.isSettingPrice = true\n      this.personalPrice = +value\n    },\n    onChangeTotalPrice(value) {\n      this.isSettingPrice = true\n      this.totalPrice = +value\n    }\n  },\n  computed: {\n    initInfo() {\n      return this.form.initInfo\n    },\n    realityPrice() {\n      if (this.form.isEdit && !this.isSettingPrice) {\n        return this.form.initInfo.price\n      }\n      return (\n        this.totalPrice || (+this.teamPrice + this.personalPrice).toFixed(1)\n      )\n    },\n    personalCourse() {\n      return this.form.personalCourse\n    },\n    teamCourse() {\n      return this.form.teamCourse\n    },\n    referPrice() {\n      let count = 0\n      if (this.isFix) {\n        let course = cloneDeep([...this.personalCourse, ...this.teamCourse])\n        course.forEach(item => {\n          count += (item.course_times || 0) * (item.course_unit_price || 0)\n        })\n      }\n      return count\n    },\n    decorators() {\n      return this.form.decorators\n    },\n    // 可选课程中类 spec 1 仅团课 2 仅私教课 3 团课 和 私教 4 私教团课混合\n    spec() {\n      return this.form.courseSetting.spec\n    },\n    isRange() {\n      return this.packageAttr === PACKAGE_ATTR.RANGE\n    },\n    isAll() {\n      return this.packageAttr === PACKAGE_ATTR.ALL\n    },\n    isFix() {\n      return this.packageAttr === PACKAGE_ATTR.FIX\n    },\n    unLimited() {\n      return this.form.unLimited\n    },\n    packageAttr() {\n      return this.form.packageAttr\n    },\n    formVueData() {\n      return this.form.form\n    }\n  },\n  mounted() {\n    if ([1, 3, 4].includes(spec)) {\n      this.teamPrice = +this.initInfo.team_total_price || 0\n    }\n    if ([(2, 3, 4)].includes(spec)) {\n      this.personalPrice = +this.initInfo.personal_total_price || 0\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/biz-components/package/form/form-item#"}]}