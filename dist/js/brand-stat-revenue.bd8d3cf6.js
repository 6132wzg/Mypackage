(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["brand-stat-revenue"],{"2a55":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.b()},[a("div",{class:t.b("section")},[a("header",{class:t.bHeader("header")},[a("st-t3",{class:t.bHeader("title")},[t._v("当日营收")]),a("div",{class:t.bHeader("actions")},[a("shop-select",{on:{change:t.getDataToday},model:{value:t.dataTodayShop,callback:function(e){t.dataTodayShop=e},expression:"dataTodayShop"}}),a("st-refresh-btn",{attrs:{action:t.dailyRefresh}})],1)],1),a("st-total",{staticClass:"mg-t4",class:t.b("total"),attrs:{indexs:t.dailyTotalColumns,dataSource:t.dataToday,options:{breakpoints:{1440:{slidesPerView:6}}}},scopedSlots:t._u([{key:"total_num",fn:function(e){return a("a",{directives:[{name:"modal-link",rawName:"v-modal-link",value:{name:"brand-stat-detail-list-modal",props:{query:{shop_id:t.dataTodayShop,start_date:t.moment().format("YYYY-MM-DD"),end_date:t.moment().format("YYYY-MM-DD")},title:"订单明细",type:"brand-revenue-gather"}},expression:"{\n          name: 'brand-stat-detail-list-modal',\n          props: {\n            query: {\n              shop_id: dataTodayShop,\n              start_date: moment().format('YYYY-MM-DD'),\n              end_date: moment().format('YYYY-MM-DD')\n            },\n            title: '订单明细',\n            type: 'brand-revenue-gather'\n          }\n        }"}]},[a("st-total-item",{attrs:{unit:e.unit,label:e.label,value:e.value}})],1)}}])}),a("st-desc",{class:t.b("desc-card"),attrs:{dataSource:t.countDesc}})],1),a("div",{class:t.b("section")},[a("header",{class:t.bHeader("header")},[a("div",{class:t.bHeader("button-wapper")},[t.auth.export?a("st-button",{directives:[{name:"export-excel",rawName:"v-export-excel",value:{type:"brand/revenue-product-type",query:t.$searchQuery},expression:"{\n            type: 'brand/revenue-product-type',\n            query: $searchQuery\n          }"}],attrs:{type:"primary"}},[t._v("\n          全部导出\n        ")]):t._e()],1),a("div",{class:t.bHeader("actions")},[a("shop-select",{on:{change:function(e){return t.onSingleSearch("shop_id",e)}},model:{value:t.$searchQuery.shop_id,callback:function(e){t.$set(t.$searchQuery,"shop_id",e)},expression:"$searchQuery.shop_id"}}),a("st-recent-radio-group",{attrs:{value:t.$searchQuery},on:{change:t.onChangeDataDays}}),a("st-refresh-btn",{attrs:{updateTime:t.updateTime,action:t.refresh}})],1)]),a("st-total",{class:t.b("total"),attrs:{indexs:t.totalColumns,dataSource:t.total,hasTitle:""},scopedSlots:t._u([{key:"net_revenue",fn:function(e){return a("a",{directives:[{name:"modal-link",rawName:"v-modal-link",value:{name:"brand-stat-daily-list-modal",props:{query:t.$searchQuery,title:"营收日明细",type:"brand-revenue-gather"}},expression:"{\n          name: 'brand-stat-daily-list-modal',\n          props: {\n            query: $searchQuery,\n            title: '营收日明细',\n            type: 'brand-revenue-gather'\n          }\n        }"}]},[a("st-total-item",{attrs:{unit:e.unit,label:e.label,value:e.value}})],1)}},{key:"total_num",fn:function(e){return a("a",{directives:[{name:"modal-link",rawName:"v-modal-link",value:{name:"brand-stat-detail-list-modal",props:{query:t.$searchQuery,title:"订单明细",type:"brand-revenue-gather"}},expression:"{\n          name: 'brand-stat-detail-list-modal',\n          props: {\n            query: $searchQuery,\n            title: '订单明细',\n            type: 'brand-revenue-gather'\n          }\n        }"}]},[a("st-total-item",{attrs:{unit:e.unit,label:e.label,value:e.value}})],1)}}])}),a("st-table",{staticClass:"mg-t16",attrs:{loading:t.loading.getList,columns:t.columns,scroll:{x:1440},rowKey:"product_type",page:!1,dataSource:t.list},on:{change:t.onTableChange},scopedSlots:t._u([{key:"product_type",fn:function(e){return a("span",{},[t._v("\n        "+t._s(t._f("enumFilter")(e,"report.revenue_product_type"))+"\n      ")])}},{key:"net_revenue",fn:function(e,n){return a("a",{directives:[{name:"modal-link",rawName:"v-modal-link",value:{name:"brand-stat-daily-list-modal",props:{query:Object.assign({},t.$searchQuery,{product_type:n.product_type,is_include_advance:1}),title:"营收日明细",type:"brand-revenue-gather"}},expression:"{\n          name: 'brand-stat-daily-list-modal',\n          props: {\n            query: {\n              ...$searchQuery,\n              product_type: record.product_type,\n              is_include_advance: 1\n            },\n            title: '营收日明细',\n            type: 'brand-revenue-gather'\n          }\n        }"}]},[t._v("\n        "+t._s(e)+"\n      ")])}},{key:"total_num",fn:function(e,n){return a("a",{directives:[{name:"modal-link",rawName:"v-modal-link",value:{name:"brand-stat-detail-list-modal",props:{query:Object.assign({},t.$searchQuery,{product_type:n.product_type}),title:"订单明细",type:"brand-revenue-gather"}},expression:"{\n          name: 'brand-stat-detail-list-modal',\n          props: {\n            query: {\n              ...$searchQuery,\n              product_type: record.product_type\n            },\n            title: '订单明细',\n            type: 'brand-revenue-gather'\n          }\n        }"}]},[t._v("\n        "+t._s(e)+"\n      ")])}}])})],1)])},r=[],i=a("b346"),o=a("1044"),u=a("b513"),d=a("56d3"),s=a("f35f"),l=a("d5e8"),c=a("c32d"),p=a.n(c),m=a("c3a8"),h=a("ea3e"),y=function(){return[{title:" 商品类目",scopedSlots:{customRender:"product_type"},width:120,dataIndex:"product_type"},{title:"净收入(元)",scopedSlots:{customRender:"net_revenue"},width:120,dataIndex:"net_revenue"},{title:"实收金额(元)",width:120,dataIndex:"total_amount"},{title:"退款(元)",width:100,dataIndex:"refund_amount"},{title:"订单数",scopedSlots:{customRender:"total_num"},width:100,dataIndex:"total_num"},{title:"线上支付(元)",width:120,dataIndex:"online_total_amount"},{title:"线下支付(元)",width:120,dataIndex:"offline_total_amount"},{title:"定金支付(元)",width:120,dataIndex:"earnest_amount"},{title:"储值本金支付(元)",width:140,dataIndex:"deposit_principal_amount"},{title:"储值赠送支付(元)",width:140,dataIndex:"deposit_give_amount"},{title:"营销优惠(元)",width:120,dataIndex:"preferential_amount"},{title:"商家减免(元)",width:120,dataIndex:"waiver_amount"}]},v=function(t){return[{title:"实际营收",scopedSlots:"daily"!==t&&{customRender:"net_revenue"},unit:"¥",dataIndex:"net_revenue"},{title:"总营收",unit:"¥",dataIndex:"total_amount"},{title:"营收退款",unit:"¥",dataIndex:"refund_amount"},{title:"预收款",unit:"¥",dataIndex:"wait_total_amount"},{title:"预收款退款",unit:"¥",dataIndex:"wait_refund_amount"},{title:"订单数",scopedSlots:{customRender:"total_num"},dataIndex:"total_num"},{title:"线上支付",unit:"¥",dataIndex:"online_total_amount"},{title:"线下支付",unit:"¥",dataIndex:"offline_total_amount"},{title:"定金支付",unit:"¥",dataIndex:"earnest_amount"},{title:"储值本金支付",unit:"¥",dataIndex:"deposit_principal_amount"},{title:"储值赠送支付",unit:"¥",dataIndex:"deposit_give_amount"},{title:"营销优惠",unit:"¥",dataIndex:"preferential_amount"},{title:"商家减免",unit:"¥",dataIndex:"waiver_amount"}]},f=function(){return[{title:"预收类目",value:"定金、押金和储值卡"},{title:"实际营收",value:"不含预收类目的净收入之和"},{title:"总营收",value:"不含预收类目的实收金额之和"},{title:"营收退款",value:"不含预收类目的退款之和"},{title:"预收款",value:"预收类目的净收入之和"},{title:"线上支付",value:"小程序微信支付"},{title:"线下支付",value:"现金、刷卡、POS机等"},{title:"储值本金支付",value:"使用储值卡的实收金额"},{title:"储值赠送支付",value:"使用储值卡的赠送金额"},{title:"净收入",value:"实收金额-退款"}]},_={name:"BrandStatRevenueGather",mixins:[h["a"]],serviceInject:function(){return{gatherService:m["GatherService"]}},modals:{BrandStatDetailListModal:s["a"],BrandStatDailyListModal:l["a"]},rxState:function(){var t=this.gatherService,e=t.list$,a=t.total$,n=t.auth$,r=t.dataToday$,i=t.updateTime$,o=t.loading$;return{list:e,total:a,auth:n,dataToday:r,updateTime:i,loading:o}},bem:{b:"page-brand-stat-revenue-gather",bHeader:"page-brand-stat-header"},data:function(){return{dataTodayShop:-1}},created:function(){this.getDataToday()},computed:{columns:y,dailyTotalColumns:function(){return v("daily")},totalColumns:v,countDesc:f},methods:{moment:p.a,onChangeDataDays:function(t){this.$searchQuery.day=t.recently_day||void 0,this.$searchQuery.start_date=t.start_date||void 0,this.$searchQuery.end_date=t.end_date||void 0,this.onSearch()},getDataToday:function(){return this.gatherService.getDataToday({shop_id:this.dataTodayShop}).subscribe()},refresh:function(){return this.gatherService.getDataRefresh()},dailyRefresh:function(){return this.gatherService.getDataToday({shop_id:this.dataTodayShop,is_refresh:1})}},components:{shopSelect:i["a"],StTotal:o["a"],StTotalItem:u["a"],StDesc:d["a"]}},b=_,g=a("2877"),x=Object(g["a"])(b,n,r,!1,null,null,null);e["default"]=x.exports},"5a69":function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));a("6b54"),a("2397");var n=a("d225"),r=a("b0b4"),i=a("308d"),o=a("6bb5"),u=a("4e2b"),d=a("de46");function s(t){return function(){var e,a=Object(o["a"])(t);if(l()){var n=Object(o["a"])(this).constructor;e=Reflect.construct(a,arguments,n)}else e=a.apply(this,arguments);return Object(i["a"])(this,e)}}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var c=function(t){Object(u["a"])(a,t);var e=s(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(r["a"])(a,[{key:"getChart",value:function(t){return this.http.get("/v1/report/revenue/brand/stat_summer",{query:t})}},{key:"getData",value:function(t){return this.http.get("/v1/report/revenue/brand/revenue_list",{query:t})}},{key:"getDataTotal",value:function(t){return this.http.get("/v1/report/revenue/brand/revenue_total",{query:t})}},{key:"getDataToady",value:function(t){return this.http.get("/v1/report/revenue/brand/today_summer",{query:t})}},{key:"getProductData",value:function(t){return this.http.get("/v1/report/revenue/brand/product/revenue_list",{query:t})}},{key:"getProductDataTotal",value:function(t){return this.http.get("/v1/report/revenue/brand/product/revenue_total",{query:t})}},{key:"getProductDataToady",value:function(t){return this.http.get("/v1/report/revenue/brand/product/today_summer",{query:t})}}]),a}(d["a"])},6414:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.b()},[a("div",{class:t.b("section")},[a("header",{class:t.bHeader("header")},[a("st-t3",{class:t.bHeader("title")},[t._v("当日营收")]),a("div",{class:t.bHeader("actions")},[a("shop-select",{on:{change:t.getDataToday},model:{value:t.dataTodayShop,callback:function(e){t.dataTodayShop=e},expression:"dataTodayShop"}}),a("st-refresh-btn",{attrs:{action:t.dailyRefresh}})],1)],1),a("st-total",{staticClass:"mg-t4",class:t.b("total"),attrs:{indexs:t.dailyTotalColumns,dataSource:t.dataToday,options:{breakpoints:{1440:{slidesPerView:6}}}},scopedSlots:t._u([{key:"total_num",fn:function(e){return a("a",{directives:[{name:"modal-link",rawName:"v-modal-link",value:{name:"brand-stat-detail-list-modal",props:{query:{shop_id:t.dataTodayShop,start_date:t.moment().format("YYYY-MM-DD"),end_date:t.moment().format("YYYY-MM-DD")},title:"订单明细",type:"brand-revenue-product"}},expression:"{\n          name: 'brand-stat-detail-list-modal',\n          props: {\n            query: {\n              shop_id: dataTodayShop,\n              start_date: moment().format('YYYY-MM-DD'),\n              end_date: moment().format('YYYY-MM-DD')\n            },\n            title: '订单明细',\n            type: 'brand-revenue-product'\n          }\n        }"}]},[a("st-total-item",{attrs:{unit:e.unit,label:e.label,value:e.value}})],1)}}])}),a("st-desc",{class:t.b("desc-card"),attrs:{dataSource:t.countDesc}})],1),a("st-hr"),a("div",{class:t.b("section")},[a("header",{class:t.bHeader("header")},[a("div",{class:t.bHeader("button-wapper")},[t.auth.export?a("st-button",{directives:[{name:"export-excel",rawName:"v-export-excel",value:{type:"brand/revenue-product",query:t.$searchQuery},expression:"{\n            type: 'brand/revenue-product',\n            query: $searchQuery\n          }"}],attrs:{type:"primary"}},[t._v("\n          全部导出\n        ")]):t._e()],1),a("div",{class:t.bHeader("actions")},[a("st-select",{attrs:{options:t.productType,defaultLabel:"全部分类"},on:{change:function(e){return t.onSingleSearch("product_type",e)}},model:{value:t.$searchQuery.product_type,callback:function(e){t.$set(t.$searchQuery,"product_type",e)},expression:"$searchQuery.product_type"}}),a("shop-select",{on:{change:function(e){return t.onSingleSearch("shop_id",e)}},model:{value:t.$searchQuery.shop_id,callback:function(e){t.$set(t.$searchQuery,"shop_id",e)},expression:"$searchQuery.shop_id"}}),a("st-recent-radio-group",{attrs:{value:t.$searchQuery},on:{change:t.onChangeDataDays}}),a("st-refresh-btn",{attrs:{updateTime:t.updateTime,action:t.refresh}})],1)]),a("st-total",{class:t.b("total"),attrs:{indexs:t.totalColumns,dataSource:t.total,hasTitle:""},scopedSlots:t._u([{key:"total_num",fn:function(e){return a("a",{directives:[{name:"modal-link",rawName:"v-modal-link",value:{name:"brand-stat-detail-list-modal",props:{query:t.$searchQuery,title:"订单明细",type:"brand-revenue-product"}},expression:"{\n          name: 'brand-stat-detail-list-modal',\n          props: {\n            query: $searchQuery,\n            title: '订单明细',\n            type: 'brand-revenue-product'\n          }\n        }"}]},[a("st-total-item",{attrs:{unit:e.unit,label:e.label,value:e.value}})],1)}}])}),a("st-table",{staticClass:"mg-t16",attrs:{loading:t.loading.getList,columns:t.columns,scroll:{x:1200},rowKey:function(t,e){return e},page:t.page,dataSource:t.list},on:{change:t.onTableChange},scopedSlots:t._u([{key:"total_num",fn:function(e,n){return a("a",{directives:[{name:"modal-link",rawName:"v-modal-link",value:{name:"brand-stat-detail-list-modal",props:{query:Object.assign({},t.$searchQuery,{product_type:n.product_type,product_id:n.product_id}),title:"订单明细",type:"brand-revenue-product"}},expression:"{\n          name: 'brand-stat-detail-list-modal',\n          props: {\n            query: {\n              ...$searchQuery,\n              product_type: record.product_type,\n              product_id: record.product_id\n            },\n            title: '订单明细',\n            type: 'brand-revenue-product'\n          }\n        }"}]},[t._v("\n        "+t._s(e)+"\n      ")])}}])})],1)],1)},r=[],i=a("b346"),o=a("1044"),u=a("b513"),d=a("56d3"),s=a("f35f"),l=a("d5e8"),c=a("c32d"),p=a.n(c),m=a("d9d0"),h=a("ea3e"),y=function(){return[{title:" 商品名称",width:200,dataIndex:"product_name"},{title:"客单价(元)",width:120,dataIndex:"per_order_amount"},{title:"订单数",scopedSlots:{customRender:"total_num"},width:100,dataIndex:"total_num"},{title:"原价(元)",width:100,dataIndex:"total_amount"},{title:"商家减免(元)",width:120,dataIndex:"waiver_amount"},{title:"营销优惠(元)",width:120,dataIndex:"preferential_amount"},{title:"实收金额(元)",width:120,dataIndex:"total_pay_amount"},{title:"折扣",width:80,dataIndex:"discount_percentage"},{title:"退款(元)",width:120,dataIndex:"refund_amount"},{title:"净收入(元)",width:120,dataIndex:"net_revenue"}]},v=function(){return[{title:"客单价",unit:"¥",dataIndex:"per_order_amount"},{title:"订单数",scopedSlots:{customRender:"total_num"},dataIndex:"total_num"},{title:"原价",unit:"¥",dataIndex:"total_amount"},{title:"商家减免",unit:"¥",dataIndex:"waiver_amount"},{title:"营销优惠",unit:"¥",dataIndex:"preferential_amount"},{title:"实收金额",unit:"¥",dataIndex:"total_pay_amount"},{title:"折扣",dataIndex:"discount_percentage"},{title:"退款",unit:"¥",dataIndex:"refund_amount"},{title:"净收入",unit:"¥",dataIndex:"net_revenue"}]},f=function(){return[{title:"实际营收",unit:"¥",dataIndex:"net_revenue"},{title:"总营收",unit:"¥",dataIndex:"total_amount"},{title:"营收退款",unit:"¥",dataIndex:"refund_amount"},{title:"预收款",unit:"¥",dataIndex:"wait_total_amount"},{title:"预收款退款",unit:"¥",dataIndex:"wait_refund_amount"},{title:"订单数",scopedSlots:{customRender:"total_num"},dataIndex:"total_num"},{title:"线上支付",unit:"¥",dataIndex:"online_total_amount"},{title:"线下支付",unit:"¥",dataIndex:"offline_total_amount"},{title:"定金支付",unit:"¥",dataIndex:"earnest_amount"},{title:"储值本金支付",unit:"¥",dataIndex:"deposit_principal_amount"},{title:"储值赠送支付",unit:"¥",dataIndex:"deposit_give_amount"},{title:"营销优惠",unit:"¥",dataIndex:"preferential_amount"},{title:"商家减免",unit:"¥",dataIndex:"waiver_amount"}]},_=function(){return[{title:"预收类目",value:"定金、押金和储值卡"},{title:"实际营收",value:"不含预收类目的净收入之和"},{title:"总营收",value:"不含预收类目的实收金额之和"},{title:"营收退款",value:"不含预收类目的退款之和"},{title:"预收款",value:"预收类目的净收入之和"},{title:"线上支付",value:"小程序微信支付"},{title:"线下支付",value:"现金、刷卡、POS机等"},{title:"储值本金支付",value:"使用储值卡的实收金额"},{title:"储值赠送支付",value:"使用储值卡的赠送金额"},{title:"净收入",value:"实收金额-退款"}]},b={name:"BrandStatRevenueProduct",mixins:[h["a"]],serviceInject:function(){return{productService:m["ProductService"]}},modals:{BrandStatDetailListModal:s["a"],BrandStatDailyListModal:l["a"]},rxState:function(){var t=this.productService,e=t.list$,a=t.page$,n=t.total$,r=t.auth$,i=t.dataToday$,o=t.updateTime$,u=t.productType$,d=t.loading$;return{list:e,page:a,total:n,auth:r,dataToday:i,updateTime:o,productType:u,loading:d}},bem:{b:"page-brand-stat-revenue-product",bHeader:"page-brand-stat-header"},data:function(){return{dataTodayShop:-1}},created:function(){this.getDataToday()},computed:{columns:y,countDesc:_,totalColumns:v,dailyTotalColumns:f},methods:{moment:p.a,onChangeDataDays:function(t){this.$searchQuery.day=t.recently_day||void 0,this.$searchQuery.start_date=t.start_date||void 0,this.$searchQuery.end_date=t.end_date||void 0,this.onSearch()},getDataToday:function(){return this.productService.getDataToday({shop_id:this.dataTodayShop}).subscribe()},refresh:function(){return this.productService.getDataRefresh()},dailyRefresh:function(){return this.productService.getDataToday({shop_id:this.dataTodayShop,is_refresh:1})}},components:{shopSelect:i["a"],StTotal:o["a"],StTotalItem:u["a"],StDesc:d["a"]}},g=b,x=a("2877"),S=Object(x["a"])(g,n,r,!1,null,null,null);e["default"]=S.exports},b346:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-select",{style:{width:t.width},attrs:{mode:t.mode,placeholder:t.placeholder||"请选择门店",value:t.cValue,dropdownMatchSelectWidth:!1,defaultValue:t.defaultValue,disabled:t.disabled,options:t.shopOptions},on:{change:t.onChange}})},r=[],i=(a("c5f6"),a("75fc")),o=a("2138"),u={model:{prop:"value",event:"change"},name:"ShopSelect",serviceInject:function(){return{userService:o["a"]}},rxState:function(){return{shopList:this.userService.shopList$}},computed:{cValue:{set:function(t){this.$emit("change",t)},get:function(){return this.value||this.defaultValue}},shopOptions:function(){var t="form"===this.useType?[]:[{label:"全部门店",value:-1}];return[].concat(t,Object(i["a"])(this.shopList.map((function(t){return{label:t.shop_name,value:t.shop_id}}))))}},props:{mode:{type:String},placeholder:{type:String},useType:{type:String},width:{type:String,default:"150px"},value:{type:[Number,String,Array]},defaultValue:Number,disabled:{type:Boolean,default:!1}},methods:{onChange:function(t){this.$emit("change",t)}}},d=u,s=a("2877"),l=Object(s["a"])(d,n,r,!1,null,null,null);e["a"]=l.exports},c3a8:function(t,e,a){"use strict";a.r(e),a.d(e,"GatherService",(function(){return f}));var n,r,i,o,u=a("d225"),d=a("b0b4"),s=a("9ab4"),l=a("0cd5"),c=a("df29"),p=a("c4cc"),m=a("5a69"),h=a("112a"),y=a("2cbb"),v=a("c170"),f=function(){function t(e,a,n){Object(u["a"])(this,t),this.revenueApi=e,this.authService=a,this.commonApi=n,this.loading$=new c["d"]({}),this.dataToday$=new c["d"]({}),this.list$=new c["d"]([]),this.total$=new c["d"]({}),this.updateTime$=new c["d"](Date.now()),this.auth$=this.authService.authMap$({export:"brand:stat:revenue|product_type_export"})}return Object(d["a"])(t,[{key:"getList",value:function(t){var e=this;return this.revenueApi.getData(t).pipe(Object(p["a"])((function(t){e.list$.commit((function(){return t.list})),t.last_update_time&&e.updateTime$.commit((function(){return t.last_update_time}))})))}},{key:"getDataTotal",value:function(t){var e=this;return this.revenueApi.getDataTotal(t).pipe(Object(p["a"])((function(t){e.total$.commit((function(){return t.info})),t.last_update_time&&e.updateTime$.commit((function(){return t.last_update_time}))})))}},{key:"getDataToday",value:function(t){var e=this;return this.revenueApi.getDataToady(t).pipe(Object(p["a"])((function(t){e.dataToday$.commit((function(){return t.info}))})))}},{key:"getDataRefresh",value:function(){var t=this;return this.commonApi.getRevenueGatherRefresh().pipe(Object(p["a"])((function(e){e.last_update_time&&t.updateTime$.commit((function(){return e.last_update_time}))})))}},{key:"beforeEach",value:function(t,e){return Object(v["a"])(this.getList(t.meta.query),this.getDataTotal(t.meta.query))}}]),t}();Object(s["b"])([Object(c["c"])(),Object(s["d"])("design:type",Function),Object(s["d"])("design:paramtypes",["function"===typeof(n="undefined"!==typeof m["RevenueDataParams"]&&m["RevenueDataParams"])?n:Object]),Object(s["d"])("design:returntype",void 0)],f.prototype,"getList",null),f=Object(s["b"])([Object(l["b"])(),Object(s["d"])("design:paramtypes",["function"===typeof(r="undefined"!==typeof m["a"]&&m["a"])?r:Object,"function"===typeof(i="undefined"!==typeof y["a"]&&y["a"])?i:Object,"function"===typeof(o="undefined"!==typeof h["a"]&&h["a"])?o:Object])],f)},d9d0:function(t,e,a){"use strict";a.r(e),a.d(e,"ProductService",(function(){return b}));var n,r,i,o,u,d=a("d225"),s=a("b0b4"),l=a("9ab4"),c=a("0cd5"),p=a("df29"),m=a("c4cc"),h=a("5a69"),y=a("112a"),v=a("2cbb"),f=a("2138"),_=a("c170"),b=function(){function t(e,a,n,r){Object(d["a"])(this,t),this.revenueApi=e,this.authService=a,this.userService=n,this.commonApi=r,this.loading$=new p["d"]({}),this.dataToday$=new p["d"]({}),this.list$=new p["d"]([]),this.page$=new p["d"]({}),this.total$=new p["d"]({}),this.updateTime$=new p["d"](Date.now()),this.productType$=this.userService.getOptions$("report.revenue_product_type"),this.auth$=this.authService.authMap$({export:"brand:stat:revenue|product_export"})}return Object(s["a"])(t,[{key:"getList",value:function(t){var e=this;return this.revenueApi.getProductData(t).pipe(Object(m["a"])((function(t){e.list$.commit((function(){return t.list.map((function(t,e){return t.idx||(t.idx=e),t}))})),e.page$.commit((function(){return t.page})),t.last_update_time&&e.updateTime$.commit((function(){return t.last_update_time}))})))}},{key:"getDataTotal",value:function(t){var e=this;return this.revenueApi.getProductDataTotal(t).pipe(Object(m["a"])((function(t){e.total$.commit((function(){return t.info})),t.last_update_time&&e.updateTime$.commit((function(){return t.last_update_time}))})))}},{key:"getDataToday",value:function(t){var e=this;return this.revenueApi.getProductDataToady(t).pipe(Object(m["a"])((function(t){e.dataToday$.commit((function(){return t.info}))})))}},{key:"getDataRefresh",value:function(){var t=this;return this.commonApi.getRevenueProductRefresh().pipe(Object(m["a"])((function(e){e.last_update_time&&t.updateTime$.commit((function(){return e.last_update_time}))})))}},{key:"beforeEach",value:function(t,e){return Object(_["a"])(this.getList(t.meta.query),this.getDataTotal(t.meta.query))}}]),t}();Object(l["b"])([Object(p["c"])(),Object(l["d"])("design:type",Function),Object(l["d"])("design:paramtypes",["function"===typeof(n="undefined"!==typeof h["RevenueDataParams"]&&h["RevenueDataParams"])?n:Object]),Object(l["d"])("design:returntype",void 0)],b.prototype,"getList",null),b=Object(l["b"])([Object(c["b"])(),Object(l["d"])("design:paramtypes",["function"===typeof(r="undefined"!==typeof h["a"]&&h["a"])?r:Object,"function"===typeof(i="undefined"!==typeof v["a"]&&v["a"])?i:Object,"function"===typeof(o="undefined"!==typeof f["a"]&&f["a"])?o:Object,"function"===typeof(u="undefined"!==typeof y["a"]&&y["a"])?u:Object])],b)}}]);