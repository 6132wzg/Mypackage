(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shop-stat-orders"],{"07f9":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:e.b()},[r("div",{class:e.b("section")},[r("header",{staticClass:"mg-t16",class:e.bHeader("header")},[r("div",{class:e.bHeader("button-wapper")},[e.auth.export?r("st-button",{directives:[{name:"export-excel",rawName:"v-export-excel",value:{type:"shop/order_collcet_export",query:e.$searchQuery},expression:"{\n            type: 'shop/order_collcet_export',\n            query: $searchQuery\n          }"}],attrs:{type:"primary"}},[e._v("\n          全部导出\n        ")]):e._e()],1),r("div",{class:e.bHeader("actions")},[r("st-recent-radio-group",{attrs:{value:e.$searchQuery},on:{change:e.onChangeDataDays}})],1)]),r("st-total",{class:e.b("total"),attrs:{indexs:e.totalColumns,dataSource:e.total,slidesPerView:"auto",hasTitle:""},scopedSlots:e._u([{key:"order_num",fn:function(t){return r("a",{on:{click:function(r){return e.showOrdersModal(t,-1)}}},[r("st-total-item",{attrs:{unit:t.unit,label:t.label,value:t.value}})],1)}},{key:"order_completed_num",fn:function(t){return r("a",{on:{click:function(r){return e.showOrdersModal(t,2)}}},[r("st-total-item",{attrs:{unit:t.unit,label:t.label,value:t.value}})],1)}},{key:"order_uncompleted_num",fn:function(t){return r("a",{on:{click:function(r){return e.showOrdersModal(t,1)}}},[r("st-total-item",{attrs:{unit:t.unit,label:t.label,value:t.value}})],1)}},{key:"order_refund_num",fn:function(t){return r("a",{on:{click:function(r){return e.showOrdersModal(t,4)}}},[r("st-total-item",{attrs:{unit:t.unit,label:t.label,value:t.value}})],1)}},{key:"order_cancel_num",fn:function(t){return r("a",{on:{click:function(r){return e.showOrdersModal(t,3)}}},[r("st-total-item",{attrs:{unit:t.unit,label:t.label,value:t.value}})],1)}},{key:"order_part_refund_num",fn:function(t){return r("a",{on:{click:function(r){return e.showOrdersModal(t,5)}}},[r("st-total-item",{attrs:{unit:t.unit,label:t.label,value:t.value}})],1)}}])}),r("st-table",{staticClass:"mg-t16",attrs:{rowKey:function(e,t){return t},loading:e.loading.getList,columns:e.columns,scroll:{x:1400},dataSource:e.list,stripe:!1,rowSpanKey:[{key:"transfer_type",formatter:function(t){return e.transferType[t]}}]},on:{change:e.onTableChange},scopedSlots:e._u([{key:"product_type",fn:function(t){return r("span",{},[e._v("\n        "+e._s(e._f("enumFilter")(t,"report.revenue_product_type"))+"\n      ")])}},{key:"order_num",fn:function(t,n){return r("a",{on:{click:function(t){return e.showOrdersModal(n,-1,"table")}}},[e._v("\n        "+e._s(t)+"\n      ")])}},{key:"order_completed_num",fn:function(t,n){return r("a",{on:{click:function(t){return e.showOrdersModal(n,2,"table")}}},[e._v("\n        "+e._s(t)+"\n      ")])}},{key:"order_uncompleted_num",fn:function(t,n){return r("a",{on:{click:function(t){return e.showOrdersModal(n,1,"table")}}},[e._v("\n        "+e._s(t)+"\n      ")])}},{key:"order_refund_num",fn:function(t,n){return r("a",{on:{click:function(t){return e.showOrdersModal(n,4,"table")}}},[e._v("\n        "+e._s(t)+"\n      ")])}},{key:"order_cancel_num",fn:function(t,n){return r("a",{on:{click:function(t){return e.showOrdersModal(n,3,"table")}}},[e._v("\n        "+e._s(t)+"\n      ")])}},{key:"order_part_refund_num",fn:function(t,n){return r("a",{on:{click:function(t){return e.showOrdersModal(n,5,"table")}}},[e._v("\n        "+e._s(t)+"\n      ")])}}])})],1)])},a=[],o=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),c=r("1044"),i=r("b513"),d=r("f35f"),s=r("62cd"),u=r("ea3e"),l=function(e){return[{title:"订单类型",width:80,align:"center",dataIndex:"transfer_type"},{title:"商品类型",scopedSlots:{customRender:"product_type"},width:120,dataIndex:"product_type"},{title:"订单总数",scopedSlots:{customRender:"order_num"},width:100,dataIndex:"order_num"},{title:"已完成订单",scopedSlots:{customRender:"order_completed_num"},width:100,dataIndex:"order_completed_num"},{title:"未完成订单",scopedSlots:{customRender:"order_uncompleted_num"},width:100,dataIndex:"order_uncompleted_num"},{title:"已退款订单",scopedSlots:{customRender:"order_refund_num"},width:100,dataIndex:"order_refund_num"},{title:"部分退款订单",scopedSlots:{customRender:"order_part_refund_num"},width:100,dataIndex:"order_part_refund_num"},{title:"已取消订单",scopedSlots:{customRender:"order_cancel_num"},width:100,dataIndex:"order_cancel_num"},{title:"实收金额(元)",width:100,dataIndex:"paid_price"},{title:"剩余应收(元)",width:100,dataIndex:"remainder_price"},{title:"退款(元)",width:100,dataIndex:"refund_price"},{title:"原价(元)",width:100,dataIndex:"total_price"},{title:"营销优惠(元)",width:100,dataIndex:"order_discount"},{title:"商家减免(元)",width:100,dataIndex:"reduce_price"}]},p=function(){return[{title:"订单总数",scopedSlots:{customRender:"order_num"},dataIndex:"order_num"},{title:"已完成订单",scopedSlots:{customRender:"order_completed_num"},dataIndex:"order_completed_num"},{title:"未完成订单",scopedSlots:{customRender:"order_uncompleted_num"},dataIndex:"order_uncompleted_num"},{title:"已退款订单",scopedSlots:{customRender:"order_refund_num"},dataIndex:"order_refund_num"},{title:"部分退款订单",scopedSlots:{customRender:"order_part_refund_num"},dataIndex:"order_part_refund_num"},{title:"已取消订单",scopedSlots:{customRender:"order_cancel_num"},dataIndex:"order_cancel_num"},{title:"实收金额",unit:"¥",dataIndex:"paid_price"},{title:"剩余应收",unit:"¥",dataIndex:"remainder_price"},{title:"退款",unit:"¥",dataIndex:"refund_price"},{title:"原价",unit:"¥",dataIndex:"total_price"},{title:"营销优惠",unit:"¥",dataIndex:"order_discount"},{title:"商家减免",unit:"¥",dataIndex:"reduce_price"}]},f=r("c32d"),_=r.n(f);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m={name:"ShopStatOrdersGather",mixins:[u["a"]],modals:{StatDetailListModal:d["a"]},serviceInject:function(){return{gatherService:s["GatherService"]}},rxState:function(){var e=this.gatherService,t=e.list$,r=e.transferType$,n=e.total$,a=e.rowSpanMap$,o=e.auth$,c=e.loading$;return{list:t,transferType:r,total:n,rowSpanMap:a,auth:o,loading:c}},bem:{b:"page-shop-stat-orders-gather",bHeader:"page-brand-stat-header"},data:function(){return{}},computed:{columns:l,totalColumns:p},created:function(){},methods:{moment:_.a,onChangeDataDays:function(e){this.$searchQuery.day=e.recently_day||void 0,this.$searchQuery.start_date=e.start_date||void 0,this.$searchQuery.end_date=e.end_date||void 0,this.onSearch()},showOrdersModal:function(e,t,r){var n="table"===r?{product_type:e.product_type,transfer_type:e.transfer_type}:{};this.$modalRouter.push({name:"stat-detail-list-modal",props:{query:y({},this.$$searchQuery,{order_status:t},n),title:"订单明细",type:"shop-orders-gather"}})}},components:{StTotal:c["a"],StTotalItem:i["a"]}},b=m,v=r("2877"),O=Object(v["a"])(b,n,a,!1,null,null,null);t["default"]=O.exports},"62cd":function(e,t,r){"use strict";r.r(t),r.d(t,"GatherService",(function(){return b}));var n,a,o,c,i=r("75fc"),d=r("d225"),s=r("b0b4"),u=r("9ab4"),l=r("0cd5"),p=r("df29"),f=r("c4cc"),_=r("ce7b"),h=r("2138"),y=r("2cbb"),m=r("c170"),b=function(){function e(t,r,n){Object(d["a"])(this,e),this.orderApi=t,this.userService=r,this.authService=n,this.loading$=new p["d"]({}),this.list$=new p["d"]([]),this.rowSpanMap$=new p["d"]({}),this.total$=new p["d"]({}),this.transferType$=this.userService.getEnumValue$("report.report_transfer_type"),this.auth$=this.authService.authMap$({export:"shop:stat:order|collect_export"})}return Object(s["a"])(e,[{key:"SET_ROWSPAN_MAP",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};e.map((function(e,r){t[e.transfer_type]?t[e.transfer_type].length+=1:t[e.transfer_type]={length:1,firstKey:r}})),this.rowSpanMap$.commit((function(){return t}))}},{key:"getList",value:function(e){var t=this;return this.orderApi.getData(e).pipe(Object(f["a"])((function(e){var r=[];e.list.map((function(e){return r=[].concat(Object(i["a"])(r),Object(i["a"])(e.list))})),t.SET_ROWSPAN_MAP(r),t.list$.commit((function(){return r}))})))}},{key:"getDataTotal",value:function(e){var t=this;return this.orderApi.getDataTotal(e).pipe(Object(f["a"])((function(e){t.total$.commit((function(){return e.info}))})))}},{key:"beforeEach",value:function(e,t){return Object(m["a"])(this.getList(e.meta.query),this.getDataTotal(e.meta.query))}}]),e}();Object(u["b"])([Object(p["c"])(),Object(u["d"])("design:type",Function),Object(u["d"])("design:paramtypes",["function"===typeof(n="undefined"!==typeof _["OrderDataParams"]&&_["OrderDataParams"])?n:Object]),Object(u["d"])("design:returntype",void 0)],b.prototype,"getList",null),b=Object(u["b"])([Object(l["b"])(),Object(u["d"])("design:paramtypes",["function"===typeof(a="undefined"!==typeof _["a"]&&_["a"])?a:Object,"function"===typeof(o="undefined"!==typeof h["a"]&&h["a"])?o:Object,"function"===typeof(c="undefined"!==typeof y["a"]&&y["a"])?c:Object])],b)},af2b:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:e.b()},[r("div",{class:e.b("section")},[r("header",{staticClass:"mg-t16",class:e.bHeader("header")},[r("div",{class:e.bHeader("button-wapper")},[e.auth.export?r("st-button",{directives:[{name:"export-excel",rawName:"v-export-excel",value:{type:"shop/order_analysis_export",query:e.$searchQuery},expression:"{\n            type: 'shop/order_analysis_export',\n            query: $searchQuery\n          }"}],attrs:{type:"primary"}},[e._v("\n          全部导出\n        ")]):e._e()],1),r("div",{class:e.bHeader("actions")},[r("st-recent-radio-group",{attrs:{value:e.$searchQuery},on:{change:e.onChangeDataDays}})],1)]),r("st-table",{staticClass:"mg-t16",attrs:{rowKey:function(e,t){return t},loading:e.loading.getList,columns:e.columns,scroll:{x:1e3},page:!1,dataSource:e.list},on:{change:e.onTableChange},scopedSlots:e._u([{key:"product_type",fn:function(t){return r("span",{},[e._v("\n        "+e._s(e._f("enumFilter")(t,"report.revenue_product_type"))+"\n      ")])}},{key:"order_per_price",fn:function(t,n){return r("a",{directives:[{name:"modal-link",rawName:"v-modal-link",value:{name:"stat-per-detail-list-modal",props:{query:Object.assign({},e.$searchQuery,{product_type:n.product_type}),title:"客单价日明细",type:"shop-orders-analyse"}},expression:"{\n          name: 'stat-per-detail-list-modal',\n          props: {\n            query: {\n              ...$searchQuery,\n              product_type: record.product_type\n            },\n            title: '客单价日明细',\n            type: 'shop-orders-analyse'\n          }\n        }"}]},[e._v("\n        "+e._s(t)+"\n      ")])}},{key:"order_num",fn:function(t,n){return r("a",{on:{click:function(t){return e.showOrdersModal(n)}}},[e._v("\n        "+e._s(t)+"\n      ")])}},{key:"online_total_num",fn:function(t,n){return r("a",{on:{click:function(t){return e.showOrdersModal(n,2)}}},[e._v("\n        "+e._s(t)+"\n      ")])}}])})],1)])},a=[],o=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),c=r("f35f"),i=r("919a"),d=r("b204"),s=r("ea3e"),u=function(){return[{title:"商品类型",scopedSlots:{customRender:"product_type"},width:120,dataIndex:"product_type"},{title:"客单价(元)",scopedSlots:{customRender:"order_per_price"},width:100,dataIndex:"order_per_price"},{title:"总成单数",scopedSlots:{customRender:"order_num"},width:100,dataIndex:"order_num"},{title:"日均单量",width:100,dataIndex:"day_per_order_num"},{title:"实收金额(元)",width:100,dataIndex:"paid_price"},{title:"原价(元)",width:100,dataIndex:"total_price"},{title:"折扣",width:80,dataIndex:"discount_percentage"},{title:"单日最高(元)",width:100,dataIndex:"day_max_price"},{title:"线上成单",scopedSlots:{customRender:"online_total_num"},width:100,dataIndex:"online_total_num"},{title:"线上实收(元)",width:100,dataIndex:"online_paid_price"}]},l=r("c32d"),p=r.n(l);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={name:"ShopStatOrdersAnalyse",mixins:[s["a"]],modals:{StatOrdersDetailListModal:c["a"],StatPerDetailListModal:i["a"]},serviceInject:function(){return{analyseService:d["AnalyseService"]}},rxState:function(){var e=this.analyseService,t=e.list$,r=e.auth$,n=e.loading$;return{list:t,auth:r,loading:n}},bem:{b:"page-shop-stat-orders-analyse",bHeader:"page-brand-stat-header"},data:function(){return{}},computed:{columns:u},created:function(){},methods:{moment:p.a,onChangeDataDays:function(e){this.$searchQuery.day=e.recently_day||void 0,this.$searchQuery.start_date=e.start_date||void 0,this.$searchQuery.end_date=e.end_date||void 0,this.onSearch()},showOrdersModal:function(e,t){this.$modalRouter.push({name:"stat-orders-detail-list-modal",props:{query:_({},this.$$searchQuery,{product_type:e.product_type,order_source:t}),title:"订单明细",type:"shop-orders-analyse"}})}},components:{}},y=h,m=r("2877"),b=Object(m["a"])(y,n,a,!1,null,null,null);t["default"]=b.exports},b204:function(e,t,r){"use strict";r.r(t),r.d(t,"AnalyseService",(function(){return _}));var n,a,o,c=r("d225"),i=r("b0b4"),d=r("9ab4"),s=r("0cd5"),u=r("df29"),l=r("c4cc"),p=r("ce7b"),f=r("2cbb"),_=function(){function e(t,r){Object(c["a"])(this,e),this.orderApi=t,this.authService=r,this.loading$=new u["d"]({}),this.list$=new u["d"]([]),this.auth$=this.authService.authMap$({export:"shop:stat:order|analysis_export"})}return Object(i["a"])(e,[{key:"getList",value:function(e){var t=this;return this.orderApi.getAnalyseData(e).pipe(Object(l["a"])((function(e){t.list$.commit((function(){return e.list}))})))}},{key:"beforeEach",value:function(e,t){return this.getList(e.meta.query)}}]),e}();Object(d["b"])([Object(u["c"])(),Object(d["d"])("design:type",Function),Object(d["d"])("design:paramtypes",["function"===typeof(n="undefined"!==typeof p["OrderDataParams"]&&p["OrderDataParams"])?n:Object]),Object(d["d"])("design:returntype",void 0)],_.prototype,"getList",null),_=Object(d["b"])([Object(s["b"])(),Object(d["d"])("design:paramtypes",["function"===typeof(a="undefined"!==typeof p["a"]&&p["a"])?a:Object,"function"===typeof(o="undefined"!==typeof f["a"]&&f["a"])?o:Object])],_)},ce7b:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));r("6b54"),r("2397");var n=r("d225"),a=r("b0b4"),o=r("308d"),c=r("6bb5"),i=r("4e2b"),d=r("de46");function s(e){return function(){var t,r=Object(c["a"])(e);if(u()){var n=Object(c["a"])(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return Object(o["a"])(this,t)}}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var l=function(e){Object(i["a"])(r,e);var t=s(r);function r(){return Object(n["a"])(this,r),t.apply(this,arguments)}return Object(a["a"])(r,[{key:"getData",value:function(e){return this.http.get("/v1/report/order-collect/shop/list",{query:e})}},{key:"getDataTotal",value:function(e){return this.http.get("/v1/report/order-collect/shop/list_total",{query:e})}},{key:"getAnalyseData",value:function(e){return this.http.get("/v1/report/order-analysis/shop/list",{query:e})}}]),r}(d["a"])}}]);