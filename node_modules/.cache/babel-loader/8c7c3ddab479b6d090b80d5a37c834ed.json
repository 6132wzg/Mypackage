{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/layouts/default.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/layouts/default.vue","mtime":1600926556073},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _toConsumableArray from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport DefaultSiderMenu from \"./default#/sider-menu.vue\";\nimport DefaultNotify from \"./default#/notify.vue\";\nimport SwitchShop from '@/views/fragments/shop/switch';\nimport { find } from 'lodash-es';\nimport { UserService } from '@/services/user.service';\nimport { TokenService } from '@/services/token.service';\nimport { TitleService } from '@/services/title.service';\nimport AccountBind from '@/views/biz-modals/account/bind';\nimport AccountUnbind from '@/views/biz-modals/account/unbind';\nimport AccountModify from '@/views/biz-modals/account/modify';\nimport { UdeskService } from '@/services/udesk.service';\nimport StUdeskBtn from '@/views/biz-components/udesk-btn/udesk-btn';\nimport { WsNotifyService } from \"./default#/ws-notify.service\";\nimport Copyright from '@/views/biz-components/copyright/copyright';\nexport default {\n  name: 'SaasLayout',\n  components: {\n    DefaultSiderMenu: DefaultSiderMenu,\n    SwitchShop: SwitchShop,\n    DefaultNotify: DefaultNotify,\n    StUdeskBtn: StUdeskBtn,\n    Copyright: Copyright\n  },\n  serviceInject: function serviceInject() {\n    return {\n      userService: UserService,\n      tokenService: TokenService,\n      titleService: TitleService,\n      udeskService: UdeskService,\n      wsNotifyService: WsNotifyService\n    };\n  },\n  rxState: function rxState() {\n    var _this$wsNotifyService = this.wsNotifyService,\n        systemList$ = _this$wsNotifyService.systemList$,\n        activityList$ = _this$wsNotifyService.activityList$;\n    return {\n      systemList$: systemList$,\n      activityList$: activityList$,\n      user: this.userService.user$,\n      brand: this.userService.brand$,\n      shop: this.userService.shop$,\n      theme: this.userService.theme$,\n      title: this.titleService.title$,\n      isThemeStudio: this.userService.isThemeStudio$,\n      isShowUdeskBtn: this.udeskService.isShowUdeskBtn$\n    };\n  },\n  data: function data() {\n    return {\n      isShowSwitchShop: false,\n      systemListLength: 0,\n      menuObj: {},\n      fastEntryComp: null\n    };\n  },\n  modals: {\n    CommonNotifyConfig: function CommonNotifyConfig() {\n      return import(\n      /* webpackChunkName: \"notify-config\" */\n      '@/views/biz-modals/common/notify/config');\n    },\n    CommonNotifyActivity: function CommonNotifyActivity() {\n      return import(\n      /* webpackChunkName: \"notify-activity\" */\n      '@/views/biz-modals/common/notify/activity');\n    },\n    CommonNotifySystem: function CommonNotifySystem() {\n      return import(\n      /* webpackChunkName: \"notify-system\" */\n      '@/views/biz-modals/common/notify/system');\n    },\n    AccountBind: AccountBind,\n    AccountUnbind: AccountUnbind,\n    AccountModify: AccountModify\n  },\n  computed: {\n    breadCrumbs: function breadCrumbs() {\n      var menuBreadCrumb = this.getSiderMenuBreadCrumb();\n      var parentBreadCrumb = this.getParentBreadCrumb();\n      return [].concat(_toConsumableArray(menuBreadCrumb), _toConsumableArray(parentBreadCrumb));\n    },\n    isInShop: function isInShop() {\n      return this.shop.id;\n    },\n    isSchedule: function isSchedule() {\n      return this.$route.path.includes('shop/product/course/schedule');\n    },\n    isReception: function isReception() {\n      return this.$route.path.includes('shop/reception/index');\n    },\n    siderMenuTip: function siderMenuTip() {\n      return this.isThemeStudio ? '工作室版' : '俱乐部版';\n    }\n  },\n  watch: {\n    systemList$: function systemList$(newValue, oldValue) {\n      var _this = this;\n\n      if (newValue.length === 0) {\n        if (this.activityList$.length > 0) {\n          this.$modalRouter.push({\n            name: 'common-notify-activity',\n            props: {\n              list: this.activityList$\n            },\n            on: {\n              success: function success(res) {\n                _this.wsNotifyService.setRead().subscribe();\n              }\n            }\n          });\n        }\n\n        return;\n      }\n\n      if (newValue.length === 0) return;\n      this.onSuccess();\n    }\n  },\n  methods: {\n    onFastEntryVisible: function onFastEntryVisible(visible) {\n      var _this2 = this;\n\n      if (visible) {\n        import(\n        /* webpackChunkName: \"fast-entry\" */\n        \"./default#/fast-entry\").then(function (C) {\n          _this2.fastEntryComp = C.default || C;\n        });\n      }\n    },\n    onSuccess: function onSuccess() {\n      var _this3 = this;\n\n      var len = this.systemList$.length;\n\n      if (this.systemListLength === len) {\n        if (this.activityList$.length > 0) {\n          this.$modalRouter.push({\n            name: 'common-notify-activity',\n            props: {\n              list: this.activityList$\n            },\n            on: {\n              success: function success(res) {\n                _this3.wsNotifyService.setRead().subscribe();\n              }\n            }\n          });\n        }\n\n        return;\n      }\n\n      this.$modalRouter.push({\n        name: 'common-notify-system',\n        props: {\n          info: this.systemList$[this.systemListLength]\n        },\n        on: {\n          // 模态窗动画400ms\n          success: function success(res) {\n            _this3.systemListLength++;\n            setTimeout(function () {\n              _this3.wsNotifyService.setRead().subscribe();\n\n              _this3.onSuccess();\n            }, 400);\n          },\n          cancel: function cancel(res) {\n            _this3.systemListLength++;\n            setTimeout(function () {\n              _this3.onSuccess();\n            }, 400);\n          }\n        }\n      });\n    },\n    onClickNotifyConfig: function onClickNotifyConfig() {\n      this.$modalRouter.push({\n        name: 'common-notify-config'\n      });\n    },\n    switchShop: function switchShop() {\n      this.isShowSwitchShop = !this.isShowSwitchShop;\n    },\n    onClickBind: function onClickBind() {\n      this.$modalRouter.push({\n        name: 'account-bind'\n      });\n    },\n    onClickUnbind: function onClickUnbind() {\n      this.$modalRouter.push({\n        name: 'account-unbind'\n      });\n    },\n    onClickModifyPass: function onClickModifyPass() {\n      this.$modalRouter.push({\n        name: 'account-modify'\n      });\n    },\n    onClickLogout: function onClickLogout() {\n      this.tokenService.REMOVE_TOKEN();\n      location.href = '/account/login';\n    },\n    getParentBreadCrumb: function getParentBreadCrumb() {\n      var parentRouteName = this.$route.meta.parentRouteName;\n      var parentRoute;\n\n      if (parentRouteName) {\n        parentRoute = this.$router.resolve({\n          name: parentRouteName\n        }).resolved;\n      }\n\n      if (parentRoute) {\n        var name = parentRoute.name;\n        var title = this.userService.interpolation(parentRoute.meta.title);\n        return [{\n          label: title,\n          route: {\n            name: name\n          }\n        }];\n      } else {\n        return [];\n      }\n    },\n    getSiderMenuBreadCrumb: function getSiderMenuBreadCrumb() {\n      var _this$menuObj = this.menuObj,\n          selectedKey = _this$menuObj.selectedKey,\n          currentSiderMenu = _this$menuObj.currentSiderMenu;\n\n      if (selectedKey) {\n        var menuBreadCrumb = [];\n        menuBreadCrumb.push({\n          label: currentSiderMenu.name,\n          route: {\n            name: currentSiderMenu.url\n          }\n        });\n\n        if (selectedKey) {\n          var currentSubMenu = find(currentSiderMenu.children, function (subMenu) {\n            return subMenu.id === selectedKey;\n          });\n\n          if (currentSubMenu) {\n            menuBreadCrumb.push({\n              label: currentSubMenu.name,\n              route: {\n                name: currentSubMenu.url\n              }\n            });\n          }\n        }\n\n        return menuBreadCrumb;\n      } else {\n        return [];\n      }\n    },\n    onSiderMenuChange: function onSiderMenuChange(menuObj) {\n      this.menuObj = menuObj;\n    },\n    onClickSiderMenu: function onClickSiderMenu() {\n      /**\n       * 切换路由时关闭切换门店 drawer\n       */\n      this.isShowSwitchShop = false;\n    }\n  }\n};",{"version":3,"sources":["default.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"layout-default\" :class=\"theme\">\n    <aside class=\"layout-default-sider\">\n      <!-- 门店维度下 -->\n      <div class=\"layout-default-sider__shop\" v-if=\"isInShop\">\n        <div class=\"layout-default-sider__shop-top\">\n          <div class=\"layout-default-sider__logo\">\n            <img\n              width=\"100%\"\n              height=\"100%\"\n              :src=\"shop.logo | imgFilter({ w: 128, h: 128 })\"\n              alt=\"logo\"\n            />\n            <!-- <i class=\"layout-default-sider__certification st-icon-certified\"></i> -->\n          </div>\n          <div class=\"layout-default-sider__shop-brand-name\">\n            {{ brand.name }}\n          </div>\n        </div>\n        <div\n          class=\"layout-default-sider__name cursor-pointer\"\n          @click=\"switchShop\"\n        >\n          <span>{{ shop.name }}</span>\n          <st-icon\n            type=\"arrow-arc-right\"\n            class=\"layout-default-sider__arrow\"\n          ></st-icon>\n        </div>\n        <img\n          class=\"layout-default-sider__shop-tag\"\n          src=\"~@/assets/img/brand/tag-shop.png\"\n        />\n      </div>\n      <!-- 品牌维度下 -->\n      <div class=\"layout-default-sider__brand\" v-else>\n        <div class=\"layout-default-sider__logo\">\n          <img\n            width=\"100%\"\n            height=\"100%\"\n            :src=\"brand.logo | imgFilter({ w: 96, h: 96 })\"\n            alt=\"logo\"\n          />\n          <!-- <i class=\"layout-default-sider__certification st-icon-certified\"></i> -->\n        </div>\n        <div\n          class=\"layout-default-sider__name cursor-pointer\"\n          @click=\"switchShop\"\n        >\n          <span>{{ brand.name }}</span>\n          <st-icon\n            type=\"arrow-arc-right\"\n            class=\"layout-default-sider__arrow\"\n          ></st-icon>\n        </div>\n        <img\n          class=\"layout-default-sider__brand-tag\"\n          src=\"~@/assets/img/brand/tag-brand.png\"\n        />\n      </div>\n      <div\n        class=\"layout-default-sider__scrollbox\"\n        v-scrollBar\n        @click=\"onClickSiderMenu\"\n      >\n        <default-sider-menu @change=\"onSiderMenuChange\" />\n        <div class=\"layout-default-sider__version\">\n          <div class=\"layout-default-sider__version-bg\"></div>\n          <label class=\"layout-default-sider__version-text\">\n            {{ siderMenuTip }}\n          </label>\n        </div>\n      </div>\n    </aside>\n    <header\n      class=\"layout-default-body__header\"\n      :class=\"{ 'layout-default-body__header--schedule': isSchedule }\"\n    >\n      <div class=\"layout-default-body__location\">\n        <a-breadcrumb>\n          <img\n            slot=\"separator\"\n            src=\"~@/assets/img/separator.png\"\n            alt=\"separator\"\n            width=\"4px\"\n            class=\"layout-default-body__bread-separator\"\n          />\n          <a-breadcrumb-item class=\"layout-default-body__bread-home\">\n            <router-link to=\"/\">\n              <st-icon type=\"home\" class=\"layout-default-body__icon\" />\n            </router-link>\n          </a-breadcrumb-item>\n          <a-breadcrumb-item v-for=\"b in breadCrumbs\" :key=\"b.label\">\n            <router-link :to=\"b.route\" v-if=\"b.label && b.route.name\">\n              <span class=\"layout-default-body__breadtext\">{{ b.label }}</span>\n            </router-link>\n            <span v-if=\"!b.route.name\" class=\"layout-default-body__breadtext\">\n              {{ b.label }}\n            </span>\n          </a-breadcrumb-item>\n          <a-breadcrumb-item\n            v-if=\"title\"\n            class=\"layout-default-body__breadtext layout-default-body__breadtext--title\"\n          >\n            <span>{{ title }}</span>\n          </a-breadcrumb-item>\n        </a-breadcrumb>\n      </div>\n      <div class=\"layout-default-body__personal\">\n        <!-- 消息通知 -->\n        <default-notify></default-notify>\n        <!-- 九宫格 -->\n        <a-dropdown\n          :trigger=\"['hover']\"\n          placement=\"bottomRight\"\n          @visibleChange=\"onFastEntryVisible\"\n        >\n          <div class=\"layout-default-body__avatar\">\n            <st-icon\n              class=\"layout-fast-entry_icon\"\n              type=\"square\"\n              color=\"#9BACB9\"\n            ></st-icon>\n          </div>\n          <div slot=\"overlay\">\n            <componet :is=\"fastEntryComp\" />\n          </div>\n        </a-dropdown>\n\n        <a-dropdown :trigger=\"['hover']\" placement=\"bottomRight\">\n          <div class=\"layout-default-body__avatar\">\n            <img\n              :src=\"user.avatar | imgFilter({ w: 64, h: 64 })\"\n              width=\"32\"\n              height=\"32\"\n              alt=\"avatar\"\n            />\n          </div>\n          <div slot=\"overlay\" class=\"layout-default-body__dropdown\">\n            <div class=\"layout-default-body__username\">\n              <p class=\"layout-default-body__name\">{{ user.name }}</p>\n              <p class=\"layout-default-body__mobile\">{{ user.mobile }}</p>\n            </div>\n            <a-menu class=\"layout-default-body__menu\">\n              <!-- <a-menu-item class=\"layout-default-body__options\">\n                  <st-icon type=\"safety\"></st-icon>\n                  <span>账号安全</span>\n              </a-menu-item>-->\n              <!-- <a-menu-item class=\"layout-default-body__options\">\n                  <a v-modal-link=\"{ name: 'brand-switch' }\">\n                    <st-icon type=\"switch\"></st-icon>\n                    <span>切换品牌</span>\n                  </a>\n              </a-menu-item>-->\n              <!-- <a-menu-divider/> -->\n              <a-menu-item\n                @click=\"onClickNotifyConfig\"\n                class=\"layout-default-body__options\"\n              >\n                <st-icon type=\"notify-config\" color=\"#000000\"></st-icon>\n                <span>通知设置</span>\n              </a-menu-item>\n              <a-menu-item\n                @click=\"onClickBind\"\n                class=\"layout-default-body__options\"\n              >\n                <st-icon type=\"bind-phone\" size=\"16px\"></st-icon>\n                <span>绑定手机号</span>\n              </a-menu-item>\n              <a-menu-item\n                @click=\"onClickModifyPass\"\n                class=\"layout-default-body__options\"\n              >\n                <st-icon type=\"modify\" size=\"16px\"></st-icon>\n                <span>修改密码</span>\n              </a-menu-item>\n              <a-menu-item\n                @click=\"onClickLogout\"\n                class=\"layout-default-body__options\"\n              >\n                <st-icon type=\"logout\" size=\"16px\"></st-icon>\n                <span>退出</span>\n              </a-menu-item>\n            </a-menu>\n          </div>\n        </a-dropdown>\n      </div>\n    </header>\n    <main class=\"layout-default-body\">\n      <article\n        class=\"layout-default-body__content\"\n        :class=\"{ 'layout-default-body__content--reception': isReception }\"\n      >\n        <router-view></router-view>\n        <div class=\"layout-default-body__footer\">\n          <copyright></copyright>\n        </div>\n      </article>\n    </main>\n    <switch-shop v-model=\"isShowSwitchShop\"></switch-shop>\n    <st-udesk-btn v-show=\"isShowUdeskBtn\" />\n  </div>\n</template>\n<script>\nimport DefaultSiderMenu from './default#/sider-menu.vue'\nimport DefaultNotify from './default#/notify.vue'\nimport SwitchShop from '@/views/fragments/shop/switch'\nimport { find } from 'lodash-es'\nimport { UserService } from '@/services/user.service'\nimport { TokenService } from '@/services/token.service'\nimport { TitleService } from '@/services/title.service'\n\nimport AccountBind from '@/views/biz-modals/account/bind'\nimport AccountUnbind from '@/views/biz-modals/account/unbind'\nimport AccountModify from '@/views/biz-modals/account/modify'\nimport { UdeskService } from '@/services/udesk.service'\nimport StUdeskBtn from '@/views/biz-components/udesk-btn/udesk-btn'\nimport { WsNotifyService } from './default#/ws-notify.service'\nimport Copyright from '@/views/biz-components/copyright/copyright'\n\nexport default {\n  name: 'SaasLayout',\n  components: {\n    DefaultSiderMenu,\n    SwitchShop,\n    DefaultNotify,\n    StUdeskBtn,\n    Copyright\n  },\n  serviceInject() {\n    return {\n      userService: UserService,\n      tokenService: TokenService,\n      titleService: TitleService,\n      udeskService: UdeskService,\n      wsNotifyService: WsNotifyService\n    }\n  },\n  rxState() {\n    const { systemList$, activityList$ } = this.wsNotifyService\n    return {\n      systemList$,\n      activityList$,\n      user: this.userService.user$,\n      brand: this.userService.brand$,\n      shop: this.userService.shop$,\n      theme: this.userService.theme$,\n      title: this.titleService.title$,\n      isThemeStudio: this.userService.isThemeStudio$,\n      isShowUdeskBtn: this.udeskService.isShowUdeskBtn$\n    }\n  },\n  data() {\n    return {\n      isShowSwitchShop: false,\n      systemListLength: 0,\n      menuObj: {},\n      fastEntryComp: null\n    }\n  },\n  modals: {\n    CommonNotifyConfig: () =>\n      import(\n        /* webpackChunkName: \"notify-config\" */ '@/views/biz-modals/common/notify/config'\n      ),\n    CommonNotifyActivity: () =>\n      import(\n        /* webpackChunkName: \"notify-activity\" */ '@/views/biz-modals/common/notify/activity'\n      ),\n    CommonNotifySystem: () =>\n      import(\n        /* webpackChunkName: \"notify-system\" */ '@/views/biz-modals/common/notify/system'\n      ),\n    AccountBind,\n    AccountUnbind,\n    AccountModify\n  },\n  computed: {\n    breadCrumbs() {\n      const menuBreadCrumb = this.getSiderMenuBreadCrumb()\n      const parentBreadCrumb = this.getParentBreadCrumb()\n      return [...menuBreadCrumb, ...parentBreadCrumb]\n    },\n    isInShop() {\n      return this.shop.id\n    },\n    isSchedule() {\n      return this.$route.path.includes('shop/product/course/schedule')\n    },\n    isReception() {\n      return this.$route.path.includes('shop/reception/index')\n    },\n    siderMenuTip() {\n      return this.isThemeStudio ? '工作室版' : '俱乐部版'\n    }\n  },\n  watch: {\n    systemList$(newValue, oldValue) {\n      if (newValue.length === 0) {\n        if (this.activityList$.length > 0) {\n          this.$modalRouter.push({\n            name: 'common-notify-activity',\n            props: { list: this.activityList$ },\n            on: {\n              success: res => {\n                this.wsNotifyService.setRead().subscribe()\n              }\n            }\n          })\n        }\n        return\n      }\n      if (newValue.length === 0) return\n      this.onSuccess()\n    }\n  },\n  methods: {\n    onFastEntryVisible(visible) {\n      if (visible) {\n        import(\n          /* webpackChunkName: \"fast-entry\" */ './default#/fast-entry'\n        ).then(C => {\n          this.fastEntryComp = C.default || C\n        })\n      }\n    },\n    onSuccess() {\n      const len = this.systemList$.length\n      if (this.systemListLength === len) {\n        if (this.activityList$.length > 0) {\n          this.$modalRouter.push({\n            name: 'common-notify-activity',\n            props: { list: this.activityList$ },\n            on: {\n              success: res => {\n                this.wsNotifyService.setRead().subscribe()\n              }\n            }\n          })\n        }\n        return\n      }\n      this.$modalRouter.push({\n        name: 'common-notify-system',\n        props: { info: this.systemList$[this.systemListLength] },\n        on: {\n          // 模态窗动画400ms\n          success: res => {\n            this.systemListLength++\n            setTimeout(() => {\n              this.wsNotifyService.setRead().subscribe()\n              this.onSuccess()\n            }, 400)\n          },\n          cancel: res => {\n            this.systemListLength++\n            setTimeout(() => {\n              this.onSuccess()\n            }, 400)\n          }\n        }\n      })\n    },\n    onClickNotifyConfig() {\n      this.$modalRouter.push({ name: 'common-notify-config' })\n    },\n    switchShop() {\n      this.isShowSwitchShop = !this.isShowSwitchShop\n    },\n    onClickBind() {\n      this.$modalRouter.push({\n        name: 'account-bind'\n      })\n    },\n    onClickUnbind() {\n      this.$modalRouter.push({\n        name: 'account-unbind'\n      })\n    },\n    onClickModifyPass() {\n      this.$modalRouter.push({\n        name: 'account-modify'\n      })\n    },\n    onClickLogout() {\n      this.tokenService.REMOVE_TOKEN()\n      location.href = '/account/login'\n    },\n    getParentBreadCrumb() {\n      const parentRouteName = this.$route.meta.parentRouteName\n      let parentRoute\n      if (parentRouteName) {\n        parentRoute = this.$router.resolve({\n          name: parentRouteName\n        }).resolved\n      }\n      if (parentRoute) {\n        const name = parentRoute.name\n        const title = this.userService.interpolation(parentRoute.meta.title)\n        return [\n          {\n            label: title,\n            route: {\n              name\n            }\n          }\n        ]\n      } else {\n        return []\n      }\n    },\n    getSiderMenuBreadCrumb() {\n      const { selectedKey, currentSiderMenu } = this.menuObj\n      if (selectedKey) {\n        const menuBreadCrumb = []\n        menuBreadCrumb.push({\n          label: currentSiderMenu.name,\n          route: {\n            name: currentSiderMenu.url\n          }\n        })\n        if (selectedKey) {\n          const currentSubMenu = find(currentSiderMenu.children, subMenu => {\n            return subMenu.id === selectedKey\n          })\n          if (currentSubMenu) {\n            menuBreadCrumb.push({\n              label: currentSubMenu.name,\n              route: {\n                name: currentSubMenu.url\n              }\n            })\n          }\n        }\n        return menuBreadCrumb\n      } else {\n        return []\n      }\n    },\n    onSiderMenuChange(menuObj) {\n      this.menuObj = menuObj\n    },\n    onClickSiderMenu() {\n      /**\n       * 切换路由时关闭切换门店 drawer\n       */\n      this.isShowSwitchShop = false\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/layouts"}]}