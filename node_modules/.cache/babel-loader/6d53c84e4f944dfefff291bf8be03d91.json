{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js!/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/product/course/mini-schedule/inbatch-add.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/product/course/mini-schedule/inbatch-add.vue","mtime":1597396799993},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js","mtime":1591062572352},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport moment from 'moment';\nimport AddCourse from \"./add-course\";\nimport CourseCardPopover from \"./course-card-popover\";\nimport { SmallCourseScheduleService } from '@/views/pages/shop/product/course/schedule/small-course/service#/schedule.service';\nimport { SmallCourseScheduleCommonService } from '@/views/pages/shop/product/course/schedule/small-course/service#/common.service';\nimport { InbatchAddService } from \"./inbatch-add.service\";\nimport ScheduleSmallCourseEditCourse from '@/views/biz-modals/schedule/small-course/edit-course';\nimport ScheduleSmallCourseSubmitCourse from '@/views/biz-modals/schedule/small-course/submit-course';\nimport { MessageService } from '@/services/message.service';\nimport { DELETE_TYPE } from '@/constants/stat/course';\nimport { SCHEDULE_CODE } from '@/constants/course/small-course';\nimport { cloneDeep } from 'lodash-es';\nimport { ruleOptions } from \"./inbatch-add.config\";\nexport default {\n  name: 'AddScheduleInBatch',\n  bem: {\n    b: 'page-shop-schedule-inbatch-add'\n  },\n  modals: {\n    ScheduleSmallCourseEditCourse: ScheduleSmallCourseEditCourse,\n    ScheduleSmallCourseSubmitCourse: ScheduleSmallCourseSubmitCourse\n  },\n  serviceInject: function serviceInject() {\n    return {\n      inbatchAddService: InbatchAddService,\n      smallCourseScheduleService: SmallCourseScheduleService,\n      smallCourseScheduleCommonService: SmallCourseScheduleCommonService,\n      msg: MessageService\n    };\n  },\n  rxState: function rxState() {\n    var scsc = this.smallCourseScheduleCommonService;\n    return {\n      courseSmallCourseOptions: scsc.courseSmallCourseOptions$\n    };\n  },\n  data: function data() {\n    var form = this.$stForm.create();\n    var decorators = form.decorators(ruleOptions);\n    return {\n      SCHEDULE_CODE: SCHEDULE_CODE,\n      showList: false,\n      form: form,\n      decorators: decorators,\n      moment: moment,\n      customizeShow: false,\n      disabledAddCourseBtn: true,\n      disabledCustomBtn: true,\n      coachId: undefined,\n      editScheduleCycleFlag: false,\n      courseId: '',\n      cycle_type: 1,\n      select_cycle_type: 1,\n      start_date: '',\n      end_date: '',\n      picker_start_date: '',\n      picker_end_date: '',\n      smallPickerList: [],\n      pickerList: [],\n      disabledDate: [],\n      tipsText: [],\n      tipsCourseNum: [],\n      scheduleIdList: [],\n      smallCourseInfo: {},\n      weekList: [{\n        weekId: 'week1',\n        week: 1,\n        date: '周一'\n      }, {\n        weekId: 'week2',\n        week: 2,\n        date: '周二'\n      }, {\n        weekId: 'week3',\n        week: 3,\n        date: '周三'\n      }, {\n        weekId: 'week4',\n        week: 4,\n        date: '周四'\n      }, {\n        weekId: 'week5',\n        week: 5,\n        date: '周五'\n      }, {\n        weekId: 'week6',\n        week: 6,\n        date: '周六'\n      }, {\n        weekId: 'week0',\n        week: 0,\n        date: '周日'\n      }],\n      filterDate: {},\n      scheduleList: [{\n        course_time: []\n      }],\n      customizeScheduleList: []\n    };\n  },\n  computed: {\n    addScheduleFlag: function addScheduleFlag() {\n      return this.end_date !== this.picker_end_date;\n    }\n  },\n  created: function created() {\n    this.filterDateList(this.scheduleList);\n    this.pickerList.push([moment(), moment()]);\n  },\n  methods: {\n    dealScheduleDate: function dealScheduleDate() {\n      var _this = this;\n\n      this.pickerList = [];\n      this.scheduleList.forEach(function (item, index) {\n        _this.pickerList.push([moment(item.cycle_start_date), moment(item.cycle_end_date)]);\n      });\n      this.picker_end_date = this.scheduleList[this.scheduleList.length - 1].cycle_end_date;\n    },\n    initScheduleDate: function initScheduleDate() {\n      var smallCourseInfo = this.smallCourseInfo;\n      this.pickerList = [];\n      this.pickerList.push([moment(smallCourseInfo.course_begin_time), moment(smallCourseInfo.course_end_time)]);\n      this.end_date = moment(smallCourseInfo.course_end_time).format('YYYY-MM-DD');\n      this.picker_end_date = moment(smallCourseInfo.course_end_time).format('YYYY-MM-DD');\n    },\n    initScheduleCourse: function initScheduleCourse() {\n      this.customizeScheduleList = [];\n      this.scheduleList = [{\n        course_time: []\n      }];\n      this.filterDateList(this.scheduleList);\n    },\n    onChangeCourse: function onChangeCourse(value) {\n      this.getCourseInfo(value);\n    },\n    getCourseInfo: function getCourseInfo(value) {\n      var _this2 = this;\n\n      this.courseSmallCourseOptions.forEach(function (item, index) {\n        if (item.course_id === value) {\n          _this2.smallCourseInfo = item;\n        }\n      });\n      console.log('课程信息');\n      console.log(this.smallCourseInfo);\n      this.start_date = this.smallCourseInfo.course_begin_time;\n      this.end_date = this.smallCourseInfo.course_end_time;\n      var start_date = this.start_date;\n      var end_date = this.end_date;\n      this.smallPickerList = [moment(start_date), moment(end_date)];\n      this.courseId = value;\n      var params = {};\n      params.course_id = this.courseId;\n      this.getScheduleInBatch(params);\n      this.smallCourseScheduleCommonService.getBindCoachList(value).subscribe();\n    },\n    onChangeScheduleType: function onChangeScheduleType(value) {\n      var _this3 = this;\n\n      if (!this.courseId) {\n        this.select_cycle_type = value;\n        this.cycle_type = value;\n        return;\n      }\n\n      var params = {\n        course_id: this.courseId,\n        cycle_type: value\n      };\n      var hasCoursesFlag = false;\n\n      if (this.cycle_type === 1) {\n        this.scheduleList.forEach(function (item, index) {\n          if (item.course_time.length > 0) {\n            hasCoursesFlag = true;\n          }\n        });\n      }\n\n      if (hasCoursesFlag) {\n        this.$confirm({\n          title: '提示',\n          content: \"\\u5207\\u6362\\u4E3A\\u81EA\\u5B9A\\u4E49\\u6392\\u8BFE\\u65B9\\u5F0F\\u540E\\uFF0C\\u82E5\\u9700\\u5207\\u6362\\u56DE\\u5468\\u671F\\u6392\\u8BFE\\uFF0C\\u5DF2\\u6392\\u8BFE\\u7A0B\\u65E0\\u6CD5\\u4FDD\\u5B58\\uFF0C\\u786E\\u8BA4\\u5207\\u6362\\uFF1F\",\n          onCancel: function onCancel() {\n            _this3.select_cycle_type = 1;\n          },\n          onOk: function onOk() {\n            _this3.getScheduleInBatch(params, value);\n          }\n        });\n      } else {\n        this.getScheduleInBatch(params, value);\n      }\n    },\n    getScheduleInBatch: function getScheduleInBatch(params, changeTyps) {\n      var _this4 = this;\n\n      this.smallCourseScheduleService.getScheduleInBatch(params).subscribe(function (res) {\n        _this4.disabledAddCourseBtn = false;\n        _this4.disabledCustomBtn = false;\n\n        _this4.initScheduleList(res.list, res.cycle_type, changeTyps);\n      }, function (err) {\n        if (err.response.code === SCHEDULE_CODE.ERR) {\n          _this4.select_cycle_type = 2;\n\n          _this4.$warning({\n            title: '提示',\n            okText: '我知道了',\n            content: \"\\u5DF2\\u6709\\u6392\\u8BFE\\u4FE1\\u606F\\uFF0C\\u65E0\\u6CD5\\u5207\\u6362\\u4E3A\\u5468\\u671F\\u6392\\u8BFE\\uFF0C\\u82E5\\u9700\\u5207\\u6362\\uFF0C\\u8BF7\\u5148\\u5220\\u9664\\u6392\\u8BFE\\u4FE1\\u606F\",\n            onOk: function onOk() {}\n          });\n        }\n      });\n    },\n    initScheduleList: function initScheduleList(list, type, changeTyps) {\n      if (type) {\n        this.cycle_type = type;\n        this.select_cycle_type = type;\n      }\n\n      if (changeTyps) {\n        this.cycle_type = changeTyps;\n        this.select_cycle_type = changeTyps;\n      }\n\n      if (!type && !changeTyps) {\n        this.cycle_type = 1;\n        this.select_cycle_type = 1;\n      }\n\n      if (!list.length && type === 0) {\n        this.initScheduleDate();\n        this.initScheduleCourse();\n        return;\n      }\n\n      if (list.length && this.cycle_type === 1) {\n        this.scheduleList = list;\n        this.dealScheduleDate(this.scheduleList);\n        this.filterDateList(this.scheduleList);\n      } else if (!list.length && this.cycle_type === 1) {\n        this.initScheduleDate();\n        this.initScheduleCourse();\n      } else if (this.cycle_type === 2 && list.length) {\n        this.initScheduleCourse();\n        this.customizeScheduleList = list;\n      }\n    },\n    onChangeRangePicker: function onChangeRangePicker(date, dateString, pickerIndex) {\n      var _this5 = this;\n\n      if (!this.courseId) {\n        return;\n      }\n\n      var pickerFlag = false;\n      this.pickerList.forEach(function (item, index) {\n        if (pickerIndex === index) {\n          return;\n        } else {\n          if (date[0] >= item[0] && date[0] <= item[1] || date[1] >= item[0] && date[1] <= item[1]) {\n            _this5.msg.error({\n              content: '排课周期时间不能有交叉重叠！'\n            });\n\n            pickerFlag = true;\n            return false;\n          }\n        }\n      });\n\n      if (!pickerFlag) {\n        if (this.cycle_type === 1 && this.scheduleList[pickerIndex].course_time.length > 0) {\n          this.$confirm({\n            title: '提示',\n            content: \"\\u4FEE\\u6539\\u540E\\u4F1A\\u6E05\\u7A7A\\u5F53\\u524D\\u5468\\u671F\\u4E0B\\u7684\\u5DF2\\u6709\".concat(this.$c('small_course'), \"\\u6392\\u671F\\uFF0C\\u8BF7\\u786E\\u8BA4\\u4FEE\\u6539\"),\n            onCancel: function onCancel() {\n              var oldDate = _this5.pickerList[pickerIndex];\n\n              _this5.pickerList.splice(pickerIndex, 1, oldDate);\n            },\n            onOk: function onOk() {\n              _this5.onDeleteCourseScheduleCycle([date[0], date[1]], pickerIndex);\n            }\n          });\n        } else {\n          this.picker_end_date = date[1].format('YYYY-MM-DD');\n          this.pickerList.splice(pickerIndex, 1, date);\n        }\n      }\n    },\n    disabledEndDate: function disabledEndDate(current) {\n      return current && current > moment(this.end_date) || current < moment(this.start_date);\n    },\n    getScheduleTips: function getScheduleTips(index, text, courseNum) {\n      this.tipsText[index] = text;\n      this.tipsCourseNum[index] = courseNum;\n    },\n    filterDateList: function filterDateList(dateList) {\n      var _this6 = this;\n\n      var list = [];\n      dateList.forEach(function (item, dateIndex) {\n        var listItemCard = {};\n        var courseNum = 0;\n        var text = '';\n        item.course_time.forEach(function (weekItem, index) {\n          if (weekItem.week || weekItem.week == 0) {\n            if (weekItem.week == 0) {\n              text += _this6.weekList[_this6.weekList.length - 1].date;\n            } else {\n              text += _this6.weekList[weekItem.week - 1].date;\n            }\n\n            weekItem.list.forEach(function (courseItem, index) {\n              courseItem.show = false;\n\n              if (!courseItem.conflict) {\n                courseItem.conflict = 0;\n                courseItem.conflictList = [];\n                text += courseItem.start_time + ',';\n                courseNum += courseItem.schedule_ids.split(',').length;\n              }\n            });\n            listItemCard[weekItem.week] = weekItem.list;\n            listItemCard[weekItem.week][0].show = false;\n          }\n        });\n\n        _this6.getScheduleTips(dateIndex, text, courseNum);\n\n        for (var i = 0; i <= 6; i++) {\n          if (!listItemCard[i]) {\n            listItemCard[i] = [];\n            var _item = {};\n            _item.show = false;\n            listItemCard[i].push(_item);\n          }\n        }\n\n        list.push(listItemCard);\n      });\n      this.filterDate = list;\n    },\n    dealCourtSiteName: function dealCourtSiteName(courtName, CourtSiteName) {\n      return CourtSiteName ? courtName + ' / ' + CourtSiteName : courtName;\n    },\n    createCourseWeek: function createCourseWeek(courseItem, cycleIndex) {\n      var courseWeek = {};\n      courseWeek.week = courseItem.week;\n      courseWeek.list = [];\n      courseWeek.list.push(courseItem);\n      this.scheduleList[cycleIndex].course_time.push(courseWeek);\n      this.filterDateList(this.scheduleList);\n    },\n    pushCourseInfo: function pushCourseInfo(cycleIndex, conflict, info, list) {\n      var _this7 = this;\n\n      var courseItem = cloneDeep(info);\n      courseItem.court_site_id = info.court_site_id || 0;\n      courseItem.conflict = conflict;\n      courseItem.conflictList = list;\n\n      if (!this.scheduleList[cycleIndex].course_time.length) {\n        this.createCourseWeek(courseItem, cycleIndex);\n        return;\n      }\n\n      var findWeekFlag = false;\n      this.scheduleList[cycleIndex].course_time.forEach(function (item, index) {\n        if (item.week == courseItem.week) {\n          findWeekFlag = true;\n          item.list.push(courseItem);\n\n          _this7.filterDateList(_this7.scheduleList);\n        }\n      });\n\n      if (!findWeekFlag) {\n        this.createCourseWeek(courseItem, cycleIndex);\n      }\n    },\n    pushCustomCourseInfo: function pushCustomCourseInfo(info) {\n      var courseInfo = cloneDeep(info);\n      this.customizeScheduleList.push(courseInfo);\n    },\n    onEditCourseSchedule: function onEditCourseSchedule(item, cycleIndex, positionIndex) {\n      var _this8 = this;\n\n      var cycle = this.pickerList[cycleIndex];\n      var cycle_type = this.cycle_type;\n      var courseInfo = this.smallCourseInfo;\n      this.$modalRouter.push({\n        name: 'schedule-small-course-edit-course',\n        props: {\n          item: item,\n          cycleIndex: cycleIndex,\n          cycle: cycle,\n          positionIndex: positionIndex,\n          cycle_type: cycle_type,\n          courseInfo: courseInfo\n        },\n        on: {\n          editCourse: function editCourse(cycleIndex, positionIndex, conflict, info, list) {\n            info.conflictList = list;\n            info.conflict = conflict;\n\n            _this8.scheduleList[cycleIndex].course_time.forEach(function (dayItems, index) {\n              if (dayItems.week == info.week) {\n                dayItems.list.splice(positionIndex, 1, info);\n\n                _this8.filterDateList(_this8.scheduleList);\n\n                return;\n              }\n            });\n          }\n        }\n      });\n    },\n    onEditCustomSchedule: function onEditCustomSchedule(item, positionIndex) {\n      var _this9 = this;\n\n      var cycle = this.pickerList[0];\n      var cycle_type = this.cycle_type;\n      var courseInfo = this.smallCourseInfo;\n      this.$modalRouter.push({\n        name: 'schedule-small-course-edit-course',\n        props: {\n          item: item,\n          cycle: cycle,\n          positionIndex: positionIndex,\n          cycle_type: cycle_type,\n          courseInfo: courseInfo\n        },\n        on: {\n          editCustomCourse: function editCustomCourse(positionIndex, info) {\n            _this9.customizeScheduleList.splice(positionIndex, 1, info);\n\n            return;\n          }\n        }\n      });\n    },\n    onDeleteCourseSchedule: function onDeleteCourseSchedule(item, cycleIndex, positionIndex) {\n      var _this10 = this;\n\n      var params = {};\n      params = item;\n      params.del_type = DELETE_TYPE.SINGLE;\n      this.smallCourseScheduleService.cancelCycle(params).subscribe(function (res) {\n        _this10.scheduleList[cycleIndex].course_time.forEach(function (dayItems, index) {\n          if (dayItems.week == item.week) {\n            dayItems.list.splice(positionIndex, 1);\n\n            if (dayItems.list.length === 0) {\n              _this10.scheduleList[cycleIndex].course_time.splice(index, 1);\n            }\n\n            _this10.filterDateList(_this10.scheduleList);\n\n            return;\n          }\n        });\n      });\n    },\n    onDeleteCourseScheduleCycle: function onDeleteCourseScheduleCycle(dateList, cycleIndex) {\n      var _this11 = this;\n\n      var params = {};\n      var cycleDate = this.pickerList[cycleIndex];\n      params.cycle_start_date = moment(cycleDate[0]).format('YYYY-MM-DD');\n      params.cycle_end_date = moment(cycleDate[1]).format('YYYY-MM-DD');\n      params.course_id = this.smallCourseInfo.course_id;\n      params.del_type = DELETE_TYPE.CYCLE;\n      this.smallCourseScheduleService.cancelCycle(params).subscribe(function (res) {\n        _this11.scheduleList[cycleIndex].course_time = [];\n\n        _this11.pickerList.splice(cycleIndex, 1, dateList);\n\n        _this11.picker_end_date = _this11.pickerList[_this11.pickerList.length - 1][1].format('YYYY-MM-DD');\n\n        _this11.filterDateList(_this11.scheduleList);\n\n        _this11.resetCourseNumTips('single', cycleIndex);\n      });\n    },\n    onDealDeleteResult: function onDealDeleteResult(cycleIndex) {\n      this.scheduleList.splice(cycleIndex, 1);\n      this.pickerList.splice(cycleIndex, 1);\n      this.picker_end_date = this.pickerList[this.pickerList.length - 1][1].format('YYYY-MM-DD');\n    },\n    onDeleteCycleSchedule: function onDeleteCycleSchedule(cycleIndex) {\n      var _this12 = this;\n\n      if (this.scheduleList.length <= 1) {\n        return;\n      }\n\n      if (this.scheduleList[cycleIndex].course_time.length <= 0) {\n        this.onDealDeleteResult(cycleIndex);\n        return;\n      } else {\n        this.$confirm({\n          title: '提示',\n          content: \"\\u4FEE\\u6539\\u540E\\u4F1A\\u6E05\\u7A7A\\u5F53\\u524D\\u5468\\u671F\\u4E0B\\u7684\\u5DF2\\u6709\".concat(this.$c('coach'), \"\\u6392\\u671F\\uFF0C\\u8BF7\\u786E\\u8BA4\\u4FEE\\u6539\"),\n          onCancel: function onCancel() {},\n          onOk: function onOk() {\n            var params = {};\n            var cycleDate = _this12.pickerList[cycleIndex];\n            params.cycle_start_date = moment(cycleDate[0]).format('YYYY-MM-DD');\n            params.cycle_end_date = moment(cycleDate[1]).format('YYYY-MM-DD');\n            params.course_id = _this12.smallCourseInfo.course_id;\n            params.del_type = DELETE_TYPE.CYCLE;\n\n            _this12.smallCourseScheduleService.cancelCycle(params).subscribe(function (res) {\n              _this12.onDealDeleteResult(cycleIndex);\n            });\n\n            _this12.resetCourseNumTips('single', cycleIndex);\n          }\n        });\n      }\n    },\n    onDeleteCustomSchedule: function onDeleteCustomSchedule(item, index) {\n      var _this13 = this;\n\n      this.smallCourseScheduleService.cancelCustom(item.id).subscribe(function (res) {\n        _this13.customizeScheduleList.splice(index, 1);\n      });\n    },\n    onDeleteScheduleAll: function onDeleteScheduleAll() {\n      var _this14 = this;\n\n      var hasCoursesFlag = false;\n\n      if (this.cycle_type === 2 && this.customizeScheduleList > 0) {\n        hasCoursesFlag = true;\n      }\n\n      if (this.cycle_type === 1) {\n        this.scheduleList.forEach(function (item, index) {\n          if (item.course_time.length > 0) {\n            hasCoursesFlag = true;\n          }\n        });\n      }\n\n      if (!hasCoursesFlag) {\n        this.onClickGoBack();\n        return;\n      } else {\n        this.$confirm({\n          title: '提示',\n          content: \"\\u53D6\\u6D88\\u540E\\u4F1A\\u6E05\\u7A7A\\u5F53\\u524D\\u8BFE\\u7A0B\\u4E0B\\u6240\\u6709\\u672A\\u53D1\\u5E03\\u7684\\u6392\\u671F\\uFF0C\\u8BF7\\u786E\\u8BA4\\u5DF2\\u5B8C\\u6210\\u6392\\u8BFE\",\n          onCancel: function onCancel() {},\n          onOk: function onOk() {\n            if (_this14.cycle_type === 1) {\n              var params = {};\n              params.course_id = _this14.smallCourseInfo.course_id;\n              params.del_type = DELETE_TYPE.ALL_CYCLE;\n\n              _this14.smallCourseScheduleService.cancelCycle(params).subscribe(function (res) {\n                _this14.resetCourseNumTips('all');\n\n                _this14.onClickGoBack();\n              });\n            } else if (_this14.cycle_type === 2) {\n              var _params = {};\n              _params.course_id = _this14.smallCourseInfo.course_id;\n              _params.schedule_ids = [];\n\n              _this14.customizeScheduleList.forEach(function (item, index) {\n                _params.schedule_ids.push(item.id);\n              });\n\n              _this14.smallCourseScheduleService.cancelCustomAll(_params).subscribe(function (res) {\n                _this14.onClickGoBack();\n              });\n            } else {\n              _this14.onClickGoBack();\n            }\n          }\n        });\n      }\n    },\n    resetCourseNumTips: function resetCourseNumTips(type, index) {\n      if (type === 'all') {\n        this.tipsCourseNum.splice(0, this.tipsCourseNum.length);\n      } else {\n        this.tipsCourseNum.splice(index, 1);\n      }\n    },\n    addScheduleWeek: function addScheduleWeek() {\n      this.pickerList.push([moment(this.picker_end_date).add(1, 'days'), moment(this.end_date)]);\n      this.picker_end_date = this.end_date;\n      var item = {};\n      item.course_time = [];\n      this.scheduleList.push(item);\n      this.filterDateList(this.scheduleList);\n    },\n    onClickSaveSchedule: function onClickSaveSchedule() {\n      if (this.cycle_type === 1 && this.scheduleList[0].course_time.length <= 0 || this.cycle_type === 2 && this.customizeScheduleList <= 0) {\n        this.msg.warning({\n          content: '请先新增排期'\n        });\n        return;\n      }\n\n      var cycle_type = this.cycle_type;\n      var courseInfo = this.smallCourseInfo;\n      var scheduleList;\n\n      if (cycle_type === 1) {\n        scheduleList = this.tipsCourseNum;\n      } else {\n        scheduleList = this.customizeScheduleList;\n      }\n\n      this.$modalRouter.push({\n        name: 'schedule-small-course-submit-course',\n        props: {\n          scheduleList: scheduleList,\n          cycle_type: cycle_type,\n          courseInfo: courseInfo\n        }\n      });\n    },\n    onClickGoBack: function onClickGoBack() {\n      var weekOfday = moment().format('E');\n      var start_date = moment().subtract(weekOfday - 1, 'days').format('YYYY-MM-DD');\n      var end_date = moment().add(7 - weekOfday, 'days').format('YYYY-MM-DD');\n      this.$router.push({\n        path: '/shop/product/course/schedule/small-course/small-course',\n        query: {\n          start_date: start_date,\n          end_date: end_date\n        }\n      });\n    }\n  },\n  components: {\n    AddCourse: AddCourse,\n    CourseCardPopover: CourseCardPopover\n  }\n};",null]}