!function(t,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.DataSet=r():t.DataSet=r()}("undefined"!=typeof self?self:this,function(){return function(t){function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var n={};return r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:e})},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},r.p="",r(r.s=21)}([function(t,r,n){var e=n(4),o=n(18),i=n(9),a=n(28),u=n(14),s=n(13),f=n(19),c=function(t){function r(n){var o;void 0===n&&(n={state:{}});var i=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(o=t.call(this)||this);return e(i,{_onChangeTimer:null,DataSet:r,isDataSet:!0,views:{}},n),o}!function(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r}(r,t);var n=r.prototype;return n._getUniqueViewName=function(){for(var t=a("view_");this.views[t];)t=a("view_");return t},n.createView=function(t,r){void 0===r&&(r={});var n=this;if(o(t)&&(t=n._getUniqueViewName()),i(t)&&(r=t,t=n._getUniqueViewName()),n.views[t])throw new Error("data view exists: "+t);var e=new s(n,r);return n.views[t]=e,e},n.getView=function(t){return this.views[t]},n.setView=function(t,r){this.views[t]=r},n.setState=function(t,r){var n=this;n.state[t]=r,n._onChangeTimer&&(clearTimeout(n._onChangeTimer),n._onChangeTimer=null),n._onChangeTimer=setTimeout(function(){n.emit("statechange",t,r)},16)},r}(u);e(c,{CONSTANTS:f,DataSet:c,DataView:s,View:s,connectors:{},transforms:{},registerConnector:function(t,r){c.connectors[t]=r},getConnector:function(t){return c.connectors[t]||c.connectors.default},registerTransform:function(t,r){c.transforms[t]=r},getTransform:function(t){return c.transforms[t]||c.transforms.default}},f),s.DataSet=c,e(c.prototype,{view:c.prototype.createView}),c.version="0.10.2-alpha2",t.exports=c},function(t,r,n){var e=n(7),o=Array.isArray?Array.isArray:function(t){return e(t,"Array")};t.exports=o},function(t,r,n){var e=n(9),o=n(1);t.exports=function(t,r){if(t)if(o(t))for(var n=0,i=t.length;n<i&&!1!==r(t[n],n);n++);else if(e(t))for(var a in t)if(t.hasOwnProperty(a)&&!1===r(t[a],a))break}},function(t,r,n){var e=n(7);t.exports=function(t){return e(t,"String")}},function(t,r){function n(t,r){for(var n in r)r.hasOwnProperty(n)&&"constructor"!==n&&void 0!==r[n]&&(t[n]=r[n])}t.exports=function(t,r,e,o){return r&&n(t,r),e&&n(t,e),o&&n(t,o),t}},function(t,r,n){var e=n(7);t.exports=function(t){return e(t,"Function")}},function(t,r,n){var e=n(1),o=n(3),i="Invalid fields: it must be an array!";t.exports={getField:function(t,r){var n=t.field,i=t.fields;if(o(n))return n;if(e(n))return console.warn("Invalid field: it must be a string!"),n[0];if(console.warn("Invalid field: it must be a string! will try to get fields instead."),o(i))return i;if(e(i)&&i.length)return i[0];if(r)return r;throw new TypeError("Invalid field: it must be a string!")},getFields:function(t,r){var n=t.field,a=t.fields;if(e(a))return a;if(o(a))return console.warn(i),[a];if(console.warn(i+" will try to get field instead."),o(n))return console.warn(i),[n];if(e(n)&&n.length)return console.warn(i),n;if(r)return r;throw new TypeError(i)}}},function(t,r){var n={}.toString;t.exports=function(t,r){return n.call(t)==="[object "+r+"]"}},function(t,r,n){var e=n(25),o=n(7);t.exports=function(t){if(!e(t)||!o(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var r=t;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r}},function(t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){var r=void 0===t?"undefined":n(t);return null!==t&&"object"===r||"function"===r}},function(t,r,n){var e=n(2),o=n(8),i=Object.prototype.hasOwnProperty;t.exports=function(t,r){if(null===t||!o(t))return{};var n={};return e(r,function(r){i.call(t,r)&&(n[r]=t[r])}),n}},function(t,r,n){var e=n(1),o=n(5),i=n(3),a=n(37),u=n(38);t.exports=function(t,r,n){void 0===n&&(n=[]);var s=t;n&&n.length&&(s=u(t,n));var f;o(r)?f=r:e(r)?f=function(t){return"_"+r.map(function(r){return t[r]}).join("-")}:i(r)&&(f=function(t){return"_"+t[r]});return a(s,f)}},function(t,r,n){!function(t,n){n(r)}(0,function(t){"use strict";function r(t){if(0===t.length)return 0;for(var r,n=t[0],e=0,o=1;o<t.length;o++)r=n+t[o],Math.abs(n)>=Math.abs(t[o])?e+=n-r+t[o]:e+=t[o]-r+n,n=r;return n+e}function n(t){if(0===t.length)throw new Error("mean requires at least one data point");return r(t)/t.length}function e(t,r){var e,o,i=n(t),a=0;if(2===r)for(o=0;o<t.length;o++)a+=(e=t[o]-i)*e;else for(o=0;o<t.length;o++)a+=Math.pow(t[o]-i,r);return a}function o(t){if(0===t.length)throw new Error("variance requires at least one data point");return e(t,2)/t.length}function i(t){if(1===t.length)return 0;var r=o(t);return Math.sqrt(r)}function a(t){if(0===t.length)throw new Error("mode requires at least one data point");if(1===t.length)return t[0];for(var r=t[0],n=NaN,e=0,o=1,i=1;i<t.length+1;i++)t[i]!==r?(e<o&&(e=o,n=r),o=1,r=t[i]):o++;return n}function u(t){return t.slice().sort(function(t,r){return t-r})}function s(t){if(0===t.length)throw new Error("min requires at least one data point");for(var r=t[0],n=1;n<t.length;n++)t[n]<r&&(r=t[n]);return r}function f(t){if(0===t.length)throw new Error("max requires at least one data point");for(var r=t[0],n=1;n<t.length;n++)t[n]>r&&(r=t[n]);return r}function c(t,r){var n=t.length*r;if(0===t.length)throw new Error("quantile requires at least one data point.");if(r<0||1<r)throw new Error("quantiles must be between 0 and 1");return 1===r?t[t.length-1]:0===r?t[0]:n%1!=0?t[Math.ceil(n)-1]:t.length%2==0?(t[n-1]+t[n])/2:t[n]}function l(t,r,n,e){for(n=n||0,e=e||t.length-1;n<e;){if(600<e-n){var o=e-n+1,i=r-n+1,a=Math.log(o),u=.5*Math.exp(2*a/3),s=.5*Math.sqrt(a*u*(o-u)/o);i-o/2<0&&(s*=-1),l(t,r,Math.max(n,Math.floor(r-i*u/o+s)),Math.min(e,Math.floor(r+(o-i)*u/o+s)))}var f=t[r],c=n,p=e;for(h(t,n,r),t[e]>f&&h(t,n,e);c<p;){for(h(t,c,p),c++,p--;t[c]<f;)c++;for(;t[p]>f;)p--}t[n]===f?h(t,n,p):h(t,++p,e),p<=r&&(n=p+1),r<=p&&(e=p-1)}}function h(t,r,n){var e=t[r];t[r]=t[n],t[n]=e}function p(t,r){var n=t.slice();if(Array.isArray(r)){!function(t,r){for(var n=[0],e=0;e<r.length;e++)n.push(m(t.length,r[e]));n.push(t.length-1),n.sort(g);for(var o=[0,n.length-1];o.length;){var i=Math.ceil(o.pop()),a=Math.floor(o.pop());if(!(i-a<=1)){var u=Math.floor((a+i)/2);v(t,n[u],n[a],n[i]),o.push(a,u,u,i)}}}(n,r);for(var e=[],o=0;o<r.length;o++)e[o]=c(n,r[o]);return e}return v(n,m(n.length,r),0,n.length-1),c(n,r)}function v(t,r,n,e){r%1==0?l(t,r,n,e):(l(t,r=Math.floor(r),n,e),l(t,r+1,r+1,e))}function g(t,r){return t-r}function m(t,r){var n=t*r;return 1===r?t-1:0===r?0:n%1!=0?Math.ceil(n)-1:t%2==0?n-.5:n}function d(t,r){if(r<t[0])return 0;if(r>t[t.length-1])return 1;var n=function(t,r){for(var n=0,e=0,o=t.length;e<o;)r<=t[n=e+o>>>1]?o=n:e=-~n;return e}(t,r);if(t[n]!==r)return n/t.length;n++;var e=function(t,r){for(var n=0,e=0,o=t.length;e<o;)r>=t[n=e+o>>>1]?e=-~n:o=n;return e}(t,r);if(e===n)return n/t.length;var o=e-n+1;return o*(e+n)/2/o/t.length}function w(t){var r=p(t,.75),n=p(t,.25);if("number"==typeof r&&"number"==typeof n)return r-n}function y(t){return+p(t,.5)}function b(t){for(var r=y(t),n=[],e=0;e<t.length;e++)n.push(Math.abs(t[e]-r));return y(n)}function M(t,r){r=r||Math.random;for(var n,e,o=t.length;0<o;)e=Math.floor(r()*o--),n=t[o],t[o]=t[e],t[e]=n;return t}function E(t,r){return M(t.slice().slice(),r)}function x(t){for(var r,n=0,e=0;e<t.length;e++)0!==e&&t[e]===r||(r=t[e],n++);return n}function S(t,r){for(var n=[],e=0;e<t;e++){for(var o=[],i=0;i<r;i++)o.push(0);n.push(o)}return n}function _(t,r,n,e){var o;if(0<t){var i=(n[r]-n[t-1])/(r-t+1);o=e[r]-e[t-1]-(r-t+1)*i*i}else o=e[r]-n[r]*n[r]/(r+1);return o<0?0:o}function T(t,r,n,e,o,i,a){if(!(r<t)){var u=Math.floor((t+r)/2);e[n][u]=e[n-1][u-1],o[n][u]=u;var s=n;n<t&&(s=Math.max(s,o[n][t-1]||0)),s=Math.max(s,o[n-1][u]||0);var f,c,l,h=u-1;r<e.length-1&&(h=Math.min(h,o[n][r+1]||0));for(var p=h;s<=p&&!((f=_(p,u,i,a))+e[n-1][s-1]>=e[n][u]);--p)(c=_(s,u,i,a)+e[n-1][s-1])<e[n][u]&&(e[n][u]=c,o[n][u]=s),s++,(l=f+e[n-1][p-1])<e[n][u]&&(e[n][u]=l,o[n][u]=p);T(t,u-1,n,e,o,i,a),T(u+1,r,n,e,o,i,a)}}function q(t,r){if(t.length!==r.length)throw new Error("sampleCovariance requires samples with equal lengths");if(t.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var e=n(t),o=n(r),i=0,a=0;a<t.length;a++)i+=(t[a]-e)*(r[a]-o);return i/(t.length-1)}function O(t){if(t.length<2)throw new Error("sampleVariance requires at least two data points");return e(t,2)/(t.length-1)}function C(t){var r=O(t);return Math.sqrt(r)}function I(t,r,n,e){return(t*r+n*e)/(r+e)}function j(t){if(0===t.length)throw new Error("rootMeanSquare requires at least one data point");for(var r=0,n=0;n<t.length;n++)r+=Math.pow(t[n],2);return Math.sqrt(r/t.length)}function P(){this.totalCount=0,this.data={}}function L(){this.weights=[],this.bias=0}function R(t){if(t<0)throw new Error("factorial requires a non-negative value");if(Math.floor(t)!==t)throw new Error("factorial requires an integer input");for(var r=1,n=2;n<=t;n++)r*=n;return r}function D(t,r,n){var e,o;if(void 0===r)e=z.gaussian;else if("string"==typeof r){if(!z[r])throw new Error('Unknown kernel "'+r+'"');e=z[r]}else e=r;if(void 0===n)o=J.nrd(t);else if("string"==typeof n){if(!J[n])throw new Error('Unknown bandwidth method "'+n+'"');o=J[n](t)}else o=n;return function(r){var n=0,i=0;for(n=0;n<t.length;n++)i+=e((r-t[n])/o);return i/o/t.length}}function A(t){for(var r=t,n=t,e=1;e<15;e++)r+=n*=t*t/(2*e+1);return Math.round(1e4*(.5+r/K*Math.exp(-t*t/2)))/1e4}function k(t){var r=1/(1+.5*Math.abs(t)),n=r*Math.exp(-Math.pow(t,2)-1.26551223+1.00002368*r+.37409196*Math.pow(r,2)+.09678418*Math.pow(r,3)-.18628806*Math.pow(r,4)+.27886807*Math.pow(r,5)-1.13520398*Math.pow(r,6)+1.48851587*Math.pow(r,7)-.82215223*Math.pow(r,8)+.17087277*Math.pow(r,9));return 0<=t?1-n:n-1}function N(t){var r=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),n=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*r)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/r)-(2/(Math.PI*r)+Math.log(1-t*t)/2));return 0<=t?n:-n}function V(t){if("number"==typeof t)return t<0?-1:0===t?0:1;throw new TypeError("not a number")}P.prototype.train=function(t,r){for(var n in this.data[r]||(this.data[r]={}),t){var e=t[n];void 0===this.data[r][n]&&(this.data[r][n]={}),void 0===this.data[r][n][e]&&(this.data[r][n][e]=0),this.data[r][n][e]++}this.totalCount++},P.prototype.score=function(t){var r,n={};for(var e in t){var o=t[e];for(r in this.data)n[r]={},this.data[r][e]?n[r][e+"_"+o]=(this.data[r][e][o]||0)/this.totalCount:n[r][e+"_"+o]=0}var i={};for(r in n)for(var a in i[r]=0,n[r])i[r]+=n[r][a];return i},L.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var r=0,n=0;n<this.weights.length;n++)r+=this.weights[n]*t[n];return 0<(r+=this.bias)?1:0},L.prototype.train=function(t,r){if(0!==r&&1!==r)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var n=this.predict(t);if(n!==r){for(var e=r-n,o=0;o<this.weights.length;o++)this.weights[o]+=e*t[o];this.bias+=e}return this};for(var F=1e-4,B=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],H=Math.log(Math.sqrt(2*Math.PI)),U={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},G=Math.sqrt(2*Math.PI),z={gaussian:function(t){return Math.exp(-.5*t*t)/G}},J={nrd:function(t){var r=C(t),n=w(t);return"number"==typeof n&&(r=Math.min(r,n/1.34)),1.06*r*Math.pow(t.length,-.2)}},K=Math.sqrt(2*Math.PI),$=[],W=0;W<=3.09;W+=.01)$.push(A(W));t.linearRegression=function(t){var r,n,e=t.length;if(1===e)n=t[r=0][1];else{for(var o,i,a,u=0,s=0,f=0,c=0,l=0;l<e;l++)u+=i=(o=t[l])[0],s+=a=o[1],f+=i*i,c+=i*a;n=s/e-(r=(e*c-u*s)/(e*f-u*u))*u/e}return{m:r,b:n}},t.linearRegressionLine=function(t){return function(r){return t.b+t.m*r}},t.standardDeviation=i,t.rSquared=function(t,r){if(t.length<2)return 1;for(var n,e=0,o=0;o<t.length;o++)e+=t[o][1];n=e/t.length;for(var i=0,a=0;a<t.length;a++)i+=Math.pow(n-t[a][1],2);for(var u=0,s=0;s<t.length;s++)u+=Math.pow(t[s][1]-r(t[s][0]),2);return 1-u/i},t.mode=function(t){return a(u(t))},t.modeFast=function(t){for(var r,n=new Map,e=0,o=0;o<t.length;o++){var i=n.get(t[o]);void 0===i?i=1:i++,e<i&&(r=t[o],e=i),n.set(t[o],i)}if(0===e)throw new Error("mode requires at last one data point");return r},t.modeSorted=a,t.min=s,t.max=f,t.extent=function(t){if(0===t.length)throw new Error("extent requires at least one data point");for(var r=t[0],n=t[0],e=1;e<t.length;e++)t[e]>n&&(n=t[e]),t[e]<r&&(r=t[e]);return[r,n]},t.minSorted=function(t){return t[0]},t.maxSorted=function(t){return t[t.length-1]},t.extentSorted=function(t){return[t[0],t[t.length-1]]},t.sum=r,t.sumSimple=function(t){for(var r=0,n=0;n<t.length;n++)r+=t[n];return r},t.product=function(t){for(var r=1,n=0;n<t.length;n++)r*=t[n];return r},t.quantile=p,t.quantileSorted=c,t.quantileRank=function(t,r){return d(u(t),r)},t.quantileRankSorted=d,t.interquartileRange=w,t.iqr=w,t.medianAbsoluteDeviation=b,t.mad=b,t.chunk=function(t,r){var n=[];if(r<1)throw new Error("chunk size must be a positive number");if(Math.floor(r)!==r)throw new Error("chunk size must be an integer");for(var e=0;e<t.length;e+=r)n.push(t.slice(e,e+r));return n},t.sampleWithReplacement=function(t,r,n){if(0===t.length)return[];n=n||Math.random;for(var e=t.length,o=[],i=0;i<r;i++){var a=Math.floor(n()*e);o.push(t[a])}return o},t.shuffle=E,t.shuffleInPlace=M,t.sample=function(t,r,n){return E(t,n).slice(0,r)},t.ckmeans=function(t,r){if(r>t.length)throw new Error("cannot generate more classes than there are data values");var n=u(t);if(1===x(n))return[n];var e=S(r,n.length),o=S(r,n.length);!function(t,r,n){for(var e,o=r[0].length,i=t[Math.floor(o/2)],a=[],u=[],s=0;s<o;++s)e=t[s]-i,0===s?(a.push(e),u.push(e*e)):(a.push(a[s-1]+e),u.push(u[s-1]+e*e)),r[0][s]=_(0,s,a,u),n[0][s]=0;for(var f=1;f<r.length;++f)T(f<r.length-1?f:o-1,o-1,f,r,n,a,u)}(n,e,o);for(var i=[],a=o[0].length-1,s=o.length-1;0<=s;s--){var f=o[s][a];i[s]=n.slice(f,a+1),0<s&&(a=f-1)}return i},t.uniqueCountSorted=x,t.sumNthPowerDeviations=e,t.equalIntervalBreaks=function(t,r){if(t.length<2)return t;for(var n=s(t),e=f(t),o=[n],i=(e-n)/r,a=1;a<r;a++)o.push(o[0]+i*a);return o.push(e),o},t.sampleCovariance=q,t.sampleCorrelation=function(t,r){return q(t,r)/C(t)/C(r)},t.sampleVariance=O,t.sampleStandardDeviation=C,t.sampleSkewness=function(t){if(t.length<3)throw new Error("sampleSkewness requires at least three data points");for(var r,e=n(t),o=0,i=0,a=0;a<t.length;a++)o+=(r=t[a]-e)*r,i+=r*r*r;var u=t.length-1,s=Math.sqrt(o/u),f=t.length;return f*i/((f-1)*(f-2)*Math.pow(s,3))},t.sampleKurtosis=function(t){var r=t.length;if(r<4)throw new Error("sampleKurtosis requires at least four data points");for(var e,o=n(t),i=0,a=0,u=0;u<r;u++)i+=(e=t[u]-o)*e,a+=e*e*e*e;return(r-1)/((r-2)*(r-3))*(r*(r+1)*a/(i*i)-3*(r-1))},t.permutationsHeap=function(t){for(var r=new Array(t.length),n=[t.slice()],e=0;e<t.length;e++)r[e]=0;for(e=0;e<t.length;)if(r[e]<e){var o=0;e%2!=0&&(o=r[e]);var i=t[o];t[o]=t[e],t[e]=i,n.push(t.slice()),r[e]++,e=0}else r[e]=0,e++;return n},t.combinations=function t(r,n){var e,o,i,a,u=[];for(e=0;e<r.length;e++)if(1===n)u.push([r[e]]);else for(i=t(r.slice(e+1,r.length),n-1),o=0;o<i.length;o++)(a=i[o]).unshift(r[e]),u.push(a);return u},t.combinationsReplacement=function t(r,n){for(var e=[],o=0;o<r.length;o++)if(1===n)e.push([r[o]]);else for(var i=t(r.slice(o,r.length),n-1),a=0;a<i.length;a++)e.push([r[o]].concat(i[a]));return e},t.addToMean=function(t,r,n){return t+(n-t)/(r+1)},t.combineMeans=I,t.combineVariances=function(t,r,n,e,o,i){var a=I(r,n,o,i);return(n*(t+Math.pow(r-a,2))+i*(e+Math.pow(o-a,2)))/(n+i)},t.geometricMean=function(t){if(0===t.length)throw new Error("geometricMean requires at least one data point");for(var r=1,n=0;n<t.length;n++){if(t[n]<=0)throw new Error("geometricMean requires only positive numbers as input");r*=t[n]}return Math.pow(r,1/t.length)},t.harmonicMean=function(t){if(0===t.length)throw new Error("harmonicMean requires at least one data point");for(var r=0,n=0;n<t.length;n++){if(t[n]<=0)throw new Error("harmonicMean requires only positive numbers as input");r+=1/t[n]}return t.length/r},t.average=n,t.mean=n,t.median=y,t.medianSorted=function(t){return c(t,.5)},t.subtractFromMean=function(t,r,n){return(t*r-n)/(r-1)},t.rootMeanSquare=j,t.rms=j,t.variance=o,t.tTest=function(t,r){return(n(t)-r)/(i(t)/Math.sqrt(t.length))},t.tTestTwoSample=function(t,r,e){var o=t.length,i=r.length;if(!o||!i)return null;e||(e=0);var a=n(t),u=n(r),s=O(t),f=O(r);if("number"==typeof a&&"number"==typeof u&&"number"==typeof s&&"number"==typeof f){var c=((o-1)*s+(i-1)*f)/(o+i-2);return(a-u-e)/Math.sqrt(c*(1/o+1/i))}},t.BayesianClassifier=P,t.bayesian=P,t.PerceptronModel=L,t.perceptron=L,t.epsilon=F,t.factorial=R,t.gamma=function t(r){if("number"==typeof(n=r)&&isFinite(n)&&Math.floor(n)===n)return r<=0?NaN:R(r-1);var n;if(--r<0)return Math.PI/(Math.sin(Math.PI*-r)*t(-r));var e=r+.25;return Math.pow(r/Math.E,r)*Math.sqrt(2*Math.PI*(r+1/6))*(1+1/144/Math.pow(e,2)-1/12960/Math.pow(e,3)-257/207360/Math.pow(e,4)-52/2612736/Math.pow(e,5)+5741173/9405849600/Math.pow(e,6)+37529/18811699200/Math.pow(e,7))},t.gammaln=function(t){if(t<=0)return 1/0;t--;for(var r=B[0],n=1;n<15;n++)r+=B[n]/(t+n);var e=5.2421875+t;return H+Math.log(r)-e+(t+.5)*Math.log(e)},t.bernoulliDistribution=function(t){if(t<0||1<t)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-t,t]},t.binomialDistribution=function(t,r){if(!(r<0||1<r||t<=0||t%1!=0)){for(var n=0,e=0,o=[],i=1;o[n]=i*Math.pow(r,n)*Math.pow(1-r,t-n),e+=o[n],i=i*(t-++n+1)/n,e<1-F;);return o}},t.poissonDistribution=function(t){if(!(t<=0)){for(var r=0,n=0,e=[],o=1;e[r]=Math.exp(-t)*Math.pow(t,r)/o,n+=e[r],o*=++r,n<1-F;);return e}},t.chiSquaredDistributionTable=U,t.chiSquaredGoodnessOfFit=function(t,r,e){for(var o,i,a=0,u=r(n(t)),s=[],f=[],c=0;c<t.length;c++)void 0===s[t[c]]&&(s[t[c]]=0),s[t[c]]++;for(c=0;c<s.length;c++)void 0===s[c]&&(s[c]=0);for(i in u)i in s&&(f[+i]=u[i]*t.length);for(i=f.length-1;0<=i;i--)f[i]<3&&(f[i-1]+=f[i],f.pop(),s[i-1]+=s[i],s.pop());for(i=0;i<s.length;i++)a+=Math.pow(s[i]-f[i],2)/f[i];return o=s.length-1-1,U[o][e]<a},t.kernelDensityEstimation=D,t.kde=D,t.zScore=function(t,r,n){return(t-r)/n},t.cumulativeStdNormalProbability=function(t){var r=Math.abs(t),n=Math.min(Math.round(100*r),$.length-1);return 0<=t?$[n]:+(1-$[n]).toFixed(4)},t.standardNormalTable=$,t.errorFunction=k,t.erf=k,t.inverseErrorFunction=N,t.probit=function(t){return 0===t?t=F:1<=t&&(t=1-F),Math.sqrt(2)*N(2*t-1)},t.permutationTest=function(t,r,e,o){if(void 0===o&&(o=1e4),void 0===e&&(e="two_side"),"two_side"!==e&&"greater"!==e&&"less"!==e)throw new Error("`alternative` must be either 'two_side', 'greater', or 'less'");for(var i=n(t)-n(r),a=new Array(o),u=t.concat(r),s=Math.floor(u.length/2),f=0;f<o;f++){M(u);var c=u.slice(0,s),l=u.slice(s,u.length),h=n(c)-n(l);a[f]=h}var p=0;if("two_side"===e)for(f=0;f<=o;f++)Math.abs(a[f])>=Math.abs(i)&&(p+=1);else if("greater"===e)for(f=0;f<=o;f++)a[f]>=i&&(p+=1);else for(f=0;f<=o;f++)a[f]<=i&&(p+=1);return p/o},t.bisect=function(t,r,n,e,o){if("function"!=typeof t)throw new TypeError("func must be a function");for(var i=0;i<e;i++){var a=(r+n)/2;if(0===t(a)||Math.abs((n-r)/2)<o)return a;V(t(a))===V(t(r))?r=a:n=a}throw new Error("maximum number of iterations exceeded")},t.quickselect=l,t.sign=V,t.numericSort=u,Object.defineProperty(t,"__esModule",{value:!0})})},function(t,r,n){var e=n(14),o=n(4),i=n(15),a=n(15),u=n(24),s=n(2),f=n(1),c=n(8),l=n(16),h=n(9),p=n(3),v=n(17),g=n(10),m=function(t){function r(r,n){var e,i=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e=t.call(this)||this);if(n=n||{},(r=r||{}).isDataSet||(n=r,r=null),o(i,{dataSet:r,loose:!r,dataType:"table",isView:!0,isDataView:!0,origin:[],rows:[],transforms:[],watchingStates:null},n),!i.loose){var a=i.watchingStates;r.on("statechange",function(t){f(a)?a.indexOf(t)>-1&&i._reExecute():i._reExecute()})}return e}!function(t,r){t.prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r}(r,t);var n=r.prototype;return n._parseStateExpression=function(t){var r=this.dataSet,n=/^\$state\.(\w+)/.exec(t);return n?r.state[n[1]]:t},n._preparseOptions=function(t){var r=this,n=function(t){var r={};return s(t,function(t,n){h(t)&&t.isView?r[n]=t:f(t)?r[n]=t.concat([]):c(t)?r[n]=i(t):r[n]=t}),r}(t);return r.loose?n:(s(n,function(t,e){p(t)&&/^\$state\./.test(t)&&(n[e]=r._parseStateExpression(t))}),n)},n._prepareSource=function(t,n){var e=this,o=r.DataSet;if(e._source={source:t,options:n},n)n=e._preparseOptions(n),e.origin=o.getConnector(n.type)(t,n,e);else if(t instanceof r||p(t))e.origin=o.getConnector("default")(t,e.dataSet);else if(f(t))e.origin=t;else{if(!h(t)||!t.type)throw new TypeError("Invalid source");n=e._preparseOptions(t),e.origin=o.getConnector(n.type)(n,e)}return e.rows=a(e.origin),e},n.source=function(t,r){return this._prepareSource(t,r),this._reExecuteTransforms(),this.trigger("change"),this},n.transform=function(t){void 0===t&&(t={});return this.transforms.push(t),this._executeTransform(t),this},n._executeTransform=function(t){t=this._preparseOptions(t);r.DataSet.getTransform(t.type)(this,t)},n._reExecuteTransforms=function(){var t=this;t.transforms.forEach(function(r){t._executeTransform(r)})},n.addRow=function(t){this.rows.push(t)},n.removeRow=function(t){this.rows.splice(t,1)},n.updateRow=function(t,r){o(this.rows[t],r)},n.findRows=function(t){return this.rows.filter(function(r){return l(r,t)})},n.findRow=function(t){return u(this.rows,t)},n.getColumnNames=function(){var t=this.rows[0];return t?v(t):[]},n.getColumnName=function(t){return this.getColumnNames()[t]},n.getColumnIndex=function(t){return this.getColumnNames().indexOf(t)},n.getColumn=function(t){return this.rows.map(function(r){return r[t]})},n.getColumnData=function(t){return this.getColumn(t)},n.getSubset=function(t,r,n){for(var e=[],o=t;o<=r;o++)e.push(g(this.rows[o],n));return e},n.toString=function(t){return t?JSON.stringify(this.rows,null,2):JSON.stringify(this.rows)},n._reExecute=function(){var t=this._source,r=t.source,n=t.options;this._prepareSource(r,n),this._reExecuteTransforms(),this.trigger("change")},r}(e);t.exports=m},function(t,r,n){var e;!function(r){"use strict";function o(){}function i(t,r){for(var n=t.length;n--;)if(t[n].listener===r)return n;return-1}function a(t){return function(){return this[t].apply(this,arguments)}}function u(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&u(t.listener)}var s=o.prototype,f=r.EventEmitter;s.getListeners=function(t){var r,n,e=this._getEvents();if(t instanceof RegExp){r={};for(n in e)e.hasOwnProperty(n)&&t.test(n)&&(r[n]=e[n])}else r=e[t]||(e[t]=[]);return r},s.flattenListeners=function(t){var r,n=[];for(r=0;r<t.length;r+=1)n.push(t[r].listener);return n},s.getListenersAsObject=function(t){var r,n=this.getListeners(t);return n instanceof Array&&((r={})[t]=n),r||n},s.addListener=function(t,r){if(!u(r))throw new TypeError("listener must be a function");var n,e=this.getListenersAsObject(t),o="object"==typeof r;for(n in e)e.hasOwnProperty(n)&&-1===i(e[n],r)&&e[n].push(o?r:{listener:r,once:!1});return this},s.on=a("addListener"),s.addOnceListener=function(t,r){return this.addListener(t,{listener:r,once:!0})},s.once=a("addOnceListener"),s.defineEvent=function(t){return this.getListeners(t),this},s.defineEvents=function(t){for(var r=0;r<t.length;r+=1)this.defineEvent(t[r]);return this},s.removeListener=function(t,r){var n,e,o=this.getListenersAsObject(t);for(e in o)o.hasOwnProperty(e)&&-1!==(n=i(o[e],r))&&o[e].splice(n,1);return this},s.off=a("removeListener"),s.addListeners=function(t,r){return this.manipulateListeners(!1,t,r)},s.removeListeners=function(t,r){return this.manipulateListeners(!0,t,r)},s.manipulateListeners=function(t,r,n){var e,o,i=t?this.removeListener:this.addListener,a=t?this.removeListeners:this.addListeners;if("object"!=typeof r||r instanceof RegExp)for(e=n.length;e--;)i.call(this,r,n[e]);else for(e in r)r.hasOwnProperty(e)&&(o=r[e])&&("function"==typeof o?i.call(this,e,o):a.call(this,e,o));return this},s.removeEvent=function(t){var r,n=typeof t,e=this._getEvents();if("string"===n)delete e[t];else if(t instanceof RegExp)for(r in e)e.hasOwnProperty(r)&&t.test(r)&&delete e[r];else delete this._events;return this},s.removeAllListeners=a("removeEvent"),s.emitEvent=function(t,r){var n,e,o,i,a=this.getListenersAsObject(t);for(i in a)if(a.hasOwnProperty(i))for(n=a[i].slice(0),o=0;o<n.length;o++)!0===(e=n[o]).once&&this.removeListener(t,e.listener),e.listener.apply(this,r||[])===this._getOnceReturnValue()&&this.removeListener(t,e.listener);return this},s.trigger=a("emitEvent"),s.emit=function(t){var r=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,r)},s.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},s._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},s._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return r.EventEmitter=f,o},void 0!==(e=function(){return o}.call(r,n,r,t))&&(t.exports=e)}(this||{})},function(t,r,n){var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(1);t.exports=function t(r){if("object"!==(void 0===r?"undefined":e(r))||null===r)return r;var n=void 0;if(o(r)){n=[];for(var i=0,a=r.length;i<a;i++)"object"===e(r[i])&&null!=r[i]?n[i]=t(r[i]):n[i]=r[i]}else{n={};for(var u in r)"object"===e(r[u])&&null!=r[u]?n[u]=t(r[u]):n[u]=r[u]}return n}},function(t,r,n){var e=n(17),o=n(18);t.exports=function(t,r){var n=e(r),i=n.length;if(o(t))return!i;for(var a=0;a<i;a+=1){var u=n[a];if(r[u]!==t[u]||!(u in t))return!1}return!0}},function(t,r,n){var e=n(2),o=n(5),i=Object.keys?function(t){return Object.keys(t)}:function(t){var r=[];return e(t,function(n,e){o(t)&&"prototype"===e||r.push(e)}),r};t.exports=i},function(t,r){t.exports=function(t){return null===t||void 0===t}},function(t,r){t.exports={HIERARCHY:"hierarchy",GEO:"geo",HEX:"hex",GRAPH:"graph",TABLE:"table",GEO_GRATICULE:"geo-graticule",STATISTICS_METHODS:["max","mean","median","min","mode","product","standardDeviation","sum","sumSimple","variance"]}},function(t,r){t.exports=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)}},function(t,r,n){n(22),n(27),n(29),n(30),n(34),n(35),n(39),n(40),n(41),n(42),n(43),n(44),n(45),n(47),t.exports=n(0)},function(t,r,n){function e(t,r){var n=t.getColumn(r);return a(n)&&a(n[0])&&(n=i(n)),n}var o=n(4),i=n(23),a=n(1),u=n(12),s=n(13),f=n(26);n(19).STATISTICS_METHODS.forEach(function(t){s.prototype[t]=function(r){return u[t](e(this,r))}});var c=u.quantile;o(s.prototype,{average:s.prototype.mean,quantile:function(t,r){return c(e(this,t),r)},quantiles:function(t,r){var n=e(this,t);return r.map(function(t){return c(n,t)})},quantilesByFraction:function(t,r){return this.quantiles(t,f(r))},range:function(t){return[this.min(t),this.max(t)]},extent:function(t){return this.range(t)}})},function(t,r,n){var e=n(1);t.exports=function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e(r))for(var o=0;o<r.length;o+=1)t(r[o],n);else n.push(r);return n}},function(t,r,n){var e=n(5),o=n(8),i=n(16);t.exports=function(t,r){var n=void 0;if(e(r)&&(n=r),o(r)&&(n=function(t){return i(t,r)}),n)for(var a=0;a<t.length;a+=1)if(n(t[a]))return t[a];return null}},function(t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){return"object"===(void 0===t?"undefined":n(t))&&null!==t}},function(t,r){t.exports=function(t){for(var r=1/t,n=[],e=0;e<=1;e+=r)n.push(e);return n}},function(t,r,n){(0,n(0).registerTransform)("default",function(t){return t})},function(t,r){var n=function(){var t={};return function(r){return r=r||"g",t[r]?t[r]+=1:t[r]=1,r+t[r]}}();t.exports=n},function(t,r,n){(0,n(0).registerTransform)("filter",function(t,r){void 0===r&&(r={}),t.rows=t.rows.filter(r.callback||function(t){return!!t})})},function(t,r,n){var e=n(4),o=n(31),i=n(10),a=n(0).registerTransform,u=n(6).getFields,s={fields:[],key:"key",retains:[],value:"value"};a("fold",function(t,r){var n=t.getColumnNames();r=e({},s,r);var a=u(r);0===a.length&&(console.warn("warning: option fields is not specified, will fold all columns."),a=n);var f=r.key,c=r.value,l=r.retains;0===l.length&&(l=o(n,a));var h=[];t.rows.forEach(function(t){a.forEach(function(r){var n=i(t,l);n[f]=r,n[c]=t[r],h.push(n)})}),t.rows=h})},function(t,r,n){var e=n(32),o=n(33);t.exports=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e(t,function(t){return!o(r,t)})}},function(t,r,n){var e=n(2),o=n(20);t.exports=function(t,r){if(!o(t))return t;var n=[];return e(t,function(t,e){r(t,e)&&n.push(t)}),n}},function(t,r,n){var e=n(20),o=Array.prototype.indexOf;t.exports=function(t,r){return!!e(t)&&o.call(t,r)>-1}},function(t,r,n){(0,n(0).registerTransform)("map",function(t,r){void 0===r&&(r={}),t.rows=t.rows.map(r.callback||function(t){return t})})},function(t,r,n){function e(t,r){void 0===r&&(r={}),r=o({},s,r),t.rows=i(a(t.rows,r.groupBy,r.orderBy))}var o=n(4),i=n(36),a=n(11),u=n(0).registerTransform,s={groupBy:[],orderBy:[]};u("partition",function(t,r){void 0===r&&(r={}),r=o({},s,r),t.rows=a(t.rows,r.groupBy,r.orderBy)}),u("group",e),u("groups",e)},function(t,r,n){var e=n(2),o=n(5),i=Object.values?function(t){return Object.values(t)}:function(t){var r=[];return e(t,function(n,e){o(t)&&"prototype"===e||r.push(n)}),r};t.exports=i},function(t,r,n){var e=n(2),o=n(1),i=Object.prototype.hasOwnProperty;t.exports=function(t,r){if(!r||!o(t))return t;var n={},a=null;return e(t,function(t){a=r(t),i.call(n,a)?n[a].push(t):n[a]=[t]}),n}},function(t,r,n){var e=n(1),o=n(5),i=n(3);t.exports=function(t,r){void 0===r&&(r=[]);var n;return o(r)?n=r:e(r)?n=function(t,n){for(var e=0;e<r.length;e++){var o=r[e];if(t[o]<n[o])return-1;if(t[o]>n[o])return 1}return 0}:i(r)&&(n=function(t,n){return t[r]<n[r]?-1:t[r]>n[r]?1:0}),t.sort(n)}},function(t,r,n){var e=n(4),o=n(2),i=n(1),a=n(3),u=n(12).sum,s=n(11),f=n(0).registerTransform,c=n(6).getField,l={groupBy:[],as:"_percent"};f("percent",function(t,r){void 0===r&&(r={}),r=e({},l,r);var n=c(r),f=r.dimension,h=r.groupBy,p=r.as;if(!a(f))throw new TypeError("Invalid dimension: must be a string!");if(i(p)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),p=p[0]),!a(p))throw new TypeError("Invalid as: must be a string!");var v=t.rows,g=[],m=s(v,h);o(m,function(t){var r=u(t.map(function(t){return t[n]}));0===r&&console.warn("Invalid data: total sum of field "+n+" is 0!");var e=s(t,[f]);o(e,function(t){var e=u(t.map(function(t){return t[n]})),o=t[0],i=o[f];o[n]=e,o[f]=i,o[p]=0===r?0:e/r,g.push(o)})}),t.rows=g})},function(t,r,n){var e=n(10),o=n(0).registerTransform,i=n(6).getFields;o("pick",function(t,r){void 0===r&&(r={});var n=i(r,t.getColumnNames());t.rows=t.rows.map(function(t){return e(t,n)})})},function(t,r,n){var e=n(4),o=n(2),i=n(1),a=n(3),u=n(11),s=n(0).registerTransform,f=n(6).getField,c={groupBy:[],as:"_proportion"};s("proportion",function(t,r){void 0===r&&(r={}),r=e({},c,r);var n=f(r),s=r.dimension,l=r.groupBy,h=r.as;if(!a(s))throw new TypeError("Invalid dimension: must be a string!");if(i(h)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),h=h[0]),!a(h))throw new TypeError("Invalid as: must be a string!");var p=t.rows,v=[],g=u(p,l);o(g,function(t){var r=t.length,e=u(t,[s]);o(e,function(t){var e=t.length,o=t[0],i=o[s];o[n]=e,o[s]=i,o[h]=e/r,v.push(o)})}),t.rows=v})},function(t,r,n){function e(t,r){void 0===r&&(r={});var n=r.map||{},e={};i(n)&&o(n,function(t,r){a(t)&&a(r)&&(e[r]=t)}),t.rows.forEach(function(t){o(n,function(r,n){var e=t[n];delete t[n],t[r]=e})})}var o=n(2),i=n(8),a=n(3),u=n(0).registerTransform;u("rename",e),u("rename-fields",e)},function(t,r,n){(0,n(0).registerTransform)("reverse",function(t){t.rows.reverse()})},function(t,r,n){(0,n(0).registerTransform)("sort",function(t,r){void 0===r&&(r={});var n=t.getColumnName(0);t.rows.sort(r.callback||function(t,r){return t[n]-r[n]})})},function(t,r,n){function e(t,r){void 0===r&&(r={});var n=u(r,[t.getColumnName(0)]);if(!o(n))throw new TypeError("Invalid fields: must be an array with strings!");t.rows=i(t.rows,n);var e=r.order;if(e&&-1===s.indexOf(e))throw new TypeError("Invalid order: "+e+" must be one of "+s.join(", "));"DESC"===e&&t.rows.reverse()}var o=n(1),i=n(46),a=n(0).registerTransform,u=n(6).getFields,s=["ASC","DESC"];a("sort-by",e),a("sortBy",e)},function(t,r,n){var e=n(3),o=n(5),i=n(1);t.exports=function(t,r){var n=void 0;if(o(r))n=function(t,n){return r(t)-r(n)};else{var a=[];e(r)?a.push(r):i(r)&&(a=r),n=function(t,r){for(var n=0;n<a.length;n+=1){var e=a[n];if(t[e]>r[e])return 1;if(t[e]<r[e])return-1}return 0}}return t.sort(n),t}},function(t,r,n){var e=n(0).registerTransform,o=n(6).getFields;e("subset",function(t,r){void 0===r&&(r={});var n=r.startRowIndex||0,e=r.endRowIndex||t.rows.length-1,i=o(r,t.getColumnNames());t.rows=t.getSubset(n,e,i)})}])});