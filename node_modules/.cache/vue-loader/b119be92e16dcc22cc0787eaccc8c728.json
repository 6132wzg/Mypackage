{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src-entries/account/views/pages/account/find.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src-entries/account/views/pages/account/find.vue","mtime":1591147717008},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { FindService } from './find.service'\nimport FindAccount from './find#/account'\nimport FindAccountStep from './find#/step'\nimport { NoCaptchaService } from '@/services/no-captcha.service'\nimport { throwError } from 'rxjs'\nimport { IS_BIND } from '@/constants/account'\nimport Copyright from '@/views/biz-components/copyright/copyright'\n\nexport default {\n  name: 'Login',\n  bem: {\n    b: 'page-account-find',\n    bFooter: 'footer'\n  },\n  serviceInject() {\n    return {\n      findService: FindService,\n      noCaptchaService: NoCaptchaService\n    }\n  },\n  data() {\n    return {\n      IS_BIND,\n      showStep: false,\n      currentIndex: 0,\n      info: {}\n    }\n  },\n  components: {\n    FindAccount,\n    FindAccountStep,\n    Copyright\n  },\n  rxState() {\n    return {\n      loading: this.findService.loading$\n    }\n  },\n  computed: {\n    isBindAccount() {\n      return this.info.is_bind === this.IS_BIND.BIND && this.currentIndex === 0\n    }\n  },\n  methods: {\n    onNext(params) {\n      const nvc_val = this.noCaptchaService.generateNVCVal()\n      if (!nvc_val) {\n        return\n      }\n      params.nvc_val = nvc_val\n      this.findService.checkAccount(params).subscribe(res => {\n        this.noCaptchaService.resetNVC()\n        this.info = res\n        this.info.account = params.account\n        this.showStep = true\n      }, this.errorHandler)\n    },\n    errorHandler(err) {\n      const code = err.response.code\n      if (this.noCaptchaService.testIsNeedCallCaptcha(code)) {\n        this.noCaptchaService.callCaptcha(code)\n        return\n      }\n      this.noCaptchaService.resetNVC()\n    },\n    onStep(event) {\n      this.currentIndex = event\n    }\n  }\n}\n",null]}