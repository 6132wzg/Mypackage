{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/setting/general/user-level.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/setting/general/user-level.vue","mtime":1591147717348},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { UserLevelService } from './user-level.service'\nimport { MessageService } from '@/services/message.service'\nimport SelectCondition from './components#/select-condition'\nimport SelectRights from './components#/select-rights'\nexport default {\n  bem: {\n    b: 'page-user-level'\n  },\n  serviceInject() {\n    return {\n      userLevelService: UserLevelService,\n      messageService: MessageService\n    }\n  },\n  rxState() {\n    const { userLevelService } = this\n    return {\n      list: userLevelService.list$,\n      info: userLevelService.info$,\n      loading: userLevelService.loading$,\n      auth: userLevelService.auth$\n    }\n  },\n  data() {\n    return {\n      condition: [],\n      rights: []\n    }\n  },\n  filters: {\n    textFilter(text, list, index) {\n      return text + (index < list.length - 1 ? '、' : '')\n    }\n  },\n  components: {\n    SelectCondition,\n    SelectRights\n  },\n  computed: {\n    isEdit() {\n      return this.$searchQuery.type === 'edit'\n    },\n    /**\n     * 潜在会员\n     */\n    potential() {\n      return this.list[0]\n    },\n    /**\n     * 正式会员\n     */\n    member() {\n      return this.list[1]\n    },\n    /**\n     * 流失会员\n     */\n    lost() {\n      return this.list[2]\n    }\n  },\n  methods: {\n    onEdit() {\n      this.$router.push({\n        query: {\n          type: 'edit'\n        }\n      })\n    },\n    onSave() {\n      const params = this.getData()\n      if (!this.inputCheck(params)) {\n        this.messageService.error({\n          content: '请至少选择一个升级到正式会员所需条件'\n        })\n        return\n      }\n      this.userLevelService.update(params).subscribe(() => {\n        this.messageService.success({\n          content: '保存成功'\n        })\n        this.$router.push({\n          query: {}\n        })\n      })\n    },\n    onCancel() {\n      this.$router.push({\n        query: {}\n      })\n    },\n    onConditionChange(val) {\n      this.condition = val\n    },\n    onRightsChange(val) {\n      this.rights = val\n    },\n    getData() {\n      return {\n        condition: this.condition,\n        rights: this.rights\n      }\n    },\n    inputCheck(params) {\n      const { condition } = params\n      if (!condition.length) {\n        return false\n      }\n      return true\n    }\n  }\n}\n",null]}