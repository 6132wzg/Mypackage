{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js!/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/product/package/info.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/product/package/info.vue","mtime":1596188219694},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js","mtime":1591062572352},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import _defineProperty from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { InfoService } from \"./info.service\";\nimport tableMixin from '@/mixins/table.mixin';\nimport { personalFixColumns, personalRangeColumns, teamFixColumns, teamRangeColumns, courseUnLimitColumns, shopColumns } from \"./info.config\";\nimport { columns } from \"../../../common/export.config\";\nimport OnSales from '@/views/biz-modals/package/onSales';\nimport OffSales from '@/views/biz-modals/package/offSales';\nimport ShopList from '@/views/biz-modals/package/shop-list';\nimport Synchronize from '@/views/biz-modals/package/synchronize';\nimport SuccessTip from '@/views/biz-modals/package/success-tip';\nimport { SHOP_RANGE, PRODUCT_CHANNEL } from '@/constants/course/package.ts';\nexport default {\n  name: 'BrandPackageInfo',\n  bem: {\n    b: 'page-brand-package-info'\n  },\n  modals: {\n    OnSales: OnSales,\n    OffSales: OffSales,\n    ShopList: ShopList,\n    Synchronize: Synchronize,\n    SuccessTip: SuccessTip\n  },\n  mixins: [tableMixin],\n  data: function data() {\n    return {\n      FIXATION: 3,\n      UNLIMIT: 1,\n      RANGE: 2,\n      SHOP_RANGE: SHOP_RANGE,\n      PRODUCT_CHANNEL: PRODUCT_CHANNEL\n    };\n  },\n  serviceInject: function serviceInject() {\n    return {\n      service: InfoService\n    };\n  },\n  rxState: function rxState() {\n    var _this$service = this.service,\n        info$ = _this$service.info$,\n        auth$ = _this$service.auth$;\n    return {\n      info$: info$,\n      auth$: auth$\n    };\n  },\n  computed: {\n    btnOptions: function btnOptions() {\n      return [{\n        text: '编辑',\n        click: this.onEdit,\n        if: this.auth$['brand:product:package_course|edit']\n      }, {\n        text: '删除',\n        click: this.deletePackage,\n        if: this.auth$['brand:product:package_course|del']\n      }, {\n        text: '下架',\n        click: this.onDownShelf,\n        if: this.auth$['brand:product:package_course|down']\n      }, {\n        text: '上架',\n        click: this.onUpShelf,\n        if: this.auth$['brand:product:package_course|up']\n      }, {\n        text: '应用至售出',\n        click: this.batchOperate,\n        if: this.auth$['brand:product:package_course|batch_operate']\n      }];\n    },\n    packageTypeConst: function packageTypeConst() {\n      return {\n        RANGE: 2,\n        FIXATION: 3,\n        UNLIMITED: 1\n      };\n    },\n    unlimitRange: function unlimitRange() {\n      return [{\n        course_type: '团课课程',\n        price: this.info$.team_unit_price,\n        count: this.info$.team_times,\n        total: this.info$.team_unit_price * this.info$.team_times\n      }, {\n        course_type: '私教课程',\n        price: this.info$.personal_unit_price,\n        count: this.info$.personal_times,\n        total: this.info$.personal_unit_price * this.info$.personal_times\n      }];\n    },\n    personalFixColumns: personalFixColumns,\n    personalRangeColumns: personalRangeColumns,\n    teamFixColumns: teamFixColumns,\n    teamRangeColumns: teamRangeColumns,\n    shopColumns: shopColumns,\n    courseUnLimitColumns: courseUnLimitColumns,\n    packageType: function packageType() {\n      return +this.$route.query.packageType;\n    },\n    teamColumns: function teamColumns() {\n      if (this.packageType === this.packageTypeConst.RANGE) {\n        return this.teamRangeColumns;\n      }\n\n      if (this.packageType === this.packageTypeConst.FIXATION) {\n        return this.teamFixColumns;\n      }\n\n      return this.teamFixColumns;\n    },\n    personalColumns: function personalColumns() {\n      if (this.packageType === this.packageTypeConst.RANGE) {\n        return this.personalRangeColumns;\n      }\n\n      if (this.packageType === this.packageTypeConst.FIXATION) {\n        return this.personalFixColumns;\n      }\n\n      return this.personalFixColumns;\n    },\n    isUnLimit: function isUnLimit() {\n      // TODO\n      return +this.packageType === this.packageTypeConst.UNLIMITED;\n    },\n    salesDate: function salesDate() {\n      return \"\".concat(this.info$.start_time, \" ~ \").concat(this.info$.end_time);\n    },\n    title: function title() {\n      return this.info$.course_name;\n    }\n  },\n  methods: {\n    onUpShelf: function onUpShelf() {\n      var _this = this;\n\n      var id = this.info$.package_course_id;\n      var channel = this.info$.publish_channel;\n      this.$modalRouter.push({\n        name: 'on-sales',\n        props: {\n          id: id,\n          channel: channel === PRODUCT_CHANNEL.SHOP ? 'shop' : 'brand'\n        },\n        on: {\n          success: function success() {\n            _this.$router.reload();\n          }\n        }\n      });\n    },\n    onDownShelf: function onDownShelf() {\n      var _this2 = this;\n\n      var id = this.info$.package_course_id;\n      this.$modalRouter.push({\n        name: 'off-sales',\n        props: {\n          id: id\n        },\n        on: {\n          success: function success() {\n            _this2.$router.reload();\n          }\n        }\n      });\n    },\n    batchOperate: function batchOperate() {\n      var _this3 = this;\n\n      var id = this.info$.package_course_id;\n      this.$modalRouter.push({\n        name: 'Synchronize',\n        on: {\n          success: function success() {\n            _this3.$confirm({\n              title: '提示',\n              content: \"\\u8BF7\\u518D\\u6B21\\u786E\\u8BA4\\u662F\\u5426\\u540C\\u6B65\\uFF0C\\u540C\\u6B65\\u540E\\u4F1A\\u8986\\u76D6\\u552E\\u51FA\\u8BFE\\u7A0B\\u5305\\uFF0C\\u5C06\\u4F1A\\u67092\\uFF5E5s\\u65E0\\u6CD5\\u6B63\\u5E38\\u4F7F\\u7528\",\n              onOk: function onOk() {\n                _this3.listService.setSyncSold(id).subscribe(function (res) {\n                  _this3.$modalRouter.push({\n                    name: 'success-tip'\n                  });\n\n                  _this3.$router.reload();\n                });\n              },\n              onCancel: function onCancel() {}\n            });\n          }\n        }\n      });\n    },\n    deletePackage: function deletePackage() {\n      var _this4 = this;\n\n      var id = this.info$.package_course_id;\n      var name = this.info$.course_name;\n      this.$confirm({\n        title: '提示',\n        content: \" \\u5220\\u9664\\u540E\\u4E0D\\u5F71\\u54CD\\u5DF2\\u8D2D\\u4E70\\u7684\\u7528\\u6237\\uFF0C\\u4E00\\u65E6\\u5220\\u9664\\u5219\\u65E0\\u6CD5\\u6062\\u590D\\uFF0C\\u786E\\u8BA4\\u5220\\u9664\".concat(name, \"\\uFF1F\"),\n        onOk: function onOk() {\n          _this4.listService.deletePackage(id).subscribe(function (res) {\n            _this4.$router.reload();\n          });\n        },\n        onCancel: function onCancel() {}\n      });\n    },\n    onEdit: function onEdit() {\n      var _editList;\n\n      var id = this.info$.package_course_id;\n      var type = this.packageType;\n      var editList = (_editList = {}, _defineProperty(_editList, this.FIXATION, 'brand-product-package-edit-fix-package'), _defineProperty(_editList, this.UNLIMIT, 'brand-product-package-edit-unlimit-package'), _defineProperty(_editList, this.RANGE, 'brand-product-package-edit-range-package'), _editList);\n      this.$router.push({\n        name: editList[type],\n        query: {\n          id: id\n        }\n      });\n    }\n  }\n};",null]}