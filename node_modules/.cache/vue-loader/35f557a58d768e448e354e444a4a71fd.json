{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/staff/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/staff/list.vue","mtime":1597396800008},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { UserService } from '@/services/user.service'\nimport { ListService } from './list.service'\nimport ChangeStaffPostion from './list#/change-staff-postion'\nimport { columns } from './list.config'\nimport tableMixin from '@/mixins/table.mixin'\nimport ShopStaffBatchImport from '@/views/biz-modals/shop-staff/batch-import'\nimport ShopStaffBindCard from '@/views/biz-modals/shop-staff/bind-card'\nimport ShopStaffLeaveCurrentShop from '@/views/biz-modals/shop-staff/leave-current-shop'\nimport ShopStaffRePassword from '@/views/biz-modals/shop-staff/re-password'\nimport ShopStaffSalaryAccountSetting from '@/views/biz-modals/shop-staff/salary-account-setting'\nimport ShopStaffUpdateStaffPosition from '@/views/biz-modals/shop-staff/update-staff-position'\nimport StaffUpdateStaffPosition from '@/views/biz-modals/staff/update-staff-position'\nexport default {\n  mixins: [tableMixin],\n  modals: {\n    ShopStaffBatchImport,\n    ShopStaffBindCard,\n    ShopStaffLeaveCurrentShop,\n    ShopStaffRePassword,\n    ShopStaffSalaryAccountSetting,\n    ShopStaffUpdateStaffPosition,\n    StaffUpdateStaffPosition\n  },\n  components: {\n    ChangeStaffPostion\n  },\n  serviceInject() {\n    return {\n      userService: UserService,\n      service: ListService\n    }\n  },\n  rxState() {\n    return {\n      staffList: this.service.staffList$,\n      page: this.service.page$,\n      roleOptions: this.service.roleOptions$,\n      loading: this.service.loading$,\n      department: this.service.department$,\n      identityList: this.service.identityList$,\n      workStatusList: this.service.workStatusList$,\n      auth: this.service.auth$\n    }\n  },\n  data() {\n    return {\n      visible: false,\n      value: '',\n      enums: {},\n      modaldata: {}\n    }\n  },\n  computed: {\n    columns\n  },\n  methods: {\n    getShopName(record) {\n      console.log('get shop name', record)\n      if (record.is_super_admin) {\n        return '全部'\n      }\n      return record.shop\n        .filter(Boolean)\n        .map(item => item.name)\n        .join(',')\n    },\n    changeStaffPosition(id) {\n      this.userService.getEnums().subscribe(res => {\n        this.enums = res.staff\n        this.visible = true\n        this.modaldata = {\n          nature_work: 1,\n          identity: [1, 2]\n        }\n      })\n    },\n    selectDepartment(e) {\n      console.log(e)\n      this.value = e + ''\n    },\n    joinok() {\n      this.onSearchReset()\n    },\n    onJoinDepartment(e) {\n      console.log('批量加入部门')\n      this.$modalRouter.push({\n        name: 'shop-staff-batch-import',\n        props: {\n          ids: this.selectedRowKeys\n        },\n        on: {\n          change: this.joinok\n        }\n      })\n    },\n    onAddStaff() {\n      this.$router.push({\n        name: 'shop-staff-add'\n      })\n    },\n    onExportStaff() {\n      console.log('导入员工')\n    },\n    // 详情\n    onSearchDetail(e) {\n      let identity = e.identity.map(ele => {\n        return ele.id\n      })\n      this.$router.push({\n        name: 'shop-staff-info-basic',\n        query: {\n          id: e.id\n        }\n      })\n    },\n    onEdit(e) {\n      this.$router.push({\n        name: 'shop-staff-edit',\n        query: {\n          id: e.id\n        }\n      })\n    },\n    onChooseDepartment(e) {\n      console.log('选择部门', e)\n      this.$router.push({\n        query: {\n          shop_id: e\n        }\n      })\n    },\n    onChooseStaffFn(e) {\n      console.log('选择员工职能', e)\n    },\n    onChooseStaffStatus(e) {\n      console.log('选择在职状态', e)\n      this.$router.push({\n        query: {\n          work_status: e\n        }\n      })\n    },\n    onSearch(e) {\n      console.log('搜索员工', e)\n    },\n    // 清空指纹信息\n    onClearFingerprintInfo(record) {\n      this.$confirm({\n        title: '提示信息',\n        content: '确认清空指纹信息？',\n        onOk: () => {\n          this.service.deleteStaffFinger(record.id).subscribe()\n        }\n      })\n    },\n    // 清空硬件密码\n    onClearHardwarePassword(record) {\n      this.$confirm({\n        title: '提示信息',\n        content: '确认清空硬件密码吗？',\n        onOk: () => {\n          this.service.deleteStaffCabinetPassword(record.id).subscribe()\n        }\n      })\n    }\n  }\n}\n",null]}