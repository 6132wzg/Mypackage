{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js!/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/reception/components#/shortcut-nav.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/reception/components#/shortcut-nav.vue","mtime":1594718340673},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js","mtime":1591062572352},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import _toConsumableArray from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { shortcutNavList } from \"./shortcut.config\";\nimport { ShortcutNavService } from \"./shortcut-nav.service\";\nimport { cloneDeep } from 'lodash-es';\nexport default {\n  name: '',\n  bem: {},\n  components: {},\n  serviceInject: function serviceInject() {\n    return {\n      shortcutNavService: ShortcutNavService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      auth: this.shortcutNavService.auth$\n    };\n  },\n  props: {},\n  data: function data() {\n    return {\n      // 根据权限处理后的快捷操作列表\n      dropdownList: [],\n      nodropdownList: [],\n      visible: false,\n      needResize: false,\n      safeWidth: 142,\n      resizeSmall: false\n    };\n  },\n  computed: {\n    shortcutNavList: shortcutNavList,\n    showDropDown: function showDropDown() {\n      return !!this.dropdownList.length;\n    }\n  },\n  async: {},\n  mounted: function mounted() {\n    this.formatShortcutList();\n    window.addEventListener('resize', this.judgeIfNeedResizeShortNav);\n  },\n  methods: {\n    judgeIfNeedResizeShortNav: function judgeIfNeedResizeShortNav() {\n      var shortcutNav = this.$refs.shortcutNav;\n      var shortcuts = this.$refs.shortcuts;\n\n      if (shortcuts && shortcutNav) {\n        var nWidth = shortcutNav.offsetWidth;\n        var sWidth = shortcuts.offsetWidth;\n        var offsetWidth = nWidth - sWidth;\n        console.log('offsetWidth', offsetWidth);\n\n        if (offsetWidth > 290) {\n          this.needResize = false;\n          this.resizeShortcutList();\n        }\n\n        if (offsetWidth < 180) {\n          this.needResize = true;\n          this.resizeShortcutList();\n        }\n      }\n    },\n    // 快捷操作\n    onShortcut: function onShortcut(data) {\n      switch (data) {\n        case 'checkInoutRecord':\n          window.open('/shop/reception/entrance');\n          break;\n\n        case 'scheduleAgency':\n          window.open('/shop/product/course/schedule/team');\n          break;\n\n        case 'courseSign':\n          window.open('/shop/reception/reserve');\n          break;\n\n        case 'receptionCabinet':\n          window.open('/shop/reception/cabinet');\n          break;\n\n        case 'earnestManage':\n          window.open('/shop/finance/gathering/earnest');\n          break;\n\n        case 'store':\n          window.open('/shop/sold/transaction/store');\n          break;\n\n        case 'soldCard':\n          window.open('/shop/sold/card/list');\n          break;\n\n        case 'soldCourse':\n          window.open('/shop/sold/course/list');\n          break;\n\n        case 'receptionRecord':\n          window.open('/shop/store/order/list/verification');\n          break;\n      }\n    },\n    openNewTab: function openNewTab(path) {\n      var a = document.createElement('a');\n      var url = location.origin + path;\n      a.setAttribute('href', url);\n      a.setAttribute('target', '_blank');\n      a.setAttribute('id', 'camnpr');\n      document.body.appendChild(a);\n      a.click();\n    },\n    handleMenuClick: function handleMenuClick(e) {\n      var key = e.key;\n      this.onShortcut(key);\n    },\n    formatShortcutList: function formatShortcutList() {\n      var _this = this;\n\n      var trueArray = this.shortcutNavList.map(function (i) {\n        i.auth = _this.auth[i.id] || false;\n        return i;\n      }).filter(function (i) {\n        return i.auth;\n      });\n      this.nodropdownList = cloneDeep(trueArray);\n      this.$nextTick(function () {\n        _this.initShortcutList();\n      });\n    },\n    initShortcutList: function initShortcutList(val) {\n      var shortcutNav = this.$refs.shortcutNav;\n      var shortcuts = this.$refs.shortcuts;\n\n      if (shortcuts && shortcutNav) {\n        var nWidth = shortcutNav.offsetWidth;\n        var sWidth = shortcuts.offsetWidth;\n        var offsetWidth = nWidth - sWidth;\n        console.log('initShortcutList offsetWidth', offsetWidth);\n\n        if (offsetWidth > 290) {\n          this.needResize = false;\n          return false;\n        } else if (offsetWidth < 180) {\n          this.deleteDropDownList();\n        }\n      }\n    },\n    computedOffsetWidth: function computedOffsetWidth() {\n      var shortcutNav = this.$refs.shortcutNav;\n      var shortcuts = this.$refs.shortcuts;\n      var nWidth = shortcutNav.offsetWidth;\n      var sWidth = shortcuts.offsetWidth;\n      var offsetWidth = nWidth - sWidth;\n      return offsetWidth < 180;\n    },\n    deleteDropDownList: function deleteDropDownList() {\n      var _this2 = this;\n\n      var len = this.nodropdownList.length;\n      console.log('deleteDropDownList', len);\n\n      if (len) {\n        var list = this.nodropdownList.splice(len - 1);\n        this.dropdownList = [].concat(_toConsumableArray(this.dropdownList), _toConsumableArray(list));\n        this.$nextTick(function () {\n          if (_this2.computedOffsetWidth()) {\n            return _this2.deleteDropDownList();\n          } else {\n            return false;\n          }\n        });\n      } else {\n        return false;\n      }\n    },\n    resizeShortcutList: function resizeShortcutList() {\n      if (this.needResize) {\n        var len = this.nodropdownList.length;\n\n        if (len) {\n          var list = this.nodropdownList.splice(len - 1);\n          this.dropdownList = [].concat(_toConsumableArray(this.dropdownList), _toConsumableArray(list));\n        }\n      } else {\n        var _len = this.dropdownList.length;\n\n        if (_len) {\n          var _list = this.dropdownList.splice(_len - 1);\n\n          this.nodropdownList = [].concat(_toConsumableArray(this.nodropdownList), _toConsumableArray(_list));\n        }\n      }\n    }\n  }\n};",null]}