{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/member-points/list/member-points.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/member-points/list/member-points.vue","mtime":1600926556150},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport tableMixin from '@/mixins/table.mixin';\nimport { columns, totalColumns } from \"./member-points.config\";\nimport { MemberPointsService } from \"./member-points.service\";\nimport PointsAddOrMinus from '@/views/biz-modals/brand/marketing/points/add-or-minus';\nexport default {\n  name: 'BrandPlaginPointsMall',\n  bem: {\n    b: 'brand-plagin-member-points-member-points'\n  },\n  modals: {\n    PointsAddOrMinus: PointsAddOrMinus\n  },\n  serviceInject: function serviceInject() {\n    return {\n      service: MemberPointsService\n    };\n  },\n  rxState: function rxState() {\n    var _this$service = this.service,\n        total$ = _this$service.total$,\n        list$ = _this$service.list$,\n        page$ = _this$service.page$,\n        auth$ = _this$service.auth$;\n    return {\n      total$: total$,\n      list$: list$,\n      page$: page$,\n      auth$: auth$\n    };\n  },\n  mixins: [tableMixin],\n  computed: {\n    columns: columns,\n    totalColumns: totalColumns,\n    buttonDisable: function buttonDisable() {\n      return !this.selectedRowKeys.length;\n    }\n  },\n  methods: {\n    onClear: function onClear() {\n      console.log('onClear');\n    },\n    onSuccess: function onSuccess() {\n      this.selectedRowKeys = [];\n      this.$router.reload();\n    },\n    addPoints: function addPoints(record) {\n      this.$modalRouter.push({\n        name: 'points-add-or-minus',\n        props: {\n          type: 'add',\n          query: {\n            memberName: record.member_name,\n            memberId: record.member_id\n          }\n        },\n        on: {\n          done: this.onSuccess\n        }\n      });\n    },\n    miusPoints: function miusPoints(record) {\n      this.$modalRouter.push({\n        name: 'points-add-or-minus',\n        props: {\n          type: 'minus',\n          query: {\n            memberName: record.member_name,\n            memberId: record.member_id\n          }\n        },\n        on: {\n          done: this.onSuccess\n        }\n      });\n    },\n    addPointsByBatch: function addPointsByBatch() {\n      var ids = this.selectedRowKeys;\n      this.$modalRouter.push({\n        name: 'points-add-or-minus',\n        props: {\n          type: 'add-by-batch',\n          query: {\n            member_ids: ids\n          }\n        },\n        on: {\n          done: this.onSuccess\n        }\n      });\n    },\n    minusPointsByBatch: function minusPointsByBatch() {\n      var ids = this.selectedRowKeys;\n      this.$modalRouter.push({\n        name: 'points-add-or-minus',\n        props: {\n          type: 'minus-by-batch',\n          query: {\n            member_ids: ids\n          }\n        },\n        on: {\n          done: this.onSuccess\n        }\n      });\n    },\n    showPoints: function showPoints(record) {\n      this.$router.push({\n        name: 'brand-marketing-plugin-member-points-list-flow-record',\n        query: {\n          keyword: record.member_name\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["member-points.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div :class=\"b()\">\n    <portal to=\"BRAND_PLUGIN_POINTS_MALL_SEARCH\">\n      <st-input-search\n        v-model=\"$searchQuery.keyword\"\n        @search=\"onKeywordsSearch('keyword', $event)\"\n        placeholder=\"搜索会员姓名或手机号\"\n        style=\"width:400px\"\n      />\n    </portal>\n    <div :class=\"b('total')\">\n      <div :class=\"b('total-item')\">\n        <span class=\"label\">积分总额</span>\n        <i-count-up class=\"value\" :endVal=\"+total$.total_points\"></i-count-up>\n      </div>\n      <div :class=\"b('total-item')\">\n        <span class=\"label\">已用积分</span>\n        <i-count-up class=\"value\" :endVal=\"+total$.used_points\"></i-count-up>\n      </div>\n      <div :class=\"b('total-item')\">\n        <span class=\"label\">过期积分</span>\n        <i-count-up class=\"value\" :endVal=\"+total$.expired_points\"></i-count-up>\n      </div>\n      <div :class=\"b('total-item')\">\n        <span class=\"label\">剩余积分</span>\n        <i-count-up class=\"value\" :endVal=\"+total$.remain_points\"></i-count-up>\n      </div>\n    </div>\n    <div :class=\"b('button')\" class=\"mg-t24\">\n      <st-button\n        type=\"primary\"\n        class=\"mg-r16\"\n        :disabled=\"buttonDisable\"\n        @click=\"addPointsByBatch\"\n        v-if=\"auth$.batch_add\"\n      >\n        批量增加\n      </st-button>\n      <st-button\n        @click=\"minusPointsByBatch\"\n        :disabled=\"buttonDisable\"\n        v-if=\"auth$.batch_reduce\"\n      >\n        批量扣减\n      </st-button>\n    </div>\n    <div :class=\"b('content')\" class=\"mg-t16\">\n      <st-table\n        :page=\"page$\"\n        rowKey=\"member_id\"\n        :columns=\"columns\"\n        @change=\"onTableChange\"\n        :rowSelection=\"{ selectedRowKeys, onChange: onSelectionChange }\"\n        :scroll=\"{ x: 860 }\"\n        :alertSelection=\"{ onReset: onSelectionReset }\"\n        :dataSource=\"list$\"\n      >\n        <div slot=\"action\" slot-scope=\"text, record\">\n          <st-table-actions>\n            <a\n              @click=\"addPoints(record)\"\n              v-if=\"record.auth['brand:activity:points|add']\"\n            >\n              增加\n            </a>\n            <a\n              @click=\"miusPoints(record)\"\n              v-if=\"record.auth['brand:activity:points|reduce']\"\n            >\n              扣减\n            </a>\n            <a\n              @click=\"showPoints(record)\"\n              v-if=\"record.auth['brand:activity:points|get_flow']\"\n            >\n              查看\n            </a>\n          </st-table-actions>\n        </div>\n      </st-table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport tableMixin from '@/mixins/table.mixin'\n\nimport { columns, totalColumns } from './member-points.config'\nimport { MemberPointsService } from './member-points.service'\nimport PointsAddOrMinus from '@/views/biz-modals/brand/marketing/points/add-or-minus'\nexport default {\n  name: 'BrandPlaginPointsMall',\n  bem: {\n    b: 'brand-plagin-member-points-member-points'\n  },\n  modals: {\n    PointsAddOrMinus\n  },\n  serviceInject() {\n    return {\n      service: MemberPointsService\n    }\n  },\n  rxState() {\n    let { total$, list$, page$, auth$ } = this.service\n    return {\n      total$,\n      list$,\n      page$,\n      auth$\n    }\n  },\n  mixins: [tableMixin],\n  computed: {\n    columns,\n    totalColumns,\n    buttonDisable() {\n      return !this.selectedRowKeys.length\n    }\n  },\n  methods: {\n    onClear() {\n      console.log('onClear')\n    },\n    onSuccess() {\n      this.selectedRowKeys = []\n      this.$router.reload()\n    },\n    addPoints(record) {\n      this.$modalRouter.push({\n        name: 'points-add-or-minus',\n        props: {\n          type: 'add',\n          query: {\n            memberName: record.member_name,\n            memberId: record.member_id\n          }\n        },\n        on: {\n          done: this.onSuccess\n        }\n      })\n    },\n    miusPoints(record) {\n      this.$modalRouter.push({\n        name: 'points-add-or-minus',\n        props: {\n          type: 'minus',\n          query: {\n            memberName: record.member_name,\n            memberId: record.member_id\n          }\n        },\n        on: {\n          done: this.onSuccess\n        }\n      })\n    },\n    addPointsByBatch() {\n      const ids = this.selectedRowKeys\n      this.$modalRouter.push({\n        name: 'points-add-or-minus',\n        props: {\n          type: 'add-by-batch',\n          query: {\n            member_ids: ids\n          }\n        },\n        on: {\n          done: this.onSuccess\n        }\n      })\n    },\n    minusPointsByBatch() {\n      const ids = this.selectedRowKeys\n      this.$modalRouter.push({\n        name: 'points-add-or-minus',\n        props: {\n          type: 'minus-by-batch',\n          query: {\n            member_ids: ids\n          }\n        },\n        on: {\n          done: this.onSuccess\n        }\n      })\n    },\n    showPoints(record) {\n      this.$router.push({\n        name: 'brand-marketing-plugin-member-points-list-flow-record',\n        query: {\n          keyword: record.member_name\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style></style>\n"],"sourceRoot":"src/views/pages/brand/marketing/plugin/member-points/list"}]}