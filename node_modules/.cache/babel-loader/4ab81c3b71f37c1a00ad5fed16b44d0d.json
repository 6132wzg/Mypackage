{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/image-cropper.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/image-cropper.vue","mtime":1600912105707},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Cropper from 'cropperjs';\nimport { AppConfig } from '@/constants/config';\nvar cropper;\nexport default {\n  name: 'StModalCropper',\n  serviceInject: function serviceInject() {\n    return {\n      appConfig: AppConfig\n    };\n  },\n  data: function data() {\n    return {\n      show: false,\n      filename: ''\n    };\n  },\n  props: {\n    title: {\n      type: String,\n      default: '图片裁剪'\n    },\n    file: {\n      type: null,\n      required: true\n    },\n    cropper: {\n      type: Object,\n      default: function _default() {\n        return {\n          aspectRatio: 16 / 9\n        };\n      }\n    }\n  },\n  computed: {\n    _title: function _title() {\n      return this.title;\n    },\n    _imageUrl: function _imageUrl() {\n      return URL.createObjectURL(this.file);\n    },\n    _cropperOptions: function _cropperOptions() {\n      return Object.assign(this.appConfig.CROPPER_DEFAULT_CONFIG, this.cropper);\n    }\n  },\n  watch: {\n    image: {\n      deep: true,\n      handler: function handler(newVal, oldVal) {\n        console.log(newVal);\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.init();\n  },\n  methods: {\n    init: function init() {\n      var imageEl = document.getElementById('modal_cropper_image');\n      cropper = new Cropper(imageEl, this._cropperOptions);\n    },\n    handleCancel: function handleCancel() {\n      this.$emit('cancel');\n    },\n    handleOk: function handleOk() {\n      var _this = this;\n\n      cropper.getCroppedCanvas().toBlob(function (blob) {\n        _this.show = false;\n\n        _this.$emit('ok', {\n          file: blob\n        });\n      });\n    }\n  }\n};",{"version":3,"sources":["image-cropper.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAiBA,OAAA,OAAA,MAAA,WAAA;AACA,SAAA,SAAA,QAAA,oBAAA;AAEA,IAAA,OAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,gBADA;AAEA,EAAA,aAFA,2BAEA;AACA,WAAA;AACA,MAAA,SAAA,EAAA;AADA,KAAA;AAGA,GANA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,QAAA,EAAA;AAFA,KAAA;AAIA,GAZA;AAaA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KADA;AAKA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,IADA;AAEA,MAAA,QAAA,EAAA;AAFA,KALA;AASA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA;AACA,UAAA,WAAA,EAAA,KAAA;AADA,SAAA;AAAA;AAFA;AATA,GAbA;AA6BA,EAAA,QAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,aAAA,KAAA,KAAA;AACA,KAHA;AAIA,IAAA,SAJA,uBAIA;AACA,aAAA,GAAA,CAAA,eAAA,CAAA,KAAA,IAAA,CAAA;AACA,KANA;AAOA,IAAA,eAPA,6BAOA;AACA,aAAA,MAAA,CAAA,MAAA,CAAA,KAAA,SAAA,CAAA,sBAAA,EAAA,KAAA,OAAA,CAAA;AACA;AATA,GA7BA;AAwCA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,IADA;AAEA,MAAA,OAFA,mBAEA,MAFA,EAEA,MAFA,EAEA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,MAAA;AACA;AAJA;AADA,GAxCA;AAgDA,EAAA,OAhDA,qBAgDA;AACA,SAAA,IAAA;AACA,GAlDA;AAmDA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,UAAA,OAAA,GAAA,QAAA,CAAA,cAAA,CAAA,qBAAA,CAAA;AACA,MAAA,OAAA,GAAA,IAAA,OAAA,CAAA,OAAA,EAAA,KAAA,eAAA,CAAA;AACA,KAJA;AAKA,IAAA,YALA,0BAKA;AACA,WAAA,KAAA,CAAA,QAAA;AACA,KAPA;AAQA,IAAA,QARA,sBAQA;AAAA;;AACA,MAAA,OAAA,CAAA,gBAAA,GAAA,MAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,KAAA;;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,IAAA,EAAA;AAAA,UAAA,IAAA,EAAA;AAAA,SAAA;AACA,OAHA;AAIA;AAbA;AAnDA,CAAA","sourcesContent":["<template>\n  <st-modal\n    class=\"st-modal-cropper\"\n    :title=\"_title\"\n    v-model=\"show\"\n    @cancel=\"handleCancel\"\n    @ok=\"handleOk\"\n  >\n    <div class=\"st-modal-cropper-content\">\n      <div class=\"st-modal-cropper-image\">\n        <img :src=\"_imageUrl\" id=\"modal_cropper_image\" hidden alt />\n      </div>\n      <p class=\"st-modal-cropper-preview\" id=\"crop_preview\"></p>\n    </div>\n  </st-modal>\n</template>\n<script>\nimport Cropper from 'cropperjs'\nimport { AppConfig } from '@/constants/config'\n\nlet cropper\nexport default {\n  name: 'StModalCropper',\n  serviceInject() {\n    return {\n      appConfig: AppConfig\n    }\n  },\n  data() {\n    return {\n      show: false,\n      filename: ''\n    }\n  },\n  props: {\n    title: {\n      type: String,\n      default: '图片裁剪'\n    },\n    file: {\n      type: null,\n      required: true\n    },\n    cropper: {\n      type: Object,\n      default: () => ({\n        aspectRatio: 16 / 9\n      })\n    }\n  },\n  computed: {\n    _title() {\n      return this.title\n    },\n    _imageUrl() {\n      return URL.createObjectURL(this.file)\n    },\n    _cropperOptions() {\n      return Object.assign(this.appConfig.CROPPER_DEFAULT_CONFIG, this.cropper)\n    }\n  },\n  watch: {\n    image: {\n      deep: true,\n      handler(newVal, oldVal) {\n        console.log(newVal)\n      }\n    }\n  },\n  mounted() {\n    this.init()\n  },\n  methods: {\n    init() {\n      const imageEl = document.getElementById('modal_cropper_image')\n      cropper = new Cropper(imageEl, this._cropperOptions)\n    },\n    handleCancel() {\n      this.$emit('cancel')\n    },\n    handleOk() {\n      cropper.getCroppedCanvas().toBlob(blob => {\n        this.show = false\n        this.$emit('ok', { file: blob })\n      })\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/biz-modals"}]}