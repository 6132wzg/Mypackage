{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/setting/cabinet.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/setting/cabinet.vue","mtime":1601345845270},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { MessageService } from '@/services/message.service'\nimport { CabinetService } from './cabinet.service'\nimport CabinetArea from '@/views/biz-components/shop/cabinet/area'\nimport CabinetList from '@/views/biz-components/shop/cabinet/list'\nexport default {\n  bem: {\n    b: 'page-setting-cabinet'\n  },\n  data() {\n    return {\n      currentArea: {}\n    }\n  },\n  serviceInject() {\n    return {\n      cabinetService: CabinetService\n    }\n  },\n  rxState() {\n    return {\n      list: this.cabinetService.list$,\n      page: this.cabinetService.page$,\n      loading: this.cabinetService.loading$\n    }\n  },\n  components: {\n    CabinetList,\n    CabinetArea\n  },\n  computed: {\n    type() {\n      return this.$searchQuery.type\n    },\n    areaName() {\n      return this.currentArea.area_name\n    }\n  },\n  methods: {\n    onCabinetTabChange(key) {\n      this.singleCabinetSearch('type', key)\n    },\n    onChangeCurrentArea(area) {\n      this.currentArea = area\n      this.singleCabinetSearch('id', area.id)\n    },\n    onOnlyChangeCurrentArea(area) {\n      this.currentArea = area\n    },\n    singleCabinetSearch(key, data) {\n      this.$refs.cabinetList.onSelectionReset()\n      this.$router.push({\n        query: {\n          [key]: data,\n          id: this.currentArea.id\n        }\n      })\n    },\n    onCabinetKeywordsSearch(keywords) {\n      this.$searchQuery.keywords = keywords\n      this.onCabinetReload()\n    },\n    onCabinetReload() {\n      this.$refs.cabinetList.onSelectionReset()\n      this.$refs.cabinetArea.init(true)\n      this.$router.push({\n        query: this.$searchQuery\n      })\n    }\n  }\n}\n",{"version":3,"sources":["cabinet.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cabinet.vue","sourceRoot":"src/views/pages/shop/setting","sourcesContent":["<template>\n  <div :class=\"b()\">\n    <cabinet-area\n      :class=\"b('nav')\"\n      ref=\"cabinetArea\"\n      v-model=\"$searchQuery.id\"\n      @changeCurrentArea=\"onChangeCurrentArea\"\n      @onlyChangeCurrentArea=\"onOnlyChangeCurrentArea\"\n    ></cabinet-area>\n    <st-panel :class=\"b('content')\">\n      <div slot=\"prepend\" class=\"page-setting-cabinet-tab\">\n        <a-tabs\n          v-model=\"$searchQuery.type\"\n          class=\"st-route-tabs\"\n          @change=\"onCabinetTabChange\"\n        >\n          <a-tab-pane\n            :tab=\"`临时储物柜(${currentArea.temporary_num || 0})`\"\n            key=\"temporary\"\n          ></a-tab-pane>\n          <a-tab-pane\n            :tab=\"`长期储物柜(${currentArea.long_term_num || 0})`\"\n            key=\"long-term\"\n          ></a-tab-pane>\n          <st-input-search\n            class=\"mg-r24\"\n            @search=\"onCabinetKeywordsSearch\"\n            v-model=\"$searchQuery.keywords\"\n            placeholder=\"搜索柜号、姓名、手机号及手牌信息\"\n            allowClear\n            slot=\"tabBarExtraContent\"\n          />\n        </a-tabs>\n      </div>\n      <cabinet-list\n        :loading=\"loading.getList\"\n        :list=\"list\"\n        :page=\"page\"\n        :areaName=\"areaName\"\n        channel=\"manage\"\n        ref=\"cabinetList\"\n        @refresh=\"onCabinetReload\"\n      ></cabinet-list>\n    </st-panel>\n  </div>\n</template>\n<script>\nimport { MessageService } from '@/services/message.service'\nimport { CabinetService } from './cabinet.service'\nimport CabinetArea from '@/views/biz-components/shop/cabinet/area'\nimport CabinetList from '@/views/biz-components/shop/cabinet/list'\nexport default {\n  bem: {\n    b: 'page-setting-cabinet'\n  },\n  data() {\n    return {\n      currentArea: {}\n    }\n  },\n  serviceInject() {\n    return {\n      cabinetService: CabinetService\n    }\n  },\n  rxState() {\n    return {\n      list: this.cabinetService.list$,\n      page: this.cabinetService.page$,\n      loading: this.cabinetService.loading$\n    }\n  },\n  components: {\n    CabinetList,\n    CabinetArea\n  },\n  computed: {\n    type() {\n      return this.$searchQuery.type\n    },\n    areaName() {\n      return this.currentArea.area_name\n    }\n  },\n  methods: {\n    onCabinetTabChange(key) {\n      this.singleCabinetSearch('type', key)\n    },\n    onChangeCurrentArea(area) {\n      this.currentArea = area\n      this.singleCabinetSearch('id', area.id)\n    },\n    onOnlyChangeCurrentArea(area) {\n      this.currentArea = area\n    },\n    singleCabinetSearch(key, data) {\n      this.$refs.cabinetList.onSelectionReset()\n      this.$router.push({\n        query: {\n          [key]: data,\n          id: this.currentArea.id\n        }\n      })\n    },\n    onCabinetKeywordsSearch(keywords) {\n      this.$searchQuery.keywords = keywords\n      this.onCabinetReload()\n    },\n    onCabinetReload() {\n      this.$refs.cabinetList.onSelectionReset()\n      this.$refs.cabinetArea.init(true)\n      this.$router.push({\n        query: this.$searchQuery\n      })\n    }\n  }\n}\n</script>\n"]}]}