{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/reception/components#/shortcut-model.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/reception/components#/shortcut-model.vue","mtime":1600926556423},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { ShortcutModelService } from \"./shortcut-model.service\";\nimport FrontAddReserve from '@/views/biz-modals/front/add-reserve';\nimport ShopFinanceGatheringEarnestAdd from '@/views/biz-modals/shop/finance/gathering/earnest/add';\nimport ShopReceptionEditShortcuts from '@/views/biz-modals/shop/reception/edit-shortcuts';\nimport SoldTransaction from '@/views/biz-components/sold/transaction';\nimport { cloneDeep } from 'lodash-es';\nimport { PRODUCT_TYPE } from '@/constants/sold/transaction';\nexport default {\n  name: '',\n  bem: {},\n  components: {\n    SoldTransaction: SoldTransaction\n  },\n  serviceInject: function serviceInject() {\n    return {\n      shortcutModelService: ShortcutModelService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      auth: this.shortcutModelService.auth$,\n      list: this.shortcutModelService.list$,\n      loading: this.shortcutModelService.loading$\n    };\n  },\n  modals: {\n    FrontAddReserve: FrontAddReserve,\n    ShopFinanceGatheringEarnestAdd: ShopFinanceGatheringEarnestAdd,\n    ShopReceptionEditShortcuts: ShopReceptionEditShortcuts\n  },\n  props: {},\n  data: function data() {\n    return {\n      // 根据权限处理后的快捷操作列表\n      filterShortcutList: [],\n      PRODUCT_TYPE: PRODUCT_TYPE\n    };\n  },\n  computed: {\n    isAllShow: function isAllShow() {\n      var len = this.list.length;\n      var fLen = this.filterShortcutList.length;\n      return len === fLen;\n    }\n  },\n  async: {},\n  mounted: function mounted() {\n    this.getShortCutList();\n  },\n  methods: {\n    getShortCutList: function getShortCutList() {\n      var _this = this;\n\n      this.shortcutModelService.getIcons().subscribe(function (res) {\n        _this.formatShortcutList();\n      });\n    },\n    handleRemoveModels: function handleRemoveModels(id) {\n      var _this2 = this;\n\n      var icons = this.list.map(function (i) {\n        if (i.id === id) i.is_show = 0;\n        return i;\n      });\n      console.log('icons', icons);\n      this.shortcutModelService.setIcons({\n        icons: icons\n      }).subscribe(function (res) {\n        _this2.show = false;\n\n        _this2.getShortCutList();\n      });\n    },\n    // 快捷操作\n    onShortcut: function onShortcut(data) {\n      var _this3 = this;\n\n      if (data === 'reserveAdd' || data === 'earnestAdd') {\n        switch (data) {\n          case 'reserveAdd':\n            this.$modalRouter.push({\n              name: 'front-add-reserve',\n              on: {\n                success: function success(result) {\n                  _this3.$router.reload();\n                }\n              }\n            });\n            break;\n\n          case 'earnestAdd':\n            this.$modalRouter.push({\n              name: 'shop-finance-gathering-earnest-add',\n              props: {},\n              on: {\n                success: function success(res) {\n                  _this3.$router.reload();\n\n                  _this3.$refs.soldTransaction.payCallBack(res.orderId, '', res.type, res);\n                }\n              }\n            });\n            break;\n        }\n      } else {\n        var typeMap = {\n          memberBill: this.PRODUCT_TYPE.MEMBER_CARD,\n          depositBill: this.PRODUCT_TYPE.DEPOSIT_CARD,\n          personalBill: this.PRODUCT_TYPE.PERSONAL_COURSE,\n          packageBill: this.PRODUCT_TYPE.PACKAGE,\n          smallCourseBill: this.PRODUCT_TYPE.SMALL_COURSE,\n          cabinetBill: this.PRODUCT_TYPE.CABINET\n        };\n        this.$refs.soldTransaction.onTransaction('', typeMap[data]);\n      }\n    },\n    formatShortcutList: function formatShortcutList() {\n      var _this4 = this;\n\n      console.log('list', this.list);\n      this.filterShortcutList = this.list.map(function (i) {\n        i.auth = _this4.auth[i.id];\n        return i;\n      }).filter(function (i) {\n        return i.auth && i.is_show;\n      });\n    },\n    onAddShortcut: function onAddShortcut() {\n      var _this5 = this;\n\n      this.$modalRouter.push({\n        name: 'shop-reception-edit-shortcuts',\n        on: {\n          done: function done() {\n            _this5.getShortCutList();\n          }\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["shortcut-model.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"shortcut-models-wrapper\">\n    <div class=\"shortcut-models\">\n      <div\n        class=\"shortcut-model\"\n        @click=\"onShortcut(item.id)\"\n        :disabled=\"!item.auth\"\n        :key=\"index\"\n        v-for=\"(item, index) in filterShortcutList\"\n      >\n        <div class=\"shortcut-model-icon\" :class=\"item.icon\"></div>\n        <div class=\"shortcut-model-label\">{{ item.name }}</div>\n        <div\n          class=\"shortcut-model-del\"\n          v-if=\"auth.modelSetting\"\n          @click.stop=\"handleRemoveModels(item.id)\"\n        >\n          <st-icon type=\"modal-close\" size=\"12px\"></st-icon>\n        </div>\n      </div>\n      <div\n        class=\"shortcut-model add\"\n        @click=\"onAddShortcut\"\n        v-if=\"!isAllShow && auth.modelSetting\"\n      >\n        <div class=\"icon\">\n          <a-icon\n            type=\"plus-circle\"\n            theme=\"filled\"\n            :style=\"{ fontSize: '36px', color: '#9BACB9' }\"\n          />\n        </div>\n        <div class=\"tip\">新增常用功能</div>\n      </div>\n    </div>\n    <sold-transaction ref=\"soldTransaction\"></sold-transaction>\n  </div>\n</template>\n\n<script>\nimport { ShortcutModelService } from './shortcut-model.service'\n\nimport FrontAddReserve from '@/views/biz-modals/front/add-reserve'\nimport ShopFinanceGatheringEarnestAdd from '@/views/biz-modals/shop/finance/gathering/earnest/add'\nimport ShopReceptionEditShortcuts from '@/views/biz-modals/shop/reception/edit-shortcuts'\nimport SoldTransaction from '@/views/biz-components/sold/transaction'\nimport { cloneDeep } from 'lodash-es'\nimport { PRODUCT_TYPE } from '@/constants/sold/transaction'\nexport default {\n  name: '',\n\n  bem: {},\n\n  components: { SoldTransaction },\n\n  serviceInject() {\n    return {\n      shortcutModelService: ShortcutModelService\n    }\n  },\n  rxState() {\n    return {\n      auth: this.shortcutModelService.auth$,\n      list: this.shortcutModelService.list$,\n      loading: this.shortcutModelService.loading$\n    }\n  },\n\n  modals: {\n    FrontAddReserve,\n    ShopFinanceGatheringEarnestAdd,\n    ShopReceptionEditShortcuts\n  },\n\n  props: {},\n\n  data() {\n    return {\n      // 根据权限处理后的快捷操作列表\n      filterShortcutList: [],\n      PRODUCT_TYPE\n    }\n  },\n\n  computed: {\n    isAllShow() {\n      const len = this.list.length\n      const fLen = this.filterShortcutList.length\n      return len === fLen\n    }\n  },\n\n  async: {},\n\n  mounted() {\n    this.getShortCutList()\n  },\n\n  methods: {\n    getShortCutList() {\n      this.shortcutModelService.getIcons().subscribe(res => {\n        this.formatShortcutList()\n      })\n    },\n    handleRemoveModels(id) {\n      let icons = this.list.map(i => {\n        if (i.id === id) i.is_show = 0\n        return i\n      })\n      console.log('icons', icons)\n      this.shortcutModelService\n        .setIcons({\n          icons\n        })\n        .subscribe(res => {\n          this.show = false\n          this.getShortCutList()\n        })\n    },\n    // 快捷操作\n    onShortcut(data) {\n      if (data === 'reserveAdd' || data === 'earnestAdd') {\n        switch (data) {\n          case 'reserveAdd':\n            this.$modalRouter.push({\n              name: 'front-add-reserve',\n              on: {\n                success: result => {\n                  this.$router.reload()\n                }\n              }\n            })\n            break\n          case 'earnestAdd':\n            this.$modalRouter.push({\n              name: 'shop-finance-gathering-earnest-add',\n              props: {},\n              on: {\n                success: res => {\n                  this.$router.reload()\n                  this.$refs.soldTransaction.payCallBack(\n                    res.orderId,\n                    '',\n                    res.type,\n                    res\n                  )\n                }\n              }\n            })\n            break\n        }\n      } else {\n        let typeMap = {\n          memberBill: this.PRODUCT_TYPE.MEMBER_CARD,\n          depositBill: this.PRODUCT_TYPE.DEPOSIT_CARD,\n          personalBill: this.PRODUCT_TYPE.PERSONAL_COURSE,\n          packageBill: this.PRODUCT_TYPE.PACKAGE,\n          smallCourseBill: this.PRODUCT_TYPE.SMALL_COURSE,\n          cabinetBill: this.PRODUCT_TYPE.CABINET\n        }\n        this.$refs.soldTransaction.onTransaction('', typeMap[data])\n      }\n    },\n    formatShortcutList() {\n      console.log('list', this.list)\n      this.filterShortcutList = this.list\n        .map(i => {\n          i.auth = this.auth[i.id]\n          return i\n        })\n        .filter(i => i.auth && i.is_show)\n    },\n    onAddShortcut() {\n      this.$modalRouter.push({\n        name: 'shop-reception-edit-shortcuts',\n        on: {\n          done: () => {\n            this.getShortCutList()\n          }\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped></style>\n"],"sourceRoot":"src/views/pages/shop/reception/components#"}]}