{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/staff/batch-import.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/staff/batch-import.vue","mtime":1591147717252},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { BatchImportService } from \"./batch-import.service\";\nimport { StaffApi } from '@/api/v1/staff';\nimport { json2AntDesignTreeData } from '@/utils/json-2-tree-data';\nexport default {\n  name: 'BindEntityCard',\n  serviceInject: function serviceInject() {\n    return {\n      staffApi: StaffApi,\n      batchImportService: BatchImportService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      loading: this.batchImportService.loading$\n    };\n  },\n  props: {\n    ids: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  data: function data() {\n    return {\n      show: false,\n      departmentOptions: [],\n      department_id: 0\n    };\n  },\n  mounted: function mounted() {\n    this.getDepartmentList();\n  },\n  methods: {\n    onSelect: function onSelect(keys) {\n      this.department_id = keys.map(function (item) {\n        return JSON.parse(item)['key'];\n      })[0];\n    },\n    save: function save(e) {\n      var _this = this;\n\n      e.preventDefault();\n      console.log('department_id', this.keys);\n      this.batchImportService.transferBrand({\n        ids: this.ids,\n        department_id: this.department_id\n      }).subscribe(function (res) {\n        _this.show = false;\n\n        _this.$emit('ok', {\n          department_id: _this.department_id\n        });\n      });\n    },\n    traverseTree: function traverseTree(tree) {\n      var _this2 = this;\n\n      // 将ID转化为String UI组件需要\n      return tree.map(function (item) {\n        return item.children ? {\n          name: item.name,\n          children: _this2.traverseTree(item.children),\n          id: item.id + '',\n          count: item.count\n        } : item;\n      });\n    },\n    getDepartmentList: function getDepartmentList() {\n      var _this3 = this;\n\n      this.staffApi.getDepartmentList().subscribe(function (res) {\n        _this3.departmentOptions = json2AntDesignTreeData(res.department, {\n          keyName: 'id'\n        });\n        console.log(_this3.departmentOptions);\n      });\n    }\n  }\n};",{"version":3,"sources":["batch-import.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAgBA,SAAA,kBAAA;AACA,SAAA,QAAA,QAAA,gBAAA;AACA,SAAA,sBAAA,QAAA,0BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,gBADA;AAEA,EAAA,aAFA,2BAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,QADA;AAEA,MAAA,kBAAA,EAAA;AAFA,KAAA;AAIA,GAPA;AAQA,EAAA,OARA,qBAQA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KAAA,kBAAA,CAAA;AADA,KAAA;AAGA,GAZA;AAaA,EAAA,KAAA,EAAA;AACA,IAAA,GAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA,EAAA;AAAA;AAFA;AADA,GAbA;AAmBA,EAAA,IAnBA,kBAmBA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,iBAAA,EAAA,EAFA;AAGA,MAAA,aAAA,EAAA;AAHA,KAAA;AAKA,GAzBA;AA0BA,EAAA,OA1BA,qBA0BA;AACA,SAAA,iBAAA;AACA,GA5BA;AA6BA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,IADA,EACA;AACA,WAAA,aAAA,GAAA,IAAA,CAAA,GAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,KAAA,CAAA,IAAA,EAAA,KAAA,CAAA;AAAA,OAAA,EAAA,CAAA,CAAA;AACA,KAHA;AAIA,IAAA,IAJA,gBAIA,CAJA,EAIA;AAAA;;AACA,MAAA,CAAA,CAAA,cAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,eAAA,EAAA,KAAA,IAAA;AACA,WAAA,kBAAA,CACA,aADA,CACA;AACA,QAAA,GAAA,EAAA,KAAA,GADA;AAEA,QAAA,aAAA,EAAA,KAAA;AAFA,OADA,EAKA,SALA,CAKA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,KAAA;;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,IAAA,EAAA;AACA,UAAA,aAAA,EAAA,KAAA,CAAA;AADA,SAAA;AAGA,OAVA;AAWA,KAlBA;AAmBA,IAAA,YAnBA,wBAmBA,IAnBA,EAmBA;AAAA;;AACA;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,eAAA,IAAA,CAAA,QAAA,GACA;AACA,UAAA,IAAA,EAAA,IAAA,CAAA,IADA;AAEA,UAAA,QAAA,EAAA,MAAA,CAAA,YAAA,CAAA,IAAA,CAAA,QAAA,CAFA;AAGA,UAAA,EAAA,EAAA,IAAA,CAAA,EAAA,GAAA,EAHA;AAIA,UAAA,KAAA,EAAA,IAAA,CAAA;AAJA,SADA,GAOA,IAPA;AAQA,OATA,CAAA;AAUA,KA/BA;AAgCA,IAAA,iBAhCA,+BAgCA;AAAA;;AACA,WAAA,QAAA,CAAA,iBAAA,GAAA,SAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,iBAAA,GAAA,sBAAA,CAAA,GAAA,CAAA,UAAA,EAAA;AACA,UAAA,OAAA,EAAA;AADA,SAAA,CAAA;AAGA,QAAA,OAAA,CAAA,GAAA,CAAA,MAAA,CAAA,iBAAA;AACA,OALA;AAMA;AAvCA;AA7BA,CAAA","sourcesContent":["<template>\n  <st-modal\n    title=\"选择所属部门\"\n    @ok=\"save\"\n    :confirmLoading=\"loading.transferBrand\"\n    size=\"small\"\n    v-model=\"show\"\n  >\n    <a-tree @select=\"onSelect\" :treeData=\"departmentOptions\">\n      <template slot=\"title\" slot-scope=\"{ title }\">\n        title: {{ title }}\n      </template>\n    </a-tree>\n  </st-modal>\n</template>\n<script>\nimport { BatchImportService } from './batch-import.service'\nimport { StaffApi } from '@/api/v1/staff'\nimport { json2AntDesignTreeData } from '@/utils/json-2-tree-data'\n\nexport default {\n  name: 'BindEntityCard',\n  serviceInject() {\n    return {\n      staffApi: StaffApi,\n      batchImportService: BatchImportService\n    }\n  },\n  rxState() {\n    return {\n      loading: this.batchImportService.loading$\n    }\n  },\n  props: {\n    ids: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data() {\n    return {\n      show: false,\n      departmentOptions: [],\n      department_id: 0\n    }\n  },\n  mounted() {\n    this.getDepartmentList()\n  },\n  methods: {\n    onSelect(keys) {\n      this.department_id = keys.map(item => JSON.parse(item)['key'])[0]\n    },\n    save(e) {\n      e.preventDefault()\n      console.log('department_id', this.keys)\n      this.batchImportService\n        .transferBrand({\n          ids: this.ids,\n          department_id: this.department_id\n        })\n        .subscribe(res => {\n          this.show = false\n          this.$emit('ok', {\n            department_id: this.department_id\n          })\n        })\n    },\n    traverseTree(tree) {\n      // 将ID转化为String UI组件需要\n      return tree.map(item => {\n        return item.children\n          ? {\n              name: item.name,\n              children: this.traverseTree(item.children),\n              id: item.id + '',\n              count: item.count\n            }\n          : item\n      })\n    },\n    getDepartmentList() {\n      this.staffApi.getDepartmentList().subscribe(res => {\n        this.departmentOptions = json2AntDesignTreeData(res.department, {\n          keyName: 'id'\n        })\n        console.log(this.departmentOptions)\n      })\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/biz-modals/staff"}]}