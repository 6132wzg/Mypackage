{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/department-select.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/department-select.vue","mtime":1591147717103},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { StaffApi } from '../../api/v1/staff'\nimport { TreeSelect } from 'ant-design-vue'\nconst SHOW_PARENT = TreeSelect.SHOW_PARENT\nexport default {\n  name: 'DepartmentSelect',\n  serviceInject() {\n    return {\n      staffApi: StaffApi\n    }\n  },\n  model: {\n    prop: 'value',\n    event: 'change'\n  },\n  props: {\n    mode: {\n      type: String\n    },\n    placeholder: {\n      type: String\n    },\n    useType: {\n      type: String\n    },\n    value: {\n      type: [Number, String, Array]\n    },\n    size: {\n      type: String\n    },\n    labelInValue: {\n      type: Boolean,\n      default: false\n    },\n    treeCheckable: {\n      type: Boolean\n    }\n  },\n  data() {\n    return {\n      departmentOptions: [],\n      SHOW_PARENT\n    }\n  },\n  computed: {\n    modelValue() {\n      if (!this.value) return\n      return this.value + ''\n    }\n  },\n  methods: {\n    // 传出去转化为Number类型接口需要\n    onChange(value, lable, extra) {\n      this.$emit('changeLabel', { value, lable })\n      this.$emit('change', value)\n    },\n    traverseTree(tree) {\n      // 将ID转化为String UI组件需要\n      return tree.map(item => {\n        return item.children\n          ? {\n              name: item.name,\n              children: this.traverseTree(item.children),\n              id: item.id + '',\n              count: item.count\n            }\n          : item\n      })\n    },\n    getDepartmentList() {\n      this.staffApi.getDepartmentList().subscribe(res => {\n        this.departmentOptions = this.traverseTree(res.department)\n      })\n    },\n    init() {\n      this.getDepartmentList()\n    }\n  },\n  mounted() {\n    this.init()\n  }\n}\n",{"version":3,"sources":["department-select.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"department-select.vue","sourceRoot":"src/views/biz-components","sourcesContent":["<template>\n  <a-tree-select\n    showSearch\n    :value=\"value\"\n    :dropdownStyle=\"{ maxHeight: '400px', overflow: 'auto' }\"\n    :placeholder=\"placeholder\"\n    :style=\"{ width: size }\"\n    allowClear\n    :labelInValue=\"labelInValue\"\n    :showCheckedStrategy=\"SHOW_PARENT\"\n    :treeCheckable=\"treeCheckable\"\n    treeDefaultExpandAll\n    @change=\"onChange\"\n  >\n    <a-tree-select-node\n      v-for=\"item in departmentOptions\"\n      :value=\"item.id\"\n      :title=\"item.name\"\n      :key=\"item.id\"\n    >\n      <a-tree-select-node\n        v-for=\"item1 in item.children\"\n        :value=\"item1.id\"\n        :title=\"item1.name\"\n        :key=\"item1.id\"\n      >\n        <a-tree-select-node\n          v-for=\"item2 in item1.children\"\n          :value=\"item2.id\"\n          :title=\"item2.name\"\n          :key=\"item2.id\"\n        >\n          <a-tree-select-node\n            v-for=\"item3 in item2.children\"\n            :value=\"item3.id\"\n            :title=\"item3.name\"\n            :key=\"item3.id\"\n          >\n            <a-tree-select-node\n              v-for=\"item4 in item3.children\"\n              :value=\"item4.id\"\n              :title=\"item4.name\"\n              :key=\"item4.id\"\n            />\n            >\n          </a-tree-select-node>\n        </a-tree-select-node>\n      </a-tree-select-node>\n    </a-tree-select-node>\n  </a-tree-select>\n</template>\n\n<script>\nimport { StaffApi } from '../../api/v1/staff'\nimport { TreeSelect } from 'ant-design-vue'\nconst SHOW_PARENT = TreeSelect.SHOW_PARENT\nexport default {\n  name: 'DepartmentSelect',\n  serviceInject() {\n    return {\n      staffApi: StaffApi\n    }\n  },\n  model: {\n    prop: 'value',\n    event: 'change'\n  },\n  props: {\n    mode: {\n      type: String\n    },\n    placeholder: {\n      type: String\n    },\n    useType: {\n      type: String\n    },\n    value: {\n      type: [Number, String, Array]\n    },\n    size: {\n      type: String\n    },\n    labelInValue: {\n      type: Boolean,\n      default: false\n    },\n    treeCheckable: {\n      type: Boolean\n    }\n  },\n  data() {\n    return {\n      departmentOptions: [],\n      SHOW_PARENT\n    }\n  },\n  computed: {\n    modelValue() {\n      if (!this.value) return\n      return this.value + ''\n    }\n  },\n  methods: {\n    // 传出去转化为Number类型接口需要\n    onChange(value, lable, extra) {\n      this.$emit('changeLabel', { value, lable })\n      this.$emit('change', value)\n    },\n    traverseTree(tree) {\n      // 将ID转化为String UI组件需要\n      return tree.map(item => {\n        return item.children\n          ? {\n              name: item.name,\n              children: this.traverseTree(item.children),\n              id: item.id + '',\n              count: item.count\n            }\n          : item\n      })\n    },\n    getDepartmentList() {\n      this.staffApi.getDepartmentList().subscribe(res => {\n        this.departmentOptions = this.traverseTree(res.department)\n      })\n    },\n    init() {\n      this.getDepartmentList()\n    }\n  },\n  mounted() {\n    this.init()\n  }\n}\n</script>\n"]}]}