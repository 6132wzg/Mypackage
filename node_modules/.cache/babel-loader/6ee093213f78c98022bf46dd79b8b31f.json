{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/product/course/manage/small-course/info.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/product/course/manage/small-course/info.vue","mtime":1600926556392},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { InfoService } from \"./info.service\";\nimport { MessageService } from '@/services/message.service';\nimport { CLASS_STATUS } from '@/constants/course/small-course';\nexport default {\n  bem: {\n    b: 'page-group-course-info'\n  },\n  name: 'SmallCourseInfo',\n  serviceInject: function serviceInject() {\n    return {\n      infoService: InfoService,\n      messageService: MessageService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      groupCourseHeaderInfo: this.infoService.groupCourseHeaderInfo$\n    };\n  },\n  computed: {\n    image: function image() {\n      return this.groupCourseHeaderInfo && this.groupCourseHeaderInfo.image.image_key;\n    },\n    btnOptions: function btnOptions() {\n      return [{\n        text: '编辑',\n        click: this.onGoEdit,\n        if: this.groupCourseHeaderInfo.auth['shop:product:small_class_course|edit']\n      }, {\n        text: '去退款',\n        click: this.onGoOrder,\n        if: this.groupCourseHeaderInfo.auth['shop:product:small_class_course|refund']\n      }, {\n        text: '立即成班',\n        click: this.onBeGroup,\n        if: this.groupCourseHeaderInfo.auth['shop:product:small_class_course|finish']\n      }, {\n        text: '删除',\n        click: this.onDelGroup,\n        if: this.groupCourseHeaderInfo.auth['shop:product:small_class_course|del']\n      }, {\n        text: '发布',\n        click: this.onPublish,\n        if: this.groupCourseHeaderInfo.auth['shop:product:small_class_course|publish']\n      }];\n    }\n  },\n  data: function data() {\n    return {\n      CLASS_STATUS: CLASS_STATUS,\n      tabs: [{\n        label: '基础信息',\n        route: {\n          name: 'shop-product-course-manage-small-course-info-basic',\n          query: {\n            courseId: this.$searchQuery.courseId,\n            status: this.groupCourseHeaderInfo.class_status\n          }\n        }\n      }, {\n        label: '班级信息',\n        route: {\n          name: 'shop-product-course-manage-small-course-info-class',\n          query: {\n            courseId: this.$searchQuery.courseId,\n            status: this.groupCourseHeaderInfo.class_status\n          }\n        }\n      }]\n    };\n  },\n  methods: {\n    onGoOrder: function onGoOrder() {\n      this.$router.push({\n        path: '/shop/sold/course/list/small-course',\n        query: {\n          course_id: this.groupCourseHeaderInfo.course_id\n        }\n      });\n    },\n    onGoEdit: function onGoEdit() {\n      this.$router.push({\n        path: '/shop/product/course/manage/small-course/edit',\n        query: {\n          id: this.groupCourseHeaderInfo.course_id,\n          type: this.groupCourseHeaderInfo.small_course_type + ''\n        }\n      });\n    },\n    onBeGroup: function onBeGroup() {\n      var _this = this;\n\n      this.infoService.beGroup(this.groupCourseHeaderInfo.course_id).subscribe(function () {\n        _this.messageService.success({\n          content: '状态已变更成功'\n        });\n\n        _this.$router.reload();\n      });\n    },\n    onDelGroup: function onDelGroup() {\n      var that = this;\n      this.$confirm({\n        title: '提示',\n        content: '一旦删除则无法恢复，确认删除吗',\n        okText: '确定',\n        cancelText: '取消',\n        onOk: function onOk() {\n          that.infoService.deleteGroup(that.groupCourseHeaderInfo.course_id).subscribe(function () {\n            that.$router.push({\n              path: '/shop/product/course/manage/small-course/list'\n            });\n          });\n        },\n        onCancel: function onCancel() {}\n      });\n    },\n    onPublish: function onPublish() {\n      var _this2 = this;\n\n      this.infoService.publish(this.groupCourseHeaderInfo.course_id).subscribe(function () {\n        _this2.messageService.success({\n          content: '状态已变更成功'\n        });\n\n        _this2.$router.reload();\n      });\n    }\n  }\n};",{"version":3,"sources":["info.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <st-panel-layout class=\"page-team-info\">\n    <div :class=\"b('title-action')\">\n      <st-t3 :class=\"b('title')\">\n        {{ groupCourseHeaderInfo.course_name }}\n        <span class=\"mg-l8\">\n          (\n          {{\n            groupCourseHeaderInfo.class_status\n              | enumFilter('small_course.class_status')\n          }})\n        </span>\n      </st-t3>\n      <st-btn-actions :options=\"btnOptions\"></st-btn-actions>\n    </div>\n    <div :class=\"b('header')\">\n      <div :class=\"b('left')\" class=\"mg-r24\">\n        <div :class=\"b('tip')\">\n          <div class=\"item\">\n            <span class=\"label\">开班时间:</span>\n            <span class=\"value\">{{ groupCourseHeaderInfo.course_time }}</span>\n          </div>\n          <div class=\"item\">\n            <span class=\"label \">报名人数:</span>\n            <span class=\"value\">{{ groupCourseHeaderInfo.apply_num }}人</span>\n          </div>\n        </div>\n        <div :class=\"b('tip')\">\n          <div class=\"item\">\n            <span class=\"label\">人数限制:</span>\n            <span class=\"value\">{{ groupCourseHeaderInfo.num_limit }}</span>\n          </div>\n          <div class=\"item\">\n            <span class=\"label \">适用范围:</span>\n            <span\n              class=\"value\"\n              :key=\"item.id\"\n              v-for=\"item in groupCourseHeaderInfo.scope_application\"\n            >\n              {{ item.setting_name }}\n            </span>\n          </div>\n        </div>\n        <div :class=\"b('tip')\">\n          <div class=\"item\">\n            <span class=\"label\">负责人:</span>\n            <span class=\"value\">{{ groupCourseHeaderInfo.charge_person }}</span>\n          </div>\n          <div class=\"item\">\n            <span class=\"label \">总课时:</span>\n            <span class=\"value\">{{ groupCourseHeaderInfo.course_times }}</span>\n          </div>\n        </div>\n      </div>\n      <div :class=\"b('right')\" v-viewer=\"{ url: 'data-src', toolbar: false }\">\n        <img\n          :src=\"image | imgFilter({ w: 560, h: 320, type: 'course' })\"\n          :data-src=\"image | imgFilter({ w: 1000, type: 'course' })\"\n          :alt=\"groupCourseHeaderInfo.course_name\"\n        />\n      </div>\n    </div>\n    <st-panel app :tabs=\"tabs\">\n      <div slot=\"actions\"></div>\n      <router-view></router-view>\n    </st-panel>\n  </st-panel-layout>\n</template>\n<script>\nimport { InfoService } from './info.service'\nimport { MessageService } from '@/services/message.service'\n\nimport { CLASS_STATUS } from '@/constants/course/small-course'\nexport default {\n  bem: {\n    b: 'page-group-course-info'\n  },\n  name: 'SmallCourseInfo',\n  serviceInject() {\n    return {\n      infoService: InfoService,\n      messageService: MessageService\n    }\n  },\n  rxState() {\n    return {\n      groupCourseHeaderInfo: this.infoService.groupCourseHeaderInfo$\n    }\n  },\n  computed: {\n    image() {\n      return (\n        this.groupCourseHeaderInfo && this.groupCourseHeaderInfo.image.image_key\n      )\n    },\n    btnOptions() {\n      return [\n        {\n          text: '编辑',\n          click: this.onGoEdit,\n          if: this.groupCourseHeaderInfo.auth[\n            'shop:product:small_class_course|edit'\n          ]\n        },\n        {\n          text: '去退款',\n          click: this.onGoOrder,\n          if: this.groupCourseHeaderInfo.auth[\n            'shop:product:small_class_course|refund'\n          ]\n        },\n        {\n          text: '立即成班',\n          click: this.onBeGroup,\n          if: this.groupCourseHeaderInfo.auth[\n            'shop:product:small_class_course|finish'\n          ]\n        },\n        {\n          text: '删除',\n          click: this.onDelGroup,\n          if: this.groupCourseHeaderInfo.auth[\n            'shop:product:small_class_course|del'\n          ]\n        },\n        {\n          text: '发布',\n          click: this.onPublish,\n          if: this.groupCourseHeaderInfo.auth[\n            'shop:product:small_class_course|publish'\n          ]\n        }\n      ]\n    }\n  },\n  data() {\n    return {\n      CLASS_STATUS,\n      tabs: [\n        {\n          label: '基础信息',\n          route: {\n            name: 'shop-product-course-manage-small-course-info-basic',\n            query: {\n              courseId: this.$searchQuery.courseId,\n              status: this.groupCourseHeaderInfo.class_status\n            }\n          }\n        },\n        {\n          label: '班级信息',\n          route: {\n            name: 'shop-product-course-manage-small-course-info-class',\n            query: {\n              courseId: this.$searchQuery.courseId,\n              status: this.groupCourseHeaderInfo.class_status\n            }\n          }\n        }\n      ]\n    }\n  },\n  methods: {\n    onGoOrder() {\n      this.$router.push({\n        path: '/shop/sold/course/list/small-course',\n        query: {\n          course_id: this.groupCourseHeaderInfo.course_id\n        }\n      })\n    },\n    onGoEdit() {\n      this.$router.push({\n        path: '/shop/product/course/manage/small-course/edit',\n        query: {\n          id: this.groupCourseHeaderInfo.course_id,\n          type: this.groupCourseHeaderInfo.small_course_type + ''\n        }\n      })\n    },\n    onBeGroup() {\n      this.infoService\n        .beGroup(this.groupCourseHeaderInfo.course_id)\n        .subscribe(() => {\n          this.messageService.success({ content: '状态已变更成功' })\n          this.$router.reload()\n        })\n    },\n    onDelGroup() {\n      const that = this\n      this.$confirm({\n        title: '提示',\n        content: '一旦删除则无法恢复，确认删除吗',\n        okText: '确定',\n        cancelText: '取消',\n        onOk() {\n          that.infoService\n            .deleteGroup(that.groupCourseHeaderInfo.course_id)\n            .subscribe(() => {\n              that.$router.push({\n                path: '/shop/product/course/manage/small-course/list'\n              })\n            })\n        },\n        onCancel() {}\n      })\n    },\n    onPublish() {\n      this.infoService\n        .publish(this.groupCourseHeaderInfo.course_id)\n        .subscribe(() => {\n          this.messageService.success({ content: '状态已变更成功' })\n          this.$router.reload()\n        })\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/pages/shop/product/course/manage/small-course"}]}