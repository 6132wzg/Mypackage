{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/schedule-time-picker/schedule-time-picker.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/schedule-time-picker/schedule-time-picker.vue","mtime":1600926382177},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport item from \"./schedule-time-picker-item\";\nimport { cloneDeep } from 'lodash-es';\nexport default {\n  name: 'StScheduleTimePicker',\n  model: {\n    prop: 'values',\n    event: 'change'\n  },\n  data: function data() {\n    return {\n      isDrag: false,\n      isEnter: false,\n      checkArr: [],\n      views: []\n    };\n  },\n  components: {\n    item: item\n  },\n  props: {\n    values: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  watch: {\n    checkArr: function checkArr(n) {\n      this.views = this.rangeTime(n).views;\n      this.$emit('change', this.rangeTime(n).values);\n    }\n  },\n  methods: {\n    formatTime: function formatTime(val) {\n      return val < 10 ? \"0\".concat(val, \":00\") : \"\".concat(val, \":00\");\n    },\n    rangeTime: function rangeTime(checkArr) {\n      var values = [];\n      var start = -1;\n      var end = 0;\n      var rangeArr = [];\n      var views = [];\n      var ca = cloneDeep(checkArr);\n      ca[ca.length] = false;\n\n      for (var i = 0; i < ca.length; i++) {\n        if (ca[i] && start === -1) {\n          start = i - 1;\n        }\n\n        if (start !== -1 && ca[i]) {\n          end = i;\n        }\n\n        if (!ca[i] && start !== -1 && end) {\n          rangeArr.push({\n            start_time: \"\".concat(this.formatTime(start)),\n            end_time: \"\".concat(this.formatTime(end))\n          });\n          var view = \"#\".concat(start, \"#start---#\").concat(end, \"#end\");\n          views.push(view);\n          start = -1;\n        }\n      }\n\n      return {\n        values: rangeArr,\n        views: views\n      };\n    },\n    onMouseDown: function onMouseDown() {\n      this.isDrag = true;\n    },\n    onMouseOver: function onMouseOver() {\n      this.isDrag = false;\n    },\n    onDown: function onDown(isEnter) {\n      this.isEnter = isEnter;\n    },\n    onChange: function onChange(val) {\n      this.$set(this.checkArr, val.time, val.isActive);\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    window.addEventListener('mouseup', function () {\n      _this.isDrag = false;\n    });\n    this.$nextTick().then(function () {\n      if (!_this.values.length) return;\n      _this.views = _this.values.map(function (item) {\n        var start = +item.start_time.split(':00')[0];\n        var end = +item.end_time.split(':00')[0];\n\n        for (var i = 0; i < 25; i++) {\n          if (i > start && i <= end) {\n            _this.$set(_this.checkArr, i, true);\n          }\n        }\n\n        return \"#\".concat(start, \"#start---#\").concat(end, \"#end\");\n      });\n    });\n  }\n};",{"version":3,"sources":["schedule-time-picker.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div\n    class=\"st-schedule-time-picker\"\n    @mounseover=\"onMouseOver\"\n    @mousedown=\"onMouseDown\"\n  >\n    <template v-for=\"i in 25\">\n      <item\n        @change=\"onChange\"\n        @down=\"onDown\"\n        :checkArr=\"checkArr\"\n        :views=\"views\"\n        :isDrag=\"isDrag\"\n        :isEnter=\"isEnter\"\n        :key=\"i\"\n        :time=\"i - 1\"\n      ></item>\n    </template>\n  </div>\n</template>\n\n<script>\nimport item from './schedule-time-picker-item'\nimport { cloneDeep } from 'lodash-es'\nexport default {\n  name: 'StScheduleTimePicker',\n  model: {\n    prop: 'values',\n    event: 'change'\n  },\n  data() {\n    return {\n      isDrag: false,\n      isEnter: false,\n      checkArr: [],\n      views: []\n    }\n  },\n  components: {\n    item\n  },\n  props: {\n    values: {\n      type: Array,\n      default: () => []\n    }\n  },\n  watch: {\n    checkArr(n) {\n      this.views = this.rangeTime(n).views\n      this.$emit('change', this.rangeTime(n).values)\n    }\n  },\n  methods: {\n    formatTime(val) {\n      return val < 10 ? `0${val}:00` : `${val}:00`\n    },\n    rangeTime(checkArr) {\n      let values = []\n      let start = -1\n      let end = 0\n      let rangeArr = []\n      let views = []\n      let ca = cloneDeep(checkArr)\n      ca[ca.length] = false\n      for (let i = 0; i < ca.length; i++) {\n        if (ca[i] && start === -1) {\n          start = i - 1\n        }\n        if (start !== -1 && ca[i]) {\n          end = i\n        }\n        if (!ca[i] && start !== -1 && end) {\n          rangeArr.push({\n            start_time: `${this.formatTime(start)}`,\n            end_time: `${this.formatTime(end)}`\n          })\n          const view = `#${start}#start---#${end}#end`\n          views.push(view)\n          start = -1\n        }\n      }\n      return { values: rangeArr, views }\n    },\n    onMouseDown() {\n      this.isDrag = true\n    },\n    onMouseOver() {\n      this.isDrag = false\n    },\n    onDown(isEnter) {\n      this.isEnter = isEnter\n    },\n    onChange(val) {\n      this.$set(this.checkArr, val.time, val.isActive)\n    }\n  },\n  mounted() {\n    window.addEventListener('mouseup', () => {\n      this.isDrag = false\n    })\n    this.$nextTick().then(() => {\n      if (!this.values.length) return\n      this.views = this.values.map(item => {\n        const start = +item.start_time.split(':00')[0]\n        const end = +item.end_time.split(':00')[0]\n        for (let i = 0; i < 25; i++) {\n          if (i > start && i <= end) {\n            this.$set(this.checkArr, i, true)\n          }\n        }\n        return `#${start}#start---#${end}#end`\n      })\n    })\n  }\n}\n</script>\n"],"sourceRoot":"src/views/biz-components/schedule-time-picker"}]}