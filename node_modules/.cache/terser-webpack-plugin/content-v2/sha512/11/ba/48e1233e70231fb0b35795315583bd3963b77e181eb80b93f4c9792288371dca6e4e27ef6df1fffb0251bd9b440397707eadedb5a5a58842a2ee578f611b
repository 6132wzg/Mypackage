{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"shop-store-order-list\"],{\"0ae3\":function(e,t,r){\"use strict\";r.d(t,\"a\",(function(){return f}));var n,i,s,a,c=r(\"d225\"),o=r(\"b0b4\"),u=r(\"9ab4\"),l=r(\"0cd5\"),d=r(\"df29\"),p=r(\"c4cc\"),h=r(\"70e0\"),f=function(){function e(t){Object(c[\"a\"])(this,e),this.orderApi=t,this.list$=new d[\"d\"]([]),this.page$=new d[\"d\"]({}),this.loading$=new d[\"d\"]({})}return Object(o[\"a\"])(e,[{key:\"getList\",value:function(e){var t=this;return this.orderApi.verificationList(e).pipe(Object(p[\"a\"])((function(e){t.list$.commit((function(){return e.list})),t.page$.commit((function(){return e.page}))})))}},{key:\"getDeliverList\",value:function(e){var t=this;return this.orderApi.DeliverList(e).pipe(Object(p[\"a\"])((function(e){t.list$.commit((function(){return e.list})),t.page$.commit((function(){return e.page}))})))}},{key:\"getLogisticsList\",value:function(e){var t=this;return this.orderApi.LogisticsList(e).pipe(Object(p[\"a\"])((function(e){t.list$.commit((function(){return e.list})),t.page$.commit((function(){return e.page}))})))}},{key:\"verificationGood\",value:function(e){return this.orderApi.verificationAction(e).pipe(Object(p[\"a\"])((function(e){})))}},{key:\"beforeEach\",value:function(e,t){}}]),e}();Object(u[\"b\"])([Object(d[\"c\"])(),Object(u[\"d\"])(\"design:type\",Function),Object(u[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(n=\"undefined\"!==typeof h[\"ListParams\"]&&h[\"ListParams\"])?n:Object]),Object(u[\"d\"])(\"design:returntype\",void 0)],f.prototype,\"getList\",null),Object(u[\"b\"])([Object(d[\"c\"])(),Object(u[\"d\"])(\"design:type\",Function),Object(u[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(i=\"undefined\"!==typeof h[\"ListParams\"]&&h[\"ListParams\"])?i:Object]),Object(u[\"d\"])(\"design:returntype\",void 0)],f.prototype,\"getDeliverList\",null),Object(u[\"b\"])([Object(d[\"c\"])(),Object(u[\"d\"])(\"design:type\",Function),Object(u[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof h[\"ListParams\"]&&h[\"ListParams\"])?s:Object]),Object(u[\"d\"])(\"design:returntype\",void 0)],f.prototype,\"getLogisticsList\",null),f=Object(u[\"b\"])([Object(l[\"b\"])(),Object(u[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(a=\"undefined\"!==typeof h[\"b\"]&&h[\"b\"])?a:Object])],f)},\"23b2\":function(e,t,r){\"use strict\";r.r(t);var n,i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{class:e.basic()},[r(\"portal\",{attrs:{to:\"SHOP_STORE_ORDER_KEYWORDS_SEARCH\"}},[r(\"st-input-search\",{attrs:{placeholder:\"请输入订单编号、会员姓名或手机号查找\",maxlength:\"50\"},on:{search:function(t){return e.getListData(1)}},model:{value:e.$searchQuery.search_where,callback:function(t){e.$set(e.$searchQuery,\"search_where\",t)},expression:\"$searchQuery.search_where\"}})],1),r(\"row-table\",{attrs:{columns:e.columns,actionText:\"发货\",type:2},on:{clicks:e.sendGoods}})],1)},s=[],a=r(\"a99c\"),c=function(){return[{title:\"商品\",dataIndex:\"product\",width:330,scopedSlots:{customRender:\"product\"}},{title:\"收货人\",dataIndex:\"member_name\"},{title:\"手机号\",dataIndex:\"mobile\"},{title:\"收货地址\",dataIndex:\"receiving_address\"},{title:\"创建时间\",dataIndex:\"created_time\"},{title:\"订单编号\",dataIndex:\"id\"},{title:\"操作\",dataIndex:\"action\",width:140,scopedSlots:{customRender:\"action\"}}]},o=r(\"0ae3\"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"st-modal\",{attrs:{title:\"去发货\",size:\"small\"},on:{ok:e.onSubmit},model:{value:e.show,callback:function(t){e.show=t},expression:\"show\"}},[r(\"st-form\",{attrs:{form:e.form}},[r(\"st-form-item\",{attrs:{label:\"物流公司\",required:\"\"}},[r(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.expressCompany,expression:\"decorators.expressCompany\"}],attrs:{showSearch:\"\",allowClear:\"\",placeholder:\"请输入物流公司\",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,notFoundContent:\"无搜索结果\"},on:{search:e.onCompanySearch}},e._l(e.dataList,(function(t,n){return r(\"a-select-option\",{key:n,attrs:{value:t.company_name}},[r(\"span\",{domProps:{innerHTML:e._s((\"\"+t.company_name).replace(new RegExp(e.searchText,\"g\"),\"<span class='global-highlight-color'>\"+e.searchText+\"</span>\"))}},[e._v(\"\\n            \"+e._s(t.company_name)+\"\\n          \")])])})),1)],1),r(\"st-form-item\",{attrs:{label:\"物流单号\",required:\"\"}},[r(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:e.decorators.expressNumber,expression:\"decorators.expressNumber\"}],attrs:{placeholder:\"请输入物流单号\"}})],1)],1)],1)},l=[],d=function(e){return{expressCompany:{rules:[{required:!0,message:\"请输入物流公司\"}]},expressNumber:{rules:[{required:!0,message:\"请输入物流单号\"}]}}},p=r(\"d225\"),h=r(\"b0b4\"),f=r(\"9ab4\"),m=r(\"0cd5\"),b=r(\"df29\"),v=r(\"70e0\"),y=r(\"c4cc\"),g=function(){function e(t){Object(p[\"a\"])(this,e),this.orderApi=t,this.list$=new b[\"d\"]([])}return Object(h[\"a\"])(e,[{key:\"sendOption\",value:function(e){return this.orderApi.sendAction(e)}},{key:\"getCompanyList\",value:function(e){var t=this;return this.orderApi.getLogisticsCompany(e).pipe(Object(y[\"a\"])((function(e){t.list$.commit((function(){return e.list}))})))}}]),e}();g=Object(f[\"b\"])([Object(m[\"b\"])(),Object(f[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(n=\"undefined\"!==typeof v[\"b\"]&&v[\"b\"])?n:Object])],g);var _={name:\"modalStoreDeliverGood\",props:[\"id\"],data:function(){var e=this.$stForm.create(),t=e.decorators(d);return{show:!1,form:e,decorators:t,searchText:\"\"}},serviceInject:function(){return{deliverGoodService:g}},rxState:function(){return{dataList:this.deliverGoodService.list$}},methods:{onSubmit:function(){var e=this;this.form.validate().then((function(t){e.deliverGoodService.sendOption({express_company:t.expressCompany,express_number:t.expressNumber,id:e.id}).subscribe((function(t){e.show=!1,e.$emit(\"success\")}))}))},onCompanySearch:function(e){var t=this;this.searchText=e,\"\"===e?(this.deliverGoodService.list$.commit((function(){return[]})),this.form.resetFields([\"expressCompany\"])):this.deliverGoodService.getCompanyList({name:e}).subscribe((function(e){e.list.length||t.form.resetFields([\"expressCompany\"])}))}}},x=_,w=r(\"2877\"),O=Object(w[\"a\"])(x,u,l,!1,null,null,null),L=O.exports,j={name:\"shipments\",components:{RowTable:a[\"a\"]},bem:{basic:\"page-order-shipments\"},modals:{StoreDeliverGood:L},serviceInject:function(){return{rowTableService:o[\"a\"]}},methods:{getListData:function(e){1===e&&(this.$searchQuery.current_page=e),this.rowTableService.getDeliverList(this.$searchQuery).subscribe()},sendGoods:function(e){var t=this;this.$modalRouter.push({name:\"store-deliver-good\",props:{id:e.id},on:{success:function(e){t.getListData()}}})}},mounted:function(){this.getListData()},computed:{columns:c}},S=j,$=Object(w[\"a\"])(S,i,s,!1,null,null,null);t[\"default\"]=$.exports},\"70e0\":function(e,t,r){\"use strict\";r.d(t,\"b\",(function(){return d}));r(\"6b54\"),r(\"2397\");var n=r(\"d225\"),i=r(\"b0b4\"),s=r(\"308d\"),a=r(\"6bb5\"),c=r(\"4e2b\"),o=r(\"de46\");function u(e){return function(){var t,r=Object(a[\"a\"])(e);if(l()){var n=Object(a[\"a\"])(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return Object(s[\"a\"])(this,t)}}function l(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var d=function(e){Object(c[\"a\"])(r,e);var t=u(r);function r(){return Object(n[\"a\"])(this,r),t.apply(this,arguments)}return Object(i[\"a\"])(r,[{key:\"verificationList\",value:function(e){return this.http.get(\"/v1/store/write_off\",{query:e})}},{key:\"LogisticsList\",value:function(e){return this.http.get(\"/v1/store/logistics\",{query:e})}},{key:\"DeliverList\",value:function(e){return this.http.get(\"/v1/store/stay_deliver\",{query:e})}},{key:\"verificationAction\",value:function(e){return this.http.put(\"/v1/store/write_off/\".concat(e.id))}},{key:\"sendAction\",value:function(e){return this.http.post(\"/v1/store/send_product\",{params:e})}},{key:\"getLogisticsCompany\",value:function(e){return this.http.get(\"/v1/store/logistics_company\",{query:e})}}]),r}(o[\"a\"])},9742:function(e,t,r){\"use strict\";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",[r(\"portal\",{attrs:{to:\"SHOP_STORE_ORDER_KEYWORDS_SEARCH\"}},[r(\"st-input-search\",{attrs:{placeholder:\"请输入订单编号、会员姓名或手机号查找\",maxlength:\"50\"},on:{search:function(t){return e.getListData(1)}},model:{value:e.$searchQuery.search_where,callback:function(t){e.$set(e.$searchQuery,\"search_where\",t)},expression:\"$searchQuery.search_where\"}})],1),r(\"row-table\",{attrs:{columns:e.columns,actionText:\"核销\",type:1},on:{clicks:e.confirm}})],1)},i=[],s=r(\"a99c\"),a=function(){return[{title:\"商品\",dataIndex:\"product\",width:330,scopedSlots:{customRender:\"product\"}},{title:\"会员名称\",dataIndex:\"member_name\"},{title:\"手机号\",dataIndex:\"mobile\"},{title:\"创建时间\",dataIndex:\"created_time\"},{title:\"订单编号\",dataIndex:\"id\"},{title:\"操作\",dataIndex:\"action\",width:140,scopedSlots:{customRender:\"action\"}}]},c=r(\"0ae3\"),o=r(\"ea3e\"),u={name:\"verification\",components:{RowTable:s[\"a\"]},mixins:[o[\"a\"]],computed:{columns:a},serviceInject:function(){return{rowTableService:c[\"a\"]}},methods:{confirm:function(e){var t=this;this.rowTableService.verificationGood({id:e.id}).subscribe((function(e){t.getListData()}))},getListData:function(e){1===e&&(this.$searchQuery.current_page=e),this.rowTableService.getList(this.$searchQuery).subscribe()}},mounted:function(){this.getListData()}},l=u,d=r(\"2877\"),p=Object(d[\"a\"])(l,n,i,!1,null,null,null);t[\"default\"]=p.exports},a99c:function(e,t,r){\"use strict\";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",{class:e.basic()},[r(\"st-table\",{class:e.basic(\"table\"),attrs:{page:e.page,rowKey:\"id\",loading:1===e.type?e.loading.getList:2===e.type?e.loading.getDeliverList:e.loading.getLogisticsList,columns:e.columns,dataSource:e.tableData},on:{change:e.onTableChange},scopedSlots:e._u([{key:\"product\",fn:function(t,n){return r(\"ul\",{class:e.basic(\"sku\")},e._l(n.product,(function(t,n){return r(\"li\",{key:n},[r(\"span\",{class:e.basic(\"product-name\")},[e._v(e._s(t.product_name))]),r(\"span\",{class:e.basic(\"product-count\")},[e._v(\"x\"+e._s(t.product_count))]),r(\"span\",{class:e.basic(\"unit-price\")},[e._v(\"￥\"+e._s(t.unit_price))])])})),0)}},{key:\"action\",fn:function(t,n){return 3!==e.type?r(\"div\",{},[r(\"st-table-actions\",[1===e.type&&n.auth[\"shop:cloud_store:order|write_off\"]?r(\"a\",{on:{click:function(t){return e.clickFn(n)}}},[e._v(\"\\n          \"+e._s(e.actionText)+\"\\n        \")]):e._e(),2===e.type&&n.auth[\"shop:cloud_store:order|deliver_goods\"]?r(\"a\",{on:{click:function(t){return e.clickFn(n)}}},[e._v(\"\\n          \"+e._s(e.actionText)+\"\\n        \")]):e._e()])],1):e._e()}}],null,!0)})],1)},i=[],s=(r(\"c5f6\"),r(\"ea3e\")),a=r(\"0ae3\"),c={name:\"rowtable\",mixins:[s[\"a\"]],serviceInject:function(){return{rowTableService:a[\"a\"]}},rxState:function(){return{tableData:this.rowTableService.list$,page:this.rowTableService.page$,loading:this.rowTableService.loading$}},bem:{basic:\"page-order-row-table\"},data:function(){return{list:[]}},props:{listData:{type:Array},columns:{type:Array},actionText:{type:String},type:{type:Number,default:1}},created:function(){this.tableData=[]},methods:{clickFn:function(e){this.$emit(\"clicks\",e)},onTableChange:function(e){switch(this.$searchQuery.current_page=e.current,this.$searchQuery.size=e.pageSize,this.type){case 1:this.rowTableService.getList(this.$searchQuery).subscribe();break;case 2:this.rowTableService.getDeliverList(this.$searchQuery).subscribe();break;case 3:this.rowTableService.getLogisticsList(this.$searchQuery).subscribe();break}}}},o=c,u=r(\"2877\"),l=Object(u[\"a\"])(o,n,i,!1,null,null,null);t[\"a\"]=l.exports},ce776:function(e,t,r){\"use strict\";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",[r(\"portal\",{attrs:{to:\"SHOP_STORE_ORDER_KEYWORDS_SEARCH\"}},[r(\"st-input-search\",{attrs:{placeholder:\"请输入订单编号、会员姓名或手机号查找\",maxlength:\"50\"},on:{search:function(t){return e.getListData(1)}},model:{value:e.$searchQuery.search_where,callback:function(t){e.$set(e.$searchQuery,\"search_where\",t)},expression:\"$searchQuery.search_where\"}})],1),r(\"row-table\",{attrs:{columns:e.columns,type:3}})],1)},i=[],s=r(\"a99c\"),a=function(){return[{title:\"商品\",dataIndex:\"product\",width:330,scopedSlots:{customRender:\"product\"}},{title:\"收货人\",dataIndex:\"member_name\"},{title:\"手机号\",dataIndex:\"mobile\"},{title:\"收货地址\",dataIndex:\"receiving_address\"},{title:\"创建时间\",dataIndex:\"created_time\"},{title:\"订单编号\",dataIndex:\"id\"},{title:\"快递公司\",dataIndex:\"express_company\"},{title:\"快递单号\",dataIndex:\"express_number\"}]},c=r(\"0ae3\"),o={name:\"signin\",components:{RowTable:s[\"a\"]},serviceInject:function(){return{rowTableService:c[\"a\"]}},methods:{getListData:function(e){1===e&&(this.$searchQuery.current_page=e),this.rowTableService.getLogisticsList(this.$searchQuery).subscribe()}},mounted:function(){this.getListData()},computed:{columns:a}},u=o,l=r(\"2877\"),d=Object(l[\"a\"])(u,n,i,!1,null,null,null);t[\"default\"]=d.exports}}]);","extractedComments":[]}