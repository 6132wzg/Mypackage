(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["brand-setting-general-course"],{"349f":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));n("6b54"),n("2397");var s=n("d225"),i=n("b0b4"),r=n("308d"),a=n("6bb5"),c=n("4e2b"),o=n("de46");function l(e){return function(){var t,n=Object(a["a"])(e);if(u()){var s=Object(a["a"])(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return Object(r["a"])(this,t)}}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var _="/v1/setting/course/team/reserve",v=function(e){Object(c["a"])(n,e);var t=l(n);function n(){return Object(s["a"])(this,n),t.apply(this,arguments)}return Object(i["a"])(n,[{key:"getInfo",value:function(){return this.http.get(_)}},{key:"update",value:function(e){return this.http.put(_,{params:e})}}]),n}(o["a"])},4406:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));n("6b54"),n("2397");var s=n("d225"),i=n("b0b4"),r=n("308d"),a=n("6bb5"),c=n("4e2b"),o=n("de46");function l(e){return function(){var t,n=Object(a["a"])(e);if(u()){var s=Object(a["a"])(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return Object(r["a"])(this,t)}}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var _="/v1/setting/course/pricing",v=function(e){Object(c["a"])(n,e);var t=l(n);function n(){return Object(s["a"])(this,n),t.apply(this,arguments)}return Object(i["a"])(n,[{key:"getInfo",value:function(){return this.http.get(_)}},{key:"update",value:function(e){return this.http.put(_,{params:e})}},{key:"del",value:function(){return this.http.delete("/v1/setting/course/pricing")}}]),n}(o["a"])},"47e9":function(e,t,n){"use strict";n.r(t),n.d(t,"SmallCourseService",(function(){return f}));var s,i,r=n("d225"),a=n("b0b4"),c=n("9ab4"),o=n("0cd5"),l=n("df29"),u=n("c4cc"),_=n("a7a8"),v=n("2cbb"),f=function(){function e(t,n){Object(r["a"])(this,e),this.reserveSettingApi=t,this.authService=n,this.reserveInfo$=new l["d"]({}),this.loading$=new l["d"]({}),this.auth$=this.authService.authMap$({edit:"brand:setting:small_course_reserve_setting|edit",get:"brand:setting:small_course_reserve_setting|get"})}return Object(a["a"])(e,[{key:"getInfo",value:function(){var e=this;return this.reserveSettingApi.getInfo().pipe(Object(u["a"])((function(t){e.reserveInfo$.commit((function(){return t.info}))})))}},{key:"beforeEach",value:function(e,t){return this.getInfo()}}]),e}();f=Object(c["b"])([Object(o["b"])(),Object(c["d"])("design:paramtypes",["function"===typeof(s="undefined"!==typeof _["a"]&&_["a"])?s:Object,"function"===typeof(i="undefined"!==typeof v["a"]&&v["a"])?i:Object])],f)},"638c":function(e,t,n){"use strict";n.r(t);var s,i,r,a,c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"min-height":"70vh"}},[e.auth.priceGet?n("section",[n("a-row",[n("a-col",{attrs:{span:16}},[n("st-t2",[e._v("私教课程定价设置")])],1),n("a-col",{staticClass:"ta-r",attrs:{span:8}},[e.auth.priceEdit?n("st-info-action",{attrs:{icon:"edit",text:"编辑"},on:{click:e.onEditPricingSetting}}):e._e()],1)],1),n("st-t4",{staticClass:"mg-t24"},[e._v("私教课程定价设置")]),1===e.pricingInfo.price_model?n("div",{staticClass:"st-des"},[e._v("\n      "+e._s(e.$c("coach"))+"统一定价（每一个私教课程，所授课的"+e._s(e.$c("coach"))+"的课程售出价格一致）\n    ")]):e._e(),2===e.pricingInfo.price_model?n("div",{staticClass:"st-des"},[e._v("\n      "+e._s(e.$c("coach"))+"分级定价（每一个私教课程，按"+e._s(e.$c("coach"))+"等级进行差异化定价）\n    ")]):e._e(),n("st-hr"),n("st-t4",[e._v("私教课程售卖模式")]),1===e.pricingInfo.sale_model?n("div",{staticClass:"st-des"},[e._v("\n      "+e._s(e.$c("coach"))+"谈单模式（ 1.设置课程最低课时费和最高课时费\n      2.超过售卖价格范围时，不支持购买 3.不支持在小程序直接购买私教课 ）\n    ")]):e._e(),2===e.pricingInfo.sale_model?n("div",{staticClass:"st-des"},[e._v("\n      统一标价模式（ 1.设置课程的固定课时费 2. 支持用户在小程序在线购买 ）\n    ")]):e._e(),n("st-hr")],1):e._e(),n("section",[n("a-row",[n("a-col",{attrs:{span:16}},[n("st-t2",[e._v("私教课程预约设置")])],1),n("a-col",{staticClass:"ta-r",attrs:{span:8}},[e.auth.reserveEdit?n("st-info-action",{directives:[{name:"modal-link",rawName:"v-modal-link",value:{name:"brand-setting-personal-reserve",on:{change:e.onChange}},expression:"{\n            name: 'brand-setting-personal-reserve',\n            on: {\n              change: onChange\n            }\n          }"}],attrs:{icon:"edit",text:"编辑"}}):e._e()],1)],1),n("st-t4",{staticClass:"mg-t24"},[e._v("预约范围")]),n("div",{staticClass:"st-des"},[e._v("\n      用户可预约"+e._s(e._f("enumFilter")(e.reserveInfo.reserve_start,"setting.reserve_start"))+"\n      到"+e._s(e._f("enumFilter")(e.reserveInfo.reserve_range,"setting.reserve_range"))+"以内的私教课程，员工代预约不受此限制\n    ")]),n("st-hr"),n("st-t4",[e._v("取消预约设置")]),n("div",{staticClass:"st-des"},[e._v("\n      允许用户在私教课程开始前"+e._s(e._f("enumFilter")(e.reserveInfo.cancel_reserve,"setting.cancel_reserve"))+"取消预约，员工代取消不受此限制\n    ")]),n("st-hr"),n("st-t4",[e._v("预约提醒")]),n("div",{staticClass:"st-des"},[e._v("\n      在课程开始前"+e._s(e._f("enumFilter")(e.reserveInfo.reserve_remind,"setting.reserve_remind"))+"提醒用户上课\n    ")]),n("st-hr"),n("st-t4",[e._v("签到方式")]),n("div",{staticClass:"st-des"},[e._v("\n      "+e._s(e.reserveInfo.is_sign?"支持":"不支持")+"用户自主签到\n    ")]),n("st-hr"),n("st-t4",[e._v("签到时间")]),n("div",{staticClass:"st-des"},[e._v("\n      开课后"+e._s(e._f("enumFilter")(e.reserveInfo.sign_time,"setting.sign_time"))+"允许签到\n    ")]),n("st-hr"),n("st-t4",[e._v("自动签到")]),n("div",{staticClass:"st-des"},[e._v("\n      "+e._s(e.reserveInfo.is_auto_sign?"支持":"不支持")+"系统自动签到\n    ")]),n("st-hr"),n("st-t4",[e._v("约课间隔时间")]),n("div",{staticClass:"st-des"},[e._v("\n      "+e._s(e._f("enumFilter")(e.reserveInfo.reserve_interval_time,"personal_course.schedule_interval"))+"\n    ")])],1)])},o=[],l=n("e69b"),u=n("7718"),_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("st-modal",{staticClass:"modal-price-model-setting",attrs:{title:"私教课程定价设置",bodyStyle:{padding:0},confirmLoading:e.loading.update},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("a-alert",{attrs:{slot:"prepend",message:"此操作将影响所有私教课程的定价，无法撤回，请谨慎操作",banner:""},slot:"prepend"}),n("st-form",[n("div",[n("st-t4",[e._v("私教课程定价模式")]),e.info.price_model===e.PERSONAL.PRICEMODEL_1?n("div",{staticClass:"mg-t4"},[e._v("\n        "+e._s(e.$c("coach"))+"统一定价\n        "),n("span",{staticClass:"st-des"},[e._v("\n          （每一个私教课程，所授课的"+e._s(e.$c("coach"))+"的课程售出价格一致）\n        ")])]):e._e(),e.info.price_model===e.PERSONAL.PRICEMODEL_2?n("div",{staticClass:"mg-t4"},[e._v("\n        "+e._s(e.$c("coach"))+"分级定价\n        "),n("span",{staticClass:"st-des"},[e._v("\n          （每一个私教课程，按"+e._s(e.$c("coach"))+"等级进行差异化定价）\n        ")])]):e._e(),n("st-t4",{staticClass:"mg-t24"},[e._v("私教课程售卖模式")]),n("a-radio-group",{staticClass:"full-width",attrs:{value:e.info.sale_model},on:{change:e.onSaleModelChange}},e._l(e.saleModels,(function(t,s){return n("st-container",{key:s,staticClass:"mg-t8"},[n("a-row",{staticClass:"align-items-center"},[n("a-col",{attrs:{span:6}},[n("a-radio",{attrs:{value:+t.value}},[e._v(e._s(t.label))])],1),n("a-col",{staticClass:"st-des",attrs:{span:18}},[+t.value===e.PERSONAL.SALEMODEL_1?n("div",[n("div",[e._v("1. 设置课程最低课时费和最高课时费")]),n("div",[e._v("2. 超过售卖价格范围时，不支持购买")]),n("div",[e._v("3. 不支持在小程序直接购买私教课")])]):e._e(),+t.value===e.PERSONAL.SALEMODEL_2?n("div",[n("div",[e._v("1. 设置课程的固定课时费")]),n("div",[e._v("2. 支持用户在小程序在线购买")])]):e._e()])],1)],1)})),1)],1),e.isShowPriceSet?n("div",[n("st-t4",[e._v("私教课程定价设置")]),n("st-container",{staticClass:"bg-gray mg-t8",attrs:{type:"2"}},[e.info.sale_model===e.PERSONAL.SALEMODEL_2?n("div",[n("div",{staticClass:"st-des"},[e._v("\n            切换"+e._s(e.$c("coach"))+"谈单至统一标价，从目前私教课程的范围定价中选择最低价或最高价设置为私教课程的标准定价\n          ")]),n("st-form-item",{staticClass:"mg-b0 mg-t8",attrs:{labelWidth:"70px",label:"课程最低价"}},[n("a-radio-group",{attrs:{value:e.info.standard_price},on:{change:e.onStandardPriceChange}},e._l(e.standardPrices,(function(t,s){return n("a-radio",{key:+s,attrs:{value:+t.value}},[e._v("\n                "+e._s(t.label)+"\n              ")])})),1)],1)],1):e._e(),e.info.sale_model===e.PERSONAL.SALEMODEL_1?n("div",[n("div",{staticClass:"st-des"},[e._v("\n            切换统一标价至"+e._s(e.$c("coach"))+"谈单，需要设置私教课程的范围定价，设置后遇到小数位，则四舍五入，保留一位小数\n          ")]),n("st-form-item",{staticClass:"mg-b0",attrs:{labelWidth:"70px",label:"课程最低价"}},[e._v("\n            私教课程当前定价下调\n            "),n("st-input-number",{staticClass:"mg-l16",staticStyle:{width:"120px"},model:{value:e.info.min_price_percent,callback:function(t){e.$set(e.info,"min_price_percent",t)},expression:"info.min_price_percent"}},[n("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("%")])])],1),n("div",{staticClass:"mg-t8 color-danger"},[e._v("\n            最低价 = 私教课程当前定价 -（私教课程当前定价*设置的下调百分比）\n          ")]),n("st-form-item",{staticClass:"mg-b0 mg-t24",attrs:{labelWidth:"70px",label:"课程最高价"}},[e._v("\n            私教课程当前定价上调\n            "),n("st-input-number",{staticClass:"mg-l16",staticStyle:{width:"120px"},model:{value:e.info.max_price_percent,callback:function(t){e.$set(e.info,"max_price_percent",t)},expression:"info.max_price_percent"}},[n("span",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[e._v("%")])])],1),n("div",{staticClass:"mg-t8 color-danger"},[e._v("\n            最高价 = 私教课程当前定价+（私教课程当前定价*设置的上调百分比）\n          ")])],1):e._e()])],1):e._e()]),n("footer",{attrs:{slot:"footer"},slot:"footer"},[n("st-button",{on:{click:function(t){e.show=!1}}},[e._v("取消")]),n("a-popconfirm",{attrs:{placement:"topRight"},on:{confirm:e.save},model:{value:e.isShowConfirm,callback:function(t){e.isShowConfirm=t},expression:"isShowConfirm"}},[n("template",{slot:"title"},[n("p",[e._v("此操作将影响所有私教课程的定价，无法撤回，确认是否修改")])]),n("st-button",{attrs:{type:"primary"},on:{click:e.showConfirm}},[e._v("\n        确认\n      ")])],2)],1)],1)},v=[],f=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),d=n("d225"),m=n("b0b4"),p=n("9ab4"),h=n("2138"),g=n("0cd5"),b=n("df29"),S=n("4406"),O=function(){function e(t,n){Object(d["a"])(this,e),this.coursePricingApi=t,this.userService=n,this.loading$=new b["d"]({}),this.standardPrices$=this.userService.getOptions$("setting.standard_price"),this.saleModels$=this.userService.getOptions$("personal_course.sale_model")}return Object(m["a"])(e,[{key:"getInfo",value:function(){return this.coursePricingApi.getInfo()}},{key:"del",value:function(){return this.coursePricingApi.del()}},{key:"update",value:function(e){return this.coursePricingApi.update(e)}}]),e}();function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(f["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object(p["b"])([Object(b["c"])(),Object(p["d"])("design:type",Function),Object(p["d"])("design:paramtypes",["function"===typeof(s="undefined"!==typeof S["UpdateInput"]&&S["UpdateInput"])?s:Object]),Object(p["d"])("design:returntype",void 0)],O.prototype,"update",null),O=Object(p["b"])([Object(g["b"])(),Object(p["d"])("design:paramtypes",["function"===typeof(i="undefined"!==typeof S["a"]&&S["a"])?i:Object,"function"===typeof(r="undefined"!==typeof h["a"]&&h["a"])?r:Object])],O),function(e){e[e["PRICEMODEL_1"]=1]="PRICEMODEL_1",e[e["PRICEMODEL_2"]=2]="PRICEMODEL_2",e[e["SALEMODEL_1"]=1]="SALEMODEL_1",e[e["SALEMODEL_2"]=2]="SALEMODEL_2"}(a||(a={}));var j,$,k,I={serviceInject:function(){return{messageService:l["a"],settingService:O}},rxState:function(){return{loading:this.settingService.loading$,standardPrices:this.settingService.standardPrices$,saleModels:this.settingService.saleModels$}},data:function(){return{PERSONAL:a,show:!1,form:this.$form.createForm(this),info:{},isShowPriceSet:!1,isShowConfirm:!1}},created:function(){var e=this;this.settingService.getInfo().subscribe((function(t){e.info=t}))},methods:{showConfirm:function(){this.isShowConfirm=!0},onSaleModelChange:function(e){var t=e.target.value;this.info.sale_model=t,this.isShowPriceSet=t!==this.info.origin_sale_model},onStandardPriceChange:function(e){this.info.standard_price=e.target.value},cancel:function(){this.show=!1},save:function(){var e=this;this.settingService.update(C({},this.info)).subscribe((function(){e.messageService.success({content:"提交成功"}),e.show=!1,e.$emit("change")}))}}},x=I,E=n("2877"),w=Object(E["a"])(x,_,v,!1,null,null,null),R=w.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("st-modal",{staticClass:"modal-personal-order-setting",attrs:{title:"私教课预约设置",confirmLoading:e.loading.update},on:{ok:e.save,cancel:e.cancel},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("div",[n("st-form",{attrs:{form:e.form,labelWidth:"84px"}},[n("st-form-item",{attrs:{label:"预约范围"}},[n("div",[n("span",[e._v("用户可预约")]),n("a-select",{staticClass:"mg-l8",staticStyle:{width:"100px"},model:{value:e.info.reserve_start,callback:function(t){e.$set(e.info,"reserve_start",t)},expression:"info.reserve_start"}},e._l(e.reserveStarts,(function(t,s){return n("a-select-option",{key:+s,attrs:{value:+t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1),n("span",{staticClass:"mg-l8"},[e._v("到")]),n("a-select",{staticClass:"mg-l8",staticStyle:{width:"70px"},model:{value:e.info.reserve_range,callback:function(t){e.$set(e.info,"reserve_range",t)},expression:"info.reserve_range"}},e._l(e.reserveRanges,(function(t,s){return n("a-select-option",{key:+s,attrs:{value:+t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1),n("span",{staticClass:"mg-l8"},[e._v("以内的私教课程，员工代预约不受此限制")])],1)]),n("st-form-item",{attrs:{label:"取消预约"}},[n("div",[n("span",[e._v("允许用户在私教课程开始前")]),n("a-select",{staticClass:"mg-l8",staticStyle:{width:"100px"},model:{value:e.info.cancel_reserve,callback:function(t){e.$set(e.info,"cancel_reserve",t)},expression:"info.cancel_reserve"}},e._l(e.cancelReserves,(function(t,s){return n("a-select-option",{key:+s,attrs:{value:+t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1),n("span",{staticClass:"mg-l8"},[e._v("取消预约，员工代取消不受此限制")])],1),n("div",{staticClass:"st-des"},[e._v("\n          （建议取消预约时间 >=\n          提前预约时间，否则会造成取消课程预约后，其它用户无法再进行预约）\n        ")])]),n("st-form-item",{attrs:{label:"签到方式"}},[n("a-checkbox",{attrs:{checked:!!e.info.is_sign},on:{change:function(t){return e.onCheckboxChange("is_sign")}}},[e._v("\n          支持用户自主签到\n        ")])],1),n("st-form-item",{attrs:{label:"签到时间"}},[n("div",[n("span",[e._v("开课")]),n("a-select",{staticClass:"mg-l8",staticStyle:{width:"120px"},model:{value:e.info.sign_time,callback:function(t){e.$set(e.info,"sign_time",t)},expression:"info.sign_time"}},e._l(e.signTimes,(function(t,s){return n("a-select-option",{key:+s,attrs:{value:+t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1),n("span",{staticClass:"mg-l8"},[e._v("允许签到，员工代签到不受此限制")])],1)]),n("st-form-item",{attrs:{label:"自动签到"}},[n("div",[n("a-checkbox",{attrs:{checked:!!e.info.is_auto_sign},on:{change:function(t){return e.onCheckboxChange("is_auto_sign")}}},[e._v("\n            支持系统自动签到，在\n          ")]),n("a-select",{staticClass:"mg-l8",staticStyle:{width:"84px"},model:{value:e.info.auto_sign_limit,callback:function(t){e.$set(e.info,"auto_sign_limit",t)},expression:"info.auto_sign_limit"}},e._l(e.autoSignLimits,(function(t,s){return n("a-select-option",{key:+s,attrs:{value:+t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1),n("span",{staticClass:"mg-l8"},[e._v("后系统自动将课程进行签到")])],1),n("div",{staticClass:"st-des"},[e._v("\n          （凌晨03:00进行检查未签到课程，统一进行更新）\n        ")])]),n("st-form-item",{staticClass:"mg-b0",attrs:{label:"约课间隔时间"}},[n("div",[n("a-select",{staticClass:"mg-l8",staticStyle:{width:"104px"},attrs:{options:e.scheduleInterval},model:{value:e.info.reserve_interval_time,callback:function(t){e.$set(e.info,"reserve_interval_time",t)},expression:"info.reserve_interval_time"}})],1),n("div",{staticClass:"st-des"},[e._v("\n          （修改后小程序私教课可选择时间间隔随之调整）\n        ")])])],1)],1)])},A=[],D=n("8017"),L=function(){function e(t,n){Object(d["a"])(this,e),this.reserveSettingApi=t,this.userService=n,this.loading$=new b["d"]({}),this.reserveStarts$=this.userService.getOptions$("setting.reserve_start"),this.reserveRanges$=this.userService.getOptions$("setting.reserve_range"),this.cancelReserves$=this.userService.getOptions$("setting.cancel_reserve"),this.signTimes$=this.userService.getOptions$("setting.sign_time"),this.autoSignLimits$=this.userService.getOptions$("setting.auto_sign_limit"),this.scheduleInterval$=this.userService.getOptions$("personal_course.schedule_interval"),this.reserveReminds$=this.userService.getOptions$("setting.reserve_remind")}return Object(m["a"])(e,[{key:"getInfo",value:function(){return this.reserveSettingApi.getInfo()}},{key:"update",value:function(e){return this.reserveSettingApi.update(e)}}]),e}();function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){Object(f["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object(p["b"])([Object(b["c"])(),Object(p["d"])("design:type",Function),Object(p["d"])("design:paramtypes",["function"===typeof(j="undefined"!==typeof D["UpdateInput"]&&D["UpdateInput"])?j:Object]),Object(p["d"])("design:returntype",void 0)],L.prototype,"update",null),L=Object(p["b"])([Object(g["b"])(),Object(p["d"])("design:paramtypes",["function"===typeof($="undefined"!==typeof D["a"]&&D["a"])?$:Object,"function"===typeof(k="undefined"!==typeof h["a"]&&h["a"])?k:Object])],L);var M={serviceInject:function(){return{messageService:l["a"],settingService:L}},rxState:function(){return{loading:this.settingService.loading$,reserveStarts:this.settingService.reserveStarts$,reserveRanges:this.settingService.reserveRanges$,cancelReserves:this.settingService.cancelReserves$,signTimes:this.settingService.signTimes$,autoSignLimits:this.settingService.autoSignLimits$,scheduleInterval:this.settingService.scheduleInterval$,reserveReminds:this.settingService.reserveReminds$}},data:function(){return{show:!1,form:this.$form.createForm(this),info:{}}},created:function(){var e=this;this.settingService.getInfo().subscribe((function(t){e.info=t.info}))},methods:{onCheckboxChange:function(e){this.info[e]=+!this.info[e]},cancel:function(){this.show=!1},save:function(){var e=this;this.settingService.update(F({},this.info)).subscribe((function(){e.messageService.success({content:"提交成功"}),e.show=!1,e.$emit("change")}))}}},U=M,T=Object(E["a"])(U,P,A,!1,null,null,null),G=T.exports,H={serviceInject:function(){return{personalService:u["PersonalService"]}},rxState:function(){var e=this.personalService;return{loading:e.loading$,resData:e.resData$,auth:e.auth$}},modals:{BrandSettingPersonalPriceModel:R,BrandSettingPersonalReserve:G},computed:{pricingInfo:function(){return this.resData[0]},reserveInfo:function(){return this.resData[1].info}},methods:{onChange:function(){this.$router.push({})},onEditPricingSetting:function(){var e=this.pricingInfo.is_changed,t=this,n=this.pricingInfo.changed_desc;e?this.$confirm({title:"",content:n,okText:"保持切换",cancelText:"放弃切换",onOk:function(){},onCancel:function(){t.personalService.del().subscribe(t.onChange)}}):this.showPricingSettingModal()},showPricingSettingModal:function(){this.$modalRouter.push({name:"brand-setting-personal-price-model",on:{change:this.onChange}})}}},B=H,K=Object(E["a"])(B,c,o,!1,null,null,null);t["default"]=K.exports},7718:function(e,t,n){"use strict";n.r(t),n.d(t,"PersonalService",(function(){return p}));var s,i,r,a=n("d225"),c=n("b0b4"),o=n("9ab4"),l=n("0cd5"),u=n("df29"),_=n("c4cc"),v=n("8017"),f=n("4406"),d=n("2cbb"),m=n("54da"),p=function(){function e(t,n,s){Object(a["a"])(this,e),this.reserveSettingApi=t,this.coursePricingApi=n,this.authService=s,this.resData$=new u["d"]({}),this.loading$=new u["d"]({}),this.auth$=this.authService.authMap$({priceGet:"brand:setting:course_price_reserve_setting|tab",priceEdit:"brand:setting:personal_course_price_setting|edit",reserveEdit:"brand:setting:personal_course_reserve_setting|edit"})}return Object(c["a"])(e,[{key:"getPriceSettingInfo",value:function(){return this.coursePricingApi.getInfo()}},{key:"getReserveSettingInfo",value:function(){return this.reserveSettingApi.getInfo()}},{key:"del",value:function(){return this.coursePricingApi.del()}},{key:"init",value:function(){var e=this;return Object(m["a"])(this.getPriceSettingInfo(),this.getReserveSettingInfo()).pipe(Object(_["a"])((function(t){e.resData$.commit((function(){return t}))})))}},{key:"beforeEach",value:function(e,t){return this.init()}}]),e}();p=Object(o["b"])([Object(l["b"])(),Object(o["d"])("design:paramtypes",["function"===typeof(s="undefined"!==typeof v["a"]&&v["a"])?s:Object,"function"===typeof(i="undefined"!==typeof f["a"]&&f["a"])?i:Object,"function"===typeof(r="undefined"!==typeof d["a"]&&d["a"])?r:Object])],p)},8017:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));n("6b54"),n("2397");var s=n("d225"),i=n("b0b4"),r=n("308d"),a=n("6bb5"),c=n("4e2b"),o=n("de46");function l(e){return function(){var t,n=Object(a["a"])(e);if(u()){var s=Object(a["a"])(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return Object(r["a"])(this,t)}}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var _="/v1/setting/course/personal/reserve",v=function(e){Object(c["a"])(n,e);var t=l(n);function n(){return Object(s["a"])(this,n),t.apply(this,arguments)}return Object(i["a"])(n,[{key:"getInfo",value:function(){return this.http.get(_)}},{key:"update",value:function(e){return this.http.put(_,{params:e})}}]),n}(o["a"])},"96ca":function(e,t,n){"use strict";n.r(t),n.d(t,"TeamService",(function(){return f}));var s,i,r=n("d225"),a=n("b0b4"),c=n("9ab4"),o=n("0cd5"),l=n("df29"),u=n("c4cc"),_=n("349f"),v=n("2cbb"),f=function(){function e(t,n){Object(r["a"])(this,e),this.reserveSettingApi=t,this.authService=n,this.resData$=new l["d"]({}),this.loading$=new l["d"]({}),this.auth$=this.authService.authMap$({get:"brand:setting:course_price_reserve_setting|tab",edit:"brand:setting:team_course_reserve_setting|edit"})}return Object(a["a"])(e,[{key:"getInfo",value:function(){var e=this;return this.reserveSettingApi.getInfo().pipe(Object(u["a"])((function(t){e.resData$.commit((function(){return t}))})))}},{key:"beforeEach",value:function(){return this.getInfo()}}]),e}();Object(c["b"])([Object(l["c"])(),Object(c["d"])("design:type",Function),Object(c["d"])("design:paramtypes",[]),Object(c["d"])("design:returntype",void 0)],f.prototype,"getInfo",null),f=Object(c["b"])([Object(o["b"])(),Object(c["d"])("design:paramtypes",["function"===typeof(s="undefined"!==typeof _["a"]&&_["a"])?s:Object,"function"===typeof(i="undefined"!==typeof v["a"]&&v["a"])?i:Object])],f)},"9d06":function(e,t,n){"use strict";n.r(t);var s,i,r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.auth.get?n("div",[n("section",[n("a-row",[n("a-col",{attrs:{span:16}},[n("st-t2",[e._v(e._s(e.$c("small_course"))+"预约设置")])],1),n("a-col",{staticClass:"ta-r",attrs:{span:8}},[e.auth.edit?n("st-info-action",{directives:[{name:"modal-link",rawName:"v-modal-link",value:{name:"brand-setting-small-course-reserve",on:{change:e.onChange}},expression:"{\n            name: 'brand-setting-small-course-reserve',\n            on: {\n              change: onChange\n            }\n          }"}],attrs:{icon:"edit",text:"编辑"}}):e._e()],1)],1),n("st-t4",{staticClass:"mg-t24"},[e._v("预约范围")]),n("div",{staticClass:"st-des"},[e._v("\n      用户可预约"+e._s(e._f("enumFilter")(e.reserveInfo.reserve_start,"small_course.reserve_start"))+"\n      到"+e._s(e._f("enumFilter")(e.reserveInfo.reserve_range,"small_course.reserve_range"))+"以内的课程，员工代预约不受此限制\n    ")]),n("st-hr"),n("st-t4",[e._v("取消预约设置")]),n("div",{staticClass:"st-des"},[e._v("\n      允许用户在课程开始前"+e._s(e._f("enumFilter")(e.reserveInfo.cancel_reserve,"small_course.cancel_reserve"))+"取消预约，员工代取消不受此限制\n    ")]),n("st-hr"),n("st-t4",[e._v("预约提醒")]),n("div",{staticClass:"st-des"},[e._v("\n      在课程开始前"+e._s(e._f("enumFilter")(e.reserveInfo.reserve_remind,"small_course.reserve_remind"))+"提醒用户上课\n    ")]),n("st-hr"),n("st-t4",[e._v("签到方式")]),n("div",{staticClass:"st-des"},[e._v("\n      "+e._s(e.reserveInfo.is_sign?e.IS_SIGN.YES:e.IS_SIGN.NO)+"用户自主签到\n    ")]),n("st-hr"),n("st-t4",[e._v("签到条件")]),n("div",{staticClass:"st-des"},[e._v("\n      当天"+e._s(e.reserveInfo.is_sign_entrance?e.IS_SIGN_ENTRANCE.YES:e.IS_SIGN_ENTRANCE.NO)+"入场记录(PC不受此条件限制)\n    ")]),n("st-hr"),n("st-t4",[e._v("签到时间")]),n("div",{staticClass:"st-des"},[e._v("\n      开课"+e._s(e._f("enumFilter")(e.reserveInfo.sign_time,"small_course.sign_time"))+"允许签到\n    ")]),n("st-hr"),n("st-t4",[e._v("旷课判断")]),n("div",{staticClass:"st-des"},[e._v("\n      课程结束后"+e._s(e._f("enumFilter")(e.reserveInfo.absenteeism_limit,"small_course.absenteeism_limit"))+"内,未签到\n    ")]),n("st-hr"),n("st-t4",[e._v("上课通知")]),n("div",{staticClass:"st-des"},[e._v("\n      课程开始前"+e._s(e._f("enumFilter")(e.reserveInfo.sign_time,"small_course.sign_time"))+"通知签到\n    ")])],1)]):e._e()},a=[],c=n("2138"),o=n("e69b"),l=n("47e9"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("st-modal",{staticClass:"modal-personal-order-setting",attrs:{confirmLoading:e.loading.editInfo},on:{ok:e.save,cancel:e.cancel},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("template",{slot:"title"},[e._v(e._s(e.$c("small_course"))+"预约设置")]),n("div",[n("st-form",{attrs:{form:e.form,labelWidth:"56px"}},[n("st-form-item",{attrs:{label:"预约范围"}},[n("div",[n("span",[e._v("用户可预约")]),n("a-select",{staticClass:"mg-l8",staticStyle:{width:"100px"},model:{value:e.info.reserve_start,callback:function(t){e.$set(e.info,"reserve_start",t)},expression:"info.reserve_start"}},e._l(e.reserveStarts,(function(t,s){return n("a-select-option",{key:+s,attrs:{value:+t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1),n("span",{staticClass:"mg-l8"},[e._v("到")]),n("a-select",{staticClass:"mg-l8",staticStyle:{width:"70px"},model:{value:e.info.reserve_range,callback:function(t){e.$set(e.info,"reserve_range",t)},expression:"info.reserve_range"}},e._l(e.reserveRanges,(function(t,s){return n("a-select-option",{key:+s,attrs:{value:+t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1),n("span",{staticClass:"mg-l8"},[e._v("以内的课程，员工代预约不受此限制")])],1)]),n("st-form-item",{attrs:{label:"取消预约"}},[n("div",[n("span",[e._v("允许用户在课程开始前")]),n("a-select",{staticClass:"mg-l8",staticStyle:{width:"100px"},model:{value:e.info.cancel_reserve,callback:function(t){e.$set(e.info,"cancel_reserve",t)},expression:"info.cancel_reserve"}},e._l(e.cancelReserves,(function(t,s){return n("a-select-option",{key:+s,attrs:{value:+t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1),n("span",{staticClass:"mg-l8"},[e._v("取消预约，员工代取消不受此限制")])],1),n("div",{staticClass:"st-des"},[e._v("\n          （建议取消预约时间 >=\n          提前预约时间，否则会造成取消课程预约后，其它用户无法再进行预约）\n        ")])]),n("st-form-item",{attrs:{label:"签到方式"}},[n("a-checkbox",{attrs:{checked:!!e.info.is_sign},on:{change:function(t){return e.onCheckboxChange("is_sign")}}},[e._v("\n          支持用户自主签到\n        ")])],1),n("st-form-item",{attrs:{label:"签到条件"}},[n("a-checkbox",{attrs:{checked:!!e.info.is_sign_entrance},on:{change:function(t){return e.onCheckboxChange("is_sign_entrance")}}},[e._v("\n          当天必须有入场记录(员工代签到不受此条件限制)\n        ")])],1),n("st-form-item",{attrs:{label:"签到时间"}},[n("div",[n("span",[e._v("开课")]),n("a-select",{staticClass:"mg-l8",staticStyle:{width:"120px"},model:{value:e.info.sign_time,callback:function(t){e.$set(e.info,"sign_time",t)},expression:"info.sign_time"}},e._l(e.signTimes,(function(t,s){return n("a-select-option",{key:+s,attrs:{value:+t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1),n("span",{staticClass:"mg-l8"},[e._v("允许签到，员工代签到不受此限制")])],1)]),n("st-form-item",{attrs:{label:"旷课条件"}},[n("div",[n("span",[e._v("课程结束后")]),n("a-select",{staticClass:"mg-l8",staticStyle:{width:"120px"},model:{value:e.info.absenteeism_limit,callback:function(t){e.$set(e.info,"absenteeism_limit",t)},expression:"info.absenteeism_limit"}},e._l(e.absenteeismLimit,(function(t,s){return n("a-select-option",{key:+s,attrs:{value:+t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1),n("span",{staticClass:"mg-l8"},[e._v("内,未签到")])],1)])],1)],1)],2)},_=[],v=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),f=n("d225"),d=n("b0b4"),m=n("9ab4"),p=n("0cd5"),h=n("df29"),g=n("a7a8"),b=function(){function e(t,n){Object(f["a"])(this,e),this.reserveSettingApi=t,this.userService=n,this.loading$=new h["d"]({}),this.reserveStarts$=this.userService.getOptions$("small_course.reserve_start"),this.reserveRanges$=this.userService.getOptions$("small_course.reserve_range"),this.cancelReserves$=this.userService.getOptions$("small_course.cancel_reserve"),this.signTimes$=this.userService.getOptions$("small_course.sign_time"),this.absenteeismLimit$=this.userService.getOptions$("small_course.absenteeism_limit")}return Object(d["a"])(e,[{key:"getInfo",value:function(){return this.reserveSettingApi.getInfo()}},{key:"editInfo",value:function(e){return this.reserveSettingApi.editInfo(e)}}]),e}();function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){Object(v["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object(m["b"])([Object(h["c"])(),Object(m["d"])("design:type",Function),Object(m["d"])("design:paramtypes",[Object]),Object(m["d"])("design:returntype",void 0)],b.prototype,"editInfo",null),b=Object(m["b"])([Object(p["b"])(),Object(m["d"])("design:paramtypes",["function"===typeof(s="undefined"!==typeof g["a"]&&g["a"])?s:Object,"function"===typeof(i="undefined"!==typeof c["a"]&&c["a"])?i:Object])],b);var y={serviceInject:function(){return{messageService:o["a"],settingService:b}},rxState:function(){return{loading:this.settingService.loading$,reserveStarts:this.settingService.reserveStarts$,reserveRanges:this.settingService.reserveRanges$,cancelReserves:this.settingService.cancelReserves$,signTimes:this.settingService.signTimes$,absenteeismLimit:this.settingService.absenteeismLimit$}},data:function(){return{show:!1,form:this.$form.createForm(this),info:{}}},created:function(){var e=this;this.settingService.getInfo().subscribe((function(t){e.info=t.info}))},methods:{onCheckboxChange:function(e){this.info[e]=+!this.info[e]},cancel:function(){this.show=!1},save:function(){var e=this;this.settingService.editInfo(O({},this.info)).subscribe((function(){e.messageService.success({content:"提交成功"}),e.show=!1,e.$emit("change")}))}}},C=y,j=n("2877"),$=Object(j["a"])(C,u,_,!1,null,null,null),k=$.exports,I=n("b283"),x={serviceInject:function(){return{userService:c["a"],smallCourseService:l["SmallCourseService"]}},rxState:function(){var e=this.smallCourseService;return{loading:e.loading$,reserveInfo:e.reserveInfo$,auth:e.auth$}},modals:{BrandSettingSmallCourseReserve:k},data:function(){return{IS_SIGN:I["c"],IS_SIGN_ENTRANCE:I["d"]}},methods:{onChange:function(){this.$router.push({})}}},E=x,w=Object(j["a"])(E,r,a,!1,null,null,null);t["default"]=w.exports},a7a8:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n("6b54"),n("2397");var s=n("d225"),i=n("b0b4"),r=n("308d"),a=n("6bb5"),c=n("4e2b"),o=n("de46");function l(e){return function(){var t,n=Object(a["a"])(e);if(u()){var s=Object(a["a"])(this).constructor;t=Reflect.construct(n,arguments,s)}else t=n.apply(this,arguments);return Object(r["a"])(this,t)}}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var _=function(e){Object(c["a"])(n,e);var t=l(n);function n(){return Object(s["a"])(this,n),t.apply(this,arguments)}return Object(i["a"])(n,[{key:"getInfo",value:function(){return this.http.get("/v1/setting/course/small_course/reserve")}},{key:"editInfo",value:function(e){return this.http.put("/v1/setting/course/small_course/reserve",{params:e})}}]),n}(o["a"])},b283:function(e,t,n){"use strict";var s,i,r,a,c,o,l;n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"g",(function(){return l})),function(e){e[e["UNPUBLISH"]=1]="UNPUBLISH",e[e["PUBLISH_UNSTARTED"]=2]="PUBLISH_UNSTARTED",e[e["SIGNING_UNCLASSED"]=3]="SIGNING_UNCLASSED",e[e["SIGNING_CLASSED"]=4]="SIGNING_CLASSED",e[e["CLASS_FAILED"]=5]="CLASS_FAILED",e[e["CLASSED"]=6]="CLASSED",e[e["CLASS_END"]=7]="CLASS_END"}(s||(s={})),function(e){e[e["FIXED_COURSE"]=1]="FIXED_COURSE",e[e["AUTO_COURSE"]=2]="AUTO_COURSE"}(i||(i={})),function(e){e[e["UN_CHECK"]=1]="UN_CHECK",e[e["CHECKED"]=2]="CHECKED",e[e["TRUANCK"]=3]="TRUANCK",e[e["LAEVE_REMEDIAL"]=4]="LAEVE_REMEDIAL",e[e["LAEVE_UNREMEDIAL"]=5]="LAEVE_UNREMEDIAL",e[e["TRUANCK_REMEDIAL"]=6]="TRUANCK_REMEDIAL"}(r||(r={})),function(e){e[e["CHILD"]=1]="CHILD",e[e["ADULT"]=0]="ADULT"}(a||(a={})),function(e){e["YES"]="支持",e["NO"]="不支持"}(c||(c={})),function(e){e["YES"]="必须有",e["NO"]="可以没有"}(o||(o={})),function(e){e[e["ERR"]=54640]="ERR"}(l||(l={}))},f192:function(e,t,n){"use strict";n.r(t);var s,i,r,a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.auth.get?n("div",[n("a-row",[n("a-col",{attrs:{span:16}},[n("st-t2",[e._v("团体课程预约设置")])],1),n("a-col",{staticClass:"ta-r",attrs:{span:8}},[e.auth.edit?n("st-info-action",{directives:[{name:"modal-link",rawName:"v-modal-link",value:{name:"brand-setting-team-reserve",on:{change:e.onChange}},expression:"{\n          name: 'brand-setting-team-reserve',\n          on: {\n            change: onChange\n          }\n        }"}],attrs:{icon:"edit",text:"编辑"}}):e._e()],1)],1),n("st-t4",{staticClass:"mg-t24"},[e._v("预约范围")]),n("div",{staticClass:"st-des"},[e._v("\n    用户可预约"+e._s(e._f("enumFilter")(e.info.reserve_start,"setting.reserve_start"))+"\n    到"+e._s(e._f("enumFilter")(e.info.reserve_range,"setting.reserve_range"))+"以内的团课，员工代预约不受此限制\n  ")]),n("st-hr"),n("st-t4",[e._v("取消预约")]),n("div",{staticClass:"st-des"},[e._v("\n    允许用户在团课开始前"+e._s(e._f("enumFilter")(e.info.cancel_reserve,"setting.cancel_reserve"))+"取消预约，员工代取消不受此限制\n  ")]),n("st-hr"),n("st-t4",[e._v("预约提醒")]),n("div",{staticClass:"st-des"},[e._v("\n    在课程开始前"+e._s(e._f("enumFilter")(e.info.reserve_remind,"setting.reserve_remind"))+"提醒用户上课\n  ")]),n("st-hr"),n("st-t4",[e._v("预约上限")]),n("div",{staticClass:"st-des"},[e._v("\n    允许用户每节课预约"+e._s(e.info.reserve_upper_limit.limit_num)+"人，\n    "+e._s(e.info.reserve_upper_limit.is_limit_course_num?"限制用户预约"+e.info.reserve_upper_limit.limit_course_num+"节未开课的团体课程":"不限制用户预约课程数")+"\n  ")]),n("st-hr"),n("st-t4",[e._v("预约人数")]),n("div",{staticClass:"st-des"},[e._v("显示每节课的预约人数")]),n("st-hr"),n("st-t4",[e._v("候补预约")]),n("div",{staticClass:"st-des"},[e._v("\n    "+e._s(e._f("enumFilter")(e.info.alternate_reserve,"setting.alternate_reserve"))+"候补预约，开课前1小时自动取消候补预约\n  ")]),n("st-hr"),n("st-t4",[e._v("签到方式")]),n("div",{staticClass:"st-des"},[e._v(e._s(e.info.is_sign?"支持":"不支持")+"用户自主签到")]),n("st-hr"),n("st-t4",[e._v("签到时间")]),n("div",{staticClass:"st-des"},[e._v("\n    开课后"+e._s(e._f("enumFilter")(e.info.sign_time,"setting.sign_time"))+"允许签到\n  ")]),n("st-hr"),n("st-t4",[e._v("自动签到")]),n("div",{staticClass:"st-des"},[e._v("\n    "+e._s(e.info.is_auto_sign?"支持":"不支持")+"系统自动签到\n  ")]),n("st-hr"),n("st-t4",[e._v("爽约惩罚")]),n("div",{staticClass:"st-des"},[e._v("\n    "+e._s(e._f("enumFilter")(e.info.is_miss_punishment,"setting.is_miss_punishment"))+"爽约惩罚\n    "),e.info.is_miss_punishment?n("span",[e._v("\n      ，"+e._s(e.info.miss_punishment.miss_punish_day)+"天内，\n      已结束的团体课程未签到的课程数超过"+e._s(e.info.miss_punishment.miss_punish_number)+"次后，\n      "+e._s(e.info.miss_punishment.miss_punish_limit)+"天内不可再预约团体课程\n    ")]):e._e()])],1):e._e()},c=[],o=n("e69b"),l=n("96ca"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("st-modal",{staticClass:"modal-team-order-setting",attrs:{title:"团体课预约设置",confirmLoading:e.loading.update},on:{ok:e.save,cancel:e.cancel},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[n("div",[n("st-form",{attrs:{form:e.form,labelWidth:"56px"}},[n("st-form-item",{attrs:{label:"预约范围"}},[n("div",[n("span",[e._v("用户可预约")]),n("a-select",{staticClass:"mg-l8",staticStyle:{width:"100px"},model:{value:e.info.reserve_start,callback:function(t){e.$set(e.info,"reserve_start",t)},expression:"info.reserve_start"}},e._l(e.reserve_start,(function(t,s){return n("a-select-option",{key:+s,attrs:{value:t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1),n("span",{staticClass:"mg-l8"},[e._v("到")]),n("a-select",{staticClass:"mg-l8",staticStyle:{width:"70px"},model:{value:e.info.reserve_range,callback:function(t){e.$set(e.info,"reserve_range",t)},expression:"info.reserve_range"}},e._l(e.reserve_range,(function(t,s){return n("a-select-option",{key:+s,attrs:{value:t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1),n("span",{staticClass:"mg-l8"},[e._v("以内的团体系课程，员工代预约不受此限制")])],1)]),n("st-form-item",{attrs:{label:"取消预约"}},[n("div",[n("span",[e._v("允许用户在团体课程开始前")]),n("a-select",{staticClass:"mg-l8",staticStyle:{width:"100px"},model:{value:e.info.cancel_reserve,callback:function(t){e.$set(e.info,"cancel_reserve",t)},expression:"info.cancel_reserve"}},e._l(e.cancel_reserve,(function(t,s){return n("a-select-option",{key:+s,attrs:{value:t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1),n("span",{staticClass:"mg-l8"},[e._v("取消预约，员工代取消不受此限制")])],1),n("div",{staticClass:"st-des"},[e._v("\n          （建议取消预约时间 >=\n          提前预约时间，否则会造成取消课程预约后，其它用户无法再进行预约）\n        ")])]),e.info.reserve_upper_limit?n("st-form-item",{attrs:{label:"预约上限"}},[n("div",[n("span",[e._v("允许用户每节课预约")]),n("a-select",{staticClass:"mg-l8",staticStyle:{width:"100px"},model:{value:e.info.reserve_upper_limit.limit_num,callback:function(t){e.$set(e.info.reserve_upper_limit,"limit_num",t)},expression:"info.reserve_upper_limit.limit_num"}},e._l(e.limit_num,(function(t,s){return n("a-select-option",{key:+s,attrs:{value:t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1),n("a-checkbox",{staticClass:"mg-l24",attrs:{checked:!!e.info.reserve_upper_limit.is_limit_course_num},on:{change:function(t){return e.onCheckboxChange("reserve_upper_limit.is_limit_course_num")}}},[e._v("\n            限制用户预约\n          ")]),n("st-input-number",{staticStyle:{width:"66px"},model:{value:e.info.reserve_upper_limit.limit_course_num,callback:function(t){e.$set(e.info.reserve_upper_limit,"limit_course_num",t)},expression:"info.reserve_upper_limit.limit_course_num"}}),n("span",{staticClass:"mg-l8"},[e._v("节未开课的团体课程")])],1)]):e._e(),n("st-form-item",{attrs:{label:"候补预约"}},[n("a-checkbox",{attrs:{checked:!!e.info.alternate_reserve},on:{change:function(t){return e.onCheckboxChange("alternate_reserve")}}},[e._v("\n          开启候补预约\n        ")]),n("div",{staticClass:"st-des"},[e._v("\n          开课前1小时自动取消候补预约\n        ")])],1),n("st-form-item",{attrs:{label:"签到方式"}},[n("a-checkbox",{attrs:{checked:!!e.info.is_sign},on:{change:function(t){return e.onCheckboxChange("is_sign")}}},[e._v("\n          支持用户自主签到\n        ")])],1),n("st-form-item",{attrs:{label:"签到时间"}},[n("div",[n("span",[e._v("开课")]),n("a-select",{staticClass:"mg-l8",staticStyle:{width:"100px"},model:{value:e.info.sign_time,callback:function(t){e.$set(e.info,"sign_time",t)},expression:"info.sign_time"}},e._l(e.sign_time,(function(t,s){return n("a-select-option",{key:+s,attrs:{value:t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1),n("span",{staticClass:"mg-l8"},[e._v("允许签到")])],1)]),n("st-form-item",{attrs:{label:"自动签到"}},[n("div",[n("a-checkbox",{attrs:{checked:!!e.info.is_auto_sign},on:{change:function(t){return e.onCheckboxChange("is_auto_sign")}}},[e._v("\n            支持系统自动签到，在\n          ")]),n("a-select",{staticClass:"mg-l8",staticStyle:{width:"84px"},model:{value:e.info.auto_sign_limit,callback:function(t){e.$set(e.info,"auto_sign_limit",t)},expression:"info.auto_sign_limit"}},e._l(e.auto_sign_limit,(function(t,s){return n("a-select-option",{key:+s,attrs:{value:t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1),n("span",{staticClass:"mg-l8"},[e._v("后系统自动将课程进行签到")])],1),n("div",{staticClass:"st-des"},[e._v("\n          （凌晨03:00进行检查未签到课程，统一进行更新）\n        ")])]),e.info.miss_punishment?n("st-form-item",{attrs:{label:"爽约惩罚"}},[n("div",[n("a-checkbox",{attrs:{checked:!!e.info.is_miss_punishment},on:{change:function(t){return e.onCheckboxChange("is_miss_punishment")}}},[e._v("\n            开启爽约惩罚\n          ")])],1),n("div",{staticClass:"mg-t8"},[n("st-input-number",{staticStyle:{width:"66px"},attrs:{min:1,max:100},model:{value:e.info.miss_punishment.miss_punish_day,callback:function(t){e.$set(e.info.miss_punishment,"miss_punish_day",t)},expression:"info.miss_punishment.miss_punish_day"}}),n("span",{staticClass:"mg-l8"},[e._v("天内，已结束的团体课程未签到的课程数超过")]),n("st-input-number",{staticClass:"mg-l8",staticStyle:{width:"66px"},attrs:{min:1,max:100},model:{value:e.info.miss_punishment.miss_punish_number,callback:function(t){e.$set(e.info.miss_punishment,"miss_punish_number",t)},expression:"info.miss_punishment.miss_punish_number"}}),n("span",{staticClass:"mg-l8"},[e._v("次后，")])],1),n("div",{staticClass:"mg-t16"},[n("st-input-number",{staticStyle:{width:"66px"},attrs:{min:1,max:100},model:{value:e.info.miss_punishment.miss_punish_limit,callback:function(t){e.$set(e.info.miss_punishment,"miss_punish_limit",t)},expression:"info.miss_punishment.miss_punish_limit"}}),n("span",{staticClass:"mg-l8"},[e._v("\n            天内不可再预约团体课程，员工代预约不受此限制\n          ")])],1)]):e._e(),e.info.team_open_condition?n("st-form-item",{attrs:{label:"开课条件"}},[n("div",[n("a-checkbox",{attrs:{checked:!!e.info.team_is_open_condition},on:{change:function(t){return e.onCheckboxChange("team_is_open_condition")}}},[e._v("\n            开课前\n          ")]),n("a-select",{staticClass:"mg-l8",staticStyle:{width:"130px"},attrs:{disabled:e.select_flag.open_condition_flag},model:{value:e.info.team_open_condition.limit_time,callback:function(t){e.$set(e.info.team_open_condition,"limit_time",t)},expression:"info.team_open_condition.limit_time"}},e._l(e.open_condition_limit_time,(function(t,s){return n("a-select-option",{key:+s,attrs:{value:t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1),n("span",{staticClass:"mg-l8"},[e._v("预约人数不足")]),n("a-select",{staticClass:"mg-l8",staticStyle:{width:"84px"},attrs:{disabled:e.select_flag.open_condition_flag},model:{value:e.info.team_open_condition.limit_num,callback:function(t){e.$set(e.info.team_open_condition,"limit_num",t)},expression:"info.team_open_condition.limit_num"}},e._l(e.open_condition_limit_num,(function(t,s){return n("a-select-option",{key:+s,attrs:{value:t.value}},[e._v("\n              "+e._s(t.label)+"\n            ")])})),1),n("span",{staticClass:"mg-l8"},[e._v("系统将自动取消课程及预约")])],1)]):e._e()],1)],1)])},_=[],v=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),f=(n("28a5"),n("6762"),n("2fdb"),n("d225")),d=n("b0b4"),m=n("9ab4"),p=n("0cd5"),h=n("df29"),g=n("2138"),b=n("349f"),S=function(){function e(t,n){Object(f["a"])(this,e),this.reserveSettingApi=t,this.userService=n,this.loading$=new h["d"]({}),this.open_condition_limit_num$=this.userService.getOptions$("setting.open_condition_limit_num"),this.open_condition_limit_time$=this.userService.getOptions$("setting.open_condition_limit_time"),this.auto_sign_limit$=this.userService.getOptions$("setting.auto_sign_limit"),this.sign_time$=this.userService.getOptions$("setting.sign_time"),this.limit_num$=this.userService.getOptions$("setting.limit_num"),this.cancel_reserve$=this.userService.getOptions$("setting.cancel_reserve"),this.reserve_range$=this.userService.getOptions$("setting.reserve_range"),this.reserve_start$=this.userService.getOptions$("setting.reserve_start"),this.reserve_remind$=this.userService.getOptions$("setting.reserve_remind")}return Object(d["a"])(e,[{key:"getInfo",value:function(){return this.reserveSettingApi.getInfo()}},{key:"update",value:function(e){return this.reserveSettingApi.update(e)}}]),e}();function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Object(v["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object(m["b"])([Object(h["c"])(),Object(m["d"])("design:type",Function),Object(m["d"])("design:paramtypes",["function"===typeof(s="undefined"!==typeof b["UpdateInput"]&&b["UpdateInput"])?s:Object]),Object(m["d"])("design:returntype",void 0)],S.prototype,"update",null),S=Object(m["b"])([Object(p["b"])(),Object(m["d"])("design:paramtypes",["function"===typeof(i="undefined"!==typeof b["a"]&&b["a"])?i:Object,"function"===typeof(r="undefined"!==typeof g["a"]&&g["a"])?r:Object])],S);var C=1,j={serviceInject:function(){return{messageService:o["a"],reserveService:S}},rxState:function(){return{loading:this.reserveService.loading$,open_condition_limit_num:this.reserveService.open_condition_limit_num$,open_condition_limit_time:this.reserveService.open_condition_limit_time$,auto_sign_limit:this.reserveService.auto_sign_limit$,sign_time:this.reserveService.sign_time$,limit_num:this.reserveService.limit_num$,cancel_reserve:this.reserveService.cancel_reserve$,reserve_range:this.reserveService.reserve_range$,reserve_start:this.reserveService.reserve_start$,reserve_remind:this.reserveService.reserve_remind$}},data:function(){return{show:!1,form:this.$form.createForm(this),info:{},select_flag:{open_condition_flag:!1}}},created:function(){var e=this;this.reserveService.getInfo().subscribe((function(t){e.info=t.info,e.info.team_is_open_condition===C?e.select_flag.open_condition_flag=!1:e.select_flag.open_condition_flag=!0}))},methods:{onCheckboxChange:function(e){if(e.includes(".")){var t=e.split(".");this.info[t[0]][t[1]]=+!this.info[t[0]][t[1]]}else this.info[e]=+!this.info[e];"team_is_open_condition"===e&&(this.info.team_is_open_condition===C?this.select_flag.open_condition_flag=!1:this.select_flag.open_condition_flag=!0)},cancel:function(){this.show=!1},save:function(){var e=this;this.reserveService.update(y({},this.info)).subscribe((function(){e.messageService.success({content:"提交成功"}),e.show=!1,e.$emit("change")}))}}},$=j,k=n("2877"),I=Object(k["a"])($,u,_,!1,null,null,null),x=I.exports,E={serviceInject:function(){return{teamService:l["TeamService"]}},rxState:function(){var e=this.teamService;return{loading:e.loading$,resData:e.resData$,auth:e.auth$}},modals:{BrandSettingTeamReserve:x},computed:{info:function(){return this.resData.info}},methods:{onChange:function(){this.$router.push({})}}},w=E,R=Object(k["a"])(w,a,c,!1,null,null,null);t["default"]=R.exports}}]);