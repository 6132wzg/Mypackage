{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/invitation/index/data.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/invitation/index/data.vue","mtime":1591147717319},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { AppConfig } from '@/constants/config';\nimport { columnsActivity, columnsUser } from \"./data.config\";\nimport { DataService } from \"./data.service\";\nimport { IndexService } from \"../index.service\";\nexport default {\n  name: 'PageBrandMarketingInviationData',\n  bem: {\n    inviation: 'page-brand-marketing-inviation-data'\n  },\n  serviceInject: function serviceInject() {\n    return {\n      config: AppConfig,\n      dataService: DataService,\n      indexService: IndexService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      isOpen: this.indexService.isOpen$,\n      dataLoading: this.dataService.loading$,\n      statInfo: this.dataService.statInfo$,\n      reportList: this.dataService.reportList$,\n      reportPage: this.dataService.reportPage$,\n      inviteeList: this.dataService.inviteeList$,\n      inviteePage: this.dataService.inviteePage$\n    };\n  },\n  computed: {\n    stReportList: function stReportList() {\n      var array = [];\n      this.reportList.forEach(function (i) {\n        var key = parseInt(Math.random() * 999999).toString();\n        array.push(_objectSpread({}, i, {\n          key: key\n        }));\n      });\n      return array;\n    },\n    stInviteeList: function stInviteeList() {\n      var array = [];\n      this.inviteeList.forEach(function (i) {\n        var key = parseInt(Math.random() * 999999).toString();\n        array.push(_objectSpread({}, i, {\n          key: key\n        }));\n      });\n      return array;\n    }\n  },\n  data: function data() {\n    return {\n      columnsActivity: columnsActivity,\n      columnsUser: columnsUser,\n      selectedRowKeys: [],\n      selectedRows: [],\n      // 表格类别 0活动效果 1邀请用户\n      tableType: 0\n    };\n  },\n  methods: {\n    // 去开启\n    onGoOpen: function onGoOpen() {\n      this.$router.push({\n        name: 'brand-marketing-plugin-invitation-index-setting',\n        params: {\n          from: 'data'\n        }\n      });\n    },\n    // 清空列表选择\n    onClear: function onClear() {\n      this.selectedRowKeys = [];\n      this.selectedRows = [];\n    },\n    // 列表选择\n    onSelectChange: function onSelectChange(selectedRowKeys, selectedRows) {\n      this.selectedRowKeys = selectedRowKeys;\n      this.selectedRows = selectedRows;\n    },\n    // 分页\n    onReportPageChange: function onReportPageChange(data) {\n      this.onClear();\n      this.dataService.getInviteReport({\n        page: data.current,\n        size: data.pageSize\n      }).subscribe();\n    },\n    onInviteePageChange: function onInviteePageChange(data) {\n      console.log(data);\n      console.log(this.dataService);\n      this.onClear();\n      this.dataService.getInviteInvitee({\n        page: data.current,\n        size: data.pageSize\n      }).subscribe();\n    },\n    // 批量导出\n    onExport: function onExport() {\n      console.log('导出');\n      this.onClear();\n    },\n    onTabChange: function onTabChange() {\n      this.onClear();\n    }\n  }\n};",{"version":3,"sources":["data.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA,SAAA,SAAA,QAAA,oBAAA;AACA,SAAA,eAAA,EAAA,WAAA;AACA,SAAA,WAAA;AACA,SAAA,YAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,iCADA;AAEA,EAAA,GAAA,EAAA;AACA,IAAA,SAAA,EAAA;AADA,GAFA;AAKA,EAAA,aALA,2BAKA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,SADA;AAEA,MAAA,WAAA,EAAA,WAFA;AAGA,MAAA,YAAA,EAAA;AAHA,KAAA;AAKA,GAXA;AAYA,EAAA,OAZA,qBAYA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,KAAA,YAAA,CAAA,OADA;AAEA,MAAA,WAAA,EAAA,KAAA,WAAA,CAAA,QAFA;AAGA,MAAA,QAAA,EAAA,KAAA,WAAA,CAAA,SAHA;AAIA,MAAA,UAAA,EAAA,KAAA,WAAA,CAAA,WAJA;AAKA,MAAA,UAAA,EAAA,KAAA,WAAA,CAAA,WALA;AAMA,MAAA,WAAA,EAAA,KAAA,WAAA,CAAA,YANA;AAOA,MAAA,WAAA,EAAA,KAAA,WAAA,CAAA;AAPA,KAAA;AASA,GAtBA;AAuBA,EAAA,QAAA,EAAA;AACA,IAAA,YADA,0BACA;AACA,UAAA,KAAA,GAAA,EAAA;AACA,WAAA,UAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA;AACA,YAAA,GAAA,GAAA,QAAA,CAAA,IAAA,CAAA,MAAA,KAAA,MAAA,CAAA,CAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,mBAAA,CAAA;AAAA,UAAA,GAAA,EAAA;AAAA;AACA,OAHA;AAIA,aAAA,KAAA;AACA,KARA;AASA,IAAA,aATA,2BASA;AACA,UAAA,KAAA,GAAA,EAAA;AACA,WAAA,WAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA;AACA,YAAA,GAAA,GAAA,QAAA,CAAA,IAAA,CAAA,MAAA,KAAA,MAAA,CAAA,CAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,IAAA,mBAAA,CAAA;AAAA,UAAA,GAAA,EAAA;AAAA;AACA,OAHA;AAIA,aAAA,KAAA;AACA;AAhBA,GAvBA;AAyCA,EAAA,IAzCA,kBAyCA;AACA,WAAA;AACA,MAAA,eAAA,EAAA,eADA;AAEA,MAAA,WAAA,EAAA,WAFA;AAGA,MAAA,eAAA,EAAA,EAHA;AAIA,MAAA,YAAA,EAAA,EAJA;AAKA;AACA,MAAA,SAAA,EAAA;AANA,KAAA;AAQA,GAlDA;AAmDA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,QAFA,sBAEA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AACA,QAAA,IAAA,EAAA,iDADA;AAEA,QAAA,MAAA,EAAA;AACA,UAAA,IAAA,EAAA;AADA;AAFA,OAAA;AAMA,KATA;AAUA;AACA,IAAA,OAXA,qBAWA;AACA,WAAA,eAAA,GAAA,EAAA;AACA,WAAA,YAAA,GAAA,EAAA;AACA,KAdA;AAeA;AACA,IAAA,cAhBA,0BAgBA,eAhBA,EAgBA,YAhBA,EAgBA;AACA,WAAA,eAAA,GAAA,eAAA;AACA,WAAA,YAAA,GAAA,YAAA;AACA,KAnBA;AAoBA;AACA,IAAA,kBArBA,8BAqBA,IArBA,EAqBA;AACA,WAAA,OAAA;AACA,WAAA,WAAA,CACA,eADA,CACA;AACA,QAAA,IAAA,EAAA,IAAA,CAAA,OADA;AAEA,QAAA,IAAA,EAAA,IAAA,CAAA;AAFA,OADA,EAKA,SALA;AAMA,KA7BA;AA8BA,IAAA,mBA9BA,+BA8BA,IA9BA,EA8BA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,WAAA;AACA,WAAA,OAAA;AACA,WAAA,WAAA,CACA,gBADA,CACA;AACA,QAAA,IAAA,EAAA,IAAA,CAAA,OADA;AAEA,QAAA,IAAA,EAAA,IAAA,CAAA;AAFA,OADA,EAKA,SALA;AAMA,KAxCA;AAyCA;AACA,IAAA,QA1CA,sBA0CA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,WAAA,OAAA;AACA,KA7CA;AA8CA,IAAA,WA9CA,yBA8CA;AACA,WAAA,OAAA;AACA;AAhDA;AAnDA,CAAA","sourcesContent":["<template>\n  <div :class=\"inviation()\">\n    <a-row :class=\"inviation('acount')\">\n      <a-col :span=\"6\">\n        <p :class=\"inviation('acount-title')\">\n          参与活动邀请人\n          <st-help-tooltip id=\"TBMGM001\" />\n        </p>\n        <ICountUp\n          class=\"number-up font-number\"\n          :endVal=\"statInfo.total_inviter_num\"\n        />\n      </a-col>\n      <a-col :span=\"6\">\n        <p :class=\"inviation('acount-title')\">\n          拉新注册人数\n          <st-help-tooltip id=\"TBMGM002\" />\n        </p>\n        <ICountUp\n          class=\"number-up font-number\"\n          :endVal=\"statInfo.total_newbie_register_num\"\n        />\n      </a-col>\n      <a-col :span=\"6\">\n        <p :class=\"inviation('acount-title')\">\n          拉新领券人数\n          <st-help-tooltip id=\"TBMGM003\" />\n        </p>\n        <ICountUp\n          class=\"number-up font-number\"\n          :endVal=\"statInfo.total_coupon_num\"\n        />\n      </a-col>\n      <a-col :span=\"6\">\n        <p :class=\"inviation('acount-title')\">\n          拉新交易人数\n          <st-help-tooltip id=\"TBMGM004\" />\n        </p>\n        <ICountUp\n          class=\"number-up font-number\"\n          :endVal=\"statInfo.total_order_num\"\n        />\n      </a-col>\n    </a-row>\n    <div v-if=\"!isOpen\" :class=\"inviation('data-none')\">\n      <img\n        :src=\"config.PLACEHOLDER_IMG.NODATA | imgFilter({ w: 197, h: 136 })\"\n        width=\"197\"\n        height=\"136\"\n        alt=\"暂无数据\"\n      />\n      <p>还未开启邀请有礼功能，立即开启吧！</p>\n      <st-button type=\"primary\" @click=\"onGoOpen\">立即开启</st-button>\n    </div>\n    <div v-else :class=\"inviation('table')\">\n      <div :class=\"inviation('table-operation')\" class=\"mg-b16\">\n        <!-- NOTE: 导出 -->\n        <!-- <st-button :disabled=\"!selectedRowKeys.length\" @click=\"onExport\" type=\"primary\">批量导出</st-button> -->\n        <a-radio-group\n          v-model=\"tableType\"\n          @change=\"onTabChange\"\n          buttonStyle=\"solid\"\n        >\n          <a-radio-button :value=\"0\">活动效果</a-radio-button>\n          <a-radio-button :value=\"1\">邀请用户</a-radio-button>\n        </a-radio-group>\n      </div>\n      <!-- TODO: 预留，缺失导出功能 -->\n      <!-- :alertSelection=\"{ onReset: onClear }\"\n        :rowSelection=\"{\n          selectedRowKeys: selectedRowKeys,\n          fixed: true,\n          onChange: onSelectChange\n        }\" -->\n      <st-table\n        v-if=\"!tableType\"\n        @change=\"onReportPageChange\"\n        :columns=\"columnsActivity\"\n        :dataSource=\"stReportList\"\n        :pagination=\"{\n          current: reportPage.current_page,\n          total: reportPage.total_counts,\n          pageSize: reportPage.size\n        }\"\n        rowKey=\"key\"\n      />\n      <st-table\n        v-if=\"tableType\"\n        @change=\"onInviteePageChange\"\n        :columns=\"columnsUser\"\n        :dataSource=\"stInviteeList\"\n        :pagination=\"{\n          current: inviteePage.current_page,\n          total: inviteePage.total_counts,\n          pageSize: inviteePage.size\n        }\"\n        rowKey=\"key\"\n      />\n    </div>\n  </div>\n</template>\n<script>\nimport { AppConfig } from '@/constants/config'\nimport { columnsActivity, columnsUser } from './data.config'\nimport { DataService } from './data.service'\nimport { IndexService } from '../index.service'\nexport default {\n  name: 'PageBrandMarketingInviationData',\n  bem: {\n    inviation: 'page-brand-marketing-inviation-data'\n  },\n  serviceInject() {\n    return {\n      config: AppConfig,\n      dataService: DataService,\n      indexService: IndexService\n    }\n  },\n  rxState() {\n    return {\n      isOpen: this.indexService.isOpen$,\n      dataLoading: this.dataService.loading$,\n      statInfo: this.dataService.statInfo$,\n      reportList: this.dataService.reportList$,\n      reportPage: this.dataService.reportPage$,\n      inviteeList: this.dataService.inviteeList$,\n      inviteePage: this.dataService.inviteePage$\n    }\n  },\n  computed: {\n    stReportList() {\n      let array = []\n      this.reportList.forEach(i => {\n        let key = parseInt(Math.random() * 999999).toString()\n        array.push({ ...i, key: key })\n      })\n      return array\n    },\n    stInviteeList() {\n      let array = []\n      this.inviteeList.forEach(i => {\n        let key = parseInt(Math.random() * 999999).toString()\n        array.push({ ...i, key: key })\n      })\n      return array\n    }\n  },\n  data() {\n    return {\n      columnsActivity,\n      columnsUser,\n      selectedRowKeys: [],\n      selectedRows: [],\n      // 表格类别 0活动效果 1邀请用户\n      tableType: 0\n    }\n  },\n  methods: {\n    // 去开启\n    onGoOpen() {\n      this.$router.push({\n        name: 'brand-marketing-plugin-invitation-index-setting',\n        params: {\n          from: 'data'\n        }\n      })\n    },\n    // 清空列表选择\n    onClear() {\n      this.selectedRowKeys = []\n      this.selectedRows = []\n    },\n    // 列表选择\n    onSelectChange(selectedRowKeys, selectedRows) {\n      this.selectedRowKeys = selectedRowKeys\n      this.selectedRows = selectedRows\n    },\n    // 分页\n    onReportPageChange(data) {\n      this.onClear()\n      this.dataService\n        .getInviteReport({\n          page: data.current,\n          size: data.pageSize\n        })\n        .subscribe()\n    },\n    onInviteePageChange(data) {\n      console.log(data)\n      console.log(this.dataService)\n      this.onClear()\n      this.dataService\n        .getInviteInvitee({\n          page: data.current,\n          size: data.pageSize\n        })\n        .subscribe()\n    },\n    // 批量导出\n    onExport() {\n      console.log('导出')\n      this.onClear()\n    },\n    onTabChange() {\n      this.onClear()\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/pages/brand/marketing/plugin/invitation/index"}]}