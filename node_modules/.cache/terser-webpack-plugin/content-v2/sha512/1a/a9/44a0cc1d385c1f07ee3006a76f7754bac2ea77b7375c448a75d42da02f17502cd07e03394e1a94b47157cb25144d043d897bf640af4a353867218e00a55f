{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"tier-11~brand-marketing-plugin-activity-registration~brand-product-card-deposit~brand-product-card-m~a0eb2004\"],{\"972a\":function(e,t,n){\"use strict\";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"textarea\",{class:e.editorId})},o=[],a=n(\"74d8\"),r=n(\"5332\"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"tox-toolbar__group editor__upload\"},[n(\"a-upload\",{attrs:{fileList:[],customRequest:e.upload,beforeUpload:e.beforeUpload}},[n(\"a-icon\",{attrs:{type:\"upload\"}})],1)],1)},s=[],l=n(\"da41\"),u=n(\"e69b\"),d={name:\"EditImage\",serviceInject:function(){return{oss:l[\"a\"],messageService:u[\"a\"]}},data:function(){return{}},props:{editor:Object},methods:{upload:function(e){var t=this;this.oss.put({business:\"image\",isPrivate:!1,file:e.file,uploadProgress:function(e){t.progress=parseInt(e.loaded/e.total*100)}}).subscribe((function(e){t.$emit(\"change\",{image:e,editor:t.editor})}))},beforeUpload:function(e){var t=2,n=e.size/1024/1024<t;return n||this.messageService.error({content:\"上传图片最大不能超过\".concat(t,\"M\")}),n}}},m=d,p=n(\"2877\"),g=Object(p[\"a\"])(m,c,s,!1,null,null,null),f=g.exports,h=n(\"8bbf\"),b=n.n(h),v={name:\"StEditor\",props:{value:{type:String,default:\"\"}},model:{prop:\"value\",event:\"change\"},serviceInject:function(){return{appConfig:a[\"a\"],importService:r[\"a\"]}},computed:{editorId:function(){return\"st-editor-\"+this._uid}},methods:{onChangeGetFile:function(e){var t=e.image,n=e.editor;n.insertContent('<img src=\"'.concat(t.url,'\">')),this.$emit(\"ready\",n)}},mounted:function(){var e=this;this.$createElement;this.importService.load([\"tinymce/5.0.3/tinymce.min.js\"]).then((function(){return e.importService.load([\"tinymce/5.0.3/themes/silver/theme.min.js\"])})).then((function(){var t=e;window.tinyMCE.remove(),window.tinyMCE.init({selector:\".\"+e.editorId,language:\"zh_CN\",contextmenu:[\"paste\"],branding:!1,elementpath:!1,menubar:!1,body_class:\"st-editor\",plugins:[\"link\",\"image\"],min_height:153,toolbar:\"undo redo | styleselect bold italic forecolor backcolor | bullist numlist | alignleft aligncenter alignright\",language_url:e.appConfig.BASE_URL+\"tinymce/5.0.3/zh_CN.js\",images_upload_handler:function(e,n,i){var o=new FormData;o.append(\"img\",e.blob()),t.$modalRouter.push({name:\"face-recognition\"})},setup:function(e){e.on(\"change keyup undo redo\",(function(n){var i=e.getContent();t.$emit(\"input\",i),t.$emit(\"change\",i)}))},init_instance_callback:function(e){this.$createElement;var n=document.querySelector(\".tox-toolbar\"),i=document.createElement(\"div\");i.id=\"editorImageUpload\",n.appendChild(i),new b.a({components:{EditorImage:f},render:function(n){return n(\"editor-image\",{attrs:{editor:e},on:{change:t.onChangeGetFile}})}}).$mount(\"#editorImageUpload\"),e.setContent(t.value),t.$emit(\"ready\",e)}})}))}},_=v,y=Object(p[\"a\"])(_,i,o,!1,null,null,null);t[\"a\"]=y.exports}}]);","extractedComments":[]}