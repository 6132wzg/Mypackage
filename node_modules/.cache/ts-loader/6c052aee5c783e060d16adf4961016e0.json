{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js!/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/ts-loader/index.js??ref--13-3!/Users/wangzhigang/Desktop/styd/web/src/services/region.service.ts","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/services/region.service.ts","mtime":1591147717088},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js","mtime":1591062572352},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/ts-loader/index.js","mtime":1591062571609}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport _classCallCheck from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\n\nvar _a;\n\nimport { __decorate, __metadata } from \"tslib\";\nimport { Injectable } from 'vue-service-app';\nimport { map, tap } from 'rxjs/operators';\nimport { RegionApi } from '@/api/region';\nimport { of } from 'rxjs';\nimport { State } from 'rx-state';\n\nvar RegionService = /*#__PURE__*/function () {\n  function RegionService(regionApi) {\n    _classCallCheck(this, RegionService);\n\n    this.regionApi = regionApi;\n    this.regionPC$ = new State([]);\n  }\n\n  _createClass(RegionService, [{\n    key: \"getRegionPC\",\n    value: function getRegionPC() {\n      return this.regionApi.getRegions().pipe(map(function (data$) {\n        if (data$) {\n          data$.forEach(function (i) {\n            i.children.forEach(function (inner) {\n              delete inner.children;\n            });\n          });\n        }\n\n        return data$;\n      }));\n    } // SET_REGION_PC\n\n  }, {\n    key: \"filterCityId\",\n    value: function filterCityId() {\n      var _this = this;\n\n      var cityOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      return cityOptions.map(function (item) {\n        _this.filterCityId(item.children);\n\n        return item;\n      });\n    }\n  }, {\n    key: \"getRegions\",\n    value: function getRegions() {\n      var _this2 = this;\n\n      var local = window.localStorage;\n\n      if (local.getItem('regionTree')) {\n        return of(JSON.parse(local.regionTree));\n      } else {\n        return this.regionApi.getRegions().pipe(tap(function (state$) {\n          var regionTree = JSON.stringify(state$);\n          local.setItem('regionTree', regionTree);\n        }), map(function (data$) {\n          return _this2.filterCityId(data$);\n        }));\n      }\n    }\n  }, {\n    key: \"getRegionCitys\",\n    value: function getRegionCitys(id) {\n      return this.regionApi.getRegionCitys(id);\n    }\n  }, {\n    key: \"getRegionDistricts\",\n    value: function getRegionDistricts(id) {\n      return this.regionApi.getRegionDistricts(id);\n    }\n  }, {\n    key: \"getRegionProvinces\",\n    value: function getRegionProvinces() {\n      return this.regionApi.getRegionProvinces();\n    }\n  }]);\n\n  return RegionService;\n}();\n\nRegionService = __decorate([Injectable(), __metadata(\"design:paramtypes\", [typeof (_a = typeof RegionApi !== \"undefined\" && RegionApi) === \"function\" ? _a : Object])], RegionService);\nexport { RegionService };",null]}