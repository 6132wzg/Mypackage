{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/lottery/add.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/lottery/add.vue","mtime":1598250255831},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { MessageService } from '@/services/message.service'\nimport { AddService } from './add.service'\nimport H5Container from '@/views/biz-components/h5/h5-container'\nimport Steps from './components#/step'\nimport { ruleOptions } from './form.config.ts'\nimport { PatternService } from '@/services/pattern.service'\nimport StImageUpload from '@/views/biz-components/st/image-upload/image-upload.vue'\nimport BrandMarketingPluginAddPrize from '@/views/biz-modals/brand/marketing/plugin/add-prize'\nimport { cloneDeep } from 'lodash-es'\nimport 'swiper/dist/css/swiper.css'\nimport { swiper, swiperSlide } from 'vue-awesome-swiper'\nimport {\n  TIMES_TYPE,\n  CROWD_TYPE,\n  SHARE_TYPE,\n  STOP_SWIPER,\n  ACTIVITY_STATUS,\n  NOT_PRIZE_IMG_TYPE\n} from '@/constants/marketing/lottery'\n\nexport default {\n  name: 'PluginLotteryAdd',\n  data(vm) {\n    const form = this.$stForm.create()\n    const decorators = form.decorators(ruleOptions)\n    return {\n      form,\n      decorators,\n      TIMES_TYPE,\n      CROWD_TYPE,\n      SHARE_TYPE,\n      STOP_SWIPER,\n      ACTIVITY_STATUS,\n      NOT_PRIZE_IMG_TYPE,\n      columsTitlelist: [\n        '奖品名称',\n        '奖品类型',\n        '可用门店（家）',\n        '奖品数量（个）',\n        '中奖概率 (%)',\n        '操作'\n      ],\n      info: {},\n      preview: {\n        title: '',\n        startTime: '',\n        endTime: '',\n        perTimes: 0,\n        totalTimes: 0,\n        description: ''\n      },\n      shareTitle: '',\n      fileList: [],\n      fileShareList: [],\n      prizeList: [],\n      timesType: TIMES_TYPE.DEFAULT,\n      crowdType: CROWD_TYPE.DEFAULT,\n      shareType: SHARE_TYPE.DEFAULT,\n      isStopSwiper: STOP_SWIPER.DEFAULT,\n      stepArr: [\n        {\n          title: '基础信息',\n          key: 1\n        },\n        {\n          title: '抽奖规则',\n          key: 2\n        },\n        {\n          title: '奖项设置',\n          key: 3\n        }\n      ],\n      currentIndex: 0,\n      curPrizeIndex: -1,\n      notPrizeImgType: NOT_PRIZE_IMG_TYPE.DEFAULT,\n      dateRangeVal: [],\n      notPrize: {\n        prize_name: '未中奖',\n        prize: {\n          image_url: ''\n        }\n      },\n      sliderOptions: {\n        autoplay: {\n          delay: 3000,\n          disableOnInteraction: false\n        }\n      },\n      swiperOption: {\n        spaceBetween: 6,\n        slidesPerView: 1.05\n      },\n      defaultValue: [moment().format('HH:mm'), moment('11:59', 'HH:mm')],\n      isShowEditTable: -1,\n      prizeRate: [],\n      prizeNum: [],\n      // 奖品顺序\n      prizeSort: [\n        [],\n        [],\n        [0, 1, 2, -1, 0, 1, 2, -1],\n        [0, -1, 1, -1, 2, -1, 3, -1],\n        [0, -1, 1, -1, 2, 3, 4, -1],\n        [0, 1, 2, -1, 3, 4, 5, -1],\n        [0, 1, 2, 3, 4, 5, 6, -1]\n      ]\n    }\n  },\n  bem: {\n    bPage: 'page-brand-marketing-plugin-lottery-add'\n  },\n  serviceInject() {\n    return {\n      addService: AddService,\n      pattern: PatternService,\n      messageService: MessageService\n    }\n  },\n  rxState() {\n    return {\n      drawCondition: this.addService.drawCondition$,\n      drawTimesType: this.addService.drawTimesType$,\n      invitePoster: this.addService.invitePoster$,\n      wheelDefault: this.addService.wheelDefault$,\n      wheelTurnAround: this.addService.wheelTurnAround$,\n      joinCrowdAll: this.addService.joinCrowdAll$,\n      crowd: this.addService.crowd$,\n      imgType: this.addService.imgType$,\n      prizeInfoList: this.addService.prizeInfoList$,\n      lucky: this.addService.lucky$,\n      prize: this.addService.prize$,\n      share: this.addService.share$\n    }\n  },\n  modals: {\n    BrandMarketingPluginAddPrize\n  },\n  components: {\n    H5Container,\n    Steps,\n    swiper,\n    swiperSlide,\n    StImageUpload\n  },\n  mounted() {\n    // this.notPrize.prize = this.lucky[0]\n    if (this.$searchQuery.activity_id) {\n      this.editVIew(this.$searchQuery.activity_id)\n    }\n  },\n  computed: {\n    deleteBtnStatus() {\n      return this.$searchQuery.activity_id && this.$searchQuery.status === 1\n    },\n    prizeListFilters(value) {\n      if (this.prizeList.length <= 2) {\n        return this.prizeList\n      }\n      return this.prizeSort[this.prizeList.length - 1].map((item, index) => {\n        if (item > -1) {\n          return this.prizeList[item]\n        } else {\n          return {\n            prize: {\n              image_url:\n                this.notPrizeImgType === this.NOT_PRIZE_IMG_TYPE.CUSTOM\n                  ? this.notPrize.prize.image_url\n                  : this.lucky[0].image_url\n            },\n            prize_name: this.notPrize.prize_name\n          }\n        }\n      })\n    }\n  },\n  methods: {\n    showEditTable(index) {\n      if (this.isShowEditTable === index) {\n        this.prizeList[index].number = this.prizeNum[index]\n        this.prizeList[index].rate = this.prizeRate[index]\n        this.isShowEditTable = -1\n      } else {\n        this.isShowEditTable = index\n      }\n    },\n    next(para) {\n      if (para.index) {\n        para = para.index - 1\n      }\n      if (para === 0) {\n        this.currentIndex = 0\n      }\n      if (para === 1) {\n        this.form\n          .validate([\n            'activity_base.activity_name',\n            'activity_base.activity_description',\n            'activity_base.wheel_turn_around',\n            'activity_base.wheel_share_default',\n            'activity_base.share_title',\n            'activity_base.activity_sub_name'\n          ])\n          .then(() => {\n            this.currentIndex = para\n          })\n      }\n      if (para === 2) {\n        this.form\n          .validate([\n            'activity_base.activity_name',\n            'activity_base.activity_description',\n            'activity_base.wheel_turn_around',\n            'activity_base.wheel_share_default',\n            'activity_base.share_title',\n            'activity_base.activity_sub_name',\n            'activity_rule.join_crowd_all',\n            'activity_rule.draw_condition',\n            'activity_rule.draw_times_type',\n            'activity_rule.per_times',\n            'activity_rule.total_times'\n          ])\n          .then(() => {\n            this.currentIndex = para\n          })\n      }\n    },\n    onChangeGetAvatar(imageFiles) {\n      this.fileList = cloneDeep(imageFiles)\n      this.notPrize.prize = this.fileList[0]\n    },\n    onShareChangeGetAvatar(imageFiles) {\n      this.fileShareList = cloneDeep(imageFiles)\n    },\n    onSubmit() {\n      this.form.validate().then(value => {\n        value.activity_base.start_time = this.preview.startTime\n        value.activity_base.end_time = this.preview.endTime\n        value.activity_base.share_title = this.shareTitle\n        // 选择自定义却不传图片\n        value.activity_base.share_bg =\n          this.shareType === SHARE_TYPE.CUSTOM\n            ? this.fileShareList[0] || this.share[0]\n            : this.share[0]\n        value.activity_prizes = this.prizeList\n        value.activity_lucky.lucky =\n          this.notPrizeImgType === NOT_PRIZE_IMG_TYPE.CUSTOM\n            ? this.fileList[0] || this.prize[0]\n            : this.lucky[0]\n        if (this.timesType === 1 && !value.activity_rule.per_times) {\n          this.messageService.warn({\n            content: '请填写抽奖次数'\n          })\n          return\n        }\n        if (this.timesType === 2 && !value.activity_rule.total_times) {\n          this.messageService.warn({\n            content: '请填写抽奖次数'\n          })\n          return\n        }\n        value.activity_rule.prize_sort = this.prizeSort[\n          this.prizeList.length - 1\n        ]\n        if (this.$searchQuery.activity_id) {\n          value.activity_id = this.$searchQuery.activity_id\n          this.addService.edit(value).subscribe(res => {\n            this.$router.push('./success?id=' + res.id)\n          })\n        } else {\n          this.addService.add(value).subscribe(res => {\n            this.$router.push('./success?id=' + res.id)\n          })\n        }\n      })\n    },\n    getTitle(e) {\n      this.preview.title = e.target.value\n    },\n    getName(e) {\n      this.notPrize.prize_name = e.target.value\n    },\n    getPerTimes(val) {\n      this.preview.perTimes = val\n    },\n    getTotalTimes(val) {\n      this.preview.totalTimes = val\n    },\n    getDescription(val) {\n      this.preview.description = val\n    },\n    // 抽奖次数类型\n    getCurTimesType(e) {\n      this.timesType = e.target.value\n    },\n    // 人群类型\n    getCurCrowdType(e) {\n      this.crowdType = e.target.value\n    },\n    // 分享类型\n    getCurShareType(e) {\n      this.shareType = e.target.value\n    },\n    // 轮播开关\n    stopSwiper(e) {\n      this.isStopSwiper = e.target.value\n    },\n    onDateChange(data, str) {\n      this.preview.startTime = str[0]\n      this.preview.endTime = str[1]\n    },\n    getNotImgType(e) {\n      this.notPrizeImgType = e.target.value\n    },\n    getPrizeInfo(val) {\n      if (this.curPrizeIndex > -1) {\n        this.prizeList.splice(this.curPrizeIndex, 1, val)\n      } else {\n        this.prizeList.push(val)\n        this.prizeRate.push(val.rate)\n        this.prizeNum.push(val.number)\n      }\n    },\n    getCurPrizeIndex(index) {\n      this.curPrizeIndex = index\n    },\n    disabledDate(current) {\n      return (\n        current && current.format('YYYY-MM-DD') < moment().format('YYYY-MM-DD')\n      )\n    },\n    onDelete(para) {\n      if (this.isShowEditTable === para) {\n        this.isShowEditTable = -1\n        return false\n      } else {\n        this.prizeRate.splice(para, 1)\n        this.prizeNum.splice(para, 1)\n      }\n      this.prizeList = this.prizeList.filter((item, index) => {\n        return index !== para\n      })\n    },\n    editTableNum(val, index) {\n      this.prizeNum[index] = val\n    },\n    editTableRate(val, index) {\n      this.prizeRate[index] = val\n    },\n    editVIew(id) {\n      return this.addService.editVIew(id).subscribe(res => {\n        this.info = res\n        this.form.setFieldsValue({\n          activity_base: res.activity_base,\n          activity_lucky: res.activity_lucky,\n          activity_prizes: res.activity_prizes,\n          activity_rule: res.activity_rule\n        })\n        this.dateRangeVal = [\n          moment(res.activity_base.start_time.trim()),\n          moment(res.activity_base.end_time.trim())\n        ]\n        this.prizeList = res.activity_prizes\n        res.activity_prizes.forEach((item, index) => {\n          this.prizeNum[index] = item.number\n          this.prizeRate[index] = item.rate\n        })\n        this.preview.startTime = res.activity_base.start_time\n        this.preview.endTime = res.activity_base.end_time\n        this.preview.perTimes = res.activity_rule.per_times\n        this.preview.totalTimes = res.activity_rule.total_times\n        this.preview.description = res.activity_base.activity_description\n        this.preview.title = res.activity_base.activity_sub_name\n        this.notPrize.prize_name = res.activity_lucky.lucky_name\n        this.shareType = res.activity_base.wheel_share_default\n        this.timesType = res.activity_rule.draw_times_type\n        this.isStopSwiper = res.activity_base.wheel_turn_around\n        this.notPrizeImgType = res.activity_lucky.image_default\n        this.shareTitle = res.activity_base.share_title\n        this.share[0].image_id = res.activity_base.share_bg.image_id\n        res.activity_lucky.lucky &&\n          (this.fileList[0] = res.activity_lucky.lucky)\n        this.fileShareList[0] = res.activity_base.share_bg\n        this.prize[0] = res.activity_lucky.lucky\n        if (this.notPrizeImgType === this.NOT_PRIZE_IMG_TYPE.CUSTOM) {\n          this.notPrize.prize = res.activity_lucky.lucky\n        } else {\n          this.notPrize.prize = this.lucky[0]\n        }\n      })\n    }\n  }\n}\n",{"version":3,"sources":["add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"add.vue","sourceRoot":"src/views/pages/brand/marketing/plugin/lottery","sourcesContent":["<template>\n  <st-mina-panel>\n    <h5-container slot=\"preview\" fixed>\n      <template v-slot:title>\n        幸运大转盘\n      </template>\n      <div :class=\"bPage('lottery')\">\n        <div\n          :class=\"bPage('swiper')\"\n          v-if=\"isStopSwiper === STOP_SWIPER.DEFAULT\"\n        >\n          <swiper :options=\"sliderOptions\">\n            <swiper-slide v-for=\"(item, index) in prizeInfoList\" :key=\"index\">\n              <span :class=\"bPage('swiper-text')\">{{ item }}</span>\n            </swiper-slide>\n          </swiper>\n        </div>\n        <img\n          :class=\"bPage('lottery-banner')\"\n          src=\"~@/assets/img/brand/marketing/lottery/bg.png\"\n        />\n        <img\n          :class=\"bPage('lottery-title-bg')\"\n          src=\"~@/assets/img/brand/marketing/lottery/title_bg.png\"\n        />\n        <span :class=\"bPage('lottery-subtitle')\">{{ preview.title }}</span>\n        <div :class=\"bPage('lottery-turntable')\">\n          <div style=\"position:relative\" v-if=\"prizeList.length > 0\">\n            <div\n              class=\"img-wrap\"\n              :class=\"'run-item-' + index\"\n              v-for=\"(item, index) in prizeListFilters\"\n              :key=\"index\"\n            >\n              <img class=\"img\" :src=\"item.prize.image_url\" alt=\"奖品图片\" />\n              <div class=\"text\">{{ item.prize_name }}</div>\n            </div>\n          </div>\n          <div v-if=\"notPrize.prize_name\" class=\"img-wrap run-item-7\">\n            <div class=\"img\">\n              <img\n                style=\"width: 100%;height:100%\"\n                :src=\"\n                  notPrizeImgType === NOT_PRIZE_IMG_TYPE.CUSTOM\n                    ? notPrize.prize.image_url\n                    : lucky[0].image_url\n                \"\n                alt=\"奖品图片\"\n              />\n            </div>\n            <div class=\"text\">{{ notPrize.prize_name }}</div>\n          </div>\n        </div>\n        <div :class=\"bPage('lottery-footer')\">\n          <div :class=\"bPage('lottery-title')\">活动规则</div>\n          <div class=\"mg-b24\">\n            <span class=\"mg-r8\">活动时间:</span>\n            <span>{{ preview.startTime }}--{{ preview.endTime }}</span>\n          </div>\n          <div class=\"mg-b24\">\n            <span class=\"mg-r8\">抽奖规则:</span>\n            <span v-if=\"timesType === 1\">\n              每人每天有{{ preview.perTimes }}次机会\n            </span>\n            <span v-else>每人总共有{{ preview.totalTimes }}次机会</span>\n          </div>\n          <div class=\"mg-b24\">\n            <span class=\"mg-r8\">活动说明:</span>\n            <span>{{ preview.description }}</span>\n          </div>\n        </div>\n      </div>\n    </h5-container>\n    <div slot=\"actions\">\n      <st-button v-show=\"currentIndex === 0\" type=\"primary\" @click=\"next(1)\">\n        下一步\n      </st-button>\n      <st-button v-show=\"currentIndex === 1\" type=\"primary\" @click=\"next(2)\">\n        下一步\n      </st-button>\n      <st-button v-show=\"currentIndex === 2\" type=\"primary\" @click=\"onSubmit\">\n        完成\n      </st-button>\n    </div>\n\n    <div :class=\"bPage('form')\">\n      <Steps :value=\"currentIndex\" @skip=\"next\" :stepArr=\"stepArr\" />\n      <div style=\"padding:24px;\">\n        <st-form\n          style=\"width:500px\"\n          :form=\"form\"\n          labelGutter=\"0\"\n          v-show=\"currentIndex == 0\"\n          labelWidth=\"124px\"\n        >\n          <st-form-item label=\"活动名称\" required>\n            <a-input\n              :disabled=\"info.activity_status === ACTIVITY_STATUS.DISABLED\"\n              placeholder=\"请输入活动名称\"\n              v-decorator=\"decorators.activity_base.activity_name\"\n            ></a-input>\n          </st-form-item>\n          <st-form-item label=\"活动标题\" required>\n            <a-input\n              :disabled=\"info.activity_status === ACTIVITY_STATUS.DISABLED\"\n              @change=\"getTitle\"\n              placeholder=\"请输入活动标题\"\n              v-decorator=\"decorators.activity_base.activity_sub_name\"\n            ></a-input>\n          </st-form-item>\n          <st-form-item label=\"活动时间\" required>\n            <a-range-picker\n              :disabled=\"info.activity_status === ACTIVITY_STATUS.DISABLED\"\n              :disabledDate=\"disabledDate\"\n              :showTime=\"{\n                hideDisabledOptions: true,\n                defaultValue: defaultValue\n              }\"\n              format=\"YYYY-MM-DD HH:mm\"\n              v-model=\"dateRangeVal\"\n              @change=\"onDateChange\"\n            ></a-range-picker>\n          </st-form-item>\n          <st-form-item label=\"活动说明\">\n            <st-textarea\n              :rows=\"4\"\n              :maxlength=\"500\"\n              @change=\"getDescription\"\n              :disabled=\"info.activity_status === ACTIVITY_STATUS.DISABLED\"\n              placeholder=\"请输入活动说明\"\n              v-decorator=\"decorators.activity_base.activity_description\"\n            ></st-textarea>\n          </st-form-item>\n          <st-form-item label=\"轮播获奖\">\n            <a-radio-group\n              :disabled=\"info.activity_status === ACTIVITY_STATUS.DISABLED\"\n              @change=\"stopSwiper\"\n              v-decorator=\"decorators.activity_base.wheel_turn_around\"\n            >\n              <a-radio\n                v-for=\"(item, index) in wheelTurnAround\"\n                :key=\"index\"\n                :value=\"item.value\"\n              >\n                {{ item.label }}\n              </a-radio>\n            </a-radio-group>\n          </st-form-item>\n          <st-form-item label=\"分享设置\">\n            <a-radio-group\n              @change=\"getCurShareType\"\n              :disabled=\"info.activity_status === ACTIVITY_STATUS.DISABLED\"\n              v-decorator=\"decorators.activity_base.wheel_share_default\"\n            >\n              <a-radio\n                v-for=\"(item, index) in wheelDefault\"\n                :key=\"index\"\n                :value=\"item.value\"\n              >\n                {{ item.label }}\n              </a-radio>\n            </a-radio-group>\n            <div v-if=\"shareType === 2\" :class=\"bPage('share-upload')\">\n              <st-form-item label=\"选择图片\" labelWidth=\"60px\">\n                <st-image-upload\n                  width=\"96px\"\n                  height=\"96px\"\n                  :list=\"fileShareList\"\n                  @change=\"onShareChangeGetAvatar\"\n                  placeholder=\"上传图片\"\n                ></st-image-upload>\n                <span :class=\"bPage('share-upload-text')\">\n                  请上传jpg、png格式的图片\n                </span>\n              </st-form-item>\n              <st-form-item label=\"分享标题\" labelWidth=\"60px\">\n                <a-input placeholder=\"分享标题\" v-model=\"shareTitle\"></a-input>\n              </st-form-item>\n            </div>\n            <img\n              class=\"default-img\"\n              v-else\n              :src=\"share[0].image_url\"\n              alt=\"默认图片\"\n            />\n          </st-form-item>\n        </st-form>\n\n        <st-form\n          style=\"width:500px\"\n          :form=\"form\"\n          labelGutter=\"0\"\n          v-show=\"currentIndex == 1\"\n          labelWidth=\"124px\"\n        >\n          <st-form-item label=\"参与用户\" required>\n            <a-radio-group\n              @change=\"getCurCrowdType\"\n              v-decorator=\"decorators.activity_rule.join_crowd_all\"\n            >\n              <a-radio\n                v-for=\"(item, index) in joinCrowdAll\"\n                :key=\"index\"\n                :value=\"item.value\"\n              >\n                {{ item.label }}\n              </a-radio>\n            </a-radio-group>\n\n            <a-select\n              v-if=\"crowdType === CROWD_TYPE.CUSTOM\"\n              placeholder=\"请选择参与用户\"\n              v-decorator=\"decorators.activity_rule.crowd_id\"\n            >\n              <a-select-option\n                v-for=\"(item, index) in crowd\"\n                :key=\"index\"\n                :value=\"item.value\"\n              >\n                {{ item.label }}\n              </a-select-option>\n            </a-select>\n          </st-form-item>\n          <st-form-item label=\"抽奖条件\" required>\n            <a-radio-group\n              v-decorator=\"decorators.activity_rule.draw_condition\"\n            >\n              <a-radio\n                v-for=\"(item, index) in drawCondition\"\n                :key=\"index\"\n                :value=\"item.value\"\n              >\n                {{ item.label }}\n              </a-radio>\n            </a-radio-group>\n          </st-form-item>\n          <st-form-item label=\"抽奖机会\" required>\n            <a-radio-group\n              @change=\"getCurTimesType\"\n              v-decorator=\"decorators.activity_rule.draw_times_type\"\n            >\n              <a-radio\n                v-for=\"(item, index) in drawTimesType\"\n                :key=\"index\"\n                :value=\"item.value\"\n              >\n                {{ item.label }}\n              </a-radio>\n            </a-radio-group>\n            <template>\n              <a-form-item v-show=\"timesType === 1\">\n                每人每天有\n                <a-input-number\n                  :min=\"1\"\n                  :max=\"999\"\n                  :step=\"1\"\n                  :precision=\"0\"\n                  style=\"width: 100px;\"\n                  placeholder=\"请输入\"\n                  v-decorator=\"decorators.activity_rule.per_times\"\n                ></a-input-number>\n                次\n              </a-form-item>\n            </template>\n            <template>\n              <a-form-item v-show=\"timesType === 2\">\n                每人总共有\n                <a-input-number\n                  :min=\"1\"\n                  :max=\"999\"\n                  :step=\"1\"\n                  :precision=\"0\"\n                  style=\"width: 100px;\"\n                  placeholder=\"请输入\"\n                  v-decorator=\"decorators.activity_rule.total_times\"\n                ></a-input-number>\n                次\n              </a-form-item>\n            </template>\n          </st-form-item>\n          <st-form-item label=\" 中奖次数\">\n            每人最多可中奖\n            <a-input-number\n              :min=\"1\"\n              :max=\"999\"\n              :step=\"1\"\n              :precision=\"0\"\n              style=\"width: 100px;\"\n              placeholder=\"请输入\"\n              v-decorator=\"decorators.activity_rule.prize_times\"\n            ></a-input-number>\n            次\n          </st-form-item>\n        </st-form>\n\n        <st-form\n          style=\"width:756px;padding-left:62px;\"\n          :form=\"form\"\n          v-show=\"currentIndex == 2\"\n        >\n          <st-t3 class=\"mg-b24\">奖品设置</st-t3>\n          <st-form-table\n            style=\"border:1px solid rgba(205,212,223,1);padding:12px;\"\n          >\n            <thead>\n              <tr>\n                <template v-for=\"(item, index) in columsTitlelist\">\n                  <th :key=\"index\">{{ item }}</th>\n                </template>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td colspan=\"6\" class=\"st-form-table__add\">\n                  <st-button\n                    :disabled=\"\n                      $searchQuery.activity_id && $searchQuery.status === 1\n                    \"\n                    @click=\"getCurPrizeIndex(-1)\"\n                    type=\"dashed\"\n                    block\n                    v-if=\"prizeList.length < 7\"\n                    v-modal-link=\"{\n                      name: 'brand-marketing-plugin-add-prize',\n                      on: { change: getPrizeInfo }\n                    }\"\n                  >\n                    新增奖品\n                  </st-button>\n                </td>\n              </tr>\n              <template v-for=\"(item, index) in prizeList\">\n                <tr :key=\"item.id\">\n                  <td>{{ item.prize_name }}</td>\n                  <td>{{ item.prize_type === 1 ? '优惠券' : '兑换码' }}</td>\n                  <td>\n                    {{\n                      item.prize_type === 1\n                        ? item.shop_num || item.support_shop_ids.length\n                        : item.support_shop_ids.length\n                    }}\n                  </td>\n                  <td>\n                    <span v-show=\"isShowEditTable !== index\">\n                      {{ item.number }}\n                    </span>\n                    <st-input-number\n                      v-show=\"isShowEditTable === index\"\n                      :min=\"1\"\n                      :max=\"99999\"\n                      :step=\"1\"\n                      :precision=\"0\"\n                      :value=\"item.number\"\n                      :index=\"index\"\n                      @change=\"editTableNum($event, index)\"\n                    ></st-input-number>\n                  </td>\n                  <td>\n                    <span v-show=\"isShowEditTable !== index\">\n                      {{ item.rate }}\n                    </span>\n                    <st-input-number\n                      v-show=\"isShowEditTable === index\"\n                      :min=\"0\"\n                      :max=\"100\"\n                      :float=\"true\"\n                      :value=\"item.rate\"\n                      @change=\"editTableRate($event, index)\"\n                    ></st-input-number>\n                  </td>\n                  <td>\n                    <st-table-actions>\n                      <a @click=\"showEditTable(index)\">\n                        {{ isShowEditTable === index ? '确认' : '编辑' }}\n                      </a>\n                      <a\n                        :disabled=\"deleteBtnStatus\"\n                        href=\"javascript:;\"\n                        @click=\"onDelete(index)\"\n                      >\n                        {{ isShowEditTable === index ? '取消' : '删除' }}\n                      </a>\n                    </st-table-actions>\n                  </td>\n                </tr>\n              </template>\n            </tbody>\n          </st-form-table>\n          <st-t3 class=\"mg-b24 mg-t32\">未中奖设置</st-t3>\n          <st-form-item label=\"名称\" labelWidth=\"40px\" required>\n            <a-input\n              @change=\"getName\"\n              :disabled=\"info.activity_status === ACTIVITY_STATUS.DISABLED\"\n              placeholder=\"请输入未奖品名称\"\n              v-decorator=\"decorators.activity_lucky.lucky_name\"\n            ></a-input>\n          </st-form-item>\n          <st-form-item label=\" 图片\" labelWidth=\"43px\" required>\n            <a-radio-group\n              :disabled=\"info.activity_status === ACTIVITY_STATUS.DISABLED\"\n              v-decorator=\"decorators.activity_lucky.image_default\"\n              @change=\"getNotImgType\"\n            >\n              <a-radio\n                v-for=\"(item, index) in imgType\"\n                :key=\"index\"\n                :value=\"item.value\"\n              >\n                {{ item.label }}\n              </a-radio>\n            </a-radio-group>\n            <div\n              v-if=\"notPrizeImgType === NOT_PRIZE_IMG_TYPE.CUSTOM\"\n              :class=\"bPage('lucky-upload')\"\n            >\n              <st-image-upload\n                width=\"96px\"\n                height=\"96px\"\n                :list=\"fileList\"\n                @change=\"onChangeGetAvatar\"\n                placeholder=\"上传图片\"\n              ></st-image-upload>\n              <span :class=\"bPage('lucky-upload-text')\">\n                请上传jpg、png格式的图片\n              </span>\n            </div>\n\n            <img\n              class=\"default-img\"\n              v-else\n              :src=\"lucky[0].image_url\"\n              alt=\"默认图片\"\n            />\n          </st-form-item>\n        </st-form>\n      </div>\n    </div>\n  </st-mina-panel>\n</template>\n<script>\nimport { MessageService } from '@/services/message.service'\nimport { AddService } from './add.service'\nimport H5Container from '@/views/biz-components/h5/h5-container'\nimport Steps from './components#/step'\nimport { ruleOptions } from './form.config.ts'\nimport { PatternService } from '@/services/pattern.service'\nimport StImageUpload from '@/views/biz-components/st/image-upload/image-upload.vue'\nimport BrandMarketingPluginAddPrize from '@/views/biz-modals/brand/marketing/plugin/add-prize'\nimport { cloneDeep } from 'lodash-es'\nimport 'swiper/dist/css/swiper.css'\nimport { swiper, swiperSlide } from 'vue-awesome-swiper'\nimport {\n  TIMES_TYPE,\n  CROWD_TYPE,\n  SHARE_TYPE,\n  STOP_SWIPER,\n  ACTIVITY_STATUS,\n  NOT_PRIZE_IMG_TYPE\n} from '@/constants/marketing/lottery'\n\nexport default {\n  name: 'PluginLotteryAdd',\n  data(vm) {\n    const form = this.$stForm.create()\n    const decorators = form.decorators(ruleOptions)\n    return {\n      form,\n      decorators,\n      TIMES_TYPE,\n      CROWD_TYPE,\n      SHARE_TYPE,\n      STOP_SWIPER,\n      ACTIVITY_STATUS,\n      NOT_PRIZE_IMG_TYPE,\n      columsTitlelist: [\n        '奖品名称',\n        '奖品类型',\n        '可用门店（家）',\n        '奖品数量（个）',\n        '中奖概率 (%)',\n        '操作'\n      ],\n      info: {},\n      preview: {\n        title: '',\n        startTime: '',\n        endTime: '',\n        perTimes: 0,\n        totalTimes: 0,\n        description: ''\n      },\n      shareTitle: '',\n      fileList: [],\n      fileShareList: [],\n      prizeList: [],\n      timesType: TIMES_TYPE.DEFAULT,\n      crowdType: CROWD_TYPE.DEFAULT,\n      shareType: SHARE_TYPE.DEFAULT,\n      isStopSwiper: STOP_SWIPER.DEFAULT,\n      stepArr: [\n        {\n          title: '基础信息',\n          key: 1\n        },\n        {\n          title: '抽奖规则',\n          key: 2\n        },\n        {\n          title: '奖项设置',\n          key: 3\n        }\n      ],\n      currentIndex: 0,\n      curPrizeIndex: -1,\n      notPrizeImgType: NOT_PRIZE_IMG_TYPE.DEFAULT,\n      dateRangeVal: [],\n      notPrize: {\n        prize_name: '未中奖',\n        prize: {\n          image_url: ''\n        }\n      },\n      sliderOptions: {\n        autoplay: {\n          delay: 3000,\n          disableOnInteraction: false\n        }\n      },\n      swiperOption: {\n        spaceBetween: 6,\n        slidesPerView: 1.05\n      },\n      defaultValue: [moment().format('HH:mm'), moment('11:59', 'HH:mm')],\n      isShowEditTable: -1,\n      prizeRate: [],\n      prizeNum: [],\n      // 奖品顺序\n      prizeSort: [\n        [],\n        [],\n        [0, 1, 2, -1, 0, 1, 2, -1],\n        [0, -1, 1, -1, 2, -1, 3, -1],\n        [0, -1, 1, -1, 2, 3, 4, -1],\n        [0, 1, 2, -1, 3, 4, 5, -1],\n        [0, 1, 2, 3, 4, 5, 6, -1]\n      ]\n    }\n  },\n  bem: {\n    bPage: 'page-brand-marketing-plugin-lottery-add'\n  },\n  serviceInject() {\n    return {\n      addService: AddService,\n      pattern: PatternService,\n      messageService: MessageService\n    }\n  },\n  rxState() {\n    return {\n      drawCondition: this.addService.drawCondition$,\n      drawTimesType: this.addService.drawTimesType$,\n      invitePoster: this.addService.invitePoster$,\n      wheelDefault: this.addService.wheelDefault$,\n      wheelTurnAround: this.addService.wheelTurnAround$,\n      joinCrowdAll: this.addService.joinCrowdAll$,\n      crowd: this.addService.crowd$,\n      imgType: this.addService.imgType$,\n      prizeInfoList: this.addService.prizeInfoList$,\n      lucky: this.addService.lucky$,\n      prize: this.addService.prize$,\n      share: this.addService.share$\n    }\n  },\n  modals: {\n    BrandMarketingPluginAddPrize\n  },\n  components: {\n    H5Container,\n    Steps,\n    swiper,\n    swiperSlide,\n    StImageUpload\n  },\n  mounted() {\n    // this.notPrize.prize = this.lucky[0]\n    if (this.$searchQuery.activity_id) {\n      this.editVIew(this.$searchQuery.activity_id)\n    }\n  },\n  computed: {\n    deleteBtnStatus() {\n      return this.$searchQuery.activity_id && this.$searchQuery.status === 1\n    },\n    prizeListFilters(value) {\n      if (this.prizeList.length <= 2) {\n        return this.prizeList\n      }\n      return this.prizeSort[this.prizeList.length - 1].map((item, index) => {\n        if (item > -1) {\n          return this.prizeList[item]\n        } else {\n          return {\n            prize: {\n              image_url:\n                this.notPrizeImgType === this.NOT_PRIZE_IMG_TYPE.CUSTOM\n                  ? this.notPrize.prize.image_url\n                  : this.lucky[0].image_url\n            },\n            prize_name: this.notPrize.prize_name\n          }\n        }\n      })\n    }\n  },\n  methods: {\n    showEditTable(index) {\n      if (this.isShowEditTable === index) {\n        this.prizeList[index].number = this.prizeNum[index]\n        this.prizeList[index].rate = this.prizeRate[index]\n        this.isShowEditTable = -1\n      } else {\n        this.isShowEditTable = index\n      }\n    },\n    next(para) {\n      if (para.index) {\n        para = para.index - 1\n      }\n      if (para === 0) {\n        this.currentIndex = 0\n      }\n      if (para === 1) {\n        this.form\n          .validate([\n            'activity_base.activity_name',\n            'activity_base.activity_description',\n            'activity_base.wheel_turn_around',\n            'activity_base.wheel_share_default',\n            'activity_base.share_title',\n            'activity_base.activity_sub_name'\n          ])\n          .then(() => {\n            this.currentIndex = para\n          })\n      }\n      if (para === 2) {\n        this.form\n          .validate([\n            'activity_base.activity_name',\n            'activity_base.activity_description',\n            'activity_base.wheel_turn_around',\n            'activity_base.wheel_share_default',\n            'activity_base.share_title',\n            'activity_base.activity_sub_name',\n            'activity_rule.join_crowd_all',\n            'activity_rule.draw_condition',\n            'activity_rule.draw_times_type',\n            'activity_rule.per_times',\n            'activity_rule.total_times'\n          ])\n          .then(() => {\n            this.currentIndex = para\n          })\n      }\n    },\n    onChangeGetAvatar(imageFiles) {\n      this.fileList = cloneDeep(imageFiles)\n      this.notPrize.prize = this.fileList[0]\n    },\n    onShareChangeGetAvatar(imageFiles) {\n      this.fileShareList = cloneDeep(imageFiles)\n    },\n    onSubmit() {\n      this.form.validate().then(value => {\n        value.activity_base.start_time = this.preview.startTime\n        value.activity_base.end_time = this.preview.endTime\n        value.activity_base.share_title = this.shareTitle\n        // 选择自定义却不传图片\n        value.activity_base.share_bg =\n          this.shareType === SHARE_TYPE.CUSTOM\n            ? this.fileShareList[0] || this.share[0]\n            : this.share[0]\n        value.activity_prizes = this.prizeList\n        value.activity_lucky.lucky =\n          this.notPrizeImgType === NOT_PRIZE_IMG_TYPE.CUSTOM\n            ? this.fileList[0] || this.prize[0]\n            : this.lucky[0]\n        if (this.timesType === 1 && !value.activity_rule.per_times) {\n          this.messageService.warn({\n            content: '请填写抽奖次数'\n          })\n          return\n        }\n        if (this.timesType === 2 && !value.activity_rule.total_times) {\n          this.messageService.warn({\n            content: '请填写抽奖次数'\n          })\n          return\n        }\n        value.activity_rule.prize_sort = this.prizeSort[\n          this.prizeList.length - 1\n        ]\n        if (this.$searchQuery.activity_id) {\n          value.activity_id = this.$searchQuery.activity_id\n          this.addService.edit(value).subscribe(res => {\n            this.$router.push('./success?id=' + res.id)\n          })\n        } else {\n          this.addService.add(value).subscribe(res => {\n            this.$router.push('./success?id=' + res.id)\n          })\n        }\n      })\n    },\n    getTitle(e) {\n      this.preview.title = e.target.value\n    },\n    getName(e) {\n      this.notPrize.prize_name = e.target.value\n    },\n    getPerTimes(val) {\n      this.preview.perTimes = val\n    },\n    getTotalTimes(val) {\n      this.preview.totalTimes = val\n    },\n    getDescription(val) {\n      this.preview.description = val\n    },\n    // 抽奖次数类型\n    getCurTimesType(e) {\n      this.timesType = e.target.value\n    },\n    // 人群类型\n    getCurCrowdType(e) {\n      this.crowdType = e.target.value\n    },\n    // 分享类型\n    getCurShareType(e) {\n      this.shareType = e.target.value\n    },\n    // 轮播开关\n    stopSwiper(e) {\n      this.isStopSwiper = e.target.value\n    },\n    onDateChange(data, str) {\n      this.preview.startTime = str[0]\n      this.preview.endTime = str[1]\n    },\n    getNotImgType(e) {\n      this.notPrizeImgType = e.target.value\n    },\n    getPrizeInfo(val) {\n      if (this.curPrizeIndex > -1) {\n        this.prizeList.splice(this.curPrizeIndex, 1, val)\n      } else {\n        this.prizeList.push(val)\n        this.prizeRate.push(val.rate)\n        this.prizeNum.push(val.number)\n      }\n    },\n    getCurPrizeIndex(index) {\n      this.curPrizeIndex = index\n    },\n    disabledDate(current) {\n      return (\n        current && current.format('YYYY-MM-DD') < moment().format('YYYY-MM-DD')\n      )\n    },\n    onDelete(para) {\n      if (this.isShowEditTable === para) {\n        this.isShowEditTable = -1\n        return false\n      } else {\n        this.prizeRate.splice(para, 1)\n        this.prizeNum.splice(para, 1)\n      }\n      this.prizeList = this.prizeList.filter((item, index) => {\n        return index !== para\n      })\n    },\n    editTableNum(val, index) {\n      this.prizeNum[index] = val\n    },\n    editTableRate(val, index) {\n      this.prizeRate[index] = val\n    },\n    editVIew(id) {\n      return this.addService.editVIew(id).subscribe(res => {\n        this.info = res\n        this.form.setFieldsValue({\n          activity_base: res.activity_base,\n          activity_lucky: res.activity_lucky,\n          activity_prizes: res.activity_prizes,\n          activity_rule: res.activity_rule\n        })\n        this.dateRangeVal = [\n          moment(res.activity_base.start_time.trim()),\n          moment(res.activity_base.end_time.trim())\n        ]\n        this.prizeList = res.activity_prizes\n        res.activity_prizes.forEach((item, index) => {\n          this.prizeNum[index] = item.number\n          this.prizeRate[index] = item.rate\n        })\n        this.preview.startTime = res.activity_base.start_time\n        this.preview.endTime = res.activity_base.end_time\n        this.preview.perTimes = res.activity_rule.per_times\n        this.preview.totalTimes = res.activity_rule.total_times\n        this.preview.description = res.activity_base.activity_description\n        this.preview.title = res.activity_base.activity_sub_name\n        this.notPrize.prize_name = res.activity_lucky.lucky_name\n        this.shareType = res.activity_base.wheel_share_default\n        this.timesType = res.activity_rule.draw_times_type\n        this.isStopSwiper = res.activity_base.wheel_turn_around\n        this.notPrizeImgType = res.activity_lucky.image_default\n        this.shareTitle = res.activity_base.share_title\n        this.share[0].image_id = res.activity_base.share_bg.image_id\n        res.activity_lucky.lucky &&\n          (this.fileList[0] = res.activity_lucky.lucky)\n        this.fileShareList[0] = res.activity_base.share_bg\n        this.prize[0] = res.activity_lucky.lucky\n        if (this.notPrizeImgType === this.NOT_PRIZE_IMG_TYPE.CUSTOM) {\n          this.notPrize.prize = res.activity_lucky.lucky\n        } else {\n          this.notPrize.prize = this.lucky[0]\n        }\n      })\n    }\n  }\n}\n</script>\n"]}]}