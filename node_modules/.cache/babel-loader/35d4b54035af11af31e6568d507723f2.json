{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/store/data/data.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/store/data/data.vue","mtime":1600926556586},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport pieImg from '@/assets/img/shop/dashboard/pie.png';\nimport inoutNumImg from '@/assets/img/shop/dashboard/inoutNum.png';\nimport moment from 'moment';\nimport ShopStoreDataLine from '@/views/biz-components/stat/shop-store-data-line';\nimport WholeTabs from \"./components#/whole-tabs\";\nimport BuyConsumptionTables from \"./components#/buy-consumption-tables\";\nimport DatePicker from \"./components#/date-picker\";\nimport SalesAnalysis from \"./components#/sales-analysis\";\nimport BuyNumber from \"./components#/buy-number\";\nimport WholeOrderMember from \"./components#/whole-order-member\";\nimport ShopStoreDataRevenueRing from '@/views/biz-components/stat/shop-store-data-revenue-ring';\nimport { DataService } from \"./data.service\";\nimport { headerInfo, wholeNav, headerTitleItem, fieldNav, fieldInfo } from \"./data.config.ts\";\nexport default {\n  serviceInject: function serviceInject() {\n    return {\n      dataService: DataService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      dataProfile: this.dataService.dataProfile$,\n      storeBoard: this.dataService.storeBoard$,\n      storeSaleList: this.dataService.storeSaleList$,\n      storeCategoryRank: this.dataService.storeCategoryRank$,\n      storeMemberAnalysis: this.dataService.storeMemberAnalysis$\n    };\n  },\n  bem: {\n    basic: 'shop-store-data',\n    salesCategory: 'sales-category',\n    headerContent: 'header-content'\n  },\n  data: function data() {\n    return {\n      wholenavIndex: 0,\n      pieImg: pieImg,\n      inoutNumImg: inoutNumImg,\n      wholeNavcom: 'shop-store-data-ring',\n      headerInfo: headerInfo,\n      wholeNav: wholeNav,\n      headerTitleItem: headerTitleItem,\n      fieldNav: fieldNav,\n      fieldInfo: fieldInfo,\n      tabsObjData: {\n        choose_type: 1,\n        date_type: 1,\n        date: null\n      }\n    };\n  },\n  components: {\n    ShopStoreDataLine: ShopStoreDataLine,\n    DatePicker: DatePicker,\n    WholeTabs: WholeTabs,\n    BuyConsumptionTables: BuyConsumptionTables,\n    SalesAnalysis: SalesAnalysis,\n    BuyNumber: BuyNumber,\n    ShopStoreDataRevenueRing: ShopStoreDataRevenueRing,\n    WholeOrderMember: WholeOrderMember\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this.wholenavFilter();\n    });\n  },\n  methods: {\n    // 整体看板时间\n    wholeTimesFn: function wholeTimesFn(value) {\n      var _this2 = this;\n\n      this.dataService.getStoreBoard(value).subscribe(function (res) {\n        _this2.wholenavFilter();\n      });\n    },\n    // 销售分析时间\n    saleTimesFn: function saleTimesFn(value) {\n      this.dataService.getStoreSaleList(value).subscribe();\n    },\n    // 类目分析时间\n    categoryTimesFn: function categoryTimesFn(value) {\n      this.dataService.getStoreCategoryRank(value).subscribe();\n    },\n    // 购买次数/消费金额时间\n    userAnalysisTimesFn: function userAnalysisTimesFn(value) {\n      this.tabsObjData.date_type = value.date_type;\n      this.tabsObjData.date = value.date;\n      this.dataService.getStoreMemberAnalysis(this.tabsObjData).subscribe();\n    },\n    // 整体看板订单/会员折线图\n    filterLine: function filterLine(data, type) {\n      var _this3 = this;\n\n      if (!data[this.fieldNav[this.wholenavIndex]].trend.length) return [];\n      return data[this.fieldNav[this.wholenavIndex]].trend.map(function (item) {\n        return {\n          date: item.date,\n          amount: Number(item[_this3.fieldInfo[_this3.wholenavIndex]])\n        };\n      });\n    },\n    // 整体看板数据处理\n    wholenavFilter: function wholenavFilter() {\n      var _this4 = this;\n\n      var data = this.storeBoard;\n      this.wholeNav.forEach(function (item, index) {\n        var dataInfo = data[_this4.fieldNav[index]][_this4.fieldInfo[index]];\n\n        _this4.$set(item, 'num', dataInfo);\n\n        item.unit = data[_this4.fieldNav[index]].unit;\n      });\n    },\n    onChangeTabs: function onChangeTabs(query) {\n      this.tabsObjData = Object.assign(this.tabsObjData, {\n        choose_type: query\n      });\n      this.tabsObjData.date = this.tabsObjData.date ? this.tabsObjData.date : moment().subtract(1, 'days').format('YYYY-MM-DD') + '';\n      this.dataService.getStoreMemberAnalysis(this.tabsObjData).subscribe();\n    },\n    refresh: function refresh() {\n      return this.dataService.getDataProfile(this.chartTodayShop);\n    },\n    wholenavFun: function wholenavFun(index, item) {\n      this.wholenavIndex = index;\n\n      if (index > 1) {\n        this.wholeNavcom = 'brand-user-avg-bar';\n      } else {\n        this.wholeNavcom = 'shop-store-data-ring';\n      }\n    }\n  }\n};",{"version":3,"sources":["data.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div :class=\"basic()\">\n    <st-panel-layout :class=\"basic('main')\">\n      <!-- 云店概览 -->\n      <st-panel title=\"云店概览\">\n        <div slot=\"actions\">\n          <st-refresh-btn :action=\"refresh\"></st-refresh-btn>\n        </div>\n        <ul :class=\"headerContent()\">\n          <li\n            v-for=\"(item, index) in headerInfo\"\n            :key=\"index\"\n            :class=\"headerContent('item')\"\n          >\n            <img :src=\"item.icon\" :class=\"headerContent('item-icon')\" />\n            <div>\n              <div :class=\"headerContent('item-title')\">\n                {{ item.title }}\n              </div>\n              <div :class=\"headerContent('day-money')\">\n                <span class=\"font-number\">\n                  {{ dataProfile.today[headerTitleItem[index]] }}\n                </span>\n              </div>\n              <div :class=\"headerContent('yesterday-money')\">\n                昨日:\n                <span class=\"font-number\">\n                  {{ dataProfile.yesterday[headerTitleItem[index]] }}\n                </span>\n              </div>\n            </div>\n          </li>\n        </ul>\n      </st-panel>\n      <!-- 整体看板 -->\n      <section>\n        <st-panel class=\"mg-t16\" title=\"整体看板\">\n          <div slot=\"actions\">\n            <date-picker @onChange=\"wholeTimesFn\"></date-picker>\n          </div>\n          <div :class=\"basic('whole')\">\n            <div\n              :class=\"[\n                basic('whole-item'),\n                wholenavIndex === index ? basic('whole-item-active') : ''\n              ]\"\n              v-for=\"(item, index) in wholeNav\"\n              :key=\"index\"\n              @click=\"wholenavFun(index, item)\"\n            >\n              <div :class=\"basic('whole-item-title')\">\n                {{ item.title }}\n                <img :class=\"basic('whole-item-icon')\" :src=\"item.icon\" />\n              </div>\n              <div :class=\"basic('whole-item-text')\">\n                <span class=\"font-number\">{{ item.num }}</span>\n              </div>\n            </div>\n          </div>\n          <div :class=\"basic('revenue-trend')\">\n            <a-row>\n              <a-col :span=\"16\">\n                <div>\n                  <!-- <st-t3>\n                    {{ wholeNav[wholenavIndex].title }}\n                  </st-t3> -->\n                  <shop-store-data-line\n                    v-if=\"\n                      filterLine(storeBoard, wholeNav[wholenavIndex].title)\n                        .length\n                    \"\n                    :data=\"\n                      filterLine(storeBoard, wholeNav[wholenavIndex].title)\n                    \"\n                    :tooltipKey=\"wholeNav[wholenavIndex].title\"\n                    :unit=\"wholeNav[wholenavIndex].unit\"\n                  ></shop-store-data-line>\n                  <div v-else :class=\"basic('entry-store-img')\">\n                    <img\n                      :src=\"inoutNumImg\"\n                      :class=\"basic('entry-store-img-line')\"\n                    />\n                  </div>\n                </div>\n              </a-col>\n              <a-col :span=\"8\">\n                <div class=\"ring\">\n                  <whole-tabs>\n                    <template v-slot:user>\n                      <whole-order-member\n                        :storeBoard=\"storeBoard\"\n                        :wholeNav=\"wholeNav\"\n                        :wholeNavcom=\"wholeNavcom\"\n                        orderMemberFlag=\"order\"\n                        :wholenavIndex=\"wholenavIndex\"\n                        :fieldNav=\"fieldNav\"\n                      ></whole-order-member>\n                    </template>\n                    <template v-slot:marketing>\n                      <whole-order-member\n                        :storeBoard=\"storeBoard\"\n                        :wholeNav=\"wholeNav\"\n                        :wholeNavcom=\"wholeNavcom\"\n                        orderMemberFlag=\"member\"\n                        :wholenavIndex=\"wholenavIndex\"\n                        :fieldNav=\"fieldNav\"\n                        :colors=\"['#4679F9', '#894BFF', '#009DFF']\"\n                      ></whole-order-member>\n                    </template>\n                  </whole-tabs>\n                </div>\n              </a-col>\n            </a-row>\n          </div>\n        </st-panel>\n        <!-- 销售分析 类目分析-->\n        <div :class=\"salesCategory()\">\n          <div :class=\"salesCategory('sales-box')\">\n            <a-row>\n              <a-col :span=\"16\" :class=\"salesCategory('sales-box__left')\">\n                <st-container class=\"bg-white\" type=\"2\">\n                  <st-t3>销售分析</st-t3>\n                  <date-picker @onChange=\"saleTimesFn\"></date-picker>\n                </st-container>\n                <div :class=\"salesCategory('sales-top')\">\n                  <a-col :span=\"12\">\n                    <div>\n                      <sales-analysis\n                        title=\"销量TOP5\"\n                        :salesTitle=\"['排名', '商品', '销量(件)']\"\n                        nameLength=\"6\"\n                        :salesList=\"storeSaleList.sales_rank\"\n                      ></sales-analysis>\n                    </div>\n                  </a-col>\n                  <a-col :span=\"12\" class=\"hr\">\n                    <div>\n                      <sales-analysis\n                        title=\"营收TOP5\"\n                        :salesTitle=\"['排名', '商品', '营收(元)']\"\n                        nameLength=\"6\"\n                        :salesList=\"storeSaleList.revenue_rank\"\n                      ></sales-analysis>\n                    </div>\n                  </a-col>\n                </div>\n              </a-col>\n              <a-col :span=\"8\">\n                <div :class=\"salesCategory('category-box')\">\n                  <st-container class=\"bg-white\" type=\"2\">\n                    <st-t3>类目分析</st-t3>\n                    <date-picker\n                      @onChange=\"categoryTimesFn\"\n                      class=\"date-picker\"\n                    ></date-picker>\n                  </st-container>\n                  <div class=\"category\">\n                    <st-t4>类目营收占比</st-t4>\n                    <shop-store-data-revenue-ring\n                      :data=\"storeCategoryRank.category_list\"\n                      :total=\"Number(storeCategoryRank.total_revenue)\"\n                      style=\"width: 100%;\"\n                      v-if=\"storeCategoryRank.category_list.length\"\n                    ></shop-store-data-revenue-ring>\n                    <div :class=\"basic('entry-pie-img')\" v-else>\n                      <img :src=\"pieImg\" />\n                    </div>\n                  </div>\n                </div>\n              </a-col>\n            </a-row>\n          </div>\n        </div>\n        <!-- 购买次数 消费金额 -->\n        <div class=\"buy-consumption\">\n          <buy-consumption-tables\n            @change=\"onChangeTabs\"\n            @onChange=\"userAnalysisTimesFn\"\n          >\n            <template v-slot:user>\n              <buy-number :data=\"storeMemberAnalysis\"></buy-number>\n            </template>\n            <template v-slot:marketing>\n              <buy-number\n                :flag=\"false\"\n                :data=\"storeMemberAnalysis\"\n              ></buy-number>\n            </template>\n          </buy-consumption-tables>\n        </div>\n      </section>\n    </st-panel-layout>\n  </div>\n</template>\n<script>\nimport pieImg from '@/assets/img/shop/dashboard/pie.png'\nimport inoutNumImg from '@/assets/img/shop/dashboard/inoutNum.png'\nimport moment from 'moment'\nimport ShopStoreDataLine from '@/views/biz-components/stat/shop-store-data-line'\nimport WholeTabs from './components#/whole-tabs'\nimport BuyConsumptionTables from './components#/buy-consumption-tables'\nimport DatePicker from './components#/date-picker'\nimport SalesAnalysis from './components#/sales-analysis'\nimport BuyNumber from './components#/buy-number'\nimport WholeOrderMember from './components#/whole-order-member'\nimport ShopStoreDataRevenueRing from '@/views/biz-components/stat/shop-store-data-revenue-ring'\nimport { DataService } from './data.service'\nimport {\n  headerInfo,\n  wholeNav,\n  headerTitleItem,\n  fieldNav,\n  fieldInfo\n} from './data.config.ts'\nexport default {\n  serviceInject() {\n    return {\n      dataService: DataService\n    }\n  },\n  rxState() {\n    return {\n      dataProfile: this.dataService.dataProfile$,\n      storeBoard: this.dataService.storeBoard$,\n      storeSaleList: this.dataService.storeSaleList$,\n      storeCategoryRank: this.dataService.storeCategoryRank$,\n      storeMemberAnalysis: this.dataService.storeMemberAnalysis$\n    }\n  },\n  bem: {\n    basic: 'shop-store-data',\n    salesCategory: 'sales-category',\n    headerContent: 'header-content'\n  },\n  data() {\n    return {\n      wholenavIndex: 0,\n      pieImg,\n      inoutNumImg,\n      wholeNavcom: 'shop-store-data-ring',\n      headerInfo,\n      wholeNav,\n      headerTitleItem,\n      fieldNav,\n      fieldInfo,\n      tabsObjData: {\n        choose_type: 1,\n        date_type: 1,\n        date: null\n      }\n    }\n  },\n  components: {\n    ShopStoreDataLine,\n    DatePicker,\n    WholeTabs,\n    BuyConsumptionTables,\n    SalesAnalysis,\n    BuyNumber,\n    ShopStoreDataRevenueRing,\n    WholeOrderMember\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.wholenavFilter()\n    })\n  },\n  methods: {\n    // 整体看板时间\n    wholeTimesFn(value) {\n      this.dataService.getStoreBoard(value).subscribe(res => {\n        this.wholenavFilter()\n      })\n    },\n    // 销售分析时间\n    saleTimesFn(value) {\n      this.dataService.getStoreSaleList(value).subscribe()\n    },\n    // 类目分析时间\n    categoryTimesFn(value) {\n      this.dataService.getStoreCategoryRank(value).subscribe()\n    },\n    // 购买次数/消费金额时间\n    userAnalysisTimesFn(value) {\n      this.tabsObjData.date_type = value.date_type\n      this.tabsObjData.date = value.date\n      this.dataService.getStoreMemberAnalysis(this.tabsObjData).subscribe()\n    },\n    // 整体看板订单/会员折线图\n    filterLine(data, type) {\n      if (!data[this.fieldNav[this.wholenavIndex]].trend.length) return []\n      return data[this.fieldNav[this.wholenavIndex]].trend.map(item => {\n        return {\n          date: item.date,\n          amount: Number(item[this.fieldInfo[this.wholenavIndex]])\n        }\n      })\n    },\n    // 整体看板数据处理\n    wholenavFilter() {\n      let data = this.storeBoard\n      this.wholeNav.forEach((item, index) => {\n        let dataInfo = data[this.fieldNav[index]][this.fieldInfo[index]]\n        this.$set(item, 'num', dataInfo)\n        item.unit = data[this.fieldNav[index]].unit\n      })\n    },\n    onChangeTabs(query) {\n      this.tabsObjData = Object.assign(this.tabsObjData, { choose_type: query })\n      this.tabsObjData.date = this.tabsObjData.date\n        ? this.tabsObjData.date\n        : moment()\n            .subtract(1, 'days')\n            .format('YYYY-MM-DD') + ''\n      this.dataService.getStoreMemberAnalysis(this.tabsObjData).subscribe()\n    },\n    refresh() {\n      return this.dataService.getDataProfile(this.chartTodayShop)\n    },\n    wholenavFun(index, item) {\n      this.wholenavIndex = index\n      if (index > 1) {\n        this.wholeNavcom = 'brand-user-avg-bar'\n      } else {\n        this.wholeNavcom = 'shop-store-data-ring'\n      }\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/pages/shop/store/data"}]}