{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/finance/salary/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/finance/salary/list.vue","mtime":1597396799951},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { ListService } from './list.service'\nimport { columns } from './list.config.ts'\nimport tableMixin from '@/mixins/table.mixin'\nimport { UserService } from '@/services/user.service'\nimport BrandFinanceClassCommission from '@/views/biz-modals/brand/finance/class-commission'\nimport BrandFinanceSaleCommission from '@/views/biz-modals/brand/finance/sale-commission'\nimport BrandFinanceStaffShop from '@/views/biz-modals/brand/finance/staff-shop'\nimport moment from 'moment'\nimport { cloneDeep } from 'lodash-es'\nexport default {\n  name: 'BrandFinanceSalary',\n  mixins: [tableMixin],\n  data() {\n    return {\n      monthRange: [],\n      start_month: null,\n      end_month: null\n    }\n  },\n  bem: {\n    b: 'page-brand-finance-salary',\n    bDate: 'st-recent-radio-group'\n  },\n  modals: {\n    BrandFinanceClassCommission,\n    BrandFinanceSaleCommission,\n    BrandFinanceStaffShop\n  },\n  serviceInject() {\n    return {\n      listService: ListService,\n      userService: UserService\n    }\n  },\n  rxState() {\n    return {\n      list: this.listService.list$,\n      page: this.listService.page$,\n      loading: this.listService.loading$,\n      info: this.listService.info$,\n      department: this.listService.department$,\n      shopList: this.userService.shopList$,\n      auth: this.listService.auth$\n    }\n  },\n  computed: {\n    columns\n  },\n  mounted() {\n    this.setQueryParams()\n  },\n  watch: {\n    $searchQuery() {\n      this.setQueryParams()\n    }\n  },\n  methods: {\n    setQueryParams() {\n      this.start_month = null\n      this.end_month = null\n      if (this.$searchQuery.start_month && this.$searchQuery.end_month) {\n        this.start_month = moment(this.$searchQuery.start_month)\n        this.end_month = moment(this.$searchQuery.end_month)\n      }\n    },\n    change() {\n      if (this.start_month && this.end_month) {\n        this.$searchQuery.start_month = this.start_month.format('YYYY-MM')\n        this.$searchQuery.end_month = this.end_month.format('YYYY-MM')\n        this.onSearch()\n      }\n      if (!this.start_month && !this.end_month) {\n        this.$searchQuery.start_month = ''\n        this.$searchQuery.end_month = ''\n        this.onSearch()\n      }\n    },\n    disabledStartDate(current) {\n      if (this.end_month) {\n        const startMonth = cloneDeep(current).startOf('month')\n        const endMonth = cloneDeep(this.end_month).startOf('month')\n        return (\n          startMonth > cloneDeep(this.end_month).startOf('month') ||\n          startMonth <= endMonth.subtract(12, 'M')\n        )\n      }\n      return false\n    },\n    disabledEndDate(current) {\n      if (this.start_month) {\n        const startMonth = cloneDeep(this.start_month).startOf('month')\n        const endMonth = cloneDeep(current).startOf('month')\n        return (\n          endMonth < cloneDeep(this.start_month).startOf('month') ||\n          endMonth >= startMonth.add(1, 'y')\n        )\n      }\n      return false\n    }\n  }\n}\n",null]}