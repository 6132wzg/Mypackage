{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/shop/cabinet/batch.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/shop/cabinet/batch.vue","mtime":1601345845217},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { Modal } from 'ant-design-vue'\nimport { BATCH_TYPE } from '@/constants/common/batch-operation'\nimport { BatchService } from './batch.service'\nimport { MessageService } from '@/services/message.service'\nexport default {\n  name: 'cabinet-batch',\n  serviceInject() {\n    return {\n      cabinetService: BatchService,\n      messageService: MessageService\n    }\n  },\n  data() {\n    return {\n      show: false,\n      BATCH_TYPE,\n      batch_type: BATCH_TYPE.SELECTED\n    }\n  },\n  props: {\n    ids: {\n      type: Array,\n      default: () => []\n    },\n    searchQuery: {\n      type: Object,\n      default: () => {}\n    },\n    total: {\n      type: Number,\n      default: 0\n    },\n    title: {\n      type: String,\n      default: '批量操作'\n    },\n    useType: {\n      type: String,\n      default: ''\n    }\n  },\n  methods: {\n    /**\n     * 批量删除储物柜\n     */\n    onCabinetBatchDel() {\n      // 删除柜子的二次确认\n      let count = this.ids.length\n      if (this.batch_type === 2) {\n        count = this.total\n      }\n      this.$confirm({\n        title: '确认删柜',\n        content: `当前选中共${count}个柜子，请问确认进行删柜操作？`,\n        icon: h => {\n          return h('st-icon', {\n            attrs: {\n              type: 'question',\n              size: '22px'\n            },\n            style: {\n              display: 'inline-block',\n              float: 'left',\n              marginRight: '16px'\n            }\n          })\n        },\n        onOk: () => {\n          this.cabinetService\n            .del({\n              ids: this.batch_type === 2 ? [] : this.ids,\n              batch_type: this.batch_type,\n              cabinet_type: this.$searchQuery.type === 'temporary' ? 2 : 1,\n              cabinet_area_id: this.$searchQuery.id,\n              keywords: this.$searchQuery.keywords,\n              battery: this.$searchQuery.battery,\n              cabinet_business_type: this.$searchQuery.cabinet_business_type\n            })\n            .subscribe(res => {\n              Modal.destroyAll()\n              this.show = false\n              this.messageService.success({\n                content: '删除成功'\n              })\n              this.$emit('success')\n            })\n        }\n      })\n    },\n    /**\n     * 批量清柜\n     */\n    onCabinetBatchClean() {\n      let count = this.ids.length\n      if (this.batch_type === 2) {\n        count = this.total\n      }\n      this.$confirm({\n        title: '确认清柜',\n        content: `当前选中共${count}个柜子，请问确认进行清柜操作？`,\n        icon: h => {\n          return h('st-icon', {\n            attrs: {\n              type: 'question',\n              size: '22px'\n            },\n            style: {\n              display: 'inline-block',\n              float: 'left',\n              marginRight: '16px'\n            }\n          })\n        },\n        onOk: res => {\n          this.cabinetService\n            .clearCabinet({\n              cabinet_ids: this.batch_type === 2 ? [] : this.ids,\n              batch_type: this.batch_type,\n              ...this.searchQuery\n            })\n            .subscribe(res => {\n              Modal.destroyAll()\n              this.show = false\n              this.messageService.success({\n                content: '批量清柜成功!'\n              })\n              this.$emit('success')\n            })\n        }\n      })\n    },\n    onSubmit(e) {\n      e.preventDefault()\n      switch (this.useType) {\n        case 'del':\n          this.onCabinetBatchDel()\n          break\n        case 'clear':\n          this.onCabinetBatchClean()\n          break\n      }\n    },\n    onCancel() {\n      this.show = false\n    }\n  }\n}\n",{"version":3,"sources":["batch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"batch.vue","sourceRoot":"src/views/biz-modals/shop/cabinet","sourcesContent":["<template>\n  <st-modal\n    :title=\"title\"\n    size=\"small\"\n    v-model=\"show\"\n    @ok=\"onSubmit\"\n    @cancel=\"onCancel\"\n  >\n    <st-form labelWidth=\"80px\">\n      <st-form-item label=\"选择\" required>\n        <st-batch-select-radio\n          :ids=\"ids\"\n          v-model=\"batch_type\"\n          :total=\"total\"\n        ></st-batch-select-radio>\n      </st-form-item>\n    </st-form>\n  </st-modal>\n</template>\n<script>\nimport { Modal } from 'ant-design-vue'\nimport { BATCH_TYPE } from '@/constants/common/batch-operation'\nimport { BatchService } from './batch.service'\nimport { MessageService } from '@/services/message.service'\nexport default {\n  name: 'cabinet-batch',\n  serviceInject() {\n    return {\n      cabinetService: BatchService,\n      messageService: MessageService\n    }\n  },\n  data() {\n    return {\n      show: false,\n      BATCH_TYPE,\n      batch_type: BATCH_TYPE.SELECTED\n    }\n  },\n  props: {\n    ids: {\n      type: Array,\n      default: () => []\n    },\n    searchQuery: {\n      type: Object,\n      default: () => {}\n    },\n    total: {\n      type: Number,\n      default: 0\n    },\n    title: {\n      type: String,\n      default: '批量操作'\n    },\n    useType: {\n      type: String,\n      default: ''\n    }\n  },\n  methods: {\n    /**\n     * 批量删除储物柜\n     */\n    onCabinetBatchDel() {\n      // 删除柜子的二次确认\n      let count = this.ids.length\n      if (this.batch_type === 2) {\n        count = this.total\n      }\n      this.$confirm({\n        title: '确认删柜',\n        content: `当前选中共${count}个柜子，请问确认进行删柜操作？`,\n        icon: h => {\n          return h('st-icon', {\n            attrs: {\n              type: 'question',\n              size: '22px'\n            },\n            style: {\n              display: 'inline-block',\n              float: 'left',\n              marginRight: '16px'\n            }\n          })\n        },\n        onOk: () => {\n          this.cabinetService\n            .del({\n              ids: this.batch_type === 2 ? [] : this.ids,\n              batch_type: this.batch_type,\n              cabinet_type: this.$searchQuery.type === 'temporary' ? 2 : 1,\n              cabinet_area_id: this.$searchQuery.id,\n              keywords: this.$searchQuery.keywords,\n              battery: this.$searchQuery.battery,\n              cabinet_business_type: this.$searchQuery.cabinet_business_type\n            })\n            .subscribe(res => {\n              Modal.destroyAll()\n              this.show = false\n              this.messageService.success({\n                content: '删除成功'\n              })\n              this.$emit('success')\n            })\n        }\n      })\n    },\n    /**\n     * 批量清柜\n     */\n    onCabinetBatchClean() {\n      let count = this.ids.length\n      if (this.batch_type === 2) {\n        count = this.total\n      }\n      this.$confirm({\n        title: '确认清柜',\n        content: `当前选中共${count}个柜子，请问确认进行清柜操作？`,\n        icon: h => {\n          return h('st-icon', {\n            attrs: {\n              type: 'question',\n              size: '22px'\n            },\n            style: {\n              display: 'inline-block',\n              float: 'left',\n              marginRight: '16px'\n            }\n          })\n        },\n        onOk: res => {\n          this.cabinetService\n            .clearCabinet({\n              cabinet_ids: this.batch_type === 2 ? [] : this.ids,\n              batch_type: this.batch_type,\n              ...this.searchQuery\n            })\n            .subscribe(res => {\n              Modal.destroyAll()\n              this.show = false\n              this.messageService.success({\n                content: '批量清柜成功!'\n              })\n              this.$emit('success')\n            })\n        }\n      })\n    },\n    onSubmit(e) {\n      e.preventDefault()\n      switch (this.useType) {\n        case 'del':\n          this.onCabinetBatchDel()\n          break\n        case 'clear':\n          this.onCabinetBatchClean()\n          break\n      }\n    },\n    onCancel() {\n      this.show = false\n    }\n  }\n}\n</script>\n"]}]}