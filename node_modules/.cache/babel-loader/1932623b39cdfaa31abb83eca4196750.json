{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/sold/course/personal/update-rights.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/sold/course/personal/update-rights.vue","mtime":1600926555954},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.number.constructor\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { UpdateRightsService } from \"./update-rights.service.ts\";\nimport { ruleOptions } from \"./update-rights.config\";\nimport { MessageService } from '@/services/message.service';\nexport default {\n  serviceInject: function serviceInject() {\n    return {\n      messageService: MessageService,\n      updateRightsService: UpdateRightsService\n    };\n  },\n  rxState: function rxState() {\n    var _this$updateRightsSer = this.updateRightsService,\n        info$ = _this$updateRightsSer.info$,\n        loading$ = _this$updateRightsSer.loading$,\n        transferUnitOptions$ = _this$updateRightsSer.transferUnitOptions$;\n    return {\n      info: info$,\n      loading: loading$,\n      transferUnitOptions: transferUnitOptions$\n    };\n  },\n  props: {\n    id: {\n      type: Number,\n      default: 0\n    }\n  },\n  data: function data() {\n    var form = this.$stForm.create();\n    var decorators = form.decorators(ruleOptions);\n    return {\n      form: form,\n      decorators: decorators,\n      show: false\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    this.updateRightsService.getInfo(this.id).subscribe(function (res) {\n      _this.$nextTick(function () {\n        _this.setFieldsValue(res);\n      });\n    });\n  },\n  methods: {\n    setFieldsValue: function setFieldsValue(info) {\n      var _info$transfer = info.transfer,\n          transfer_num = _info$transfer.transfer_num,\n          transfer_unit = _info$transfer.transfer_unit;\n      this.form.setFieldsValue({\n        transfer_num: transfer_num,\n        transfer_unit: transfer_unit || 1\n      });\n    },\n    onSubmit: function onSubmit() {\n      var _this2 = this;\n\n      this.form.validate().then(function (values) {\n        var params = _objectSpread({}, values, {\n          is_transferable: _this2.info.transfer.is_transferable\n        });\n\n        _this2.updateRightsService.updateRights(_this2.id, params).subscribe(_this2.onSubmitSuccess);\n      });\n    },\n    onSubmitSuccess: function onSubmitSuccess() {\n      this.messageService.success({\n        content: '提交成功'\n      });\n      this.show = false;\n      this.$emit('success');\n    }\n  }\n};",{"version":3,"sources":["update-rights.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA,SAAA,mBAAA;AACA,SAAA,WAAA;AACA,SAAA,cAAA,QAAA,4BAAA;AACA,eAAA;AACA,EAAA,aADA,2BACA;AACA,WAAA;AACA,MAAA,cAAA,EAAA,cADA;AAEA,MAAA,mBAAA,EAAA;AAFA,KAAA;AAIA,GANA;AAOA,EAAA,OAPA,qBAOA;AAAA,gCACA,KAAA,mBADA;AAAA,QACA,KADA,yBACA,KADA;AAAA,QACA,QADA,yBACA,QADA;AAAA,QACA,oBADA,yBACA,oBADA;AAEA,WAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA,QAFA;AAGA,MAAA,mBAAA,EAAA;AAHA,KAAA;AAKA,GAdA;AAeA,EAAA,KAAA,EAAA;AACA,IAAA,EAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AADA,GAfA;AAqBA,EAAA,IArBA,kBAqBA;AACA,QAAA,IAAA,GAAA,KAAA,OAAA,CAAA,MAAA,EAAA;AACA,QAAA,UAAA,GAAA,IAAA,CAAA,UAAA,CAAA,WAAA,CAAA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,IADA;AAEA,MAAA,UAAA,EAAA,UAFA;AAGA,MAAA,IAAA,EAAA;AAHA,KAAA;AAKA,GA7BA;AA8BA,EAAA,OA9BA,qBA8BA;AAAA;;AACA,SAAA,mBAAA,CAAA,OAAA,CAAA,KAAA,EAAA,EAAA,SAAA,CAAA,UAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,SAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,cAAA,CAAA,GAAA;AACA,OAFA;AAGA,KAJA;AAKA,GApCA;AAqCA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,0BACA,IADA,EACA;AAAA,2BACA,IAAA,CAAA,QADA;AAAA,UACA,YADA,kBACA,YADA;AAAA,UACA,aADA,kBACA,aADA;AAEA,WAAA,IAAA,CAAA,cAAA,CAAA;AACA,QAAA,YAAA,EAAA,YADA;AAEA,QAAA,aAAA,EAAA,aAAA,IAAA;AAFA,OAAA;AAIA,KAPA;AAQA,IAAA,QARA,sBAQA;AAAA;;AACA,WAAA,IAAA,CAAA,QAAA,GAAA,IAAA,CAAA,UAAA,MAAA,EAAA;AACA,YAAA,MAAA,qBACA,MADA;AAEA,UAAA,eAAA,EAAA,MAAA,CAAA,IAAA,CAAA,QAAA,CAAA;AAFA,UAAA;;AAIA,QAAA,MAAA,CAAA,mBAAA,CACA,YADA,CACA,MAAA,CAAA,EADA,EACA,MADA,EAEA,SAFA,CAEA,MAAA,CAAA,eAFA;AAGA,OARA;AASA,KAlBA;AAmBA,IAAA,eAnBA,6BAmBA;AACA,WAAA,cAAA,CAAA,OAAA,CAAA;AACA,QAAA,OAAA,EAAA;AADA,OAAA;AAGA,WAAA,IAAA,GAAA,KAAA;AACA,WAAA,KAAA,CAAA,SAAA;AACA;AAzBA;AArCA,CAAA","sourcesContent":["<template>\n  <st-modal title=\"修改售出权益\" size=\"small\" v-model=\"show\">\n    <st-form :form=\"form\">\n      <st-form-item v-if=\"info.transfer\" label=\"转让设置\" labelWidth=\"88px\">\n        <st-checkbox v-model=\"info.transfer.is_transferable\">\n          支持转让\n        </st-checkbox>\n        <st-input-number\n          v-show=\"info.transfer.is_transferable\"\n          v-decorator=\"decorators.transfer_num\"\n          style=\"width: 140px\"\n          :min=\"0\"\n          :max=\"form.getFieldValue('transfer_unit') === 1 ? 100 : 9999999.9\"\n        >\n          <span slot=\"addonAfter\">\n            <a-select\n              v-decorator=\"decorators.transfer_unit\"\n              :options=\"transferUnitOptions\"\n            ></a-select>\n          </span>\n        </st-input-number>\n      </st-form-item>\n    </st-form>\n    <template slot=\"footer\">\n      <st-button\n        @click=\"onSubmit\"\n        type=\"primary\"\n        :loading=\"loading.updateRights\"\n      >\n        确认提交\n      </st-button>\n    </template>\n  </st-modal>\n</template>\n\n<script>\nimport { UpdateRightsService } from './update-rights.service.ts'\nimport { ruleOptions } from './update-rights.config'\nimport { MessageService } from '@/services/message.service'\nexport default {\n  serviceInject() {\n    return {\n      messageService: MessageService,\n      updateRightsService: UpdateRightsService\n    }\n  },\n  rxState() {\n    const { info$, loading$, transferUnitOptions$ } = this.updateRightsService\n    return {\n      info: info$,\n      loading: loading$,\n      transferUnitOptions: transferUnitOptions$\n    }\n  },\n  props: {\n    id: {\n      type: Number,\n      default: 0\n    }\n  },\n  data() {\n    const form = this.$stForm.create()\n    const decorators = form.decorators(ruleOptions)\n    return {\n      form,\n      decorators,\n      show: false\n    }\n  },\n  created() {\n    this.updateRightsService.getInfo(this.id).subscribe(res => {\n      this.$nextTick(() => {\n        this.setFieldsValue(res)\n      })\n    })\n  },\n  methods: {\n    setFieldsValue(info) {\n      const { transfer_num, transfer_unit } = info.transfer\n      this.form.setFieldsValue({\n        transfer_num,\n        transfer_unit: transfer_unit || 1\n      })\n    },\n    onSubmit() {\n      this.form.validate().then(values => {\n        const params = {\n          ...values,\n          is_transferable: this.info.transfer.is_transferable\n        }\n        this.updateRightsService\n          .updateRights(this.id, params)\n          .subscribe(this.onSubmitSuccess)\n      })\n    },\n    onSubmitSuccess() {\n      this.messageService.success({\n        content: '提交成功'\n      })\n      this.show = false\n      this.$emit('success')\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/biz-modals/sold/course/personal"}]}