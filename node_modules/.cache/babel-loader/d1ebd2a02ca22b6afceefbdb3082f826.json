{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/activity-qrcode/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/activity-qrcode/list.vue","mtime":1601345845256},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { ListService } from \"./list.service\";\nimport { UserService } from '@/services/user.service';\nimport MarkteingPluginTitle from \"../../components#/marketing-title\";\nimport tableMixin from '@/mixins/table.mixin';\nimport { columns } from \"./list.config\";\nimport ShopSelect from '@/views/biz-components/shop/shop-select';\nimport BrandMarketingScanTable from '@/views/biz-modals/brand/marketing/scan-table';\nimport BrandMarketingFollowTable from '@/views/biz-modals/brand/marketing/follow-table';\nimport BrandMarketingDownloadQrcode from '@/views/biz-modals/brand/marketing/download-qrcode';\nexport default {\n  name: 'PageBrandMarketingPluginActivityQrcode',\n  mixins: [tableMixin],\n  bem: {\n    basic: 'page-brand-plugin-activity-qrcode'\n  },\n  modals: {\n    BrandMarketingScanTable: BrandMarketingScanTable,\n    BrandMarketingFollowTable: BrandMarketingFollowTable,\n    BrandMarketingDownloadQrcode: BrandMarketingDownloadQrcode\n  },\n  serviceInject: function serviceInject() {\n    return {\n      listService: ListService,\n      userService: UserService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      list: this.listService.list$,\n      page: this.listService.page$,\n      loading: this.listService.loading$,\n      auth: this.listService.auth$\n    };\n  },\n  data: function data(vm) {\n    return {\n      columns: columns(vm)\n    };\n  },\n  methods: {\n    onGeneralize: function onGeneralize(record) {\n      var _this = this;\n\n      var id = record.id,\n          staff_name = record.staff_name,\n          shop_name = record.shop_name;\n\n      if (this.loading.getInfo) {\n        return;\n      }\n\n      this.listService.getInfo(id).subscribe(function (res) {\n        var _res$info = res.info,\n            qrcode = _res$info.qrcode,\n            product_name = _res$info.product_name;\n        var splitArr = product_name.split('-');\n\n        _this.$modalRouter.push({\n          name: 'brand-marketing-download-qrcode',\n          props: {\n            url: qrcode,\n            title: splitArr[0],\n            subTitle: splitArr[1] || '',\n            name: \"\".concat(staff_name, \" | \").concat(shop_name)\n          }\n        });\n      });\n    }\n  },\n  components: {\n    MarkteingPluginTitle: MarkteingPluginTitle,\n    ShopSelect: ShopSelect\n  }\n};",{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA,SAAA,WAAA;AACA,SAAA,WAAA,QAAA,yBAAA;AACA,OAAA,oBAAA;AACA,OAAA,UAAA,MAAA,sBAAA;AACA,SAAA,OAAA;AACA,OAAA,UAAA,MAAA,yCAAA;AACA,OAAA,uBAAA,MAAA,+CAAA;AACA,OAAA,yBAAA,MAAA,iDAAA;AACA,OAAA,4BAAA,MAAA,oDAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,wCADA;AAEA,EAAA,MAAA,EAAA,CAAA,UAAA,CAFA;AAGA,EAAA,GAAA,EAAA;AACA,IAAA,KAAA,EAAA;AADA,GAHA;AAMA,EAAA,MAAA,EAAA;AACA,IAAA,uBAAA,EAAA,uBADA;AAEA,IAAA,yBAAA,EAAA,yBAFA;AAGA,IAAA,4BAAA,EAAA;AAHA,GANA;AAWA,EAAA,aAXA,2BAWA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,WADA;AAEA,MAAA,WAAA,EAAA;AAFA,KAAA;AAIA,GAhBA;AAiBA,EAAA,OAjBA,qBAiBA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,KAAA,WAAA,CAAA,KADA;AAEA,MAAA,IAAA,EAAA,KAAA,WAAA,CAAA,KAFA;AAGA,MAAA,OAAA,EAAA,KAAA,WAAA,CAAA,QAHA;AAIA,MAAA,IAAA,EAAA,KAAA,WAAA,CAAA;AAJA,KAAA;AAMA,GAxBA;AAyBA,EAAA,IAzBA,gBAyBA,EAzBA,EAyBA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,OAAA,CAAA,EAAA;AADA,KAAA;AAGA,GA7BA;AA8BA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,MADA,EACA;AAAA;;AAAA,UACA,EADA,GACA,MADA,CACA,EADA;AAAA,UACA,UADA,GACA,MADA,CACA,UADA;AAAA,UACA,SADA,GACA,MADA,CACA,SADA;;AAEA,UAAA,KAAA,OAAA,CAAA,OAAA,EAAA;AACA;AACA;;AACA,WAAA,WAAA,CAAA,OAAA,CAAA,EAAA,EAAA,SAAA,CAAA,UAAA,GAAA,EAAA;AAAA,wBACA,GAAA,CAAA,IADA;AAAA,YACA,MADA,aACA,MADA;AAAA,YACA,YADA,aACA,YADA;AAEA,YAAA,QAAA,GAAA,YAAA,CAAA,KAAA,CAAA,GAAA,CAAA;;AACA,QAAA,KAAA,CAAA,YAAA,CAAA,IAAA,CAAA;AACA,UAAA,IAAA,EAAA,iCADA;AAEA,UAAA,KAAA,EAAA;AACA,YAAA,GAAA,EAAA,MADA;AAEA,YAAA,KAAA,EAAA,QAAA,CAAA,CAAA,CAFA;AAGA,YAAA,QAAA,EAAA,QAAA,CAAA,CAAA,CAAA,IAAA,EAHA;AAIA,YAAA,IAAA,YAAA,UAAA,gBAAA,SAAA;AAJA;AAFA,SAAA;AASA,OAZA;AAaA;AAnBA,GA9BA;AAmDA,EAAA,UAAA,EAAA;AACA,IAAA,oBAAA,EAAA,oBADA;AAEA,IAAA,UAAA,EAAA;AAFA;AAnDA,CAAA","sourcesContent":["<template>\n  <st-panel-layout>\n    <MarkteingPluginTitle\n      pathName=\"brand-marketing-plugin-activity-qrcode-list\"\n    />\n    <st-panel app initial :class=\"basic()\">\n      <template v-if=\"auth.page\">\n        <div slot=\"title\" :class=\"basic('search')\">\n          <shop-select\n            :class=\"basic('select')\"\n            v-model=\"$searchQuery.shop_id\"\n            @change=\"onSingleSearch('shop_id', $event)\"\n          ></shop-select>\n          <st-input-search\n            v-model=\"$searchQuery.keyword\"\n            @search=\"onSingleSearch('keyword', $event)\"\n            placeholder=\"搜索员工名称或手机号\"\n          />\n        </div>\n        <div :class=\"basic('content')\">\n          <st-table\n            :page=\"page\"\n            rowKey=\"id\"\n            :columns=\"columns\"\n            @change=\"onTableChange\"\n            :dataSource=\"list\"\n          >\n            <template slot=\"identity\" slot-scope=\"text\">\n              <span>{{ text.join(' ') }}</span>\n            </template>\n            <template slot=\"scan_code_num\" slot-scope=\"text, record\">\n              <a\n                v-if=\"text\"\n                v-modal-link=\"{\n                  name: 'brand-marketing-scan-table',\n                  props: { id: record.id, title: '扫码记录' }\n                }\"\n              >\n                <span>{{ text }}</span>\n              </a>\n              <span v-else>--</span>\n            </template>\n            <template slot=\"follow_num\" slot-scope=\"text, record\">\n              <a\n                v-if=\"text\"\n                v-modal-link=\"{\n                  name: 'brand-marketing-follow-table',\n                  props: { id: record.id, title: '新增会员' }\n                }\"\n              >\n                <span>{{ text }}</span>\n              </a>\n              <span v-else>--</span>\n            </template>\n            <template slot=\"action\" slot-scope=\"text, record\">\n              <st-table-actions>\n                <a @click=\"onGeneralize(record)\">\n                  查看推广码\n                </a>\n              </st-table-actions>\n            </template>\n          </st-table>\n        </div>\n      </template>\n    </st-panel>\n  </st-panel-layout>\n</template>\n\n<script>\nimport { ListService } from './list.service'\nimport { UserService } from '@/services/user.service'\nimport MarkteingPluginTitle from '../../components#/marketing-title'\nimport tableMixin from '@/mixins/table.mixin'\nimport { columns } from './list.config'\nimport ShopSelect from '@/views/biz-components/shop/shop-select'\nimport BrandMarketingScanTable from '@/views/biz-modals/brand/marketing/scan-table'\nimport BrandMarketingFollowTable from '@/views/biz-modals/brand/marketing/follow-table'\nimport BrandMarketingDownloadQrcode from '@/views/biz-modals/brand/marketing/download-qrcode'\nexport default {\n  name: 'PageBrandMarketingPluginActivityQrcode',\n  mixins: [tableMixin],\n  bem: {\n    basic: 'page-brand-plugin-activity-qrcode'\n  },\n  modals: {\n    BrandMarketingScanTable,\n    BrandMarketingFollowTable,\n    BrandMarketingDownloadQrcode\n  },\n  serviceInject() {\n    return {\n      listService: ListService,\n      userService: UserService\n    }\n  },\n  rxState() {\n    return {\n      list: this.listService.list$,\n      page: this.listService.page$,\n      loading: this.listService.loading$,\n      auth: this.listService.auth$\n    }\n  },\n  data(vm) {\n    return {\n      columns: columns(vm)\n    }\n  },\n  methods: {\n    onGeneralize(record) {\n      const { id, staff_name, shop_name } = record\n      if (this.loading.getInfo) {\n        return\n      }\n      this.listService.getInfo(id).subscribe(res => {\n        const { qrcode, product_name } = res.info\n        const splitArr = product_name.split('-')\n        this.$modalRouter.push({\n          name: 'brand-marketing-download-qrcode',\n          props: {\n            url: qrcode,\n            title: splitArr[0],\n            subTitle: splitArr[1] || '',\n            name: `${staff_name} | ${shop_name}`\n          }\n        })\n      })\n    }\n  },\n  components: {\n    MarkteingPluginTitle,\n    ShopSelect\n  }\n}\n</script>\n"],"sourceRoot":"src/views/pages/brand/marketing/plugin/activity-qrcode"}]}