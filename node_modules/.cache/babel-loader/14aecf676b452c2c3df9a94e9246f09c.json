{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js!/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/card-bg-radio/card-bg-radio.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-components/card-bg-radio/card-bg-radio.vue","mtime":1591147717097},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js","mtime":1591062572352},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport StImageUpload from '@/views/biz-components/st/image-upload/image-upload.vue';\nimport { cloneDeep } from 'lodash-es';\nimport { UserService } from '@/services/user.service';\nvar className = ['first custom', 'second custom', 'third custom', 'fourth custom'];\nexport default {\n  name: 'StCardBgRadio',\n  bem: {\n    cardRadio: 'st-card-bg-radio'\n  },\n  components: {\n    StImageUpload: StImageUpload\n  },\n  serviceInject: function serviceInject() {\n    return {\n      userService: UserService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      memberCardBgList: this.userService.getOptions$('member_card.card_bg_list'),\n      familyCardBgList: this.userService.getOptions$('member_card.family_card_bg_list'),\n      smallCourseCardBgList: this.userService.getOptions$('small_course.small_bg_list')\n    };\n  },\n  created: function created() {\n    this.init();\n  },\n  computed: {\n    bgIndex: function bgIndex() {\n      return this.radioIndex === 0 ? 4 : this.radioIndex - 1;\n    },\n    cardBgList: function cardBgList() {\n      var arr = [];\n      this.card_bg_list.forEach(function (item, index) {\n        item.className = className[index];\n        item.index = ++index;\n        arr.push(item);\n      });\n      return arr;\n    }\n  },\n  data: function data() {\n    return {\n      // 截图参数对象\n      cropperModal: {},\n      card_bg_list: this.isFamilyCard ? this.familyCardBgList : this.isSmallCourse ? this.smallCourseCardBgList : this.memberCardBgList,\n      // 备份\n      list: [],\n      // radioIndex\n      radioIndex: 1,\n      // 选择的cardBg\n      cardBg: {\n        image_id: 0,\n        image_key: this.memberCardBgList[0].image_key,\n        image_url: this.memberCardBgList[0].image_url,\n        index: 1\n      },\n      // 自定义cardBg\n      customCardBg: {\n        image_id: 0,\n        image_key: '',\n        image_url: '',\n        index: 0\n      },\n      // 回显的自定义bg\n      fileList: []\n    };\n  },\n  watch: {\n    value: {\n      handler: function handler(newVal) {\n        this.setdata(newVal);\n      },\n      deep: true\n    },\n    radioIndex: function radioIndex(newVal) {\n      if (newVal === 0) {\n        this.cardBg = cloneDeep(this.customCardBg);\n      } else {\n        var i = newVal;\n        --i;\n        this.cardBg = cloneDeep(this.card_bg_list[i]);\n        this.cardBg.index = newVal;\n      }\n\n      this.$emit('input', this.cardBg);\n      this.$emit('change', this.cardBg);\n    }\n  },\n  props: {\n    value: {\n      type: Object,\n      default: function _default() {\n        return {\n          image_id: 0,\n          image_key: '',\n          image_url: '',\n          index: 1\n        };\n      }\n    },\n    isFamilyCard: {\n      type: Boolean,\n      default: false\n    },\n    isSmallCourse: {\n      type: Boolean,\n      default: false\n    }\n  },\n  mounted: function mounted() {\n    this.setRadioColor();\n  },\n  methods: {\n    init: function init() {\n      this.list = cloneDeep(this.card_bg_list);\n      this.setdata(this.value);\n    },\n    setRadioColor: function setRadioColor() {\n      var innerHTML = '';\n      this.cardBgList.forEach(function (i) {\n        innerHTML += \"\\n          .st-card-bg-radio .\".concat(i.className.split('custom')[0], \" .ant-radio-inner::after {\\n            background-color: \").concat(i.color, \";\\n          }\\n        \");\n      });\n      var style = document.createElement('style');\n      style.innerHTML = innerHTML;\n      document.head.appendChild(style);\n    },\n    setdata: function setdata(data) {\n      this.radioIndex = data.index;\n\n      if (data.index === 0) {\n        this.customCardBg = cloneDeep(data);\n\n        if (data.image_url) {\n          this.fileList = [{\n            image_id: data.image_id,\n            image_key: data.image_url\n          }];\n        }\n      } else {\n        this.card_bg_list = cloneDeep(this.list);\n        var i = data.index;\n        --i;\n        this.card_bg_list[i].image_id = data.image_id;\n      }\n    },\n    imageUploadChange: function imageUploadChange(fileList) {\n      if (fileList.length) {\n        this.customCardBg = {\n          image_id: fileList[0].image_id,\n          image_key: fileList[0].image_key,\n          image_url: fileList[0].image_url,\n          index: 0\n        };\n      } else {\n        this.fileList = [];\n        this.customCardBg = {\n          image_id: 0,\n          image_key: '',\n          image_url: '',\n          index: 0\n        };\n      }\n\n      this.cardBg = cloneDeep(this.customCardBg);\n      this.$emit('input', this.cardBg);\n      this.$emit('change', this.cardBg);\n    }\n  }\n};",null]}