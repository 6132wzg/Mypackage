{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/app/plugin/seckill/components#/seckill-add.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/app/plugin/seckill/components#/seckill-add.vue","mtime":1599216539671},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.split\";\nimport _defineProperty from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ProductSetting from \"../../components#/product-setting.vue\";\nimport { merge } from 'lodash';\nimport moment from 'moment';\nexport default {\n  name: 'BrandAppPluginDiscountAdd',\n  bem: {\n    b: 'brand-app-plugin-discount-add'\n  },\n  components: {\n    ProductSetting: ProductSetting\n  },\n  model: {\n    props: 'value',\n    event: 'change'\n  },\n  props: {\n    value: {\n      type: Object,\n      default: function _default() {}\n    },\n    form: {\n      type: Object,\n      default: function _default() {}\n    },\n    decorators: {\n      type: Object,\n      default: function _default() {}\n    },\n    isEdit: {\n      type: Boolean,\n      defalut: false\n    }\n  },\n  data: function data() {\n    return {};\n  },\n  computed: {\n    info: {\n      get: function get() {\n        return this.value;\n      },\n      set: function set(newVal) {\n        console.log('discount-add-info-change', _objectSpread({}, newVal));\n        this.$emit('change', _objectSpread({}, newVal));\n      }\n    },\n    startTime: {\n      get: function get() {\n        return this.info.start_time ? moment(this.info.start_time) : undefined;\n      },\n      set: function set(value) {\n        this.info.start_time = value.format('YYYY-MM-DD HH') + ':00';\n      }\n    },\n    endTime: {\n      get: function get() {\n        return this.info.end_time ? moment(this.info.end_time) : undefined;\n      },\n      set: function set(value) {\n        this.info.end_time = value.format('YYYY-MM-DD HH') + ':00';\n      }\n    },\n    spike_time: {\n      get: function get() {\n        return this.info.virtual_spike_time ? moment(this.info.virtual_spike_time) : undefined;\n      },\n      set: function set(value) {\n        this.info.virtual_spike_time = value.format('YYYY-MM-DD HH:mm:ss');\n      }\n    },\n    dataRange: {\n      get: function get() {\n        var start = this.info.start_time ? moment(this.info.start_time) : undefined;\n        var end = this.info.end_time ? moment(this.info.end_time) : undefined;\n        return [start, end];\n      },\n      set: function set(value) {\n        console.log(value);\n        this.info.start_time = value[0] ? value[0].format('YYYY-MM-DD HH') + ':00' : undefined;\n        this.info.end_time = value[1] ? value[1].format('YYYY-MM-DD HH') + ':00' : undefined;\n      }\n    }\n  },\n  mounted: function mounted() {\n    console.log(this);\n    this.$nextTick(function () {\n      setTimeout(function () {// console.log('discount-add-set-info', { ...this.info })\n        // this.setFieldsValue('info.type', 3)\n      }, 5000);\n    });\n  },\n  methods: {\n    moment: moment,\n    valueChange: function valueChange(key, val) {\n      console.log('discount-add-info-value-change', key, val); // this.info[key] = e\n\n      this.setValue(key, val);\n      this.$emit('change', this.info);\n    },\n    setFieldsValue: function setFieldsValue(key, value) {\n      var _this = this;\n\n      this.setValue(key, value);\n      this.$nextTick(function () {\n        _this.form.setFieldsValue(_defineProperty({}, key, value));\n      });\n    },\n    setValue: function setValue(key, value) {\n      if (typeof key === 'string') {\n        var keyArr = key.split('.');\n        var len = keyArr.length - 1;\n        keyArr.reduce(function (cur, key, index) {\n          if (!cur[key] && index < len) {\n            throw \"\".concat(key, \"\\u4E0D\\u5B58\\u5728\");\n          }\n\n          if (index === len) {\n            cur[key] = value;\n          }\n\n          return cur[key];\n        }, this);\n      } else {\n        merge(this, key);\n      }\n    },\n    range: function range(start, end) {\n      var result = [];\n\n      for (var i = start; i < end; i++) {\n        result.push(i);\n      }\n\n      return result;\n    },\n    disabledDate: function disabledDate(current) {\n      return current && current.format('YYYY-MM-DD') < moment().format('YYYY-MM-DD');\n    },\n    disabledStartTime: function disabledStartTime() {\n      var _this2 = this;\n\n      var hour = 0;\n\n      if (moment().format('YYYY-MM-DD') === moment(this.info.start_time).format('YYYY-MM-DD')) {\n        hour = moment().hours() + 1;\n      }\n\n      return {\n        disabledHours: function disabledHours() {\n          return _this2.range(0, hour);\n        },\n        disabledMinutes: function disabledMinutes() {\n          return _this2.range(1, 60);\n        },\n        disabledSeconds: function disabledSeconds() {\n          return _this2.range(1, 60);\n        }\n      };\n    },\n    disabledEndTime: function disabledEndTime() {\n      var _this3 = this;\n\n      var hour = 0;\n\n      if (moment(this.info.end_time).format('YYYY-MM-DD') === moment(this.info.start_time).format('YYYY-MM-DD')) {\n        hour = moment(this.info.start_time).hours() + 1;\n      }\n\n      return {\n        disabledHours: function disabledHours() {\n          return _this3.range(0, hour);\n        },\n        disabledMinutes: function disabledMinutes() {\n          return _this3.range(1, 60);\n        },\n        disabledSeconds: function disabledSeconds() {\n          return _this3.range(1, 60);\n        }\n      };\n    },\n    disabledVirDate: function disabledVirDate(current) {\n      return current.format('YYYY-MM-DD') < moment(this.info.start_time).format('YYYY-MM-DD') || current.format('YYYY-MM-DD') > moment(this.info.end_time).format('YYYY-MM-DD');\n    },\n    disabledVirTime: function disabledVirTime() {\n      var _this4 = this;\n\n      var hour = 0;\n\n      if (moment(this.info.start_time).format('YYYY-MM-DD') === moment(this.info.virtual_spike_time).format('YYYY-MM-DD')) {\n        hour = moment(this.info.virtual_spike_time).hours() + 1;\n      }\n\n      if (moment(this.info.end_time).format('YYYY-MM-DD') === moment(this.info.virtual_spike_time).format('YYYY-MM-DD')) {\n        hour = moment(this.info.virtual_spike_time).hours() + 1;\n      }\n\n      return {\n        disabledHours: function disabledHours() {\n          return _this4.range(0, hour);\n        },\n        disabledMinutes: function disabledMinutes() {\n          return _this4.range(1, 60);\n        },\n        disabledSeconds: function disabledSeconds() {\n          return _this4.range(1, 60);\n        }\n      };\n    },\n    // 保存\n    onSubmit: function onSubmit(e) {\n      var _this5 = this;\n\n      e.preventDefault();\n      this.form.validateFieldsAndScroll(function (err, values) {\n        if (!err) {\n          _this5.$emit('submit', values); // TODO:\n\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["seckill-add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA,OAAA,cAAA;AACA,SAAA,KAAA,QAAA,QAAA;AACA,OAAA,MAAA,MAAA,QAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,2BADA;AAEA,EAAA,GAAA,EAAA;AACA,IAAA,CAAA,EAAA;AADA,GAFA;AAKA,EAAA,UAAA,EAAA;AACA,IAAA,cAAA,EAAA;AADA,GALA;AAQA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA,OADA;AAEA,IAAA,KAAA,EAAA;AAFA,GARA;AAYA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA,oBAAA,CAAA;AAFA,KADA;AAKA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA,oBAAA,CAAA;AAFA,KALA;AASA,IAAA,UAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA,oBAAA,CAAA;AAFA,KATA;AAaA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA;AAbA,GAZA;AA8BA,EAAA,IA9BA,kBA8BA;AACA,WAAA,EAAA;AACA,GAhCA;AAiCA,EAAA,QAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,GADA,iBACA;AACA,eAAA,KAAA,KAAA;AACA,OAHA;AAIA,MAAA,GAJA,eAIA,MAJA,EAIA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,0BAAA,oBAAA,MAAA;AACA,aAAA,KAAA,CAAA,QAAA,oBAAA,MAAA;AACA;AAPA,KADA;AAUA,IAAA,SAAA,EAAA;AACA,MAAA,GADA,iBACA;AACA,eAAA,KAAA,IAAA,CAAA,UAAA,GAAA,MAAA,CAAA,KAAA,IAAA,CAAA,UAAA,CAAA,GAAA,SAAA;AACA,OAHA;AAIA,MAAA,GAJA,eAIA,KAJA,EAIA;AACA,aAAA,IAAA,CAAA,UAAA,GAAA,KAAA,CAAA,MAAA,CAAA,eAAA,IAAA,KAAA;AACA;AANA,KAVA;AAkBA,IAAA,OAAA,EAAA;AACA,MAAA,GADA,iBACA;AACA,eAAA,KAAA,IAAA,CAAA,QAAA,GAAA,MAAA,CAAA,KAAA,IAAA,CAAA,QAAA,CAAA,GAAA,SAAA;AACA,OAHA;AAIA,MAAA,GAJA,eAIA,KAJA,EAIA;AACA,aAAA,IAAA,CAAA,QAAA,GAAA,KAAA,CAAA,MAAA,CAAA,eAAA,IAAA,KAAA;AACA;AANA,KAlBA;AA0BA,IAAA,UAAA,EAAA;AACA,MAAA,GADA,iBACA;AACA,eAAA,KAAA,IAAA,CAAA,kBAAA,GACA,MAAA,CAAA,KAAA,IAAA,CAAA,kBAAA,CADA,GAEA,SAFA;AAGA,OALA;AAMA,MAAA,GANA,eAMA,KANA,EAMA;AACA,aAAA,IAAA,CAAA,kBAAA,GAAA,KAAA,CAAA,MAAA,CAAA,qBAAA,CAAA;AACA;AARA,KA1BA;AAoCA,IAAA,SAAA,EAAA;AACA,MAAA,GADA,iBACA;AACA,YAAA,KAAA,GAAA,KAAA,IAAA,CAAA,UAAA,GACA,MAAA,CAAA,KAAA,IAAA,CAAA,UAAA,CADA,GAEA,SAFA;AAGA,YAAA,GAAA,GAAA,KAAA,IAAA,CAAA,QAAA,GAAA,MAAA,CAAA,KAAA,IAAA,CAAA,QAAA,CAAA,GAAA,SAAA;AACA,eAAA,CAAA,KAAA,EAAA,GAAA,CAAA;AACA,OAPA;AAQA,MAAA,GARA,eAQA,KARA,EAQA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,aAAA,IAAA,CAAA,UAAA,GAAA,KAAA,CAAA,CAAA,CAAA,GACA,KAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAA,eAAA,IAAA,KADA,GAEA,SAFA;AAGA,aAAA,IAAA,CAAA,QAAA,GAAA,KAAA,CAAA,CAAA,CAAA,GACA,KAAA,CAAA,CAAA,CAAA,CAAA,MAAA,CAAA,eAAA,IAAA,KADA,GAEA,SAFA;AAGA;AAhBA;AApCA,GAjCA;AAwFA,EAAA,OAxFA,qBAwFA;AACA,IAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,SAAA,SAAA,CAAA,YAAA;AACA,MAAA,UAAA,CAAA,YAAA,CACA;AACA;AACA,OAHA,EAGA,IAHA,CAAA;AAIA,KALA;AAMA,GAhGA;AAiGA,EAAA,OAAA,EAAA;AACA,IAAA,MAAA,EAAA,MADA;AAEA,IAAA,WAFA,uBAEA,GAFA,EAEA,GAFA,EAEA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,gCAAA,EAAA,GAAA,EAAA,GAAA,EADA,CAEA;;AACA,WAAA,QAAA,CAAA,GAAA,EAAA,GAAA;AACA,WAAA,KAAA,CAAA,QAAA,EAAA,KAAA,IAAA;AACA,KAPA;AAQA,IAAA,cARA,0BAQA,GARA,EAQA,KARA,EAQA;AAAA;;AACA,WAAA,QAAA,CAAA,GAAA,EAAA,KAAA;AACA,WAAA,SAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,IAAA,CAAA,cAAA,qBAAA,GAAA,EAAA,KAAA;AACA,OAFA;AAGA,KAbA;AAcA,IAAA,QAdA,oBAcA,GAdA,EAcA,KAdA,EAcA;AACA,UAAA,OAAA,GAAA,KAAA,QAAA,EAAA;AACA,YAAA,MAAA,GAAA,GAAA,CAAA,KAAA,CAAA,GAAA,CAAA;AACA,YAAA,GAAA,GAAA,MAAA,CAAA,MAAA,GAAA,CAAA;AACA,QAAA,MAAA,CAAA,MAAA,CAAA,UAAA,GAAA,EAAA,GAAA,EAAA,KAAA,EAAA;AACA,cAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,KAAA,GAAA,GAAA,EAAA;AACA,4BAAA,GAAA;AACA;;AACA,cAAA,KAAA,KAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,GAAA,CAAA,GAAA,KAAA;AACA;;AACA,iBAAA,GAAA,CAAA,GAAA,CAAA;AACA,SARA,EAQA,IARA;AASA,OAZA,MAYA;AACA,QAAA,KAAA,CAAA,IAAA,EAAA,GAAA,CAAA;AACA;AACA,KA9BA;AA+BA,IAAA,KA/BA,iBA+BA,KA/BA,EA+BA,GA/BA,EA+BA;AACA,UAAA,MAAA,GAAA,EAAA;;AACA,WAAA,IAAA,CAAA,GAAA,KAAA,EAAA,CAAA,GAAA,GAAA,EAAA,CAAA,EAAA,EAAA;AACA,QAAA,MAAA,CAAA,IAAA,CAAA,CAAA;AACA;;AACA,aAAA,MAAA;AACA,KArCA;AAsCA,IAAA,YAtCA,wBAsCA,OAtCA,EAsCA;AACA,aACA,OAAA,IAAA,OAAA,CAAA,MAAA,CAAA,YAAA,IAAA,MAAA,GAAA,MAAA,CAAA,YAAA,CADA;AAGA,KA1CA;AA2CA,IAAA,iBA3CA,+BA2CA;AAAA;;AACA,UAAA,IAAA,GAAA,CAAA;;AACA,UACA,MAAA,GAAA,MAAA,CAAA,YAAA,MACA,MAAA,CAAA,KAAA,IAAA,CAAA,UAAA,CAAA,CAAA,MAAA,CAAA,YAAA,CAFA,EAGA;AACA,QAAA,IAAA,GAAA,MAAA,GAAA,KAAA,KAAA,CAAA;AACA;;AACA,aAAA;AACA,QAAA,aAAA,EAAA;AAAA,iBAAA,MAAA,CAAA,KAAA,CAAA,CAAA,EAAA,IAAA,CAAA;AAAA,SADA;AAEA,QAAA,eAAA,EAAA;AAAA,iBAAA,MAAA,CAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA;AAAA,SAFA;AAGA,QAAA,eAAA,EAAA;AAAA,iBAAA,MAAA,CAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA;AAAA;AAHA,OAAA;AAKA,KAxDA;AAyDA,IAAA,eAzDA,6BAyDA;AAAA;;AACA,UAAA,IAAA,GAAA,CAAA;;AACA,UACA,MAAA,CAAA,KAAA,IAAA,CAAA,QAAA,CAAA,CAAA,MAAA,CAAA,YAAA,MACA,MAAA,CAAA,KAAA,IAAA,CAAA,UAAA,CAAA,CAAA,MAAA,CAAA,YAAA,CAFA,EAGA;AACA,QAAA,IAAA,GAAA,MAAA,CAAA,KAAA,IAAA,CAAA,UAAA,CAAA,CAAA,KAAA,KAAA,CAAA;AACA;;AACA,aAAA;AACA,QAAA,aAAA,EAAA;AAAA,iBAAA,MAAA,CAAA,KAAA,CAAA,CAAA,EAAA,IAAA,CAAA;AAAA,SADA;AAEA,QAAA,eAAA,EAAA;AAAA,iBAAA,MAAA,CAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA;AAAA,SAFA;AAGA,QAAA,eAAA,EAAA;AAAA,iBAAA,MAAA,CAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA;AAAA;AAHA,OAAA;AAKA,KAtEA;AAuEA,IAAA,eAvEA,2BAuEA,OAvEA,EAuEA;AACA,aACA,OAAA,CAAA,MAAA,CAAA,YAAA,IACA,MAAA,CAAA,KAAA,IAAA,CAAA,UAAA,CAAA,CAAA,MAAA,CAAA,YAAA,CADA,IAEA,OAAA,CAAA,MAAA,CAAA,YAAA,IACA,MAAA,CAAA,KAAA,IAAA,CAAA,QAAA,CAAA,CAAA,MAAA,CAAA,YAAA,CAJA;AAMA,KA9EA;AA+EA,IAAA,eA/EA,6BA+EA;AAAA;;AACA,UAAA,IAAA,GAAA,CAAA;;AACA,UACA,MAAA,CAAA,KAAA,IAAA,CAAA,UAAA,CAAA,CAAA,MAAA,CAAA,YAAA,MACA,MAAA,CAAA,KAAA,IAAA,CAAA,kBAAA,CAAA,CAAA,MAAA,CAAA,YAAA,CAFA,EAGA;AACA,QAAA,IAAA,GAAA,MAAA,CAAA,KAAA,IAAA,CAAA,kBAAA,CAAA,CAAA,KAAA,KAAA,CAAA;AACA;;AACA,UACA,MAAA,CAAA,KAAA,IAAA,CAAA,QAAA,CAAA,CAAA,MAAA,CAAA,YAAA,MACA,MAAA,CAAA,KAAA,IAAA,CAAA,kBAAA,CAAA,CAAA,MAAA,CAAA,YAAA,CAFA,EAGA;AACA,QAAA,IAAA,GAAA,MAAA,CAAA,KAAA,IAAA,CAAA,kBAAA,CAAA,CAAA,KAAA,KAAA,CAAA;AACA;;AACA,aAAA;AACA,QAAA,aAAA,EAAA;AAAA,iBAAA,MAAA,CAAA,KAAA,CAAA,CAAA,EAAA,IAAA,CAAA;AAAA,SADA;AAEA,QAAA,eAAA,EAAA;AAAA,iBAAA,MAAA,CAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA;AAAA,SAFA;AAGA,QAAA,eAAA,EAAA;AAAA,iBAAA,MAAA,CAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA;AAAA;AAHA,OAAA;AAKA,KAlGA;AAmGA;AACA,IAAA,QApGA,oBAoGA,CApGA,EAoGA;AAAA;;AACA,MAAA,CAAA,CAAA,cAAA;AACA,WAAA,IAAA,CAAA,uBAAA,CAAA,UAAA,GAAA,EAAA,MAAA,EAAA;AACA,YAAA,CAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,KAAA,CAAA,QAAA,EAAA,MAAA,EADA,CAEA;;AACA;AACA,OALA;AAMA;AA5GA;AAjGA,CAAA","sourcesContent":["<template>\n  <div>\n    <st-form-item required label=\"活动名称\">\n      <st-input\n        v-decorator=\"decorators.info.product_name\"\n        placeholder=\"请输入活动名称\"\n        style=\"width: 470px\"\n        @change=\"valueChange('info.product_name', $event)\"\n        :maxLength=\"30\"\n      ></st-input>\n    </st-form-item>\n    <!--  -->\n    <product-setting\n      v-model=\"info\"\n      :decorators=\"decorators\"\n      :form=\"form\"\n      :isEdit=\"isEdit\"\n    ></product-setting>\n    <st-form-item required label=\"活动时间\">\n      <st-range-picker\n        v-model=\"dataRange\"\n        :options=\"{\n          start: {\n            showTime: {\n              format: 'HH:mm'\n            },\n            format: 'YYYY-MM-DD HH:mm',\n            disabledBegin: moment().format('YYYY-MM-DD'),\n            disabledDateTime: disabledStartTime\n          },\n          end: {\n            showTime: {\n              format: 'HH:mm'\n            },\n            format: 'YYYY-MM-DD HH:mm',\n            disabledDateTime: disabledEndTime\n          }\n        }\"\n      />\n    </st-form-item>\n    <st-form-item required label=\"活动库存\">\n      <a-checkbox v-model=\"info.is_limit_stock\">限制库存</a-checkbox>\n      <st-input-number\n        style=\"width: 150px\"\n        placeholder=\"\"\n        v-model=\"info.stock_num\"\n        :min=\"1\"\n        :max=\"99999\"\n        :disabled=\"!info.is_limit_stock\"\n      ></st-input-number>\n    </st-form-item>\n    <st-form-item label=\"单人购买限制\">\n      <a-checkbox v-model=\"info.is_limit_buy\">限制购买</a-checkbox>\n      <st-input-number\n        style=\"width: 150px\"\n        placeholder=\"\"\n        v-model=\"info.buy_num\"\n        :min=\"1\"\n        :max=\"999\"\n        :disabled=\"!info.is_limit_buy\"\n      >\n        <span slot=\"addonAfter\">笔订单</span>\n      </st-input-number>\n    </st-form-item>\n    <st-form-item label=\"虚拟秒杀\">\n      <a-checkbox v-model=\"info.is_virtual_spike\">\n        到点自动抢光\n      </a-checkbox>\n      <a-date-picker\n        placeholder=\"请选择时间\"\n        format=\"YYYY-MM-DD\"\n        v-model=\"info.virtual_spike_time\"\n        :disabledDate=\"disabledVirDate\"\n        :disabledTime=\"disabledVirTime\"\n        :showToday=\"false\"\n        :disabled=\"!info.is_virtual_spike\"\n      />\n    </st-form-item>\n    <st-form-item label=\"备注\">\n      <st-textarea\n        style=\"width: 470px\"\n        placeholder=\"备注内容仅商家可见\"\n        v-model=\"info.description\"\n        :rows=\"2\"\n        :maxlength=\"200\"\n      ></st-textarea>\n    </st-form-item>\n    <st-form-item labelFix>\n      <st-button type=\"primary\" @click=\"onSubmit\">保存</st-button>\n    </st-form-item>\n  </div>\n</template>\n<script>\nimport ProductSetting from '../../components#/product-setting.vue'\nimport { merge } from 'lodash'\nimport moment from 'moment'\n\nexport default {\n  name: 'BrandAppPluginDiscountAdd',\n  bem: {\n    b: 'brand-app-plugin-discount-add'\n  },\n  components: {\n    ProductSetting\n  },\n  model: {\n    props: 'value',\n    event: 'change'\n  },\n  props: {\n    value: {\n      type: Object,\n      default: () => {}\n    },\n    form: {\n      type: Object,\n      default: () => {}\n    },\n    decorators: {\n      type: Object,\n      default: () => {}\n    },\n    isEdit: {\n      type: Boolean,\n      defalut: false\n    }\n  },\n  data() {\n    return {}\n  },\n  computed: {\n    info: {\n      get() {\n        return this.value\n      },\n      set(newVal) {\n        console.log('discount-add-info-change', { ...newVal })\n        this.$emit('change', { ...newVal })\n      }\n    },\n    startTime: {\n      get() {\n        return this.info.start_time ? moment(this.info.start_time) : undefined\n      },\n      set(value) {\n        this.info.start_time = value.format('YYYY-MM-DD HH') + ':00'\n      }\n    },\n    endTime: {\n      get() {\n        return this.info.end_time ? moment(this.info.end_time) : undefined\n      },\n      set(value) {\n        this.info.end_time = value.format('YYYY-MM-DD HH') + ':00'\n      }\n    },\n    spike_time: {\n      get() {\n        return this.info.virtual_spike_time\n          ? moment(this.info.virtual_spike_time)\n          : undefined\n      },\n      set(value) {\n        this.info.virtual_spike_time = value.format('YYYY-MM-DD HH:mm:ss')\n      }\n    },\n    dataRange: {\n      get() {\n        const start = this.info.start_time\n          ? moment(this.info.start_time)\n          : undefined\n        const end = this.info.end_time ? moment(this.info.end_time) : undefined\n        return [start, end]\n      },\n      set(value) {\n        console.log(value)\n        this.info.start_time = value[0]\n          ? value[0].format('YYYY-MM-DD HH') + ':00'\n          : undefined\n        this.info.end_time = value[1]\n          ? value[1].format('YYYY-MM-DD HH') + ':00'\n          : undefined\n      }\n    }\n  },\n  mounted() {\n    console.log(this)\n    this.$nextTick(() => {\n      setTimeout(() => {\n        // console.log('discount-add-set-info', { ...this.info })\n        // this.setFieldsValue('info.type', 3)\n      }, 5000)\n    })\n  },\n  methods: {\n    moment,\n    valueChange(key, val) {\n      console.log('discount-add-info-value-change', key, val)\n      // this.info[key] = e\n      this.setValue(key, val)\n      this.$emit('change', this.info)\n    },\n    setFieldsValue(key, value) {\n      this.setValue(key, value)\n      this.$nextTick(() => {\n        this.form.setFieldsValue({ [key]: value })\n      })\n    },\n    setValue(key, value) {\n      if (typeof key === 'string') {\n        const keyArr = key.split('.')\n        const len = keyArr.length - 1\n        keyArr.reduce((cur, key, index) => {\n          if (!cur[key] && index < len) {\n            throw `${key}不存在`\n          }\n          if (index === len) {\n            cur[key] = value\n          }\n          return cur[key]\n        }, this)\n      } else {\n        merge(this, key)\n      }\n    },\n    range(start, end) {\n      const result = []\n      for (let i = start; i < end; i++) {\n        result.push(i)\n      }\n      return result\n    },\n    disabledDate(current) {\n      return (\n        current && current.format('YYYY-MM-DD') < moment().format('YYYY-MM-DD')\n      )\n    },\n    disabledStartTime() {\n      let hour = 0\n      if (\n        moment().format('YYYY-MM-DD') ===\n        moment(this.info.start_time).format('YYYY-MM-DD')\n      ) {\n        hour = moment().hours() + 1\n      }\n      return {\n        disabledHours: () => this.range(0, hour),\n        disabledMinutes: () => this.range(1, 60),\n        disabledSeconds: () => this.range(1, 60)\n      }\n    },\n    disabledEndTime() {\n      let hour = 0\n      if (\n        moment(this.info.end_time).format('YYYY-MM-DD') ===\n        moment(this.info.start_time).format('YYYY-MM-DD')\n      ) {\n        hour = moment(this.info.start_time).hours() + 1\n      }\n      return {\n        disabledHours: () => this.range(0, hour),\n        disabledMinutes: () => this.range(1, 60),\n        disabledSeconds: () => this.range(1, 60)\n      }\n    },\n    disabledVirDate(current) {\n      return (\n        current.format('YYYY-MM-DD') <\n          moment(this.info.start_time).format('YYYY-MM-DD') ||\n        current.format('YYYY-MM-DD') >\n          moment(this.info.end_time).format('YYYY-MM-DD')\n      )\n    },\n    disabledVirTime() {\n      let hour = 0\n      if (\n        moment(this.info.start_time).format('YYYY-MM-DD') ===\n        moment(this.info.virtual_spike_time).format('YYYY-MM-DD')\n      ) {\n        hour = moment(this.info.virtual_spike_time).hours() + 1\n      }\n      if (\n        moment(this.info.end_time).format('YYYY-MM-DD') ===\n        moment(this.info.virtual_spike_time).format('YYYY-MM-DD')\n      ) {\n        hour = moment(this.info.virtual_spike_time).hours() + 1\n      }\n      return {\n        disabledHours: () => this.range(0, hour),\n        disabledMinutes: () => this.range(1, 60),\n        disabledSeconds: () => this.range(1, 60)\n      }\n    },\n    // 保存\n    onSubmit(e) {\n      e.preventDefault()\n      this.form.validateFieldsAndScroll((err, values) => {\n        if (!err) {\n          this.$emit('submit', values)\n          // TODO:\n        }\n      })\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/pages/brand/app/plugin/seckill/components#"}]}