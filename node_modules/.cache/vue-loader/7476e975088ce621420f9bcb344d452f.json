{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/brand/marketing/points/add-or-minus.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/brand/marketing/points/add-or-minus.vue","mtime":1600926555830},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { ruleOptions } from './add-or-minus.config'\nimport { AddByBatchService } from './add-or-minus.service'\nexport default {\n  name: 'BrandMarketingAddPoints',\n  bem: {\n    basic: 'brand-marketing-plugin-points-add'\n  },\n  serviceInject() {\n    return {\n      service: AddByBatchService\n    }\n  },\n  props: {\n    query: {\n      type: Object,\n      default: () => {}\n    },\n    type: {\n      type: String,\n      default: 'add'\n    }\n  },\n  computed: {\n    memberLength() {\n      return this.query.member_ids ? this.query.member_ids.length : 0\n    },\n    title() {\n      return (\n        {\n          add: '添加积分',\n          'shop-add': '添加积分',\n          'add-by-batch': '批量添加积分',\n          minus: '扣减积分',\n          'shop-minus': '扣减积分',\n          'minus-by-batch': '批量扣减积分'\n        }[this.type] || '增减积分'\n      )\n    },\n    isBatch() {\n      return ['add-by-batch', 'minus-by-batch'].includes(this.type)\n    }\n  },\n  data() {\n    const form = this.$stForm.create()\n    const decorators = form.decorators(ruleOptions(this.type))\n    return {\n      form,\n      decorators,\n      show: false\n    }\n  },\n  methods: {\n    addOrMinusPoints() {\n      this.form.validate().then(values => {\n        this.service\n          .addOrMinusPoints({ ...this.query, ...values }, this.type)\n          .subscribe(res => {\n            this.$emit('done')\n            this.show = false\n          })\n      })\n    }\n  }\n}\n",{"version":3,"sources":["add-or-minus.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"add-or-minus.vue","sourceRoot":"src/views/biz-modals/brand/marketing/points","sourcesContent":["<template>\n  <st-modal\n    :title=\"title\"\n    v-model=\"show\"\n    width=\"600px\"\n    @cancel=\"show = false\"\n    @ok=\"addOrMinusPoints\"\n  >\n    <st-form :form=\"form\" labelWidth=\"66px\">\n      <st-form-item label=\"选择\" v-if=\"isBatch\">\n        已选{{ memberLength }}条数据\n      </st-form-item>\n      <st-form-item label=\"会员\" v-if=\"!isBatch\">\n        {{ query.memberName }}\n      </st-form-item>\n      <st-form-item label=\"积分数\" required>\n        <st-input-number\n          v-decorator=\"decorators.points\"\n          style=\"width: 120px\"\n          placeholder=\"请输入\"\n          :min=\"1\"\n          :max=\"99999\"\n          :step=\"1\"\n          :float=\"true\"\n        >\n          <template slot=\"addonAfter\">\n            积分\n          </template>\n        </st-input-number>\n      </st-form-item>\n      <st-form-item label=\"备注\" style=\"margin-bottom: 0\">\n        <st-textarea\n          v-decorator=\"decorators.remark\"\n          placeholder=\"请输入备注\"\n          maxlength=\"99\"\n          :autosize=\"{\n            minRows: 1,\n            maxRow: 2\n          }\"\n        ></st-textarea>\n      </st-form-item>\n    </st-form>\n  </st-modal>\n</template>\n<script>\nimport { ruleOptions } from './add-or-minus.config'\nimport { AddByBatchService } from './add-or-minus.service'\nexport default {\n  name: 'BrandMarketingAddPoints',\n  bem: {\n    basic: 'brand-marketing-plugin-points-add'\n  },\n  serviceInject() {\n    return {\n      service: AddByBatchService\n    }\n  },\n  props: {\n    query: {\n      type: Object,\n      default: () => {}\n    },\n    type: {\n      type: String,\n      default: 'add'\n    }\n  },\n  computed: {\n    memberLength() {\n      return this.query.member_ids ? this.query.member_ids.length : 0\n    },\n    title() {\n      return (\n        {\n          add: '添加积分',\n          'shop-add': '添加积分',\n          'add-by-batch': '批量添加积分',\n          minus: '扣减积分',\n          'shop-minus': '扣减积分',\n          'minus-by-batch': '批量扣减积分'\n        }[this.type] || '增减积分'\n      )\n    },\n    isBatch() {\n      return ['add-by-batch', 'minus-by-batch'].includes(this.type)\n    }\n  },\n  data() {\n    const form = this.$stForm.create()\n    const decorators = form.decorators(ruleOptions(this.type))\n    return {\n      form,\n      decorators,\n      show: false\n    }\n  },\n  methods: {\n    addOrMinusPoints() {\n      this.form.validate().then(values => {\n        this.service\n          .addOrMinusPoints({ ...this.query, ...values }, this.type)\n          .subscribe(res => {\n            this.$emit('done')\n            this.show = false\n          })\n      })\n    }\n  }\n}\n</script>\n"]}]}