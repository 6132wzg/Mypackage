{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/components/hour-picker#/hour-picker.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/components/hour-picker#/hour-picker.vue","mtime":1600926556043},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { SLIDER, WEEK_NO_SELF, WEEK, TIMER } from \"./hour-picker.config\";\nimport { constant, cloneDeep, difference } from 'lodash-es';\nimport DateSlider from '@/views/components/date-slider#/date-slider';\nexport default {\n  name: 'StShopHourPicker',\n  bem: {\n    ShopHourPicker: 'st-hour-picker'\n  },\n  components: {\n    DateSlider: DateSlider\n  },\n  model: {\n    prop: 'value',\n    event: 'ShopHourPickerChange'\n  },\n  props: {\n    // TODO: shop hour picker后续修改，不能有默认值\n    value: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    isInfo: {\n      type: Boolean,\n      default: false\n    },\n    min: {\n      type: Number,\n      default: 0\n    },\n    max: {\n      type: Number,\n      default: 24\n    },\n    step: {\n      type: Number,\n      default: 0.5\n    }\n  },\n  data: function data() {\n    return {\n      defaultWeekList: WEEK,\n      time: TIMER,\n      slider: cloneDeep(SLIDER),\n      copeSlider: {},\n      // 复制到功能需要,为中间值\n      weekSelects: [],\n      isInit: true\n    };\n  },\n  computed: {\n    currentTime: function currentTime() {\n      return this.time[this.isInfo ? 'info' : 'edit'];\n    }\n  },\n  watch: {\n    slider: {\n      handler: function handler(n, o) {\n        var _this = this;\n\n        // console.log('slider 变化', n, o)\n        var value = this.slider.filter(function (item) {\n          return item.show;\n        });\n        value = value.map(function (item) {\n          return {\n            week_day: item.week_day,\n            range: item.range,\n            start_time: _this.timeFilter(item.value[0]),\n            end_time: _this.timeFilter(item.value[1])\n          };\n        });\n        this.$emit('ShopHourPickerChange', value);\n      },\n      deep: true\n    },\n    weekSelects: function weekSelects(n, o) {\n      if (this.isInit) return; // console.log('weekSelects', n, o)\n\n      if (n.length === o.length) return;\n      n.length > o.length ? this.addSlider(n, o) : this.removeSlider(n, o);\n    }\n  },\n  created: function created() {\n    var _this2 = this;\n\n    this.$nextTick(function () {\n      _this2.init();\n    });\n  },\n  methods: {\n    // 获取日期选择数组\n    init: function init() {\n      // console.log('init', this.value)\n      this.weekSelects = this.value.map(function (item) {\n        return item.week_day;\n      });\n      if (this.weekSelects.length) this.getSliderInfoList();else this.isInit = false;\n    },\n    // 获取的数据对格式进行处理\n    getSliderInfoList: function getSliderInfoList() {\n      var _this3 = this;\n\n      // console.log('获取的数据对格式进行处理 => value', this.value)\n      this.value.map(function (item) {\n        var week_day = cloneDeep(item.week_day);\n        var index = --week_day;\n        _this3.slider[index].value = [item.start_time.replace(/:00/gi, '').replace(/:30/gi, '.5') - 0, item.end_time.replace(/:00/gi, '').replace(/:30/gi, '.5') - 0];\n        _this3.slider[index].show = true;\n        _this3.slider[index].range = cloneDeep(item.range); // console.log('sliderByweekDay end', this.slider[index].value)\n      });\n      this.isInit = false; // console.log('根据value值,设置slider => slider', this.slider)\n    },\n    // 新增slider\n    addSlider: function addSlider(n, o) {\n      var _this4 = this;\n\n      var index = difference(n, o); // console.log('addSlider', index)\n\n      index.forEach(function (i) {\n        var endIndex = --i;\n        if (_this4.slider[endIndex].show) return;\n        _this4.slider[endIndex].show = true;\n        _this4.slider[endIndex].value = [10, 24];\n      });\n    },\n    // 删除slider\n    removeSlider: function removeSlider(n, o) {\n      var _this5 = this;\n\n      var index = difference(o, n);\n      index.forEach(function (i) {\n        var endIndex = --i;\n        _this5.slider[endIndex].show = false;\n        _this5.slider[endIndex].value = [];\n      });\n    },\n    // 时间过滤器\n    timeFilter: function timeFilter(time) {\n      return /^\\d+$/.test(time) && time >= 10 ? time + ':00' : /^\\d+$/.test(time) && time < 10 ? '0' + time + ':00' : !/^\\d+$/.test(time) && time < 10 ? '0' + (time + '').replace(/.5/gi, ':30') : (time + '').replace(/.5/gi, ':30') + '';\n    },\n    // tooltip格式处理\n    formatter: function formatter(value) {\n      var valueHalf = value >= 10 ? \"\".concat(parseInt(value), \":30\") : \"0\".concat(parseInt(value), \":30\");\n      var valueInt = value >= 10 ? \"\".concat(value, \":00\") : \"0\".concat(value, \":00\");\n      return value % 1 === 0 ? valueInt : valueHalf;\n    },\n    onChange: function onChange(sliders) {\n      var _this6 = this;\n\n      Array.isArray(sliders) && sliders.forEach(function (key) {\n        if (_this6.slider[key]) _this6.slider[key].value = _this6.copeSlider.value;\n      });\n    },\n    copyTo: function copyTo(item, index) {\n      this.copeSlider = cloneDeep(item);\n      var week = cloneDeep(WEEK_NO_SELF); // WEEK_NO_SELF中对应weekArr中的值设置为true,非对应的或\n\n      this.weekSelects.forEach(function (selectWeekDay) {\n        if (selectWeekDay !== item.week_day) {\n          week[selectWeekDay - 1] = true;\n        }\n      });\n      item.week = week;\n    }\n  },\n  filters: {\n    filterWeekDay: function filterWeekDay(value) {\n      var filterValue = --value;\n      return WEEK[filterValue] && WEEK[filterValue]['label'];\n    },\n    filterOperation: function filterOperation(value) {\n      return WEEK[value] && WEEK[value]['label'];\n    }\n  },\n  beforeDestory: function beforeDestory() {\n    this.weekSelects = [];\n    this.init = true; // console.log('beforeDestory')\n  }\n};",{"version":3,"sources":["hour-picker.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"st-hour-picker\" :class=\"{ isInfo: isInfo }\">\n    <st-checkbox-button-group\n      v-model=\"weekSelects\"\n      v-if=\"!isInfo\"\n      :class=\"ShopHourPicker('check')\"\n    >\n      <st-checkbox-button-item\n        :key=\"index\"\n        :value=\"item.value\"\n        v-for=\"(item, index) in defaultWeekList\"\n      >\n        {{ item.label }}\n      </st-checkbox-button-item>\n    </st-checkbox-button-group>\n    <div class=\"st-hour-picker__content\">\n      <div class=\"st-hour-picker__title\">\n        <div class=\"label\">时间段</div>\n        <div class=\"timeBox\" :class=\"{ isInfo: isInfo, isNotInfo: !isInfo }\">\n          <div class=\"time\" v-for=\"(time, index) in currentTime\" :key=\"index\">\n            {{ time }}\n          </div>\n        </div>\n        <div class=\"operate\" v-if=\"!isInfo\">操作</div>\n      </div>\n      <div\n        :class=\"ShopHourPicker('box')\"\n        v-for=\"(item, index) in slider\"\n        :key=\"index\"\n      >\n        <div :class=\"ShopHourPicker('slider')\" v-if=\"item.show\">\n          <!-- label -->\n          <div class=\"label\">\n            <span>{{ item.week_day | filterWeekDay }}</span>\n          </div>\n          <!-- slider -->\n          <div class=\"sliderBox\">\n            <date-slider\n              :step=\"step\"\n              :disable=\"isInfo\"\n              :rangeData=\"item.range\"\n              :tipFormatter=\"formatter\"\n              v-model=\"item.value\"\n            ></date-slider>\n          </div>\n          <!-- 操作列 -->\n          <div class=\"operation\" v-if=\"!isInfo\">\n            <a-popover\n              placement=\"bottomRight\"\n              trigger=\"click\"\n              class=\"slider-copy-bottom\"\n            >\n              <template slot=\"content\">\n                <a-checkbox-group\n                  @change=\"onChange\"\n                  class=\"slider-copy\"\n                  v-for=\"(canWeekDayCopy, index) in item.week\"\n                  :key=\"index\"\n                >\n                  <a-checkbox :value=\"index\" :disabled=\"!canWeekDayCopy\">\n                    {{ index | filterOperation }}\n                  </a-checkbox>\n                </a-checkbox-group>\n              </template>\n              <span @click=\"copyTo(item, index)\">复制到</span>\n            </a-popover>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { SLIDER, WEEK_NO_SELF, WEEK, TIMER } from './hour-picker.config'\nimport { constant, cloneDeep, difference } from 'lodash-es'\nimport DateSlider from '@/views/components/date-slider#/date-slider'\nexport default {\n  name: 'StShopHourPicker',\n  bem: {\n    ShopHourPicker: 'st-hour-picker'\n  },\n  components: {\n    DateSlider\n  },\n  model: {\n    prop: 'value',\n    event: 'ShopHourPickerChange'\n  },\n  props: {\n    // TODO: shop hour picker后续修改，不能有默认值\n    value: {\n      type: Array,\n      default: () => []\n    },\n    isInfo: {\n      type: Boolean,\n      default: false\n    },\n    min: {\n      type: Number,\n      default: 0\n    },\n    max: {\n      type: Number,\n      default: 24\n    },\n    step: {\n      type: Number,\n      default: 0.5\n    }\n  },\n  data() {\n    return {\n      defaultWeekList: WEEK,\n      time: TIMER,\n      slider: cloneDeep(SLIDER),\n      copeSlider: {}, // 复制到功能需要,为中间值\n      weekSelects: [],\n      isInit: true\n    }\n  },\n  computed: {\n    currentTime() {\n      return this.time[this.isInfo ? 'info' : 'edit']\n    }\n  },\n  watch: {\n    slider: {\n      handler(n, o) {\n        // console.log('slider 变化', n, o)\n        let value = this.slider.filter(item => item.show)\n        value = value.map(item => {\n          return {\n            week_day: item.week_day,\n            range: item.range,\n            start_time: this.timeFilter(item.value[0]),\n            end_time: this.timeFilter(item.value[1])\n          }\n        })\n        this.$emit('ShopHourPickerChange', value)\n      },\n      deep: true\n    },\n    weekSelects(n, o) {\n      if (this.isInit) return\n      // console.log('weekSelects', n, o)\n      if (n.length === o.length) return\n      n.length > o.length ? this.addSlider(n, o) : this.removeSlider(n, o)\n    }\n  },\n  created() {\n    this.$nextTick(() => {\n      this.init()\n    })\n  },\n  methods: {\n    // 获取日期选择数组\n    init() {\n      // console.log('init', this.value)\n      this.weekSelects = this.value.map(item => item.week_day)\n      if (this.weekSelects.length) this.getSliderInfoList()\n      else this.isInit = false\n    },\n    // 获取的数据对格式进行处理\n    getSliderInfoList() {\n      // console.log('获取的数据对格式进行处理 => value', this.value)\n      this.value.map(item => {\n        let week_day = cloneDeep(item.week_day)\n        let index = --week_day\n        this.slider[index].value = [\n          item.start_time.replace(/:00/gi, '').replace(/:30/gi, '.5') - 0,\n          item.end_time.replace(/:00/gi, '').replace(/:30/gi, '.5') - 0\n        ]\n        this.slider[index].show = true\n        this.slider[index].range = cloneDeep(item.range)\n        // console.log('sliderByweekDay end', this.slider[index].value)\n      })\n      this.isInit = false\n      // console.log('根据value值,设置slider => slider', this.slider)\n    },\n    // 新增slider\n    addSlider(n, o) {\n      const index = difference(n, o)\n      // console.log('addSlider', index)\n      index.forEach(i => {\n        let endIndex = --i\n        if (this.slider[endIndex].show) return\n        this.slider[endIndex].show = true\n        this.slider[endIndex].value = [10, 24]\n      })\n    },\n    // 删除slider\n    removeSlider(n, o) {\n      const index = difference(o, n)\n      index.forEach(i => {\n        let endIndex = --i\n        this.slider[endIndex].show = false\n        this.slider[endIndex].value = []\n      })\n    },\n    // 时间过滤器\n    timeFilter(time) {\n      return /^\\d+$/.test(time) && time >= 10\n        ? time + ':00'\n        : /^\\d+$/.test(time) && time < 10\n        ? '0' + time + ':00'\n        : !/^\\d+$/.test(time) && time < 10\n        ? '0' + (time + '').replace(/.5/gi, ':30')\n        : (time + '').replace(/.5/gi, ':30') + ''\n    },\n    // tooltip格式处理\n    formatter(value) {\n      const valueHalf =\n        value >= 10 ? `${parseInt(value)}:30` : `0${parseInt(value)}:30`\n      const valueInt = value >= 10 ? `${value}:00` : `0${value}:00`\n      return value % 1 === 0 ? valueInt : valueHalf\n    },\n    onChange(sliders) {\n      Array.isArray(sliders) &&\n        sliders.forEach(key => {\n          if (this.slider[key]) this.slider[key].value = this.copeSlider.value\n        })\n    },\n    copyTo(item, index) {\n      this.copeSlider = cloneDeep(item)\n      const week = cloneDeep(WEEK_NO_SELF)\n      // WEEK_NO_SELF中对应weekArr中的值设置为true,非对应的或\n      this.weekSelects.forEach(selectWeekDay => {\n        if (selectWeekDay !== item.week_day) {\n          week[selectWeekDay - 1] = true\n        }\n      })\n      item.week = week\n    }\n  },\n  filters: {\n    filterWeekDay(value) {\n      let filterValue = --value\n      return WEEK[filterValue] && WEEK[filterValue]['label']\n    },\n    filterOperation(value) {\n      return WEEK[value] && WEEK[value]['label']\n    }\n  },\n  beforeDestory() {\n    this.weekSelects = []\n    this.init = true\n    // console.log('beforeDestory')\n  }\n}\n</script>\n"],"sourceRoot":"src/views/components/hour-picker#"}]}