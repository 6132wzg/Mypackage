{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js!/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/reception/entrance/entrance.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/reception/entrance/entrance.vue","mtime":1594718340686},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js","mtime":1591062572352},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { EntranceService } from \"./entrance.service\";\nimport { columns } from \"./entrance.config.ts\";\nimport tableMixin from '@/mixins/table.mixin';\nexport default {\n  mixins: [tableMixin],\n  name: 'PageShopReceptionEntrance',\n  bem: {\n    entrance: 'page-shop-reception-entrance'\n  },\n  serviceInject: function serviceInject() {\n    return {\n      entranceService: EntranceService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      auth: this.entranceService.auth$,\n      entryTypeList: this.entranceService.entryTypeList$,\n      list: this.entranceService.list$,\n      page: this.entranceService.page$,\n      loading: this.entranceService.loading$\n    };\n  },\n  computed: {\n    columns: columns\n  },\n  methods: {\n    // 离场之前的确认\n    onLeaveConfirm: function onLeaveConfirm(record) {\n      var _this = this;\n\n      this.entranceService.getCabinetInfo(record.member_id).subscribe(function (res) {\n        if (res.info.is_smart) {\n          _this.$error({\n            title: \"\\u5F53\\u524D\\u4F1A\\u5458\\u6709\\u50A8\\u7269\\u67DC\\u300C\".concat(res.info.cabinet_area_name, \"\\u300D\\u300C\").concat(res.info.serial_num, \"\\u300D\\u5C1A\\u672A\\u5F52\\u8FD8\\uFF0C\\u8BF7\\u5148\\u5F52\\u8FD8\\uFF01\"),\n            okText: '知道了'\n          });\n        } else {\n          _this.onLeave(record);\n        }\n      });\n    },\n    // 离场\n    onLeave: function onLeave(record) {\n      var _this2 = this;\n\n      this.$confirm({\n        title: '离场',\n        content: \"\\u786E\\u5B9A\\u79BB\\u573A\\u5417\\uFF1F\",\n        onOk: function onOk() {\n          return _this2.entranceService.setEntranceLeave(record.member_id).toPromise().then(function () {\n            _this2.onSelectionReset();\n\n            _this2.$router.reload();\n          });\n        }\n      });\n    },\n    // 批量离场\n    onLeaveBatch: function onLeaveBatch() {\n      var _this3 = this;\n\n      var ids = [];\n      this.selectedRows.forEach(function (i) {\n        ids.push(i.member_id);\n      });\n      this.$confirm({\n        title: '批量离场',\n        content: \"\\u786E\\u5B9A\\u79BB\\u573A\\u5417\\uFF1F\",\n        onOk: function onOk() {\n          return _this3.entranceService.setEntranceLeaveBatch({\n            ids: ids\n          }).toPromise().then(function () {\n            _this3.onSelectionReset();\n\n            _this3.$router.reload();\n          });\n        }\n      });\n    }\n  }\n};",null]}