{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js!/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/vue-service-app/src/controller-mixin.js","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/vue-service-app/src/controller-mixin.js","mtime":1591147717498},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js","mtime":1591062572352},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418}],"contextDependencies":[],"result":["import { isFunction, forEach } from 'lodash-es';\nimport { plusHook } from 'vue-router-plus';\nimport Multiguard from 'vue-router-multiguard';\n\nvar createController = function createController(Ctrl, container) {\n  var ctrl;\n  var mixin = {\n    beforeRouteEnter: [function (to, from, next) {\n      ctrl = container.get(Ctrl);\n      next();\n    }, function (to, from, next) {\n      if (!ctrl) {\n        next();\n      }\n\n      var beforeHooks = [];\n\n      if (isFunction(ctrl.beforeEach)) {\n        beforeHooks.push(plusHook(ctrl.beforeEach.bind(ctrl)));\n      }\n\n      if (isFunction(ctrl.beforeRouteEnter)) {\n        beforeHooks.push(plusHook(ctrl.beforeRouteEnter.bind(ctrl)));\n      }\n\n      return Multiguard(beforeHooks)(to, from, next);\n    }],\n    beforeRouteUpdate: [function (to, from, next) {\n      if (!ctrl) {\n        next();\n      }\n\n      var updateHooks = [];\n\n      if (isFunction(ctrl.beforeEach)) {\n        updateHooks.push(plusHook(ctrl.beforeEach.bind(ctrl)));\n      }\n\n      if (isFunction(ctrl.beforeRouteUpdate)) {\n        updateHooks.push(plusHook(ctrl.beforeRouteUpdate.bind(ctrl)));\n      }\n\n      return Multiguard(updateHooks)(to, from, next);\n    }],\n    beforeRouteLeave: [],\n    beforeCreate: [function () {\n      var _this = this;\n\n      if (!ctrl) {\n        return;\n      }\n\n      if (isFunction(ctrl.beforeCreate)) {\n        this.$root._skeletonLoading = true;\n        var ret = ctrl.beforeCreate.call(ctrl);\n\n        if (ret && ret.subscribe) {\n          ret.subscribe(function () {\n            _this.$root._skeletonLoading = false;\n          }, function () {\n            _this.$root._skeletonLoading = false;\n          });\n        }\n\n        return ret;\n      }\n    }],\n    beforeDestroy: [function () {\n      container.destroy(Ctrl);\n      ctrl = null;\n    }]\n  };\n  return mixin;\n};\n\nexport default createController;",null]}