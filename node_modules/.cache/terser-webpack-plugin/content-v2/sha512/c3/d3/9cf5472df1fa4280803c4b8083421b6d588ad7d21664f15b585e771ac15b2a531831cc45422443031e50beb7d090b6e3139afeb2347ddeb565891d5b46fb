{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"brand-setting-contract\"],{\"227b\":function(t,e,n){t.exports=n.p+\"img/avatar_default_contract.390d1d0a.png\"},\"2ce9\":function(t,e,n){\"use strict\";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"st-panel\",{class:t.bPage(),attrs:{app:\"\"}},[n(\"a-row\",{attrs:{gutter:24}},t._l(t.list,(function(e){return n(\"a-col\",{key:e.id,attrs:{xl:8,xxl:6,xs:12}},[n(\"div\",{class:t.bItem()},[n(\"div\",{class:t.bItem(\"body\")},[n(\"div\",{class:t.bItem(\"body-lt\")},[n(\"st-initials-tag\",{attrs:{value:e.contract_title.indexOf(\"储物柜\")>-1?\"柜\":e.contract_title}})],1),n(\"div\",{class:t.bItem(\"body-rt\")},[n(\"div\",{class:t.bItem(\"title-box\")},[n(\"st-t3\",{class:t.bItem(\"title\")},[t._v(t._s(e.contract_title))]),n(\"div\",{class:t.bItem(\"status\",{success:t.isInitial(e),warning:!t.isInitial(e)})},[n(\"a-badge\",{attrs:{status:t.isInitial(e)?\"success\":\"warning\"}}),t._v(\"\\n                \"+t._s(t._f(\"enumFilter\")(e.is_initialize_status,\"setting.is_initialize_status\"))+\"\\n              \")],1)],1),n(\"p\",{class:t.bItem(\"desc\")},[t._v(t._s(e.contract_describe))])])]),n(\"div\",{class:t.bItem(\"footer\")},[t.isInitial(e)?[t.auth.edit?n(\"router-link\",{staticClass:\"st-link-secondary\",class:t.bItem(\"action\"),attrs:{to:{path:\"./edit\",query:{id:e.id}}}},[t._v(\"\\n              编辑\\n            \")]):t._e()]:[t.auth.edit?n(\"router-link\",{staticClass:\"st-link-secondary\",class:t.bItem(\"action\"),attrs:{to:{path:\"./edit\",query:{id:e.id}}}},[t._v(\"\\n              去设置\\n            \")]):t._e()]],2)])])})),1),t.list.length?t._e():n(\"h3\",[t._v(\"无任何合同模版\")])],1)},a=[],s=n(\"7deb\"),o=n(\"2138\"),c={bem:{bPage:\"page-brand-setting-contract-list\",bItem:\"contract-item\"},serviceInject:function(){return{listService:s[\"ListService\"],userService:o[\"a\"]}},rxState:function(){this.userService;return{list:this.listService.list$,auth:this.listService.auth$}},methods:{isInitial:function(t){return!!t.is_initialize_status}}},r=c,l=n(\"2877\"),u=Object(l[\"a\"])(r,i,a,!1,null,null,null);e[\"default\"]=u.exports},\"7deb\":function(t,e,n){\"use strict\";n.r(e),n.d(e,\"ListService\",(function(){return b}));var i,a,s=n(\"d225\"),o=n(\"b0b4\"),c=n(\"9ab4\"),r=n(\"0cd5\"),l=n(\"af6c\"),u=n(\"54da\"),f=n(\"c4cc\"),d=n(\"df29\"),_=n(\"2cbb\"),b=function(){function t(e,n){Object(s[\"a\"])(this,t),this.contractApi=e,this.authService=n,this.list$=new d[\"d\"]([]),this.auth$=this.authService.authMap$({edit:\"brand:contract:contract_tpl|edit\"})}return Object(o[\"a\"])(t,[{key:\"SET_LIST\",value:function(t){this.list$.commit((function(){return t}))}},{key:\"getList\",value:function(){var t=this;return this.contractApi.getList().pipe(Object(f[\"a\"])((function(e){t.SET_LIST(e.list)})))}},{key:\"init\",value:function(){return Object(u[\"a\"])(this.getList())}},{key:\"beforeRouteEnter\",value:function(){return this.init()}}]),t}();b=Object(c[\"b\"])([Object(r[\"b\"])(),Object(c[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(i=\"undefined\"!==typeof l[\"a\"]&&l[\"a\"])?i:Object,\"function\"===typeof(a=\"undefined\"!==typeof _[\"a\"]&&_[\"a\"])?a:Object])],b)},a511:function(t,e,n){\"use strict\";n.r(e);var i,a,s,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{class:t.bPage()},[n(\"aside\",{class:t.bSider()},[n(\"st-panel\",{attrs:{title:\"合同设置\"}},[n(\"div\",{attrs:{slot:\"actions\"},slot:\"actions\"},[n(\"st-button\",{attrs:{type:\"primary\",loading:t.loading.updateContract},on:{click:t.onUpdateContract}},[t._v(\"\\n          保存\\n        \")])],1),n(\"st-t4\",[t._v(\"基础信息\")]),n(\"st-form\",{staticClass:\"mg-t24\",attrs:{labelWidth:\"88px\",labelGutter:\"16px\"}},[n(\"st-form-item\",{attrs:{label:\"合同标题\"}},[n(\"a-textarea\",{attrs:{placeholder:\"请输入合同标题\",maxlength:\"30\"},model:{value:t.info.contract_title,callback:function(e){t.$set(t.info,\"contract_title\",e)},expression:\"info.contract_title\"}})],1),n(\"st-form-item\",{attrs:{label:\"合同编号\"}},[n(\"a-input\",{class:t.bSider(\"prefix\"),attrs:{placeholder:\"输入合同编号前缀\"},model:{value:t.info.contract_prefix,callback:function(e){t.$set(t.info,\"contract_prefix\",e)},expression:\"info.contract_prefix\"}}),t._v(\"\\n          +8位随机编号\\n        \")],1),n(\"st-form-item\",{class:t.bSider(\"form-item\",{radio:!0}),attrs:{label:\"首行边距\"}},[n(\"a-radio-group\",{on:{change:t.onPageMargetChange},model:{value:t.info.contract_marget_type,callback:function(e){t.$set(t.info,\"contract_marget_type\",e)},expression:\"info.contract_marget_type\"}},[n(\"a-radio\",{attrs:{value:0}},[t._v(\"默认\")]),n(\"a-radio\",{attrs:{value:1}},[t._v(\"行距\")])],1),n(\"a-input-number\",{attrs:{disabled:0===t.info.contract_marget_type,min:0},model:{value:t.info.contract_marget,callback:function(e){t.$set(t.info,\"contract_marget\",e)},expression:\"info.contract_marget\"}}),n(\"span\",{staticClass:\"mg-l4\"},[t._v(\"mm\")])],1),n(\"st-form-item\",{class:t.bSider(\"form-item\",{switch:!0}),attrs:{label:\"合同编号\"}},[n(\"st-switch\",{model:{value:t.info.is_contract_number,callback:function(e){t.$set(t.info,\"is_contract_number\",e)},expression:\"info.is_contract_number\"}})],1),n(\"st-form-item\",{class:t.bSider(\"form-item\",{switch:!0}),attrs:{label:\"备注\"}},[n(\"st-switch\",{model:{value:t.info.is_comment,callback:function(e){t.$set(t.info,\"is_comment\",e)},expression:\"info.is_comment\"}})],1),n(\"st-form-item\",{class:t.bSider(\"form-item\",{switch:!0}),attrs:{label:\"合同章程\"}},[n(\"a\",{directives:[{name:\"modal-link\",rawName:\"v-modal-link\",value:{name:\"contract-constitution\",props:{id:t.info.id,type:t.info.template_title,lawContent:t.lawContent},on:{done:t.onLawContentDone}},expression:\"{\\n              name: 'contract-constitution',\\n              props: {\\n                id: info.id,\\n                type: info.template_title,\\n                lawContent\\n              },\\n              on: {\\n                done: onLawContentDone\\n              }\\n            }\"}]},[t._v(\"\\n            编辑内容\\n          \")]),n(\"st-switch\",{model:{value:t.info.is_law_content,callback:function(e){t.$set(t.info,\"is_law_content\",e)},expression:\"info.is_law_content\"}})],1),n(\"st-t4\",[t._v(\"品牌信息\")]),n(\"st-form-item\",{staticClass:\"mg-t24\",class:t.bSider(\"form-item\",{switch:!0}),attrs:{label:\"品牌logo\"}},[n(\"st-switch\",{model:{value:t.info.is_brand_logo,callback:function(e){t.$set(t.info,\"is_brand_logo\",e)},expression:\"info.is_brand_logo\"}})],1),n(\"st-form-item\",{class:t.bSider(\"form-item\",{switch:!0}),attrs:{label:\"品牌名称\"}},[n(\"st-switch\",{model:{value:t.info.is_brand_name,callback:function(e){t.$set(t.info,\"is_brand_name\",e)},expression:\"info.is_brand_name\"}})],1),n(\"st-t4\",[t._v(\"会员信息\")]),n(\"st-form-item\",{staticClass:\"mg-t24\",class:t.bSider(\"form-item\",{switch:!0}),attrs:{label:\"会员人脸\"}},[n(\"st-switch\",{model:{value:t.info.is_member_pic,callback:function(e){t.$set(t.info,\"is_member_pic\",e)},expression:\"info.is_member_pic\"}})],1),n(\"st-form-item\",{class:t.bSider(\"form-item\",{switch:!0}),attrs:{label:\"会员姓名\"}},[n(\"st-switch\",{model:{value:t.info.is_member_name,callback:function(e){t.$set(t.info,\"is_member_name\",e)},expression:\"info.is_member_name\"}})],1),n(\"st-form-item\",{class:t.bSider(\"form-item\",{switch:!0}),attrs:{label:\"联系方式\"}},[n(\"st-switch\",{model:{value:t.info.is_member_mobile,callback:function(e){t.$set(t.info,\"is_member_mobile\",e)},expression:\"info.is_member_mobile\"}})],1),n(\"st-form-item\",{class:t.bSider(\"form-item\",{switch:!0}),attrs:{label:\"性别\"}},[n(\"st-switch\",{model:{value:t.info.is_member_sex,callback:function(e){t.$set(t.info,\"is_member_sex\",e)},expression:\"info.is_member_sex\"}})],1),n(\"st-form-item\",{class:t.bSider(\"form-item\",{switch:!0}),attrs:{label:\"身份证号\"}},[n(\"st-switch\",{model:{value:t.info.is_member_id_card,callback:function(e){t.$set(t.info,\"is_member_id_card\",e)},expression:\"info.is_member_id_card\"}})],1),n(\"st-form-item\",{class:t.bSider(\"form-item\",{switch:!0}),attrs:{label:\"家庭地址\"}},[n(\"st-switch\",{model:{value:t.info.is_member_address,callback:function(e){t.$set(t.info,\"is_member_address\",e)},expression:\"info.is_member_address\"}})],1),n(\"st-form-item\",{class:t.bSider(\"form-item\",{switch:!0}),attrs:{label:\"销售人员\"}},[n(\"st-switch\",{model:{value:t.info.is_salesman_name,callback:function(e){t.$set(t.info,\"is_salesman_name\",e)},expression:\"info.is_salesman_name\"}})],1),n(\"st-t4\",[t._v(\"家长信息\")]),n(\"st-form-item\",{staticClass:\"mg-t24\",class:t.bSider(\"form-item\",{switch:!0}),attrs:{label:\"家长姓名\"}},[n(\"st-switch\",{model:{value:t.info.is_parent_name,callback:function(e){t.$set(t.info,\"is_parent_name\",e)},expression:\"info.is_parent_name\"}})],1),n(\"st-form-item\",{class:t.bSider(\"form-item\",{switch:!0}),attrs:{label:\"家长手机号\"}},[n(\"st-switch\",{model:{value:t.info.is_parent_mobile,callback:function(e){t.$set(t.info,\"is_parent_mobile\",e)},expression:\"info.is_parent_mobile\"}})],1),n(\"st-form-item\",{class:t.bSider(\"form-item\",{switch:!0}),attrs:{label:\"家长身份\"}},[n(\"st-switch\",{model:{value:t.info.is_parent_rule,callback:function(e){t.$set(t.info,\"is_parent_rule\",e)},expression:\"info.is_parent_rule\"}})],1),n(\"st-form-item\",{class:t.bSider(\"form-item\",{switch:!0}),attrs:{label:\"家长身份证号\"}},[n(\"st-switch\",{model:{value:t.info.is_parent_id_card,callback:function(e){t.$set(t.info,\"is_parent_id_card\",e)},expression:\"info.is_parent_id_card\"}})],1)],1)],1)],1),n(\"main\",{class:t.bMain()},[n(\"st-panel\",{class:t.bMain(\"panel\"),attrs:{title:\"合同预览\",loading:t.loading.getInfo||t.loading.getConstitutionInfo||t.loading.getCodeInfo}},[n(\"contract-preview\",{attrs:{info:t.info,codeDemo:t.codeDemo,lawContent:t.lawContent}})],1)],1)])},c=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{class:t.b(),style:{\"margin-top\":t.info.contract_marget+\"mm\"}},[i(\"header\",{class:t.b(\"header\")},[t.info.is_brand_logo?i(\"img\",{class:t.b(\"brand-logo\"),attrs:{src:t.brand.logo,alt:\"brand-logo\"}}):t._e(),i(\"h1\",{class:t.b(\"title\")},[t._v(t._s(t.info.contract_title))]),t.info.is_brand_name?i(\"h4\",{class:t.b(\"brand-name\")},[t._v(\"这里是品牌名称\")]):t._e(),t.info.is_contract_number?i(\"div\",{class:t.b(\"contract-code\")},[i(\"label\",{staticClass:\"info-label\"},[t._v(\"合同编号：\")]),i(\"span\",{staticClass:\"info-text\"},[t._v(t._s(t.codeDemo||\"暂无\"))])]):t._e()]),i(\"section\",{class:t.b(\"basic\")},[i(\"div\",{class:t.b(\"basic-list\")},[i(\"a-row\",{attrs:{gutter:24}},[t.info.is_member_name?i(\"a-col\",{attrs:{span:8}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-label\"},[t._v(\"姓名：\")]),i(\"span\",{staticClass:\"info-text\"},[t._v(\"张三\")])])]):t._e(),t.info.is_member_mobile?i(\"a-col\",{attrs:{span:8}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-label\"},[t._v(\"联系方式：\")]),i(\"span\",{staticClass:\"info-text\"},[t._v(\"13900000000\")])])]):t._e(),t.info.is_member_sex?i(\"a-col\",{attrs:{span:8}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-label\"},[t._v(\"性别：\")]),i(\"span\",{staticClass:\"info-text\"},[t._v(\"男\")])])]):t._e(),t.info.is_salesman_name?i(\"a-col\",{attrs:{span:8}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-label\"},[t._v(\"销售人员：\")]),i(\"span\",{staticClass:\"info-text\"},[t._v(\"李四\")])])]):t._e(),t.info.is_member_id_card?i(\"a-col\",{attrs:{span:12}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-label\"},[t._v(\"身份证：\")]),i(\"span\",{staticClass:\"info-text\"},[t._v(\"31010319900101000\")])])]):t._e(),t.info.is_parent_name?i(\"a-col\",{attrs:{span:8}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-label\"},[t._v(\"家长姓名：\")]),i(\"span\",{staticClass:\"info-text\"},[t._v(\"papa\")])])]):t._e(),t.info.is_parent_mobile?i(\"a-col\",{attrs:{span:8}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-label\"},[t._v(\"家长联系方式：\")]),i(\"span\",{staticClass:\"info-text\"},[t._v(\"13900000000\")])])]):t._e(),t.info.is_parent_rule?i(\"a-col\",{attrs:{span:8}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-label\"},[t._v(\"家长身份：\")]),i(\"span\",{staticClass:\"info-text\"},[t._v(\"爸爸\")])])]):t._e(),t.info.is_parent_id_card?i(\"a-col\",{attrs:{span:12}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-label\"},[t._v(\"家长身份证号：\")]),i(\"span\",{staticClass:\"info-text\"},[t._v(\"31010319900101000\")])])]):t._e(),t.info.is_member_address?i(\"a-col\",{attrs:{span:12}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-label\"},[t._v(\"家庭住址：\")]),i(\"span\",{staticClass:\"info-text\"},[t._v(\"上海市黄浦区南京西路X号\")])])]):t._e()],1)],1),t.info.is_member_pic?i(\"div\",{class:t.b(\"avatar\")},[i(\"img\",{attrs:{src:n(\"227b\"),alt:\"avatar\"}})]):t._e()]),i(\"section\",{class:t.b(\"product\")},[i(\"st-form-table\",[i(\"thead\",[t.showAllTh?i(\"tr\",[i(\"th\",[t._v(\"商品名称\")]),i(\"th\",[t._v(\"支持入场人数\")]),i(\"th\",[t._v(\"价格\")]),i(\"th\",[t._v(\"优惠\")]),i(\"th\",[t._v(\"小计\")])]):t._e(),t.showSomeTh?i(\"tr\",[i(\"th\",[t._v(\"商品名称\")]),i(\"th\",[t._v(\"小计\")])]):t._e(),t.showSmallCourseTh?i(\"tr\",[i(\"th\",[t._v(\"商品名称\")]),i(\"th\",[t._v(\"购买课时\")]),i(\"th\",[t._v(\"价格\")]),i(\"th\",[t._v(\"优惠\")]),i(\"th\",[t._v(\"小计\")])]):t._e()]),i(\"tbody\",[t.info.contract_type===t.CONTRACT_TYPE.MEMBER_CARD?i(\"tr\",[i(\"td\",[t._v(\"会员年卡\")]),i(\"td\",[t._v(\"5\")]),i(\"td\",[t._v(\"10000.00元\")]),i(\"td\",[t._v(\"400.00元\")]),i(\"td\",[t._v(\"9600.00元\")])]):t._e(),t.info.contract_type===t.CONTRACT_TYPE.PERSONAL?i(\"tr\",[i(\"td\",[t._v(\"减脂塑型\")]),i(\"td\",[t._v(\"10000.00元\")]),i(\"td\",[t._v(\"400.00元\")]),i(\"td\",[t._v(\"9600.00元\")]),i(\"td\",[t._v(\"9600.00元\")])]):t._e(),t.info.contract_type===t.CONTRACT_TYPE.PACKAGE?i(\"tr\",[i(\"td\",[t._v(\"综合课程训练\")]),i(\"td\",[t._v(\"10000.00元\")]),i(\"td\",[t._v(\"400.00元\")]),i(\"td\",[t._v(\"9600.00元\")])]):t._e(),t.info.contract_type===t.CONTRACT_TYPE.DEPOSITE?i(\"tr\",[i(\"td\",[t._v(\"储值11000元\")]),i(\"td\",[t._v(\"10000.00元\")]),i(\"td\",[t._v(\"400.00元\")]),i(\"td\",[t._v(\"9600.00元\")])]):t._e(),t.info.contract_type===t.CONTRACT_TYPE.CABINET?i(\"tr\",[i(\"td\",[t._v(\"长租柜A01\")]),i(\"td\",[t._v(\"10000.00元\")]),i(\"td\",[t._v(\"400.00元\")]),i(\"td\",[t._v(\"9600.00元\")])]):t._e(),t.info.contract_type===t.CONTRACT_TYPE.MONEY?i(\"tr\",[i(\"td\",[t._v(\"定金200元\")]),i(\"td\",[t._v(\"9600.00元\")])]):t._e(),t.info.contract_type===t.CONTRACT_TYPE.SMALL_COURSE?i(\"tr\",[i(\"td\",[t._v(t._s(t.$c(\"small_course\")))]),i(\"td\",[t._v(\"8\")]),i(\"td\",[t._v(\"10000.00元\")]),i(\"td\",[t._v(\"400.00元\")]),i(\"td\",[t._v(\"9600.00元\")])]):t._e()])])],1),i(\"section\",{class:t.b(\"advanced\")},[i(\"a-row\",[i(\"a-col\",{attrs:{span:8}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-label\"},[t._v(\"合同总金额：\")]),i(\"span\",{staticClass:\"info-text\"},[t._v(\"9600.00元\")])])]),t.info.contract_type===t.CONTRACT_TYPE.MEMBER_CARD?i(\"a-col\",{attrs:{span:8}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-label\"},[t._v(\"开卡方式：\")]),i(\"span\",{staticClass:\"info-text\"},[t._v(\"购买即开卡\")])])]):t._e(),i(\"a-col\",{attrs:{span:8}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-label\"},[t._v(\"购买门店：\")]),i(\"span\",{staticClass:\"info-text\"},[t._v(\"三体云动总部\")])])]),t.info.contract_type===t.CONTRACT_TYPE.PACKAGE?i(\"a-col\",{attrs:{span:8}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-label\"},[t._v(\"生效方式：\")]),i(\"span\",{staticClass:\"info-text\"},[t._v(\"即时生效\")])])]):t._e(),i(\"a-col\",{attrs:{span:24}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-label\"},[t._v(\"合同有效期：\")]),i(\"span\",{staticClass:\"info-text\"},[t._v(\"\\n            \"+t._s(t._f(\"dateFilter\")(t.today,\"YYYY年M月D日\"))+\"至2022年1月1日\\n          \")])])]),t.info.is_comment?i(\"a-col\",{attrs:{span:24}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-label\"},[t._v(\"备注：\")]),i(\"span\",{staticClass:\"info-text\"},[t._v(\"\\n            展示订单的备注信息，以便了解当下订单的具体情况\\n          \")])])]):t._e(),t.info.is_law_content?i(\"a-col\",{attrs:{span:24}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-label\"},[t._v(\"合同章程：\")]),i(\"samp\",{staticClass:\"info-text\"},[t._v(t._s(t.lawContent))])])]):t._e()],1)],1),i(\"footer\",{class:t.b(\"footer\")},[i(\"a-row\",[i(\"a-col\",{attrs:{span:12}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-lable\"},[t._v(\"会员签名：\")])])]),i(\"a-col\",{attrs:{span:12}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-lable\"},[t._v(\"会所签名：\")])])]),i(\"a-col\",{attrs:{span:12}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-lable\"},[t._v(\"签订日期：\")])])]),i(\"a-col\",{attrs:{span:12}},[i(\"div\",{staticClass:\"info-item\"},[i(\"label\",{staticClass:\"info-lable\"},[t._v(\"签订日期：\")])])])],1)],1)])},l=[],u=n(\"185b\"),f=n(\"e8a3\"),d=n(\"c32d\"),_=n.n(d),b=n(\"2138\"),m={props:{info:{type:Object,default:function(){return{}}},codeDemo:{type:String,default:\"\"},lawContent:{type:String,default:\"\"}},bem:{b:\"contract-preview\"},serviceInject:function(){return{userService:b[\"a\"]}},rxState:function(){return{brand:this.userService.brand$}},filters:{dateFilter:u[\"dateFilter\"]},data:function(){return{CONTRACT_TYPE:f[\"a\"],today:_()()}},computed:{showAllTh:function(){switch(this.info.contract_type){case f[\"a\"].MEMBER_CARD:case f[\"a\"].PERSONAL:case f[\"a\"].PACKAGE:case f[\"a\"].CABINET:case f[\"a\"].DEPOSITE:return!0;default:return!1}},showSomeTh:function(){switch(this.info.contract_type){case f[\"a\"].MONEY:return!0;default:return!1}},showSmallCourseTh:function(){switch(this.info.contract_type){case f[\"a\"].SMALL_COURSE:return!0;default:return!1}}}},p=m,v=n(\"2877\"),h=Object(v[\"a\"])(p,r,l,!1,null,null,null),C=h.exports,g=n(\"b97d\"),y=n(\"e69b\"),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"st-modal\",{class:t.bModal(),attrs:{confirmLoading:t.loading.updateConstitution,width:\"60%\",title:t.type+\"设置\"},on:{ok:t.onSubmit},model:{value:t.show,callback:function(e){t.show=e},expression:\"show\"}},[n(\"st-textarea\",{class:t.bModal(\"textarea\"),attrs:{autosize:{minRows:20},maxlength:\"30000\",placeholder:\"请输入合同章程，支持换行，空格...\"},model:{value:t.content,callback:function(e){t.content=e},expression:\"content\"}})],1)},w=[],S=(n(\"c5f6\"),n(\"d225\")),j=n(\"b0b4\"),x=n(\"9ab4\"),E=n(\"af6c\"),T=n(\"0cd5\"),I=n(\"df29\"),k=function(){function t(e,n){Object(S[\"a\"])(this,t),this.contractApi=e,this.userService=n,this.loading$=new I[\"d\"]({}),this.productType$=this.userService.getOptions$(\"transaction.product_type\")}return Object(j[\"a\"])(t,[{key:\"updateConstitution\",value:function(t){return this.contractApi.updateConstitution(t)}}]),t}();Object(x[\"b\"])([Object(I[\"c\"])(),Object(x[\"d\"])(\"design:type\",Function),Object(x[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(i=\"undefined\"!==typeof E[\"ContractConstitutionInput\"]&&E[\"ContractConstitutionInput\"])?i:Object]),Object(x[\"d\"])(\"design:returntype\",void 0)],k.prototype,\"updateConstitution\",null),k=Object(x[\"b\"])([Object(T[\"b\"])(),Object(x[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(a=\"undefined\"!==typeof E[\"a\"]&&E[\"a\"])?a:Object,\"function\"===typeof(s=\"undefined\"!==typeof b[\"a\"]&&b[\"a\"])?s:Object])],k);var A={props:{id:{type:Number,required:!0},type:{type:String,required:!0},lawContent:{type:String,default:\"\"}},bem:{bModal:\"modal-contract-constitution\"},data:function(){return{show:!0,content:\"\"}},serviceInject:function(){return{constitutionService:k,messageService:y[\"a\"]}},rxState:function(){return{loading:this.constitutionService.loading$,productType:this.constitutionService.productType$}},created:function(){this.content=this.lawContent},methods:{onSubmit:function(){var t=this;this.constitutionService.updateConstitution({id:this.id,brand_law_content:this.content}).subscribe((function(){t.messageService.success({content:\"更新合同章程成功！\"}),t.show=!1,t.$emit(\"done\")}))}}},$=A,R=Object(v[\"a\"])($,O,w,!1,null,null,null),M=R.exports,D=\"page-setting-contract-edit\",P={name:D,components:{ContractPreview:C},bem:{bPage:D,bSider:\"\".concat(D,\"-sider\"),bMain:\"\".concat(D,\"-main\")},modals:{ContractConstitution:M},serviceInject:function(){return{editService:g[\"EditService\"],message:y[\"a\"]}},rxState:function(){var t=this.editService;return{info:t.info$,codeRules:t.codeRules$,lawContent:t.lawContent$,codeDemo:t.codeDemo$,loading:t.loading$}},methods:{onCodeDone:function(){this.editService.getCodeInfo().subscribe()},onLawContentDone:function(){this.editService.getConstitutionInfo().subscribe()},onPageTypeChange:function(t){0===t.target.value&&(this.info.contract_page=100)},onPageMargetChange:function(t){0===t.target.value&&(this.info.contract_marget=20)},onUpdateContract:function(){var t=this;this.editService.updateContract(this.info).subscribe((function(){t.message.success({content:\"保存合同模版成功！\"})}))}}},N=P,L=Object(v[\"a\"])(N,o,c,!1,null,null,null);e[\"default\"]=L.exports},af6c:function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return f}));n(\"6b54\"),n(\"2397\");var i=n(\"d225\"),a=n(\"b0b4\"),s=n(\"308d\"),o=n(\"6bb5\"),c=n(\"4e2b\"),r=n(\"de46\");function l(t){return function(){var e,n=Object(o[\"a\"])(t);if(u()){var i=Object(o[\"a\"])(this).constructor;e=Reflect.construct(n,arguments,i)}else e=n.apply(this,arguments);return Object(s[\"a\"])(this,e)}}function u(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var f=function(t){Object(c[\"a\"])(n,t);var e=l(n);function n(){return Object(i[\"a\"])(this,n),e.apply(this,arguments)}return Object(a[\"a\"])(n,[{key:\"getList\",value:function(){return this.http.get(\"/v1/setting/contract\")}},{key:\"getInfo\",value:function(t){return this.http.get(\"/v1/setting/contract/\".concat(t),{})}},{key:\"update\",value:function(t){return this.http.put(\"/v1/setting/contract/\".concat(t.id),{params:t})}},{key:\"add\",value:function(t){return this.http.post(\"/v1/setting/contract\",{params:t})}},{key:\"getConstitutionInfo\",value:function(t){return this.http.get(\"/v1/setting/contract/constitution/\".concat(t),{})}},{key:\"updateConstitution\",value:function(t){return this.http.put(\"/v1/setting/contract/constitution/\".concat(t.id),{params:t})}},{key:\"getCodeInfo\",value:function(t){return this.http.get(\"/v1/setting/contract/code/\".concat(t),{})}},{key:\"updateCode\",value:function(t){return this.http.put(\"/v1/setting/contract/code/\".concat(t.id),{params:t})}},{key:\"getCodeNumber\",value:function(t){return this.http.get(\"/v1/setting/contract/codenumber/\".concat(t))}}]),n}(r[\"a\"])},b97d:function(t,e,n){\"use strict\";n.r(e),n.d(e,\"EditService\",(function(){return m}));var i,a,s,o=n(\"d225\"),c=n(\"b0b4\"),r=n(\"9ab4\"),l=n(\"0cd5\"),u=n(\"af6c\"),f=n(\"54da\"),d=n(\"c4cc\"),_=n(\"df29\"),b=n(\"e8a3\"),m=function(){function t(e,n){Object(o[\"a\"])(this,t),this.contractApi=e,this.router=n,this.info$=new _[\"d\"]({}),this.codeRules$=new _[\"d\"]([]),this.codeDemo$=new _[\"d\"](\"\"),this.lawContent$=new _[\"d\"](\"\"),this.loading$=new _[\"d\"]({})}return Object(c[\"a\"])(t,[{key:\"SET_CODE\",value:function(t,e){this.codeDemo$.commit((function(){return e}));var n=t.map((function(t){return t.sn_generate_rule===b[\"b\"].RANDOM&&(t._value=\"RANDOM\"),t.sn_generate_rule===b[\"b\"].FIXED&&(t._value=t.sn_generate_value),t}));this.codeRules$.commit((function(){return n}))}},{key:\"getInfo\",value:function(){var t=this,e=this.router.to.meta.query.id;return this.contractApi.getInfo(e).pipe(Object(d[\"a\"])((function(e){t.info$.commit((function(){return e.info}))})))}},{key:\"getCodeInfo\",value:function(){var t=this,e=this.router.to.meta.query.id;return this.contractApi.getCodeInfo(e).pipe(Object(d[\"a\"])((function(e){t.SET_CODE(e.list,e.code.rand_code)})))}},{key:\"getConstitutionInfo\",value:function(){var t=this,e=this.router.to.meta.query.id;return this.contractApi.getConstitutionInfo(e).pipe(Object(d[\"a\"])((function(e){t.lawContent$.commit((function(){return e.info.brand_law_content||\"\"}))})))}},{key:\"updateContract\",value:function(t){return this.contractApi.update(t)}},{key:\"init\",value:function(){return Object(f[\"a\"])(this.getInfo(),this.getConstitutionInfo())}},{key:\"beforeEach\",value:function(t){return this.init()}}]),t}();Object(r[\"b\"])([Object(_[\"c\"])(),Object(r[\"d\"])(\"design:type\",Function),Object(r[\"d\"])(\"design:paramtypes\",[]),Object(r[\"d\"])(\"design:returntype\",void 0)],m.prototype,\"getInfo\",null),Object(r[\"b\"])([Object(_[\"c\"])(),Object(r[\"d\"])(\"design:type\",Function),Object(r[\"d\"])(\"design:paramtypes\",[]),Object(r[\"d\"])(\"design:returntype\",void 0)],m.prototype,\"getCodeInfo\",null),Object(r[\"b\"])([Object(_[\"c\"])(),Object(r[\"d\"])(\"design:type\",Function),Object(r[\"d\"])(\"design:paramtypes\",[]),Object(r[\"d\"])(\"design:returntype\",void 0)],m.prototype,\"getConstitutionInfo\",null),Object(r[\"b\"])([Object(_[\"c\"])(),Object(r[\"d\"])(\"design:type\",Function),Object(r[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(i=\"undefined\"!==typeof u[\"ContractInput\"]&&u[\"ContractInput\"])?i:Object]),Object(r[\"d\"])(\"design:returntype\",void 0)],m.prototype,\"updateContract\",null),Object(r[\"b\"])([Object(_[\"c\"])(),Object(r[\"d\"])(\"design:type\",Function),Object(r[\"d\"])(\"design:paramtypes\",[]),Object(r[\"d\"])(\"design:returntype\",void 0)],m.prototype,\"init\",null),m=Object(r[\"b\"])([Object(l[\"b\"])(),Object(r[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(a=\"undefined\"!==typeof u[\"a\"]&&u[\"a\"])?a:Object,\"function\"===typeof(s=\"undefined\"!==typeof l[\"c\"]&&l[\"c\"])?s:Object])],m)},df81:function(t,e,n){\"use strict\";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",[t._v(\"\\n  合同查看\\n\")])},a=[],s=n(\"2877\"),o={},c=Object(s[\"a\"])(o,i,a,!1,null,null,null);e[\"default\"]=c.exports},e8a3:function(t,e,n){\"use strict\";var i,a,s;n.d(e,\"b\",(function(){return a})),n.d(e,\"a\",(function(){return s})),function(t){t[t[\"LETTER\"]=1]=\"LETTER\",t[t[\"NUMBER\"]=2]=\"NUMBER\"}(i||(i={})),function(t){t[t[\"RANDOM\"]=1]=\"RANDOM\",t[t[\"FIXED\"]=2]=\"FIXED\"}(a||(a={})),function(t){t[t[\"MEMBER_CARD\"]=1]=\"MEMBER_CARD\",t[t[\"PERSONAL\"]=2]=\"PERSONAL\",t[t[\"PACKAGE\"]=3]=\"PACKAGE\",t[t[\"DEPOSITE\"]=4]=\"DEPOSITE\",t[t[\"CABINET\"]=5]=\"CABINET\",t[t[\"MONEY\"]=6]=\"MONEY\",t[t[\"SMALL_COURSE\"]=7]=\"SMALL_COURSE\"}(s||(s={}))}}]);","extractedComments":[]}