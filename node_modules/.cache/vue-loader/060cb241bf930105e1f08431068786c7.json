{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/invitation/index/data.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/invitation/index/data.vue","mtime":1591147717319},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { AppConfig } from '@/constants/config'\nimport { columnsActivity, columnsUser } from './data.config'\nimport { DataService } from './data.service'\nimport { IndexService } from '../index.service'\nexport default {\n  name: 'PageBrandMarketingInviationData',\n  bem: {\n    inviation: 'page-brand-marketing-inviation-data'\n  },\n  serviceInject() {\n    return {\n      config: AppConfig,\n      dataService: DataService,\n      indexService: IndexService\n    }\n  },\n  rxState() {\n    return {\n      isOpen: this.indexService.isOpen$,\n      dataLoading: this.dataService.loading$,\n      statInfo: this.dataService.statInfo$,\n      reportList: this.dataService.reportList$,\n      reportPage: this.dataService.reportPage$,\n      inviteeList: this.dataService.inviteeList$,\n      inviteePage: this.dataService.inviteePage$\n    }\n  },\n  computed: {\n    stReportList() {\n      let array = []\n      this.reportList.forEach(i => {\n        let key = parseInt(Math.random() * 999999).toString()\n        array.push({ ...i, key: key })\n      })\n      return array\n    },\n    stInviteeList() {\n      let array = []\n      this.inviteeList.forEach(i => {\n        let key = parseInt(Math.random() * 999999).toString()\n        array.push({ ...i, key: key })\n      })\n      return array\n    }\n  },\n  data() {\n    return {\n      columnsActivity,\n      columnsUser,\n      selectedRowKeys: [],\n      selectedRows: [],\n      // 表格类别 0活动效果 1邀请用户\n      tableType: 0\n    }\n  },\n  methods: {\n    // 去开启\n    onGoOpen() {\n      this.$router.push({\n        name: 'brand-marketing-plugin-invitation-index-setting',\n        params: {\n          from: 'data'\n        }\n      })\n    },\n    // 清空列表选择\n    onClear() {\n      this.selectedRowKeys = []\n      this.selectedRows = []\n    },\n    // 列表选择\n    onSelectChange(selectedRowKeys, selectedRows) {\n      this.selectedRowKeys = selectedRowKeys\n      this.selectedRows = selectedRows\n    },\n    // 分页\n    onReportPageChange(data) {\n      this.onClear()\n      this.dataService\n        .getInviteReport({\n          page: data.current,\n          size: data.pageSize\n        })\n        .subscribe()\n    },\n    onInviteePageChange(data) {\n      console.log(data)\n      console.log(this.dataService)\n      this.onClear()\n      this.dataService\n        .getInviteInvitee({\n          page: data.current,\n          size: data.pageSize\n        })\n        .subscribe()\n    },\n    // 批量导出\n    onExport() {\n      console.log('导出')\n      this.onClear()\n    },\n    onTabChange() {\n      this.onClear()\n    }\n  }\n}\n",{"version":3,"sources":["data.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"data.vue","sourceRoot":"src/views/pages/brand/marketing/plugin/invitation/index","sourcesContent":["<template>\n  <div :class=\"inviation()\">\n    <a-row :class=\"inviation('acount')\">\n      <a-col :span=\"6\">\n        <p :class=\"inviation('acount-title')\">\n          参与活动邀请人\n          <st-help-tooltip id=\"TBMGM001\" />\n        </p>\n        <ICountUp\n          class=\"number-up font-number\"\n          :endVal=\"statInfo.total_inviter_num\"\n        />\n      </a-col>\n      <a-col :span=\"6\">\n        <p :class=\"inviation('acount-title')\">\n          拉新注册人数\n          <st-help-tooltip id=\"TBMGM002\" />\n        </p>\n        <ICountUp\n          class=\"number-up font-number\"\n          :endVal=\"statInfo.total_newbie_register_num\"\n        />\n      </a-col>\n      <a-col :span=\"6\">\n        <p :class=\"inviation('acount-title')\">\n          拉新领券人数\n          <st-help-tooltip id=\"TBMGM003\" />\n        </p>\n        <ICountUp\n          class=\"number-up font-number\"\n          :endVal=\"statInfo.total_coupon_num\"\n        />\n      </a-col>\n      <a-col :span=\"6\">\n        <p :class=\"inviation('acount-title')\">\n          拉新交易人数\n          <st-help-tooltip id=\"TBMGM004\" />\n        </p>\n        <ICountUp\n          class=\"number-up font-number\"\n          :endVal=\"statInfo.total_order_num\"\n        />\n      </a-col>\n    </a-row>\n    <div v-if=\"!isOpen\" :class=\"inviation('data-none')\">\n      <img\n        :src=\"config.PLACEHOLDER_IMG.NODATA | imgFilter({ w: 197, h: 136 })\"\n        width=\"197\"\n        height=\"136\"\n        alt=\"暂无数据\"\n      />\n      <p>还未开启邀请有礼功能，立即开启吧！</p>\n      <st-button type=\"primary\" @click=\"onGoOpen\">立即开启</st-button>\n    </div>\n    <div v-else :class=\"inviation('table')\">\n      <div :class=\"inviation('table-operation')\" class=\"mg-b16\">\n        <!-- NOTE: 导出 -->\n        <!-- <st-button :disabled=\"!selectedRowKeys.length\" @click=\"onExport\" type=\"primary\">批量导出</st-button> -->\n        <a-radio-group\n          v-model=\"tableType\"\n          @change=\"onTabChange\"\n          buttonStyle=\"solid\"\n        >\n          <a-radio-button :value=\"0\">活动效果</a-radio-button>\n          <a-radio-button :value=\"1\">邀请用户</a-radio-button>\n        </a-radio-group>\n      </div>\n      <!-- TODO: 预留，缺失导出功能 -->\n      <!-- :alertSelection=\"{ onReset: onClear }\"\n        :rowSelection=\"{\n          selectedRowKeys: selectedRowKeys,\n          fixed: true,\n          onChange: onSelectChange\n        }\" -->\n      <st-table\n        v-if=\"!tableType\"\n        @change=\"onReportPageChange\"\n        :columns=\"columnsActivity\"\n        :dataSource=\"stReportList\"\n        :pagination=\"{\n          current: reportPage.current_page,\n          total: reportPage.total_counts,\n          pageSize: reportPage.size\n        }\"\n        rowKey=\"key\"\n      />\n      <st-table\n        v-if=\"tableType\"\n        @change=\"onInviteePageChange\"\n        :columns=\"columnsUser\"\n        :dataSource=\"stInviteeList\"\n        :pagination=\"{\n          current: inviteePage.current_page,\n          total: inviteePage.total_counts,\n          pageSize: inviteePage.size\n        }\"\n        rowKey=\"key\"\n      />\n    </div>\n  </div>\n</template>\n<script>\nimport { AppConfig } from '@/constants/config'\nimport { columnsActivity, columnsUser } from './data.config'\nimport { DataService } from './data.service'\nimport { IndexService } from '../index.service'\nexport default {\n  name: 'PageBrandMarketingInviationData',\n  bem: {\n    inviation: 'page-brand-marketing-inviation-data'\n  },\n  serviceInject() {\n    return {\n      config: AppConfig,\n      dataService: DataService,\n      indexService: IndexService\n    }\n  },\n  rxState() {\n    return {\n      isOpen: this.indexService.isOpen$,\n      dataLoading: this.dataService.loading$,\n      statInfo: this.dataService.statInfo$,\n      reportList: this.dataService.reportList$,\n      reportPage: this.dataService.reportPage$,\n      inviteeList: this.dataService.inviteeList$,\n      inviteePage: this.dataService.inviteePage$\n    }\n  },\n  computed: {\n    stReportList() {\n      let array = []\n      this.reportList.forEach(i => {\n        let key = parseInt(Math.random() * 999999).toString()\n        array.push({ ...i, key: key })\n      })\n      return array\n    },\n    stInviteeList() {\n      let array = []\n      this.inviteeList.forEach(i => {\n        let key = parseInt(Math.random() * 999999).toString()\n        array.push({ ...i, key: key })\n      })\n      return array\n    }\n  },\n  data() {\n    return {\n      columnsActivity,\n      columnsUser,\n      selectedRowKeys: [],\n      selectedRows: [],\n      // 表格类别 0活动效果 1邀请用户\n      tableType: 0\n    }\n  },\n  methods: {\n    // 去开启\n    onGoOpen() {\n      this.$router.push({\n        name: 'brand-marketing-plugin-invitation-index-setting',\n        params: {\n          from: 'data'\n        }\n      })\n    },\n    // 清空列表选择\n    onClear() {\n      this.selectedRowKeys = []\n      this.selectedRows = []\n    },\n    // 列表选择\n    onSelectChange(selectedRowKeys, selectedRows) {\n      this.selectedRowKeys = selectedRowKeys\n      this.selectedRows = selectedRows\n    },\n    // 分页\n    onReportPageChange(data) {\n      this.onClear()\n      this.dataService\n        .getInviteReport({\n          page: data.current,\n          size: data.pageSize\n        })\n        .subscribe()\n    },\n    onInviteePageChange(data) {\n      console.log(data)\n      console.log(this.dataService)\n      this.onClear()\n      this.dataService\n        .getInviteInvitee({\n          page: data.current,\n          size: data.pageSize\n        })\n        .subscribe()\n    },\n    // 批量导出\n    onExport() {\n      console.log('导出')\n      this.onClear()\n    },\n    onTabChange() {\n      this.onClear()\n    }\n  }\n}\n</script>\n"]}]}