{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/setting/mina/components#/h5/coach.component.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/setting/mina/components#/h5/coach.component.vue","mtime":1600926382377},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { H5WrapperService } from './h5-wrapper.service'\nimport { cloneDeep } from 'lodash-es'\nimport draggable from 'vuedraggable'\nimport { AppConfig } from '@/constants/config'\nimport CoachRecommend from '@/views/biz-modals/coach/recommend'\nexport default {\n  bem: {\n    action: 'coach-component'\n  },\n  components: {\n    draggable\n  },\n  modals: {\n    CoachRecommend\n  },\n  serviceInject() {\n    return {\n      h5WrapperService: H5WrapperService,\n      config: AppConfig\n    }\n  },\n  rxState() {\n    return {\n      coachInfo: this.h5WrapperService.coachInfo$,\n      coach: this.h5WrapperService.coach$\n    }\n  },\n  data() {\n    return {\n      info: {},\n      list: [],\n      selected: []\n    }\n  },\n  mounted() {\n    this.info = Object.assign({}, this.coach)\n    this.list = cloneDeep(this.coachInfo)\n  },\n  watch: {\n    list: {\n      deep: true,\n      handler(newVal) {\n        this.h5WrapperService.SET_H5INFO(newVal, 7)\n        this.sortSelected()\n      }\n    },\n    info: {\n      deep: true,\n      handler(newVal) {\n        this.h5WrapperService.SET_H5INFO(newVal, 4)\n      }\n    }\n  },\n  methods: {\n    onSelectComplete(coachIds) {\n      let that = this\n      this.selected = coachIds\n      this.info.staff_id_list = coachIds\n      this.h5WrapperService\n        .getCoachInfo({ staff_id: coachIds })\n        .subscribe(res => {\n          that.list = cloneDeep(that.coachInfo)\n        })\n      console.log('on select complete', coachIds)\n    },\n    sortSelected() {\n      let arr = []\n      this.list.forEach(item => {\n        arr.push(item.id)\n      })\n      this.selected = arr\n    },\n    delCoach(index) {\n      this.list.splice(index, 1)\n    }\n  }\n}\n",{"version":3,"sources":["coach.component.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"coach.component.vue","sourceRoot":"src/views/pages/brand/setting/mina/components#/h5","sourcesContent":["<template>\n  <div :class=\"action()\">\n    <st-form labelWidth=\"56px\">\n      <st-form-item label=\"模块名称\">\n        <a-input\n          placeholder=\"请输入模块名称\"\n          v-model=\"info.module_title\"\n          maxlength=\"10\"\n        />\n      </st-form-item>\n      <st-form-item label=\"累计上课：\">\n        <st-switch v-model=\"info.is_display_course_nums\"></st-switch>\n        <span :class=\"action('btn-info')\">\n          关闭后，不在小程序显示教练累计上课数量\n        </span>\n      </st-form-item>\n      <st-form-item label=\"教练电话：\">\n        <st-switch v-model=\"info.is_display_consult\"></st-switch>\n        <span :class=\"action('btn-info')\">\n          关闭后，不在小程序显示教练联系电话\n        </span>\n      </st-form-item>\n      <st-form-item\n        :label=\"`展示${$c('coach')}`\"\n        :class=\"action('no-bottom-gap')\"\n      >\n        <draggable\n          :component-data=\"{ props: { gutter: 12 } }\"\n          v-model=\"list\"\n          :animation=\"200\"\n        >\n          <div v-for=\"(li, index) in list\" :key=\"li.id\" :class=\"action('box')\">\n            <div :class=\"action('del')\" @click=\"delCoach(index)\">\n              <a>\n                <st-icon\n                  type=\"delete\"\n                  color=\"#FF5E41\"\n                  :class=\"action('del-icon')\"\n                />\n              </a>\n            </div>\n            <img\n              :src=\"\n                li.head_img.image_url\n                  | imgFilter({ w: 160, h: 160, type: 'avatar' })\n              \"\n            />\n            <div\n              style=\"-webkit-box-orient: vertical;\"\n              :class=\"action('nickname')\"\n              :title=\"li.nickname\"\n            >\n              {{ li.nickname }}\n            </div>\n          </div>\n          <div :class=\"action('addbox')\">\n            <a\n              v-modal-link=\"{\n                name: 'coach-recommend',\n                props: {\n                  selected\n                },\n                on: {\n                  change: onSelectComplete\n                }\n              }\"\n            >\n              <div class=\"color-text\">\n                <st-icon type=\"add\"></st-icon>\n                添加{{ $c('coach') }}\n              </div>\n            </a>\n          </div>\n        </draggable>\n      </st-form-item>\n    </st-form>\n  </div>\n</template>\n<script>\nimport { H5WrapperService } from './h5-wrapper.service'\nimport { cloneDeep } from 'lodash-es'\nimport draggable from 'vuedraggable'\nimport { AppConfig } from '@/constants/config'\nimport CoachRecommend from '@/views/biz-modals/coach/recommend'\nexport default {\n  bem: {\n    action: 'coach-component'\n  },\n  components: {\n    draggable\n  },\n  modals: {\n    CoachRecommend\n  },\n  serviceInject() {\n    return {\n      h5WrapperService: H5WrapperService,\n      config: AppConfig\n    }\n  },\n  rxState() {\n    return {\n      coachInfo: this.h5WrapperService.coachInfo$,\n      coach: this.h5WrapperService.coach$\n    }\n  },\n  data() {\n    return {\n      info: {},\n      list: [],\n      selected: []\n    }\n  },\n  mounted() {\n    this.info = Object.assign({}, this.coach)\n    this.list = cloneDeep(this.coachInfo)\n  },\n  watch: {\n    list: {\n      deep: true,\n      handler(newVal) {\n        this.h5WrapperService.SET_H5INFO(newVal, 7)\n        this.sortSelected()\n      }\n    },\n    info: {\n      deep: true,\n      handler(newVal) {\n        this.h5WrapperService.SET_H5INFO(newVal, 4)\n      }\n    }\n  },\n  methods: {\n    onSelectComplete(coachIds) {\n      let that = this\n      this.selected = coachIds\n      this.info.staff_id_list = coachIds\n      this.h5WrapperService\n        .getCoachInfo({ staff_id: coachIds })\n        .subscribe(res => {\n          that.list = cloneDeep(that.coachInfo)\n        })\n      console.log('on select complete', coachIds)\n    },\n    sortSelected() {\n      let arr = []\n      this.list.forEach(item => {\n        arr.push(item.id)\n      })\n      this.selected = arr\n    },\n    delCoach(index) {\n      this.list.splice(index, 1)\n    }\n  }\n}\n</script>\n"]}]}