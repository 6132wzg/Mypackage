{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/crowd/components#/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/crowd/components#/index.vue","mtime":1594718340342},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { MessageService } from '@/services/message.service'\nimport { IndexService } from './index.service'\nimport { CrowdAPI } from '@/api/v1/crowd'\nimport BrandSettingSmsGroup from '@/views/biz-modals/brand/setting/sms/group'\n\nexport default {\n  serviceInject() {\n    return {\n      messageService: MessageService,\n      crowdAPI: CrowdAPI,\n      aService: IndexService\n    }\n  },\n  rxState() {\n    return {\n      auth: this.aService.auth$\n    }\n  },\n  model: {\n    type: 'value',\n    event: 'dataChangge'\n  },\n  modals: {\n    BrandSettingSmsGroup\n  },\n  props: {\n    value: Array\n  },\n  data() {\n    return {\n      imgArry: [\n        require('@/assets/img/shop_crowd_new.png'),\n        require('@/assets/img/shop_crowd_expire.png'),\n        require('@/assets/img/shop_crowd_private_teaching.png')\n      ]\n    }\n  },\n  created() {\n    console.log(this.crowdAPI.crowdShopExport())\n  },\n  computed: {\n    importantCrowd() {\n      return this.value.slice(0, 3)\n    }\n  },\n  methods: {\n    newCrowd(data) {\n      this.messageService.warn({ content: data })\n    },\n    exportFunc(id) {\n      // this.aService.getListInfo(id).subscribe()\n    },\n    onCrowdRefresh(id) {\n      this.aService.crowdBrandRefresh(id).subscribe(res => {\n        this.$router.reload()\n      })\n    }\n  },\n  mounted() {}\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/pages/brand/marketing/plugin/crowd/components#","sourcesContent":["<template>\n  <div>\n    <div class=\"shop-member-crowd-index-box\">\n      <div\n        class=\"shop-member-crowd-index-box-title\"\n        v-for=\"(item, index) in importantCrowd\"\n        :key=\"index\"\n        :class=\"{ middle: index === 1 }\"\n      >\n        <div class=\"shop-member-crowd-index-box__header\">\n          <div class=\"shop-member-crowd-index-box__item\">\n            <img\n              :src=\"imgArry[index]\"\n              class=\"shop-member-crowd-index-box__img\"\n            />\n            <div class=\"shop-member-crowd-index-box__info\">\n              <st-t4 class=\"shop-member-crowd-index-box__info__title\">\n                {{ item.crowd_name }}\n              </st-t4>\n              <div>{{ item.description }}</div>\n            </div>\n          </div>\n          <div class=\"shop-member-crowd-index-box__num\">\n            <div class=\"shop-member-crowd-index-box__num-item\">\n              <div class=\"shop-member-crowd-index-box__number\">\n                {{ item.crowd_total_num.value }}\n              </div>\n              <div class=\"shop-member-crowd-index-box__num-describe\">\n                {{ item.crowd_total_num.name }}\n              </div>\n            </div>\n            <div class=\"shop-member-crowd-index-box__num-item-middle\">\n              <div class=\"shop-member-crowd-index-box__number\">\n                {{ item.yesterday_admission.value }}\n              </div>\n              <div class=\"shop-member-crowd-index-box__num-describe\">\n                {{ item.yesterday_admission.name }}\n              </div>\n            </div>\n            <div class=\"shop-member-crowd-index-box__num-item\">\n              <div class=\"shop-member-crowd-index-box__number\">\n                {{ item.yesterday_deal_numb.value }}\n              </div>\n              <div class=\"shop-member-crowd-index-box__num-describe\">\n                {{ item.yesterday_deal_numb.name }}\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"shop-member-crowd-index-box__btn\">\n          <router-link\n            class=\"shop-member-crowd-index-box__btn-rq shop-member-crowd-index-box__btn-rq-line\"\n            tag=\"span\"\n            :to=\"{\n              name: 'brand-marketing-plugin-crowd-analysis',\n              query: { urlid: index, id: item.id }\n            }\"\n          >\n            人群分析\n          </router-link>\n          <a-tooltip>\n            <a-dropdown placement=\"bottomRight\">\n              <span\n                class=\"shop-member-crowd-index-box__btn-rq ant-dropdown-link\"\n              >\n                定向运营\n              </span>\n              <a-menu slot=\"overlay\">\n                <a-menu-item\n                  style=\"width:100%\"\n                  v-if=\"item.auth && item.auth['brand:member:crowd|fresh']\"\n                >\n                  <a @click=\"onCrowdRefresh(item.id)\">\n                    刷新\n                  </a>\n                </a-menu-item>\n                <a-menu-item\n                  style=\"width:100%\"\n                  v-if=\"item.auth && item.auth['brand:member:crowd|export']\"\n                >\n                  <a\n                    v-export-excel=\"{\n                      type: 'crowd/' + item.id\n                    }\"\n                  >\n                    导出\n                  </a>\n                </a-menu-item>\n                <a-menu-item style=\"width:100%\">\n                  <a\n                    v-modal-link=\"{\n                      name: 'brand-setting-sms-group',\n                      props: {\n                        crowd: { user_type: 2, send_value: item.id }\n                      }\n                    }\"\n                  >\n                    群发短信\n                  </a>\n                </a-menu-item>\n                <a-menu-item style=\"width:100%\">\n                  <a\n                    href=\"javascript:;\"\n                    @click=\"newCrowd('功能正在开发中，敬请期待')\"\n                  >\n                    群发优惠\n                  </a>\n                </a-menu-item>\n              </a-menu>\n            </a-dropdown>\n          </a-tooltip>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport { MessageService } from '@/services/message.service'\nimport { IndexService } from './index.service'\nimport { CrowdAPI } from '@/api/v1/crowd'\nimport BrandSettingSmsGroup from '@/views/biz-modals/brand/setting/sms/group'\n\nexport default {\n  serviceInject() {\n    return {\n      messageService: MessageService,\n      crowdAPI: CrowdAPI,\n      aService: IndexService\n    }\n  },\n  rxState() {\n    return {\n      auth: this.aService.auth$\n    }\n  },\n  model: {\n    type: 'value',\n    event: 'dataChangge'\n  },\n  modals: {\n    BrandSettingSmsGroup\n  },\n  props: {\n    value: Array\n  },\n  data() {\n    return {\n      imgArry: [\n        require('@/assets/img/shop_crowd_new.png'),\n        require('@/assets/img/shop_crowd_expire.png'),\n        require('@/assets/img/shop_crowd_private_teaching.png')\n      ]\n    }\n  },\n  created() {\n    console.log(this.crowdAPI.crowdShopExport())\n  },\n  computed: {\n    importantCrowd() {\n      return this.value.slice(0, 3)\n    }\n  },\n  methods: {\n    newCrowd(data) {\n      this.messageService.warn({ content: data })\n    },\n    exportFunc(id) {\n      // this.aService.getListInfo(id).subscribe()\n    },\n    onCrowdRefresh(id) {\n      this.aService.crowdBrandRefresh(id).subscribe(res => {\n        this.$router.reload()\n      })\n    }\n  },\n  mounted() {}\n}\n</script>\n"]}]}