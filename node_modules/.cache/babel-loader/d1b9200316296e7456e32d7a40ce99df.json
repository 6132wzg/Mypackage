{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/hardware/black-list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/biz-modals/hardware/black-list.vue","mtime":1591147717180},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.set\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { columns } from \"./black-list.config\";\nimport { BlackService } from \"./black-list.service\";\nexport default {\n  serviceInject: function serviceInject() {\n    return {\n      blackService: BlackService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      loading: this.blackService.loading$,\n      blackList: this.blackService.blackList$,\n      blackKeys: this.blackService.blackKeys$,\n      searchList: this.blackService.searchList$\n    };\n  },\n  bem: {\n    bPage: 'modal-shop-blacklist'\n  },\n  props: {\n    id: Number\n  },\n  data: function data() {\n    return {\n      show: false,\n      list: [],\n      page: {} // 前端分页\n\n    };\n  },\n  created: function created() {\n    this.getBlackList();\n  },\n  computed: {\n    columns: columns\n  },\n  methods: {\n    getBlackList: function getBlackList() {\n      return this.blackService.getBlackList().subscribe();\n    },\n    onSearchKeyWords: function onSearchKeyWords(val) {\n      this.blackService.onSearchKeyWords(val).subscribe();\n    },\n    joinPerson: function joinPerson(para) {\n      var _this = this;\n\n      var arr = this.blackList;\n      this.blackList = [];\n      this.blackKeys = Array.from(new Set(this.blackKeys));\n      var searchRes = this.searchList.concat(arr);\n      this.blackKeys.map(function (id) {\n        searchRes.map(function (searchItem) {\n          if (searchItem.user_id === id) {\n            _this.blackList.push(searchItem);\n          }\n        });\n      });\n    },\n    deletePerson: function deletePerson(para) {\n      this.blackKeys = this.blackKeys.filter(function (id) {\n        return id !== para.user_id;\n      });\n      this.blackList = this.blackList.filter(function (_ref) {\n        var user_id = _ref.user_id;\n        return user_id !== para.user_id;\n      });\n    },\n    onChange: function onChange(pagination, filters, sorter) {\n      this.page = pagination;\n      this.page.current_page = pagination.current;\n      this.page.size = pagination.pageSize;\n    },\n    postBlackListSetting: function postBlackListSetting() {\n      var _this2 = this;\n\n      this.blackService.postBlackListSetting({\n        black_list: this.blackList\n      }).subscribe(function (res) {\n        _this2.show = false;\n\n        _this2.$emit('success');\n      });\n    }\n  },\n  watch: {\n    // 去重\n    blackList: function blackList() {\n      for (var i = 0; i < this.blackList.length; i++) {\n        for (var j = i + 1; j < this.blackList.length; j++) {\n          if (this.blackList[i].user_id === this.blackList[j].user_id) {\n            this.blackList.splice(j, 1);\n            j--;\n          }\n        }\n      }\n    }\n  }\n};",{"version":3,"sources":["black-list.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <st-modal\n    title=\"黑名单管理\"\n    v-model=\"show\"\n    size=\"small\"\n    @ok=\"postBlackListSetting\"\n  >\n    <a-select\n      v-model=\"blackKeys\"\n      showSearch\n      mode=\"multiple\"\n      placeholder=\"手机号搜索\"\n      style=\"width: 100%\"\n      :defaultActiveFirstOption=\"false\"\n      @search=\"onSearchKeyWords\"\n      :filterOption=\"false\"\n      @change=\"joinPerson\"\n      :maxTagCount=\"0\"\n      class=\"mg-b24\"\n    >\n      <template slot=\"maxTagPlaceholder\">\n        <div>已选择{{ blackKeys.length || 0 }}个</div>\n      </template>\n      <a-select-option\n        v-for=\"item in searchList\"\n        :key=\"item.user_id\"\n        :value=\"+item.user_id\"\n      >\n        ({{ item.user_cate }}) &nbsp;&nbsp;{{ item.user_name }}&nbsp;{{\n          item.mobile\n        }}\n      </a-select-option>\n    </a-select>\n\n    <st-table\n      :columns=\"columns\"\n      :dataSource=\"blackList\"\n      :page=\"page\"\n      rowKey=\"user_id\"\n      @change=\"onChange\"\n    >\n      <div slot=\"action\" slot-scope=\"text, record\">\n        <st-table-actions>\n          <a>\n            <st-popconfirm\n              :title=\"'一旦删除则无法恢复，确认删除'\"\n              @confirm=\"deletePerson(record)\"\n            >\n              删除\n            </st-popconfirm>\n          </a>\n        </st-table-actions>\n      </div>\n    </st-table>\n  </st-modal>\n</template>\n<script>\nimport { columns } from './black-list.config'\nimport { BlackService } from './black-list.service'\n\nexport default {\n  serviceInject() {\n    return {\n      blackService: BlackService\n    }\n  },\n  rxState() {\n    return {\n      loading: this.blackService.loading$,\n      blackList: this.blackService.blackList$,\n      blackKeys: this.blackService.blackKeys$,\n      searchList: this.blackService.searchList$\n    }\n  },\n  bem: {\n    bPage: 'modal-shop-blacklist'\n  },\n  props: {\n    id: Number\n  },\n  data() {\n    return {\n      show: false,\n      list: [],\n      page: {} // 前端分页\n    }\n  },\n  created() {\n    this.getBlackList()\n  },\n  computed: {\n    columns\n  },\n  methods: {\n    getBlackList() {\n      return this.blackService.getBlackList().subscribe()\n    },\n    onSearchKeyWords(val) {\n      this.blackService.onSearchKeyWords(val).subscribe()\n    },\n    joinPerson(para) {\n      let arr = this.blackList\n      this.blackList = []\n      this.blackKeys = Array.from(new Set(this.blackKeys))\n      let searchRes = this.searchList.concat(arr)\n      this.blackKeys.map(id => {\n        searchRes.map(searchItem => {\n          if (searchItem.user_id === id) {\n            this.blackList.push(searchItem)\n          }\n        })\n      })\n    },\n    deletePerson(para) {\n      this.blackKeys = this.blackKeys.filter(id => {\n        return id !== para.user_id\n      })\n      this.blackList = this.blackList.filter(({ user_id }) => {\n        return user_id !== para.user_id\n      })\n    },\n    onChange(pagination, filters, sorter) {\n      this.page = pagination\n      this.page.current_page = pagination.current\n      this.page.size = pagination.pageSize\n    },\n    postBlackListSetting() {\n      this.blackService\n        .postBlackListSetting({ black_list: this.blackList })\n        .subscribe(res => {\n          this.show = false\n          this.$emit('success')\n        })\n    }\n  },\n  watch: {\n    // 去重\n    blackList() {\n      for (var i = 0; i < this.blackList.length; i++) {\n        for (var j = i + 1; j < this.blackList.length; j++) {\n          if (this.blackList[i].user_id === this.blackList[j].user_id) {\n            this.blackList.splice(j, 1)\n            j--\n          }\n        }\n      }\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/biz-modals/hardware"}]}