{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/product/card/member/period/h5mixin.js","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/product/card/member/period/h5mixin.js","mtime":1600912107357},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\nimport { cloneDeep } from 'lodash-es';\nvar unitEnum = {\n  2: '天',\n  3: '月',\n  4: '年'\n};\nexport default {\n  data: function data() {\n    return {\n      h5CardInfo: {\n        card_name: '',\n        special_note: '',\n        admission_range: {},\n        admission_shop_list: [],\n        card_bg: {\n          image_id: 0,\n          image_key: this.cardBgList[0].image_key,\n          image_url: this.cardBgList[0].image_url,\n          index: 1\n        },\n        card_contents: '',\n        card_introduction: '',\n        price_gradient: [],\n        price: {\n          card_price: '',\n          deadline: {}\n        },\n        can_use_shop: [],\n        consumption_range: {},\n        description: '',\n        consumerList: []\n      }\n    };\n  },\n  watch: {\n    cardIntroduction: function cardIntroduction(val) {\n      this.h5CardInfo.card_introduction = val;\n    },\n    cardContents: function cardContents(val) {\n      this.h5CardInfo.card_contents = val;\n    },\n    cardBg: function cardBg(val) {\n      this.h5CardInfo.card_bg = val;\n    },\n    'cardData.price_setting': function cardDataPrice_setting(val) {\n      this.syncPrice();\n    },\n    'cardData.unit': function cardDataUnit(val) {\n      var cardData = this.form.getFieldsValue().cardData;\n      var price = {\n        card_price: cardData.card_price || '',\n        deadline: {\n          number: cardData.num || '',\n          type: val\n        }\n      };\n      this.h5CardInfo.price = price;\n    },\n    'cardData.bg_image': function cardDataBg_image(val) {\n      this.h5CardInfo.card_bg = val;\n    },\n    rallyPriceList: {\n      deep: true,\n      handler: function handler() {\n        this.syncPrice();\n      }\n    },\n    shopPriceList: {\n      deep: true,\n      handler: function handler() {\n        this.syncPrice();\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.h5CardInfo.admission_range = {\n      id: 1,\n      name: this.shopName.name\n    };\n  },\n  methods: {\n    initH5CardInfo: function initH5CardInfo() {\n      var cardInfo = Object.assign({}, this.cardInfo);\n      this.h5CardInfo.card_name = cardInfo.card_name;\n      this.h5CardInfo.special_note = cardInfo.special_note;\n    },\n    syncName: function syncName(e) {\n      this.h5CardInfo.card_name = e.target.value;\n    },\n    syncSpecialNote: function syncSpecialNote(e) {\n      this.h5CardInfo.special_note = e.target.value;\n      console.log(this.h5CardInfo);\n    },\n    syncPrice: function syncPrice(values) {\n      // 会员卡金额\n      var p = []; // 品牌统一定价\n\n      if (this.cardType === 0) {\n        this.rallyPriceList.forEach(function (i) {\n          p.push({\n            validity_period: +i.time.num + unitEnum[i.time.unit],\n            sale_price: +i.rally_price + '元'\n          });\n        });\n      } else if (this.cardType === 1) {\n        this.rallyPriceList.forEach(function (i) {\n          p.push({\n            validity_times: \"\".concat(+i.validity_times, \"\\u6B21\"),\n            sale_price: +i.rally_price + '元'\n          });\n        });\n      }\n\n      this.h5CardInfo.price_gradient = cloneDeep(p);\n    },\n    syncConsumer: function syncConsumer(checkValue) {\n      console.log(checkValue);\n      var consumerEnum = this.consumerType;\n      this.h5CardInfo.consumerList = checkValue.map(function (item) {\n        return consumerEnum[--item].label;\n      });\n    }\n  }\n};",{"version":3,"sources":["/Users/wangzhigang/Desktop/styd/web/src/views/pages/shop/product/card/member/period/h5mixin.js"],"names":["cloneDeep","unitEnum","data","h5CardInfo","card_name","special_note","admission_range","admission_shop_list","card_bg","image_id","image_key","cardBgList","image_url","index","card_contents","card_introduction","price_gradient","price","card_price","deadline","can_use_shop","consumption_range","description","consumerList","watch","cardIntroduction","val","cardContents","cardBg","syncPrice","cardData","form","getFieldsValue","number","num","type","rallyPriceList","deep","handler","shopPriceList","mounted","id","name","shopName","methods","initH5CardInfo","cardInfo","Object","assign","syncName","e","target","value","syncSpecialNote","console","log","values","p","cardType","forEach","i","push","validity_period","time","unit","sale_price","rally_price","validity_times","syncConsumer","checkValue","consumerEnum","consumerType","map","item","label"],"mappings":"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","sourcesContent":["import { cloneDeep } from 'lodash-es'\nconst unitEnum = {\n  2: '天',\n  3: '月',\n  4: '年'\n}\nexport default {\n  data() {\n    return {\n      h5CardInfo: {\n        card_name: '',\n        special_note: '',\n        admission_range: {},\n        admission_shop_list: [],\n        card_bg: {\n          image_id: 0,\n          image_key: this.cardBgList[0].image_key,\n          image_url: this.cardBgList[0].image_url,\n          index: 1\n        },\n        card_contents: '',\n        card_introduction: '',\n        price_gradient: [],\n        price: {\n          card_price: '',\n          deadline: {}\n        },\n        can_use_shop: [],\n        consumption_range: {},\n        description: '',\n        consumerList: []\n      }\n    }\n  },\n  watch: {\n    cardIntroduction(val) {\n      this.h5CardInfo.card_introduction = val\n    },\n    cardContents(val) {\n      this.h5CardInfo.card_contents = val\n    },\n    cardBg(val) {\n      this.h5CardInfo.card_bg = val\n    },\n    'cardData.price_setting'(val) {\n      this.syncPrice()\n    },\n    'cardData.unit'(val) {\n      let cardData = this.form.getFieldsValue().cardData\n      let price = {\n        card_price: cardData.card_price || '',\n        deadline: {\n          number: cardData.num || '',\n          type: val\n        }\n      }\n      this.h5CardInfo.price = price\n    },\n    'cardData.bg_image'(val) {\n      this.h5CardInfo.card_bg = val\n    },\n    rallyPriceList: {\n      deep: true,\n      handler() {\n        this.syncPrice()\n      }\n    },\n    shopPriceList: {\n      deep: true,\n      handler() {\n        this.syncPrice()\n      }\n    }\n  },\n  mounted() {\n    this.h5CardInfo.admission_range = { id: 1, name: this.shopName.name }\n  },\n  methods: {\n    initH5CardInfo() {\n      let cardInfo = Object.assign({}, this.cardInfo)\n      this.h5CardInfo.card_name = cardInfo.card_name\n      this.h5CardInfo.special_note = cardInfo.special_note\n    },\n    syncName(e) {\n      this.h5CardInfo.card_name = e.target.value\n    },\n    syncSpecialNote(e) {\n      this.h5CardInfo.special_note = e.target.value\n      console.log(this.h5CardInfo)\n    },\n    syncPrice(values) {\n      // 会员卡金额\n      let p = []\n      // 品牌统一定价\n      if (this.cardType === 0) {\n        this.rallyPriceList.forEach(i => {\n          p.push({\n            validity_period: +i.time.num + unitEnum[i.time.unit],\n            sale_price: +i.rally_price + '元'\n          })\n        })\n      } else if (this.cardType === 1) {\n        this.rallyPriceList.forEach(i => {\n          p.push({\n            validity_times: `${+i.validity_times}次`,\n            sale_price: +i.rally_price + '元'\n          })\n        })\n      }\n      this.h5CardInfo.price_gradient = cloneDeep(p)\n    },\n    syncConsumer(checkValue) {\n      console.log(checkValue)\n      let consumerEnum = this.consumerType\n      this.h5CardInfo.consumerList = checkValue.map(\n        item => consumerEnum[--item].label\n      )\n    }\n  }\n}\n"]}]}