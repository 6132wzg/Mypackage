{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/setting/mina/components#/h5/action.component.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/setting/mina/components#/h5/action.component.vue","mtime":1600926382376},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport StImageUpload from '@/views/biz-components/st/image-upload/image-upload.vue';\nimport { H5WrapperService } from \"./h5-wrapper.service\";\nimport { cloneDeep } from 'lodash-es';\nexport default {\n  bem: {\n    action: 'action-component'\n  },\n  components: {\n    StImageUpload: StImageUpload\n  },\n  serviceInject: function serviceInject() {\n    return {\n      h5WrapperService: H5WrapperService\n    };\n  },\n  rxState: function rxState() {\n    return {\n      actionInfo: this.h5WrapperService.actionInfo$\n    };\n  },\n  data: function data() {\n    return {\n      list: [],\n      checkedList: []\n    };\n  },\n  mounted: function mounted() {\n    this.getList();\n  },\n  watch: {\n    list: {\n      deep: true,\n      handler: function handler(newVal) {\n        this.h5WrapperService.SET_H5INFO(newVal, 2);\n      }\n    },\n    checkedList: {\n      deep: true,\n      handler: function handler(newVal) {\n        this.h5WrapperService.SET_H5INFO(newVal, 8);\n      }\n    }\n  },\n  methods: {\n    getList: function getList() {\n      var list = cloneDeep(this.actionInfo);\n      this.list = list;\n      var checkedList = [];\n      list.map(function (item) {\n        if (+item.checked) {\n          checkedList.push(item);\n        }\n      });\n      this.checkedList = checkedList;\n    },\n    onClick: function onClick(index) {\n      var checked = +this.list[index]['checked'];\n\n      if (!checked) {\n        this.list[index]['checked'] = 1;\n      } else {\n        this.list[index]['checked'] = 0;\n      }\n\n      this.onAreaSortChange();\n    },\n    imageUploadChange: function imageUploadChange(e, index) {\n      if (e.length) {\n        this.list[index].image_url = e[0].image_url;\n        this.list[index].image_key = e[0].image_key;\n      }\n    },\n    onAreaSortChange: function onAreaSortChange() {\n      this.checkedList = this.list.filter(function (item) {\n        return item.checked;\n      });\n    }\n  }\n};",{"version":3,"sources":["action.component.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA,OAAA,aAAA,MAAA,yDAAA;AACA,SAAA,gBAAA;AACA,SAAA,SAAA,QAAA,WAAA;AACA,eAAA;AACA,EAAA,GAAA,EAAA;AACA,IAAA,MAAA,EAAA;AADA,GADA;AAIA,EAAA,UAAA,EAAA;AACA,IAAA,aAAA,EAAA;AADA,GAJA;AAOA,EAAA,aAPA,2BAOA;AACA,WAAA;AACA,MAAA,gBAAA,EAAA;AADA,KAAA;AAGA,GAXA;AAYA,EAAA,OAZA,qBAYA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,KAAA,gBAAA,CAAA;AADA,KAAA;AAGA,GAhBA;AAiBA,EAAA,IAjBA,kBAiBA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,WAAA,EAAA;AAFA,KAAA;AAIA,GAtBA;AAuBA,EAAA,OAvBA,qBAuBA;AACA,SAAA,OAAA;AACA,GAzBA;AA0BA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,IADA;AAEA,MAAA,OAFA,mBAEA,MAFA,EAEA;AACA,aAAA,gBAAA,CAAA,UAAA,CAAA,MAAA,EAAA,CAAA;AACA;AAJA,KADA;AAOA,IAAA,WAAA,EAAA;AACA,MAAA,IAAA,EAAA,IADA;AAEA,MAAA,OAFA,mBAEA,MAFA,EAEA;AACA,aAAA,gBAAA,CAAA,UAAA,CAAA,MAAA,EAAA,CAAA;AACA;AAJA;AAPA,GA1BA;AAwCA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,qBACA;AACA,UAAA,IAAA,GAAA,SAAA,CAAA,KAAA,UAAA,CAAA;AACA,WAAA,IAAA,GAAA,IAAA;AACA,UAAA,WAAA,GAAA,EAAA;AACA,MAAA,IAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AACA,UAAA,WAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA,OAJA;AAKA,WAAA,WAAA,GAAA,WAAA;AACA,KAXA;AAYA,IAAA,OAZA,mBAYA,KAZA,EAYA;AACA,UAAA,OAAA,GAAA,CAAA,KAAA,IAAA,CAAA,KAAA,EAAA,SAAA,CAAA;;AACA,UAAA,CAAA,OAAA,EAAA;AACA,aAAA,IAAA,CAAA,KAAA,EAAA,SAAA,IAAA,CAAA;AACA,OAFA,MAEA;AACA,aAAA,IAAA,CAAA,KAAA,EAAA,SAAA,IAAA,CAAA;AACA;;AACA,WAAA,gBAAA;AACA,KApBA;AAqBA,IAAA,iBArBA,6BAqBA,CArBA,EAqBA,KArBA,EAqBA;AACA,UAAA,CAAA,CAAA,MAAA,EAAA;AACA,aAAA,IAAA,CAAA,KAAA,EAAA,SAAA,GAAA,CAAA,CAAA,CAAA,CAAA,CAAA,SAAA;AACA,aAAA,IAAA,CAAA,KAAA,EAAA,SAAA,GAAA,CAAA,CAAA,CAAA,CAAA,CAAA,SAAA;AACA;AACA,KA1BA;AA2BA,IAAA,gBA3BA,8BA2BA;AACA,WAAA,WAAA,GAAA,KAAA,IAAA,CAAA,MAAA,CAAA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,OAAA;AAAA,OAAA,CAAA;AACA;AA7BA;AAxCA,CAAA","sourcesContent":["<template>\n  <div :class=\"action()\">\n    <a-row :gutter=\"12\">\n      <draggable v-model=\"list\" @change=\"onAreaSortChange\">\n        <a-col :span=\"6\" v-for=\"(li, index) in list\" :key=\"index\">\n          <div :class=\"action('box')\">\n            <st-checkbox\n              :class=\"action('checked')\"\n              :value=\"li.checked\"\n              @change=\"onClick(index)\"\n            ></st-checkbox>\n            <st-image-upload\n              @change=\"imageUploadChange($event, index)\"\n              width=\"72px\"\n              height=\"72px\"\n              :list=\"[li]\"\n              :sizeLimit=\"1\"\n              placeholder=\"上传照片\"\n              :numLimit=\"1\"\n              :cropperModal=\"{\n                title: '功能图片',\n                cropper: { aspectRatio: 1 / 1 }\n              }\"\n            ></st-image-upload>\n            <div :class=\"action('box-title')\">\n              <a-input\n                placeholder=\"请输入功能名称\"\n                v-model=\"li.title\"\n                maxlength=\"5\"\n              />\n              <div :class=\"action('link')\" :title=\"`跳转：${li.redirect_link}`\">\n                跳转：{{ li.redirect_link }}\n              </div>\n            </div>\n          </div>\n        </a-col>\n      </draggable>\n    </a-row>\n  </div>\n</template>\n<script>\nimport StImageUpload from '@/views/biz-components/st/image-upload/image-upload.vue'\nimport { H5WrapperService } from './h5-wrapper.service'\nimport { cloneDeep } from 'lodash-es'\nexport default {\n  bem: {\n    action: 'action-component'\n  },\n  components: {\n    StImageUpload\n  },\n  serviceInject() {\n    return {\n      h5WrapperService: H5WrapperService\n    }\n  },\n  rxState() {\n    return {\n      actionInfo: this.h5WrapperService.actionInfo$\n    }\n  },\n  data() {\n    return {\n      list: [],\n      checkedList: []\n    }\n  },\n  mounted() {\n    this.getList()\n  },\n  watch: {\n    list: {\n      deep: true,\n      handler(newVal) {\n        this.h5WrapperService.SET_H5INFO(newVal, 2)\n      }\n    },\n    checkedList: {\n      deep: true,\n      handler(newVal) {\n        this.h5WrapperService.SET_H5INFO(newVal, 8)\n      }\n    }\n  },\n  methods: {\n    getList() {\n      let list = cloneDeep(this.actionInfo)\n      this.list = list\n      let checkedList = []\n      list.map(item => {\n        if (+item.checked) {\n          checkedList.push(item)\n        }\n      })\n      this.checkedList = checkedList\n    },\n    onClick(index) {\n      let checked = +this.list[index]['checked']\n      if (!checked) {\n        this.list[index]['checked'] = 1\n      } else {\n        this.list[index]['checked'] = 0\n      }\n      this.onAreaSortChange()\n    },\n    imageUploadChange(e, index) {\n      if (e.length) {\n        this.list[index].image_url = e[0].image_url\n        this.list[index].image_key = e[0].image_key\n      }\n    },\n    onAreaSortChange() {\n      this.checkedList = this.list.filter(item => item.checked)\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/pages/brand/setting/mina/components#/h5"}]}