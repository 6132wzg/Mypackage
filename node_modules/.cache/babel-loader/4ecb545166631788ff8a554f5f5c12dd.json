{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js!/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js!/Users/wangzhigang/Desktop/styd/web/vue-service-app/src/di.js","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/vue-service-app/src/di.js","mtime":1591147717498},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/thread-loader/dist/cjs.js","mtime":1591062572352},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport _construct from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/construct\";\nimport _toConsumableArray from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.map\";\nimport _classCallCheck from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _defineProperty from \"/Users/wangzhigang/Desktop/styd/web/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport { isCtor, isFn } from \"./utils\";\nvar INJECTED = '__injectedTypes';\nexport var Container = /*#__PURE__*/function () {\n  function Container() {\n    _classCallCheck(this, Container);\n\n    _defineProperty(this, \"providers\", new Map());\n  }\n\n  _createClass(Container, [{\n    key: \"bindValue\",\n    value: function bindValue(token, value) {\n      this.providers.set(token, value);\n    }\n  }, {\n    key: \"get\",\n    value: function get(token) {\n      var instance = this.providers.get(token);\n\n      if (this.providers.has(token)) {\n        return instance;\n      } else {\n        // 自动实例化\n        if (isCtor(token)) {\n          var newInstance = this.getInstanceFromClass(token);\n          this.providers.set(token, newInstance);\n          return newInstance;\n        }\n\n        console.error('[vue-service-app] Invalid provide->', token);\n      }\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy(token) {\n      var instance = this.providers.get(token);\n\n      if (instance) {\n        this.providers.delete(token);\n      }\n    }\n  }, {\n    key: \"getInstanceFromClass\",\n    value: function getInstanceFromClass(Cls) {\n      var _this = this;\n\n      if (Cls[INJECTED]) {\n        var injects = Cls[INJECTED].map(function (childToken) {\n          return _this.get(childToken);\n        });\n        return _construct(Cls, _toConsumableArray(injects));\n      } else {\n        if (Cls.length) {\n          throw new Error(\"[vue-service-app] detect [\".concat(Cls.name, \"] has dependancy services but,but no @Injectable() or @Inject() decorate it\"));\n        }\n\n        return new Cls();\n      }\n    }\n  }]);\n\n  return Container;\n}();\nexport function Inject(token) {\n  if (!token) {\n    console && console.error('[vue-service-app] Inject() params got ->', token);\n  }\n\n  return function (target, propKey, propIndex) {\n    if (!target[INJECTED]) {\n      target[INJECTED] = [];\n    }\n\n    target[INJECTED][propIndex] = token;\n  };\n}\nexport function Injectable() {\n  return function (target) {\n    var outerInjected = Reflect.getMetadata('design:paramtypes', target);\n    var innerInjected = target[INJECTED];\n\n    if (!innerInjected) {\n      target[INJECTED] = outerInjected;\n    } else {\n      outerInjected.forEach(function (outer, index) {\n        if (!innerInjected[index]) {\n          target[INJECTED][index] = outer;\n        }\n      });\n    }\n\n    return target;\n  };\n}",null]}