{"remainingRequest":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/activity-qrcode/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangzhigang/Desktop/styd/web/src/views/pages/brand/marketing/plugin/activity-qrcode/list.vue","mtime":1601345845256},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/babel-loader/lib/index.js","mtime":1591062567418},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/cache-loader/dist/cjs.js","mtime":1591062571898},{"path":"/Users/wangzhigang/Desktop/styd/web/node_modules/vue-loader/lib/index.js","mtime":1591062572376}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { ListService } from './list.service'\nimport { UserService } from '@/services/user.service'\nimport MarkteingPluginTitle from '../../components#/marketing-title'\nimport tableMixin from '@/mixins/table.mixin'\nimport { columns } from './list.config'\nimport ShopSelect from '@/views/biz-components/shop/shop-select'\nimport BrandMarketingScanTable from '@/views/biz-modals/brand/marketing/scan-table'\nimport BrandMarketingFollowTable from '@/views/biz-modals/brand/marketing/follow-table'\nimport BrandMarketingDownloadQrcode from '@/views/biz-modals/brand/marketing/download-qrcode'\nexport default {\n  name: 'PageBrandMarketingPluginActivityQrcode',\n  mixins: [tableMixin],\n  bem: {\n    basic: 'page-brand-plugin-activity-qrcode'\n  },\n  modals: {\n    BrandMarketingScanTable,\n    BrandMarketingFollowTable,\n    BrandMarketingDownloadQrcode\n  },\n  serviceInject() {\n    return {\n      listService: ListService,\n      userService: UserService\n    }\n  },\n  rxState() {\n    return {\n      list: this.listService.list$,\n      page: this.listService.page$,\n      loading: this.listService.loading$,\n      auth: this.listService.auth$\n    }\n  },\n  data(vm) {\n    return {\n      columns: columns(vm)\n    }\n  },\n  methods: {\n    onGeneralize(record) {\n      const { id, staff_name, shop_name } = record\n      if (this.loading.getInfo) {\n        return\n      }\n      this.listService.getInfo(id).subscribe(res => {\n        const { qrcode, product_name } = res.info\n        const splitArr = product_name.split('-')\n        this.$modalRouter.push({\n          name: 'brand-marketing-download-qrcode',\n          props: {\n            url: qrcode,\n            title: splitArr[0],\n            subTitle: splitArr[1] || '',\n            name: `${staff_name} | ${shop_name}`\n          }\n        })\n      })\n    }\n  },\n  components: {\n    MarkteingPluginTitle,\n    ShopSelect\n  }\n}\n",{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/pages/brand/marketing/plugin/activity-qrcode","sourcesContent":["<template>\n  <st-panel-layout>\n    <MarkteingPluginTitle\n      pathName=\"brand-marketing-plugin-activity-qrcode-list\"\n    />\n    <st-panel app initial :class=\"basic()\">\n      <template v-if=\"auth.page\">\n        <div slot=\"title\" :class=\"basic('search')\">\n          <shop-select\n            :class=\"basic('select')\"\n            v-model=\"$searchQuery.shop_id\"\n            @change=\"onSingleSearch('shop_id', $event)\"\n          ></shop-select>\n          <st-input-search\n            v-model=\"$searchQuery.keyword\"\n            @search=\"onSingleSearch('keyword', $event)\"\n            placeholder=\"搜索员工名称或手机号\"\n          />\n        </div>\n        <div :class=\"basic('content')\">\n          <st-table\n            :page=\"page\"\n            rowKey=\"id\"\n            :columns=\"columns\"\n            @change=\"onTableChange\"\n            :dataSource=\"list\"\n          >\n            <template slot=\"identity\" slot-scope=\"text\">\n              <span>{{ text.join(' ') }}</span>\n            </template>\n            <template slot=\"scan_code_num\" slot-scope=\"text, record\">\n              <a\n                v-if=\"text\"\n                v-modal-link=\"{\n                  name: 'brand-marketing-scan-table',\n                  props: { id: record.id, title: '扫码记录' }\n                }\"\n              >\n                <span>{{ text }}</span>\n              </a>\n              <span v-else>--</span>\n            </template>\n            <template slot=\"follow_num\" slot-scope=\"text, record\">\n              <a\n                v-if=\"text\"\n                v-modal-link=\"{\n                  name: 'brand-marketing-follow-table',\n                  props: { id: record.id, title: '新增会员' }\n                }\"\n              >\n                <span>{{ text }}</span>\n              </a>\n              <span v-else>--</span>\n            </template>\n            <template slot=\"action\" slot-scope=\"text, record\">\n              <st-table-actions>\n                <a @click=\"onGeneralize(record)\">\n                  查看推广码\n                </a>\n              </st-table-actions>\n            </template>\n          </st-table>\n        </div>\n      </template>\n    </st-panel>\n  </st-panel-layout>\n</template>\n\n<script>\nimport { ListService } from './list.service'\nimport { UserService } from '@/services/user.service'\nimport MarkteingPluginTitle from '../../components#/marketing-title'\nimport tableMixin from '@/mixins/table.mixin'\nimport { columns } from './list.config'\nimport ShopSelect from '@/views/biz-components/shop/shop-select'\nimport BrandMarketingScanTable from '@/views/biz-modals/brand/marketing/scan-table'\nimport BrandMarketingFollowTable from '@/views/biz-modals/brand/marketing/follow-table'\nimport BrandMarketingDownloadQrcode from '@/views/biz-modals/brand/marketing/download-qrcode'\nexport default {\n  name: 'PageBrandMarketingPluginActivityQrcode',\n  mixins: [tableMixin],\n  bem: {\n    basic: 'page-brand-plugin-activity-qrcode'\n  },\n  modals: {\n    BrandMarketingScanTable,\n    BrandMarketingFollowTable,\n    BrandMarketingDownloadQrcode\n  },\n  serviceInject() {\n    return {\n      listService: ListService,\n      userService: UserService\n    }\n  },\n  rxState() {\n    return {\n      list: this.listService.list$,\n      page: this.listService.page$,\n      loading: this.listService.loading$,\n      auth: this.listService.auth$\n    }\n  },\n  data(vm) {\n    return {\n      columns: columns(vm)\n    }\n  },\n  methods: {\n    onGeneralize(record) {\n      const { id, staff_name, shop_name } = record\n      if (this.loading.getInfo) {\n        return\n      }\n      this.listService.getInfo(id).subscribe(res => {\n        const { qrcode, product_name } = res.info\n        const splitArr = product_name.split('-')\n        this.$modalRouter.push({\n          name: 'brand-marketing-download-qrcode',\n          props: {\n            url: qrcode,\n            title: splitArr[0],\n            subTitle: splitArr[1] || '',\n            name: `${staff_name} | ${shop_name}`\n          }\n        })\n      })\n    }\n  },\n  components: {\n    MarkteingPluginTitle,\n    ShopSelect\n  }\n}\n</script>\n"]}]}