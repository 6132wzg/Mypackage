{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"brand-staff\"],{\"1c2a\":function(t,e,a){\"use strict\";a.d(e,\"a\",(function(){return n}));var n=function(t){var e=t.pattern,a=t.$c(\"coach\");return{name:{rules:[{required:!0,message:\"请输入登录账户\"},{pattern:e.CN_EN_NUM(\"6-15\"),message:\"请输入6~15d个字符\"}]},account:{rules:[{required:!0,message:\"请输入登录账户\"},{pattern:e.CN_EN_NUM(\"6-15\"),message:\"请输入6~15个字符\"}]},password:{rules:[{required:!0,message:\"请输入登录密码\"},{pattern:e.CN_EN_NUM(\"6-15\"),message:\"请输入6~15个字符\"}]},repeat_password:{rules:[{validator:function(t,e,a){return e?e.length<6||e.length>15?\"请输入正确格式登录密码\":e!==a.password?\"两次密码输入不一致\":void 0:\"请输入登录密码\"}}]},staff_name:{rules:[{required:!0,message:\"请输入用户名\"},{pattern:e.CN_EN_NUM(\"1-15\"),message:\"请输入1-15个字符\"}]},nickname:{rules:[{required:!0,message:\"请填写昵称\"},{pattern:e.CN_EN_NUM(\"1-10\"),message:\"请输入1-10个字，中英文及数字\"}]},coach_levelRule:{},country_code_id:{initialValue:37},mobile:{rules:[{required:!0,message:\"手机号格式错误\",pattern:e.MOBILE}]},mail:{rules:[{message:\"请填写正确格式邮箱号\",pattern:e.EMAIL}]},sex:{rules:[{required:!0,message:\"请选择你的性别\"}]},id_type:{initialValue:1},id_number:{rules:[{validator:function(a,n,r){return 1===t.id_type&&n&&!e.ID.test(n)?\"请填写正确的身份证号\":2===t.id_type&&n&&!e.PASSPORT.test(n)?\"请填写正确的护照号码\":void 0}}]},image_avatar:{},image_face:{},identity:{rules:[{required:!0,message:\"请选择职能\"}]},department_id:{rules:[{required:!0,message:\"请选择部门\"}]},staff_num:{rules:[{pattern:e.CN_EN_NUM(\"1-20\"),message:\"请输入1-20个字，中英文及数字\"}]},nature_work:{},entry_date:{},shop_id:{rules:[{required:!0,message:\"请选择门店\"}]},role_id:{rules:[{required:!0,message:\"请选择系统角色\"}]},album_id:{},is_permission:{initialValue:0},coach_level_id:{rules:[{required:!0,message:\"请选择\".concat(a,\"等级\")}]},graduated_school:{rules:[{pattern:e.CN_EN_NUM(\"1-100\"),message:\"请输入1-100个字，中英文及数字\"}]},education:{},birthday:{},marry_status:{},children_status:{},graduation_time:{},provinces:{initialValue:[]},native_place:{},profession:{rules:[{pattern:e.CN_EN_NUM(\"1-50\"),message:\"请输入1-50个字，中英文及数字\"}]},address:{rules:[{pattern:e.CN_EN_NUM(\"0-100\"),message:\"请输入0-100个字，中英文及数字\"}]},description:{},employment_time:{},introduction:{},specialty_id:{},certification_name:{rules:[{pattern:e.CN_EN_NUM(\"1-100\"),message:\"请输入1-100个字，中英文及数字\"}]},is_show:{}}}},\"2d64\":function(t,e,a){\"use strict\";a.r(e),a.d(e,\"EditService\",(function(){return g}));a(\"c5f6\");var n,r,i,s,o,c,d=a(\"d225\"),f=a(\"b0b4\"),u=a(\"9ab4\"),l=a(\"0cd5\"),p=a(\"df29\"),m=a(\"3bc6\"),h=a(\"cc76\"),v=a(\"c4cc\"),b=a(\"dcb5\"),_=a(\"54da\"),g=function(){function t(e,a,n){Object(d[\"a\"])(this,t),this.staffApi=e,this.shopStaffApi=a,this.roleApi=n,this.staffInfo$=new p[\"d\"]([]),this.codeList$=new p[\"d\"]([]),this.roleList$=new p[\"d\"]([]),this.staffSpecialty$=new p[\"d\"]([]),this.loading$=new p[\"d\"]({})}return Object(f[\"a\"])(t,[{key:\"getCountryCodes\",value:function(){var t=this;return this.staffApi.getCountryCodes().pipe(Object(v[\"a\"])((function(e){t.codeList$.commit((function(){var t=e.code_list;return t.length||t.push({phone_code:e.default_code,code_id:e.default_code_id}),t}))})))}},{key:\"getNormalList\",value:function(){var t=this;return this.roleApi.getNormalList().pipe(Object(v[\"a\"])((function(e){t.roleList$.commit((function(){return e.roles}))})))}},{key:\"editStaffInfo\",value:function(t){var e=this;return this.staffApi.editStaffInfo(t).pipe(Object(v[\"a\"])((function(t){e.staffInfo$.commit((function(){return t.staff_info}))})))}},{key:\"getStaffSpecialty\",value:function(){var t=this;return this.shopStaffApi.getStaffSpecialty().pipe(Object(v[\"a\"])((function(e){t.staffSpecialty$.commit((function(){return e}))})))}},{key:\"updateBasicInfo\",value:function(t,e){return this.staffApi.updateStaffBasicInfo(t,e)}},{key:\"updateDetailedInfo\",value:function(t,e){return this.staffApi.updateStaffDetailInfo(t,e)}},{key:\"updateCoachInfo\",value:function(t,e){return this.staffApi.updateStaffCoachInfo(t,e)}},{key:\"beforeRouteEnter\",value:function(t,e){var a=t.query.id;return Object(_[\"a\"])(this.getStaffSpecialty(),this.getNormalList(),this.getCountryCodes(),this.editStaffInfo(a))}}]),t}();Object(u[\"b\"])([Object(p[\"c\"])(),Object(u[\"d\"])(\"design:type\",Function),Object(u[\"d\"])(\"design:paramtypes\",[]),Object(u[\"d\"])(\"design:returntype\",void 0)],g.prototype,\"getCountryCodes\",null),Object(u[\"b\"])([Object(p[\"c\"])(),Object(u[\"d\"])(\"design:type\",Function),Object(u[\"d\"])(\"design:paramtypes\",[String]),Object(u[\"d\"])(\"design:returntype\",void 0)],g.prototype,\"editStaffInfo\",null),Object(u[\"b\"])([Object(p[\"c\"])(),Object(u[\"d\"])(\"design:type\",Function),Object(u[\"d\"])(\"design:paramtypes\",[]),Object(u[\"d\"])(\"design:returntype\",void 0)],g.prototype,\"getStaffSpecialty\",null),Object(u[\"b\"])([Object(p[\"c\"])(),Object(u[\"d\"])(\"design:type\",Function),Object(u[\"d\"])(\"design:paramtypes\",[Number,\"function\"===typeof(n=\"undefined\"!==typeof b[\"EditStaffBasicInfoQuery\"]&&b[\"EditStaffBasicInfoQuery\"])?n:Object]),Object(u[\"d\"])(\"design:returntype\",void 0)],g.prototype,\"updateBasicInfo\",null),Object(u[\"b\"])([Object(p[\"c\"])(),Object(u[\"d\"])(\"design:type\",Function),Object(u[\"d\"])(\"design:paramtypes\",[Number,\"function\"===typeof(r=\"undefined\"!==typeof b[\"EditStaffDetailInfoQuery\"]&&b[\"EditStaffDetailInfoQuery\"])?r:Object]),Object(u[\"d\"])(\"design:returntype\",void 0)],g.prototype,\"updateDetailedInfo\",null),Object(u[\"b\"])([Object(p[\"c\"])(),Object(u[\"d\"])(\"design:type\",Function),Object(u[\"d\"])(\"design:paramtypes\",[Number,\"function\"===typeof(i=\"undefined\"!==typeof b[\"EditStaffCoachInfoQuery\"]&&b[\"EditStaffCoachInfoQuery\"])?i:Object]),Object(u[\"d\"])(\"design:returntype\",void 0)],g.prototype,\"updateCoachInfo\",null),g=Object(u[\"b\"])([Object(l[\"b\"])(),Object(u[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(s=\"undefined\"!==typeof b[\"k\"]&&b[\"k\"])?s:Object,\"function\"===typeof(o=\"undefined\"!==typeof h[\"g\"]&&h[\"g\"])?o:Object,\"function\"===typeof(c=\"undefined\"!==typeof m[\"b\"]&&m[\"b\"])?c:Object])],g)},3123:function(t,e,a){\"use strict\";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"st-panel\",{attrs:{app:\"\"}},[a(\"a-row\",{staticClass:\"mg-b48\",class:t.bstep(),attrs:{gutter:8}},[a(\"a-col\",{attrs:{offset:\"1\",span:t.stepsSpan}},[a(\"Steps\",{attrs:{value:t.currentIndex,stepArr:t.stepArr}})],1)],1),a(\"StaffDetailBasics\",{directives:[{name:\"show\",rawName:\"v-show\",value:0==t.currentIndex,expression:\"currentIndex == 0\"}],on:{addStep:t.addCoachInfo,deletStep:t.deletStep}})],1)},r=[],i=(a(\"20d6\"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"a-steps\",{attrs:{current:t.value}},t._l(t.stepArr,(function(e){return a(\"a-step\",{key:e.key,attrs:{title:e.title},on:{click:t.skip}})})),1)}),s=[],o=(a(\"c5f6\"),{name:\"Steps\",props:{stepArr:{type:Array,default:function(){return[]}},value:{type:Number,default:0}},methods:{skip:function(t){this.$emit(\"skip\",{index:t})}}}),c=o,d=a(\"2877\"),f=Object(d[\"a\"])(c,i,s,!1,null,null,null),u=f.exports,l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"st-form\",{class:t.addBasicsInfo(),attrs:{form:t.form}},[a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"员工头像\"}},[a(\"st-image-upload\",{attrs:{width:\"164px\",height:\"164px\",list:t.fileList,sizeLimit:2,placeholder:\"上传头像\"},on:{change:t.onChangeGetAvatar}}),a(\"div\",{staticClass:\"page-course-photo-des mg-l16\"},[a(\"div\",{staticClass:\"page-course-item\"},[a(\"div\",{staticClass:\"page-course-item-tip\"},[t._v(\"1.\")]),a(\"div\",{staticClass:\"page-course-item-cont\"},[t._v(\"\\n              图片格式必须为：png,bmp,\\n              jpeg,jpg,gif,建议使用png格式图片，以保存最佳效果\\n            \")])]),a(\"div\",{staticClass:\"page-course-item\"},[a(\"div\",{staticClass:\"page-course-item-tip\"},[t._v(\"2.\")]),a(\"div\",{staticClass:\"page-course-item-cont\"},[t._v(\"\\n              建议尺寸为200px * 200px， 不大于200KB\\n            \")])])])],1),a(\"st-form-item\",{attrs:{label:\"姓名\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.staff_name,expression:\"decorators.staff_name\"}],attrs:{placeholder:\"支持中英文、数字、不超过15个字\",max:\"15\"}})],1),a(\"st-form-item\",{attrs:{label:\"手机号\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.mobile,expression:\"decorators.mobile\"}],attrs:{placeholder:\"请输入手机号\"}},[a(\"a-select\",{staticStyle:{width:\"100px\"},attrs:{slot:\"addonBefore\"},slot:\"addonBefore\",model:{value:t.country_code_id,callback:function(e){t.country_code_id=e},expression:\"country_code_id\"}},t._l(t.codeList,(function(e){return a(\"a-select-option\",{key:e.code_id,attrs:{value:e.code_id}},[t._v(\"\\n              +\"+t._s(e.phone_code)+\"\\n            \")])})),1),a(\"a-input\")],1)],1),a(\"st-form-item\",{attrs:{label:\"性别\",required:\"\"}},[a(\"a-radio-group\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.sex,expression:\"decorators.sex\"}],attrs:{name:\"radioGroup\"}},[a(\"a-radio\",{attrs:{value:t.SEX.MALE}},[t._v(\"\\n            男\\n            \"),a(\"st-icon\",{staticClass:\"sex__male\",staticStyle:{color:\"#636aec\"},attrs:{type:\"male\"}})],1),a(\"a-radio\",{attrs:{value:t.SEX.FEMALE}},[t._v(\"\\n            女\\n            \"),a(\"st-icon\",{staticStyle:{color:\"#fa756c\"},attrs:{calss:\"sex__female\",type:\"female\"}})],1)],1)],1)],1),a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"员工人脸\"}},[a(\"face-upload\",{attrs:{width:\"164px\",height:\"164px\",list:t.faceList,placeholder:\"上传头像\"},on:{change:t.onChangeGetFace}})],1),a(\"st-form-item\",{attrs:{required:\"\"}},[a(\"template\",{slot:\"label\"},[t._v(\"\\n          昵称\\n          \"),a(\"st-help-tooltip\",{attrs:{id:\"TBEE001\"}})],1),a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.nickname,expression:\"decorators.nickname\"}],attrs:{placeholder:\"支持中英文、数字,不超过10个字\"}})],2),a(\"st-form-item\",{attrs:{label:\"邮箱\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.mail,expression:\"decorators.mail\"}],attrs:{placeholder:\"请输入邮箱\"}})],1),a(\"st-form-item\",{attrs:{label:\"证件\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.id_number,expression:\"decorators.id_number\"}],attrs:{placeholder:\"请输入\"}},[a(\"a-select\",{staticStyle:{width:\"100px\"},attrs:{slot:\"addonBefore\"},on:{change:t.resetID},slot:\"addonBefore\",model:{value:t.id_type,callback:function(e){t.id_type=e},expression:\"id_type\"}},t._l(t.id_types,(function(e,n){return a(\"a-select-option\",{key:n,attrs:{value:+e.value}},[t._v(\"\\n              \"+t._s(e.label)+\"\\n            \")])})),1)],1)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{offset:1,lg:22}},[a(\"st-hr\")],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{offset:1,lg:23}},[a(\"st-form-item\",{attrs:{required:\"\"}},[a(\"template\",{slot:\"label\"},[t._v(\"\\n          员工职能\\n          \"),a(\"st-help-tooltip\",{attrs:{id:\"TBCE002\"}})],1),a(\"a-checkbox-group\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.identity,expression:\"decorators.identity\"}],on:{change:t.getIsCoach}},t._l(t.identitys,(function(e,n){return a(\"a-checkbox\",{key:n,attrs:{value:+e.value}},[t._v(\"\\n            \"+t._s(e.label)+\"\\n          \")])})),1)],2)],1),a(\"a-col\",{attrs:{offset:1,lg:10,xs:22}},[a(\"st-form-item\",{attrs:{label:\"部门\",required:\"\"}},[a(\"department-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.department_id,expression:\"decorators.department_id\"}],staticStyle:{width:\"100%\"},attrs:{placeholder:\"请选择部门\",useType:\"form\"},on:{change:t.onChange}})],1),a(\"st-form-item\",{attrs:{label:\"工作性质\"}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.nature_work,expression:\"decorators.nature_work\"}],attrs:{placeholder:\"请选择\"}},[t._l(t.nature_works,(function(e,n){return[a(\"a-select-option\",{key:n,attrs:{value:+e.value}},[t._v(\"\\n              \"+t._s(e.label)+\"\\n            \")])]}))],2)],1),a(\"st-form-item\",{attrs:{label:\"系统角色\",required:\"\"}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.role_id,expression:\"decorators.role_id\"}],attrs:{mode:\"multiple\",placeholder:\"请选择\"}},[t._l(t.roleList,(function(e){return[a(\"a-select-option\",{key:e.id,attrs:{value:e.id}},[t._v(\"\\n              \"+t._s(e.name)+\"\\n            \")])]}))],2)],1),t.isShowLevel?a(\"st-form-item\",[a(\"template\",{slot:\"label\"},[t._v(\"\\n          \"+t._s(t.$c(\"coach\"))+\"等级\\n          \"),a(\"st-help-tooltip\",{attrs:{id:\"TBCE003\"}})],1),a(\"coach-level-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.coach_level_id,expression:\"decorators.coach_level_id\"}],staticStyle:{width:\"100%\"},attrs:{placeholder:\"请选择\"+t.$c(\"coach\")+\"等级\",useType:\"form\"},on:{change:t.onChange}})],2):t._e()],1),a(\"a-col\",{attrs:{offset:1,lg:10,xs:22}},[a(\"st-form-item\",{attrs:{label:\"工号\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.staff_num,expression:\"decorators.staff_num\"}],attrs:{placeholder:\"请输入员工工号\"}})],1),a(\"st-form-item\",{attrs:{label:\"入职时间\"}},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.entry_date,expression:\"decorators.entry_date\"}],staticStyle:{width:\"100%\"}})],1),a(\"st-form-item\",{attrs:{label:\"所属门店\",required:\"\"}},[a(\"shop-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.shop_id,expression:\"decorators.shop_id\"}],attrs:{mode:\"multiple\",useType:\"form\",placeholder:\"选择\"}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{offset:1,lg:22}},[a(\"st-hr\")],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{offset:1,lg:10}},[a(\"st-form-item\",{attrs:{label:\"系统权限\"}},[a(\"a-checkbox\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.is_permission,expression:\"decorators.is_permission\"}],on:{change:t.permissionChange}},[t._v(\"\\n          开通系统使用权限\\n        \")])],1),t.isChoosePermission?a(\"st-form-item\",{attrs:{label:\"登录账号\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.account,expression:\"decorators.account\"}],attrs:{placeholder:\"6-18个字符，可使用字母、数字、下划线\"}})],1):t._e(),t.isChoosePermission?a(\"st-form-item\",{attrs:{label:\"登录密码\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.password,expression:\"decorators.password\"}],attrs:{placeholder:\"6-15个字符，区分大小写\",type:\"password\"}})],1):t._e(),t.isChoosePermission?a(\"st-form-item\",{attrs:{label:\"确认密码\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.repeat_password,expression:\"decorators.repeat_password\"}],attrs:{placeholder:\"请再次填写密码\",type:\"password\"}})],1):t._e()],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{offset:1}},[a(\"st-form-item\",{attrs:{labelFix:\"\"}},[a(\"st-button\",{attrs:{loading:t.loading.addStaff,type:\"primary\"},on:{click:t.goNext}},[t._v(\"\\n          保存，继续填写细信息\\n        \")])],1)],1)],1)],1)},p=[],m=(a(\"6762\"),a(\"2fdb\"),a(\"7ce1\")),h=a(\"462b\"),v=a(\"2138\"),b=a(\"6fef\"),_=a(\"b346\"),g=a(\"9e5b\"),y=a(\"74d8\"),S=a(\"7643\"),w=a(\"3949\"),O=a(\"2527\"),k=a(\"1c2a\"),j=a(\"188d\"),x=a(\"5c8a\"),C={name:\"StaffDetailBasics\",bem:{addBasicsInfo:\"page-brand-staff-add-detail\"},serviceInject:function(){return{pattern:O[\"a\"],appConfig:y[\"a\"],userService:v[\"a\"],addService:b[\"AddService\"]}},rxState:function(){return{codeList:this.addService.codeList$,roleList:this.addService.roleList$,loading:this.addService.loading$,id_types:this.userService.getOptions$(\"staff.id_type\"),identitys:this.userService.getOptions$(\"staff.identity\"),nature_works:this.userService.getOptions$(\"staff.nature_work\")}},data:function(t){var e=this.$stForm.create(),a=e.decorators(k[\"a\"]);return{form:e,decorators:a,SEX:w[\"a\"],fileList:[],faceList:[],isChoosePermission:!1,isAdd:[],addflag:!1,isShowLevel:!1,treeExpandedKeys:[],value:void 0,id_type:1,country_code_id:37}},components:{ShopSelect:_[\"a\"],DepartmentSelect:g[\"a\"],CoachLevelSelect:h[\"a\"],FaceUpload:j[\"a\"],StImageUpload:m[\"a\"]},methods:{resetID:function(){this.form.setFieldsValue({id_number:void 0})},onChangeGetAvatar:function(t){this.fileList=Object(x[\"a\"])(t)},onChangeGetFace:function(t){this.faceList=Object(x[\"a\"])(t)},getIsCoach:function(t){if(this.isShowLevel=t.includes(S[\"b\"].PARSONAL_COACH),this.isShowLevel){if(this.addflag)return;this.$emit(\"addStep\"),this.addflag=!0}else this.$emit(\"deletStep\"),this.addflag=!1},permissionChange:function(t){this.isChoosePermission=t.target.checked},onChange:function(t){this.value=t},goNext:function(t){var e=this;this.form.validate().then((function(t){e.submit(t)}))},submit:function(t){var e=this;t.is_permission=+this.isChoosePermission,t.entry_date=moment(t.entry_date).format(\"YYYY-MM-DD\"),t.image_avatar=this.fileList[0],t.image_face=this.faceList[0],t.country_code_id=this.country_code_id,t.id_type=this.id_type,this.addService.addStaff(t).subscribe((function(a){e.$router.push({name:\"brand-staff-edit\",query:{id:a.staff_id,currentIndex:1,isShowCoach:t.identity.includes(S[\"b\"].TEAM_COACH)||t.identity.includes(S[\"b\"].PARSONAL_COACH)?1:0}})}))}}},$=C,I=Object(d[\"a\"])($,l,p,!1,null,null,null),A=I.exports,N=a(\"e69b\"),D={name:\"addDetail\",components:{Steps:u,StaffDetailBasics:A},serviceInject:function(){return{addService:b[\"AddService\"],messageService:N[\"a\"]}},rxState:function(){return{codeList:this.addService.codeList$}},bem:{b:\"page-add-staff\",bstep:\"page-add-staff-steps\",bHeader:\"default-brand-header\"},data:function(){return{currentIndex:0,stepsSpan:12,stepArr:[{title:\"基础信息\",key:1},{title:\"详细信息\",key:2}],staingData:{}}},methods:{deletStep:function(t){var e=this;this.stepsSpan=12;var a=this.stepArr.findIndex((function(t){return t.title===\"\".concat(e.$c(\"coach\"),\"信息\")}));-1!==a&&this.stepArr.pop()},addCoachInfo:function(t){this.stepsSpan=18,this.stepArr.push({title:\"\".concat(this.$c(\"coach\"),\"信息\"),key:3})}}},L=D,E=Object(d[\"a\"])(L,n,r,!1,null,null,null);e[\"default\"]=E.exports},\"39a6\":function(t,e,a){\"use strict\";var n,r,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"st-modal\",{staticClass:\"modal-turnover\",attrs:{title:\"员工复职\",okText:\"保存\",size:\"small\"},on:{ok:t.onSubmit},model:{value:t.show,callback:function(e){t.show=e},expression:\"show\"}},[a(\"staff-info\",{attrs:{staff:t.staff}}),a(\"section\",[a(\"st-form\",{attrs:{labelWidth:\"60px\"}},[a(\"st-form-item\",{attrs:{labelWidth:\"60px\",label:\"复职日期\"}},[a(\"a-date-picker\",{on:{change:t.onChange}})],1)],1)],1)],1)},s=[],o=a(\"7a7f\"),c=a(\"d225\"),d=a(\"b0b4\"),f=a(\"9ab4\"),u=a(\"0cd5\"),l=a(\"c4cc\"),p=a(\"dcb5\"),m=a(\"e69b\"),h=function(){function t(e,a){Object(c[\"a\"])(this,t),this.staffApi=e,this.msg=a}return Object(d[\"a\"])(t,[{key:\"putStaffBrandRestart\",value:function(t){var e=this;return this.staffApi.putStaffBrandRestart(t).pipe(Object(l[\"a\"])((function(t){e.msg.success({content:\"员工复职成功\"})})))}}]),t}();h=Object(f[\"b\"])([Object(u[\"b\"])(),Object(f[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(n=\"undefined\"!==typeof p[\"k\"]&&p[\"k\"])?n:Object,\"function\"===typeof(r=\"undefined\"!==typeof m[\"a\"]&&m[\"a\"])?r:Object])],h);var v={name:\"Reinstatement\",serviceInject:function(){return{reinstatementService:h}},data:function(){return{show:!1,restartTime:\"\"}},props:{staff:{type:Object,default:function(){}}},components:{StaffInfo:o[\"a\"]},methods:{onChange:function(t,e){this.restartTime=e},onSubmit:function(){var t=this;this.reinstatementService.putStaffBrandRestart({id:this.staff.id,restart_time:this.restartTime}).subscribe((function(e){t.$router.reload()})),this.show=!1}}},b=v,_=a(\"2877\"),g=Object(_[\"a\"])(b,i,s,!1,null,null,null);e[\"a\"]=g.exports},\"3bde\":function(t,e,a){\"use strict\";a.r(e);var n,r,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"page-staff\"},[a(\"section\",{staticClass:\"page-staff-lf\"},[a(\"header\",{staticClass:\"staff-lf__search\"},[a(\"a-select\",{staticStyle:{width:\"226px\"},attrs:{allowClear:\"\",placeholder:\"请选择部门\"},on:{search:t.handleDepartmentSearch,change:t.handleDepartmentSearchChange}},t._l(t.departmentSearchList,(function(e){return a(\"a-select-option\",{key:e.id},[t._v(\"\\n          \"+t._s(e.name)+\"\\n        \")])})),1)],1),a(\"main\",{staticClass:\"staff-lf__tree\"},[a(\"st-organ-tree\",{ref:\"tree\",attrs:{treeData:t.treeData},on:{updateData:t.updateData,\"node-click\":t.getDepartment}})],1)]),a(\"section\",{staticClass:\"page-staff-rg\"},[a(\"header\",{staticClass:\"staff-rg__operation\"},[a(\"a-row\",{attrs:{type:\"flex\",justify:\"space-between\"}},[a(\"a-col\",{attrs:{span:10}},[a(\"opreation-button\",{attrs:{auth:t.auth,rowKeys:t.ids},on:{\"add-staff\":t.onAddStaff,\"batch-import\":t.onbatchImport,\"import-staff\":t.onImportStaff}})],1),a(\"a-col\",{attrs:{span:14}},[a(\"filter-staff\",{attrs:{roleOptions:t.roleOptions}})],1)],1)],1),a(\"main\",{staticClass:\"staff-rg__table\"},[a(\"div\",{staticStyle:{width:\"100%\"}},[a(\"staff-table\",{ref:\"staffTable\",attrs:{page:t.page,loading:t.loading.getStaffList,staffList:t.staffList},on:{\"edit-staff\":t.onEditStaff,selectedRow:t.selectedRow}})],1)])])])},s=[],o=(a(\"7f7f\"),a(\"ac6a\"),a(\"75fc\")),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"filter-staff\"},[a(\"a-select\",{staticClass:\"filter-staff__item mg-r8\",attrs:{dropdownMatchSelectWidth:!1,placeholder:\"全部角色\"},on:{change:function(e){return t.onSingleSearch(\"role_id\",e)}},model:{value:t.$searchQuery.role_id,callback:function(e){t.$set(t.$searchQuery,\"role_id\",e)},expression:\"$searchQuery.role_id\"}},t._l(t.roleOptions,(function(e){return a(\"a-select-option\",{key:e.id,attrs:{value:e.id}},[t._v(\"\\n      \"+t._s(e.name)+\"\\n    \")])})),1),a(\"shop-select\",{staticClass:\"filter-staff__item mg-r8\",on:{change:function(e){return t.onSingleSearch(\"shop_id\",e)}},model:{value:t.$searchQuery.shop_id,callback:function(e){t.$set(t.$searchQuery,\"shop_id\",e)},expression:\"$searchQuery.shop_id\"}}),a(\"a-select\",{staticClass:\"filter-staff__item mg-r8\",attrs:{dropdownMatchSelectWidth:!1,placeholder:\"全部在职状态\",options:t.workStatus},on:{change:function(e){return t.onSingleSearch(\"work_status\",e)}},model:{value:t.$searchQuery.work_status,callback:function(e){t.$set(t.$searchQuery,\"work_status\",e)},expression:\"$searchQuery.work_status\"}}),a(\"st-input-search\",{staticClass:\"filter-staff__item\",attrs:{placeholder:\"搜索员工\",round:\"round\"},on:{search:function(e){return t.onKeywordsSearch(\"keyword\",e)}},model:{value:t.$searchQuery.keyword,callback:function(e){t.$set(t.$searchQuery,\"keyword\",e)},expression:\"$searchQuery.keyword\"}})],1)},d=[],f=a(\"2138\"),u=a(\"ea3e\"),l=a(\"b346\"),p={name:\"FilterStaff\",mixins:[u[\"a\"]],serviceInject:function(){return{userService:f[\"a\"]}},rxState:function(){return{staffEnums:this.userService.getOptions$(\"staff.work_status\")}},components:{ShopSelect:l[\"a\"]},props:{roleOptions:{type:Array,default:function(){return[]}}},computed:{workStatus:function(){return[{value:-1,label:\"全部在职状态\"}].concat(Object(o[\"a\"])(this.staffEnums))}},data:function(){return{}},methods:{onChooseStaffStatus:function(t){this.searchData.staff_status=t},onChooseShop:function(t){this.searchData.shop_id=t},onChange:function(){this.$router.push({query:this.$searchQuery})},reset:function(t){}}},m=p,h=a(\"2877\"),v=Object(h[\"a\"])(m,c,d,!1,null,null,null),b=v.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"opreation-button\"},[t.auth.add?a(\"st-button\",{staticClass:\"mg-r8\",attrs:{icon:\"add\",type:\"primary\"},on:{click:t.onClickAddStaff}},[t._v(\"\\n    新增员工\\n  \")]):t._e(),t.auth.join?a(\"st-button\",{attrs:{disabled:!t.rowKeys.length},on:{click:t.onBatchImport}},[t._v(\"\\n    批量加入部门\\n  \")]):t._e()],1)},g=[],y={props:{auth:Object,default:function(){},rowKeys:Array},name:\"OpreationButton\",methods:{onClickAddStaff:function(){this.$emit(\"add-staff\")},onBatchImport:function(){this.$emit(\"batch-import\")},onImportStaff:function(){this.$emit(\"import-staff\")}}},S=y,w=Object(h[\"a\"])(S,_,g,!1,null,null,null),O=w.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"st-panel\",{staticClass:\"page-staff-table\"},[n(\"st-table\",{attrs:{loading:t.loading,alertSelection:{onReset:t.onSelectionReset},rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectionChange},page:t.page,columns:t.columns,dataSource:t.staffList,scroll:{x:1100},rowKey:\"id\"},on:{change:t.onTableChange},scopedSlots:t._u([{key:\"action\",fn:function(e,a){return n(\"div\",{},[n(\"st-table-actions\",[a.auth[\"brand:staff:staff|get\"]?n(\"a\",{on:{click:function(e){return t.staffInfo(a)}}},[t._v(\"\\n          详情\\n        \")]):t._e(),a.auth[\"brand:staff:staff|edit\"]?n(\"a\",{attrs:{href:\"javascript: void(0)\"},on:{click:function(e){return t.editStaff(a.id)}}},[t._v(\"\\n          编辑\\n        \")]):t._e(),a.auth[\"brand:staff:staff|bind_card\"]?n(\"a\",{directives:[{name:\"modal-link\",rawName:\"v-modal-link\",value:{name:\"staff-bind-entity-card\",props:{staff:a}},expression:\"{\\n            name: 'staff-bind-entity-card',\\n            props: { staff: record }\\n          }\"}],attrs:{href:\"javascript: void(0)\"}},[t._v(\"\\n          绑定实体卡\\n        \")]):t._e(),a.auth[\"brand:staff:staff|rebind_card\"]?n(\"a\",{directives:[{name:\"modal-link\",rawName:\"v-modal-link\",value:{name:\"staff-bind-entity-card\",props:{staff:a}},expression:\"{\\n            name: 'staff-bind-entity-card',\\n            props: { staff: record }\\n          }\"}],attrs:{href:\"javascript: void(0)\"}},[t._v(\"\\n          重绑定实体卡\\n        \")]):t._e(),a.auth[\"brand:staff:staff|position\"]?n(\"a\",{attrs:{href:\"javascript: void(0)\"},on:{click:function(e){return t.staffPositionChange(a)}}},[t._v(\"\\n          职位和薪资变更\\n        \")]):t._e(),a.auth[\"brand:staff:staff|leave\"]?n(\"a\",{attrs:{href:\"javascript: void(0)\"},on:{click:function(e){return t.staffLeave(a)}}},[t._v(\"\\n          离职\\n        \")]):t._e(),a.auth[\"brand:staff:staff|reinstate\"]?n(\"a\",{directives:[{name:\"modal-link\",rawName:\"v-modal-link\",value:{name:\"staff-reinstatement\",props:{staff:a}},expression:\"{\\n            name: 'staff-reinstatement',\\n            props: { staff: record }\\n          }\"}],attrs:{href:\"javascript: void(0)\"}},[t._v(\"\\n          复职\\n        \")]):t._e(),a.auth[\"brand:staff:account|save\"]?n(\"a\",{directives:[{name:\"modal-link\",rawName:\"v-modal-link\",value:{name:\"staff-re-password\",props:{staff:a}},expression:\"{\\n            name: 'staff-re-password',\\n            props: { staff: record }\\n          }\"}],attrs:{href:\"javascript: void(0)\"}},[t._v(\"\\n          管理登录账号\\n        \")]):t._e(),a.auth[\"brand:staff:staff|salary\"]?n(\"a\",{directives:[{name:\"modal-link\",rawName:\"v-modal-link\",value:{name:\"staff-salary-account-setting\",props:{staff:a}},expression:\"{\\n            name: 'staff-salary-account-setting',\\n            props: { staff: record }\\n          }\"}],attrs:{href:\"javascript: void(0)\"}},[t._v(\"\\n          设置提现账户\\n        \")]):t._e(),a.auth[\"brand_shop:staff:staff|del\"]?n(\"a\",{on:{click:function(e){return t.onClickDelete(a)}}},[t._v(\"\\n          删除\\n        \")]):t._e(),a.auth[\"brand:staff:staff|finger_del\"]?n(\"a\",{on:{click:function(e){return t.onClearFingerprintInfo(a)}}},[t._v(\"\\n          清空指纹信息\\n        \")]):t._e(),a.auth[\"brand:staff:staff|cabinet_pwd_del\"]?n(\"a\",{on:{click:function(e){return t.onClearHardwarePassword(a)}}},[t._v(\"\\n          清空硬件密码\\n        \")]):t._e()])],1)}},{key:\"work_status\",fn:function(e){return n(\"div\",{},[n(\"st-text\",{attrs:{status:{success:1===e.id,error:2===e.id}}},[t._v(\"\\n        \"+t._s(e.name)+\"\\n      \")])],1)}},{key:\"shop\",fn:function(e,a){return n(\"div\",{},[a.is_super_admin?[t._v(\"全部\")]:[e.length?n(\"a\",{directives:[{name:\"modal-link\",rawName:\"v-modal-link\",value:{name:\"staff-shop-with-staff\",props:{shopList:e}},expression:\"{\\n            name: 'staff-shop-with-staff',\\n            props: { shopList: shop }\\n          }\"}]},[t._v(\"\\n          共\"+t._s(e.length)+\"家门店\\n        \")]):n(\"span\",[t._v(\"--\")])]],2)}},{key:\"identity\",fn:function(e){return n(\"div\",{},[t._v(\"\\n      \"+t._s(t._f(\"identityNames\")(e))+\"\\n    \")])}},{key:\"staff_name\",fn:function(e,r){return[t._v(\"\\n      \"+t._s(e)+\"\\n      \"),1===r.is_super_admin?n(\"img\",{staticClass:\"page-shop-staff-list__staff-role\",attrs:{src:a(\"fd89\"),alt:\"超级管理员\"}}):t._e()]}}])})],1)},j=[],x=function(){return[{title:\"姓名\",width:90,dataIndex:\"staff_name\",sorter:!0,key:\"name\",fixed:\"left\",scopedSlots:{customRender:\"staff_name\"}},{title:\"昵称\",dataIndex:\"nickname\",width:90,key:\"nickname\"},{title:\"手机号\",dataIndex:\"mobile\",key:\"1\"},{title:\"工号\",dataIndex:\"staff_num\",key:\"2\"},{title:\"所在门店\",dataIndex:\"shop\",key:\"3\",scopedSlots:{customRender:\"shop\"}},{title:\"所属部门\",dataIndex:\"department\",key:\"4\"},{title:\"身份\",dataIndex:\"identity\",key:\"5\",scopedSlots:{customRender:\"identity\"}},{title:\"在职状态\",dataIndex:\"work_status\",key:\"6\",scopedSlots:{customRender:\"work_status\"}},{title:\"操作\",key:\"operation\",fixed:\"right\",width:140,scopedSlots:{customRender:\"action\"}}]},C=a(\"52c6\"),$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"st-modal\",{staticClass:\"modal-staff-delete\",attrs:{title:\"删除员工\",size:\"small\",okText:t.operate?\"确定\":\"知道了\"},on:{ok:t.onSubmit},model:{value:t.show,callback:function(e){t.show=e},expression:\"show\"}},[a(\"staff-info\",{attrs:{staff:t.staff}}),t.operate?a(\"section\",[a(\"div\",{staticClass:\"modal-staff-delete__sub-tip\"},[t._v(\"\\n      删除员工后，将暂停进行中的服务，同时将无法恢复，确认删除？\\n    \")])]):a(\"section\",{staticClass:\"mg-b16\"},[t.list&&t.list.length?a(\"staff-modal-tips\",{attrs:{list:t.list,type:3,canNotDelete:!t.operate}}):t._e()],1)],1)},I=[],A=a(\"7a7f\"),N=a(\"d225\"),D=a(\"b0b4\"),L=a(\"9ab4\"),E=a(\"0cd5\"),P=a(\"df29\"),B=a(\"c4cc\"),R=a(\"dcb5\"),q=a(\"e69b\"),F=function(){function t(e,a){Object(N[\"a\"])(this,t),this.staffApi=e,this.msg=a,this.list$=new P[\"d\"]([]),this.operate$=new P[\"d\"]({}),this.loading$=new P[\"d\"]({})}return Object(D[\"a\"])(t,[{key:\"getStaffCheckJob\",value:function(t){var e=this;return this.staffApi.getStaffCheckJob(t).pipe(Object(B[\"a\"])((function(t){e.list$.commit((function(){return t.list.filter((function(t){return 0!==t.num}))})),e.operate$.commit((function(){return t.operate}))})))}},{key:\"deleteStaffBrandInfo\",value:function(t){var e=this;return this.staffApi.deleteStaffBrandInfo(t).pipe(Object(B[\"a\"])((function(t){e.msg.success({content:\"已删除！\"})})))}}]),t}();F=Object(L[\"b\"])([Object(E[\"b\"])(),Object(L[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(n=\"undefined\"!==typeof R[\"k\"]&&R[\"k\"])?n:Object,\"function\"===typeof(r=\"undefined\"!==typeof q[\"a\"]&&q[\"a\"])?r:Object])],F);var T=a(\"88b8\"),M={name:\"DeleteStaff\",serviceInject:function(){return{deleteService:F}},rxState:function(){return{list:this.deleteService.list$,operate:this.deleteService.operate$,loading:this.deleteService.loading$}},data:function(){return{show:!1}},components:{StaffInfo:A[\"a\"],StaffModalTips:T[\"a\"]},filters:{unitFilter:function(t){return 5===t?\"个\":\"节\"}},props:{staff:{type:Object,default:function(){}}},methods:{onSubmit:function(){var t=this;this.operate&&this.deleteService.deleteStaffBrandInfo(this.staff.id+\"\").subscribe((function(e){t.$router.reload()})),this.show=!1},isTurnover:function(){this.deleteService.getStaffCheckJob(this.staff.id+\"\").subscribe()}},mounted:function(){this.isTurnover()}},Q=M,U=Object(h[\"a\"])(Q,$,I,!1,null,null,null),V=U.exports,J=a(\"53de\"),Y=a(\"39a6\"),K=a(\"b875\"),G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"st-modal\",{staticClass:\"modal-support-course-shops\",attrs:{title:\"查看店详情\",footer:null},model:{value:t.show,callback:function(e){t.show=e},expression:\"show\"}},[a(\"st-container\",[a(\"st-table\",{attrs:{columns:t.columns,rowKey:\"id\",pagination:null,dataSource:t.shopList}})],1)],1)},z=[],H=[{title:\"省\",dataIndex:\"province_name\"},{title:\"市\",dataIndex:\"city_name\"},{title:\"区\",dataIndex:\"district_name\"},{title:\"门店\",dataIndex:\"name\"}],W={name:\"SupportCourseShops\",data:function(){return{columns:H,show:!1,supportShopList:[]}},props:{shopList:{type:Array,default:function(){return[]}}}},X=W,Z=Object(h[\"a\"])(X,G,z,!1,null,null,null),tt=Z.exports,et=a(\"c0d5\"),at=a(\"58c8\"),nt=a(\"7643\"),rt=a(\"89c8\"),it={mixins:[u[\"a\"]],modals:{StaffBindEntityCard:C[\"a\"],StaffDelete:V,StaffRePassword:J[\"a\"],StaffReinstatement:Y[\"a\"],StaffSalaryAccountSetting:K[\"a\"],StaffShopWithStaff:tt,StaffTurnover:et[\"a\"],StaffUpdateStaffPosition:at[\"a\"]},serviceInject:function(){return{departmentService:rt[\"DepartmentService\"]}},rxState:function(){return{}},props:{staffList:{type:Array,default:function(){return[]}},page:{type:Object,default:function(){}},loading:{type:Boolean,default:!1}},computed:{columns:x},watch:{selectedRowKeys:{handler:function(t){this.$emit(\"selectedRow\",this.selectedRowKeys)},deep:!0}},filters:{identityNames:function(t){return 0===t.length?\"--\":t.map((function(t){return t.name})).join(\",\")}},data:function(){return{WORK_STATUS:nt[\"c\"]}},methods:{onClickDelete:function(t){this.$modalRouter.push({name:\"staff-delete\",props:{staff:t},on:{}})},staffLeave:function(t){this.$modalRouter.push({name:\"staff-turnover\",props:{staff:t}})},staffPositionChange:function(t){this.$modalRouter.push({name:\"staff-update-staff-position\",props:{staff:t}})},staffInfo:function(t){this.$router.push({name:\"brand-staff-info-basic\",query:{id:t.id}})},editStaff:function(t){this.$emit(\"edit-staff\",t)},onClearFingerprintInfo:function(t){var e=this;this.$confirm({title:\"提示信息\",content:\"确认清空指纹信息？\",onOk:function(){e.departmentService.deleteStaffFinger(t.id).subscribe()}})},onClearHardwarePassword:function(t){var e=this;this.$confirm({title:\"提示信息\",content:\"确认清空硬件密码吗？\",onOk:function(){e.departmentService.deleteStaffCabinetPassword(t.id).subscribe()}})}}},st=it,ot=Object(h[\"a\"])(st,k,j,!1,null,null,null),ct=ot.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"ul\",{staticClass:\"st-tree\"},[a(\"tree-item\",{staticClass:\"item\",attrs:{item:t.treeDataSelf},on:{\"make-folder\":t.makeFolder,\"add-item\":t.addItem,\"edit-item\":t.editItem,\"update-data\":t.updateData,\"node-item-detail\":t.getNodeItemDetail}})],1)},ft=[],ut=(a(\"8e6e\"),a(\"456d\"),a(\"bd86\")),lt=(a(\"9bf3\"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"li\",[a(\"div\",{staticClass:\"tree-node\",class:{bold:t.isFolder},on:{dblclick:t.makeFolder}},[a(\"div\",{ref:\"treeNode\",staticClass:\"tree-node__content\",style:{\"padding-left\":t.paddingLeft},on:{click:t.getTreeNodeOnclick}},[t.isFolder&&0!==t.level?a(\"span\",{staticClass:\"tree-switch\",on:{click:function(e){return e.stopPropagation(),t.toggle(e)}}},[a(\"st-icon\",{attrs:{size:\"10px\",type:t.isOpen?\"open-tree\":\"close-tree\"}})],1):0===t.level||t.item.isEdit?t._e():a(\"span\",{staticClass:\"tree-switch__empty\"}),t.item.isEdit?a(\"div\",{staticClass:\"tree-name edit-box\",on:{click:function(t){t.stopPropagation()}}},[a(\"a-input\",{staticClass:\"tree-input mg-r8\",attrs:{placeholder:\"请输入部门名称\"},model:{value:t.editValue,callback:function(e){t.editValue=e},expression:\"editValue\"}}),a(\"a\",{staticClass:\"button edit mg-r8\",attrs:{href:\"javascript:;\"},on:{click:function(e){return e.stopPropagation(),t.editDepartment(e)}}},[t._v(\"\\n          保存\\n        \")]),a(\"span\",{on:{click:function(e){return e.stopPropagation(),t.cancelEdit(e)}}},[a(\"st-icon\",{attrs:{type:\"close\"}})],1)],1):a(\"span\",{staticClass:\"tree-name\",class:[0===t.item.id?\"first\":\"\"]},[t._v(\"\\n        \"+t._s(t.item.name)+\"( \"+t._s(t.item.count)+\" )\\n      \")]),a(\"st-more-dropdown\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.item.isEdi,expression:\"!item.isEdi\"}],staticClass:\"tree-opreation\"},[t.auth.departmentAdd?a(\"a-menu-item\",{on:{click:t.addTreeNode}},[t._v(\"\\n          新增\\n        \")]):t._e(),t.auth.departmentEdit&&0!==t.item.id?a(\"a-menu-item\",{on:{click:t.editTreeNode}},[t._v(\"\\n          编辑\\n        \")]):t._e(),t.auth.departmentDel&&0!==t.item.id?a(\"a-menu-item\",{on:{click:function(e){return t.deleteDepartment(t.item)}}},[t._v(\"\\n          删除\\n        \")]):t._e()],1)],1),t.item.isAdd?a(\"div\",{staticClass:\"tree-node__content\",on:{click:function(t){t.stopPropagation()}}},[a(\"a-input\",{staticClass:\"tree-input  mg-r6\",attrs:{placeholder:\"请输入部门名称\"},model:{value:t.addValue,callback:function(e){t.addValue=e},expression:\"addValue\"}}),a(\"a\",{staticClass:\"mg-r8\",on:{click:function(e){return e.stopPropagation(),t.addDepartment(t.item)}}},[t._v(\"\\n        保存\\n      \")]),a(\"span\",{on:{click:function(e){return e.stopPropagation(),t.cancelAdd(e)}}},[a(\"st-icon\",{attrs:{type:\"close\"}})],1)],1):t._e()]),t.isFolder?a(\"ul\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.isOpen,expression:\"isOpen\"}],staticClass:\"st-tree-item\"},t._l(t.item.children,(function(e,n){return a(\"tree-item\",{key:n,staticClass:\"item\",attrs:{level:t.level+1,item:e},on:{\"make-folder\":function(e){return t.$emit(\"make-folder\",e)},\"add-item\":function(e){return t.$emit(\"add-item\",e)},\"edit-item\":function(e){return t.$emit(\"edit-item\",e)},\"update-data\":function(e){return t.$emit(\"update-data\",e)},\"node-item-detail\":function(e){return t.$emit(\"node-item-detail\",e)}}})})),1):t._e()])}),pt=[],mt=(a(\"c5f6\"),{serviceInject:function(){return{departmentService:rt[\"DepartmentService\"]}},rxState:function(){return{auth:this.departmentService.auth$}},name:\"TreeItem\",props:{item:Object,level:{type:Number,default:function(){return 0}}},data:function(){return{editValue:\"\",addValue:\"\",isActive:!1,opreations:[{clickName:this.addTreeNade,name:\"新增\"},{clickName:this.editTreeNade,name:\"编辑\"},{clickName:this.deleteTreeNade,name:\"删除\"}],placements:[\"bottomLeft\"],visible:!1,isOpen:!1}},computed:{isFolder:function(){return this.item.children&&this.item.children.length},paddingLeft:function(){return this.level?16*(this.level-1)+20+\"px\":\"20px\"}},methods:{cancelAdd:function(){this.item.isAdd=!1},cancelEdit:function(){this.item.isEdit=!1},editTreeNode:function(){var t=this;this.editValue=this.item.name,this.$emit(\"edit-item\",this.item),this.$nextTick().then((function(){var e=document.querySelectorAll(\".tree-node__content\");e.forEach((function(t){t.setAttribute(\"class\",\"tree-node__content\")})),t.$refs.treeNode.setAttribute(\"class\",\"tree-node__content active\")}))},addTreeNode:function(){var t=this;this.$emit(\"add-item\",this.item),this.$nextTick().then((function(){var e=document.querySelectorAll(\".tree-node__content\");e.forEach((function(t){t.setAttribute(\"class\",\"tree-node__content\")})),t.$refs.treeNode.setAttribute(\"class\",\"tree-node__content active\")}))},toggle:function(t){this.isFolder&&(this.isOpen=!this.isOpen)},addDepartment:function(t){var e=this;this.cancelAdd(),this.departmentService.addDepartment({parent_id:this.item.id,department_name:this.addValue}).subscribe((function(){e.$emit(\"update-data\")}))},editDepartment:function(t){var e=this;this.cancelEdit(),this.departmentService.updateDepartment({id:this.item.id,department_name:this.editValue}).subscribe((function(){e.$emit(\"update-data\")}))},deleteDepartment:function(t){var e=this;t.count>0?this.$error({title:\"\",content:\"当前部门下有员工，无法删除\"}):this.$confirm({title:\"确认要删除\",content:\"删除部门后,部门无法恢复，确认删除？\",onOk:function(){return new Promise((function(t,a){return e.departmentService.delDepartment({id:e.item.id}).subscribe((function(){setTimeout(Math.random()>.5?t:a,1e3),e.$emit(\"update-data\")}))})).catch((function(){}))},onCancel:function(){}})},getTreeNodeOnclick:function(t){this.isActive=!0,this.$emit(\"node-item-detail\",this.item),this.$nextTick().then((function(){var e=document.querySelectorAll(\".tree-node__content\"),a=document.querySelectorAll(\".tree-node__content .tree-opreation\");a.forEach((function(t){t.setAttribute(\"class\",\"tree-opreation\")})),e.forEach((function(t){t.setAttribute(\"class\",\"tree-node__content\")})),t.currentTarget.querySelector(\".tree-opreation\").setAttribute(\"class\",\"tree-opreation active\"),t.currentTarget.setAttribute(\"class\",\"tree-node__content active\")}))},hide:function(){this.visible=!1},makeFolder:function(){this.isFolder||(this.$emit(\"make-folder\",this.item),this.isOpen=!0)}},mounted:function(){0===this.level?this.isOpen=!0:(this.$set(this.item,\"isEdit\",!1),this.$set(this.item,\"isAdd\",!1))}}),ht=mt,vt=Object(h[\"a\"])(ht,lt,pt,!1,null,null,null),bt=vt.exports,_t=a(\"5c8a\");function gt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function yt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?gt(Object(a),!0).forEach((function(e){Object(ut[\"a\"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):gt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var St,wt,Ot,kt={name:\"StOrganTree\",data:function(){return{treeDataSelf:{},count:0}},props:{treeData:{type:Object,default:function(){return{}}}},components:{TreeItem:bt},methods:{onClickItem:function(t){},makeFolder:function(t){Vue.set(t,\"children\",[]),this.addItem(t)},getNodeItemDetail:function(t){this.$emit(\"node-click\",t.id)},traverseTree:function(t,e,a){var n=this;return e.map((function(e){e[a]=e.name===t.name;var r=Object(ut[\"a\"])({},a,e.name===t.name);return e.children?yt({},r,{name:e.name,children:n.traverseTree(t,e.children,a),id:e.id,count:e.count}):e}))},addItem:function(t){this.treeDataSelf=this.traverseTree(t,[Object(_t[\"a\"])(this.treeData)],\"isAdd\")[0],this.$emit(\"add-item\",t)},editItem:function(t){this.treeDataSelf=this.traverseTree(t,[Object(_t[\"a\"])(this.treeData)],\"isEdit\")[0],this.$emit(\"edit-item\",t)},deleteItem:function(t){this.$emit(\"delete\",t)},updateData:function(){this.$emit(\"updateData\")}},watch:{treeData:function(t){this.treeDataSelf=Object(_t[\"a\"])(this.treeData)}},mounted:function(){this.treeDataSelf=Object(_t[\"a\"])(this.treeData)}},jt=kt,xt=Object(h[\"a\"])(jt,dt,ft,!1,null,null,null),Ct=xt.exports,$t=a(\"cc76\"),It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"st-modal\",{attrs:{title:\"选择所属部门\",confirmLoading:t.loading.transferBrand,size:\"small\"},on:{ok:t.save},model:{value:t.show,callback:function(e){t.show=e},expression:\"show\"}},[a(\"a-tree\",{attrs:{treeData:t.departmentOptions},on:{select:t.onSelect},scopedSlots:t._u([{key:\"title\",fn:function(e){var a=e.title;return[t._v(\"\\n      title: \"+t._s(a)+\"\\n    \")]}}])})],1)},At=[],Nt=function(){function t(e,a){Object(N[\"a\"])(this,t),this.staffApi=e,this.msg=a,this.loading$=new P[\"d\"]({})}return Object(D[\"a\"])(t,[{key:\"transferBrand\",value:function(t){var e=this;return this.staffApi.transferBrand(t).pipe(Object(B[\"a\"])((function(t){e.msg.success({content:\"批量导入成功\"})})))}}]),t}();Object(L[\"b\"])([Object(P[\"c\"])(),Object(L[\"d\"])(\"design:type\",Function),Object(L[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(St=\"undefined\"!==typeof R[\"TransferBrandInput\"]&&R[\"TransferBrandInput\"])?St:Object]),Object(L[\"d\"])(\"design:returntype\",void 0)],Nt.prototype,\"transferBrand\",null),Nt=Object(L[\"b\"])([Object(E[\"b\"])(),Object(L[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(wt=\"undefined\"!==typeof R[\"k\"]&&R[\"k\"])?wt:Object,\"function\"===typeof(Ot=\"undefined\"!==typeof q[\"a\"]&&q[\"a\"])?Ot:Object])],Nt);var Dt=a(\"89fa\"),Lt={name:\"BindEntityCard\",serviceInject:function(){return{staffApi:R[\"k\"],batchImportService:Nt}},rxState:function(){return{loading:this.batchImportService.loading$}},props:{ids:{type:Array,default:function(){return[]}}},data:function(){return{show:!1,departmentOptions:[],department_id:0}},mounted:function(){this.getDepartmentList()},methods:{onSelect:function(t){this.department_id=t.map((function(t){return JSON.parse(t)[\"key\"]}))[0]},save:function(t){var e=this;t.preventDefault(),this.batchImportService.transferBrand({ids:this.ids,department_id:this.department_id}).subscribe((function(t){e.show=!1,e.$emit(\"ok\",{department_id:e.department_id})}))},traverseTree:function(t){var e=this;return t.map((function(t){return t.children?{name:t.name,children:e.traverseTree(t.children),id:t.id+\"\",count:t.count}:t}))},getDepartmentList:function(){var t=this;this.staffApi.getDepartmentList().subscribe((function(e){t.departmentOptions=Object(Dt[\"a\"])(e.department,{keyName:\"id\"})}))}}},Et=Lt,Pt=Object(h[\"a\"])(Et,It,At,!1,null,null,null),Bt=Pt.exports,Rt={name:\"Staff\",modals:{StaffBatchImport:Bt},serviceInject:function(){return{departmentService:rt[\"DepartmentService\"],userService:f[\"a\"],shopStaffApi:$t[\"g\"]}},rxState:function(){return{departmentList:this.departmentService.departmentList$,departmentSearchList:this.departmentService.departmentSearchList$,staffList:this.departmentService.staffList$,roleOptions:this.departmentService.roleOptions$,loading:this.departmentService.loading$,page:this.departmentService.page$,auth:this.departmentService.auth$,brand:this.userService.brand$}},components:{FilterStaff:b,OpreationButton:O,StaffTable:ct,StOrganTree:Ct},computed:{shopList:function(){return[{id:-1,name:\"  全部\"}].concat(Object(o[\"a\"])(this.shopOptions))},treeData:function(){var t=this.treeList.length;return t||(this.treeList=this.departmentList),this.treeList.forEach((function(t){t.count})),{name:this.brand.name,id:0,count:this.departmentCount,children:this.treeList}},departmentCount:function(){var t=0;return this.departmentList.forEach((function(e){t+=e.count})),t}},data:function(){return{ids:[],treeList:[]}},methods:{updateData:function(){var t=this;this.departmentService.getDepartmentList().subscribe((function(e){t.treeList=e.department}))},getDepartment:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.$searchQuery.shop_id=-1,this.$searchQuery.work_status=-1,this.$searchQuery.department_id=t,this.$searchQuery.keyword=\"\",this.$router.push({query:this.$searchQuery})},selectedRow:function(t){this.ids=t},handleDepartmentSearch:function(t){this.departmentService.searchDepartment(t)},handleDepartmentSearchChange:function(t){this.treeList=t?this.deepSearchDepartment(this.departmentList,t):this.departmentList},deepSearchDepartment:function(t,e){var a=[];if(!t||!Array.isArray(t))return a;for(var n=0;n<t.length;n++){var r=t[n];if(a&&a.length)break;r.id===e?a=[r]:r.children&&r.children.length&&(a=this.deepSearchDepartment(r.children,e))}return a},onEditStaff:function(t){this.$router.push({name:\"brand-staff-edit\",query:{id:t}})},onAddStaff:function(){this.$router.push(\"/brand/staff/add\")},onbatchImport:function(){var t=this;this.$modalRouter.push({name:\"staff-batch-import\",props:{ids:this.ids},on:{ok:function(e){t.updateData(),t.$refs.staffTable.selectedRowKeys=[],t.$router.reload()}}})},onImportStaff:function(){}}},qt=Rt,Ft=Object(h[\"a\"])(qt,i,s,!1,null,null,null);e[\"default\"]=Ft.exports},\"3c1d\":function(t,e,a){\"use strict\";a.r(e);var n,r,i,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"st-panel\",{attrs:{app:\"\"}},[a(\"a-row\",{staticClass:\"mg-b48 mg-t48\",class:t.bstep(),attrs:{gutter:8}},[a(\"a-col\",{attrs:{offset:\"1\",span:t.stepsSpan}},[a(\"a-steps\",{attrs:{current:t.currentIndex}},t._l(t.stepArr,(function(e){return a(\"a-step\",{key:e.key,staticClass:\"cursor-pointer\",attrs:{title:e.title},on:{click:function(a){return t.changeStep(e.key)}}})})),1)],1)],1),0===t.currentIndex?a(\"edit-detail-basics-info\",{attrs:{data:t.staffInfo},on:{goNext:t.goNext,updateStaffInfo:t.updateStaffInfo}}):1===t.currentIndex?a(\"edit-detail-detailed-info\",{attrs:{isPrivateCoach:t.isPrivateCoach,isShowCoach:t.isShowCoach,data:t.staffInfo,loading:t.loading.updateDetailedInfo},on:{goNext:t.goNext,back:t.onBack,detailInfoSave:t.onDetailInfoSave}}):2===t.currentIndex&&t.isPrivateCoach?a(\"edit-detail-coach-info\",{attrs:{data:t.staffInfo,loading:t.loading.updateCoachInfo,staffSpecialty:t.staffSpecialty},on:{back:t.onBack,coachInfoSave:t.onCoachInfoSave}}):t._e()],1)},o=[],c=(a(\"c5f6\"),a(\"6762\"),a(\"2fdb\"),a(\"2138\")),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"st-form\",{class:t.editBasicInfo(),attrs:{form:t.form}},[a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"员工头像\"}},[a(\"st-image-upload\",{attrs:{width:\"164px\",height:\"164px\",list:t.fileList,sizeLimit:2,placeholder:\"上传头像\"},on:{change:t.onChangeGetAvatar}}),a(\"div\",{staticClass:\"page-course-photo-des mg-l16\"},[a(\"div\",{staticClass:\"page-course-item\"},[a(\"div\",{staticClass:\"page-course-item-tip\"},[t._v(\"1.\")]),a(\"div\",{staticClass:\"page-course-item-cont\"},[t._v(\"\\n              图片格式必须为：png,bmp,\\n              jpeg,jpg,gif,建议使用png格式图片，以保存最佳效果\\n            \")])]),a(\"div\",{staticClass:\"page-course-item\"},[a(\"div\",{staticClass:\"page-course-item-tip\"},[t._v(\"2.\")]),a(\"div\",{staticClass:\"page-course-item-cont\"},[t._v(\"\\n              建议尺寸为200px * 200px， 不大于200KB\\n            \")])])])],1),a(\"st-form-item\",{attrs:{label:\"姓名\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.staff_name,expression:\"decorators.staff_name\"}],attrs:{placeholder:\"支持中英文、数字、不超过15个字\",max:\"15\"}})],1),a(\"st-form-item\",{attrs:{label:\"手机号\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.mobile,expression:\"decorators.mobile\"}],attrs:{placeholder:\"请输入手机号\"}},[a(\"a-select\",{staticStyle:{width:\"100px\"},attrs:{slot:\"addonBefore\"},slot:\"addonBefore\",model:{value:t.country_code_id,callback:function(e){t.country_code_id=e},expression:\"country_code_id\"}},t._l(t.codeList,(function(e){return a(\"a-select-option\",{key:e.code_id,attrs:{value:e.code_id}},[t._v(\"\\n              +\"+t._s(e.phone_code)+\"\\n            \")])})),1)],1)],1),a(\"st-form-item\",{attrs:{label:\"性别\",required:\"\"}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.sex,expression:\"decorators.sex\"}],attrs:{placeholder:\"请选择\"}},[t._l(t.sexs,(function(e,n){return[a(\"a-select-option\",{key:n,attrs:{value:+e.value}},[t._v(\"\\n              \"+t._s(e.label)+\"\\n            \")])]}))],2)],1)],1),a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"员工人脸\"}},[a(\"face-upload\",{attrs:{width:\"164px\",height:\"164px\",list:t.faceList,placeholder:\"上传头像\"},on:{change:t.onChangeGetFace}})],1),a(\"st-form-item\",{attrs:{required:\"\"}},[a(\"template\",{slot:\"label\"},[t._v(\"\\n          昵称\\n          \"),a(\"st-help-tooltip\",{attrs:{id:\"TBEE001\"}})],1),a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.nickname,expression:\"decorators.nickname\"}],attrs:{placeholder:\"支持中英文、数字,不超过10个字\"}})],2),a(\"st-form-item\",{attrs:{label:\"邮箱\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.mail,expression:\"decorators.mail\"}],attrs:{placeholder:\"请输入邮箱\"}})],1),a(\"st-form-item\",{attrs:{label:\"证件\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.id_number,expression:\"decorators.id_number\"}],attrs:{placeholder:\"请输入\"}},[a(\"a-select\",{staticStyle:{width:\"100px\"},attrs:{slot:\"addonBefore\"},on:{change:t.resetID},slot:\"addonBefore\",model:{value:t.id_type,callback:function(e){t.id_type=e},expression:\"id_type\"}},t._l(t.id_types,(function(e,n){return a(\"a-select-option\",{key:n,attrs:{value:+e.value}},[t._v(\"\\n              \"+t._s(e.label)+\"\\n            \")])})),1)],1)],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{offset:1,lg:22}},[a(\"st-hr\")],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{offset:1,lg:10,xs:22}},[a(\"st-form-item\",{attrs:{label:\"部门\",required:\"\"}},[a(\"department-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.department_id,expression:\"decorators.department_id\"}],staticStyle:{width:\"100%\"},attrs:{placeholder:\"请选择部门\",useType:\"form\"}})],1),a(\"st-form-item\",{attrs:{label:\"工作性质\"}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.nature_work,expression:\"decorators.nature_work\"}],attrs:{placeholder:\"请选择\"}},[t._l(t.nature_works,(function(e,n){return[a(\"a-select-option\",{key:n,attrs:{value:+e.value}},[t._v(\"\\n              \"+t._s(e.label)+\"\\n            \")])]}))],2)],1),a(\"st-form-item\",{attrs:{label:\"系统角色\",required:\"\"}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.role_id,expression:\"decorators.role_id\"}],attrs:{mode:\"multiple\",placeholder:\"请选择\",disabled:t.isSuperAdmin},on:{change:t.roleChange}},[t._l(t.roleList,(function(e){return[a(\"a-select-option\",{key:e.id,attrs:{value:e.id}},[t._v(\"\\n              \"+t._s(e.name)+\"\\n            \")])]}))],2)],1)],1),a(\"a-col\",{attrs:{offset:1,lg:10,xs:22}},[a(\"st-form-item\",{attrs:{label:\"工号\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.staff_num,expression:\"decorators.staff_num\"}],attrs:{placeholder:\"请输入员工工号\"}})],1),a(\"st-form-item\",{attrs:{label:\"入职时间\"}},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.entry_date,expression:\"decorators.entry_date\"}],staticStyle:{width:\"100%\"}})],1),a(\"st-form-item\",{attrs:{label:\"所属门店\"}},[a(\"shop-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.shop_id,expression:\"decorators.shop_id\"}],attrs:{mode:\"multiple\",useType:\"form\",placeholder:\"请选择门店\",disabled:t.isSuperAdmin}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{offset:1,lg:22}},[a(\"st-hr\")],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{labelFix:\"\"}},[a(\"st-button\",{attrs:{loading:t.loading.updateBasicInfo,type:\"primary\"},on:{click:function(e){return e.stopPropagation(),t.saveAndGoNext(e)}}},[t._v(\"\\n          保存，继续填写\\n        \")])],1)],1)],1)],1)},f=[],u=(a(\"3b2b\"),a(\"d225\")),l=a(\"b0b4\"),p=a(\"9ab4\"),m=a(\"00ce\"),h=a(\"0cd5\"),v=a(\"2527\"),b=function(){function t(e,a,n){Object(u[\"a\"])(this,t),this.i18n=e,this.pattern=a,this.userService=n}return Object(l[\"a\"])(t,[{key:\"name\",get:function(){var t=new RegExp(/^[A-Za-z0-9\\_]{6,15}$/);return[\"name\",{rules:[{required:!0,message:\"请输入登录账户\"},{pattern:t,message:\"请输入6~15个字符\"}]}]}},{key:\"account\",get:function(){var t=new RegExp(/^[A-Za-z0-9\\_]{6,15}$/);return[\"account\",{rules:[{required:!0,message:\"请输入登录账户\"},{pattern:new RegExp(t),message:\"请输入6~15个字符\"}]}]}},{key:\"password\",get:function(){return[\"password\",{rules:[{required:!0,message:\"请输入登录密码\"},{pattern:new RegExp(/^.{6,15}$/),message:\"请输入6~15个字符\"}]}]}},{key:\"repeat_password\",get:function(){return[\"repeat_password\",{rules:[{required:!0,message:\"请再次输入登录密码\"},{pattern:new RegExp(/^.{6,15}$/),message:\"请输入6~15个字符\"}]}]}},{key:\"staff_name\",get:function(){return[\"staff_name\",{rules:[{required:!0,message:\"请填写姓名\"},{pattern:this.pattern.CN_EN_NUM(\"1-15\"),message:\"请输入1-15个字，中英文及数字\"}]}]}},{key:\"nickname\",get:function(){return[\"nickname\",{rules:[{required:!0,message:\"请填写昵称\"},{pattern:this.pattern.CN_EN_NUM(\"1-10\"),message:\"请输入1-10个字，中英文及数字\"}]}]}},{key:\"country_code_id\",get:function(){return[\"country_code_id\",{initialValue:37}]}},{key:\"phone\",get:function(){return[\"mobile\",{rules:[{required:!0,message:\"手机号格式错误\",pattern:this.pattern.MOBILE}]}]}},{key:\"mail\",get:function(){return[\"mail\",{rules:[{message:\"请填写正确格式邮箱号\",pattern:this.pattern.EMAIL}]}]}},{key:\"sex\",get:function(){return[\"sex\",{rules:[{required:!0,message:\"请选择你的性别\"}]}]}},{key:\"idtype\",get:function(){return[\"id_type\",{initialValue:1}]}},{key:\"idnumber\",get:function(){return[\"id_number\",{rules:[{message:\"请填写正确的身份证号\",pattern:this.pattern.ID}]}]}},{key:\"image_avatar\",get:function(){return[\"image_avatar\"]}},{key:\"image_face\",get:function(){return[\"image_face\"]}},{key:\"identity\",get:function(){return[\"identity\",{rules:[{required:!0,message:\"请选择职能\"}]}]}},{key:\"department_id\",get:function(){return[\"department_id\",{rules:[{required:!0,message:\"请选择部门\"}]}]}},{key:\"staff_num\",get:function(){return[\"staff_num\",{rules:[{pattern:this.pattern.CN_EN_NUM(\"1-20\"),message:\"请输入1-20个字，中英文及数字\"}]}]}},{key:\"nature_work\",get:function(){return[\"nature_work\"]}},{key:\"entry_date\",get:function(){return[\"entry_date\"]}},{key:\"shop_id\",get:function(){return[\"shop_id\",{rules:[{required:!0,message:\"请选择门店\"}]}]}},{key:\"role_id\",get:function(){return[\"role_id\",{rules:[{required:!0,message:\"请选择系统角色\"}]}]}},{key:\"album_id\",get:function(){return[\"album_id\"]}},{key:\"is_permission\",get:function(){return[\"is_permission\",{initialValue:0}]}},{key:\"coach_levelRule\",get:function(){return[\"coach_level_id\",{rules:[{required:!0,message:\"请选择\".concat(this.userService.c(\"coach\"),\"等级\")}]}]}},{key:\"graduated_school\",get:function(){return[\"graduated_school\",{rules:[{pattern:this.pattern.CN_EN_NUM(\"1-100\"),message:\"请输入1-100个字，中英文及数字\"}]}]}},{key:\"education\",get:function(){return[\"education\"]}},{key:\"birthday\",get:function(){return[\"birthday\"]}},{key:\"marry_status\",get:function(){return[\"marry_status\"]}},{key:\"graduation_time\",get:function(){return[\"graduation_time\"]}},{key:\"profession\",get:function(){return[\"profession\",{rules:[{pattern:this.pattern.CN_EN_NUM(\"1-50\"),message:\"请输入1-50个字，中英文及数字\"}]}]}},{key:\"native_place\",get:function(){return[\"native_place\",{rules:[{pattern:this.pattern.CN_EN(\"1-20\"),message:\"请输入1-20个字，中英文\"}]}]}},{key:\"children_status\",get:function(){return[\"children_status\"]}},{key:\"provinces\",get:function(){return[\"provinces\"]}},{key:\"address\",get:function(){return[\"address\",{rules:[{pattern:this.pattern.CN_EN_NUM(\"0-100\"),message:\"请输入0-100个字，中英文及数字\"}]}]}},{key:\"description\",get:function(){return[\"description\",{rules:[{pattern:this.pattern.CN_EN_NUM(\"0-300\"),message:\"请输入0-300个字，中英文及数字\"}]}]}},{key:\"employment_time\",get:function(){return[\"employment_time\"]}},{key:\"introduction\",get:function(){return[\"introduction\",{rules:[{pattern:this.pattern.CN_EN_NUM(\"1-300\"),message:\"请输入1-300个字，中英文及数字\"}]}]}},{key:\"specialty_id\",get:function(){return[\"specialty_id\"]}},{key:\"certification_name\",get:function(){return[\"certification_name\",{rules:[{pattern:this.pattern.CN_EN_NUM(\"1-100\"),message:\"请输入1-100个字，中英文及数字\"}]}]}},{key:\"is_show\",get:function(){return[\"is_show\"]}}]),t}();b=Object(p[\"b\"])([Object(h[\"b\"])(),Object(p[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(n=\"undefined\"!==typeof m[\"a\"]&&m[\"a\"])?n:Object,\"function\"===typeof(r=\"undefined\"!==typeof v[\"a\"]&&v[\"a\"])?r:Object,\"function\"===typeof(i=\"undefined\"!==typeof c[\"a\"]&&c[\"a\"])?i:Object])],b);var _=a(\"2d64\"),g=a(\"7ce1\"),y=a(\"b346\"),S=a(\"9e5b\"),w=a(\"1c2a\"),O=a(\"188d\"),k=a(\"5c8a\"),j={name:\"EditBasicInfo\",bem:{editBasicInfo:\"page-brand-staff-edit-basic\"},serviceInject:function(){return{rules:b,pattern:v[\"a\"],editService:_[\"EditService\"],userService:c[\"a\"]}},rxState:function(){return{roleList:this.editService.roleList$,codeList:this.editService.codeList$,loading:this.editService.loading$,id_types:this.userService.getOptions$(\"staff.id_type\"),sexs:this.userService.getOptions$(\"staff.sex\"),nature_works:this.userService.getOptions$(\"staff.nature_work\")}},props:{data:{type:Object}},data:function(){var t=this.$stForm.create(),e=t.decorators(w[\"a\"]);return{form:t,decorators:e,fileList:[],faceList:[],countryList:[],id_type:\"\",country_code_id:\"\",value:\"\"}},components:{ShopSelect:y[\"a\"],DepartmentSelect:S[\"a\"],FaceUpload:O[\"a\"],StImageUpload:g[\"a\"]},computed:{isSuperAdmin:function(){return!!this.data.is_super_admin}},mounted:function(){var t=this;this.$nextTick().then((function(){var e=Object(k[\"a\"])(t.data);t.setData(e)}))},methods:{resetID:function(){this.form.setFieldsValue({id_number:void 0})},onChangeGetAvatar:function(t){this.fileList=Object(k[\"a\"])(t)},onChangeGetFace:function(t){this.faceList=Object(k[\"a\"])(t)},roleChange:function(t){t&&t.length>10&&t.pop()},onChange:function(t){this.value=t},onSelectIdtype:function(t){},saveAndGoNext:function(t){var e=this;this.form.validate().then((function(t){e.submit(t,1)}))},submit:function(t,e){var a=this;t.entry_date&&(t.entry_date=moment(t.entry_date).format(\"YYYY-MM-DD\")),t.album_id=this.data.album_id,t.image_avatar=this.fileList[0]||{},t.image_face=this.faceList[0]||{},t.country_code_id=this.country_code_id,t.id_type=this.id_type,t.department_id=+t.department_id,this.editService.updateBasicInfo(this.data.staff_id,t).subscribe((function(t){a.$emit(\"goNext\"),a.$emit(\"updateStaffInfo\")}))},setData:function(t){this.form.setFieldsValue({staff_name:t.staff_name,nickname:t.nickname,mobile:t.mobile,staff_num:t.staff_num,sex:t.sex,id_number:t.id_number,nature_work:t.nature_work||void 0,department_id:String(t.department_id)||void 0,role_id:t.role_id,shop_id:t.shop_id,entry_date:t.entry_date?moment(t.entry_date):void 0,mail:t.mail}),this.country_code_id=t.country_code_id,this.id_type=t.id_type,this.fileList=Array.isArray(t.image_avatar)?t.image_avatar:[t.image_avatar],this.faceList=Array.isArray(t.image_face)?t.image_face:[t.image_face]}}},x=j,C=a(\"2877\"),$=Object(C[\"a\"])(x,d,f,!1,null,null,null),I=$.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"st-form\",{staticClass:\"page-edit-container\",attrs:{form:t.form}},[a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"毕业院校\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.graduated_school,expression:\"decorators.graduated_school\"}],attrs:{placeholder:\"支持中英文、数字,不超过100个字\"}})],1),a(\"st-form-item\",{attrs:{label:\"学历\"}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.education,expression:\"decorators.education\"}],attrs:{placeholder:\"请选择\"}},t._l(t.educations,(function(e,n){return a(\"a-select-option\",{key:n,attrs:{value:+e.value}},[t._v(\"\\n            \"+t._s(e.label)+\"\\n          \")])})),1)],1),a(\"st-form-item\",{attrs:{label:\"生日\"}},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.birthday,expression:\"decorators.birthday\"}],staticStyle:{width:\"100%\"}})],1),a(\"st-form-item\",{attrs:{label:\"婚姻状况\"}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.marry_status,expression:\"decorators.marry_status\"}],attrs:{placeholder:\"请选择\"}},t._l(t.marry_status,(function(e,n){return a(\"a-select-option\",{key:n,attrs:{value:+e.value}},[t._v(\"\\n            \"+t._s(e.label)+\"\\n          \")])})),1)],1)],1),a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"毕业时间\"}},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.graduation_time,expression:\"decorators.graduation_time\"}],staticStyle:{width:\"100%\"}})],1),a(\"st-form-item\",{attrs:{label:\"专业\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.profession,expression:\"decorators.profession\"}],attrs:{placeholder:\"请输入专业名称\"}})],1),a(\"st-form-item\",{attrs:{label:\"籍贯\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.native_place,expression:\"decorators.native_place\"}],attrs:{placeholder:\"请输入籍贯\"}})],1),a(\"st-form-item\",{attrs:{label:\"子女状态\"}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.children_status,expression:\"decorators.children_status\"}],attrs:{placeholder:\"请选择\"}},t._l(t.children_status,(function(e,n){return a(\"a-select-option\",{key:n,attrs:{value:+e.value}},[t._v(\"\\n            \"+t._s(e.label)+\"\\n          \")])})),1)],1)],1)],1),a(\"a-row\",{staticClass:\"mg-t48\",attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"家庭住址\"}},[a(\"a-cascader\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.provinces,expression:\"decorators.provinces\"}],attrs:{options:t.regions,fieldNames:t.fieldNames,changeOnSelect:\"\",placeholder:\"请填写家庭住址\"}})],1),a(\"st-form-item\",{attrs:{label:\"详细住址\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.address,expression:\"decorators.address\"}],attrs:{placeholder:\"填写点什么吧\"}})],1),a(\"st-form-item\",{attrs:{label:\"备注\"}},[a(\"st-textarea\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.description,expression:\"decorators.description\"}],attrs:{maxlength:500,placeholder:\"填写点什么吧\"}})],1),t.isShowCoach?a(\"st-form-item\",{attrs:{label:\"对外展示\"}},[a(\"a-checkbox\",{attrs:{checked:t.checked},on:{change:t.checkShow}},[t._v(\"\\n          展示在小程序\\n        \")])],1):t._e()],1),a(\"a-col\",{attrs:{lg:10,xs:22,offset:2}})],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{offset:1}},[a(\"st-form-item\",{attrs:{labelFix:\"\"}},[a(\"st-button\",{attrs:{type:\"primary\",ghost:\"\"},on:{click:t.onClickBack}},[t._v(\"\\n          上一步\\n        \")]),a(\"st-button\",{staticClass:\"mg-l16\",attrs:{loading:t.loading,type:\"primary\"},on:{click:t.saveAndGoNext}},[t._v(\"\\n          \"+t._s(t.isPrivateCoach?\"保存，继续填写\":\"保存\")+\"\\n        \")])],1)],1)],1)],1)},N=[],D=a(\"62eb\"),L={name:\"EditDetailDetailedInfo\",serviceInject:function(){return{pattern:v[\"a\"],userService:c[\"a\"],region:D[\"a\"]}},rxState:function(){return{children_status:this.userService.getOptions$(\"staff.children_status\"),educations:this.userService.getOptions$(\"staff.education\"),marry_status:this.userService.getOptions$(\"staff.marry_status\")}},props:{data:{type:Object},loading:{type:Boolean},isPrivateCoach:{type:Boolean,default:!0},isShowCoach:{type:Boolean,default:!1}},data:function(){var t=this.$stForm.create(),e=t.decorators(w[\"a\"]);return{form:t,decorators:e,regions:[],fieldNames:{label:\"name\",value:\"id\",children:\"children\"},checked:!0}},mounted:function(){var t=this;this.$nextTick((function(){var e=Object(k[\"a\"])(t.data);t.setData(e)})),this.region.regionApi.getRegions().subscribe((function(e){t.regions=Object(k[\"a\"])(e)}))},methods:{onClickBack:function(){this.$emit(\"back\",1)},setData:function(t){this.form.setFieldsValue({graduated_school:t.graduated_school,graduation_time:t.graduation_time?moment(t.graduation_time):void 0,education:t.education||void 0,profession:t.profession,birthday:t.birthday?moment(t.birthday):void 0,native_place:t.native_place,marry_status:t.marry_status||void 0,children_status:t.children_status||void 0,address:t.address,description:t.description,provinces:[t.province_id,t.city_id,t.district_id]}),t.is_show?this.checked=!0:this.checked=!1},onChange:function(t){},goNext:function(){var t=this;this.form.validateFields((function(e,a){e||t.$emit(\"goNext\",{data:t.form.getFieldsValue()})}))},filterProvinces:function(t){return{province_id:t[0],city_id:t[1],district_id:t[2]}},checkShow:function(t){this.checked=t.target.checked},saveAndGoNext:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t,a){if(!t){var n=e.filterProvinces(a.provinces),r=Object.assign(a,n);r.birthday&&(r.birthday=r.birthday.format(\"YYYY-MM-DD\")),r.graduation_time&&(r.graduation_time=r.graduation_time.format(\"YYYY-MM-DD\")),r.is_show=e.checked?1:0,delete r.provinces,e.$emit(\"detailInfoSave\",{data:r})}}))}}},E=L,P=Object(C[\"a\"])(E,A,N,!1,null,null,null),B=P.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"st-form\",{staticClass:\"page-edit-coachInfo\",attrs:{form:t.form}},[a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:10,xs:22,offset:1}},[a(\"st-form-item\",{attrs:{label:\"从业时间\"}},[a(\"a-date-picker\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.employment_time,expression:\"decorators.employment_time\"}],staticStyle:{width:\"100%\"}})],1),a(\"st-form-item\",{attrs:{label:\"擅长的项目\"}},[a(\"a-select\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.specialty_id,expression:\"decorators.specialty_id\"}],attrs:{mode:\"multiple\",placeholder:\"请选择擅长的项目\"}},t._l(t.staffSpecialty,(function(e){return a(\"a-select-option\",{key:e.id,attrs:{value:e.id}},[t._v(\"\\n            \"+t._s(e.specialty_name)+\"\\n          \")])})),1)],1),a(\"st-form-item\",{attrs:{label:\"专业认证\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.certification_name,expression:\"decorators.certification_name\"}],staticStyle:{top:\"0\"},attrs:{placeholder:\"请输入专业证书名称\"},on:{pressEnter:t.onAddProfess}},[t.coachInfoData.certification_name.length<10?a(\"div\",{staticClass:\"add-profess-button\",attrs:{slot:\"addonAfter\"},on:{click:t.onAddProfess},slot:\"addonAfter\"},[t._v(\"\\n            新增\\n          \")]):t._e()]),a(\"div\",{staticClass:\"add-profess-card\"},t._l(t.coachInfoData.certification_name,(function(e,n){return a(\"div\",{key:n},[a(\"span\",[t._v(t._s(e))]),a(\"st-icon\",{staticStyle:{cursor:\"pointer\"},attrs:{type:\"anticon:close\"},on:{click:function(e){return t.onProfessRule(n)}}})],1)})),0)],1),a(\"st-form-item\",{attrs:{label:\"个人经历\"}},[a(\"st-textarea\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.introduction,expression:\"decorators.introduction\"}],attrs:{maxlength:500,rows:10,placeholder:\"填写点什么吧\"}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{lg:24,xs:22,offset:1}},[a(\"st-form-item\",{staticClass:\"page-image-personal\",attrs:{label:\"员工风采\"}},[a(\"st-image-upload\",{attrs:{width:\"100px\",height:\"100px\",list:t.image_personal,sizeLimit:2,placeholder:\"上传照片\",numLimit:10},on:{change:t.onChangeGetShowImage}})],1)],1)],1),a(\"a-row\",{attrs:{gutter:8}},[a(\"a-col\",{attrs:{offset:1}},[a(\"st-form-item\",{attrs:{labelFix:\"\"}},[a(\"st-button\",{staticClass:\"mg-r16\",attrs:{type:\"primary\",ghost:\"\",loading:t.loading},on:{click:t.onClickBack}},[t._v(\"\\n          上一步\\n        \")]),a(\"st-button\",{attrs:{type:\"primary\",loading:t.loading},on:{click:t.save}},[t._v(\"\\n          保存\\n        \")])],1)],1)],1)],1)},q=[],F=(a(\"ac6a\"),a(\"5df3\"),a(\"4f7f\"),a(\"75fc\")),T={name:\"EditDetailCoachInfo\",serviceInject:function(){return{pattern:v[\"a\"]}},components:{StImageUpload:g[\"a\"]},props:{data:{type:Object},loading:{type:Boolean},staffSpecialty:{type:Array,default:function(){return[]}}},data:function(){var t=this.$stForm.create(),e=t.decorators(w[\"a\"]);return{form:t,decorators:e,coachInfoData:{certification_name:[]},fileList:[],image_personal:[]}},mounted:function(){Object(k[\"a\"])(),this.setData(this.data)},methods:{onChangeGetShowImage:function(t){this.image_personal=Object(k[\"a\"])(t)},onChangeSpecialtyId:function(t){t.length>10&&t.pop()},checkShow:function(t){this.checked=t.target.checked},handleSpecialtyIdChange:function(t){},setData:function(t){this.form.setFieldsValue({employment_time:t.employment_time?moment(t.employment_time):void 0,introduction:t.introduction,specialty_id:t.specialty_id}),this.image_personal=t.image_personal,this.coachInfoData.certification_name=t.certification_name?t.certification_name:[]},onClickBack:function(){this.$emit(\"back\",1)},save:function(t){var e=this;this.form.validate().then((function(t){t.employment_time?t.employment_time=t.employment_time.format(\"YYYY-MM-DD\"):t.employment_time=void 0,t.certification_name=e.coachInfoData.certification_name,t.image_personal=e.image_personal,t.album_id=e.data.album_id,e.$emit(\"coachInfoSave\",{data:t})}))},onAddProfess:function(){var t=this;this.form.validate([\"certification_name\"]).then((function(e){var a=Object(F[\"a\"])(t.coachInfoData.certification_name);e.certification_name&&(a.push(e.certification_name),t.coachInfoData.certification_name=Object(F[\"a\"])(new Set(a)),t.form.setFieldsValue({certification_name:\"\"}))}))},onProfessRule:function(t){this.coachInfoData.certification_name.splice(t,1)},upload:function(t){var e=this;this.OSS.put({file:t.file}).subscribe({next:function(t){e.key=t.fileKey,e.MessageService.success({content:\"success: \".concat(t)}),e.fileList.push({url:\"http://styd-saas-test.oss-cn-shanghai.aliyuncs.com/\\n            \".concat(t.fileKey)}),e.loading=!1},error:function(t){e.MessageService.error({content:\"Error \".concat(t.message)}),e.loading=!1}})},handleCancel:function(){this.previewVisible=!1},handlePreview:function(t){this.previewImage=t.url||t.thumbUrl,this.previewVisible=!0},handleChange:function(t){var e=t.fileList;this.fileList=e}}},M=T,Q=Object(C[\"a\"])(M,R,q,!1,null,null,null),U=Q.exports,V={name:\"EditStaff\",serviceInject:function(){return{userService:c[\"a\"],editService:_[\"EditService\"]}},rxState:function(){return{loading:this.editService.loading$,staffInfo:this.editService.staffInfo$,codeList:this.editService.codeList$,staffSpecialty:this.editService.staffSpecialty$}},bem:{b:\"page-add-staff\",bstep:\"page-add-staff-steps\",bHeader:\"default-brand-header\"},components:{EditDetailBasicsInfo:I,EditDetailDetailedInfo:B,EditDetailCoachInfo:U},computed:{isShowCoach:function(){return 0!==this.staffInfo.identity.length&&(this.staffInfo.identity.includes(3)||this.staffInfo.identity.includes(4))},isPrivateCoach:function(){return 0!==this.staffInfo.identity.length&&this.staffInfo.identity.includes(4)},id:function(){return this.staffInfo.staff_id}},watch:{isPrivateCoach:function(t){t&&(this.stepsSpan=12,this.stepArr.pop())}},data:function(){return{stepsSpan:18,currentIndex:0,stepArr:[{title:\"基础信息\",key:0},{title:\"详细信息\",key:1},{title:\"\".concat(this.$c(\"coach\"),\"信息\"),key:2}]}},mounted:function(){var t=this.$searchQuery.currentIndex;this.isPrivateCoach||(this.stepsSpan=12,this.stepArr.pop()),t&&(this.currentIndex=Number(t))},methods:{updateStaffInfo:function(){this.editService.editStaffInfo(this.id).subscribe()},onDetailInfoSave:function(t){var e=this;this.isShowCoach||delete t.data.is_show,this.editService.updateDetailedInfo(this.id,t.data).subscribe((function(){e.isPrivateCoach?(e.updateStaffInfo(),e.goNext()):e.$router.push({name:\"brand-staff-department\"})}))},onCoachInfoSave:function(t){var e=this;this.editService.updateCoachInfo(this.id,t.data).subscribe((function(){e.$router.push({name:\"brand-staff-department\"})}))},goNext:function(){this.currentIndex<2&&(this.currentIndex=this.currentIndex+1)},onBack:function(t){this.currentIndex=this.currentIndex-t},changeStep:function(t){k[\"a\"],this.currentIndex=Object(k[\"a\"])(t)}}},J=V,Y=Object(C[\"a\"])(J,s,o,!1,null,null,null);e[\"default\"]=Y.exports},\"52c6\":function(t,e,a){\"use strict\";var n,r,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"st-modal\",{attrs:{title:\"绑定实体卡\",size:\"small\"},on:{ok:t.save},model:{value:t.show,callback:function(e){t.show=e},expression:\"show\"}},[a(\"div\",{staticClass:\"modal-bind-entity-card\"},[a(\"staff-info\",{attrs:{staff:t.staff}}),t.staff.has_card?a(\"a-row\",{staticClass:\"staff-card  mg-b24\"},[a(\"a-col\",{staticClass:\"pd-x8 pd-y16\",attrs:{span:24}},[a(\"div\",{staticClass:\"card\"},[a(\"span\",{staticClass:\"label\"},[t._v(\"当前绑定实体卡号：\")]),a(\"span\",{staticClass:\"vlaue\"},[t._v(t._s(t.staff.card_number))])]),a(\"div\",{staticClass:\"card mg-t8\"},[a(\"span\",{staticClass:\"label\"},[t._v(\"物理ID：\")]),a(\"span\",{staticClass:\"vlaue\"},[t._v(t._s(t.staff.physical_number))])])])],1):t._e(),a(\"a-row\",[a(\"st-form\",{staticClass:\"modal-bind-entity-card__form\",attrs:{form:t.form,labelWidth:\"68px\"},on:{submit:t.save}},[a(\"st-form-item\",{attrs:{label:\"实体卡号：\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.card_number,expression:\"decorators.card_number\"}],attrs:{placeholder:\"请输入实体卡号\"}})],1),a(\"st-form-item\",{staticClass:\"mg-b0\",attrs:{label:\"物理ID：\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.physical_number,expression:\"decorators.physical_number\"}],attrs:{placeholder:\"请将实体卡置于读卡器上\"}})],1)],1)],1)],1)])},s=[],o=(a(\"8e6e\"),a(\"ac6a\"),a(\"456d\"),a(\"bd86\")),c=a(\"7a7f\"),d=a(\"d225\"),f=a(\"b0b4\"),u=a(\"9ab4\"),l=a(\"0cd5\"),p=a(\"dcb5\"),m=a(\"e69b\"),h=a(\"c4cc\"),v=function(){function t(e,a){Object(d[\"a\"])(this,t),this.staffApi=e,this.msg=a}return Object(f[\"a\"])(t,[{key:\"putStaffBindPhysical\",value:function(t){var e=this;return this.staffApi.putStaffBindPhysical(t).pipe(Object(h[\"a\"])((function(t){e.msg.success({content:\"绑定实体卡成功\"})})))}}]),t}();v=Object(u[\"b\"])([Object(l[\"b\"])(),Object(u[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(n=\"undefined\"!==typeof p[\"k\"]&&p[\"k\"])?n:Object,\"function\"===typeof(r=\"undefined\"!==typeof m[\"a\"]&&m[\"a\"])?r:Object])],v);var b=function(t){return{card_number:{rules:[{required:!0,message:\"请输入实体卡号\"}]},physical_number:{rules:[{required:!0,message:\"请输入物理ID\"}]}}};function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(Object(a),!0).forEach((function(e){Object(o[\"a\"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var y={name:\"BindEntityCard\",serviceInject:function(){return{bindEntityCardService:v}},data:function(){var t=this.$stForm.create(),e=t.decorators(b);return{form:t,decorators:e,show:!1}},props:{staff:{type:Object,default:function(){}}},components:{StaffInfo:c[\"a\"]},methods:{save:function(t){var e=this;t.preventDefault(),this.form.validate().then((function(t){var a=g({id:e.staff.id},t);e.bindEntityCardService.putStaffBindPhysical(a).subscribe((function(){e.show=!1,e.$router.reload()}))}))}}},S=y,w=a(\"2877\"),O=Object(w[\"a\"])(S,i,s,!1,null,null,null);e[\"a\"]=O.exports},\"53de\":function(t,e,a){\"use strict\";var n,r,i,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"st-modal\",{staticClass:\"modal-staff-delete\",attrs:{title:\"管理登录账号\",size:\"small\",confirmLoading:t.openRepassword?t.loading.getRePassword:t.loading.setAccount},on:{ok:t.onSubmit},model:{value:t.show,callback:function(e){t.show=e},expression:\"show\"}},[a(\"staff-info\",{attrs:{staff:t.staff}}),a(\"div\",[a(\"st-form\",{attrs:{form:t.form}},[a(\"st-form-item\",{attrs:{label:\"系统权限\"}},[a(\"a-checkbox\",{attrs:{checked:t.openJurisdiction},on:{change:function(e){return e.stopPropagation(),t.changePermission(e)}}},[t._v(\"\\n          开通系统使用权限\\n        \")])],1),t.hasAccountName?a(\"st-form-item\",{attrs:{label:\"登录账号\"}},[a(\"span\",[t._v(t._s(t.rePasswordInfo.account_name))]),a(\"span\",{staticStyle:{color:\"#1890FF\"},on:{click:t.onClickRePassword}},[t._v(\"\\n          重置密码\\n        \")])]):t._e(),!t.hasAccountName&&t.openJurisdiction?a(\"st-form-item\",{attrs:{label:\"登录账号\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.name,expression:\"decorators.name\"}],attrs:{placeholder:\"6～18个字符，可使用字母，数字，下划线\",autocomplete:\"off\"}})],1):t._e(),!t.hasAccountName&&t.openJurisdiction?a(\"st-form-item\",{attrs:{label:\"登录密码\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.password,expression:\"decorators.password\"}],attrs:{type:\"password\",autocomplete:\"new_password\",placeholder:\"6~15个字符，区分大小写\"}})],1):t._e(),!t.hasAccountName&&t.openJurisdiction?a(\"st-form-item\",{attrs:{label:\"确认密码\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.repeat_password,expression:\"decorators.repeat_password\"}],attrs:{type:\"password\",autocomplete:\"new_password\",placeholder:\"请再次填写密码\"}})],1):t._e(),t.openRepassword?a(\"st-form-item\",{attrs:{label:\"登录密码\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.password,expression:\"decorators.password\"}],attrs:{placeholder:\"6~15个字符，区分大小写\",type:\"password\",autocomplete:\"new_password\"}})],1):t._e(),t.openRepassword?a(\"st-form-item\",{attrs:{label:\"确认密码\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.repeat_password,expression:\"decorators.repeat_password\"}],attrs:{placeholder:\"请再次填写密码\",type:\"password\",autocomplete:\"new_password\"}})],1):t._e(),t.bindAccount?a(\"st-form-item\",{attrs:{label:\"账号绑定\"}},[t.rePasswordInfo.wechat?a(\"div\",[a(\"span\",[t._v(\"绑定微信号\")]),a(\"span\",[t._v(t._s(t.rePasswordInfo.wechat))])]):t._e(),t.rePasswordInfo.mail?a(\"div\",[a(\"span\",[t._v(\"绑定邮箱\")]),a(\"span\",[t._v(t._s(t.rePasswordInfo.mail))])]):t._e(),t.rePasswordInfo.phone?a(\"div\",[a(\"span\",[t._v(\"绑定手机\")]),a(\"span\",[t._v(t._s(t.rePasswordInfo.phone))])]):t._e(),t.rePasswordInfo.QQ?a(\"div\",[a(\"span\",[t._v(\"绑定qq\")]),a(\"span\",[t._v(t._s(t.rePasswordInfo.QQ))])]):t._e()]):t._e()],1)],1)],1)},o=[],c=(a(\"8e6e\"),a(\"ac6a\"),a(\"456d\"),a(\"7f7f\"),a(\"bd86\")),d=a(\"7a7f\"),f=a(\"d225\"),u=a(\"b0b4\"),l=a(\"9ab4\"),p=a(\"0cd5\"),m=a(\"df29\"),h=a(\"dcb5\"),v=a(\"c4cc\"),b=a(\"e69b\"),_=function(){function t(e,a){Object(f[\"a\"])(this,t),this.staffApi=e,this.msg=a,this.rePasswordInfo$=new m[\"d\"]({}),this.loading$=new m[\"d\"]({})}return Object(u[\"a\"])(t,[{key:\"getRePassword\",value:function(t){var e=this;return this.staffApi.getRePassword(t).pipe(Object(v[\"a\"])((function(t){e.rePasswordInfo$.commit((function(){return t.account}))})))}},{key:\"setAccount\",value:function(t){var e=this;return this.staffApi.setAccount(t).pipe(Object(v[\"a\"])((function(t){e.msg.success({content:\"创建账号成功\"})})))}},{key:\"rePassword\",value:function(t){var e=this;return this.staffApi.rePassword(t).pipe(Object(v[\"a\"])((function(t){e.msg.success({content:\"修改密码成功\"})})))}},{key:\"updatepermission\",value:function(t,e){var a=this;return this.staffApi.updatepermission(t,e).pipe(Object(v[\"a\"])((function(t){a.msg.success({content:\"修改账号权限成功\"})})))}}]),t}();Object(l[\"b\"])([Object(m[\"c\"])(),Object(l[\"d\"])(\"design:type\",Function),Object(l[\"d\"])(\"design:paramtypes\",[String]),Object(l[\"d\"])(\"design:returntype\",void 0)],_.prototype,\"getRePassword\",null),Object(l[\"b\"])([Object(m[\"c\"])(),Object(l[\"d\"])(\"design:type\",Function),Object(l[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(n=\"undefined\"!==typeof h[\"RePasswordInput\"]&&h[\"RePasswordInput\"])?n:Object]),Object(l[\"d\"])(\"design:returntype\",void 0)],_.prototype,\"setAccount\",null),_=Object(l[\"b\"])([Object(p[\"b\"])(),Object(l[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(r=\"undefined\"!==typeof h[\"k\"]&&h[\"k\"])?r:Object,\"function\"===typeof(i=\"undefined\"!==typeof b[\"a\"]&&b[\"a\"])?i:Object])],_);a(\"3b2b\");var g=function(t){var e=new RegExp(/^[A-Za-z0-9\\_]{6,15}$/);return{name:{rules:[{required:!0,message:\"请输入登录账户\"},{pattern:e,message:\"请输入6~15个字符\"}]},password:{rules:[{validator:function(t,e,a){return e?e.length<6||e.length>15?\"请输入正确格式登录密码\":void 0:\"请输入登录密码\"}}]},repeat_password:{rules:[{validator:function(t,e,a){return e?e.length<6||e.length>15?\"请输入正确格式登录密码\":e!==a.password?\"两次密码输入不一致\":void 0:\"请输入登录密码\"}}]}}};function y(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function S(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?y(Object(a),!0).forEach((function(e){Object(c[\"a\"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var w={name:\"RePassword\",serviceInject:function(){return{rePasswordService:_}},rxState:function(){return{loading:this.rePasswordService.loading$,rePasswordInfo:this.rePasswordService.rePasswordInfo$}},components:{StaffInfo:d[\"a\"]},props:{staff:{type:Object,default:function(){}}},data:function(){var t=this.$stForm.create(),e=t.decorators(g);return{form:t,decorators:e,openJurisdiction:!1,openRepassword:!1,show:!1}},computed:{is_permission:function(){return this.rePasswordInfo.is_permission},hasAccountName:function(){return this.rePasswordInfo.account_name},bindAccount:function(){return this.rePasswordInfo&&this.rePasswordInfo.wechat&&this.rePasswordInfo.mail&&this.rePasswordInfo.phone&&this.rePasswordInfo.QQ}},mounted:function(){this.init()},methods:{changePermission:function(t){this.openJurisdiction=t.target.checked},init:function(){var t=this;this.rePasswordService.getRePassword(this.staff.id).subscribe((function(e){e=e.account,t.openJurisdiction=!!e.is_permission;var a={password:e.password,repeat_password:e.repeat_password};t.hasAccountName&&(a=Object.assign(a,{name:e.account_name})),t.openRepassword&&t.form.setFieldsValue(a)}))},onClickRePassword:function(){this.openRepassword=!0},onSubmit:function(){var t=this;this.form.validate().then((function(e){var a=S({id:t.staff.id,is_permission:+t.openJurisdiction},e);t.hasAccountName?(e.password&&e.repeat_password?t.rePasswordService.rePassword(a).subscribe((function(){t.show=!1,t.$router.reload()})):t.rePasswordService.updatepermission(t.staff.id,{is_permission:+t.openJurisdiction}).subscribe((function(){t.show=!1,t.$router.reload()})),t.show=!1):e.name&&e.password&&e.repeat_password?t.rePasswordService.setAccount(a).subscribe((function(){t.show=!1,t.$router.reload()})):t.rePasswordService.updatepermission(t.staff.id,{is_permission:+t.openJurisdiction}).subscribe((function(){t.show=!1,t.$router.reload()}))}))}}},O=w,k=a(\"2877\"),j=Object(k[\"a\"])(O,s,o,!1,null,null,null);e[\"a\"]=j.exports},\"57a3\":function(t,e,a){\"use strict\";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{class:t.role()},[a(\"div\",{class:t.roleList()},[a(\"header\",{class:t.roleList(\"search\")}),a(\"main\",{class:t.roleList(\"tree\")},[a(\"st-t4\",[t._v(\"角色 (\"+t._s(t.stat.used)+\"/\"+t._s(t.stat.total)+\")\")]),a(\"ul\",t._l(t.roles,(function(e,n){return a(\"li\",{key:e.id,staticClass:\"item\",class:{active:0===n},attrs:{id:e.id},on:{click:function(a){return t.getTreeNodeOnclick(e,a)}}},[a(\"div\",[a(\"span\",[t._v(t._s(e.name))]),a(\"span\",[t._v(\"（\"+t._s(e.cnt)+\"）\")])]),e.is_enabled?a(\"div\",[a(\"st-more-dropdown\",{staticClass:\"role-opreation\",class:{active:0===n},staticStyle:{\"margin-left\":\"12px\"}},[t.auth.edit?a(\"a-menu-item\",{on:{click:function(a){return t.onClickEditRole(e.id)}}},[t._v(\"\\n                编辑\\n              \")]):t._e(),t.auth.del&&e.can_del?a(\"a-menu-item\",{on:{click:function(a){return t.onClickDelRole(e.id)}}},[t._v(\"\\n                删除\\n              \")]):t._e()],1)],1):t._e()])})),0)],1),t.auth.add?a(\"footer\",{class:t.roleList(\"add\"),on:{click:t.onCLickAddRole}},[a(\"a\",[t._v(\"新增角色\")])]):t._e()]),a(\"div\",{class:t.roleContent()},[a(\"router-view\")],1)])},r=[],i=(a(\"ac6a\"),a(\"9757\")),s={name:\"RoleConfig\",bem:{role:\"page-role\",roleList:\"page-role-list\",roleView:\"page-role-view\",roleContent:\"page-role-content\"},serviceInject:function(){return{roleService:i[\"RoleService\"]}},rxState:function(){return{roles:this.roleService.roleList$,stat:this.roleService.stat$,auth:this.roleService.auth$}},data:function(){return{isActive:!1}},methods:{onClickEditRole:function(t){this.$router.push({name:\"brand-staff-role-edit\",query:{roleId:t}})},onCLickAddRole:function(){this.$router.push({name:\"brand-staff-role-add\"})},onClickDelRole:function(t){this.roleService.del({role_id:t}).subscribe()},getTreeNodeOnclick:function(t,e){this.$nextTick().then((function(){var t=document.querySelectorAll(\".page-role-list__tree .item\"),a=document.querySelectorAll(\".page-role-list__tree .item .role-opreation\");a.forEach((function(t){t.setAttribute(\"class\",\"role-opreation\")})),t.forEach((function(t){t.setAttribute(\"class\",\"item pd-y8  pd-x16\")})),e.currentTarget.querySelector(\".role-opreation\").setAttribute(\"class\",\"role-opreation active\"),e.currentTarget.setAttribute(\"class\",\"item active pd-y8  pd-x16\")})),this.$router.push({name:\"brand-staff-role-info\",query:{id:t.id}})}}},o=s,c=a(\"2877\"),d=Object(c[\"a\"])(o,n,r,!1,null,null,null);e[\"default\"]=d.exports},\"5edb\":function(t,e,a){\"use strict\";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"st-panel-layout\",{staticClass:\"pages-staffdata-container\"},[a(\"st-panel\",{staticClass:\"pages-staffdata-header\"},[a(\"a-row\",[a(\"a-col\",{staticClass:\"pages-staffdata-header-detail\",attrs:{span:15}},[a(\"div\",{staticClass:\"staff-avatar-container st-preview-item\"},[a(\"img\",{attrs:{src:t.image_avatar_url}}),a(\"div\",{staticClass:\"staff-avatar-tip\"},[t._v(\"\\n            \"+t._s(t.info.work_status.name)+\"\\n            \"),t.info.nature_work.name?a(\"span\",[t._v(\"\\n              /\"+t._s(t.info.nature_work.name)+\"\\n            \")]):t._e()])]),a(\"div\",{staticClass:\"staff-info-container\"},[a(\"div\",{staticClass:\"staff-info-name\"},[t._v(\"\\n            \"+t._s(t.info.staff_name)+\"\\n            \"),t.info.nickname?a(\"span\",[t._v(\"（\"+t._s(t.info.nickname)+\"）\")]):t._e(),a(\"st-icon\",{style:1===t.info.sex?\"color:#FF5E41\":\"color:#3F66F6\",attrs:{type:1===t.info.sex?\"female\":\"male\"}})],1),a(\"div\",{staticClass:\"staff-info-cont\"},[a(\"span\",{staticClass:\"mg-r24\"},[t._v(\"手机号：\"+t._s(t.info.mobile))]),t.info.staff_num?a(\"span\",{staticClass:\"mg-r24\"},[t._v(\"\\n              工号：\"+t._s(t.info.staff_num)+\"\\n            \")]):t._e(),t.info.coach_level?a(\"span\",[t._v(\"\\n              \"+t._s(t.$c(\"coach\"))+\"等级：\"+t._s(t.info.coach_level)+\"\\n            \")]):t._e()]),a(\"div\",{staticClass:\"staff-info-shops\"},[a(\"span\",{staticClass:\"mg-r24\"},[t._v(\"所在部门：\"+t._s(t.info.department))]),a(\"span\",[t._v(\"所在门店：\"+t._s(t.info.shop_num)+\"家门店\")])])])]),a(\"a-col\",{staticStyle:{\"text-align\":\"right\"},attrs:{span:9}},[a(\"st-btn-actions\",{attrs:{options:t.btnOptions}})],1)],1)],1),a(\"st-panel\",{attrs:{app:\"\",tabs:t.identity}},[a(\"div\",{attrs:{slot:\"actions\"},slot:\"actions\"}),a(\"router-view\")],1)],1)},r=[],i=(a(\"1c4c\"),a(\"ac6a\"),a(\"5df3\"),a(\"4f7f\"),a(\"c6d4\")),s=a(\"52c6\"),o=a(\"53de\"),c=a(\"39a6\"),d=a(\"b875\"),f=a(\"c0d5\"),u=a(\"58c8\"),l=a(\"89c8\"),p={modals:{StaffBindEntityCard:s[\"a\"],StaffRePassword:o[\"a\"],StaffReinstatement:c[\"a\"],StaffSalaryAccountSetting:d[\"a\"],StaffTurnover:f[\"a\"],StaffUpdateStaffPosition:u[\"a\"]},serviceInject:function(){return{infoService:i[\"InfoService\"],departmentService:l[\"DepartmentService\"]}},rxState:function(){return{info:this.infoService.info$,auth:this.infoService.auth$}},data:function(){return{identity:[],basic:{label:\"员工资料\",route:{name:\"brand-staff-info-basic\",query:{id:this.$searchQuery.id}}},course:{label:\"上课记录\",route:{name:\"brand-staff-info-course\",query:{id:this.$searchQuery.id}}},follow:{label:\"跟进记录\",route:{name:\"brand-staff-info-follow\",query:{id:this.$searchQuery.id}}},sold:{label:\"售卖订单\",route:{name:\"brand-staff-info-sold\",query:{id:this.$searchQuery.id}}},member:{label:\"服务课程\",route:{name:\"brand-staff-info-member\",query:{id:this.$searchQuery.id}}}}},computed:{image_avatar_url:function(){return this.info&&this.info.image_avatar&&this.info.image_avatar.image_url||\"\"},btnOptions:function(){return[{text:\"编辑资料\",click:this.editStaffInfo,if:this.auth[\"brand:staff:staff|edit\"]},{text:\"绑定实体卡\",click:this.openModalBindCard,if:this.auth[\"brand:staff:staff|bind_card\"]},{text:\"重绑实体卡\",click:this.openModalRebindCard,if:this.auth[\"brand:staff:staff|rebind_card\"]},{text:\"职位和薪资变更\",click:this.openModalPosition,if:this.auth[\"brand:staff:staff|position\"]},{text:\"离职\",click:this.openModalLeave,if:this.auth[\"brand:staff:staff|leave\"]},{text:\"复职\",click:this.openModalReinstate,if:this.auth[\"brand:staff:staff|reinstate\"]},{text:\"管理登录账户\",click:this.openModalSave,if:this.auth[\"brand:staff:staff:account|save\"]},{text:\"设置提现账户\",click:this.openModalSalary,if:this.auth[\"brand:staff:staff|salary\"]},{text:\"清空指纹信息\",click:this.onClearFingerprintInfo,if:this.auth[\"brand:staff:staff|finger_del\"]},{text:\"清空硬件密码\",click:this.onClearHardwarePassword,if:this.auth[\"brand:staff:staff|cabinet_pwd_del\"]}]}},created:function(){var t=this,e=this.info.identity;e=e.map((function(t){return t.id}));var a=new Set;this.setIndentyList([\"basic\"],a),Array.isArray(e)&&e.length&&e.forEach((function(e){2===e?t.setIndentyList([\"member\",\"sold\"],a):3===e?t.setIndentyList([\"course\"],a):4===e&&t.setIndentyList([\"course\",\"follow\",\"member\",\"sold\"],a)})),this.identity=Array.from(a).map((function(e){return t[e]}))},methods:{setIndentyList:function(t,e){var a=this;t.forEach((function(t){return e.add(t,a[t])}))},openModal:function(t){var e={bind_card:\"staff-bind-entity-card\",rebind_card:\"staff-bind-entity-card\",leave:\"staff-turnover\",reinstate:\"staff-reinstatement\",save:\"staff-re-password\",position:\"staff-update-staff-position\",salary:\"staff-salary-account-setting\"},a=e[t];this.$modalRouter.push({name:a,props:{staff:this.info}})},openModalBindCard:function(){this.openModal(\"bind_card\")},openModalRebindCard:function(){this.openModal(\"rebind_card\")},openModalLeave:function(){this.openModal(\"leave\")},openModalReinstate:function(){this.openModal(\"reinstate\")},openModalSave:function(){this.openModal(\"save\")},openModalPosition:function(){this.openModal(\"position\")},openModalSalary:function(){this.openModal(\"salary\")},editStaffInfo:function(){this.$router.push({name:\"brand-staff-edit\",query:{id:this.info.id}})},onClearFingerprintInfo:function(){var t=this;this.$confirm({title:\"提示信息\",content:\"确认清空指纹信息？\",onOk:function(){t.departmentService.deleteStaffFinger(t.info.id).subscribe()}})},onClearHardwarePassword:function(){var t=this;this.$confirm({title:\"提示信息\",content:\"确认清空硬件密码吗？\",onOk:function(){t.departmentService.deleteStaffCabinetPassword(t.info.id).subscribe()}})}}},m=p,h=a(\"2877\"),v=Object(h[\"a\"])(m,n,r,!1,null,null,null);e[\"default\"]=v.exports},\"6fef\":function(t,e,a){\"use strict\";a.r(e),a.d(e,\"AddService\",(function(){return b}));var n,r,i,s,o=a(\"d225\"),c=a(\"b0b4\"),d=a(\"9ab4\"),f=a(\"3bc6\"),u=a(\"0cd5\"),l=a(\"df29\"),p=a(\"c4cc\"),m=a(\"cc76\"),h=a(\"dcb5\"),v=a(\"54da\"),b=function(){function t(e,a,n){Object(o[\"a\"])(this,t),this.shopStaffApi=e,this.staffApi=a,this.roleApi=n,this.loading$=new l[\"d\"]({}),this.codeList$=new l[\"d\"]([]),this.roleList$=new l[\"d\"]([]),this.department$=new l[\"d\"]([])}return Object(c[\"a\"])(t,[{key:\"getCountryCodes\",value:function(){var t=this;return this.staffApi.getCountryCodes().pipe(Object(p[\"a\"])((function(e){t.codeList$.commit((function(){var t=e.code_list;return t.length||t.push({phone_code:e.default_code,code_id:e.default_code_id}),t}))})))}},{key:\"getNormalList\",value:function(){var t=this;return this.roleApi.getNormalList().pipe(Object(p[\"a\"])((function(e){t.roleList$.commit((function(){return e.roles}))})))}},{key:\"getStaffDepartment\",value:function(){var t=this;return this.shopStaffApi.getStaffDepartmentList().pipe(Object(p[\"a\"])((function(e){t.department$.commit((function(){return e.department}))})))}},{key:\"addStaff\",value:function(t){return this.staffApi.addStaffBasicInfo(t)}},{key:\"init\",value:function(){return Object(v[\"a\"])(this.getNormalList(),this.getCountryCodes(),this.getStaffDepartment())}},{key:\"beforeRouteEnter\",value:function(t,e){return this.init()}}]),t}();Object(d[\"b\"])([Object(l[\"c\"])(),Object(d[\"d\"])(\"design:type\",Function),Object(d[\"d\"])(\"design:paramtypes\",[]),Object(d[\"d\"])(\"design:returntype\",void 0)],b.prototype,\"getCountryCodes\",null),Object(d[\"b\"])([Object(l[\"c\"])(),Object(d[\"d\"])(\"design:type\",Function),Object(d[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(n=\"undefined\"!==typeof h[\"AddStaffBasicInfoParams\"]&&h[\"AddStaffBasicInfoParams\"])?n:Object]),Object(d[\"d\"])(\"design:returntype\",void 0)],b.prototype,\"addStaff\",null),b=Object(d[\"b\"])([Object(u[\"b\"])(),Object(d[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(r=\"undefined\"!==typeof m[\"g\"]&&m[\"g\"])?r:Object,\"function\"===typeof(i=\"undefined\"!==typeof h[\"k\"]&&h[\"k\"])?i:Object,\"function\"===typeof(s=\"undefined\"!==typeof f[\"b\"]&&f[\"b\"])?s:Object])],b)},7643:function(t,e,a){\"use strict\";var n,r,i;a.d(e,\"c\",(function(){return n})),a.d(e,\"a\",(function(){return r})),a.d(e,\"b\",(function(){return i})),function(t){t[t[\"WORKING\"]=1]=\"WORKING\",t[t[\"DEPARTURE\"]=2]=\"DEPARTURE\"}(n||(n={})),function(t){t[t[\"PERSONAL\"]=1]=\"PERSONAL\",t[t[\"PERSONAL_TEAM\"]=2]=\"PERSONAL_TEAM\",t[t[\"TEAM\"]=3]=\"TEAM\"}(r||(r={})),function(t){t[t[\"STAFF\"]=1]=\"STAFF\",t[t[\"SALE\"]=2]=\"SALE\",t[t[\"TEAM_COACH\"]=3]=\"TEAM_COACH\",t[t[\"PARSONAL_COACH\"]=4]=\"PARSONAL_COACH\"}(i||(i={}))},\"89c8\":function(t,e,a){\"use strict\";a.r(e),a.d(e,\"DepartmentService\",(function(){return $}));var n,r,i,s=a(\"75fc\"),o=a(\"d225\"),c=a(\"b0b4\"),d=a(\"9ab4\"),f=a(\"0cd5\"),u=a(\"df29\"),l=a(\"c4cc\"),p=a(\"d792\"),m=a(\"2cbb\"),h=a(\"dcb5\"),v=a(\"e69b\"),b=function(){function t(e,a,n){Object(o[\"a\"])(this,t),this.staffApi=e,this.msg=a,this.authService=n,this.loading$=new u[\"d\"]({}),this.departmentList$=new u[\"d\"]([]),this.auth$=this.authService.authMap$({departmentAdd:\"brand:auth:department|add\",departmentDel:\"brand:auth:department|del\",departmentEdit:\"brand:auth:department|edit\"})}return Object(c[\"a\"])(t,[{key:\"getDepartmentList\",value:function(){var t=this;return this.staffApi.getDepartmentList().pipe(Object(l[\"a\"])((function(e){t.departmentList$.commit((function(){return e.department}))})))}},{key:\"addDepartment\",value:function(t){var e=this;return this.staffApi.addDepartment(t).pipe(Object(p[\"a\"])((function(){return e.getDepartmentList()})),Object(l[\"a\"])((function(t){e.msg.success({content:\"新增成功！！！\"})})))}},{key:\"updateDepartment\",value:function(t){var e=this;return this.staffApi.updateDepartment(t).pipe(Object(p[\"a\"])((function(){return e.getDepartmentList()})),Object(l[\"a\"])((function(t){e.msg.success({content:\"修改成功！！！\"})})))}},{key:\"delDepartment\",value:function(t){var e=this;return this.staffApi.delDepartment(t).pipe(Object(p[\"a\"])((function(){return e.getDepartmentList()})),Object(l[\"a\"])((function(t){e.msg.success({content:\"部门已删除\"})})))}}]),t}();b=Object(d[\"b\"])([Object(f[\"b\"])(),Object(d[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(n=\"undefined\"!==typeof h[\"k\"]&&h[\"k\"])?n:Object,\"function\"===typeof(r=\"undefined\"!==typeof v[\"a\"]&&v[\"a\"])?r:Object,\"function\"===typeof(i=\"undefined\"!==typeof m[\"a\"]&&m[\"a\"])?i:Object])],b);var _,g,y,S,w,O,k,j=a(\"cc76\"),x=a(\"3bc6\"),C=a(\"54da\"),$=function(){function t(e,a,n,r,i,s){Object(o[\"a\"])(this,t),this.staffApi=e,this.roleApi=a,this.msg=n,this.shopStaffApi=r,this.depService=i,this.authService=s,this.loading$=new u[\"d\"]({}),this.staffList$=new u[\"d\"]([]),this.roleOptions$=new u[\"d\"]([]),this.page$=new u[\"d\"]({}),this.auth$=this.authService.authMap$({join:\"brand:staff:staff|join\",add:\"brand:staff:staff|add\",import:\"brand:staff:staff|import\",departmentAdd:\"brand:auth:department|add\",departmentDel:\"brand:auth:department|del\",departmentEdit:\"brand:auth:department|edit\"}),this.departmentList$=new u[\"d\"]([]),this.departmentSearchList$=new u[\"d\"]([])}return Object(c[\"a\"])(t,[{key:\"getStaffList\",value:function(t){var e=this;return this.staffApi.getStaffBrandList(t).pipe(Object(l[\"a\"])((function(t){e.staffList$.commit((function(){return t.list})),e.page$.commit((function(){return t.page}))})))}},{key:\"getDepartmentList\",value:function(){var t=this;return this.depService.getDepartmentList().pipe(Object(l[\"a\"])((function(e){t.departmentList$.commit((function(){return e.department}))})))}},{key:\"addDepartment\",value:function(t){var e=this;return this.staffApi.addDepartment(t).pipe(Object(l[\"a\"])((function(t){e.msg.success({content:\"新增成功！！！\"})})))}},{key:\"updateDepartment\",value:function(t){var e=this;return this.staffApi.updateDepartment(t).pipe(Object(l[\"a\"])((function(t){e.msg.success({content:\"修改成功！！！\"})})))}},{key:\"delDepartment\",value:function(t){var e=this;return this.staffApi.delDepartment(t).pipe(Object(l[\"a\"])((function(t){e.msg.success({content:\"部门已删除\"})})))}},{key:\"searchDepartment\",value:function(t){var e=this;return this.shopStaffApi.searchDepartment({keyword:t}).pipe(Object(l[\"a\"])((function(t){e.departmentSearchList$.commit((function(){return[{id:\"-1\",name:\"全部部门\"}].concat(Object(s[\"a\"])(t.department))}))})))}},{key:\"getRoleList\",value:function(){var t=this;return this.roleApi.getRoleOptions(\"brand\").pipe(Object(l[\"a\"])((function(e){t.roleOptions$.commit((function(){return[{id:-1,name:\"全部角色\"}].concat(Object(s[\"a\"])(e.roles))}))})))}},{key:\"deleteStaffFinger\",value:function(t){var e=this;return this.staffApi.deleteStaffFinger(t).pipe(Object(l[\"a\"])((function(t){e.msg.success({content:\"指纹信息清空成功\"})})))}},{key:\"deleteStaffCabinetPassword\",value:function(t){var e=this;return this.staffApi.deleteStaffCabinetPassword(t).pipe(Object(l[\"a\"])((function(t){e.msg.success({content:\"硬件密码清空成功\"})})))}},{key:\"init\",value:function(t){return Object(C[\"a\"])(this.searchDepartment(\"\"),this.getDepartmentList(),this.getStaffList(t),this.getRoleList())}},{key:\"beforeEach\",value:function(t,e){return this.init(t.query)}}]),t}();Object(d[\"b\"])([Object(u[\"c\"])(),Object(d[\"d\"])(\"design:type\",Function),Object(d[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(_=\"undefined\"!==typeof h[\"Params\"]&&h[\"Params\"])?_:Object]),Object(d[\"d\"])(\"design:returntype\",void 0)],$.prototype,\"getStaffList\",null),$=Object(d[\"b\"])([Object(f[\"b\"])(),Object(d[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(g=\"undefined\"!==typeof h[\"k\"]&&h[\"k\"])?g:Object,\"function\"===typeof(y=\"undefined\"!==typeof x[\"b\"]&&x[\"b\"])?y:Object,\"function\"===typeof(S=\"undefined\"!==typeof v[\"a\"]&&v[\"a\"])?S:Object,\"function\"===typeof(w=\"undefined\"!==typeof j[\"g\"]&&j[\"g\"])?w:Object,\"function\"===typeof(O=\"undefined\"!==typeof b&&b)?O:Object,\"function\"===typeof(k=\"undefined\"!==typeof m[\"a\"]&&m[\"a\"])?k:Object])],$)},9757:function(t,e,a){\"use strict\";a.r(e),a.d(e,\"RoleService\",(function(){return h}));a(\"7f7f\");var n,r,i=a(\"d225\"),s=a(\"b0b4\"),o=a(\"9ab4\"),c=a(\"0cd5\"),d=a(\"df29\"),f=a(\"c4cc\"),u=a(\"d792\"),l=a(\"3bc6\"),p=a(\"2cbb\"),m=a(\"ec41\"),h=function(){function t(e,a){Object(i[\"a\"])(this,t),this.roleApi=e,this.authService=a,this.roleList$=new d[\"d\"]([]),this.stat$=new d[\"d\"]({}),this.auth$=this.authService.authMap$({add:\"brand:auth:role|add\",del:\"brand:auth:role|del\",edit:\"brand:auth:role|edit\"})}return Object(s[\"a\"])(t,[{key:\"getAllList\",value:function(){var t=this;return this.roleApi.getAllList().pipe(Object(f[\"a\"])((function(e){t.roleList$.commit((function(){return e.roles})),t.stat$.commit((function(){return e.stat}))})))}},{key:\"getInitInfo\",value:function(t){return this.roleApi.getInitInfo(t)}},{key:\"getInfo\",value:function(t){return this.roleApi.getInfo(t)}},{key:\"add\",value:function(t){var e=this;return this.roleApi.add(t).pipe(Object(u[\"a\"])((function(t){return e.getAllList()})))}},{key:\"del\",value:function(t){var e=this;return this.roleApi.del(t).pipe(Object(u[\"a\"])((function(t){return e.getAllList()})))}},{key:\"update\",value:function(t){var e=this;return this.roleApi.update(t).pipe(Object(u[\"a\"])((function(t){return e.getAllList()})))}},{key:\"redirect\",value:function(t,e,a){\"brand-staff-role\"===t.name?a({name:\"brand-staff-role-info\",query:{id:Object(m[\"a\"])(this.roleList$.snapshot(),\"0.id\")}}):a()}},{key:\"beforeRouteEnter\",value:function(t,e,a){var n=this;this.getAllList().subscribe((function(){n.redirect(t,e,a)}))}},{key:\"beforeRouteUpdate\",value:function(t,e,a){this.redirect(t,e,a)}}]),t}();h=Object(o[\"b\"])([Object(c[\"b\"])(),Object(o[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(n=\"undefined\"!==typeof l[\"b\"]&&l[\"b\"])?n:Object,\"function\"===typeof(r=\"undefined\"!==typeof p[\"a\"]&&p[\"a\"])?r:Object])],h)},b875:function(t,e,a){\"use strict\";var n,r,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"st-modal\",{attrs:{title:\"工资账户设置\",size:\"small\"},on:{ok:t.onSubmit},model:{value:t.show,callback:function(e){t.show=e},expression:\"show\"}},[a(\"staff-info\",{attrs:{staff:t.staff}}),a(\"st-form\",{attrs:{form:t.form,labelWidth:\"70px\"}},[a(\"st-form-item\",{attrs:{label:\"姓名\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.account_name,expression:\"decorators.account_name\"}],attrs:{placeholder:\"请输入姓名\"}})],1),a(\"st-form-item\",{attrs:{label:\"银行卡号\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.card_number,expression:\"decorators.card_number\"}],attrs:{placeholder:\"请输入银行卡号\"}})],1),a(\"st-form-item\",{staticClass:\"mg-b0\",attrs:{label:\"开户银行\",required:\"\"}},[a(\"a-input\",{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:t.decorators.bank_name,expression:\"decorators.bank_name\"}],staticClass:\"mg-b8\",attrs:{placeholder:\"请输入开户银行\"}})],1)],1)],1)},s=[],o=(a(\"8e6e\"),a(\"ac6a\"),a(\"456d\"),a(\"bd86\")),c=a(\"7a7f\"),d=a(\"d225\"),f=a(\"b0b4\"),u=a(\"9ab4\"),l=a(\"0cd5\"),p=a(\"df29\"),m=a(\"c4cc\"),h=a(\"dcb5\"),v=a(\"e69b\"),b=function(){function t(e,a){Object(d[\"a\"])(this,t),this.staffApi=e,this.msg=a,this.accountInfo$=new p[\"d\"]({})}return Object(f[\"a\"])(t,[{key:\"getBankInfo\",value:function(t){var e=this;return this.staffApi.getBankInfo(t).pipe(Object(m[\"a\"])((function(t){e.accountInfo$.commit((function(){return t.bank}))})))}},{key:\"putStaffBindBank\",value:function(t){var e=this;return this.staffApi.putStaffBindBank(t).pipe(Object(m[\"a\"])((function(t){e.msg.success({content:\"员工银行账户设置成功\"})})))}}]),t}();b=Object(u[\"b\"])([Object(l[\"b\"])(),Object(u[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(n=\"undefined\"!==typeof h[\"k\"]&&h[\"k\"])?n:Object,\"function\"===typeof(r=\"undefined\"!==typeof v[\"a\"]&&v[\"a\"])?r:Object])],b);var _=function(t){return{account_name:{rules:[{required:!0,message:\"请输入姓名\"}]},card_number:{rules:[{required:!0,message:\"请输入姓名\"}]},bank_name:{rules:[{required:!0,message:\"请输入开户银行\"}]}}};function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),!0).forEach((function(e){Object(o[\"a\"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var S={name:\"SalaryAccountSetting\",serviceInject:function(){return{salaryAccountSettingService:b}},rxState:function(){return{accountInfo:this.salaryAccountSettingService.accountInfo$}},data:function(){var t=this.$stForm.create(),e=t.decorators(_);return{show:!1,form:t,decorators:e}},props:{staff:{type:Object,default:function(){}}},components:{StaffInfo:c[\"a\"]},methods:{getBankInfo:function(){var t=this;this.salaryAccountSettingService.getBankInfo(this.staff.id).subscribe((function(e){t.form.setFieldsValue({account_name:e.bank.account_name,card_number:e.bank.card_number,bank_name:e.bank.bank_name})}))},onSubmit:function(){var t=this;this.form.validate().then((function(e){t.salaryAccountSettingService.putStaffBindBank(y({id:t.staff.id},e)).subscribe((function(e){t.show=!1,t.$router.reload()}))}))}},mounted:function(){this.getBankInfo()}},w=S,O=a(\"2877\"),k=Object(O[\"a\"])(w,i,s,!1,null,null,null);e[\"a\"]=k.exports},c0d5:function(t,e,a){\"use strict\";var n,r,i,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"st-modal\",{attrs:{title:\"员工离职\",okText:t.operate?\"保存\":\"知道了\",size:\"small\",wrapClassName:\"modal-staff-turnover\",confirmLoading:t.loading.putStaffBrandQuit},on:{ok:t.onSubmit},model:{value:t.show,callback:function(e){t.show=e},expression:\"show\"}},[a(\"section\",[a(\"staff-info\",{attrs:{staff:t.staff}}),t.list&&t.list.length?a(\"staff-modal-tips\",{staticClass:\"modal-tips\",attrs:{list:t.list,type:2,canNotDelete:!t.operate}}):t._e(),a(\"st-form\",{staticClass:\"modal-staff-turnover__form\",attrs:{labelWidth:\"60px\"}},[a(\"st-form-item\",{staticClass:\"mg-b0\",attrs:{labelWidth:\"60px\",label:\"离职日期\"}},[a(\"a-date-picker\",{on:{change:t.onDateChange}})],1)],1)],1)])},o=[],c=a(\"7a7f\"),d=a(\"d225\"),f=a(\"b0b4\"),u=a(\"9ab4\"),l=a(\"0cd5\"),p=a(\"df29\"),m=a(\"c4cc\"),h=a(\"dcb5\"),v=a(\"e69b\"),b=function(){function t(e,a){Object(d[\"a\"])(this,t),this.staffApi=e,this.msg=a,this.list$=new p[\"d\"]([]),this.operate$=new p[\"d\"]({}),this.loading$=new p[\"d\"]({})}return Object(f[\"a\"])(t,[{key:\"getStaffCheckJob\",value:function(t){var e=this;return this.staffApi.getStaffCheckJob(t).pipe(Object(m[\"a\"])((function(t){e.list$.commit((function(){return t.list.filter((function(t){return 0!==t.num}))})),e.operate$.commit((function(){return t.operate}))})))}},{key:\"putStaffBrandQuit\",value:function(t){var e=this;return this.staffApi.putStaffBrandQuit(t).pipe(Object(m[\"a\"])((function(t){e.msg.success({content:\"员工已离职\"})})))}}]),t}();Object(u[\"b\"])([Object(p[\"c\"])(),Object(u[\"d\"])(\"design:type\",Function),Object(u[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(n=\"undefined\"!==typeof h[\"PutStaffBrandQuitInput\"]&&h[\"PutStaffBrandQuitInput\"])?n:Object]),Object(u[\"d\"])(\"design:returntype\",void 0)],b.prototype,\"putStaffBrandQuit\",null),b=Object(u[\"b\"])([Object(l[\"b\"])(),Object(u[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(r=\"undefined\"!==typeof h[\"k\"]&&h[\"k\"])?r:Object,\"function\"===typeof(i=\"undefined\"!==typeof v[\"a\"]&&v[\"a\"])?i:Object])],b);var _=a(\"88b8\"),g={name:\"turnover\",serviceInject:function(){return{turnoverService:b}},rxState:function(){return{list:this.turnoverService.list$,operate:this.turnoverService.operate$,loading:this.turnoverService.loading$}},data:function(){return{show:!1,checkJob:{},dateString:\"\"}},props:{staff:{type:Object,default:function(){}}},components:{StaffInfo:c[\"a\"],StaffModalTips:_[\"a\"]},filters:{unitFilter:function(t){return 5===t?\"个\":\"节\"}},mounted:function(){this.isTurnover()},methods:{onDateChange:function(t,e){this.dateString=e},isTurnover:function(){this.turnoverService.getStaffCheckJob(String(this.staff.id)).subscribe((function(){}))},onSubmit:function(){var t=this;this.show=!1,this.operate&&this.turnoverService.putStaffBrandQuit({id:this.staff.id,quit_time:this.dateString}).subscribe((function(e){t.$router.reload()}))}}},y=g,S=a(\"2877\"),w=Object(S[\"a\"])(y,s,o,!1,null,null,null);e[\"a\"]=w.exports},c6d4:function(t,e,a){\"use strict\";a.r(e),a.d(e,\"InfoService\",(function(){return p}));var n,r,i=a(\"d225\"),s=a(\"b0b4\"),o=a(\"9ab4\"),c=a(\"0cd5\"),d=a(\"df29\"),f=a(\"c4cc\"),u=a(\"dcb5\"),l=a(\"2cbb\"),p=function(){function t(e,a){Object(i[\"a\"])(this,t),this.staffApi=e,this.authService=a,this.info$=new d[\"d\"]({}),this.auth$=new d[\"d\"]({})}return Object(s[\"a\"])(t,[{key:\"getInfo\",value:function(t){var e=this;return this.staffApi.getStaffInfoCommonHeader(t).pipe(Object(f[\"a\"])((function(t){e.info$.commit((function(){return t.common_info})),e.auth$.commit((function(){return t.auth}))})))}},{key:\"beforeEach\",value:function(t,e){var a=t.meta.query.id;return this.getInfo(a)}}]),t}();Object(o[\"b\"])([Object(d[\"c\"])(),Object(o[\"d\"])(\"design:type\",Function),Object(o[\"d\"])(\"design:paramtypes\",[String]),Object(o[\"d\"])(\"design:returntype\",void 0)],p.prototype,\"getInfo\",null),p=Object(o[\"b\"])([Object(c[\"b\"])(),Object(o[\"d\"])(\"design:paramtypes\",[\"function\"===typeof(n=\"undefined\"!==typeof u[\"k\"]&&u[\"k\"])?n:Object,\"function\"===typeof(r=\"undefined\"!==typeof l[\"a\"]&&l[\"a\"])?r:Object])],p)}}]);","extractedComments":[]}